{"version":3,"sources":["../node_modules/react/cjs/react.production.js","../node_modules/react/index.js","../node_modules/scheduler/cjs/scheduler.production.js","../node_modules/scheduler/index.js","../node_modules/react-dom/cjs/react-dom.production.js","../node_modules/react-dom/index.js","../node_modules/react-dom/cjs/react-dom-client.production.js","../node_modules/react-dom/client.js","../node_modules/lodash.throttle/index.js","../node_modules/direction/index.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../node_modules/lodash/throttle.js","../node_modules/slate-react/node_modules/is-hotkey/lib/index.js","../node_modules/extend/index.js","../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/jsx-runtime.js","../node_modules/react-is/cjs/react-is.production.min.js","../node_modules/react-is/index.js","../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../node_modules/is-hotkey/lib/index.js","../node_modules/prismjs/prism.js","../src/index.tsx","../src/entry/index.tsx","../node_modules/is-plain-object/dist/is-plain-object.mjs","../node_modules/immer/src/utils/errors.ts","../node_modules/immer/src/utils/common.ts","../node_modules/immer/src/utils/plugins.ts","../node_modules/immer/src/core/scope.ts","../node_modules/immer/src/core/finalize.ts","../node_modules/immer/src/core/proxy.ts","../node_modules/immer/src/core/immerClass.ts","../node_modules/immer/src/core/current.ts","../node_modules/immer/src/plugins/es5.ts","../node_modules/immer/src/plugins/patches.ts","../node_modules/immer/src/plugins/mapset.ts","../node_modules/immer/src/plugins/all.ts","../node_modules/immer/src/immer.ts","../node_modules/immer/src/utils/env.ts","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/slate/src/utils/weak-maps.ts","../node_modules/slate/src/create-editor.ts","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/slate/src/utils/string.ts","../node_modules/slate/src/interfaces/element.ts","../node_modules/slate/src/interfaces/editor.ts","../node_modules/slate/src/interfaces/location.ts","../node_modules/slate/src/interfaces/node.ts","../node_modules/slate/src/interfaces/operation.ts","../node_modules/slate/src/interfaces/path.ts","../node_modules/slate/src/interfaces/path-ref.ts","../node_modules/slate/src/interfaces/point.ts","../node_modules/slate/src/interfaces/point-ref.ts","../node_modules/slate/src/interfaces/range.ts","../node_modules/slate/src/interfaces/range-ref.ts","../node_modules/slate/src/interfaces/scrubber.ts","../node_modules/slate/src/utils/deep-equal.ts","../node_modules/slate/src/interfaces/text.ts","../node_modules/slate/src/transforms/general.ts","../node_modules/slate/src/transforms/node.ts","../node_modules/slate/src/transforms/selection.ts","../node_modules/slate/src/transforms/text.ts","../node_modules/slate/src/transforms/index.ts","../node_modules/compute-scroll-into-view/src/index.ts","../node_modules/scroll-into-view-if-needed/es/index.js","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../.yarn/cache/@babel-runtime-npm-7.15.3-6333c71362-2f0b8d2d4e.zip/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/slate-react/src/utils/key.ts","../node_modules/slate-react/src/utils/weak-maps.ts","../node_modules/slate-react/src/utils/dom.ts","../node_modules/slate-react/src/utils/environment.ts","../node_modules/slate-react/src/plugin/react-editor.ts","../node_modules/slate-react/src/hooks/use-isomorphic-layout-effect.ts","../node_modules/slate-react/src/utils/range-list.ts","../node_modules/slate-react/src/components/string.tsx","../node_modules/slate-react/src/hooks/use-slate-static.tsx","../node_modules/slate-react/src/components/leaf.tsx","../node_modules/slate-react/src/components/text.tsx","../node_modules/slate-react/src/components/element.tsx","../node_modules/slate-react/src/hooks/use-decorate.ts","../node_modules/slate-react/src/hooks/use-selected.ts","../node_modules/slate-react/src/hooks/use-children.tsx","../node_modules/slate-react/src/hooks/use-read-only.ts","../node_modules/slate-react/src/hooks/use-slate.tsx","../node_modules/slate-react/src/utils/constants.ts","../node_modules/slate-react/src/utils/hotkeys.ts","../node_modules/slate-react/src/components/restore-dom/restore-dom-manager.ts","../node_modules/slate-react/src/components/restore-dom/restore-dom.tsx","../node_modules/slate-react/src/utils/diff-text.ts","../node_modules/slate-react/src/hooks/android-input-manager/android-input-manager.ts","../node_modules/slate-react/src/hooks/use-is-mounted.tsx","../node_modules/slate-react/src/hooks/use-mutation-observer.ts","../node_modules/slate-react/src/hooks/android-input-manager/use-android-input-manager.ts","../node_modules/slate-react/src/hooks/use-track-user-input.ts","../node_modules/slate-react/src/components/editable.tsx","../node_modules/slate-react/src/hooks/use-focused.ts","../node_modules/slate-react/src/hooks/use-slate-selector.tsx","../node_modules/slate-react/src/components/slate.tsx","../node_modules/slate-react/src/hooks/use-editor.tsx","../node_modules/slate-react/src/hooks/use-slate-selection.tsx","../node_modules/slate-react/src/utils/lines.ts","../node_modules/slate-react/src/plugin/with-react.ts","../node_modules/remark-parse/node_modules/mdast-util-to-string/lib/index.js","../node_modules/remark-parse/node_modules/micromark-util-chunked/index.js","../node_modules/remark-parse/node_modules/micromark-util-combine-extensions/index.js","../node_modules/remark-parse/node_modules/micromark-util-character/lib/unicode-punctuation-regex.js","../node_modules/remark-parse/node_modules/micromark-util-character/index.js","../node_modules/remark-parse/node_modules/micromark-factory-space/index.js","../node_modules/remark-parse/node_modules/micromark/lib/initialize/content.js","../node_modules/remark-parse/node_modules/micromark/lib/initialize/document.js","../node_modules/remark-parse/node_modules/micromark-util-classify-character/index.js","../node_modules/remark-parse/node_modules/micromark-util-resolve-all/index.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/attention.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/autolink.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/blank-line.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/block-quote.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/character-escape.js","../node_modules/decode-named-character-reference/index.dom.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/character-reference.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/code-fenced.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/code-indented.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/code-text.js","../node_modules/remark-parse/node_modules/micromark-util-subtokenize/index.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/content.js","../node_modules/remark-parse/node_modules/micromark-factory-destination/index.js","../node_modules/remark-parse/node_modules/micromark-factory-label/index.js","../node_modules/remark-parse/node_modules/micromark-factory-title/index.js","../node_modules/remark-parse/node_modules/micromark-factory-whitespace/index.js","../node_modules/remark-parse/node_modules/micromark-util-normalize-identifier/index.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/definition.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/hard-break-escape.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/heading-atx.js","../node_modules/remark-parse/node_modules/micromark-util-html-tag-name/index.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/html-flow.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/html-text.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/label-end.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/label-start-image.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/label-start-link.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/line-ending.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/thematic-break.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/list.js","../node_modules/remark-parse/node_modules/micromark-core-commonmark/lib/setext-underline.js","../node_modules/remark-parse/node_modules/micromark/lib/initialize/flow.js","../node_modules/remark-parse/node_modules/micromark/lib/initialize/text.js","../node_modules/remark-parse/node_modules/micromark/lib/create-tokenizer.js","../node_modules/remark-parse/node_modules/micromark/lib/constructs.js","../node_modules/remark-parse/node_modules/micromark/lib/parse.js","../node_modules/remark-parse/node_modules/micromark/lib/preprocess.js","../node_modules/remark-parse/node_modules/micromark/lib/postprocess.js","../node_modules/remark-parse/node_modules/micromark-util-decode-numeric-character-reference/index.js","../node_modules/remark-parse/node_modules/micromark-util-decode-string/index.js","../node_modules/remark-parse/node_modules/unist-util-stringify-position/lib/index.js","../node_modules/remark-parse/node_modules/mdast-util-from-markdown/lib/index.js","../node_modules/remark-parse/lib/index.js","../node_modules/bail/index.js","../node_modules/unified/lib/index.js","../node_modules/is-plain-obj/index.js","../node_modules/trough/lib/index.js","../node_modules/unist-util-stringify-position/lib/index.js","../node_modules/vfile-message/lib/index.js","../node_modules/vfile/lib/minpath.browser.js","../node_modules/vfile/lib/minproc.browser.js","../node_modules/vfile/lib/minurl.shared.js","../node_modules/vfile/lib/minurl.browser.js","../node_modules/vfile/lib/index.js","../node_modules/unified/lib/callable-instance.js","../node_modules/markdown-table/index.js","../node_modules/mdast-util-to-markdown/lib/handle/blockquote.js","../node_modules/mdast-util-to-markdown/lib/util/pattern-in-scope.js","../node_modules/mdast-util-to-markdown/lib/handle/break.js","../node_modules/longest-streak/index.js","../node_modules/mdast-util-to-markdown/lib/util/format-code-as-indented.js","../node_modules/mdast-util-to-markdown/lib/util/check-fence.js","../node_modules/mdast-util-to-markdown/lib/handle/code.js","../node_modules/mdast-util-to-markdown/lib/util/check-quote.js","../node_modules/mdast-util-to-markdown/lib/handle/definition.js","../node_modules/mdast-util-to-markdown/lib/util/check-emphasis.js","../node_modules/mdast-util-to-markdown/lib/util/encode-character-reference.js","../node_modules/micromark-util-character/index.js","../node_modules/micromark-util-classify-character/index.js","../node_modules/mdast-util-to-markdown/lib/util/encode-info.js","../node_modules/mdast-util-to-markdown/lib/handle/emphasis.js","../node_modules/unist-util-is/lib/index.js","../node_modules/unist-util-visit-parents/lib/index.js","../node_modules/mdast-util-to-markdown/node_modules/unist-util-visit/lib/index.js","../node_modules/mdast-util-to-string/lib/index.js","../node_modules/mdast-util-to-markdown/lib/util/format-heading-as-setext.js","../node_modules/mdast-util-to-markdown/lib/handle/heading.js","../node_modules/mdast-util-to-markdown/lib/handle/html.js","../node_modules/mdast-util-to-markdown/lib/handle/image.js","../node_modules/mdast-util-to-markdown/lib/handle/image-reference.js","../node_modules/mdast-util-to-markdown/lib/handle/inline-code.js","../node_modules/mdast-util-to-markdown/lib/util/format-link-as-autolink.js","../node_modules/mdast-util-to-markdown/lib/handle/link.js","../node_modules/mdast-util-to-markdown/lib/handle/link-reference.js","../node_modules/mdast-util-to-markdown/lib/util/check-bullet.js","../node_modules/mdast-util-to-markdown/lib/util/check-bullet-other.js","../node_modules/mdast-util-to-markdown/lib/util/check-bullet-ordered.js","../node_modules/mdast-util-to-markdown/lib/util/check-rule.js","../node_modules/mdast-util-to-markdown/lib/handle/list.js","../node_modules/mdast-util-to-markdown/lib/util/check-list-item-indent.js","../node_modules/mdast-util-to-markdown/lib/handle/list-item.js","../node_modules/mdast-util-to-markdown/lib/handle/paragraph.js","../node_modules/mdast-util-phrasing/lib/index.js","../node_modules/mdast-util-to-markdown/lib/handle/root.js","../node_modules/mdast-util-to-markdown/lib/util/check-strong.js","../node_modules/mdast-util-to-markdown/lib/handle/strong.js","../node_modules/mdast-util-to-markdown/lib/handle/text.js","../node_modules/mdast-util-to-markdown/lib/util/check-rule-repetition.js","../node_modules/mdast-util-to-markdown/lib/handle/thematic-break.js","../node_modules/mdast-util-to-markdown/lib/handle/index.js","../node_modules/mdast-util-gfm-table/lib/index.js","../node_modules/micromark-util-chunked/index.js","../node_modules/micromark-util-combine-extensions/index.js","../node_modules/micromark-extension-gfm-autolink-literal/lib/syntax.js","../node_modules/micromark-util-resolve-all/index.js","../node_modules/micromark-factory-space/index.js","../node_modules/micromark-core-commonmark/lib/blank-line.js","../node_modules/micromark-util-normalize-identifier/index.js","../node_modules/micromark-extension-gfm-footnote/lib/syntax.js","../node_modules/micromark-extension-gfm-strikethrough/lib/syntax.js","../node_modules/micromark-extension-gfm-table/lib/edit-map.js","../node_modules/micromark-extension-gfm-table/lib/infer.js","../node_modules/micromark-extension-gfm-table/lib/syntax.js","../node_modules/micromark-extension-gfm-task-list-item/lib/syntax.js","../node_modules/micromark-extension-gfm/index.js","../node_modules/mdast-util-gfm-autolink-literal/lib/index.js","../node_modules/mdast-util-gfm-footnote/lib/index.js","../node_modules/mdast-util-gfm-strikethrough/lib/index.js","../node_modules/mdast-util-gfm-task-list-item/lib/index.js","../node_modules/mdast-util-gfm/lib/index.js","../src/convert/parse/custom-gfm.ts","../src/convert/utils.ts","../src/convert/parse/parse-blockquote.ts","../src/convert/parse/parse-code-block.ts","../src/convert/parse/parse-footnote-definition.ts","../src/convert/serialize/serialize-line/utils/is-utils.ts","../src/convert/serialize/serialize-line/utils/mark-utils/mark-convert-utils.ts","../src/convert/serialize/serialize-line/utils/mark-utils/mark-get-utils.ts","../src/convert/serialize/serialize-line/utils/mark-utils/mark-order-utils.ts","../src/convert/serialize/serialize-line/utils/text-utils.ts","../src/convert/parse/parse-phrasing-content/normalize-segment.ts","../src/convert/parse/parse-phrasing-content/normalize-segments.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/parse-generic-image.ts","../src/convert/parseUrl.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/parse-utils.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/parse-portive-image.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/parse-uncommon-mark-image.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/image-parsers.ts","../src/convert/parse/parse-phrasing-content/parse-inline-image/index.ts","../src/convert/parse/parse-phrasing-content/parse-phrasing-content.ts","../src/convert/parse/parse-heading.ts","../src/convert/parse/parse-html.ts","../src/convert/parse/parse-list/parse-list-item-child.ts","../src/convert/parse/parse-list/parse-list-item.ts","../src/convert/parse/parse-list/parse-list.ts","../src/convert/parse/parse-paragraph.ts","../src/convert/parse/parse-table.ts","../src/convert/parse/parse-thematic-break.ts","../src/convert/parse/parse-content.ts","../node_modules/unist-util-visit/node_modules/unist-util-is/lib/index.js","../node_modules/unist-util-visit/node_modules/unist-util-visit-parents/lib/index.js","../node_modules/unist-util-visit/lib/index.js","../node_modules/mdast-util-definitions/lib/index.js","../src/convert/parse/transform-inline-links.ts","../src/convert/parse/index.ts","../src/convert/serialize/normalize/normalizeElementListDepths.ts","../src/convert/serialize/serialize-code-block/serialize-code-line.ts","../src/convert/serialize/serialize-code-block/index.ts","../src/convert/serialize/serialize-image-shared/serialize-generic-image-url.ts","../src/convert/serialize/serialize-image-shared/serialize-portive-image-url.ts","../src/convert/serialize/serialize-image-shared/serialize-uncommonmark-image-url.ts","../src/convert/serialize/serialize-image-shared/index.ts","../src/convert/serialize/serialize-image-block/index.ts","../src/convert/serialize/serialize-line/diff-marks/find-marks-to-add.ts","../src/convert/serialize/serialize-line/diff-marks/find-marks-to-remove.ts","../src/convert/serialize/serialize-line/diff-marks/index.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/merge-adjacent-spaces.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/move-spaces-out-of-anchors.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/must-have-one-text-child.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/slice-spaces-at-node-boundaries.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/trim-spaces-at-end-of-line.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/trim-spaces-at-start-of-line.ts","../src/convert/serialize/serialize-line/normalize-line/normalizers/index.ts","../src/convert/serialize/serialize-line/normalize-line/run-normalizers-on-node.ts","../src/convert/serialize/serialize-line/normalize-line/normalize-nodes.ts","../src/convert/serialize/serialize-line/normalize-line/index.ts","../src/convert/serialize/serialize-line/segment/serialize-code-text.ts","../src/convert/serialize/serialize-line/segment/serialize-anchor.ts","../src/convert/serialize/serialize-line/segment/serialize-non-code-text.ts","../src/convert/serialize/serialize-line/segment/serialize-segment.ts","../src/convert/serialize/serialize-line/serialize-line.ts","../src/convert/serialize/serialize-table/index.ts","../src/convert/serialize/serialize-element.ts","../src/convert/serialize/serialize-elements.ts","../src/convert/serialize/index.ts","../src/utils/translations.ts","../src/sink/create-plugin/index.ts","../src/sink/editable/index.tsx","../src/sink/editable/utils.ts","../src/sink/editable/create-decorate.ts","../src/sink/editable/create-editable.tsx","../src/sink/editable/create-handler.ts","../src/sink/editable/create-render-element.ts","../src/sink/editable/create-render-leaf.ts","../src/sink/editable/create-render-placeholder.tsx","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/@emotion/react/dist/emotion-element-f0de968e.browser.esm.js","../node_modules/@emotion/sheet/dist/emotion-sheet.esm.js","../node_modules/stylis/src/Enum.js","../node_modules/stylis/src/Utility.js","../node_modules/stylis/src/Tokenizer.js","../node_modules/stylis/src/Parser.js","../node_modules/stylis/src/Serializer.js","../node_modules/stylis/src/Middleware.js","../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","../node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","../node_modules/@emotion/hash/dist/emotion-hash.esm.js","../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","../node_modules/@emotion/serialize/dist/emotion-serialize.esm.js","../node_modules/@emotion/use-insertion-effect-with-fallbacks/dist/emotion-use-insertion-effect-with-fallbacks.browser.esm.js","../node_modules/@emotion/react/dist/emotion-react.browser.esm.js","../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js","../node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.esm.js","../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js","../src/sink/editable/styles.tsx","../src/sink/editor/create-boolean-action.ts","../src/sink/editor/create-void-action.ts","../src/sink/editor/index.ts","../src/sink/create-sink/index.tsx","../src/sink/utils/core-utils/better-at.ts","../src/sink/utils/core-utils/curry.ts","../src/sink/utils/core-utils/is-mac.ts","../src/sink/utils/core-utils/stop-event.ts","../src/sink/utils/standardize-utils/standardize-node-matcher.ts","../src/sink/utils/find-utils/find-element-up.ts","../src/sink/utils/icon-utils/tabler-icon.tsx","../src/sink/utils/is-utils/is-collapsed.ts","../src/sink/utils/is-utils/is-element-type.ts","../src/sink/utils/is-utils/is-end-of-element.ts","../src/sink/utils/is-utils/is-start-of-element.ts","../src/sink/utils/key-utils/create-autocomplete-space-handler.tsx","../src/sink/utils/key-utils/is-better-hotkey.ts","../src/sink/utils/key-utils/create-hotkey-handler.ts","../src/sink/utils/normalize-utils/force-normalize-path.ts","../src/sink/utils/normalize-utils/normalize-siblings.ts","../src/sink/utils/select-utils/index.ts","../src/sink/utils/standardize-utils/target-element.ts","../src/sink/utils/transform-utils/insert-root-element.ts","../src/sink/utils/transform-utils/rewrap-element.ts","../src/sink/utils/transform-utils/set-nodes-dynamic.ts","../src/anchor-plugin/editable/on-paste.tsx","../src/anchor-plugin/methods/editLink.ts","../src/anchor-plugin/methods/insertLink.ts","../src/anchor-plugin/methods/removeLink.ts","../src/anchor-plugin/methods/index.ts","../src/anchor-plugin/normalize-node/index.ts","../node_modules/clsx/dist/clsx.m.js","../src/anchor-plugin/render-element/anchor.tsx","../src/use-layer/layers.tsx","../src/use-layer/portal.tsx","../src/use-layer/use-layer.tsx","../src/anchor-plugin/styles.tsx","../src/anchor-plugin/render-element/AnchorDialog.tsx","../src/shared-overlays/components/CloseMask/index.tsx","../src/shared-overlays/styles/$CloseMask.tsx","../src/shared-overlays/components/Menu/formatHotkey.ts","../src/shared-overlays/components/Menu/Menu.tsx","../src/use-reposition/get-methods/get-fixed-rect.ts","../src/use-reposition/get-methods/get-absolute-rect.ts","../src/use-reposition/get-methods/get-fixed-viewport.ts","../src/use-reposition/get-methods/get-absolute-viewport.ts","../node_modules/just-map-values/index.mjs","../src/use-reposition/utils.ts","../src/use-reposition/hooks/use-reposition.tsx","../src/use-reposition/hooks/use-throttled-refresh.ts","../src/use-reposition/hooks/use-absolute-reposition.tsx","../src/use-reposition/position-methods/index.ts","../src/shared-overlays/styles/$Panel.ts","../src/toolbar-plugin/styles/anchor-dialog-styles.ts","../src/shared-layout/index.ts","../src/toolbar-plugin/styles/layout-styles.ts","../src/toolbar-plugin/styles/menu-styles.ts","../src/toolbar-plugin/styles/toolbar-styles.ts","../src/shared-overlays/components/Menu/MenuItem.tsx","../src/use-tooltip/index.tsx","../src/use-tooltip/tooltip.tsx","../src/use-tooltip/triangle.tsx","../src/anchor-plugin/render-element/AnchorEditDialog.tsx","../src/shared-styles/index.ts","../src/anchor-plugin/render-element/icons.tsx","../src/anchor-plugin/index.tsx","../src/atomic-delete-plugin/is-safe-delete.ts","../src/atomic-delete-plugin/index.ts","../src/image-plugin/methods/index.ts","../src/image-plugin/normalize-node/index.ts","../src/image-plugin/styles/image-block-styles.tsx","../src/image-plugin/render-element/image-with-controls/index.tsx","../src/image-plugin/styles/image-with-controls-styles/image-with-controls-styles.tsx","../src/image-plugin/render-element/image-with-controls/image-resize-controls/image-resize-control.tsx","../src/use-reposition/hooks/use-resize-browser.tsx","../src/image-plugin/styles/image-with-controls-styles/image-resize-handle-styles.tsx","../src/image-plugin/utils/min-max.ts","../src/image-plugin/utils/resize-utils.ts","../src/image-plugin/styles/image-with-controls-styles/image-size-status-styles.tsx","../src/image-plugin/render-element/image-with-controls/image-size-status/image-size-status.tsx","../src/image-plugin/styles/image-with-controls-styles/image-toolbar-styles.tsx","../src/image-plugin/styles/image-with-controls-styles/image-buttons-styles.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-preset-buttons/image-preset-button.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-preset-buttons/image-preset-button-group.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-type-buttons/block-image-type-button.tsx","../src/image-plugin/render-element/icons.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-type-buttons/convert-to-inline-image.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-type-buttons/inline-image-type-button.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-type-buttons/convert-to-block-image.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-type-buttons/image-type-button-group.tsx","../src/image-plugin/render-element/image-with-controls/image-toolbar/image-toolbar.tsx","../src/image-plugin/render-element/image-block.tsx","../src/image-plugin/styles/image-inline-styles.tsx","../src/image-plugin/render-element/image-inline.tsx","../src/image-plugin/render-element/index.tsx","../src/image-plugin/index.tsx","../src/block-quote-plugin/styles.tsx","../src/block-quote-plugin/index.tsx","../src/code-block-plugin/decorate.tsx","../src/code-block-plugin/methods/createCodeBlock.ts","../src/code-block-plugin/methods/setCodeBlockLanguage.ts","../src/code-block-plugin/methods/index.ts","../src/code-block-plugin/prism-theme.ts","../src/code-block-plugin/types.tsx","../src/code-block-plugin/normalizeNode.tsx","../src/code-block-plugin/render-element/CodeBlock.tsx","../src/code-block-plugin/icons/ChevronDownIcon.tsx","../src/code-block-plugin/styles.ts","../src/code-block-plugin/render-element/CodeBlockLine.tsx","../src/code-block-plugin/render-element/index.tsx","../src/code-block-plugin/index.tsx","../src/collapsible-paragraph-plugin/normalize-node/normalize-sibling-paragraphs.ts","../src/collapsible-paragraph-plugin/normalize-node/normalize-sibling-walls.ts","../src/collapsible-paragraph-plugin/normalize-node/index.ts","../src/collapsible-paragraph-plugin/render-element/styles.ts","../src/collapsible-paragraph-plugin/render-element/utils.ts","../src/collapsible-paragraph-plugin/render-element/paragraph.tsx","../src/collapsible-paragraph-plugin/index.tsx","../src/convert-element-plugin/methods/add-convert-element-type.ts","../src/convert-element-plugin/methods/convert-elements.ts","../src/convert-element-plugin/methods/is-convert-element.ts","../src/convert-element-plugin/methods/index.ts","../src/convert-element-plugin/index.tsx","../src/heading-plugin/insert-break.ts","../src/heading-plugin/methods/index.ts","../src/heading-plugin/styles.ts","../src/heading-plugin/index.tsx","../src/horizontal-rule-plugin/styles.tsx","../src/horizontal-rule-plugin/horizontal-rule.tsx","../src/horizontal-rule-plugin/methods/index.ts","../src/horizontal-rule-plugin/index.tsx","../src/list-plugin/methods/convert-list-item.ts","../src/list-plugin/methods/depth.ts","../src/list-plugin/methods/indent.ts","../src/list-plugin/methods/insert-break.ts","../src/list-plugin/methods/outdent.ts","../src/list-plugin/methods/toggleTaskListItem.ts","../src/list-plugin/methods/index.ts","../src/list-plugin/normalize-node/normalize-ordered-first-at-depth.ts","../src/list-plugin/normalize-node/index.ts","../src/list-plugin/render-element/ordered-list-item.tsx","../src/list-plugin/render-element/styles.ts","../src/list-plugin/render-element/task-list-item.tsx","../src/list-plugin/render-element/list-icons.tsx","../src/list-plugin/render-element/unordered-list-item.tsx","../src/list-plugin/render-element/index.tsx","../src/list-plugin/index.tsx","../src/marks-plugin/methods/removeMarks.ts","../src/marks-plugin/methods/toggle-mark.ts","../src/marks-plugin/methods/index.ts","../src/marks-plugin/styles.tsx","../src/marks-plugin/index.tsx","../src/normalize-after-delete-plugin/index.tsx","../src/table-plugin/delete-fragment/get-reversed-delete-safe-ranges.ts","../src/table-plugin/delete-fragment/index.ts","../src/table-plugin/methods/get-table-info.ts","../src/table-plugin/methods/utils.ts","../src/table-plugin/methods/insert-column.ts","../src/table-plugin/methods/insert-row.ts","../src/table-plugin/methods/insert-table.ts","../src/table-plugin/methods/navigation/select-element.ts","../src/table-plugin/methods/navigation/utils.ts","../src/table-plugin/methods/navigation/index.ts","../src/table-plugin/methods/remove-table.ts","../src/table-plugin/methods/remove-column.ts","../src/table-plugin/methods/remove-row.ts","../src/table-plugin/methods/setTableColumnAlign.ts","../src/table-plugin/methods/tab.ts","../src/table-plugin/methods/index.ts","../src/table-plugin/normalize/normalize-table.ts","../src/table-plugin/normalize/normalize-table-cell.ts","../src/table-plugin/render-element/table.tsx","../src/table-plugin/render-element/styles/table-menu-styles.ts","../src/table-plugin/render-element/styles/index.ts","../src/table-plugin/render-element/table-context.tsx","../src/table-plugin/render-element/table-cell/index.tsx","../src/table-plugin/render-element/table-cell/column-menu/index.tsx","../src/table-plugin/icons.tsx","../src/table-plugin/render-element/table-cell/row-menu/index.tsx","../src/table-plugin/render-element/table-cell/table-menu/$table-menu.tsx","../src/table-plugin/render-element/table-cell/table-menu/index.tsx","../src/table-plugin/render-element/table-content.tsx","../src/table-plugin/render-element/table-row.tsx","../src/table-plugin/render-element/index.tsx","../src/table-plugin/index.tsx","../src/theme-plugin/global-styles.ts","../src/theme-plugin/index.tsx","../src/toolbar-plugin/render-editable/index.tsx","../src/toolbar-plugin/components/dialog/table-dialog.tsx","../src/toolbar-plugin/styles/table-styles.ts","../src/toolbar-plugin/components/toolbar/toolbar.tsx","../src/toolbar-plugin/icons.tsx","../src/toolbar-plugin/items/block-items.tsx","../src/toolbar-plugin/components/dialog/anchor-dialog.tsx","../src/toolbar-plugin/styles/dialog-shared-styles.ts","../src/toolbar-plugin/items/dialogItems.tsx","../src/toolbar-plugin/items/mark-items.tsx","../src/toolbar-plugin/items/list-items.tsx","../src/toolbar-plugin/items/quote-items.tsx","../src/toolbar-plugin/items/raw-mode-item.tsx","../src/toolbar-plugin/items/index.tsx","../src/toolbar-plugin/components/toolbar/toolbar-button.tsx","../src/toolbar-plugin/index.tsx","../src/trailing-block-plugin/index.tsx","../src/paste-markdown-plugin/methods/index.ts","../src/paste-markdown-plugin/index.tsx","../src/placeholder-plugin/index.tsx","../src/entry/plugins.ts","../src/entry/SinkEditable.tsx","../src/entry/useEditor.tsx","../node_modules/slate-history/src/history.ts","../node_modules/slate-history/src/history-editor.ts","../node_modules/slate-history/src/with-history.ts"],"sourcesContent":["/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar ReactNoopUpdateQueue = {\n    isMounted: function () {\n      return !1;\n    },\n    enqueueForceUpdate: function () {},\n    enqueueReplaceState: function () {},\n    enqueueSetState: function () {}\n  },\n  assign = Object.assign,\n  emptyObject = {};\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nComponent.prototype.isReactComponent = {};\nComponent.prototype.setState = function (partialState, callback) {\n  if (\n    \"object\" !== typeof partialState &&\n    \"function\" !== typeof partialState &&\n    null != partialState\n  )\n    throw Error(\n      \"takes an object of state variables to update or a function which returns an object of state variables.\"\n    );\n  this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n};\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n};\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nvar pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\npureComponentPrototype.constructor = PureComponent;\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = !0;\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals = { H: null, A: null, T: null, S: null },\n  hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction ReactElement(type, key, self, source, owner, props) {\n  self = props.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== self ? self : null,\n    props: props\n  };\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  return ReactElement(\n    oldElement.type,\n    newKey,\n    void 0,\n    void 0,\n    void 0,\n    oldElement.props\n  );\n}\nfunction isValidElement(object) {\n  return (\n    \"object\" === typeof object &&\n    null !== object &&\n    object.$$typeof === REACT_ELEMENT_TYPE\n  );\n}\nfunction escape(key) {\n  var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n  return (\n    \"$\" +\n    key.replace(/[=:]/g, function (match) {\n      return escaperLookup[match];\n    })\n  );\n}\nvar userProvidedKeyEscapeRegex = /\\/+/g;\nfunction getElementKey(element, index) {\n  return \"object\" === typeof element && null !== element && null != element.key\n    ? escape(\"\" + element.key)\n    : index.toString(36);\n}\nfunction noop$1() {}\nfunction resolveThenable(thenable) {\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw thenable.reason;\n    default:\n      switch (\n        (\"string\" === typeof thenable.status\n          ? thenable.then(noop$1, noop$1)\n          : ((thenable.status = \"pending\"),\n            thenable.then(\n              function (fulfilledValue) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"fulfilled\"),\n                  (thenable.value = fulfilledValue));\n              },\n              function (error) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"rejected\"), (thenable.reason = error));\n              }\n            )),\n        thenable.status)\n      ) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n      }\n  }\n  throw thenable;\n}\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n  if (\"undefined\" === type || \"boolean\" === type) children = null;\n  var invokeCallback = !1;\n  if (null === children) invokeCallback = !0;\n  else\n    switch (type) {\n      case \"bigint\":\n      case \"string\":\n      case \"number\":\n        invokeCallback = !0;\n        break;\n      case \"object\":\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = !0;\n            break;\n          case REACT_LAZY_TYPE:\n            return (\n              (invokeCallback = children._init),\n              mapIntoArray(\n                invokeCallback(children._payload),\n                array,\n                escapedPrefix,\n                nameSoFar,\n                callback\n              )\n            );\n        }\n    }\n  if (invokeCallback)\n    return (\n      (callback = callback(children)),\n      (invokeCallback =\n        \"\" === nameSoFar ? \".\" + getElementKey(children, 0) : nameSoFar),\n      isArrayImpl(callback)\n        ? ((escapedPrefix = \"\"),\n          null != invokeCallback &&\n            (escapedPrefix =\n              invokeCallback.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n          mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n            return c;\n          }))\n        : null != callback &&\n          (isValidElement(callback) &&\n            (callback = cloneAndReplaceKey(\n              callback,\n              escapedPrefix +\n                (null == callback.key ||\n                (children && children.key === callback.key)\n                  ? \"\"\n                  : (\"\" + callback.key).replace(\n                      userProvidedKeyEscapeRegex,\n                      \"$&/\"\n                    ) + \"/\") +\n                invokeCallback\n            )),\n          array.push(callback)),\n      1\n    );\n  invokeCallback = 0;\n  var nextNamePrefix = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n  if (isArrayImpl(children))\n    for (var i = 0; i < children.length; i++)\n      (nameSoFar = children[i]),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n    for (\n      children = i.call(children), i = 0;\n      !(nameSoFar = children.next()).done;\n\n    )\n      (nameSoFar = nameSoFar.value),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i++)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (\"object\" === type) {\n    if (\"function\" === typeof children.then)\n      return mapIntoArray(\n        resolveThenable(children),\n        array,\n        escapedPrefix,\n        nameSoFar,\n        callback\n      );\n    array = String(children);\n    throw Error(\n      \"Objects are not valid as a React child (found: \" +\n        (\"[object Object]\" === array\n          ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n          : array) +\n        \"). If you meant to render a collection of children, use an array instead.\"\n    );\n  }\n  return invokeCallback;\n}\nfunction mapChildren(children, func, context) {\n  if (null == children) return children;\n  var result = [],\n    count = 0;\n  mapIntoArray(children, result, \"\", \"\", function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\nfunction lazyInitializer(payload) {\n  if (-1 === payload._status) {\n    var ctor = payload._result;\n    ctor = ctor();\n    ctor.then(\n      function (moduleObject) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 1), (payload._result = moduleObject);\n      },\n      function (error) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 2), (payload._result = error);\n      }\n    );\n    -1 === payload._status && ((payload._status = 0), (payload._result = ctor));\n  }\n  if (1 === payload._status) return payload._result.default;\n  throw payload._result;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction noop() {}\nexports.Children = {\n  map: mapChildren,\n  forEach: function (children, forEachFunc, forEachContext) {\n    mapChildren(\n      children,\n      function () {\n        forEachFunc.apply(this, arguments);\n      },\n      forEachContext\n    );\n  },\n  count: function (children) {\n    var n = 0;\n    mapChildren(children, function () {\n      n++;\n    });\n    return n;\n  },\n  toArray: function (children) {\n    return (\n      mapChildren(children, function (child) {\n        return child;\n      }) || []\n    );\n  },\n  only: function (children) {\n    if (!isValidElement(children))\n      throw Error(\n        \"React.Children.only expected to receive a single React element child.\"\n      );\n    return children;\n  }\n};\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  ReactSharedInternals;\nexports.act = function () {\n  throw Error(\"act(...) is not supported in production builds of React.\");\n};\nexports.cache = function (fn) {\n  return function () {\n    return fn.apply(null, arguments);\n  };\n};\nexports.cloneElement = function (element, config, children) {\n  if (null === element || void 0 === element)\n    throw Error(\n      \"The argument must be a React element, but you passed \" + element + \".\"\n    );\n  var props = assign({}, element.props),\n    key = element.key,\n    owner = void 0;\n  if (null != config)\n    for (propName in (void 0 !== config.ref && (owner = void 0),\n    void 0 !== config.key && (key = \"\" + config.key),\n    config))\n      !hasOwnProperty.call(config, propName) ||\n        \"key\" === propName ||\n        \"__self\" === propName ||\n        \"__source\" === propName ||\n        (\"ref\" === propName && void 0 === config.ref) ||\n        (props[propName] = config[propName]);\n  var propName = arguments.length - 2;\n  if (1 === propName) props.children = children;\n  else if (1 < propName) {\n    for (var childArray = Array(propName), i = 0; i < propName; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  return ReactElement(element.type, key, void 0, void 0, owner, props);\n};\nexports.createContext = function (defaultValue) {\n  defaultValue = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    _threadCount: 0,\n    Provider: null,\n    Consumer: null\n  };\n  defaultValue.Provider = defaultValue;\n  defaultValue.Consumer = {\n    $$typeof: REACT_CONSUMER_TYPE,\n    _context: defaultValue\n  };\n  return defaultValue;\n};\nexports.createElement = function (type, config, children) {\n  var propName,\n    props = {},\n    key = null;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      hasOwnProperty.call(config, propName) &&\n        \"key\" !== propName &&\n        \"__self\" !== propName &&\n        \"__source\" !== propName &&\n        (props[propName] = config[propName]);\n  var childrenLength = arguments.length - 2;\n  if (1 === childrenLength) props.children = children;\n  else if (1 < childrenLength) {\n    for (var childArray = Array(childrenLength), i = 0; i < childrenLength; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  if (type && type.defaultProps)\n    for (propName in ((childrenLength = type.defaultProps), childrenLength))\n      void 0 === props[propName] &&\n        (props[propName] = childrenLength[propName]);\n  return ReactElement(type, key, void 0, void 0, null, props);\n};\nexports.createRef = function () {\n  return { current: null };\n};\nexports.forwardRef = function (render) {\n  return { $$typeof: REACT_FORWARD_REF_TYPE, render: render };\n};\nexports.isValidElement = isValidElement;\nexports.lazy = function (ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: { _status: -1, _result: ctor },\n    _init: lazyInitializer\n  };\n};\nexports.memo = function (type, compare) {\n  return {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: void 0 === compare ? null : compare\n  };\n};\nexports.startTransition = function (scope) {\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  try {\n    var returnValue = scope(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    \"object\" === typeof returnValue &&\n      null !== returnValue &&\n      \"function\" === typeof returnValue.then &&\n      returnValue.then(noop, reportGlobalError);\n  } catch (error) {\n    reportGlobalError(error);\n  } finally {\n    ReactSharedInternals.T = prevTransition;\n  }\n};\nexports.unstable_useCacheRefresh = function () {\n  return ReactSharedInternals.H.useCacheRefresh();\n};\nexports.use = function (usable) {\n  return ReactSharedInternals.H.use(usable);\n};\nexports.useActionState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useActionState(action, initialState, permalink);\n};\nexports.useCallback = function (callback, deps) {\n  return ReactSharedInternals.H.useCallback(callback, deps);\n};\nexports.useContext = function (Context) {\n  return ReactSharedInternals.H.useContext(Context);\n};\nexports.useDebugValue = function () {};\nexports.useDeferredValue = function (value, initialValue) {\n  return ReactSharedInternals.H.useDeferredValue(value, initialValue);\n};\nexports.useEffect = function (create, deps) {\n  return ReactSharedInternals.H.useEffect(create, deps);\n};\nexports.useId = function () {\n  return ReactSharedInternals.H.useId();\n};\nexports.useImperativeHandle = function (ref, create, deps) {\n  return ReactSharedInternals.H.useImperativeHandle(ref, create, deps);\n};\nexports.useInsertionEffect = function (create, deps) {\n  return ReactSharedInternals.H.useInsertionEffect(create, deps);\n};\nexports.useLayoutEffect = function (create, deps) {\n  return ReactSharedInternals.H.useLayoutEffect(create, deps);\n};\nexports.useMemo = function (create, deps) {\n  return ReactSharedInternals.H.useMemo(create, deps);\n};\nexports.useOptimistic = function (passthrough, reducer) {\n  return ReactSharedInternals.H.useOptimistic(passthrough, reducer);\n};\nexports.useReducer = function (reducer, initialArg, init) {\n  return ReactSharedInternals.H.useReducer(reducer, initialArg, init);\n};\nexports.useRef = function (initialValue) {\n  return ReactSharedInternals.H.useRef(initialValue);\n};\nexports.useState = function (initialState) {\n  return ReactSharedInternals.H.useState(initialState);\n};\nexports.useSyncExternalStore = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot\n) {\n  return ReactSharedInternals.H.useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    getServerSnapshot\n  );\n};\nexports.useTransition = function () {\n  return ReactSharedInternals.H.useTransition();\n};\nexports.version = \"19.0.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0), requestHostCallback();\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return exports.unstable_now() - startTime < frameInterval ? !1 : !0;\n}\nfunction performWorkUntilDeadline() {\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostCallback() {\n  isMessageLoopRunning ||\n    ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n}\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_continueExecution = function () {\n  isHostCallbackScheduled ||\n    isPerformingWork ||\n    ((isHostCallbackScheduled = !0), requestHostCallback());\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_getFirstCallbackNode = function () {\n  return peek(taskQueue);\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_pauseExecution = function () {};\nexports.unstable_requestPaint = function () {};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0), requestHostCallback()));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction noop() {}\nvar Internals = {\n    d: {\n      f: noop,\n      r: function () {\n        throw Error(formatProdErrorMessage(522));\n      },\n      D: noop,\n      C: noop,\n      L: noop,\n      m: noop,\n      X: noop,\n      S: noop,\n      M: noop\n    },\n    p: 0,\n    findDOMNode: null\n  },\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nfunction createPortal$1(children, containerInfo, implementation) {\n  var key =\n    3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: null == key ? null : \"\" + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nvar ReactSharedInternals =\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\nfunction getCrossOriginStringAs(as, input) {\n  if (\"font\" === as) return \"\";\n  if (\"string\" === typeof input)\n    return \"use-credentials\" === input ? input : \"\";\n}\nexports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  Internals;\nexports.createPortal = function (children, container) {\n  var key =\n    2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n  if (\n    !container ||\n    (1 !== container.nodeType &&\n      9 !== container.nodeType &&\n      11 !== container.nodeType)\n  )\n    throw Error(formatProdErrorMessage(299));\n  return createPortal$1(children, container, null, key);\n};\nexports.flushSync = function (fn) {\n  var previousTransition = ReactSharedInternals.T,\n    previousUpdatePriority = Internals.p;\n  try {\n    if (((ReactSharedInternals.T = null), (Internals.p = 2), fn)) return fn();\n  } finally {\n    (ReactSharedInternals.T = previousTransition),\n      (Internals.p = previousUpdatePriority),\n      Internals.d.f();\n  }\n};\nexports.preconnect = function (href, options) {\n  \"string\" === typeof href &&\n    (options\n      ? ((options = options.crossOrigin),\n        (options =\n          \"string\" === typeof options\n            ? \"use-credentials\" === options\n              ? options\n              : \"\"\n            : void 0))\n      : (options = null),\n    Internals.d.C(href, options));\n};\nexports.prefetchDNS = function (href) {\n  \"string\" === typeof href && Internals.d.D(href);\n};\nexports.preinit = function (href, options) {\n  if (\"string\" === typeof href && options && \"string\" === typeof options.as) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n      integrity =\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      fetchPriority =\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0;\n    \"style\" === as\n      ? Internals.d.S(\n          href,\n          \"string\" === typeof options.precedence ? options.precedence : void 0,\n          {\n            crossOrigin: crossOrigin,\n            integrity: integrity,\n            fetchPriority: fetchPriority\n          }\n        )\n      : \"script\" === as &&\n        Internals.d.X(href, {\n          crossOrigin: crossOrigin,\n          integrity: integrity,\n          fetchPriority: fetchPriority,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n  }\n};\nexports.preinitModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (\"object\" === typeof options && null !== options) {\n      if (null == options.as || \"script\" === options.as) {\n        var crossOrigin = getCrossOriginStringAs(\n          options.as,\n          options.crossOrigin\n        );\n        Internals.d.M(href, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n      }\n    } else null == options && Internals.d.M(href);\n};\nexports.preload = function (href, options) {\n  if (\n    \"string\" === typeof href &&\n    \"object\" === typeof options &&\n    null !== options &&\n    \"string\" === typeof options.as\n  ) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);\n    Internals.d.L(href, as, {\n      crossOrigin: crossOrigin,\n      integrity:\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n      type: \"string\" === typeof options.type ? options.type : void 0,\n      fetchPriority:\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0,\n      referrerPolicy:\n        \"string\" === typeof options.referrerPolicy\n          ? options.referrerPolicy\n          : void 0,\n      imageSrcSet:\n        \"string\" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,\n      imageSizes:\n        \"string\" === typeof options.imageSizes ? options.imageSizes : void 0,\n      media: \"string\" === typeof options.media ? options.media : void 0\n    });\n  }\n};\nexports.preloadModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (options) {\n      var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);\n      Internals.d.m(href, {\n        as:\n          \"string\" === typeof options.as && \"script\" !== options.as\n            ? options.as\n            : void 0,\n        crossOrigin: crossOrigin,\n        integrity:\n          \"string\" === typeof options.integrity ? options.integrity : void 0\n      });\n    } else Internals.d.m(href);\n};\nexports.requestFormReset = function (form) {\n  Internals.d.r(form);\n};\nexports.unstable_batchedUpdates = function (fn, a) {\n  return fn(a);\n};\nexports.useFormState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useFormState(action, initialState, permalink);\n};\nexports.useFormStatus = function () {\n  return ReactSharedInternals.H.useHostTransitionStatus();\n};\nexports.version = \"19.0.0\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/**\n * @license React\n * react-dom-client.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n\"use strict\";\nvar Scheduler = require(\"scheduler\"),\n  React = require(\"react\"),\n  ReactDOM = require(\"react-dom\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction isValidContainer(node) {\n  return !(\n    !node ||\n    (1 !== node.nodeType && 9 !== node.nodeType && 11 !== node.nodeType)\n  );\n}\nvar REACT_LEGACY_ELEMENT_TYPE = Symbol.for(\"react.element\"),\n  REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_PROVIDER_TYPE = Symbol.for(\"react.provider\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nSymbol.for(\"react.scope\");\nSymbol.for(\"react.debug_trace_mode\");\nvar REACT_OFFSCREEN_TYPE = Symbol.for(\"react.offscreen\");\nSymbol.for(\"react.legacy_hidden\");\nSymbol.for(\"react.tracing_marker\");\nvar REACT_MEMO_CACHE_SENTINEL = Symbol.for(\"react.memo_cache_sentinel\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nfunction getComponentNameFromType(type) {\n  if (null == type) return null;\n  if (\"function\" === typeof type)\n    return type.$$typeof === REACT_CLIENT_REFERENCE\n      ? null\n      : type.displayName || type.name || null;\n  if (\"string\" === typeof type) return type;\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return \"Fragment\";\n    case REACT_PORTAL_TYPE:\n      return \"Portal\";\n    case REACT_PROFILER_TYPE:\n      return \"Profiler\";\n    case REACT_STRICT_MODE_TYPE:\n      return \"StrictMode\";\n    case REACT_SUSPENSE_TYPE:\n      return \"Suspense\";\n    case REACT_SUSPENSE_LIST_TYPE:\n      return \"SuspenseList\";\n  }\n  if (\"object\" === typeof type)\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        return (type.displayName || \"Context\") + \".Provider\";\n      case REACT_CONSUMER_TYPE:\n        return (type._context.displayName || \"Context\") + \".Consumer\";\n      case REACT_FORWARD_REF_TYPE:\n        var innerType = type.render;\n        type = type.displayName;\n        type ||\n          ((type = innerType.displayName || innerType.name || \"\"),\n          (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n        return type;\n      case REACT_MEMO_TYPE:\n        return (\n          (innerType = type.displayName || null),\n          null !== innerType\n            ? innerType\n            : getComponentNameFromType(type.type) || \"Memo\"\n        );\n      case REACT_LAZY_TYPE:\n        innerType = type._payload;\n        type = type._init;\n        try {\n          return getComponentNameFromType(type(innerType));\n        } catch (x) {}\n    }\n  return null;\n}\nvar ReactSharedInternals =\n    React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  assign = Object.assign,\n  prefix,\n  suffix;\nfunction describeBuiltInComponentFrame(name) {\n  if (void 0 === prefix)\n    try {\n      throw Error();\n    } catch (x) {\n      var match = x.stack.trim().match(/\\n( *(at )?)/);\n      prefix = (match && match[1]) || \"\";\n      suffix =\n        -1 < x.stack.indexOf(\"\\n    at\")\n          ? \" (<anonymous>)\"\n          : -1 < x.stack.indexOf(\"@\")\n            ? \"@unknown:0:0\"\n            : \"\";\n    }\n  return \"\\n\" + prefix + name + suffix;\n}\nvar reentry = !1;\nfunction describeNativeComponentFrame(fn, construct) {\n  if (!fn || reentry) return \"\";\n  reentry = !0;\n  var previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = void 0;\n  try {\n    var RunInRootFrame = {\n      DetermineComponentFrameRoot: function () {\n        try {\n          if (construct) {\n            var Fake = function () {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function () {\n                throw Error();\n              }\n            });\n            if (\"object\" === typeof Reflect && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x) {\n                var control = x;\n              }\n              Reflect.construct(fn, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x$0) {\n                control = x$0;\n              }\n              fn.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x$1) {\n              control = x$1;\n            }\n            (Fake = fn()) &&\n              \"function\" === typeof Fake.catch &&\n              Fake.catch(function () {});\n          }\n        } catch (sample) {\n          if (sample && control && \"string\" === typeof sample.stack)\n            return [sample.stack, control.stack];\n        }\n        return [null, null];\n      }\n    };\n    RunInRootFrame.DetermineComponentFrameRoot.displayName =\n      \"DetermineComponentFrameRoot\";\n    var namePropDescriptor = Object.getOwnPropertyDescriptor(\n      RunInRootFrame.DetermineComponentFrameRoot,\n      \"name\"\n    );\n    namePropDescriptor &&\n      namePropDescriptor.configurable &&\n      Object.defineProperty(\n        RunInRootFrame.DetermineComponentFrameRoot,\n        \"name\",\n        { value: \"DetermineComponentFrameRoot\" }\n      );\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n      sampleStack = _RunInRootFrame$Deter[0],\n      controlStack = _RunInRootFrame$Deter[1];\n    if (sampleStack && controlStack) {\n      var sampleLines = sampleStack.split(\"\\n\"),\n        controlLines = controlStack.split(\"\\n\");\n      for (\n        namePropDescriptor = RunInRootFrame = 0;\n        RunInRootFrame < sampleLines.length &&\n        !sampleLines[RunInRootFrame].includes(\"DetermineComponentFrameRoot\");\n\n      )\n        RunInRootFrame++;\n      for (\n        ;\n        namePropDescriptor < controlLines.length &&\n        !controlLines[namePropDescriptor].includes(\n          \"DetermineComponentFrameRoot\"\n        );\n\n      )\n        namePropDescriptor++;\n      if (\n        RunInRootFrame === sampleLines.length ||\n        namePropDescriptor === controlLines.length\n      )\n        for (\n          RunInRootFrame = sampleLines.length - 1,\n            namePropDescriptor = controlLines.length - 1;\n          1 <= RunInRootFrame &&\n          0 <= namePropDescriptor &&\n          sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor];\n\n        )\n          namePropDescriptor--;\n      for (\n        ;\n        1 <= RunInRootFrame && 0 <= namePropDescriptor;\n        RunInRootFrame--, namePropDescriptor--\n      )\n        if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {\n          if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {\n            do\n              if (\n                (RunInRootFrame--,\n                namePropDescriptor--,\n                0 > namePropDescriptor ||\n                  sampleLines[RunInRootFrame] !==\n                    controlLines[namePropDescriptor])\n              ) {\n                var frame =\n                  \"\\n\" +\n                  sampleLines[RunInRootFrame].replace(\" at new \", \" at \");\n                fn.displayName &&\n                  frame.includes(\"<anonymous>\") &&\n                  (frame = frame.replace(\"<anonymous>\", fn.displayName));\n                return frame;\n              }\n            while (1 <= RunInRootFrame && 0 <= namePropDescriptor);\n          }\n          break;\n        }\n    }\n  } finally {\n    (reentry = !1), (Error.prepareStackTrace = previousPrepareStackTrace);\n  }\n  return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : \"\")\n    ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n    : \"\";\n}\nfunction describeFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n    case 27:\n    case 5:\n      return describeBuiltInComponentFrame(fiber.type);\n    case 16:\n      return describeBuiltInComponentFrame(\"Lazy\");\n    case 13:\n      return describeBuiltInComponentFrame(\"Suspense\");\n    case 19:\n      return describeBuiltInComponentFrame(\"SuspenseList\");\n    case 0:\n    case 15:\n      return (fiber = describeNativeComponentFrame(fiber.type, !1)), fiber;\n    case 11:\n      return (\n        (fiber = describeNativeComponentFrame(fiber.type.render, !1)), fiber\n      );\n    case 1:\n      return (fiber = describeNativeComponentFrame(fiber.type, !0)), fiber;\n    default:\n      return \"\";\n  }\n}\nfunction getStackByFiberInDevAndProd(workInProgress) {\n  try {\n    var info = \"\";\n    do\n      (info += describeFiber(workInProgress)),\n        (workInProgress = workInProgress.return);\n    while (workInProgress);\n    return info;\n  } catch (x) {\n    return \"\\nError generating stack: \" + x.message + \"\\n\" + x.stack;\n  }\n}\nfunction getNearestMountedFiber(fiber) {\n  var node = fiber,\n    nearestMounted = fiber;\n  if (fiber.alternate) for (; node.return; ) node = node.return;\n  else {\n    fiber = node;\n    do\n      (node = fiber),\n        0 !== (node.flags & 4098) && (nearestMounted = node.return),\n        (fiber = node.return);\n    while (fiber);\n  }\n  return 3 === node.tag ? nearestMounted : null;\n}\nfunction getSuspenseInstanceFromFiber(fiber) {\n  if (13 === fiber.tag) {\n    var suspenseState = fiber.memoizedState;\n    null === suspenseState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (suspenseState = fiber.memoizedState));\n    if (null !== suspenseState) return suspenseState.dehydrated;\n  }\n  return null;\n}\nfunction assertIsMounted(fiber) {\n  if (getNearestMountedFiber(fiber) !== fiber)\n    throw Error(formatProdErrorMessage(188));\n}\nfunction findCurrentFiberUsingSlowPath(fiber) {\n  var alternate = fiber.alternate;\n  if (!alternate) {\n    alternate = getNearestMountedFiber(fiber);\n    if (null === alternate) throw Error(formatProdErrorMessage(188));\n    return alternate !== fiber ? null : fiber;\n  }\n  for (var a = fiber, b = alternate; ; ) {\n    var parentA = a.return;\n    if (null === parentA) break;\n    var parentB = parentA.alternate;\n    if (null === parentB) {\n      b = parentA.return;\n      if (null !== b) {\n        a = b;\n        continue;\n      }\n      break;\n    }\n    if (parentA.child === parentB.child) {\n      for (parentB = parentA.child; parentB; ) {\n        if (parentB === a) return assertIsMounted(parentA), fiber;\n        if (parentB === b) return assertIsMounted(parentA), alternate;\n        parentB = parentB.sibling;\n      }\n      throw Error(formatProdErrorMessage(188));\n    }\n    if (a.return !== b.return) (a = parentA), (b = parentB);\n    else {\n      for (var didFindChild = !1, child$2 = parentA.child; child$2; ) {\n        if (child$2 === a) {\n          didFindChild = !0;\n          a = parentA;\n          b = parentB;\n          break;\n        }\n        if (child$2 === b) {\n          didFindChild = !0;\n          b = parentA;\n          a = parentB;\n          break;\n        }\n        child$2 = child$2.sibling;\n      }\n      if (!didFindChild) {\n        for (child$2 = parentB.child; child$2; ) {\n          if (child$2 === a) {\n            didFindChild = !0;\n            a = parentB;\n            b = parentA;\n            break;\n          }\n          if (child$2 === b) {\n            didFindChild = !0;\n            b = parentB;\n            a = parentA;\n            break;\n          }\n          child$2 = child$2.sibling;\n        }\n        if (!didFindChild) throw Error(formatProdErrorMessage(189));\n      }\n    }\n    if (a.alternate !== b) throw Error(formatProdErrorMessage(190));\n  }\n  if (3 !== a.tag) throw Error(formatProdErrorMessage(188));\n  return a.stateNode.current === a ? fiber : alternate;\n}\nfunction findCurrentHostFiberImpl(node) {\n  var tag = node.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return node;\n  for (node = node.child; null !== node; ) {\n    tag = findCurrentHostFiberImpl(node);\n    if (null !== tag) return tag;\n    node = node.sibling;\n  }\n  return null;\n}\nvar isArrayImpl = Array.isArray,\n  ReactDOMSharedInternals =\n    ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  sharedNotPendingObject = {\n    pending: !1,\n    data: null,\n    method: null,\n    action: null\n  },\n  valueStack = [],\n  index = -1;\nfunction createCursor(defaultValue) {\n  return { current: defaultValue };\n}\nfunction pop(cursor) {\n  0 > index ||\n    ((cursor.current = valueStack[index]), (valueStack[index] = null), index--);\n}\nfunction push(cursor, value) {\n  index++;\n  valueStack[index] = cursor.current;\n  cursor.current = value;\n}\nvar contextStackCursor = createCursor(null),\n  contextFiberStackCursor = createCursor(null),\n  rootInstanceStackCursor = createCursor(null),\n  hostTransitionProviderCursor = createCursor(null);\nfunction pushHostContainer(fiber, nextRootInstance) {\n  push(rootInstanceStackCursor, nextRootInstance);\n  push(contextFiberStackCursor, fiber);\n  push(contextStackCursor, null);\n  fiber = nextRootInstance.nodeType;\n  switch (fiber) {\n    case 9:\n    case 11:\n      nextRootInstance = (nextRootInstance = nextRootInstance.documentElement)\n        ? (nextRootInstance = nextRootInstance.namespaceURI)\n          ? getOwnHostContext(nextRootInstance)\n          : 0\n        : 0;\n      break;\n    default:\n      if (\n        ((fiber = 8 === fiber ? nextRootInstance.parentNode : nextRootInstance),\n        (nextRootInstance = fiber.tagName),\n        (fiber = fiber.namespaceURI))\n      )\n        (fiber = getOwnHostContext(fiber)),\n          (nextRootInstance = getChildHostContextProd(fiber, nextRootInstance));\n      else\n        switch (nextRootInstance) {\n          case \"svg\":\n            nextRootInstance = 1;\n            break;\n          case \"math\":\n            nextRootInstance = 2;\n            break;\n          default:\n            nextRootInstance = 0;\n        }\n  }\n  pop(contextStackCursor);\n  push(contextStackCursor, nextRootInstance);\n}\nfunction popHostContainer() {\n  pop(contextStackCursor);\n  pop(contextFiberStackCursor);\n  pop(rootInstanceStackCursor);\n}\nfunction pushHostContext(fiber) {\n  null !== fiber.memoizedState && push(hostTransitionProviderCursor, fiber);\n  var context = contextStackCursor.current;\n  var JSCompiler_inline_result = getChildHostContextProd(context, fiber.type);\n  context !== JSCompiler_inline_result &&\n    (push(contextFiberStackCursor, fiber),\n    push(contextStackCursor, JSCompiler_inline_result));\n}\nfunction popHostContext(fiber) {\n  contextFiberStackCursor.current === fiber &&\n    (pop(contextStackCursor), pop(contextFiberStackCursor));\n  hostTransitionProviderCursor.current === fiber &&\n    (pop(hostTransitionProviderCursor),\n    (HostTransitionContext._currentValue = sharedNotPendingObject));\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\n  scheduleCallback$3 = Scheduler.unstable_scheduleCallback,\n  cancelCallback$1 = Scheduler.unstable_cancelCallback,\n  shouldYield = Scheduler.unstable_shouldYield,\n  requestPaint = Scheduler.unstable_requestPaint,\n  now = Scheduler.unstable_now,\n  getCurrentPriorityLevel = Scheduler.unstable_getCurrentPriorityLevel,\n  ImmediatePriority = Scheduler.unstable_ImmediatePriority,\n  UserBlockingPriority = Scheduler.unstable_UserBlockingPriority,\n  NormalPriority$1 = Scheduler.unstable_NormalPriority,\n  LowPriority = Scheduler.unstable_LowPriority,\n  IdlePriority = Scheduler.unstable_IdlePriority,\n  log$1 = Scheduler.log,\n  unstable_setDisableYieldValue = Scheduler.unstable_setDisableYieldValue,\n  rendererID = null,\n  injectedHook = null;\nfunction onCommitRoot(root) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberRoot)\n    try {\n      injectedHook.onCommitFiberRoot(\n        rendererID,\n        root,\n        void 0,\n        128 === (root.current.flags & 128)\n      );\n    } catch (err) {}\n}\nfunction setIsStrictModeForDevtools(newIsStrictMode) {\n  \"function\" === typeof log$1 && unstable_setDisableYieldValue(newIsStrictMode);\n  if (injectedHook && \"function\" === typeof injectedHook.setStrictMode)\n    try {\n      injectedHook.setStrictMode(rendererID, newIsStrictMode);\n    } catch (err) {}\n}\nvar clz32 = Math.clz32 ? Math.clz32 : clz32Fallback,\n  log = Math.log,\n  LN2 = Math.LN2;\nfunction clz32Fallback(x) {\n  x >>>= 0;\n  return 0 === x ? 32 : (31 - ((log(x) / LN2) | 0)) | 0;\n}\nvar nextTransitionLane = 128,\n  nextRetryLane = 4194304;\nfunction getHighestPriorityLanes(lanes) {\n  var pendingSyncLanes = lanes & 42;\n  if (0 !== pendingSyncLanes) return pendingSyncLanes;\n  switch (lanes & -lanes) {\n    case 1:\n      return 1;\n    case 2:\n      return 2;\n    case 4:\n      return 4;\n    case 8:\n      return 8;\n    case 16:\n      return 16;\n    case 32:\n      return 32;\n    case 64:\n      return 64;\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return lanes & 4194176;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return lanes & 62914560;\n    case 67108864:\n      return 67108864;\n    case 134217728:\n      return 134217728;\n    case 268435456:\n      return 268435456;\n    case 536870912:\n      return 536870912;\n    case 1073741824:\n      return 0;\n    default:\n      return lanes;\n  }\n}\nfunction getNextLanes(root, wipLanes) {\n  var pendingLanes = root.pendingLanes;\n  if (0 === pendingLanes) return 0;\n  var nextLanes = 0,\n    suspendedLanes = root.suspendedLanes,\n    pingedLanes = root.pingedLanes,\n    warmLanes = root.warmLanes;\n  root = 0 !== root.finishedLanes;\n  var nonIdlePendingLanes = pendingLanes & 134217727;\n  0 !== nonIdlePendingLanes\n    ? ((pendingLanes = nonIdlePendingLanes & ~suspendedLanes),\n      0 !== pendingLanes\n        ? (nextLanes = getHighestPriorityLanes(pendingLanes))\n        : ((pingedLanes &= nonIdlePendingLanes),\n          0 !== pingedLanes\n            ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n            : root ||\n              ((warmLanes = nonIdlePendingLanes & ~warmLanes),\n              0 !== warmLanes &&\n                (nextLanes = getHighestPriorityLanes(warmLanes)))))\n    : ((nonIdlePendingLanes = pendingLanes & ~suspendedLanes),\n      0 !== nonIdlePendingLanes\n        ? (nextLanes = getHighestPriorityLanes(nonIdlePendingLanes))\n        : 0 !== pingedLanes\n          ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n          : root ||\n            ((warmLanes = pendingLanes & ~warmLanes),\n            0 !== warmLanes &&\n              (nextLanes = getHighestPriorityLanes(warmLanes))));\n  return 0 === nextLanes\n    ? 0\n    : 0 !== wipLanes &&\n        wipLanes !== nextLanes &&\n        0 === (wipLanes & suspendedLanes) &&\n        ((suspendedLanes = nextLanes & -nextLanes),\n        (warmLanes = wipLanes & -wipLanes),\n        suspendedLanes >= warmLanes ||\n          (32 === suspendedLanes && 0 !== (warmLanes & 4194176)))\n      ? wipLanes\n      : nextLanes;\n}\nfunction checkIfRootIsPrerendering(root, renderLanes) {\n  return (\n    0 ===\n    (root.pendingLanes &\n      ~(root.suspendedLanes & ~root.pingedLanes) &\n      renderLanes)\n  );\n}\nfunction computeExpirationTime(lane, currentTime) {\n  switch (lane) {\n    case 1:\n    case 2:\n    case 4:\n    case 8:\n      return currentTime + 250;\n    case 16:\n    case 32:\n    case 64:\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return currentTime + 5e3;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return -1;\n    case 67108864:\n    case 134217728:\n    case 268435456:\n    case 536870912:\n    case 1073741824:\n      return -1;\n    default:\n      return -1;\n  }\n}\nfunction claimNextTransitionLane() {\n  var lane = nextTransitionLane;\n  nextTransitionLane <<= 1;\n  0 === (nextTransitionLane & 4194176) && (nextTransitionLane = 128);\n  return lane;\n}\nfunction claimNextRetryLane() {\n  var lane = nextRetryLane;\n  nextRetryLane <<= 1;\n  0 === (nextRetryLane & 62914560) && (nextRetryLane = 4194304);\n  return lane;\n}\nfunction createLaneMap(initial) {\n  for (var laneMap = [], i = 0; 31 > i; i++) laneMap.push(initial);\n  return laneMap;\n}\nfunction markRootUpdated$1(root, updateLane) {\n  root.pendingLanes |= updateLane;\n  268435456 !== updateLane &&\n    ((root.suspendedLanes = 0), (root.pingedLanes = 0), (root.warmLanes = 0));\n}\nfunction markRootFinished(\n  root,\n  finishedLanes,\n  remainingLanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  var previouslyPendingLanes = root.pendingLanes;\n  root.pendingLanes = remainingLanes;\n  root.suspendedLanes = 0;\n  root.pingedLanes = 0;\n  root.warmLanes = 0;\n  root.expiredLanes &= remainingLanes;\n  root.entangledLanes &= remainingLanes;\n  root.errorRecoveryDisabledLanes &= remainingLanes;\n  root.shellSuspendCounter = 0;\n  var entanglements = root.entanglements,\n    expirationTimes = root.expirationTimes,\n    hiddenUpdates = root.hiddenUpdates;\n  for (\n    remainingLanes = previouslyPendingLanes & ~remainingLanes;\n    0 < remainingLanes;\n\n  ) {\n    var index$7 = 31 - clz32(remainingLanes),\n      lane = 1 << index$7;\n    entanglements[index$7] = 0;\n    expirationTimes[index$7] = -1;\n    var hiddenUpdatesForLane = hiddenUpdates[index$7];\n    if (null !== hiddenUpdatesForLane)\n      for (\n        hiddenUpdates[index$7] = null, index$7 = 0;\n        index$7 < hiddenUpdatesForLane.length;\n        index$7++\n      ) {\n        var update = hiddenUpdatesForLane[index$7];\n        null !== update && (update.lane &= -536870913);\n      }\n    remainingLanes &= ~lane;\n  }\n  0 !== spawnedLane && markSpawnedDeferredLane(root, spawnedLane, 0);\n  0 !== suspendedRetryLanes &&\n    0 === updatedLanes &&\n    0 !== root.tag &&\n    (root.suspendedLanes |=\n      suspendedRetryLanes & ~(previouslyPendingLanes & ~finishedLanes));\n}\nfunction markSpawnedDeferredLane(root, spawnedLane, entangledLanes) {\n  root.pendingLanes |= spawnedLane;\n  root.suspendedLanes &= ~spawnedLane;\n  var spawnedLaneIndex = 31 - clz32(spawnedLane);\n  root.entangledLanes |= spawnedLane;\n  root.entanglements[spawnedLaneIndex] =\n    root.entanglements[spawnedLaneIndex] |\n    1073741824 |\n    (entangledLanes & 4194218);\n}\nfunction markRootEntangled(root, entangledLanes) {\n  var rootEntangledLanes = (root.entangledLanes |= entangledLanes);\n  for (root = root.entanglements; rootEntangledLanes; ) {\n    var index$8 = 31 - clz32(rootEntangledLanes),\n      lane = 1 << index$8;\n    (lane & entangledLanes) | (root[index$8] & entangledLanes) &&\n      (root[index$8] |= entangledLanes);\n    rootEntangledLanes &= ~lane;\n  }\n}\nfunction lanesToEventPriority(lanes) {\n  lanes &= -lanes;\n  return 2 < lanes\n    ? 8 < lanes\n      ? 0 !== (lanes & 134217727)\n        ? 32\n        : 268435456\n      : 8\n    : 2;\n}\nfunction resolveUpdatePriority() {\n  var updatePriority = ReactDOMSharedInternals.p;\n  if (0 !== updatePriority) return updatePriority;\n  updatePriority = window.event;\n  return void 0 === updatePriority ? 32 : getEventPriority(updatePriority.type);\n}\nfunction runWithPriority(priority, fn) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    return (ReactDOMSharedInternals.p = priority), fn();\n  } finally {\n    ReactDOMSharedInternals.p = previousPriority;\n  }\n}\nvar randomKey = Math.random().toString(36).slice(2),\n  internalInstanceKey = \"__reactFiber$\" + randomKey,\n  internalPropsKey = \"__reactProps$\" + randomKey,\n  internalContainerInstanceKey = \"__reactContainer$\" + randomKey,\n  internalEventHandlersKey = \"__reactEvents$\" + randomKey,\n  internalEventHandlerListenersKey = \"__reactListeners$\" + randomKey,\n  internalEventHandlesSetKey = \"__reactHandles$\" + randomKey,\n  internalRootNodeResourcesKey = \"__reactResources$\" + randomKey,\n  internalHoistableMarker = \"__reactMarker$\" + randomKey;\nfunction detachDeletedInstance(node) {\n  delete node[internalInstanceKey];\n  delete node[internalPropsKey];\n  delete node[internalEventHandlersKey];\n  delete node[internalEventHandlerListenersKey];\n  delete node[internalEventHandlesSetKey];\n}\nfunction getClosestInstanceFromNode(targetNode) {\n  var targetInst = targetNode[internalInstanceKey];\n  if (targetInst) return targetInst;\n  for (var parentNode = targetNode.parentNode; parentNode; ) {\n    if (\n      (targetInst =\n        parentNode[internalContainerInstanceKey] ||\n        parentNode[internalInstanceKey])\n    ) {\n      parentNode = targetInst.alternate;\n      if (\n        null !== targetInst.child ||\n        (null !== parentNode && null !== parentNode.child)\n      )\n        for (\n          targetNode = getParentSuspenseInstance(targetNode);\n          null !== targetNode;\n\n        ) {\n          if ((parentNode = targetNode[internalInstanceKey])) return parentNode;\n          targetNode = getParentSuspenseInstance(targetNode);\n        }\n      return targetInst;\n    }\n    targetNode = parentNode;\n    parentNode = targetNode.parentNode;\n  }\n  return null;\n}\nfunction getInstanceFromNode(node) {\n  if (\n    (node = node[internalInstanceKey] || node[internalContainerInstanceKey])\n  ) {\n    var tag = node.tag;\n    if (\n      5 === tag ||\n      6 === tag ||\n      13 === tag ||\n      26 === tag ||\n      27 === tag ||\n      3 === tag\n    )\n      return node;\n  }\n  return null;\n}\nfunction getNodeFromInstance(inst) {\n  var tag = inst.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return inst.stateNode;\n  throw Error(formatProdErrorMessage(33));\n}\nfunction getResourcesFromRoot(root) {\n  var resources = root[internalRootNodeResourcesKey];\n  resources ||\n    (resources = root[internalRootNodeResourcesKey] =\n      { hoistableStyles: new Map(), hoistableScripts: new Map() });\n  return resources;\n}\nfunction markNodeAsHoistable(node) {\n  node[internalHoistableMarker] = !0;\n}\nvar allNativeEvents = new Set(),\n  registrationNameDependencies = {};\nfunction registerTwoPhaseEvent(registrationName, dependencies) {\n  registerDirectEvent(registrationName, dependencies);\n  registerDirectEvent(registrationName + \"Capture\", dependencies);\n}\nfunction registerDirectEvent(registrationName, dependencies) {\n  registrationNameDependencies[registrationName] = dependencies;\n  for (\n    registrationName = 0;\n    registrationName < dependencies.length;\n    registrationName++\n  )\n    allNativeEvents.add(dependencies[registrationName]);\n}\nvar canUseDOM = !(\n    \"undefined\" === typeof window ||\n    \"undefined\" === typeof window.document ||\n    \"undefined\" === typeof window.document.createElement\n  ),\n  VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n    \"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"\n  ),\n  illegalAttributeNameCache = {},\n  validatedAttributeNameCache = {};\nfunction isAttributeNameSafe(attributeName) {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))\n    return !0;\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return !1;\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))\n    return (validatedAttributeNameCache[attributeName] = !0);\n  illegalAttributeNameCache[attributeName] = !0;\n  return !1;\n}\nfunction setValueForAttribute(node, name, value) {\n  if (isAttributeNameSafe(name))\n    if (null === value) node.removeAttribute(name);\n    else {\n      switch (typeof value) {\n        case \"undefined\":\n        case \"function\":\n        case \"symbol\":\n          node.removeAttribute(name);\n          return;\n        case \"boolean\":\n          var prefix$10 = name.toLowerCase().slice(0, 5);\n          if (\"data-\" !== prefix$10 && \"aria-\" !== prefix$10) {\n            node.removeAttribute(name);\n            return;\n          }\n      }\n      node.setAttribute(name, \"\" + value);\n    }\n}\nfunction setValueForKnownAttribute(node, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttribute(name, \"\" + value);\n  }\n}\nfunction setValueForNamespacedAttribute(node, namespace, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttributeNS(namespace, name, \"\" + value);\n  }\n}\nfunction getToStringValue(value) {\n  switch (typeof value) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"undefined\":\n      return value;\n    case \"object\":\n      return value;\n    default:\n      return \"\";\n  }\n}\nfunction isCheckable(elem) {\n  var type = elem.type;\n  return (\n    (elem = elem.nodeName) &&\n    \"input\" === elem.toLowerCase() &&\n    (\"checkbox\" === type || \"radio\" === type)\n  );\n}\nfunction trackValueOnNode(node) {\n  var valueField = isCheckable(node) ? \"checked\" : \"value\",\n    descriptor = Object.getOwnPropertyDescriptor(\n      node.constructor.prototype,\n      valueField\n    ),\n    currentValue = \"\" + node[valueField];\n  if (\n    !node.hasOwnProperty(valueField) &&\n    \"undefined\" !== typeof descriptor &&\n    \"function\" === typeof descriptor.get &&\n    \"function\" === typeof descriptor.set\n  ) {\n    var get = descriptor.get,\n      set = descriptor.set;\n    Object.defineProperty(node, valueField, {\n      configurable: !0,\n      get: function () {\n        return get.call(this);\n      },\n      set: function (value) {\n        currentValue = \"\" + value;\n        set.call(this, value);\n      }\n    });\n    Object.defineProperty(node, valueField, {\n      enumerable: descriptor.enumerable\n    });\n    return {\n      getValue: function () {\n        return currentValue;\n      },\n      setValue: function (value) {\n        currentValue = \"\" + value;\n      },\n      stopTracking: function () {\n        node._valueTracker = null;\n        delete node[valueField];\n      }\n    };\n  }\n}\nfunction track(node) {\n  node._valueTracker || (node._valueTracker = trackValueOnNode(node));\n}\nfunction updateValueIfChanged(node) {\n  if (!node) return !1;\n  var tracker = node._valueTracker;\n  if (!tracker) return !0;\n  var lastValue = tracker.getValue();\n  var value = \"\";\n  node &&\n    (value = isCheckable(node)\n      ? node.checked\n        ? \"true\"\n        : \"false\"\n      : node.value);\n  node = value;\n  return node !== lastValue ? (tracker.setValue(node), !0) : !1;\n}\nfunction getActiveElement(doc) {\n  doc = doc || (\"undefined\" !== typeof document ? document : void 0);\n  if (\"undefined\" === typeof doc) return null;\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\nvar escapeSelectorAttributeValueInsideDoubleQuotesRegex = /[\\n\"\\\\]/g;\nfunction escapeSelectorAttributeValueInsideDoubleQuotes(value) {\n  return value.replace(\n    escapeSelectorAttributeValueInsideDoubleQuotesRegex,\n    function (ch) {\n      return \"\\\\\" + ch.charCodeAt(0).toString(16) + \" \";\n    }\n  );\n}\nfunction updateInput(\n  element,\n  value,\n  defaultValue,\n  lastDefaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name\n) {\n  element.name = \"\";\n  null != type &&\n  \"function\" !== typeof type &&\n  \"symbol\" !== typeof type &&\n  \"boolean\" !== typeof type\n    ? (element.type = type)\n    : element.removeAttribute(\"type\");\n  if (null != value)\n    if (\"number\" === type) {\n      if ((0 === value && \"\" === element.value) || element.value != value)\n        element.value = \"\" + getToStringValue(value);\n    } else\n      element.value !== \"\" + getToStringValue(value) &&\n        (element.value = \"\" + getToStringValue(value));\n  else\n    (\"submit\" !== type && \"reset\" !== type) || element.removeAttribute(\"value\");\n  null != value\n    ? setDefaultValue(element, type, getToStringValue(value))\n    : null != defaultValue\n      ? setDefaultValue(element, type, getToStringValue(defaultValue))\n      : null != lastDefaultValue && element.removeAttribute(\"value\");\n  null == checked &&\n    null != defaultChecked &&\n    (element.defaultChecked = !!defaultChecked);\n  null != checked &&\n    (element.checked =\n      checked && \"function\" !== typeof checked && \"symbol\" !== typeof checked);\n  null != name &&\n  \"function\" !== typeof name &&\n  \"symbol\" !== typeof name &&\n  \"boolean\" !== typeof name\n    ? (element.name = \"\" + getToStringValue(name))\n    : element.removeAttribute(\"name\");\n}\nfunction initInput(\n  element,\n  value,\n  defaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name,\n  isHydrating\n) {\n  null != type &&\n    \"function\" !== typeof type &&\n    \"symbol\" !== typeof type &&\n    \"boolean\" !== typeof type &&\n    (element.type = type);\n  if (null != value || null != defaultValue) {\n    if (\n      !(\n        (\"submit\" !== type && \"reset\" !== type) ||\n        (void 0 !== value && null !== value)\n      )\n    )\n      return;\n    defaultValue =\n      null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n    value = null != value ? \"\" + getToStringValue(value) : defaultValue;\n    isHydrating || value === element.value || (element.value = value);\n    element.defaultValue = value;\n  }\n  checked = null != checked ? checked : defaultChecked;\n  checked =\n    \"function\" !== typeof checked && \"symbol\" !== typeof checked && !!checked;\n  element.checked = isHydrating ? element.checked : !!checked;\n  element.defaultChecked = !!checked;\n  null != name &&\n    \"function\" !== typeof name &&\n    \"symbol\" !== typeof name &&\n    \"boolean\" !== typeof name &&\n    (element.name = name);\n}\nfunction setDefaultValue(node, type, value) {\n  (\"number\" === type && getActiveElement(node.ownerDocument) === node) ||\n    node.defaultValue === \"\" + value ||\n    (node.defaultValue = \"\" + value);\n}\nfunction updateOptions(node, multiple, propValue, setDefaultSelected) {\n  node = node.options;\n  if (multiple) {\n    multiple = {};\n    for (var i = 0; i < propValue.length; i++)\n      multiple[\"$\" + propValue[i]] = !0;\n    for (propValue = 0; propValue < node.length; propValue++)\n      (i = multiple.hasOwnProperty(\"$\" + node[propValue].value)),\n        node[propValue].selected !== i && (node[propValue].selected = i),\n        i && setDefaultSelected && (node[propValue].defaultSelected = !0);\n  } else {\n    propValue = \"\" + getToStringValue(propValue);\n    multiple = null;\n    for (i = 0; i < node.length; i++) {\n      if (node[i].value === propValue) {\n        node[i].selected = !0;\n        setDefaultSelected && (node[i].defaultSelected = !0);\n        return;\n      }\n      null !== multiple || node[i].disabled || (multiple = node[i]);\n    }\n    null !== multiple && (multiple.selected = !0);\n  }\n}\nfunction updateTextarea(element, value, defaultValue) {\n  if (\n    null != value &&\n    ((value = \"\" + getToStringValue(value)),\n    value !== element.value && (element.value = value),\n    null == defaultValue)\n  ) {\n    element.defaultValue !== value && (element.defaultValue = value);\n    return;\n  }\n  element.defaultValue =\n    null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n}\nfunction initTextarea(element, value, defaultValue, children) {\n  if (null == value) {\n    if (null != children) {\n      if (null != defaultValue) throw Error(formatProdErrorMessage(92));\n      if (isArrayImpl(children)) {\n        if (1 < children.length) throw Error(formatProdErrorMessage(93));\n        children = children[0];\n      }\n      defaultValue = children;\n    }\n    null == defaultValue && (defaultValue = \"\");\n    value = defaultValue;\n  }\n  defaultValue = getToStringValue(value);\n  element.defaultValue = defaultValue;\n  children = element.textContent;\n  children === defaultValue &&\n    \"\" !== children &&\n    null !== children &&\n    (element.value = children);\n}\nfunction setTextContent(node, text) {\n  if (text) {\n    var firstChild = node.firstChild;\n    if (\n      firstChild &&\n      firstChild === node.lastChild &&\n      3 === firstChild.nodeType\n    ) {\n      firstChild.nodeValue = text;\n      return;\n    }\n  }\n  node.textContent = text;\n}\nvar unitlessNumbers = new Set(\n  \"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\n    \" \"\n  )\n);\nfunction setValueForStyle(style, styleName, value) {\n  var isCustomProperty = 0 === styleName.indexOf(\"--\");\n  null == value || \"boolean\" === typeof value || \"\" === value\n    ? isCustomProperty\n      ? style.setProperty(styleName, \"\")\n      : \"float\" === styleName\n        ? (style.cssFloat = \"\")\n        : (style[styleName] = \"\")\n    : isCustomProperty\n      ? style.setProperty(styleName, value)\n      : \"number\" !== typeof value ||\n          0 === value ||\n          unitlessNumbers.has(styleName)\n        ? \"float\" === styleName\n          ? (style.cssFloat = value)\n          : (style[styleName] = (\"\" + value).trim())\n        : (style[styleName] = value + \"px\");\n}\nfunction setValueForStyles(node, styles, prevStyles) {\n  if (null != styles && \"object\" !== typeof styles)\n    throw Error(formatProdErrorMessage(62));\n  node = node.style;\n  if (null != prevStyles) {\n    for (var styleName in prevStyles)\n      !prevStyles.hasOwnProperty(styleName) ||\n        (null != styles && styles.hasOwnProperty(styleName)) ||\n        (0 === styleName.indexOf(\"--\")\n          ? node.setProperty(styleName, \"\")\n          : \"float\" === styleName\n            ? (node.cssFloat = \"\")\n            : (node[styleName] = \"\"));\n    for (var styleName$16 in styles)\n      (styleName = styles[styleName$16]),\n        styles.hasOwnProperty(styleName$16) &&\n          prevStyles[styleName$16] !== styleName &&\n          setValueForStyle(node, styleName$16, styleName);\n  } else\n    for (var styleName$17 in styles)\n      styles.hasOwnProperty(styleName$17) &&\n        setValueForStyle(node, styleName$17, styles[styleName$17]);\n}\nfunction isCustomElement(tagName) {\n  if (-1 === tagName.indexOf(\"-\")) return !1;\n  switch (tagName) {\n    case \"annotation-xml\":\n    case \"color-profile\":\n    case \"font-face\":\n    case \"font-face-src\":\n    case \"font-face-uri\":\n    case \"font-face-format\":\n    case \"font-face-name\":\n    case \"missing-glyph\":\n      return !1;\n    default:\n      return !0;\n  }\n}\nvar aliases = new Map([\n    [\"acceptCharset\", \"accept-charset\"],\n    [\"htmlFor\", \"for\"],\n    [\"httpEquiv\", \"http-equiv\"],\n    [\"crossOrigin\", \"crossorigin\"],\n    [\"accentHeight\", \"accent-height\"],\n    [\"alignmentBaseline\", \"alignment-baseline\"],\n    [\"arabicForm\", \"arabic-form\"],\n    [\"baselineShift\", \"baseline-shift\"],\n    [\"capHeight\", \"cap-height\"],\n    [\"clipPath\", \"clip-path\"],\n    [\"clipRule\", \"clip-rule\"],\n    [\"colorInterpolation\", \"color-interpolation\"],\n    [\"colorInterpolationFilters\", \"color-interpolation-filters\"],\n    [\"colorProfile\", \"color-profile\"],\n    [\"colorRendering\", \"color-rendering\"],\n    [\"dominantBaseline\", \"dominant-baseline\"],\n    [\"enableBackground\", \"enable-background\"],\n    [\"fillOpacity\", \"fill-opacity\"],\n    [\"fillRule\", \"fill-rule\"],\n    [\"floodColor\", \"flood-color\"],\n    [\"floodOpacity\", \"flood-opacity\"],\n    [\"fontFamily\", \"font-family\"],\n    [\"fontSize\", \"font-size\"],\n    [\"fontSizeAdjust\", \"font-size-adjust\"],\n    [\"fontStretch\", \"font-stretch\"],\n    [\"fontStyle\", \"font-style\"],\n    [\"fontVariant\", \"font-variant\"],\n    [\"fontWeight\", \"font-weight\"],\n    [\"glyphName\", \"glyph-name\"],\n    [\"glyphOrientationHorizontal\", \"glyph-orientation-horizontal\"],\n    [\"glyphOrientationVertical\", \"glyph-orientation-vertical\"],\n    [\"horizAdvX\", \"horiz-adv-x\"],\n    [\"horizOriginX\", \"horiz-origin-x\"],\n    [\"imageRendering\", \"image-rendering\"],\n    [\"letterSpacing\", \"letter-spacing\"],\n    [\"lightingColor\", \"lighting-color\"],\n    [\"markerEnd\", \"marker-end\"],\n    [\"markerMid\", \"marker-mid\"],\n    [\"markerStart\", \"marker-start\"],\n    [\"overlinePosition\", \"overline-position\"],\n    [\"overlineThickness\", \"overline-thickness\"],\n    [\"paintOrder\", \"paint-order\"],\n    [\"panose-1\", \"panose-1\"],\n    [\"pointerEvents\", \"pointer-events\"],\n    [\"renderingIntent\", \"rendering-intent\"],\n    [\"shapeRendering\", \"shape-rendering\"],\n    [\"stopColor\", \"stop-color\"],\n    [\"stopOpacity\", \"stop-opacity\"],\n    [\"strikethroughPosition\", \"strikethrough-position\"],\n    [\"strikethroughThickness\", \"strikethrough-thickness\"],\n    [\"strokeDasharray\", \"stroke-dasharray\"],\n    [\"strokeDashoffset\", \"stroke-dashoffset\"],\n    [\"strokeLinecap\", \"stroke-linecap\"],\n    [\"strokeLinejoin\", \"stroke-linejoin\"],\n    [\"strokeMiterlimit\", \"stroke-miterlimit\"],\n    [\"strokeOpacity\", \"stroke-opacity\"],\n    [\"strokeWidth\", \"stroke-width\"],\n    [\"textAnchor\", \"text-anchor\"],\n    [\"textDecoration\", \"text-decoration\"],\n    [\"textRendering\", \"text-rendering\"],\n    [\"transformOrigin\", \"transform-origin\"],\n    [\"underlinePosition\", \"underline-position\"],\n    [\"underlineThickness\", \"underline-thickness\"],\n    [\"unicodeBidi\", \"unicode-bidi\"],\n    [\"unicodeRange\", \"unicode-range\"],\n    [\"unitsPerEm\", \"units-per-em\"],\n    [\"vAlphabetic\", \"v-alphabetic\"],\n    [\"vHanging\", \"v-hanging\"],\n    [\"vIdeographic\", \"v-ideographic\"],\n    [\"vMathematical\", \"v-mathematical\"],\n    [\"vectorEffect\", \"vector-effect\"],\n    [\"vertAdvY\", \"vert-adv-y\"],\n    [\"vertOriginX\", \"vert-origin-x\"],\n    [\"vertOriginY\", \"vert-origin-y\"],\n    [\"wordSpacing\", \"word-spacing\"],\n    [\"writingMode\", \"writing-mode\"],\n    [\"xmlnsXlink\", \"xmlns:xlink\"],\n    [\"xHeight\", \"x-height\"]\n  ]),\n  isJavaScriptProtocol =\n    /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;\nfunction sanitizeURL(url) {\n  return isJavaScriptProtocol.test(\"\" + url)\n    ? \"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\"\n    : url;\n}\nvar currentReplayingEvent = null;\nfunction getEventTarget(nativeEvent) {\n  nativeEvent = nativeEvent.target || nativeEvent.srcElement || window;\n  nativeEvent.correspondingUseElement &&\n    (nativeEvent = nativeEvent.correspondingUseElement);\n  return 3 === nativeEvent.nodeType ? nativeEvent.parentNode : nativeEvent;\n}\nvar restoreTarget = null,\n  restoreQueue = null;\nfunction restoreStateOfTarget(target) {\n  var internalInstance = getInstanceFromNode(target);\n  if (internalInstance && (target = internalInstance.stateNode)) {\n    var props = target[internalPropsKey] || null;\n    a: switch (((target = internalInstance.stateNode), internalInstance.type)) {\n      case \"input\":\n        updateInput(\n          target,\n          props.value,\n          props.defaultValue,\n          props.defaultValue,\n          props.checked,\n          props.defaultChecked,\n          props.type,\n          props.name\n        );\n        internalInstance = props.name;\n        if (\"radio\" === props.type && null != internalInstance) {\n          for (props = target; props.parentNode; ) props = props.parentNode;\n          props = props.querySelectorAll(\n            'input[name=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                \"\" + internalInstance\n              ) +\n              '\"][type=\"radio\"]'\n          );\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          ) {\n            var otherNode = props[internalInstance];\n            if (otherNode !== target && otherNode.form === target.form) {\n              var otherProps = otherNode[internalPropsKey] || null;\n              if (!otherProps) throw Error(formatProdErrorMessage(90));\n              updateInput(\n                otherNode,\n                otherProps.value,\n                otherProps.defaultValue,\n                otherProps.defaultValue,\n                otherProps.checked,\n                otherProps.defaultChecked,\n                otherProps.type,\n                otherProps.name\n              );\n            }\n          }\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          )\n            (otherNode = props[internalInstance]),\n              otherNode.form === target.form && updateValueIfChanged(otherNode);\n        }\n        break a;\n      case \"textarea\":\n        updateTextarea(target, props.value, props.defaultValue);\n        break a;\n      case \"select\":\n        (internalInstance = props.value),\n          null != internalInstance &&\n            updateOptions(target, !!props.multiple, internalInstance, !1);\n    }\n  }\n}\nvar isInsideEventHandler = !1;\nfunction batchedUpdates$1(fn, a, b) {\n  if (isInsideEventHandler) return fn(a, b);\n  isInsideEventHandler = !0;\n  try {\n    var JSCompiler_inline_result = fn(a);\n    return JSCompiler_inline_result;\n  } finally {\n    if (\n      ((isInsideEventHandler = !1),\n      null !== restoreTarget || null !== restoreQueue)\n    )\n      if (\n        (flushSyncWork$1(),\n        restoreTarget &&\n          ((a = restoreTarget),\n          (fn = restoreQueue),\n          (restoreQueue = restoreTarget = null),\n          restoreStateOfTarget(a),\n          fn))\n      )\n        for (a = 0; a < fn.length; a++) restoreStateOfTarget(fn[a]);\n  }\n}\nfunction getListener(inst, registrationName) {\n  var stateNode = inst.stateNode;\n  if (null === stateNode) return null;\n  var props = stateNode[internalPropsKey] || null;\n  if (null === props) return null;\n  stateNode = props[registrationName];\n  a: switch (registrationName) {\n    case \"onClick\":\n    case \"onClickCapture\":\n    case \"onDoubleClick\":\n    case \"onDoubleClickCapture\":\n    case \"onMouseDown\":\n    case \"onMouseDownCapture\":\n    case \"onMouseMove\":\n    case \"onMouseMoveCapture\":\n    case \"onMouseUp\":\n    case \"onMouseUpCapture\":\n    case \"onMouseEnter\":\n      (props = !props.disabled) ||\n        ((inst = inst.type),\n        (props = !(\n          \"button\" === inst ||\n          \"input\" === inst ||\n          \"select\" === inst ||\n          \"textarea\" === inst\n        )));\n      inst = !props;\n      break a;\n    default:\n      inst = !1;\n  }\n  if (inst) return null;\n  if (stateNode && \"function\" !== typeof stateNode)\n    throw Error(\n      formatProdErrorMessage(231, registrationName, typeof stateNode)\n    );\n  return stateNode;\n}\nvar passiveBrowserEventsSupported = !1;\nif (canUseDOM)\n  try {\n    var options = {};\n    Object.defineProperty(options, \"passive\", {\n      get: function () {\n        passiveBrowserEventsSupported = !0;\n      }\n    });\n    window.addEventListener(\"test\", options, options);\n    window.removeEventListener(\"test\", options, options);\n  } catch (e) {\n    passiveBrowserEventsSupported = !1;\n  }\nvar root = null,\n  startText = null,\n  fallbackText = null;\nfunction getData() {\n  if (fallbackText) return fallbackText;\n  var start,\n    startValue = startText,\n    startLength = startValue.length,\n    end,\n    endValue = \"value\" in root ? root.value : root.textContent,\n    endLength = endValue.length;\n  for (\n    start = 0;\n    start < startLength && startValue[start] === endValue[start];\n    start++\n  );\n  var minEnd = startLength - start;\n  for (\n    end = 1;\n    end <= minEnd &&\n    startValue[startLength - end] === endValue[endLength - end];\n    end++\n  );\n  return (fallbackText = endValue.slice(start, 1 < end ? 1 - end : void 0));\n}\nfunction getEventCharCode(nativeEvent) {\n  var keyCode = nativeEvent.keyCode;\n  \"charCode\" in nativeEvent\n    ? ((nativeEvent = nativeEvent.charCode),\n      0 === nativeEvent && 13 === keyCode && (nativeEvent = 13))\n    : (nativeEvent = keyCode);\n  10 === nativeEvent && (nativeEvent = 13);\n  return 32 <= nativeEvent || 13 === nativeEvent ? nativeEvent : 0;\n}\nfunction functionThatReturnsTrue() {\n  return !0;\n}\nfunction functionThatReturnsFalse() {\n  return !1;\n}\nfunction createSyntheticEvent(Interface) {\n  function SyntheticBaseEvent(\n    reactName,\n    reactEventType,\n    targetInst,\n    nativeEvent,\n    nativeEventTarget\n  ) {\n    this._reactName = reactName;\n    this._targetInst = targetInst;\n    this.type = reactEventType;\n    this.nativeEvent = nativeEvent;\n    this.target = nativeEventTarget;\n    this.currentTarget = null;\n    for (var propName in Interface)\n      Interface.hasOwnProperty(propName) &&\n        ((reactName = Interface[propName]),\n        (this[propName] = reactName\n          ? reactName(nativeEvent)\n          : nativeEvent[propName]));\n    this.isDefaultPrevented = (\n      null != nativeEvent.defaultPrevented\n        ? nativeEvent.defaultPrevented\n        : !1 === nativeEvent.returnValue\n    )\n      ? functionThatReturnsTrue\n      : functionThatReturnsFalse;\n    this.isPropagationStopped = functionThatReturnsFalse;\n    return this;\n  }\n  assign(SyntheticBaseEvent.prototype, {\n    preventDefault: function () {\n      this.defaultPrevented = !0;\n      var event = this.nativeEvent;\n      event &&\n        (event.preventDefault\n          ? event.preventDefault()\n          : \"unknown\" !== typeof event.returnValue && (event.returnValue = !1),\n        (this.isDefaultPrevented = functionThatReturnsTrue));\n    },\n    stopPropagation: function () {\n      var event = this.nativeEvent;\n      event &&\n        (event.stopPropagation\n          ? event.stopPropagation()\n          : \"unknown\" !== typeof event.cancelBubble &&\n            (event.cancelBubble = !0),\n        (this.isPropagationStopped = functionThatReturnsTrue));\n    },\n    persist: function () {},\n    isPersistent: functionThatReturnsTrue\n  });\n  return SyntheticBaseEvent;\n}\nvar EventInterface = {\n    eventPhase: 0,\n    bubbles: 0,\n    cancelable: 0,\n    timeStamp: function (event) {\n      return event.timeStamp || Date.now();\n    },\n    defaultPrevented: 0,\n    isTrusted: 0\n  },\n  SyntheticEvent = createSyntheticEvent(EventInterface),\n  UIEventInterface = assign({}, EventInterface, { view: 0, detail: 0 }),\n  SyntheticUIEvent = createSyntheticEvent(UIEventInterface),\n  lastMovementX,\n  lastMovementY,\n  lastMouseEvent,\n  MouseEventInterface = assign({}, UIEventInterface, {\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    getModifierState: getEventModifierState,\n    button: 0,\n    buttons: 0,\n    relatedTarget: function (event) {\n      return void 0 === event.relatedTarget\n        ? event.fromElement === event.srcElement\n          ? event.toElement\n          : event.fromElement\n        : event.relatedTarget;\n    },\n    movementX: function (event) {\n      if (\"movementX\" in event) return event.movementX;\n      event !== lastMouseEvent &&\n        (lastMouseEvent && \"mousemove\" === event.type\n          ? ((lastMovementX = event.screenX - lastMouseEvent.screenX),\n            (lastMovementY = event.screenY - lastMouseEvent.screenY))\n          : (lastMovementY = lastMovementX = 0),\n        (lastMouseEvent = event));\n      return lastMovementX;\n    },\n    movementY: function (event) {\n      return \"movementY\" in event ? event.movementY : lastMovementY;\n    }\n  }),\n  SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface),\n  DragEventInterface = assign({}, MouseEventInterface, { dataTransfer: 0 }),\n  SyntheticDragEvent = createSyntheticEvent(DragEventInterface),\n  FocusEventInterface = assign({}, UIEventInterface, { relatedTarget: 0 }),\n  SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface),\n  AnimationEventInterface = assign({}, EventInterface, {\n    animationName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticAnimationEvent = createSyntheticEvent(AnimationEventInterface),\n  ClipboardEventInterface = assign({}, EventInterface, {\n    clipboardData: function (event) {\n      return \"clipboardData\" in event\n        ? event.clipboardData\n        : window.clipboardData;\n    }\n  }),\n  SyntheticClipboardEvent = createSyntheticEvent(ClipboardEventInterface),\n  CompositionEventInterface = assign({}, EventInterface, { data: 0 }),\n  SyntheticCompositionEvent = createSyntheticEvent(CompositionEventInterface),\n  normalizeKey = {\n    Esc: \"Escape\",\n    Spacebar: \" \",\n    Left: \"ArrowLeft\",\n    Up: \"ArrowUp\",\n    Right: \"ArrowRight\",\n    Down: \"ArrowDown\",\n    Del: \"Delete\",\n    Win: \"OS\",\n    Menu: \"ContextMenu\",\n    Apps: \"ContextMenu\",\n    Scroll: \"ScrollLock\",\n    MozPrintableKey: \"Unidentified\"\n  },\n  translateToKey = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    12: \"Clear\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Escape\",\n    32: \" \",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"ArrowLeft\",\n    38: \"ArrowUp\",\n    39: \"ArrowRight\",\n    40: \"ArrowDown\",\n    45: \"Insert\",\n    46: \"Delete\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    144: \"NumLock\",\n    145: \"ScrollLock\",\n    224: \"Meta\"\n  },\n  modifierKeyToProp = {\n    Alt: \"altKey\",\n    Control: \"ctrlKey\",\n    Meta: \"metaKey\",\n    Shift: \"shiftKey\"\n  };\nfunction modifierStateGetter(keyArg) {\n  var nativeEvent = this.nativeEvent;\n  return nativeEvent.getModifierState\n    ? nativeEvent.getModifierState(keyArg)\n    : (keyArg = modifierKeyToProp[keyArg])\n      ? !!nativeEvent[keyArg]\n      : !1;\n}\nfunction getEventModifierState() {\n  return modifierStateGetter;\n}\nvar KeyboardEventInterface = assign({}, UIEventInterface, {\n    key: function (nativeEvent) {\n      if (nativeEvent.key) {\n        var key = normalizeKey[nativeEvent.key] || nativeEvent.key;\n        if (\"Unidentified\" !== key) return key;\n      }\n      return \"keypress\" === nativeEvent.type\n        ? ((nativeEvent = getEventCharCode(nativeEvent)),\n          13 === nativeEvent ? \"Enter\" : String.fromCharCode(nativeEvent))\n        : \"keydown\" === nativeEvent.type || \"keyup\" === nativeEvent.type\n          ? translateToKey[nativeEvent.keyCode] || \"Unidentified\"\n          : \"\";\n    },\n    code: 0,\n    location: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    repeat: 0,\n    locale: 0,\n    getModifierState: getEventModifierState,\n    charCode: function (event) {\n      return \"keypress\" === event.type ? getEventCharCode(event) : 0;\n    },\n    keyCode: function (event) {\n      return \"keydown\" === event.type || \"keyup\" === event.type\n        ? event.keyCode\n        : 0;\n    },\n    which: function (event) {\n      return \"keypress\" === event.type\n        ? getEventCharCode(event)\n        : \"keydown\" === event.type || \"keyup\" === event.type\n          ? event.keyCode\n          : 0;\n    }\n  }),\n  SyntheticKeyboardEvent = createSyntheticEvent(KeyboardEventInterface),\n  PointerEventInterface = assign({}, MouseEventInterface, {\n    pointerId: 0,\n    width: 0,\n    height: 0,\n    pressure: 0,\n    tangentialPressure: 0,\n    tiltX: 0,\n    tiltY: 0,\n    twist: 0,\n    pointerType: 0,\n    isPrimary: 0\n  }),\n  SyntheticPointerEvent = createSyntheticEvent(PointerEventInterface),\n  TouchEventInterface = assign({}, UIEventInterface, {\n    touches: 0,\n    targetTouches: 0,\n    changedTouches: 0,\n    altKey: 0,\n    metaKey: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    getModifierState: getEventModifierState\n  }),\n  SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface),\n  TransitionEventInterface = assign({}, EventInterface, {\n    propertyName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticTransitionEvent = createSyntheticEvent(TransitionEventInterface),\n  WheelEventInterface = assign({}, MouseEventInterface, {\n    deltaX: function (event) {\n      return \"deltaX\" in event\n        ? event.deltaX\n        : \"wheelDeltaX\" in event\n          ? -event.wheelDeltaX\n          : 0;\n    },\n    deltaY: function (event) {\n      return \"deltaY\" in event\n        ? event.deltaY\n        : \"wheelDeltaY\" in event\n          ? -event.wheelDeltaY\n          : \"wheelDelta\" in event\n            ? -event.wheelDelta\n            : 0;\n    },\n    deltaZ: 0,\n    deltaMode: 0\n  }),\n  SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface),\n  ToggleEventInterface = assign({}, EventInterface, {\n    newState: 0,\n    oldState: 0\n  }),\n  SyntheticToggleEvent = createSyntheticEvent(ToggleEventInterface),\n  END_KEYCODES = [9, 13, 27, 32],\n  canUseCompositionEvent = canUseDOM && \"CompositionEvent\" in window,\n  documentMode = null;\ncanUseDOM &&\n  \"documentMode\" in document &&\n  (documentMode = document.documentMode);\nvar canUseTextInputEvent = canUseDOM && \"TextEvent\" in window && !documentMode,\n  useFallbackCompositionData =\n    canUseDOM &&\n    (!canUseCompositionEvent ||\n      (documentMode && 8 < documentMode && 11 >= documentMode)),\n  SPACEBAR_CHAR = String.fromCharCode(32),\n  hasSpaceKeypress = !1;\nfunction isFallbackCompositionEnd(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"keyup\":\n      return -1 !== END_KEYCODES.indexOf(nativeEvent.keyCode);\n    case \"keydown\":\n      return 229 !== nativeEvent.keyCode;\n    case \"keypress\":\n    case \"mousedown\":\n    case \"focusout\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction getDataFromCustomEvent(nativeEvent) {\n  nativeEvent = nativeEvent.detail;\n  return \"object\" === typeof nativeEvent && \"data\" in nativeEvent\n    ? nativeEvent.data\n    : null;\n}\nvar isComposing = !1;\nfunction getNativeBeforeInputChars(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"compositionend\":\n      return getDataFromCustomEvent(nativeEvent);\n    case \"keypress\":\n      if (32 !== nativeEvent.which) return null;\n      hasSpaceKeypress = !0;\n      return SPACEBAR_CHAR;\n    case \"textInput\":\n      return (\n        (domEventName = nativeEvent.data),\n        domEventName === SPACEBAR_CHAR && hasSpaceKeypress ? null : domEventName\n      );\n    default:\n      return null;\n  }\n}\nfunction getFallbackBeforeInputChars(domEventName, nativeEvent) {\n  if (isComposing)\n    return \"compositionend\" === domEventName ||\n      (!canUseCompositionEvent &&\n        isFallbackCompositionEnd(domEventName, nativeEvent))\n      ? ((domEventName = getData()),\n        (fallbackText = startText = root = null),\n        (isComposing = !1),\n        domEventName)\n      : null;\n  switch (domEventName) {\n    case \"paste\":\n      return null;\n    case \"keypress\":\n      if (\n        !(nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) ||\n        (nativeEvent.ctrlKey && nativeEvent.altKey)\n      ) {\n        if (nativeEvent.char && 1 < nativeEvent.char.length)\n          return nativeEvent.char;\n        if (nativeEvent.which) return String.fromCharCode(nativeEvent.which);\n      }\n      return null;\n    case \"compositionend\":\n      return useFallbackCompositionData && \"ko\" !== nativeEvent.locale\n        ? null\n        : nativeEvent.data;\n    default:\n      return null;\n  }\n}\nvar supportedInputTypes = {\n  color: !0,\n  date: !0,\n  datetime: !0,\n  \"datetime-local\": !0,\n  email: !0,\n  month: !0,\n  number: !0,\n  password: !0,\n  range: !0,\n  search: !0,\n  tel: !0,\n  text: !0,\n  time: !0,\n  url: !0,\n  week: !0\n};\nfunction isTextInputElement(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return \"input\" === nodeName\n    ? !!supportedInputTypes[elem.type]\n    : \"textarea\" === nodeName\n      ? !0\n      : !1;\n}\nfunction createAndAccumulateChangeEvent(\n  dispatchQueue,\n  inst,\n  nativeEvent,\n  target\n) {\n  restoreTarget\n    ? restoreQueue\n      ? restoreQueue.push(target)\n      : (restoreQueue = [target])\n    : (restoreTarget = target);\n  inst = accumulateTwoPhaseListeners(inst, \"onChange\");\n  0 < inst.length &&\n    ((nativeEvent = new SyntheticEvent(\n      \"onChange\",\n      \"change\",\n      null,\n      nativeEvent,\n      target\n    )),\n    dispatchQueue.push({ event: nativeEvent, listeners: inst }));\n}\nvar activeElement$1 = null,\n  activeElementInst$1 = null;\nfunction runEventInBatch(dispatchQueue) {\n  processDispatchQueue(dispatchQueue, 0);\n}\nfunction getInstIfValueChanged(targetInst) {\n  var targetNode = getNodeFromInstance(targetInst);\n  if (updateValueIfChanged(targetNode)) return targetInst;\n}\nfunction getTargetInstForChangeEvent(domEventName, targetInst) {\n  if (\"change\" === domEventName) return targetInst;\n}\nvar isInputEventSupported = !1;\nif (canUseDOM) {\n  var JSCompiler_inline_result$jscomp$283;\n  if (canUseDOM) {\n    var isSupported$jscomp$inline_418 = \"oninput\" in document;\n    if (!isSupported$jscomp$inline_418) {\n      var element$jscomp$inline_419 = document.createElement(\"div\");\n      element$jscomp$inline_419.setAttribute(\"oninput\", \"return;\");\n      isSupported$jscomp$inline_418 =\n        \"function\" === typeof element$jscomp$inline_419.oninput;\n    }\n    JSCompiler_inline_result$jscomp$283 = isSupported$jscomp$inline_418;\n  } else JSCompiler_inline_result$jscomp$283 = !1;\n  isInputEventSupported =\n    JSCompiler_inline_result$jscomp$283 &&\n    (!document.documentMode || 9 < document.documentMode);\n}\nfunction stopWatchingForValueChange() {\n  activeElement$1 &&\n    (activeElement$1.detachEvent(\"onpropertychange\", handlePropertyChange),\n    (activeElementInst$1 = activeElement$1 = null));\n}\nfunction handlePropertyChange(nativeEvent) {\n  if (\n    \"value\" === nativeEvent.propertyName &&\n    getInstIfValueChanged(activeElementInst$1)\n  ) {\n    var dispatchQueue = [];\n    createAndAccumulateChangeEvent(\n      dispatchQueue,\n      activeElementInst$1,\n      nativeEvent,\n      getEventTarget(nativeEvent)\n    );\n    batchedUpdates$1(runEventInBatch, dispatchQueue);\n  }\n}\nfunction handleEventsForInputEventPolyfill(domEventName, target, targetInst) {\n  \"focusin\" === domEventName\n    ? (stopWatchingForValueChange(),\n      (activeElement$1 = target),\n      (activeElementInst$1 = targetInst),\n      activeElement$1.attachEvent(\"onpropertychange\", handlePropertyChange))\n    : \"focusout\" === domEventName && stopWatchingForValueChange();\n}\nfunction getTargetInstForInputEventPolyfill(domEventName) {\n  if (\n    \"selectionchange\" === domEventName ||\n    \"keyup\" === domEventName ||\n    \"keydown\" === domEventName\n  )\n    return getInstIfValueChanged(activeElementInst$1);\n}\nfunction getTargetInstForClickEvent(domEventName, targetInst) {\n  if (\"click\" === domEventName) return getInstIfValueChanged(targetInst);\n}\nfunction getTargetInstForInputOrChangeEvent(domEventName, targetInst) {\n  if (\"input\" === domEventName || \"change\" === domEventName)\n    return getInstIfValueChanged(targetInst);\n}\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is;\nfunction shallowEqual(objA, objB) {\n  if (objectIs(objA, objB)) return !0;\n  if (\n    \"object\" !== typeof objA ||\n    null === objA ||\n    \"object\" !== typeof objB ||\n    null === objB\n  )\n    return !1;\n  var keysA = Object.keys(objA),\n    keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return !1;\n  for (keysB = 0; keysB < keysA.length; keysB++) {\n    var currentKey = keysA[keysB];\n    if (\n      !hasOwnProperty.call(objB, currentKey) ||\n      !objectIs(objA[currentKey], objB[currentKey])\n    )\n      return !1;\n  }\n  return !0;\n}\nfunction getLeafNode(node) {\n  for (; node && node.firstChild; ) node = node.firstChild;\n  return node;\n}\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  root = 0;\n  for (var nodeEnd; node; ) {\n    if (3 === node.nodeType) {\n      nodeEnd = root + node.textContent.length;\n      if (root <= offset && nodeEnd >= offset)\n        return { node: node, offset: offset - root };\n      root = nodeEnd;\n    }\n    a: {\n      for (; node; ) {\n        if (node.nextSibling) {\n          node = node.nextSibling;\n          break a;\n        }\n        node = node.parentNode;\n      }\n      node = void 0;\n    }\n    node = getLeafNode(node);\n  }\n}\nfunction containsNode(outerNode, innerNode) {\n  return outerNode && innerNode\n    ? outerNode === innerNode\n      ? !0\n      : outerNode && 3 === outerNode.nodeType\n        ? !1\n        : innerNode && 3 === innerNode.nodeType\n          ? containsNode(outerNode, innerNode.parentNode)\n          : \"contains\" in outerNode\n            ? outerNode.contains(innerNode)\n            : outerNode.compareDocumentPosition\n              ? !!(outerNode.compareDocumentPosition(innerNode) & 16)\n              : !1\n    : !1;\n}\nfunction getActiveElementDeep(containerInfo) {\n  containerInfo =\n    null != containerInfo &&\n    null != containerInfo.ownerDocument &&\n    null != containerInfo.ownerDocument.defaultView\n      ? containerInfo.ownerDocument.defaultView\n      : window;\n  for (\n    var element = getActiveElement(containerInfo.document);\n    element instanceof containerInfo.HTMLIFrameElement;\n\n  ) {\n    try {\n      var JSCompiler_inline_result =\n        \"string\" === typeof element.contentWindow.location.href;\n    } catch (err) {\n      JSCompiler_inline_result = !1;\n    }\n    if (JSCompiler_inline_result) containerInfo = element.contentWindow;\n    else break;\n    element = getActiveElement(containerInfo.document);\n  }\n  return element;\n}\nfunction hasSelectionCapabilities(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return (\n    nodeName &&\n    ((\"input\" === nodeName &&\n      (\"text\" === elem.type ||\n        \"search\" === elem.type ||\n        \"tel\" === elem.type ||\n        \"url\" === elem.type ||\n        \"password\" === elem.type)) ||\n      \"textarea\" === nodeName ||\n      \"true\" === elem.contentEditable)\n  );\n}\nfunction restoreSelection(priorSelectionInformation, containerInfo) {\n  var curFocusedElem = getActiveElementDeep(containerInfo);\n  containerInfo = priorSelectionInformation.focusedElem;\n  var priorSelectionRange = priorSelectionInformation.selectionRange;\n  if (\n    curFocusedElem !== containerInfo &&\n    containerInfo &&\n    containerInfo.ownerDocument &&\n    containsNode(containerInfo.ownerDocument.documentElement, containerInfo)\n  ) {\n    if (null !== priorSelectionRange && hasSelectionCapabilities(containerInfo))\n      if (\n        ((priorSelectionInformation = priorSelectionRange.start),\n        (curFocusedElem = priorSelectionRange.end),\n        void 0 === curFocusedElem &&\n          (curFocusedElem = priorSelectionInformation),\n        \"selectionStart\" in containerInfo)\n      )\n        (containerInfo.selectionStart = priorSelectionInformation),\n          (containerInfo.selectionEnd = Math.min(\n            curFocusedElem,\n            containerInfo.value.length\n          ));\n      else if (\n        ((curFocusedElem =\n          ((priorSelectionInformation =\n            containerInfo.ownerDocument || document) &&\n            priorSelectionInformation.defaultView) ||\n          window),\n        curFocusedElem.getSelection)\n      ) {\n        curFocusedElem = curFocusedElem.getSelection();\n        var length = containerInfo.textContent.length,\n          start = Math.min(priorSelectionRange.start, length);\n        priorSelectionRange =\n          void 0 === priorSelectionRange.end\n            ? start\n            : Math.min(priorSelectionRange.end, length);\n        !curFocusedElem.extend &&\n          start > priorSelectionRange &&\n          ((length = priorSelectionRange),\n          (priorSelectionRange = start),\n          (start = length));\n        length = getNodeForCharacterOffset(containerInfo, start);\n        var endMarker = getNodeForCharacterOffset(\n          containerInfo,\n          priorSelectionRange\n        );\n        length &&\n          endMarker &&\n          (1 !== curFocusedElem.rangeCount ||\n            curFocusedElem.anchorNode !== length.node ||\n            curFocusedElem.anchorOffset !== length.offset ||\n            curFocusedElem.focusNode !== endMarker.node ||\n            curFocusedElem.focusOffset !== endMarker.offset) &&\n          ((priorSelectionInformation =\n            priorSelectionInformation.createRange()),\n          priorSelectionInformation.setStart(length.node, length.offset),\n          curFocusedElem.removeAllRanges(),\n          start > priorSelectionRange\n            ? (curFocusedElem.addRange(priorSelectionInformation),\n              curFocusedElem.extend(endMarker.node, endMarker.offset))\n            : (priorSelectionInformation.setEnd(\n                endMarker.node,\n                endMarker.offset\n              ),\n              curFocusedElem.addRange(priorSelectionInformation)));\n      }\n    priorSelectionInformation = [];\n    for (\n      curFocusedElem = containerInfo;\n      (curFocusedElem = curFocusedElem.parentNode);\n\n    )\n      1 === curFocusedElem.nodeType &&\n        priorSelectionInformation.push({\n          element: curFocusedElem,\n          left: curFocusedElem.scrollLeft,\n          top: curFocusedElem.scrollTop\n        });\n    \"function\" === typeof containerInfo.focus && containerInfo.focus();\n    for (\n      containerInfo = 0;\n      containerInfo < priorSelectionInformation.length;\n      containerInfo++\n    )\n      (curFocusedElem = priorSelectionInformation[containerInfo]),\n        (curFocusedElem.element.scrollLeft = curFocusedElem.left),\n        (curFocusedElem.element.scrollTop = curFocusedElem.top);\n  }\n}\nvar skipSelectionChangeEvent =\n    canUseDOM && \"documentMode\" in document && 11 >= document.documentMode,\n  activeElement = null,\n  activeElementInst = null,\n  lastSelection = null,\n  mouseDown = !1;\nfunction constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget) {\n  var doc =\n    nativeEventTarget.window === nativeEventTarget\n      ? nativeEventTarget.document\n      : 9 === nativeEventTarget.nodeType\n        ? nativeEventTarget\n        : nativeEventTarget.ownerDocument;\n  mouseDown ||\n    null == activeElement ||\n    activeElement !== getActiveElement(doc) ||\n    ((doc = activeElement),\n    \"selectionStart\" in doc && hasSelectionCapabilities(doc)\n      ? (doc = { start: doc.selectionStart, end: doc.selectionEnd })\n      : ((doc = (\n          (doc.ownerDocument && doc.ownerDocument.defaultView) ||\n          window\n        ).getSelection()),\n        (doc = {\n          anchorNode: doc.anchorNode,\n          anchorOffset: doc.anchorOffset,\n          focusNode: doc.focusNode,\n          focusOffset: doc.focusOffset\n        })),\n    (lastSelection && shallowEqual(lastSelection, doc)) ||\n      ((lastSelection = doc),\n      (doc = accumulateTwoPhaseListeners(activeElementInst, \"onSelect\")),\n      0 < doc.length &&\n        ((nativeEvent = new SyntheticEvent(\n          \"onSelect\",\n          \"select\",\n          null,\n          nativeEvent,\n          nativeEventTarget\n        )),\n        dispatchQueue.push({ event: nativeEvent, listeners: doc }),\n        (nativeEvent.target = activeElement))));\n}\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\" + styleProp] = \"webkit\" + eventName;\n  prefixes[\"Moz\" + styleProp] = \"moz\" + eventName;\n  return prefixes;\n}\nvar vendorPrefixes = {\n    animationend: makePrefixMap(\"Animation\", \"AnimationEnd\"),\n    animationiteration: makePrefixMap(\"Animation\", \"AnimationIteration\"),\n    animationstart: makePrefixMap(\"Animation\", \"AnimationStart\"),\n    transitionrun: makePrefixMap(\"Transition\", \"TransitionRun\"),\n    transitionstart: makePrefixMap(\"Transition\", \"TransitionStart\"),\n    transitioncancel: makePrefixMap(\"Transition\", \"TransitionCancel\"),\n    transitionend: makePrefixMap(\"Transition\", \"TransitionEnd\")\n  },\n  prefixedEventNames = {},\n  style = {};\ncanUseDOM &&\n  ((style = document.createElement(\"div\").style),\n  \"AnimationEvent\" in window ||\n    (delete vendorPrefixes.animationend.animation,\n    delete vendorPrefixes.animationiteration.animation,\n    delete vendorPrefixes.animationstart.animation),\n  \"TransitionEvent\" in window ||\n    delete vendorPrefixes.transitionend.transition);\nfunction getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) return prefixedEventNames[eventName];\n  if (!vendorPrefixes[eventName]) return eventName;\n  var prefixMap = vendorPrefixes[eventName],\n    styleProp;\n  for (styleProp in prefixMap)\n    if (prefixMap.hasOwnProperty(styleProp) && styleProp in style)\n      return (prefixedEventNames[eventName] = prefixMap[styleProp]);\n  return eventName;\n}\nvar ANIMATION_END = getVendorPrefixedEventName(\"animationend\"),\n  ANIMATION_ITERATION = getVendorPrefixedEventName(\"animationiteration\"),\n  ANIMATION_START = getVendorPrefixedEventName(\"animationstart\"),\n  TRANSITION_RUN = getVendorPrefixedEventName(\"transitionrun\"),\n  TRANSITION_START = getVendorPrefixedEventName(\"transitionstart\"),\n  TRANSITION_CANCEL = getVendorPrefixedEventName(\"transitioncancel\"),\n  TRANSITION_END = getVendorPrefixedEventName(\"transitionend\"),\n  topLevelEventsToReactNames = new Map(),\n  simpleEventPluginEvents =\n    \"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel\".split(\n      \" \"\n    );\nfunction registerSimpleEvent(domEventName, reactName) {\n  topLevelEventsToReactNames.set(domEventName, reactName);\n  registerTwoPhaseEvent(reactName, [domEventName]);\n}\nvar concurrentQueues = [],\n  concurrentQueuesIndex = 0,\n  concurrentlyUpdatedLanes = 0;\nfunction finishQueueingConcurrentUpdates() {\n  for (\n    var endIndex = concurrentQueuesIndex,\n      i = (concurrentlyUpdatedLanes = concurrentQueuesIndex = 0);\n    i < endIndex;\n\n  ) {\n    var fiber = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var queue = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var update = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var lane = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    if (null !== queue && null !== update) {\n      var pending = queue.pending;\n      null === pending\n        ? (update.next = update)\n        : ((update.next = pending.next), (pending.next = update));\n      queue.pending = update;\n    }\n    0 !== lane && markUpdateLaneFromFiberToRoot(fiber, update, lane);\n  }\n}\nfunction enqueueUpdate$1(fiber, queue, update, lane) {\n  concurrentQueues[concurrentQueuesIndex++] = fiber;\n  concurrentQueues[concurrentQueuesIndex++] = queue;\n  concurrentQueues[concurrentQueuesIndex++] = update;\n  concurrentQueues[concurrentQueuesIndex++] = lane;\n  concurrentlyUpdatedLanes |= lane;\n  fiber.lanes |= lane;\n  fiber = fiber.alternate;\n  null !== fiber && (fiber.lanes |= lane);\n}\nfunction enqueueConcurrentHookUpdate(fiber, queue, update, lane) {\n  enqueueUpdate$1(fiber, queue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction enqueueConcurrentRenderForLane(fiber, lane) {\n  enqueueUpdate$1(fiber, null, null, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction markUpdateLaneFromFiberToRoot(sourceFiber, update, lane) {\n  sourceFiber.lanes |= lane;\n  var alternate = sourceFiber.alternate;\n  null !== alternate && (alternate.lanes |= lane);\n  for (var isHidden = !1, parent = sourceFiber.return; null !== parent; )\n    (parent.childLanes |= lane),\n      (alternate = parent.alternate),\n      null !== alternate && (alternate.childLanes |= lane),\n      22 === parent.tag &&\n        ((sourceFiber = parent.stateNode),\n        null === sourceFiber || sourceFiber._visibility & 1 || (isHidden = !0)),\n      (sourceFiber = parent),\n      (parent = parent.return);\n  isHidden &&\n    null !== update &&\n    3 === sourceFiber.tag &&\n    ((parent = sourceFiber.stateNode),\n    (isHidden = 31 - clz32(lane)),\n    (parent = parent.hiddenUpdates),\n    (sourceFiber = parent[isHidden]),\n    null === sourceFiber\n      ? (parent[isHidden] = [update])\n      : sourceFiber.push(update),\n    (update.lane = lane | 536870912));\n}\nfunction getRootForUpdatedFiber(sourceFiber) {\n  if (50 < nestedUpdateCount)\n    throw (\n      ((nestedUpdateCount = 0),\n      (rootWithNestedUpdates = null),\n      Error(formatProdErrorMessage(185)))\n    );\n  for (var parent = sourceFiber.return; null !== parent; )\n    (sourceFiber = parent), (parent = sourceFiber.return);\n  return 3 === sourceFiber.tag ? sourceFiber.stateNode : null;\n}\nvar emptyContextObject = {},\n  CapturedStacks = new WeakMap();\nfunction createCapturedValueAtFiber(value, source) {\n  if (\"object\" === typeof value && null !== value) {\n    var existing = CapturedStacks.get(value);\n    if (void 0 !== existing) return existing;\n    source = {\n      value: value,\n      source: source,\n      stack: getStackByFiberInDevAndProd(source)\n    };\n    CapturedStacks.set(value, source);\n    return source;\n  }\n  return {\n    value: value,\n    source: source,\n    stack: getStackByFiberInDevAndProd(source)\n  };\n}\nvar forkStack = [],\n  forkStackIndex = 0,\n  treeForkProvider = null,\n  treeForkCount = 0,\n  idStack = [],\n  idStackIndex = 0,\n  treeContextProvider = null,\n  treeContextId = 1,\n  treeContextOverflow = \"\";\nfunction pushTreeFork(workInProgress, totalChildren) {\n  forkStack[forkStackIndex++] = treeForkCount;\n  forkStack[forkStackIndex++] = treeForkProvider;\n  treeForkProvider = workInProgress;\n  treeForkCount = totalChildren;\n}\nfunction pushTreeId(workInProgress, totalChildren, index) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextProvider = workInProgress;\n  var baseIdWithLeadingBit = treeContextId;\n  workInProgress = treeContextOverflow;\n  var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;\n  baseIdWithLeadingBit &= ~(1 << baseLength);\n  index += 1;\n  var length = 32 - clz32(totalChildren) + baseLength;\n  if (30 < length) {\n    var numberOfOverflowBits = baseLength - (baseLength % 5);\n    length = (\n      baseIdWithLeadingBit &\n      ((1 << numberOfOverflowBits) - 1)\n    ).toString(32);\n    baseIdWithLeadingBit >>= numberOfOverflowBits;\n    baseLength -= numberOfOverflowBits;\n    treeContextId =\n      (1 << (32 - clz32(totalChildren) + baseLength)) |\n      (index << baseLength) |\n      baseIdWithLeadingBit;\n    treeContextOverflow = length + workInProgress;\n  } else\n    (treeContextId =\n      (1 << length) | (index << baseLength) | baseIdWithLeadingBit),\n      (treeContextOverflow = workInProgress);\n}\nfunction pushMaterializedTreeId(workInProgress) {\n  null !== workInProgress.return &&\n    (pushTreeFork(workInProgress, 1), pushTreeId(workInProgress, 1, 0));\n}\nfunction popTreeContext(workInProgress) {\n  for (; workInProgress === treeForkProvider; )\n    (treeForkProvider = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null),\n      (treeForkCount = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null);\n  for (; workInProgress === treeContextProvider; )\n    (treeContextProvider = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextOverflow = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextId = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null);\n}\nvar hydrationParentFiber = null,\n  nextHydratableInstance = null,\n  isHydrating = !1,\n  hydrationErrors = null,\n  rootOrSingletonContext = !1,\n  HydrationMismatchException = Error(formatProdErrorMessage(519));\nfunction throwOnHydrationMismatch(fiber) {\n  var error = Error(formatProdErrorMessage(418, \"\"));\n  queueHydrationError(createCapturedValueAtFiber(error, fiber));\n  throw HydrationMismatchException;\n}\nfunction prepareToHydrateHostInstance(fiber) {\n  var instance = fiber.stateNode,\n    type = fiber.type,\n    props = fiber.memoizedProps;\n  instance[internalInstanceKey] = fiber;\n  instance[internalPropsKey] = props;\n  switch (type) {\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", instance);\n      listenToNonDelegatedEvent(\"close\", instance);\n      break;\n    case \"iframe\":\n    case \"object\":\n    case \"embed\":\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (type = 0; type < mediaEventTypes.length; type++)\n        listenToNonDelegatedEvent(mediaEventTypes[type], instance);\n      break;\n    case \"source\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      break;\n    case \"img\":\n    case \"image\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", instance);\n      break;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      initInput(\n        instance,\n        props.value,\n        props.defaultValue,\n        props.checked,\n        props.defaultChecked,\n        props.type,\n        props.name,\n        !0\n      );\n      track(instance);\n      break;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      break;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", instance),\n        initTextarea(instance, props.value, props.defaultValue, props.children),\n        track(instance);\n  }\n  type = props.children;\n  (\"string\" !== typeof type &&\n    \"number\" !== typeof type &&\n    \"bigint\" !== typeof type) ||\n  instance.textContent === \"\" + type ||\n  !0 === props.suppressHydrationWarning ||\n  checkForUnmatchedText(instance.textContent, type)\n    ? (null != props.popover &&\n        (listenToNonDelegatedEvent(\"beforetoggle\", instance),\n        listenToNonDelegatedEvent(\"toggle\", instance)),\n      null != props.onScroll && listenToNonDelegatedEvent(\"scroll\", instance),\n      null != props.onScrollEnd &&\n        listenToNonDelegatedEvent(\"scrollend\", instance),\n      null != props.onClick && (instance.onclick = noop$1),\n      (instance = !0))\n    : (instance = !1);\n  instance || throwOnHydrationMismatch(fiber);\n}\nfunction popToNextHostParent(fiber) {\n  for (hydrationParentFiber = fiber.return; hydrationParentFiber; )\n    switch (hydrationParentFiber.tag) {\n      case 3:\n      case 27:\n        rootOrSingletonContext = !0;\n        return;\n      case 5:\n      case 13:\n        rootOrSingletonContext = !1;\n        return;\n      default:\n        hydrationParentFiber = hydrationParentFiber.return;\n    }\n}\nfunction popHydrationState(fiber) {\n  if (fiber !== hydrationParentFiber) return !1;\n  if (!isHydrating) return popToNextHostParent(fiber), (isHydrating = !0), !1;\n  var shouldClear = !1,\n    JSCompiler_temp;\n  if ((JSCompiler_temp = 3 !== fiber.tag && 27 !== fiber.tag)) {\n    if ((JSCompiler_temp = 5 === fiber.tag))\n      (JSCompiler_temp = fiber.type),\n        (JSCompiler_temp =\n          !(\"form\" !== JSCompiler_temp && \"button\" !== JSCompiler_temp) ||\n          shouldSetTextContent(fiber.type, fiber.memoizedProps));\n    JSCompiler_temp = !JSCompiler_temp;\n  }\n  JSCompiler_temp && (shouldClear = !0);\n  shouldClear && nextHydratableInstance && throwOnHydrationMismatch(fiber);\n  popToNextHostParent(fiber);\n  if (13 === fiber.tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    a: {\n      fiber = fiber.nextSibling;\n      for (shouldClear = 0; fiber; ) {\n        if (8 === fiber.nodeType)\n          if (((JSCompiler_temp = fiber.data), \"/$\" === JSCompiler_temp)) {\n            if (0 === shouldClear) {\n              nextHydratableInstance = getNextHydratable(fiber.nextSibling);\n              break a;\n            }\n            shouldClear--;\n          } else\n            (\"$\" !== JSCompiler_temp &&\n              \"$!\" !== JSCompiler_temp &&\n              \"$?\" !== JSCompiler_temp) ||\n              shouldClear++;\n        fiber = fiber.nextSibling;\n      }\n      nextHydratableInstance = null;\n    }\n  } else\n    nextHydratableInstance = hydrationParentFiber\n      ? getNextHydratable(fiber.stateNode.nextSibling)\n      : null;\n  return !0;\n}\nfunction resetHydrationState() {\n  nextHydratableInstance = hydrationParentFiber = null;\n  isHydrating = !1;\n}\nfunction queueHydrationError(error) {\n  null === hydrationErrors\n    ? (hydrationErrors = [error])\n    : hydrationErrors.push(error);\n}\nvar SuspenseException = Error(formatProdErrorMessage(460)),\n  SuspenseyCommitException = Error(formatProdErrorMessage(474)),\n  noopSuspenseyCommitThenable = { then: function () {} };\nfunction isThenableResolved(thenable) {\n  thenable = thenable.status;\n  return \"fulfilled\" === thenable || \"rejected\" === thenable;\n}\nfunction noop$3() {}\nfunction trackUsedThenable(thenableState, thenable, index) {\n  index = thenableState[index];\n  void 0 === index\n    ? thenableState.push(thenable)\n    : index !== thenable && (thenable.then(noop$3, noop$3), (thenable = index));\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      thenableState = thenable.reason;\n      if (thenableState === SuspenseException)\n        throw Error(formatProdErrorMessage(483));\n      throw thenableState;\n    default:\n      if (\"string\" === typeof thenable.status) thenable.then(noop$3, noop$3);\n      else {\n        thenableState = workInProgressRoot;\n        if (null !== thenableState && 100 < thenableState.shellSuspendCounter)\n          throw Error(formatProdErrorMessage(482));\n        thenableState = thenable;\n        thenableState.status = \"pending\";\n        thenableState.then(\n          function (fulfilledValue) {\n            if (\"pending\" === thenable.status) {\n              var fulfilledThenable = thenable;\n              fulfilledThenable.status = \"fulfilled\";\n              fulfilledThenable.value = fulfilledValue;\n            }\n          },\n          function (error) {\n            if (\"pending\" === thenable.status) {\n              var rejectedThenable = thenable;\n              rejectedThenable.status = \"rejected\";\n              rejectedThenable.reason = error;\n            }\n          }\n        );\n      }\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          thenableState = thenable.reason;\n          if (thenableState === SuspenseException)\n            throw Error(formatProdErrorMessage(483));\n          throw thenableState;\n      }\n      suspendedThenable = thenable;\n      throw SuspenseException;\n  }\n}\nvar suspendedThenable = null;\nfunction getSuspendedThenable() {\n  if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));\n  var thenable = suspendedThenable;\n  suspendedThenable = null;\n  return thenable;\n}\nvar thenableState$1 = null,\n  thenableIndexCounter$1 = 0;\nfunction unwrapThenable(thenable) {\n  var index = thenableIndexCounter$1;\n  thenableIndexCounter$1 += 1;\n  null === thenableState$1 && (thenableState$1 = []);\n  return trackUsedThenable(thenableState$1, thenable, index);\n}\nfunction coerceRef(workInProgress, element) {\n  element = element.props.ref;\n  workInProgress.ref = void 0 !== element ? element : null;\n}\nfunction throwOnInvalidObjectType(returnFiber, newChild) {\n  if (newChild.$$typeof === REACT_LEGACY_ELEMENT_TYPE)\n    throw Error(formatProdErrorMessage(525));\n  returnFiber = Object.prototype.toString.call(newChild);\n  throw Error(\n    formatProdErrorMessage(\n      31,\n      \"[object Object]\" === returnFiber\n        ? \"object with keys {\" + Object.keys(newChild).join(\", \") + \"}\"\n        : returnFiber\n    )\n  );\n}\nfunction resolveLazy(lazyType) {\n  var init = lazyType._init;\n  return init(lazyType._payload);\n}\nfunction createChildReconciler(shouldTrackSideEffects) {\n  function deleteChild(returnFiber, childToDelete) {\n    if (shouldTrackSideEffects) {\n      var deletions = returnFiber.deletions;\n      null === deletions\n        ? ((returnFiber.deletions = [childToDelete]), (returnFiber.flags |= 16))\n        : deletions.push(childToDelete);\n    }\n  }\n  function deleteRemainingChildren(returnFiber, currentFirstChild) {\n    if (!shouldTrackSideEffects) return null;\n    for (; null !== currentFirstChild; )\n      deleteChild(returnFiber, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return null;\n  }\n  function mapRemainingChildren(currentFirstChild) {\n    for (var existingChildren = new Map(); null !== currentFirstChild; )\n      null !== currentFirstChild.key\n        ? existingChildren.set(currentFirstChild.key, currentFirstChild)\n        : existingChildren.set(currentFirstChild.index, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return existingChildren;\n  }\n  function useFiber(fiber, pendingProps) {\n    fiber = createWorkInProgress(fiber, pendingProps);\n    fiber.index = 0;\n    fiber.sibling = null;\n    return fiber;\n  }\n  function placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex;\n    if (!shouldTrackSideEffects)\n      return (newFiber.flags |= 1048576), lastPlacedIndex;\n    newIndex = newFiber.alternate;\n    if (null !== newIndex)\n      return (\n        (newIndex = newIndex.index),\n        newIndex < lastPlacedIndex\n          ? ((newFiber.flags |= 33554434), lastPlacedIndex)\n          : newIndex\n      );\n    newFiber.flags |= 33554434;\n    return lastPlacedIndex;\n  }\n  function placeSingleChild(newFiber) {\n    shouldTrackSideEffects &&\n      null === newFiber.alternate &&\n      (newFiber.flags |= 33554434);\n    return newFiber;\n  }\n  function updateTextNode(returnFiber, current, textContent, lanes) {\n    if (null === current || 6 !== current.tag)\n      return (\n        (current = createFiberFromText(textContent, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, textContent);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateElement(returnFiber, current, element, lanes) {\n    var elementType = element.type;\n    if (elementType === REACT_FRAGMENT_TYPE)\n      return updateFragment(\n        returnFiber,\n        current,\n        element.props.children,\n        lanes,\n        element.key\n      );\n    if (\n      null !== current &&\n      (current.elementType === elementType ||\n        (\"object\" === typeof elementType &&\n          null !== elementType &&\n          elementType.$$typeof === REACT_LAZY_TYPE &&\n          resolveLazy(elementType) === current.type))\n    )\n      return (\n        (current = useFiber(current, element.props)),\n        coerceRef(current, element),\n        (current.return = returnFiber),\n        current\n      );\n    current = createFiberFromTypeAndProps(\n      element.type,\n      element.key,\n      element.props,\n      null,\n      returnFiber.mode,\n      lanes\n    );\n    coerceRef(current, element);\n    current.return = returnFiber;\n    return current;\n  }\n  function updatePortal(returnFiber, current, portal, lanes) {\n    if (\n      null === current ||\n      4 !== current.tag ||\n      current.stateNode.containerInfo !== portal.containerInfo ||\n      current.stateNode.implementation !== portal.implementation\n    )\n      return (\n        (current = createFiberFromPortal(portal, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, portal.children || []);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateFragment(returnFiber, current, fragment, lanes, key) {\n    if (null === current || 7 !== current.tag)\n      return (\n        (current = createFiberFromFragment(\n          fragment,\n          returnFiber.mode,\n          lanes,\n          key\n        )),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, fragment);\n    current.return = returnFiber;\n    return current;\n  }\n  function createChild(returnFiber, newChild, lanes) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (newChild = createFiberFromText(\n          \"\" + newChild,\n          returnFiber.mode,\n          lanes\n        )),\n        (newChild.return = returnFiber),\n        newChild\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (lanes = createFiberFromTypeAndProps(\n              newChild.type,\n              newChild.key,\n              newChild.props,\n              null,\n              returnFiber.mode,\n              lanes\n            )),\n            coerceRef(lanes, newChild),\n            (lanes.return = returnFiber),\n            lanes\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (newChild = createFiberFromPortal(\n              newChild,\n              returnFiber.mode,\n              lanes\n            )),\n            (newChild.return = returnFiber),\n            newChild\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return createChild(returnFiber, newChild, lanes);\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (newChild = createFiberFromFragment(\n            newChild,\n            returnFiber.mode,\n            lanes,\n            null\n          )),\n          (newChild.return = returnFiber),\n          newChild\n        );\n      if (\"function\" === typeof newChild.then)\n        return createChild(returnFiber, unwrapThenable(newChild), lanes);\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return createChild(\n          returnFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateSlot(returnFiber, oldFiber, newChild, lanes) {\n    var key = null !== oldFiber ? oldFiber.key : null;\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return null !== key\n        ? null\n        : updateTextNode(returnFiber, oldFiber, \"\" + newChild, lanes);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return newChild.key === key\n            ? updateElement(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_PORTAL_TYPE:\n          return newChild.key === key\n            ? updatePortal(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            updateSlot(returnFiber, oldFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return null !== key\n          ? null\n          : updateFragment(returnFiber, oldFiber, newChild, lanes, null);\n      if (\"function\" === typeof newChild.then)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateFromMap(\n    existingChildren,\n    returnFiber,\n    newIdx,\n    newChild,\n    lanes\n  ) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (existingChildren = existingChildren.get(newIdx) || null),\n        updateTextNode(returnFiber, existingChildren, \"\" + newChild, lanes)\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updateElement(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updatePortal(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_LAZY_TYPE:\n          var init = newChild._init;\n          newChild = init(newChild._payload);\n          return updateFromMap(\n            existingChildren,\n            returnFiber,\n            newIdx,\n            newChild,\n            lanes\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (existingChildren = existingChildren.get(newIdx) || null),\n          updateFragment(returnFiber, existingChildren, newChild, lanes, null)\n        );\n      if (\"function\" === typeof newChild.then)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return null;\n  }\n  function reconcileChildrenArray(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null;\n      null !== oldFiber && newIdx < newChildren.length;\n      newIdx++\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(\n        returnFiber,\n        oldFiber,\n        newChildren[newIdx],\n        lanes\n      );\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (newIdx === newChildren.length)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; newIdx < newChildren.length; newIdx++)\n        (oldFiber = createChild(returnFiber, newChildren[newIdx], lanes)),\n          null !== oldFiber &&\n            ((currentFirstChild = placeChild(\n              oldFiber,\n              currentFirstChild,\n              newIdx\n            )),\n            null === previousNewFiber\n              ? (resultingFirstChild = oldFiber)\n              : (previousNewFiber.sibling = oldFiber),\n            (previousNewFiber = oldFiber));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      newIdx < newChildren.length;\n      newIdx++\n    )\n      (nextOldFiber = updateFromMap(\n        oldFiber,\n        returnFiber,\n        newIdx,\n        newChildren[newIdx],\n        lanes\n      )),\n        null !== nextOldFiber &&\n          (shouldTrackSideEffects &&\n            null !== nextOldFiber.alternate &&\n            oldFiber.delete(\n              null === nextOldFiber.key ? newIdx : nextOldFiber.key\n            ),\n          (currentFirstChild = placeChild(\n            nextOldFiber,\n            currentFirstChild,\n            newIdx\n          )),\n          null === previousNewFiber\n            ? (resultingFirstChild = nextOldFiber)\n            : (previousNewFiber.sibling = nextOldFiber),\n          (previousNewFiber = nextOldFiber));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildrenIterator(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    if (null == newChildren) throw Error(formatProdErrorMessage(151));\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null,\n        step = newChildren.next();\n      null !== oldFiber && !step.done;\n      newIdx++, step = newChildren.next()\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(returnFiber, oldFiber, step.value, lanes);\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (step.done)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; !step.done; newIdx++, step = newChildren.next())\n        (step = createChild(returnFiber, step.value, lanes)),\n          null !== step &&\n            ((currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n            null === previousNewFiber\n              ? (resultingFirstChild = step)\n              : (previousNewFiber.sibling = step),\n            (previousNewFiber = step));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      !step.done;\n      newIdx++, step = newChildren.next()\n    )\n      (step = updateFromMap(oldFiber, returnFiber, newIdx, step.value, lanes)),\n        null !== step &&\n          (shouldTrackSideEffects &&\n            null !== step.alternate &&\n            oldFiber.delete(null === step.key ? newIdx : step.key),\n          (currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n          null === previousNewFiber\n            ? (resultingFirstChild = step)\n            : (previousNewFiber.sibling = step),\n          (previousNewFiber = step));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildFibersImpl(\n    returnFiber,\n    currentFirstChild,\n    newChild,\n    lanes\n  ) {\n    \"object\" === typeof newChild &&\n      null !== newChild &&\n      newChild.type === REACT_FRAGMENT_TYPE &&\n      null === newChild.key &&\n      (newChild = newChild.props.children);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          a: {\n            for (var key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key) {\n                key = newChild.type;\n                if (key === REACT_FRAGMENT_TYPE) {\n                  if (7 === currentFirstChild.tag) {\n                    deleteRemainingChildren(\n                      returnFiber,\n                      currentFirstChild.sibling\n                    );\n                    lanes = useFiber(\n                      currentFirstChild,\n                      newChild.props.children\n                    );\n                    lanes.return = returnFiber;\n                    returnFiber = lanes;\n                    break a;\n                  }\n                } else if (\n                  currentFirstChild.elementType === key ||\n                  (\"object\" === typeof key &&\n                    null !== key &&\n                    key.$$typeof === REACT_LAZY_TYPE &&\n                    resolveLazy(key) === currentFirstChild.type)\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.props);\n                  coerceRef(lanes, newChild);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                }\n                deleteRemainingChildren(returnFiber, currentFirstChild);\n                break;\n              } else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            newChild.type === REACT_FRAGMENT_TYPE\n              ? ((lanes = createFiberFromFragment(\n                  newChild.props.children,\n                  returnFiber.mode,\n                  lanes,\n                  newChild.key\n                )),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes))\n              : ((lanes = createFiberFromTypeAndProps(\n                  newChild.type,\n                  newChild.key,\n                  newChild.props,\n                  null,\n                  returnFiber.mode,\n                  lanes\n                )),\n                coerceRef(lanes, newChild),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes));\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_PORTAL_TYPE:\n          a: {\n            for (key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key)\n                if (\n                  4 === currentFirstChild.tag &&\n                  currentFirstChild.stateNode.containerInfo ===\n                    newChild.containerInfo &&\n                  currentFirstChild.stateNode.implementation ===\n                    newChild.implementation\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.children || []);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                } else {\n                  deleteRemainingChildren(returnFiber, currentFirstChild);\n                  break;\n                }\n              else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            lanes = createFiberFromPortal(newChild, returnFiber.mode, lanes);\n            lanes.return = returnFiber;\n            returnFiber = lanes;\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_LAZY_TYPE:\n          return (\n            (key = newChild._init),\n            (newChild = key(newChild._payload)),\n            reconcileChildFibersImpl(\n              returnFiber,\n              currentFirstChild,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild))\n        return reconcileChildrenArray(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      if (getIteratorFn(newChild)) {\n        key = getIteratorFn(newChild);\n        if (\"function\" !== typeof key) throw Error(formatProdErrorMessage(150));\n        newChild = key.call(newChild);\n        return reconcileChildrenIterator(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      }\n      if (\"function\" === typeof newChild.then)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectType(returnFiber, newChild);\n    }\n    return (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n      ? ((newChild = \"\" + newChild),\n        null !== currentFirstChild && 6 === currentFirstChild.tag\n          ? (deleteRemainingChildren(returnFiber, currentFirstChild.sibling),\n            (lanes = useFiber(currentFirstChild, newChild)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes))\n          : (deleteRemainingChildren(returnFiber, currentFirstChild),\n            (lanes = createFiberFromText(newChild, returnFiber.mode, lanes)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes)),\n        placeSingleChild(returnFiber))\n      : deleteRemainingChildren(returnFiber, currentFirstChild);\n  }\n  return function (returnFiber, currentFirstChild, newChild, lanes) {\n    try {\n      thenableIndexCounter$1 = 0;\n      var firstChildFiber = reconcileChildFibersImpl(\n        returnFiber,\n        currentFirstChild,\n        newChild,\n        lanes\n      );\n      thenableState$1 = null;\n      return firstChildFiber;\n    } catch (x) {\n      if (x === SuspenseException) throw x;\n      var fiber = createFiberImplClass(29, x, null, returnFiber.mode);\n      fiber.lanes = lanes;\n      fiber.return = returnFiber;\n      return fiber;\n    } finally {\n    }\n  };\n}\nvar reconcileChildFibers = createChildReconciler(!0),\n  mountChildFibers = createChildReconciler(!1),\n  currentTreeHiddenStackCursor = createCursor(null),\n  prevEntangledRenderLanesCursor = createCursor(0);\nfunction pushHiddenContext(fiber, context) {\n  fiber = entangledRenderLanes;\n  push(prevEntangledRenderLanesCursor, fiber);\n  push(currentTreeHiddenStackCursor, context);\n  entangledRenderLanes = fiber | context.baseLanes;\n}\nfunction reuseHiddenContextOnStack() {\n  push(prevEntangledRenderLanesCursor, entangledRenderLanes);\n  push(currentTreeHiddenStackCursor, currentTreeHiddenStackCursor.current);\n}\nfunction popHiddenContext() {\n  entangledRenderLanes = prevEntangledRenderLanesCursor.current;\n  pop(currentTreeHiddenStackCursor);\n  pop(prevEntangledRenderLanesCursor);\n}\nvar suspenseHandlerStackCursor = createCursor(null),\n  shellBoundary = null;\nfunction pushPrimaryTreeSuspenseHandler(handler) {\n  var current = handler.alternate;\n  push(suspenseStackCursor, suspenseStackCursor.current & 1);\n  push(suspenseHandlerStackCursor, handler);\n  null === shellBoundary &&\n    (null === current || null !== currentTreeHiddenStackCursor.current\n      ? (shellBoundary = handler)\n      : null !== current.memoizedState && (shellBoundary = handler));\n}\nfunction pushOffscreenSuspenseHandler(fiber) {\n  if (22 === fiber.tag) {\n    if (\n      (push(suspenseStackCursor, suspenseStackCursor.current),\n      push(suspenseHandlerStackCursor, fiber),\n      null === shellBoundary)\n    ) {\n      var current = fiber.alternate;\n      null !== current &&\n        null !== current.memoizedState &&\n        (shellBoundary = fiber);\n    }\n  } else reuseSuspenseHandlerOnStack(fiber);\n}\nfunction reuseSuspenseHandlerOnStack() {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, suspenseHandlerStackCursor.current);\n}\nfunction popSuspenseHandler(fiber) {\n  pop(suspenseHandlerStackCursor);\n  shellBoundary === fiber && (shellBoundary = null);\n  pop(suspenseStackCursor);\n}\nvar suspenseStackCursor = createCursor(0);\nfunction findFirstSuspended(row) {\n  for (var node = row; null !== node; ) {\n    if (13 === node.tag) {\n      var state = node.memoizedState;\n      if (\n        null !== state &&\n        ((state = state.dehydrated),\n        null === state || \"$?\" === state.data || \"$!\" === state.data)\n      )\n        return node;\n    } else if (19 === node.tag && void 0 !== node.memoizedProps.revealOrder) {\n      if (0 !== (node.flags & 128)) return node;\n    } else if (null !== node.child) {\n      node.child.return = node;\n      node = node.child;\n      continue;\n    }\n    if (node === row) break;\n    for (; null === node.sibling; ) {\n      if (null === node.return || node.return === row) return null;\n      node = node.return;\n    }\n    node.sibling.return = node.return;\n    node = node.sibling;\n  }\n  return null;\n}\nvar AbortControllerLocal =\n    \"undefined\" !== typeof AbortController\n      ? AbortController\n      : function () {\n          var listeners = [],\n            signal = (this.signal = {\n              aborted: !1,\n              addEventListener: function (type, listener) {\n                listeners.push(listener);\n              }\n            });\n          this.abort = function () {\n            signal.aborted = !0;\n            listeners.forEach(function (listener) {\n              return listener();\n            });\n          };\n        },\n  scheduleCallback$2 = Scheduler.unstable_scheduleCallback,\n  NormalPriority = Scheduler.unstable_NormalPriority,\n  CacheContext = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    Consumer: null,\n    Provider: null,\n    _currentValue: null,\n    _currentValue2: null,\n    _threadCount: 0\n  };\nfunction createCache() {\n  return {\n    controller: new AbortControllerLocal(),\n    data: new Map(),\n    refCount: 0\n  };\n}\nfunction releaseCache(cache) {\n  cache.refCount--;\n  0 === cache.refCount &&\n    scheduleCallback$2(NormalPriority, function () {\n      cache.controller.abort();\n    });\n}\nvar currentEntangledListeners = null,\n  currentEntangledPendingCount = 0,\n  currentEntangledLane = 0,\n  currentEntangledActionThenable = null;\nfunction entangleAsyncAction(transition, thenable) {\n  if (null === currentEntangledListeners) {\n    var entangledListeners = (currentEntangledListeners = []);\n    currentEntangledPendingCount = 0;\n    currentEntangledLane = requestTransitionLane();\n    currentEntangledActionThenable = {\n      status: \"pending\",\n      value: void 0,\n      then: function (resolve) {\n        entangledListeners.push(resolve);\n      }\n    };\n  }\n  currentEntangledPendingCount++;\n  thenable.then(pingEngtangledActionScope, pingEngtangledActionScope);\n  return thenable;\n}\nfunction pingEngtangledActionScope() {\n  if (\n    0 === --currentEntangledPendingCount &&\n    null !== currentEntangledListeners\n  ) {\n    null !== currentEntangledActionThenable &&\n      (currentEntangledActionThenable.status = \"fulfilled\");\n    var listeners = currentEntangledListeners;\n    currentEntangledListeners = null;\n    currentEntangledLane = 0;\n    currentEntangledActionThenable = null;\n    for (var i = 0; i < listeners.length; i++) (0, listeners[i])();\n  }\n}\nfunction chainThenableValue(thenable, result) {\n  var listeners = [],\n    thenableWithOverride = {\n      status: \"pending\",\n      value: null,\n      reason: null,\n      then: function (resolve) {\n        listeners.push(resolve);\n      }\n    };\n  thenable.then(\n    function () {\n      thenableWithOverride.status = \"fulfilled\";\n      thenableWithOverride.value = result;\n      for (var i = 0; i < listeners.length; i++) (0, listeners[i])(result);\n    },\n    function (error) {\n      thenableWithOverride.status = \"rejected\";\n      thenableWithOverride.reason = error;\n      for (error = 0; error < listeners.length; error++)\n        (0, listeners[error])(void 0);\n    }\n  );\n  return thenableWithOverride;\n}\nvar prevOnStartTransitionFinish = ReactSharedInternals.S;\nReactSharedInternals.S = function (transition, returnValue) {\n  \"object\" === typeof returnValue &&\n    null !== returnValue &&\n    \"function\" === typeof returnValue.then &&\n    entangleAsyncAction(transition, returnValue);\n  null !== prevOnStartTransitionFinish &&\n    prevOnStartTransitionFinish(transition, returnValue);\n};\nvar resumedCache = createCursor(null);\nfunction peekCacheFromPool() {\n  var cacheResumedFromPreviousRender = resumedCache.current;\n  return null !== cacheResumedFromPreviousRender\n    ? cacheResumedFromPreviousRender\n    : workInProgressRoot.pooledCache;\n}\nfunction pushTransition(offscreenWorkInProgress, prevCachePool) {\n  null === prevCachePool\n    ? push(resumedCache, resumedCache.current)\n    : push(resumedCache, prevCachePool.pool);\n}\nfunction getSuspendedCache() {\n  var cacheFromPool = peekCacheFromPool();\n  return null === cacheFromPool\n    ? null\n    : { parent: CacheContext._currentValue, pool: cacheFromPool };\n}\nvar renderLanes = 0,\n  currentlyRenderingFiber$1 = null,\n  currentHook = null,\n  workInProgressHook = null,\n  didScheduleRenderPhaseUpdate = !1,\n  didScheduleRenderPhaseUpdateDuringThisPass = !1,\n  shouldDoubleInvokeUserFnsInHooksDEV = !1,\n  localIdCounter = 0,\n  thenableIndexCounter = 0,\n  thenableState = null,\n  globalClientIdCounter = 0;\nfunction throwInvalidHookError() {\n  throw Error(formatProdErrorMessage(321));\n}\nfunction areHookInputsEqual(nextDeps, prevDeps) {\n  if (null === prevDeps) return !1;\n  for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++)\n    if (!objectIs(nextDeps[i], prevDeps[i])) return !1;\n  return !0;\n}\nfunction renderWithHooks(\n  current,\n  workInProgress,\n  Component,\n  props,\n  secondArg,\n  nextRenderLanes\n) {\n  renderLanes = nextRenderLanes;\n  currentlyRenderingFiber$1 = workInProgress;\n  workInProgress.memoizedState = null;\n  workInProgress.updateQueue = null;\n  workInProgress.lanes = 0;\n  ReactSharedInternals.H =\n    null === current || null === current.memoizedState\n      ? HooksDispatcherOnMount\n      : HooksDispatcherOnUpdate;\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  nextRenderLanes = Component(props, secondArg);\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  didScheduleRenderPhaseUpdateDuringThisPass &&\n    (nextRenderLanes = renderWithHooksAgain(\n      workInProgress,\n      Component,\n      props,\n      secondArg\n    ));\n  finishRenderingHooks(current);\n  return nextRenderLanes;\n}\nfunction finishRenderingHooks(current) {\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  var didRenderTooFewHooks = null !== currentHook && null !== currentHook.next;\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber$1 = null;\n  didScheduleRenderPhaseUpdate = !1;\n  thenableIndexCounter = 0;\n  thenableState = null;\n  if (didRenderTooFewHooks) throw Error(formatProdErrorMessage(300));\n  null === current ||\n    didReceiveUpdate ||\n    ((current = current.dependencies),\n    null !== current &&\n      checkIfContextChanged(current) &&\n      (didReceiveUpdate = !0));\n}\nfunction renderWithHooksAgain(workInProgress, Component, props, secondArg) {\n  currentlyRenderingFiber$1 = workInProgress;\n  var numberOfReRenders = 0;\n  do {\n    didScheduleRenderPhaseUpdateDuringThisPass && (thenableState = null);\n    thenableIndexCounter = 0;\n    didScheduleRenderPhaseUpdateDuringThisPass = !1;\n    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));\n    numberOfReRenders += 1;\n    workInProgressHook = currentHook = null;\n    if (null != workInProgress.updateQueue) {\n      var children = workInProgress.updateQueue;\n      children.lastEffect = null;\n      children.events = null;\n      children.stores = null;\n      null != children.memoCache && (children.memoCache.index = 0);\n    }\n    ReactSharedInternals.H = HooksDispatcherOnRerender;\n    children = Component(props, secondArg);\n  } while (didScheduleRenderPhaseUpdateDuringThisPass);\n  return children;\n}\nfunction TransitionAwareHostComponent() {\n  var dispatcher = ReactSharedInternals.H,\n    maybeThenable = dispatcher.useState()[0];\n  maybeThenable =\n    \"function\" === typeof maybeThenable.then\n      ? useThenable(maybeThenable)\n      : maybeThenable;\n  dispatcher = dispatcher.useState()[0];\n  (null !== currentHook ? currentHook.memoizedState : null) !== dispatcher &&\n    (currentlyRenderingFiber$1.flags |= 1024);\n  return maybeThenable;\n}\nfunction checkDidRenderIdHook() {\n  var didRenderIdHook = 0 !== localIdCounter;\n  localIdCounter = 0;\n  return didRenderIdHook;\n}\nfunction bailoutHooks(current, workInProgress, lanes) {\n  workInProgress.updateQueue = current.updateQueue;\n  workInProgress.flags &= -2053;\n  current.lanes &= ~lanes;\n}\nfunction resetHooksOnUnwind(workInProgress) {\n  if (didScheduleRenderPhaseUpdate) {\n    for (\n      workInProgress = workInProgress.memoizedState;\n      null !== workInProgress;\n\n    ) {\n      var queue = workInProgress.queue;\n      null !== queue && (queue.pending = null);\n      workInProgress = workInProgress.next;\n    }\n    didScheduleRenderPhaseUpdate = !1;\n  }\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber$1 = null;\n  didScheduleRenderPhaseUpdateDuringThisPass = !1;\n  thenableIndexCounter = localIdCounter = 0;\n  thenableState = null;\n}\nfunction mountWorkInProgressHook() {\n  var hook = {\n    memoizedState: null,\n    baseState: null,\n    baseQueue: null,\n    queue: null,\n    next: null\n  };\n  null === workInProgressHook\n    ? (currentlyRenderingFiber$1.memoizedState = workInProgressHook = hook)\n    : (workInProgressHook = workInProgressHook.next = hook);\n  return workInProgressHook;\n}\nfunction updateWorkInProgressHook() {\n  if (null === currentHook) {\n    var nextCurrentHook = currentlyRenderingFiber$1.alternate;\n    nextCurrentHook =\n      null !== nextCurrentHook ? nextCurrentHook.memoizedState : null;\n  } else nextCurrentHook = currentHook.next;\n  var nextWorkInProgressHook =\n    null === workInProgressHook\n      ? currentlyRenderingFiber$1.memoizedState\n      : workInProgressHook.next;\n  if (null !== nextWorkInProgressHook)\n    (workInProgressHook = nextWorkInProgressHook),\n      (currentHook = nextCurrentHook);\n  else {\n    if (null === nextCurrentHook) {\n      if (null === currentlyRenderingFiber$1.alternate)\n        throw Error(formatProdErrorMessage(467));\n      throw Error(formatProdErrorMessage(310));\n    }\n    currentHook = nextCurrentHook;\n    nextCurrentHook = {\n      memoizedState: currentHook.memoizedState,\n      baseState: currentHook.baseState,\n      baseQueue: currentHook.baseQueue,\n      queue: currentHook.queue,\n      next: null\n    };\n    null === workInProgressHook\n      ? (currentlyRenderingFiber$1.memoizedState = workInProgressHook =\n          nextCurrentHook)\n      : (workInProgressHook = workInProgressHook.next = nextCurrentHook);\n  }\n  return workInProgressHook;\n}\nvar createFunctionComponentUpdateQueue;\ncreateFunctionComponentUpdateQueue = function () {\n  return { lastEffect: null, events: null, stores: null, memoCache: null };\n};\nfunction useThenable(thenable) {\n  var index = thenableIndexCounter;\n  thenableIndexCounter += 1;\n  null === thenableState && (thenableState = []);\n  thenable = trackUsedThenable(thenableState, thenable, index);\n  index = currentlyRenderingFiber$1;\n  null ===\n    (null === workInProgressHook\n      ? index.memoizedState\n      : workInProgressHook.next) &&\n    ((index = index.alternate),\n    (ReactSharedInternals.H =\n      null === index || null === index.memoizedState\n        ? HooksDispatcherOnMount\n        : HooksDispatcherOnUpdate));\n  return thenable;\n}\nfunction use(usable) {\n  if (null !== usable && \"object\" === typeof usable) {\n    if (\"function\" === typeof usable.then) return useThenable(usable);\n    if (usable.$$typeof === REACT_CONTEXT_TYPE) return readContext(usable);\n  }\n  throw Error(formatProdErrorMessage(438, String(usable)));\n}\nfunction useMemoCache(size) {\n  var memoCache = null,\n    updateQueue = currentlyRenderingFiber$1.updateQueue;\n  null !== updateQueue && (memoCache = updateQueue.memoCache);\n  if (null == memoCache) {\n    var current = currentlyRenderingFiber$1.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      null !== current &&\n        ((current = current.memoCache),\n        null != current &&\n          (memoCache = {\n            data: current.data.map(function (array) {\n              return array.slice();\n            }),\n            index: 0\n          })));\n  }\n  null == memoCache && (memoCache = { data: [], index: 0 });\n  null === updateQueue &&\n    ((updateQueue = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber$1.updateQueue = updateQueue));\n  updateQueue.memoCache = memoCache;\n  updateQueue = memoCache.data[memoCache.index];\n  if (void 0 === updateQueue)\n    for (\n      updateQueue = memoCache.data[memoCache.index] = Array(size), current = 0;\n      current < size;\n      current++\n    )\n      updateQueue[current] = REACT_MEMO_CACHE_SENTINEL;\n  memoCache.index++;\n  return updateQueue;\n}\nfunction basicStateReducer(state, action) {\n  return \"function\" === typeof action ? action(state) : action;\n}\nfunction updateReducer(reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateReducerImpl(hook, currentHook, reducer);\n}\nfunction updateReducerImpl(hook, current, reducer) {\n  var queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var baseQueue = hook.baseQueue,\n    pendingQueue = queue.pending;\n  if (null !== pendingQueue) {\n    if (null !== baseQueue) {\n      var baseFirst = baseQueue.next;\n      baseQueue.next = pendingQueue.next;\n      pendingQueue.next = baseFirst;\n    }\n    current.baseQueue = baseQueue = pendingQueue;\n    queue.pending = null;\n  }\n  pendingQueue = hook.baseState;\n  if (null === baseQueue) hook.memoizedState = pendingQueue;\n  else {\n    current = baseQueue.next;\n    var newBaseQueueFirst = (baseFirst = null),\n      newBaseQueueLast = null,\n      update = current,\n      didReadFromEntangledAsyncAction$54 = !1;\n    do {\n      var updateLane = update.lane & -536870913;\n      if (\n        updateLane !== update.lane\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        var revertLane = update.revertLane;\n        if (0 === revertLane)\n          null !== newBaseQueueLast &&\n            (newBaseQueueLast = newBaseQueueLast.next =\n              {\n                lane: 0,\n                revertLane: 0,\n                action: update.action,\n                hasEagerState: update.hasEagerState,\n                eagerState: update.eagerState,\n                next: null\n              }),\n            updateLane === currentEntangledLane &&\n              (didReadFromEntangledAsyncAction$54 = !0);\n        else if ((renderLanes & revertLane) === revertLane) {\n          update = update.next;\n          revertLane === currentEntangledLane &&\n            (didReadFromEntangledAsyncAction$54 = !0);\n          continue;\n        } else\n          (updateLane = {\n            lane: 0,\n            revertLane: update.revertLane,\n            action: update.action,\n            hasEagerState: update.hasEagerState,\n            eagerState: update.eagerState,\n            next: null\n          }),\n            null === newBaseQueueLast\n              ? ((newBaseQueueFirst = newBaseQueueLast = updateLane),\n                (baseFirst = pendingQueue))\n              : (newBaseQueueLast = newBaseQueueLast.next = updateLane),\n            (currentlyRenderingFiber$1.lanes |= revertLane),\n            (workInProgressRootSkippedLanes |= revertLane);\n        updateLane = update.action;\n        shouldDoubleInvokeUserFnsInHooksDEV &&\n          reducer(pendingQueue, updateLane);\n        pendingQueue = update.hasEagerState\n          ? update.eagerState\n          : reducer(pendingQueue, updateLane);\n      } else\n        (revertLane = {\n          lane: updateLane,\n          revertLane: update.revertLane,\n          action: update.action,\n          hasEagerState: update.hasEagerState,\n          eagerState: update.eagerState,\n          next: null\n        }),\n          null === newBaseQueueLast\n            ? ((newBaseQueueFirst = newBaseQueueLast = revertLane),\n              (baseFirst = pendingQueue))\n            : (newBaseQueueLast = newBaseQueueLast.next = revertLane),\n          (currentlyRenderingFiber$1.lanes |= updateLane),\n          (workInProgressRootSkippedLanes |= updateLane);\n      update = update.next;\n    } while (null !== update && update !== current);\n    null === newBaseQueueLast\n      ? (baseFirst = pendingQueue)\n      : (newBaseQueueLast.next = newBaseQueueFirst);\n    if (\n      !objectIs(pendingQueue, hook.memoizedState) &&\n      ((didReceiveUpdate = !0),\n      didReadFromEntangledAsyncAction$54 &&\n        ((reducer = currentEntangledActionThenable), null !== reducer))\n    )\n      throw reducer;\n    hook.memoizedState = pendingQueue;\n    hook.baseState = baseFirst;\n    hook.baseQueue = newBaseQueueLast;\n    queue.lastRenderedState = pendingQueue;\n  }\n  null === baseQueue && (queue.lanes = 0);\n  return [hook.memoizedState, queue.dispatch];\n}\nfunction rerenderReducer(reducer) {\n  var hook = updateWorkInProgressHook(),\n    queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var dispatch = queue.dispatch,\n    lastRenderPhaseUpdate = queue.pending,\n    newState = hook.memoizedState;\n  if (null !== lastRenderPhaseUpdate) {\n    queue.pending = null;\n    var update = (lastRenderPhaseUpdate = lastRenderPhaseUpdate.next);\n    do (newState = reducer(newState, update.action)), (update = update.next);\n    while (update !== lastRenderPhaseUpdate);\n    objectIs(newState, hook.memoizedState) || (didReceiveUpdate = !0);\n    hook.memoizedState = newState;\n    null === hook.baseQueue && (hook.baseState = newState);\n    queue.lastRenderedState = newState;\n  }\n  return [newState, dispatch];\n}\nfunction updateSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var fiber = currentlyRenderingFiber$1,\n    hook = updateWorkInProgressHook(),\n    isHydrating$jscomp$0 = isHydrating;\n  if (isHydrating$jscomp$0) {\n    if (void 0 === getServerSnapshot) throw Error(formatProdErrorMessage(407));\n    getServerSnapshot = getServerSnapshot();\n  } else getServerSnapshot = getSnapshot();\n  var snapshotChanged = !objectIs(\n    (currentHook || hook).memoizedState,\n    getServerSnapshot\n  );\n  snapshotChanged &&\n    ((hook.memoizedState = getServerSnapshot), (didReceiveUpdate = !0));\n  hook = hook.queue;\n  updateEffect(subscribeToStore.bind(null, fiber, hook, subscribe), [\n    subscribe\n  ]);\n  if (\n    hook.getSnapshot !== getSnapshot ||\n    snapshotChanged ||\n    (null !== workInProgressHook && workInProgressHook.memoizedState.tag & 1)\n  ) {\n    fiber.flags |= 2048;\n    pushEffect(\n      9,\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        hook,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      { destroy: void 0 },\n      null\n    );\n    if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n    isHydrating$jscomp$0 ||\n      0 !== (renderLanes & 60) ||\n      pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n  }\n  return getServerSnapshot;\n}\nfunction pushStoreConsistencyCheck(fiber, getSnapshot, renderedSnapshot) {\n  fiber.flags |= 16384;\n  fiber = { getSnapshot: getSnapshot, value: renderedSnapshot };\n  getSnapshot = currentlyRenderingFiber$1.updateQueue;\n  null === getSnapshot\n    ? ((getSnapshot = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber$1.updateQueue = getSnapshot),\n      (getSnapshot.stores = [fiber]))\n    : ((renderedSnapshot = getSnapshot.stores),\n      null === renderedSnapshot\n        ? (getSnapshot.stores = [fiber])\n        : renderedSnapshot.push(fiber));\n}\nfunction updateStoreInstance(fiber, inst, nextSnapshot, getSnapshot) {\n  inst.value = nextSnapshot;\n  inst.getSnapshot = getSnapshot;\n  checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n}\nfunction subscribeToStore(fiber, inst, subscribe) {\n  return subscribe(function () {\n    checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n  });\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction forceStoreRerender(fiber) {\n  var root = enqueueConcurrentRenderForLane(fiber, 2);\n  null !== root && scheduleUpdateOnFiber(root, fiber, 2);\n}\nfunction mountStateImpl(initialState) {\n  var hook = mountWorkInProgressHook();\n  if (\"function\" === typeof initialState) {\n    var initialStateInitializer = initialState;\n    initialState = initialStateInitializer();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        initialStateInitializer();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n  }\n  hook.memoizedState = hook.baseState = initialState;\n  hook.queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: basicStateReducer,\n    lastRenderedState: initialState\n  };\n  return hook;\n}\nfunction updateOptimisticImpl(hook, current, passthrough, reducer) {\n  hook.baseState = passthrough;\n  return updateReducerImpl(\n    hook,\n    currentHook,\n    \"function\" === typeof reducer ? reducer : basicStateReducer\n  );\n}\nfunction dispatchActionState(\n  fiber,\n  actionQueue,\n  setPendingState,\n  setState,\n  payload\n) {\n  if (isRenderPhaseUpdate(fiber)) throw Error(formatProdErrorMessage(485));\n  fiber = actionQueue.action;\n  if (null !== fiber) {\n    var actionNode = {\n      payload: payload,\n      action: fiber,\n      next: null,\n      isTransition: !0,\n      status: \"pending\",\n      value: null,\n      reason: null,\n      listeners: [],\n      then: function (listener) {\n        actionNode.listeners.push(listener);\n      }\n    };\n    null !== ReactSharedInternals.T\n      ? setPendingState(!0)\n      : (actionNode.isTransition = !1);\n    setState(actionNode);\n    setPendingState = actionQueue.pending;\n    null === setPendingState\n      ? ((actionNode.next = actionQueue.pending = actionNode),\n        runActionStateAction(actionQueue, actionNode))\n      : ((actionNode.next = setPendingState.next),\n        (actionQueue.pending = setPendingState.next = actionNode));\n  }\n}\nfunction runActionStateAction(actionQueue, node) {\n  var action = node.action,\n    payload = node.payload,\n    prevState = actionQueue.state;\n  if (node.isTransition) {\n    var prevTransition = ReactSharedInternals.T,\n      currentTransition = {};\n    ReactSharedInternals.T = currentTransition;\n    try {\n      var returnValue = action(prevState, payload),\n        onStartTransitionFinish = ReactSharedInternals.S;\n      null !== onStartTransitionFinish &&\n        onStartTransitionFinish(currentTransition, returnValue);\n      handleActionReturnValue(actionQueue, node, returnValue);\n    } catch (error) {\n      onActionError(actionQueue, node, error);\n    } finally {\n      ReactSharedInternals.T = prevTransition;\n    }\n  } else\n    try {\n      (prevTransition = action(prevState, payload)),\n        handleActionReturnValue(actionQueue, node, prevTransition);\n    } catch (error$60) {\n      onActionError(actionQueue, node, error$60);\n    }\n}\nfunction handleActionReturnValue(actionQueue, node, returnValue) {\n  null !== returnValue &&\n  \"object\" === typeof returnValue &&\n  \"function\" === typeof returnValue.then\n    ? returnValue.then(\n        function (nextState) {\n          onActionSuccess(actionQueue, node, nextState);\n        },\n        function (error) {\n          return onActionError(actionQueue, node, error);\n        }\n      )\n    : onActionSuccess(actionQueue, node, returnValue);\n}\nfunction onActionSuccess(actionQueue, actionNode, nextState) {\n  actionNode.status = \"fulfilled\";\n  actionNode.value = nextState;\n  notifyActionListeners(actionNode);\n  actionQueue.state = nextState;\n  actionNode = actionQueue.pending;\n  null !== actionNode &&\n    ((nextState = actionNode.next),\n    nextState === actionNode\n      ? (actionQueue.pending = null)\n      : ((nextState = nextState.next),\n        (actionNode.next = nextState),\n        runActionStateAction(actionQueue, nextState)));\n}\nfunction onActionError(actionQueue, actionNode, error) {\n  var last = actionQueue.pending;\n  actionQueue.pending = null;\n  if (null !== last) {\n    last = last.next;\n    do\n      (actionNode.status = \"rejected\"),\n        (actionNode.reason = error),\n        notifyActionListeners(actionNode),\n        (actionNode = actionNode.next);\n    while (actionNode !== last);\n  }\n  actionQueue.action = null;\n}\nfunction notifyActionListeners(actionNode) {\n  actionNode = actionNode.listeners;\n  for (var i = 0; i < actionNode.length; i++) (0, actionNode[i])();\n}\nfunction actionStateReducer(oldState, newState) {\n  return newState;\n}\nfunction mountActionState(action, initialStateProp) {\n  if (isHydrating) {\n    var ssrFormState = workInProgressRoot.formState;\n    if (null !== ssrFormState) {\n      a: {\n        var JSCompiler_inline_result = currentlyRenderingFiber$1;\n        if (isHydrating) {\n          if (nextHydratableInstance) {\n            b: {\n              var JSCompiler_inline_result$jscomp$0 = nextHydratableInstance;\n              for (\n                var inRootOrSingleton = rootOrSingletonContext;\n                8 !== JSCompiler_inline_result$jscomp$0.nodeType;\n\n              ) {\n                if (!inRootOrSingleton) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n                JSCompiler_inline_result$jscomp$0 = getNextHydratable(\n                  JSCompiler_inline_result$jscomp$0.nextSibling\n                );\n                if (null === JSCompiler_inline_result$jscomp$0) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n              }\n              inRootOrSingleton = JSCompiler_inline_result$jscomp$0.data;\n              JSCompiler_inline_result$jscomp$0 =\n                \"F!\" === inRootOrSingleton || \"F\" === inRootOrSingleton\n                  ? JSCompiler_inline_result$jscomp$0\n                  : null;\n            }\n            if (JSCompiler_inline_result$jscomp$0) {\n              nextHydratableInstance = getNextHydratable(\n                JSCompiler_inline_result$jscomp$0.nextSibling\n              );\n              JSCompiler_inline_result =\n                \"F!\" === JSCompiler_inline_result$jscomp$0.data;\n              break a;\n            }\n          }\n          throwOnHydrationMismatch(JSCompiler_inline_result);\n        }\n        JSCompiler_inline_result = !1;\n      }\n      JSCompiler_inline_result && (initialStateProp = ssrFormState[0]);\n    }\n  }\n  ssrFormState = mountWorkInProgressHook();\n  ssrFormState.memoizedState = ssrFormState.baseState = initialStateProp;\n  JSCompiler_inline_result = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: actionStateReducer,\n    lastRenderedState: initialStateProp\n  };\n  ssrFormState.queue = JSCompiler_inline_result;\n  ssrFormState = dispatchSetState.bind(\n    null,\n    currentlyRenderingFiber$1,\n    JSCompiler_inline_result\n  );\n  JSCompiler_inline_result.dispatch = ssrFormState;\n  JSCompiler_inline_result = mountStateImpl(!1);\n  inRootOrSingleton = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber$1,\n    !1,\n    JSCompiler_inline_result.queue\n  );\n  JSCompiler_inline_result = mountWorkInProgressHook();\n  JSCompiler_inline_result$jscomp$0 = {\n    state: initialStateProp,\n    dispatch: null,\n    action: action,\n    pending: null\n  };\n  JSCompiler_inline_result.queue = JSCompiler_inline_result$jscomp$0;\n  ssrFormState = dispatchActionState.bind(\n    null,\n    currentlyRenderingFiber$1,\n    JSCompiler_inline_result$jscomp$0,\n    inRootOrSingleton,\n    ssrFormState\n  );\n  JSCompiler_inline_result$jscomp$0.dispatch = ssrFormState;\n  JSCompiler_inline_result.memoizedState = action;\n  return [initialStateProp, ssrFormState, !1];\n}\nfunction updateActionState(action) {\n  var stateHook = updateWorkInProgressHook();\n  return updateActionStateImpl(stateHook, currentHook, action);\n}\nfunction updateActionStateImpl(stateHook, currentStateHook, action) {\n  currentStateHook = updateReducerImpl(\n    stateHook,\n    currentStateHook,\n    actionStateReducer\n  )[0];\n  stateHook = updateReducer(basicStateReducer)[0];\n  currentStateHook =\n    \"object\" === typeof currentStateHook &&\n    null !== currentStateHook &&\n    \"function\" === typeof currentStateHook.then\n      ? useThenable(currentStateHook)\n      : currentStateHook;\n  var actionQueueHook = updateWorkInProgressHook(),\n    actionQueue = actionQueueHook.queue,\n    dispatch = actionQueue.dispatch;\n  action !== actionQueueHook.memoizedState &&\n    ((currentlyRenderingFiber$1.flags |= 2048),\n    pushEffect(\n      9,\n      actionStateActionEffect.bind(null, actionQueue, action),\n      { destroy: void 0 },\n      null\n    ));\n  return [currentStateHook, dispatch, stateHook];\n}\nfunction actionStateActionEffect(actionQueue, action) {\n  actionQueue.action = action;\n}\nfunction rerenderActionState(action) {\n  var stateHook = updateWorkInProgressHook(),\n    currentStateHook = currentHook;\n  if (null !== currentStateHook)\n    return updateActionStateImpl(stateHook, currentStateHook, action);\n  updateWorkInProgressHook();\n  stateHook = stateHook.memoizedState;\n  currentStateHook = updateWorkInProgressHook();\n  var dispatch = currentStateHook.queue.dispatch;\n  currentStateHook.memoizedState = action;\n  return [stateHook, dispatch, !1];\n}\nfunction pushEffect(tag, create, inst, deps) {\n  tag = { tag: tag, create: create, inst: inst, deps: deps, next: null };\n  create = currentlyRenderingFiber$1.updateQueue;\n  null === create &&\n    ((create = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber$1.updateQueue = create));\n  inst = create.lastEffect;\n  null === inst\n    ? (create.lastEffect = tag.next = tag)\n    : ((deps = inst.next),\n      (inst.next = tag),\n      (tag.next = deps),\n      (create.lastEffect = tag));\n  return tag;\n}\nfunction updateRef() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = mountWorkInProgressHook();\n  currentlyRenderingFiber$1.flags |= fiberFlags;\n  hook.memoizedState = pushEffect(\n    1 | hookFlags,\n    create,\n    { destroy: void 0 },\n    void 0 === deps ? null : deps\n  );\n}\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var inst = hook.memoizedState.inst;\n  null !== currentHook &&\n  null !== deps &&\n  areHookInputsEqual(deps, currentHook.memoizedState.deps)\n    ? (hook.memoizedState = pushEffect(hookFlags, create, inst, deps))\n    : ((currentlyRenderingFiber$1.flags |= fiberFlags),\n      (hook.memoizedState = pushEffect(1 | hookFlags, create, inst, deps)));\n}\nfunction mountEffect(create, deps) {\n  mountEffectImpl(8390656, 8, create, deps);\n}\nfunction updateEffect(create, deps) {\n  updateEffectImpl(2048, 8, create, deps);\n}\nfunction updateInsertionEffect(create, deps) {\n  return updateEffectImpl(4, 2, create, deps);\n}\nfunction updateLayoutEffect(create, deps) {\n  return updateEffectImpl(4, 4, create, deps);\n}\nfunction imperativeHandleEffect(create, ref) {\n  if (\"function\" === typeof ref) {\n    create = create();\n    var refCleanup = ref(create);\n    return function () {\n      \"function\" === typeof refCleanup ? refCleanup() : ref(null);\n    };\n  }\n  if (null !== ref && void 0 !== ref)\n    return (\n      (create = create()),\n      (ref.current = create),\n      function () {\n        ref.current = null;\n      }\n    );\n}\nfunction updateImperativeHandle(ref, create, deps) {\n  deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n  updateEffectImpl(4, 4, imperativeHandleEffect.bind(null, create, ref), deps);\n}\nfunction mountDebugValue() {}\nfunction updateCallback(callback, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  hook.memoizedState = [callback, deps];\n  return callback;\n}\nfunction updateMemo(nextCreate, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  prevState = nextCreate();\n  if (shouldDoubleInvokeUserFnsInHooksDEV) {\n    setIsStrictModeForDevtools(!0);\n    try {\n      nextCreate();\n    } finally {\n      setIsStrictModeForDevtools(!1);\n    }\n  }\n  hook.memoizedState = [prevState, deps];\n  return prevState;\n}\nfunction mountDeferredValueImpl(hook, value, initialValue) {\n  if (void 0 === initialValue || 0 !== (renderLanes & 1073741824))\n    return (hook.memoizedState = value);\n  hook.memoizedState = initialValue;\n  hook = requestDeferredLane();\n  currentlyRenderingFiber$1.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return initialValue;\n}\nfunction updateDeferredValueImpl(hook, prevValue, value, initialValue) {\n  if (objectIs(value, prevValue)) return value;\n  if (null !== currentTreeHiddenStackCursor.current)\n    return (\n      (hook = mountDeferredValueImpl(hook, value, initialValue)),\n      objectIs(hook, prevValue) || (didReceiveUpdate = !0),\n      hook\n    );\n  if (0 === (renderLanes & 42))\n    return (didReceiveUpdate = !0), (hook.memoizedState = value);\n  hook = requestDeferredLane();\n  currentlyRenderingFiber$1.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return prevValue;\n}\nfunction startTransition(fiber, queue, pendingState, finishedState, callback) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  ReactDOMSharedInternals.p =\n    0 !== previousPriority && 8 > previousPriority ? previousPriority : 8;\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  dispatchOptimisticSetState(fiber, !1, queue, pendingState);\n  try {\n    var returnValue = callback(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    if (\n      null !== returnValue &&\n      \"object\" === typeof returnValue &&\n      \"function\" === typeof returnValue.then\n    ) {\n      var thenableForFinishedState = chainThenableValue(\n        returnValue,\n        finishedState\n      );\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        thenableForFinishedState,\n        requestUpdateLane(fiber)\n      );\n    } else\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        finishedState,\n        requestUpdateLane(fiber)\n      );\n  } catch (error) {\n    dispatchSetStateInternal(\n      fiber,\n      queue,\n      { then: function () {}, status: \"rejected\", reason: error },\n      requestUpdateLane()\n    );\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction noop$2() {}\nfunction startHostTransition(formFiber, pendingState, action, formData) {\n  if (5 !== formFiber.tag) throw Error(formatProdErrorMessage(476));\n  var queue = ensureFormComponentIsStateful(formFiber).queue;\n  startTransition(\n    formFiber,\n    queue,\n    pendingState,\n    sharedNotPendingObject,\n    null === action\n      ? noop$2\n      : function () {\n          requestFormReset$1(formFiber);\n          return action(formData);\n        }\n  );\n}\nfunction ensureFormComponentIsStateful(formFiber) {\n  var existingStateHook = formFiber.memoizedState;\n  if (null !== existingStateHook) return existingStateHook;\n  existingStateHook = {\n    memoizedState: sharedNotPendingObject,\n    baseState: sharedNotPendingObject,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: sharedNotPendingObject\n    },\n    next: null\n  };\n  var initialResetState = {};\n  existingStateHook.next = {\n    memoizedState: initialResetState,\n    baseState: initialResetState,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: initialResetState\n    },\n    next: null\n  };\n  formFiber.memoizedState = existingStateHook;\n  formFiber = formFiber.alternate;\n  null !== formFiber && (formFiber.memoizedState = existingStateHook);\n  return existingStateHook;\n}\nfunction requestFormReset$1(formFiber) {\n  var resetStateQueue = ensureFormComponentIsStateful(formFiber).next.queue;\n  dispatchSetStateInternal(formFiber, resetStateQueue, {}, requestUpdateLane());\n}\nfunction useHostTransitionStatus() {\n  return readContext(HostTransitionContext);\n}\nfunction updateId() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction updateRefresh() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction refreshCache(fiber) {\n  for (var provider = fiber.return; null !== provider; ) {\n    switch (provider.tag) {\n      case 24:\n      case 3:\n        var lane = requestUpdateLane();\n        fiber = createUpdate(lane);\n        var root$63 = enqueueUpdate(provider, fiber, lane);\n        null !== root$63 &&\n          (scheduleUpdateOnFiber(root$63, provider, lane),\n          entangleTransitions(root$63, provider, lane));\n        provider = { cache: createCache() };\n        fiber.payload = provider;\n        return;\n    }\n    provider = provider.return;\n  }\n}\nfunction dispatchReducerAction(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  action = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  isRenderPhaseUpdate(fiber)\n    ? enqueueRenderPhaseUpdate(queue, action)\n    : ((action = enqueueConcurrentHookUpdate(fiber, queue, action, lane)),\n      null !== action &&\n        (scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane)));\n}\nfunction dispatchSetState(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  dispatchSetStateInternal(fiber, queue, action, lane);\n}\nfunction dispatchSetStateInternal(fiber, queue, action, lane) {\n  var update = {\n    lane: lane,\n    revertLane: 0,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) enqueueRenderPhaseUpdate(queue, update);\n  else {\n    var alternate = fiber.alternate;\n    if (\n      0 === fiber.lanes &&\n      (null === alternate || 0 === alternate.lanes) &&\n      ((alternate = queue.lastRenderedReducer), null !== alternate)\n    )\n      try {\n        var currentState = queue.lastRenderedState,\n          eagerState = alternate(currentState, action);\n        update.hasEagerState = !0;\n        update.eagerState = eagerState;\n        if (objectIs(eagerState, currentState))\n          return (\n            enqueueUpdate$1(fiber, queue, update, 0),\n            null === workInProgressRoot && finishQueueingConcurrentUpdates(),\n            !1\n          );\n      } catch (error) {\n      } finally {\n      }\n    action = enqueueConcurrentHookUpdate(fiber, queue, update, lane);\n    if (null !== action)\n      return (\n        scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane),\n        !0\n      );\n  }\n  return !1;\n}\nfunction dispatchOptimisticSetState(fiber, throwIfDuringRender, queue, action) {\n  action = {\n    lane: 2,\n    revertLane: requestTransitionLane(),\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) {\n    if (throwIfDuringRender) throw Error(formatProdErrorMessage(479));\n  } else\n    (throwIfDuringRender = enqueueConcurrentHookUpdate(\n      fiber,\n      queue,\n      action,\n      2\n    )),\n      null !== throwIfDuringRender &&\n        scheduleUpdateOnFiber(throwIfDuringRender, fiber, 2);\n}\nfunction isRenderPhaseUpdate(fiber) {\n  var alternate = fiber.alternate;\n  return (\n    fiber === currentlyRenderingFiber$1 ||\n    (null !== alternate && alternate === currentlyRenderingFiber$1)\n  );\n}\nfunction enqueueRenderPhaseUpdate(queue, update) {\n  didScheduleRenderPhaseUpdateDuringThisPass = didScheduleRenderPhaseUpdate =\n    !0;\n  var pending = queue.pending;\n  null === pending\n    ? (update.next = update)\n    : ((update.next = pending.next), (pending.next = update));\n  queue.pending = update;\n}\nfunction entangleTransitionUpdate(root, queue, lane) {\n  if (0 !== (lane & 4194176)) {\n    var queueLanes = queue.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    queue.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nvar ContextOnlyDispatcher = {\n  readContext: readContext,\n  use: use,\n  useCallback: throwInvalidHookError,\n  useContext: throwInvalidHookError,\n  useEffect: throwInvalidHookError,\n  useImperativeHandle: throwInvalidHookError,\n  useLayoutEffect: throwInvalidHookError,\n  useInsertionEffect: throwInvalidHookError,\n  useMemo: throwInvalidHookError,\n  useReducer: throwInvalidHookError,\n  useRef: throwInvalidHookError,\n  useState: throwInvalidHookError,\n  useDebugValue: throwInvalidHookError,\n  useDeferredValue: throwInvalidHookError,\n  useTransition: throwInvalidHookError,\n  useSyncExternalStore: throwInvalidHookError,\n  useId: throwInvalidHookError\n};\nContextOnlyDispatcher.useCacheRefresh = throwInvalidHookError;\nContextOnlyDispatcher.useMemoCache = throwInvalidHookError;\nContextOnlyDispatcher.useHostTransitionStatus = throwInvalidHookError;\nContextOnlyDispatcher.useFormState = throwInvalidHookError;\nContextOnlyDispatcher.useActionState = throwInvalidHookError;\nContextOnlyDispatcher.useOptimistic = throwInvalidHookError;\nvar HooksDispatcherOnMount = {\n  readContext: readContext,\n  use: use,\n  useCallback: function (callback, deps) {\n    mountWorkInProgressHook().memoizedState = [\n      callback,\n      void 0 === deps ? null : deps\n    ];\n    return callback;\n  },\n  useContext: readContext,\n  useEffect: mountEffect,\n  useImperativeHandle: function (ref, create, deps) {\n    deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n    mountEffectImpl(\n      4194308,\n      4,\n      imperativeHandleEffect.bind(null, create, ref),\n      deps\n    );\n  },\n  useLayoutEffect: function (create, deps) {\n    return mountEffectImpl(4194308, 4, create, deps);\n  },\n  useInsertionEffect: function (create, deps) {\n    mountEffectImpl(4, 2, create, deps);\n  },\n  useMemo: function (nextCreate, deps) {\n    var hook = mountWorkInProgressHook();\n    deps = void 0 === deps ? null : deps;\n    var nextValue = nextCreate();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        nextCreate();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n    hook.memoizedState = [nextValue, deps];\n    return nextValue;\n  },\n  useReducer: function (reducer, initialArg, init) {\n    var hook = mountWorkInProgressHook();\n    if (void 0 !== init) {\n      var initialState = init(initialArg);\n      if (shouldDoubleInvokeUserFnsInHooksDEV) {\n        setIsStrictModeForDevtools(!0);\n        try {\n          init(initialArg);\n        } finally {\n          setIsStrictModeForDevtools(!1);\n        }\n      }\n    } else initialState = initialArg;\n    hook.memoizedState = hook.baseState = initialState;\n    reducer = {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: reducer,\n      lastRenderedState: initialState\n    };\n    hook.queue = reducer;\n    reducer = reducer.dispatch = dispatchReducerAction.bind(\n      null,\n      currentlyRenderingFiber$1,\n      reducer\n    );\n    return [hook.memoizedState, reducer];\n  },\n  useRef: function (initialValue) {\n    var hook = mountWorkInProgressHook();\n    initialValue = { current: initialValue };\n    return (hook.memoizedState = initialValue);\n  },\n  useState: function (initialState) {\n    initialState = mountStateImpl(initialState);\n    var queue = initialState.queue,\n      dispatch = dispatchSetState.bind(null, currentlyRenderingFiber$1, queue);\n    queue.dispatch = dispatch;\n    return [initialState.memoizedState, dispatch];\n  },\n  useDebugValue: mountDebugValue,\n  useDeferredValue: function (value, initialValue) {\n    var hook = mountWorkInProgressHook();\n    return mountDeferredValueImpl(hook, value, initialValue);\n  },\n  useTransition: function () {\n    var stateHook = mountStateImpl(!1);\n    stateHook = startTransition.bind(\n      null,\n      currentlyRenderingFiber$1,\n      stateHook.queue,\n      !0,\n      !1\n    );\n    mountWorkInProgressHook().memoizedState = stateHook;\n    return [!1, stateHook];\n  },\n  useSyncExternalStore: function (subscribe, getSnapshot, getServerSnapshot) {\n    var fiber = currentlyRenderingFiber$1,\n      hook = mountWorkInProgressHook();\n    if (isHydrating) {\n      if (void 0 === getServerSnapshot)\n        throw Error(formatProdErrorMessage(407));\n      getServerSnapshot = getServerSnapshot();\n    } else {\n      getServerSnapshot = getSnapshot();\n      if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n      0 !== (workInProgressRootRenderLanes & 60) ||\n        pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n    }\n    hook.memoizedState = getServerSnapshot;\n    var inst = { value: getServerSnapshot, getSnapshot: getSnapshot };\n    hook.queue = inst;\n    mountEffect(subscribeToStore.bind(null, fiber, inst, subscribe), [\n      subscribe\n    ]);\n    fiber.flags |= 2048;\n    pushEffect(\n      9,\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        inst,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      { destroy: void 0 },\n      null\n    );\n    return getServerSnapshot;\n  },\n  useId: function () {\n    var hook = mountWorkInProgressHook(),\n      identifierPrefix = workInProgressRoot.identifierPrefix;\n    if (isHydrating) {\n      var JSCompiler_inline_result = treeContextOverflow;\n      var idWithLeadingBit = treeContextId;\n      JSCompiler_inline_result =\n        (\n          idWithLeadingBit & ~(1 << (32 - clz32(idWithLeadingBit) - 1))\n        ).toString(32) + JSCompiler_inline_result;\n      identifierPrefix =\n        \":\" + identifierPrefix + \"R\" + JSCompiler_inline_result;\n      JSCompiler_inline_result = localIdCounter++;\n      0 < JSCompiler_inline_result &&\n        (identifierPrefix += \"H\" + JSCompiler_inline_result.toString(32));\n      identifierPrefix += \":\";\n    } else\n      (JSCompiler_inline_result = globalClientIdCounter++),\n        (identifierPrefix =\n          \":\" +\n          identifierPrefix +\n          \"r\" +\n          JSCompiler_inline_result.toString(32) +\n          \":\");\n    return (hook.memoizedState = identifierPrefix);\n  },\n  useCacheRefresh: function () {\n    return (mountWorkInProgressHook().memoizedState = refreshCache.bind(\n      null,\n      currentlyRenderingFiber$1\n    ));\n  }\n};\nHooksDispatcherOnMount.useMemoCache = useMemoCache;\nHooksDispatcherOnMount.useHostTransitionStatus = useHostTransitionStatus;\nHooksDispatcherOnMount.useFormState = mountActionState;\nHooksDispatcherOnMount.useActionState = mountActionState;\nHooksDispatcherOnMount.useOptimistic = function (passthrough) {\n  var hook = mountWorkInProgressHook();\n  hook.memoizedState = hook.baseState = passthrough;\n  var queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: null,\n    lastRenderedState: null\n  };\n  hook.queue = queue;\n  hook = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber$1,\n    !0,\n    queue\n  );\n  queue.dispatch = hook;\n  return [passthrough, hook];\n};\nvar HooksDispatcherOnUpdate = {\n  readContext: readContext,\n  use: use,\n  useCallback: updateCallback,\n  useContext: readContext,\n  useEffect: updateEffect,\n  useImperativeHandle: updateImperativeHandle,\n  useInsertionEffect: updateInsertionEffect,\n  useLayoutEffect: updateLayoutEffect,\n  useMemo: updateMemo,\n  useReducer: updateReducer,\n  useRef: updateRef,\n  useState: function () {\n    return updateReducer(basicStateReducer);\n  },\n  useDebugValue: mountDebugValue,\n  useDeferredValue: function (value, initialValue) {\n    var hook = updateWorkInProgressHook();\n    return updateDeferredValueImpl(\n      hook,\n      currentHook.memoizedState,\n      value,\n      initialValue\n    );\n  },\n  useTransition: function () {\n    var booleanOrThenable = updateReducer(basicStateReducer)[0],\n      start = updateWorkInProgressHook().memoizedState;\n    return [\n      \"boolean\" === typeof booleanOrThenable\n        ? booleanOrThenable\n        : useThenable(booleanOrThenable),\n      start\n    ];\n  },\n  useSyncExternalStore: updateSyncExternalStore,\n  useId: updateId\n};\nHooksDispatcherOnUpdate.useCacheRefresh = updateRefresh;\nHooksDispatcherOnUpdate.useMemoCache = useMemoCache;\nHooksDispatcherOnUpdate.useHostTransitionStatus = useHostTransitionStatus;\nHooksDispatcherOnUpdate.useFormState = updateActionState;\nHooksDispatcherOnUpdate.useActionState = updateActionState;\nHooksDispatcherOnUpdate.useOptimistic = function (passthrough, reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n};\nvar HooksDispatcherOnRerender = {\n  readContext: readContext,\n  use: use,\n  useCallback: updateCallback,\n  useContext: readContext,\n  useEffect: updateEffect,\n  useImperativeHandle: updateImperativeHandle,\n  useInsertionEffect: updateInsertionEffect,\n  useLayoutEffect: updateLayoutEffect,\n  useMemo: updateMemo,\n  useReducer: rerenderReducer,\n  useRef: updateRef,\n  useState: function () {\n    return rerenderReducer(basicStateReducer);\n  },\n  useDebugValue: mountDebugValue,\n  useDeferredValue: function (value, initialValue) {\n    var hook = updateWorkInProgressHook();\n    return null === currentHook\n      ? mountDeferredValueImpl(hook, value, initialValue)\n      : updateDeferredValueImpl(\n          hook,\n          currentHook.memoizedState,\n          value,\n          initialValue\n        );\n  },\n  useTransition: function () {\n    var booleanOrThenable = rerenderReducer(basicStateReducer)[0],\n      start = updateWorkInProgressHook().memoizedState;\n    return [\n      \"boolean\" === typeof booleanOrThenable\n        ? booleanOrThenable\n        : useThenable(booleanOrThenable),\n      start\n    ];\n  },\n  useSyncExternalStore: updateSyncExternalStore,\n  useId: updateId\n};\nHooksDispatcherOnRerender.useCacheRefresh = updateRefresh;\nHooksDispatcherOnRerender.useMemoCache = useMemoCache;\nHooksDispatcherOnRerender.useHostTransitionStatus = useHostTransitionStatus;\nHooksDispatcherOnRerender.useFormState = rerenderActionState;\nHooksDispatcherOnRerender.useActionState = rerenderActionState;\nHooksDispatcherOnRerender.useOptimistic = function (passthrough, reducer) {\n  var hook = updateWorkInProgressHook();\n  if (null !== currentHook)\n    return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n  hook.baseState = passthrough;\n  return [passthrough, hook.queue.dispatch];\n};\nfunction applyDerivedStateFromProps(\n  workInProgress,\n  ctor,\n  getDerivedStateFromProps,\n  nextProps\n) {\n  ctor = workInProgress.memoizedState;\n  getDerivedStateFromProps = getDerivedStateFromProps(nextProps, ctor);\n  getDerivedStateFromProps =\n    null === getDerivedStateFromProps || void 0 === getDerivedStateFromProps\n      ? ctor\n      : assign({}, ctor, getDerivedStateFromProps);\n  workInProgress.memoizedState = getDerivedStateFromProps;\n  0 === workInProgress.lanes &&\n    (workInProgress.updateQueue.baseState = getDerivedStateFromProps);\n}\nvar classComponentUpdater = {\n  isMounted: function (component) {\n    return (component = component._reactInternals)\n      ? getNearestMountedFiber(component) === component\n      : !1;\n  },\n  enqueueSetState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueReplaceState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 1;\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueForceUpdate: function (inst, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 2;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    callback = enqueueUpdate(inst, update, lane);\n    null !== callback &&\n      (scheduleUpdateOnFiber(callback, inst, lane),\n      entangleTransitions(callback, inst, lane));\n  }\n};\nfunction checkShouldComponentUpdate(\n  workInProgress,\n  ctor,\n  oldProps,\n  newProps,\n  oldState,\n  newState,\n  nextContext\n) {\n  workInProgress = workInProgress.stateNode;\n  return \"function\" === typeof workInProgress.shouldComponentUpdate\n    ? workInProgress.shouldComponentUpdate(newProps, newState, nextContext)\n    : ctor.prototype && ctor.prototype.isPureReactComponent\n      ? !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n      : !0;\n}\nfunction callComponentWillReceiveProps(\n  workInProgress,\n  instance,\n  newProps,\n  nextContext\n) {\n  workInProgress = instance.state;\n  \"function\" === typeof instance.componentWillReceiveProps &&\n    instance.componentWillReceiveProps(newProps, nextContext);\n  \"function\" === typeof instance.UNSAFE_componentWillReceiveProps &&\n    instance.UNSAFE_componentWillReceiveProps(newProps, nextContext);\n  instance.state !== workInProgress &&\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n}\nfunction resolveClassComponentProps(Component, baseProps) {\n  var newProps = baseProps;\n  if (\"ref\" in baseProps) {\n    newProps = {};\n    for (var propName in baseProps)\n      \"ref\" !== propName && (newProps[propName] = baseProps[propName]);\n  }\n  if ((Component = Component.defaultProps)) {\n    newProps === baseProps && (newProps = assign({}, newProps));\n    for (var propName$67 in Component)\n      void 0 === newProps[propName$67] &&\n        (newProps[propName$67] = Component[propName$67]);\n  }\n  return newProps;\n}\nvar reportGlobalError =\n  \"function\" === typeof reportError\n    ? reportError\n    : function (error) {\n        if (\n          \"object\" === typeof window &&\n          \"function\" === typeof window.ErrorEvent\n        ) {\n          var event = new window.ErrorEvent(\"error\", {\n            bubbles: !0,\n            cancelable: !0,\n            message:\n              \"object\" === typeof error &&\n              null !== error &&\n              \"string\" === typeof error.message\n                ? String(error.message)\n                : String(error),\n            error: error\n          });\n          if (!window.dispatchEvent(event)) return;\n        } else if (\n          \"object\" === typeof process &&\n          \"function\" === typeof process.emit\n        ) {\n          process.emit(\"uncaughtException\", error);\n          return;\n        }\n        console.error(error);\n      };\nfunction defaultOnUncaughtError(error) {\n  reportGlobalError(error);\n}\nfunction defaultOnCaughtError(error) {\n  console.error(error);\n}\nfunction defaultOnRecoverableError(error) {\n  reportGlobalError(error);\n}\nfunction logUncaughtError(root, errorInfo) {\n  try {\n    var onUncaughtError = root.onUncaughtError;\n    onUncaughtError(errorInfo.value, { componentStack: errorInfo.stack });\n  } catch (e$68) {\n    setTimeout(function () {\n      throw e$68;\n    });\n  }\n}\nfunction logCaughtError(root, boundary, errorInfo) {\n  try {\n    var onCaughtError = root.onCaughtError;\n    onCaughtError(errorInfo.value, {\n      componentStack: errorInfo.stack,\n      errorBoundary: 1 === boundary.tag ? boundary.stateNode : null\n    });\n  } catch (e$69) {\n    setTimeout(function () {\n      throw e$69;\n    });\n  }\n}\nfunction createRootErrorUpdate(root, errorInfo, lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  lane.payload = { element: null };\n  lane.callback = function () {\n    logUncaughtError(root, errorInfo);\n  };\n  return lane;\n}\nfunction createClassErrorUpdate(lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  return lane;\n}\nfunction initializeClassErrorUpdate(update, root, fiber, errorInfo) {\n  var getDerivedStateFromError = fiber.type.getDerivedStateFromError;\n  if (\"function\" === typeof getDerivedStateFromError) {\n    var error = errorInfo.value;\n    update.payload = function () {\n      return getDerivedStateFromError(error);\n    };\n    update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n    };\n  }\n  var inst = fiber.stateNode;\n  null !== inst &&\n    \"function\" === typeof inst.componentDidCatch &&\n    (update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n      \"function\" !== typeof getDerivedStateFromError &&\n        (null === legacyErrorBoundariesThatAlreadyFailed\n          ? (legacyErrorBoundariesThatAlreadyFailed = new Set([this]))\n          : legacyErrorBoundariesThatAlreadyFailed.add(this));\n      var stack = errorInfo.stack;\n      this.componentDidCatch(errorInfo.value, {\n        componentStack: null !== stack ? stack : \"\"\n      });\n    });\n}\nfunction throwException(\n  root,\n  returnFiber,\n  sourceFiber,\n  value,\n  rootRenderLanes\n) {\n  sourceFiber.flags |= 32768;\n  if (\n    null !== value &&\n    \"object\" === typeof value &&\n    \"function\" === typeof value.then\n  ) {\n    returnFiber = sourceFiber.alternate;\n    null !== returnFiber &&\n      propagateParentContextChanges(\n        returnFiber,\n        sourceFiber,\n        rootRenderLanes,\n        !0\n      );\n    sourceFiber = suspenseHandlerStackCursor.current;\n    if (null !== sourceFiber) {\n      switch (sourceFiber.tag) {\n        case 13:\n          return (\n            null === shellBoundary\n              ? renderDidSuspendDelayIfPossible()\n              : null === sourceFiber.alternate &&\n                0 === workInProgressRootExitStatus &&\n                (workInProgressRootExitStatus = 3),\n            (sourceFiber.flags &= -257),\n            (sourceFiber.flags |= 65536),\n            (sourceFiber.lanes = rootRenderLanes),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? (sourceFiber.updateQueue = new Set([value]))\n                  : returnFiber.add(value),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n        case 22:\n          return (\n            (sourceFiber.flags |= 65536),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? ((returnFiber = {\n                      transitions: null,\n                      markerInstances: null,\n                      retryQueue: new Set([value])\n                    }),\n                    (sourceFiber.updateQueue = returnFiber))\n                  : ((sourceFiber = returnFiber.retryQueue),\n                    null === sourceFiber\n                      ? (returnFiber.retryQueue = new Set([value]))\n                      : sourceFiber.add(value)),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n      }\n      throw Error(formatProdErrorMessage(435, sourceFiber.tag));\n    }\n    attachPingListener(root, value, rootRenderLanes);\n    renderDidSuspendDelayIfPossible();\n    return !1;\n  }\n  if (isHydrating)\n    return (\n      (returnFiber = suspenseHandlerStackCursor.current),\n      null !== returnFiber\n        ? (0 === (returnFiber.flags & 65536) && (returnFiber.flags |= 256),\n          (returnFiber.flags |= 65536),\n          (returnFiber.lanes = rootRenderLanes),\n          value !== HydrationMismatchException &&\n            ((root = Error(formatProdErrorMessage(422), { cause: value })),\n            queueHydrationError(createCapturedValueAtFiber(root, sourceFiber))))\n        : (value !== HydrationMismatchException &&\n            ((returnFiber = Error(formatProdErrorMessage(423), {\n              cause: value\n            })),\n            queueHydrationError(\n              createCapturedValueAtFiber(returnFiber, sourceFiber)\n            )),\n          (root = root.current.alternate),\n          (root.flags |= 65536),\n          (rootRenderLanes &= -rootRenderLanes),\n          (root.lanes |= rootRenderLanes),\n          (value = createCapturedValueAtFiber(value, sourceFiber)),\n          (rootRenderLanes = createRootErrorUpdate(\n            root.stateNode,\n            value,\n            rootRenderLanes\n          )),\n          enqueueCapturedUpdate(root, rootRenderLanes),\n          4 !== workInProgressRootExitStatus &&\n            (workInProgressRootExitStatus = 2)),\n      !1\n    );\n  var wrapperError = Error(formatProdErrorMessage(520), { cause: value });\n  wrapperError = createCapturedValueAtFiber(wrapperError, sourceFiber);\n  null === workInProgressRootConcurrentErrors\n    ? (workInProgressRootConcurrentErrors = [wrapperError])\n    : workInProgressRootConcurrentErrors.push(wrapperError);\n  4 !== workInProgressRootExitStatus && (workInProgressRootExitStatus = 2);\n  if (null === returnFiber) return !0;\n  value = createCapturedValueAtFiber(value, sourceFiber);\n  sourceFiber = returnFiber;\n  do {\n    switch (sourceFiber.tag) {\n      case 3:\n        return (\n          (sourceFiber.flags |= 65536),\n          (root = rootRenderLanes & -rootRenderLanes),\n          (sourceFiber.lanes |= root),\n          (root = createRootErrorUpdate(sourceFiber.stateNode, value, root)),\n          enqueueCapturedUpdate(sourceFiber, root),\n          !1\n        );\n      case 1:\n        if (\n          ((returnFiber = sourceFiber.type),\n          (wrapperError = sourceFiber.stateNode),\n          0 === (sourceFiber.flags & 128) &&\n            (\"function\" === typeof returnFiber.getDerivedStateFromError ||\n              (null !== wrapperError &&\n                \"function\" === typeof wrapperError.componentDidCatch &&\n                (null === legacyErrorBoundariesThatAlreadyFailed ||\n                  !legacyErrorBoundariesThatAlreadyFailed.has(wrapperError)))))\n        )\n          return (\n            (sourceFiber.flags |= 65536),\n            (rootRenderLanes &= -rootRenderLanes),\n            (sourceFiber.lanes |= rootRenderLanes),\n            (rootRenderLanes = createClassErrorUpdate(rootRenderLanes)),\n            initializeClassErrorUpdate(\n              rootRenderLanes,\n              root,\n              sourceFiber,\n              value\n            ),\n            enqueueCapturedUpdate(sourceFiber, rootRenderLanes),\n            !1\n          );\n    }\n    sourceFiber = sourceFiber.return;\n  } while (null !== sourceFiber);\n  return !1;\n}\nvar SelectiveHydrationException = Error(formatProdErrorMessage(461)),\n  didReceiveUpdate = !1;\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n  workInProgress.child =\n    null === current\n      ? mountChildFibers(workInProgress, null, nextChildren, renderLanes)\n      : reconcileChildFibers(\n          workInProgress,\n          current.child,\n          nextChildren,\n          renderLanes\n        );\n}\nfunction updateForwardRef(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  Component = Component.render;\n  var ref = workInProgress.ref;\n  if (\"ref\" in nextProps) {\n    var propsWithoutRef = {};\n    for (var key in nextProps)\n      \"ref\" !== key && (propsWithoutRef[key] = nextProps[key]);\n  } else propsWithoutRef = nextProps;\n  prepareToReadContext(workInProgress);\n  nextProps = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    propsWithoutRef,\n    ref,\n    renderLanes\n  );\n  key = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && key && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null === current) {\n    var type = Component.type;\n    if (\n      \"function\" === typeof type &&\n      !shouldConstruct(type) &&\n      void 0 === type.defaultProps &&\n      null === Component.compare\n    )\n      return (\n        (workInProgress.tag = 15),\n        (workInProgress.type = type),\n        updateSimpleMemoComponent(\n          current,\n          workInProgress,\n          type,\n          nextProps,\n          renderLanes\n        )\n      );\n    current = createFiberFromTypeAndProps(\n      Component.type,\n      null,\n      nextProps,\n      workInProgress,\n      workInProgress.mode,\n      renderLanes\n    );\n    current.ref = workInProgress.ref;\n    current.return = workInProgress;\n    return (workInProgress.child = current);\n  }\n  type = current.child;\n  if (!checkScheduledUpdateOrContext(current, renderLanes)) {\n    var prevProps = type.memoizedProps;\n    Component = Component.compare;\n    Component = null !== Component ? Component : shallowEqual;\n    if (Component(prevProps, nextProps) && current.ref === workInProgress.ref)\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n  }\n  workInProgress.flags |= 1;\n  current = createWorkInProgress(type, nextProps);\n  current.ref = workInProgress.ref;\n  current.return = workInProgress;\n  return (workInProgress.child = current);\n}\nfunction updateSimpleMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null !== current) {\n    var prevProps = current.memoizedProps;\n    if (\n      shallowEqual(prevProps, nextProps) &&\n      current.ref === workInProgress.ref\n    )\n      if (\n        ((didReceiveUpdate = !1),\n        (workInProgress.pendingProps = nextProps = prevProps),\n        checkScheduledUpdateOrContext(current, renderLanes))\n      )\n        0 !== (current.flags & 131072) && (didReceiveUpdate = !0);\n      else\n        return (\n          (workInProgress.lanes = current.lanes),\n          bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n        );\n  }\n  return updateFunctionComponent(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    renderLanes\n  );\n}\nfunction updateOffscreenComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    nextChildren = nextProps.children,\n    nextIsDetached = 0 !== (workInProgress.stateNode._pendingVisibility & 2),\n    prevState = null !== current ? current.memoizedState : null;\n  markRef(current, workInProgress);\n  if (\"hidden\" === nextProps.mode || nextIsDetached) {\n    if (0 !== (workInProgress.flags & 128)) {\n      nextProps =\n        null !== prevState ? prevState.baseLanes | renderLanes : renderLanes;\n      if (null !== current) {\n        nextChildren = workInProgress.child = current.child;\n        for (nextIsDetached = 0; null !== nextChildren; )\n          (nextIsDetached =\n            nextIsDetached | nextChildren.lanes | nextChildren.childLanes),\n            (nextChildren = nextChildren.sibling);\n        workInProgress.childLanes = nextIsDetached & ~nextProps;\n      } else (workInProgress.childLanes = 0), (workInProgress.child = null);\n      return deferHiddenOffscreenComponent(\n        current,\n        workInProgress,\n        nextProps,\n        renderLanes\n      );\n    }\n    if (0 !== (renderLanes & 536870912))\n      (workInProgress.memoizedState = { baseLanes: 0, cachePool: null }),\n        null !== current &&\n          pushTransition(\n            workInProgress,\n            null !== prevState ? prevState.cachePool : null\n          ),\n        null !== prevState\n          ? pushHiddenContext(workInProgress, prevState)\n          : reuseHiddenContextOnStack(),\n        pushOffscreenSuspenseHandler(workInProgress);\n    else\n      return (\n        (workInProgress.lanes = workInProgress.childLanes = 536870912),\n        deferHiddenOffscreenComponent(\n          current,\n          workInProgress,\n          null !== prevState ? prevState.baseLanes | renderLanes : renderLanes,\n          renderLanes\n        )\n      );\n  } else\n    null !== prevState\n      ? (pushTransition(workInProgress, prevState.cachePool),\n        pushHiddenContext(workInProgress, prevState),\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (workInProgress.memoizedState = null))\n      : (null !== current && pushTransition(workInProgress, null),\n        reuseHiddenContextOnStack(),\n        reuseSuspenseHandlerOnStack(workInProgress));\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nfunction deferHiddenOffscreenComponent(\n  current,\n  workInProgress,\n  nextBaseLanes,\n  renderLanes\n) {\n  var JSCompiler_inline_result = peekCacheFromPool();\n  JSCompiler_inline_result =\n    null === JSCompiler_inline_result\n      ? null\n      : { parent: CacheContext._currentValue, pool: JSCompiler_inline_result };\n  workInProgress.memoizedState = {\n    baseLanes: nextBaseLanes,\n    cachePool: JSCompiler_inline_result\n  };\n  null !== current && pushTransition(workInProgress, null);\n  reuseHiddenContextOnStack();\n  pushOffscreenSuspenseHandler(workInProgress);\n  null !== current &&\n    propagateParentContextChanges(current, workInProgress, renderLanes, !0);\n  return null;\n}\nfunction markRef(current, workInProgress) {\n  var ref = workInProgress.ref;\n  if (null === ref)\n    null !== current &&\n      null !== current.ref &&\n      (workInProgress.flags |= 2097664);\n  else {\n    if (\"function\" !== typeof ref && \"object\" !== typeof ref)\n      throw Error(formatProdErrorMessage(284));\n    if (null === current || current.ref !== ref)\n      workInProgress.flags |= 2097664;\n  }\n}\nfunction updateFunctionComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  Component = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    void 0,\n    renderLanes\n  );\n  nextProps = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && nextProps && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, Component, renderLanes);\n  return workInProgress.child;\n}\nfunction replayFunctionComponent(\n  current,\n  workInProgress,\n  nextProps,\n  Component,\n  secondArg,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  workInProgress.updateQueue = null;\n  nextProps = renderWithHooksAgain(\n    workInProgress,\n    Component,\n    nextProps,\n    secondArg\n  );\n  finishRenderingHooks(current);\n  Component = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && Component && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateClassComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  if (null === workInProgress.stateNode) {\n    var context = emptyContextObject,\n      contextType = Component.contextType;\n    \"object\" === typeof contextType &&\n      null !== contextType &&\n      (context = readContext(contextType));\n    context = new Component(nextProps, context);\n    workInProgress.memoizedState =\n      null !== context.state && void 0 !== context.state ? context.state : null;\n    context.updater = classComponentUpdater;\n    workInProgress.stateNode = context;\n    context._reactInternals = workInProgress;\n    context = workInProgress.stateNode;\n    context.props = nextProps;\n    context.state = workInProgress.memoizedState;\n    context.refs = {};\n    initializeUpdateQueue(workInProgress);\n    contextType = Component.contextType;\n    context.context =\n      \"object\" === typeof contextType && null !== contextType\n        ? readContext(contextType)\n        : emptyContextObject;\n    context.state = workInProgress.memoizedState;\n    contextType = Component.getDerivedStateFromProps;\n    \"function\" === typeof contextType &&\n      (applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        contextType,\n        nextProps\n      ),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof Component.getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate ||\n      (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n        \"function\" !== typeof context.componentWillMount) ||\n      ((contextType = context.state),\n      \"function\" === typeof context.componentWillMount &&\n        context.componentWillMount(),\n      \"function\" === typeof context.UNSAFE_componentWillMount &&\n        context.UNSAFE_componentWillMount(),\n      contextType !== context.state &&\n        classComponentUpdater.enqueueReplaceState(context, context.state, null),\n      processUpdateQueue(workInProgress, nextProps, context, renderLanes),\n      suspendIfUpdateReadFromEntangledAsyncAction(),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof context.componentDidMount &&\n      (workInProgress.flags |= 4194308);\n    nextProps = !0;\n  } else if (null === current) {\n    context = workInProgress.stateNode;\n    var unresolvedOldProps = workInProgress.memoizedProps,\n      oldProps = resolveClassComponentProps(Component, unresolvedOldProps);\n    context.props = oldProps;\n    var oldContext = context.context,\n      contextType$jscomp$0 = Component.contextType;\n    contextType = emptyContextObject;\n    \"object\" === typeof contextType$jscomp$0 &&\n      null !== contextType$jscomp$0 &&\n      (contextType = readContext(contextType$jscomp$0));\n    var getDerivedStateFromProps = Component.getDerivedStateFromProps;\n    contextType$jscomp$0 =\n      \"function\" === typeof getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate;\n    unresolvedOldProps = workInProgress.pendingProps !== unresolvedOldProps;\n    contextType$jscomp$0 ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((unresolvedOldProps || oldContext !== contextType) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          contextType\n        ));\n    hasForceUpdate = !1;\n    var oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    oldContext = workInProgress.memoizedState;\n    unresolvedOldProps || oldState !== oldContext || hasForceUpdate\n      ? (\"function\" === typeof getDerivedStateFromProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            getDerivedStateFromProps,\n            nextProps\n          ),\n          (oldContext = workInProgress.memoizedState)),\n        (oldProps =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            oldProps,\n            nextProps,\n            oldState,\n            oldContext,\n            contextType\n          ))\n          ? (contextType$jscomp$0 ||\n              (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n                \"function\" !== typeof context.componentWillMount) ||\n              (\"function\" === typeof context.componentWillMount &&\n                context.componentWillMount(),\n              \"function\" === typeof context.UNSAFE_componentWillMount &&\n                context.UNSAFE_componentWillMount()),\n            \"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308))\n          : (\"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = oldContext)),\n        (context.props = nextProps),\n        (context.state = oldContext),\n        (context.context = contextType),\n        (nextProps = oldProps))\n      : (\"function\" === typeof context.componentDidMount &&\n          (workInProgress.flags |= 4194308),\n        (nextProps = !1));\n  } else {\n    context = workInProgress.stateNode;\n    cloneUpdateQueue(current, workInProgress);\n    contextType = workInProgress.memoizedProps;\n    contextType$jscomp$0 = resolveClassComponentProps(Component, contextType);\n    context.props = contextType$jscomp$0;\n    getDerivedStateFromProps = workInProgress.pendingProps;\n    oldState = context.context;\n    oldContext = Component.contextType;\n    oldProps = emptyContextObject;\n    \"object\" === typeof oldContext &&\n      null !== oldContext &&\n      (oldProps = readContext(oldContext));\n    unresolvedOldProps = Component.getDerivedStateFromProps;\n    (oldContext =\n      \"function\" === typeof unresolvedOldProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate) ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((contextType !== getDerivedStateFromProps || oldState !== oldProps) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          oldProps\n        ));\n    hasForceUpdate = !1;\n    oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    var newState = workInProgress.memoizedState;\n    contextType !== getDerivedStateFromProps ||\n    oldState !== newState ||\n    hasForceUpdate ||\n    (null !== current &&\n      null !== current.dependencies &&\n      checkIfContextChanged(current.dependencies))\n      ? (\"function\" === typeof unresolvedOldProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            unresolvedOldProps,\n            nextProps\n          ),\n          (newState = workInProgress.memoizedState)),\n        (contextType$jscomp$0 =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            contextType$jscomp$0,\n            nextProps,\n            oldState,\n            newState,\n            oldProps\n          ) ||\n          (null !== current &&\n            null !== current.dependencies &&\n            checkIfContextChanged(current.dependencies)))\n          ? (oldContext ||\n              (\"function\" !== typeof context.UNSAFE_componentWillUpdate &&\n                \"function\" !== typeof context.componentWillUpdate) ||\n              (\"function\" === typeof context.componentWillUpdate &&\n                context.componentWillUpdate(nextProps, newState, oldProps),\n              \"function\" === typeof context.UNSAFE_componentWillUpdate &&\n                context.UNSAFE_componentWillUpdate(\n                  nextProps,\n                  newState,\n                  oldProps\n                )),\n            \"function\" === typeof context.componentDidUpdate &&\n              (workInProgress.flags |= 4),\n            \"function\" === typeof context.getSnapshotBeforeUpdate &&\n              (workInProgress.flags |= 1024))\n          : (\"function\" !== typeof context.componentDidUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 4),\n            \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 1024),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = newState)),\n        (context.props = nextProps),\n        (context.state = newState),\n        (context.context = oldProps),\n        (nextProps = contextType$jscomp$0))\n      : (\"function\" !== typeof context.componentDidUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 4),\n        \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 1024),\n        (nextProps = !1));\n  }\n  context = nextProps;\n  markRef(current, workInProgress);\n  nextProps = 0 !== (workInProgress.flags & 128);\n  context || nextProps\n    ? ((context = workInProgress.stateNode),\n      (Component =\n        nextProps && \"function\" !== typeof Component.getDerivedStateFromError\n          ? null\n          : context.render()),\n      (workInProgress.flags |= 1),\n      null !== current && nextProps\n        ? ((workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            current.child,\n            null,\n            renderLanes\n          )),\n          (workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            null,\n            Component,\n            renderLanes\n          )))\n        : reconcileChildren(current, workInProgress, Component, renderLanes),\n      (workInProgress.memoizedState = context.state),\n      (current = workInProgress.child))\n    : (current = bailoutOnAlreadyFinishedWork(\n        current,\n        workInProgress,\n        renderLanes\n      ));\n  return current;\n}\nfunction mountHostRootWithoutHydrating(\n  current,\n  workInProgress,\n  nextChildren,\n  renderLanes\n) {\n  resetHydrationState();\n  workInProgress.flags |= 256;\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nvar SUSPENDED_MARKER = { dehydrated: null, treeContext: null, retryLane: 0 };\nfunction mountSuspenseOffscreenState(renderLanes) {\n  return { baseLanes: renderLanes, cachePool: getSuspendedCache() };\n}\nfunction getRemainingWorkInPrimaryTree(\n  current,\n  primaryTreeDidDefer,\n  renderLanes\n) {\n  current = null !== current ? current.childLanes & ~renderLanes : 0;\n  primaryTreeDidDefer && (current |= workInProgressDeferredLane);\n  return current;\n}\nfunction updateSuspenseComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    showFallback = !1,\n    didSuspend = 0 !== (workInProgress.flags & 128),\n    JSCompiler_temp;\n  (JSCompiler_temp = didSuspend) ||\n    (JSCompiler_temp =\n      null !== current && null === current.memoizedState\n        ? !1\n        : 0 !== (suspenseStackCursor.current & 2));\n  JSCompiler_temp && ((showFallback = !0), (workInProgress.flags &= -129));\n  JSCompiler_temp = 0 !== (workInProgress.flags & 32);\n  workInProgress.flags &= -33;\n  if (null === current) {\n    if (isHydrating) {\n      showFallback\n        ? pushPrimaryTreeSuspenseHandler(workInProgress)\n        : reuseSuspenseHandlerOnStack(workInProgress);\n      if (isHydrating) {\n        var nextInstance = nextHydratableInstance,\n          JSCompiler_temp$jscomp$0;\n        if ((JSCompiler_temp$jscomp$0 = nextInstance)) {\n          c: {\n            JSCompiler_temp$jscomp$0 = nextInstance;\n            for (\n              nextInstance = rootOrSingletonContext;\n              8 !== JSCompiler_temp$jscomp$0.nodeType;\n\n            ) {\n              if (!nextInstance) {\n                nextInstance = null;\n                break c;\n              }\n              JSCompiler_temp$jscomp$0 = getNextHydratable(\n                JSCompiler_temp$jscomp$0.nextSibling\n              );\n              if (null === JSCompiler_temp$jscomp$0) {\n                nextInstance = null;\n                break c;\n              }\n            }\n            nextInstance = JSCompiler_temp$jscomp$0;\n          }\n          null !== nextInstance\n            ? ((workInProgress.memoizedState = {\n                dehydrated: nextInstance,\n                treeContext:\n                  null !== treeContextProvider\n                    ? { id: treeContextId, overflow: treeContextOverflow }\n                    : null,\n                retryLane: 536870912\n              }),\n              (JSCompiler_temp$jscomp$0 = createFiberImplClass(\n                18,\n                null,\n                null,\n                0\n              )),\n              (JSCompiler_temp$jscomp$0.stateNode = nextInstance),\n              (JSCompiler_temp$jscomp$0.return = workInProgress),\n              (workInProgress.child = JSCompiler_temp$jscomp$0),\n              (hydrationParentFiber = workInProgress),\n              (nextHydratableInstance = null),\n              (JSCompiler_temp$jscomp$0 = !0))\n            : (JSCompiler_temp$jscomp$0 = !1);\n        }\n        JSCompiler_temp$jscomp$0 || throwOnHydrationMismatch(workInProgress);\n      }\n      nextInstance = workInProgress.memoizedState;\n      if (\n        null !== nextInstance &&\n        ((nextInstance = nextInstance.dehydrated), null !== nextInstance)\n      )\n        return (\n          \"$!\" === nextInstance.data\n            ? (workInProgress.lanes = 16)\n            : (workInProgress.lanes = 536870912),\n          null\n        );\n      popSuspenseHandler(workInProgress);\n    }\n    nextInstance = nextProps.children;\n    nextProps = nextProps.fallback;\n    if (showFallback)\n      return (\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (showFallback = workInProgress.mode),\n        (nextInstance = mountWorkInProgressOffscreenFiber(\n          { mode: \"hidden\", children: nextInstance },\n          showFallback\n        )),\n        (nextProps = createFiberFromFragment(\n          nextProps,\n          showFallback,\n          renderLanes,\n          null\n        )),\n        (nextInstance.return = workInProgress),\n        (nextProps.return = workInProgress),\n        (nextInstance.sibling = nextProps),\n        (workInProgress.child = nextInstance),\n        (showFallback = workInProgress.child),\n        (showFallback.memoizedState = mountSuspenseOffscreenState(renderLanes)),\n        (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n          current,\n          JSCompiler_temp,\n          renderLanes\n        )),\n        (workInProgress.memoizedState = SUSPENDED_MARKER),\n        nextProps\n      );\n    pushPrimaryTreeSuspenseHandler(workInProgress);\n    return mountSuspensePrimaryChildren(workInProgress, nextInstance);\n  }\n  JSCompiler_temp$jscomp$0 = current.memoizedState;\n  if (\n    null !== JSCompiler_temp$jscomp$0 &&\n    ((nextInstance = JSCompiler_temp$jscomp$0.dehydrated),\n    null !== nextInstance)\n  ) {\n    if (didSuspend)\n      workInProgress.flags & 256\n        ? (pushPrimaryTreeSuspenseHandler(workInProgress),\n          (workInProgress.flags &= -257),\n          (workInProgress = retrySuspenseComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          )))\n        : null !== workInProgress.memoizedState\n          ? (reuseSuspenseHandlerOnStack(workInProgress),\n            (workInProgress.child = current.child),\n            (workInProgress.flags |= 128),\n            (workInProgress = null))\n          : (reuseSuspenseHandlerOnStack(workInProgress),\n            (showFallback = nextProps.fallback),\n            (nextInstance = workInProgress.mode),\n            (nextProps = mountWorkInProgressOffscreenFiber(\n              { mode: \"visible\", children: nextProps.children },\n              nextInstance\n            )),\n            (showFallback = createFiberFromFragment(\n              showFallback,\n              nextInstance,\n              renderLanes,\n              null\n            )),\n            (showFallback.flags |= 2),\n            (nextProps.return = workInProgress),\n            (showFallback.return = workInProgress),\n            (nextProps.sibling = showFallback),\n            (workInProgress.child = nextProps),\n            reconcileChildFibers(\n              workInProgress,\n              current.child,\n              null,\n              renderLanes\n            ),\n            (nextProps = workInProgress.child),\n            (nextProps.memoizedState =\n              mountSuspenseOffscreenState(renderLanes)),\n            (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n              current,\n              JSCompiler_temp,\n              renderLanes\n            )),\n            (workInProgress.memoizedState = SUSPENDED_MARKER),\n            (workInProgress = showFallback));\n    else if (\n      (pushPrimaryTreeSuspenseHandler(workInProgress),\n      \"$!\" === nextInstance.data)\n    ) {\n      JSCompiler_temp =\n        nextInstance.nextSibling && nextInstance.nextSibling.dataset;\n      if (JSCompiler_temp) var digest = JSCompiler_temp.dgst;\n      JSCompiler_temp = digest;\n      nextProps = Error(formatProdErrorMessage(419));\n      nextProps.stack = \"\";\n      nextProps.digest = JSCompiler_temp;\n      queueHydrationError({ value: nextProps, source: null, stack: null });\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (JSCompiler_temp = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || JSCompiler_temp)\n    ) {\n      JSCompiler_temp = workInProgressRoot;\n      if (null !== JSCompiler_temp) {\n        nextProps = renderLanes & -renderLanes;\n        if (0 !== (nextProps & 42)) nextProps = 1;\n        else\n          switch (nextProps) {\n            case 2:\n              nextProps = 1;\n              break;\n            case 8:\n              nextProps = 4;\n              break;\n            case 32:\n              nextProps = 16;\n              break;\n            case 128:\n            case 256:\n            case 512:\n            case 1024:\n            case 2048:\n            case 4096:\n            case 8192:\n            case 16384:\n            case 32768:\n            case 65536:\n            case 131072:\n            case 262144:\n            case 524288:\n            case 1048576:\n            case 2097152:\n            case 4194304:\n            case 8388608:\n            case 16777216:\n            case 33554432:\n              nextProps = 64;\n              break;\n            case 268435456:\n              nextProps = 134217728;\n              break;\n            default:\n              nextProps = 0;\n          }\n        nextProps =\n          0 !== (nextProps & (JSCompiler_temp.suspendedLanes | renderLanes))\n            ? 0\n            : nextProps;\n        if (0 !== nextProps && nextProps !== JSCompiler_temp$jscomp$0.retryLane)\n          throw (\n            ((JSCompiler_temp$jscomp$0.retryLane = nextProps),\n            enqueueConcurrentRenderForLane(current, nextProps),\n            scheduleUpdateOnFiber(JSCompiler_temp, current, nextProps),\n            SelectiveHydrationException)\n          );\n      }\n      \"$?\" === nextInstance.data || renderDidSuspendDelayIfPossible();\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      \"$?\" === nextInstance.data\n        ? ((workInProgress.flags |= 128),\n          (workInProgress.child = current.child),\n          (workInProgress = retryDehydratedSuspenseBoundary.bind(\n            null,\n            current\n          )),\n          (nextInstance._reactRetry = workInProgress),\n          (workInProgress = null))\n        : ((current = JSCompiler_temp$jscomp$0.treeContext),\n          (nextHydratableInstance = getNextHydratable(\n            nextInstance.nextSibling\n          )),\n          (hydrationParentFiber = workInProgress),\n          (isHydrating = !0),\n          (hydrationErrors = null),\n          (rootOrSingletonContext = !1),\n          null !== current &&\n            ((idStack[idStackIndex++] = treeContextId),\n            (idStack[idStackIndex++] = treeContextOverflow),\n            (idStack[idStackIndex++] = treeContextProvider),\n            (treeContextId = current.id),\n            (treeContextOverflow = current.overflow),\n            (treeContextProvider = workInProgress)),\n          (workInProgress = mountSuspensePrimaryChildren(\n            workInProgress,\n            nextProps.children\n          )),\n          (workInProgress.flags |= 4096));\n    return workInProgress;\n  }\n  if (showFallback)\n    return (\n      reuseSuspenseHandlerOnStack(workInProgress),\n      (showFallback = nextProps.fallback),\n      (nextInstance = workInProgress.mode),\n      (JSCompiler_temp$jscomp$0 = current.child),\n      (digest = JSCompiler_temp$jscomp$0.sibling),\n      (nextProps = createWorkInProgress(JSCompiler_temp$jscomp$0, {\n        mode: \"hidden\",\n        children: nextProps.children\n      })),\n      (nextProps.subtreeFlags =\n        JSCompiler_temp$jscomp$0.subtreeFlags & 31457280),\n      null !== digest\n        ? (showFallback = createWorkInProgress(digest, showFallback))\n        : ((showFallback = createFiberFromFragment(\n            showFallback,\n            nextInstance,\n            renderLanes,\n            null\n          )),\n          (showFallback.flags |= 2)),\n      (showFallback.return = workInProgress),\n      (nextProps.return = workInProgress),\n      (nextProps.sibling = showFallback),\n      (workInProgress.child = nextProps),\n      (nextProps = showFallback),\n      (showFallback = workInProgress.child),\n      (nextInstance = current.child.memoizedState),\n      null === nextInstance\n        ? (nextInstance = mountSuspenseOffscreenState(renderLanes))\n        : ((JSCompiler_temp$jscomp$0 = nextInstance.cachePool),\n          null !== JSCompiler_temp$jscomp$0\n            ? ((digest = CacheContext._currentValue),\n              (JSCompiler_temp$jscomp$0 =\n                JSCompiler_temp$jscomp$0.parent !== digest\n                  ? { parent: digest, pool: digest }\n                  : JSCompiler_temp$jscomp$0))\n            : (JSCompiler_temp$jscomp$0 = getSuspendedCache()),\n          (nextInstance = {\n            baseLanes: nextInstance.baseLanes | renderLanes,\n            cachePool: JSCompiler_temp$jscomp$0\n          })),\n      (showFallback.memoizedState = nextInstance),\n      (showFallback.childLanes = getRemainingWorkInPrimaryTree(\n        current,\n        JSCompiler_temp,\n        renderLanes\n      )),\n      (workInProgress.memoizedState = SUSPENDED_MARKER),\n      nextProps\n    );\n  pushPrimaryTreeSuspenseHandler(workInProgress);\n  renderLanes = current.child;\n  current = renderLanes.sibling;\n  renderLanes = createWorkInProgress(renderLanes, {\n    mode: \"visible\",\n    children: nextProps.children\n  });\n  renderLanes.return = workInProgress;\n  renderLanes.sibling = null;\n  null !== current &&\n    ((JSCompiler_temp = workInProgress.deletions),\n    null === JSCompiler_temp\n      ? ((workInProgress.deletions = [current]), (workInProgress.flags |= 16))\n      : JSCompiler_temp.push(current));\n  workInProgress.child = renderLanes;\n  workInProgress.memoizedState = null;\n  return renderLanes;\n}\nfunction mountSuspensePrimaryChildren(workInProgress, primaryChildren) {\n  primaryChildren = mountWorkInProgressOffscreenFiber(\n    { mode: \"visible\", children: primaryChildren },\n    workInProgress.mode\n  );\n  primaryChildren.return = workInProgress;\n  return (workInProgress.child = primaryChildren);\n}\nfunction mountWorkInProgressOffscreenFiber(offscreenProps, mode) {\n  return createFiberFromOffscreen(offscreenProps, mode, 0, null);\n}\nfunction retrySuspenseComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountSuspensePrimaryChildren(\n    workInProgress,\n    workInProgress.pendingProps.children\n  );\n  current.flags |= 2;\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction scheduleSuspenseWorkOnFiber(fiber, renderLanes, propagationRoot) {\n  fiber.lanes |= renderLanes;\n  var alternate = fiber.alternate;\n  null !== alternate && (alternate.lanes |= renderLanes);\n  scheduleContextWorkOnParentPath(fiber.return, renderLanes, propagationRoot);\n}\nfunction initSuspenseListRenderState(\n  workInProgress,\n  isBackwards,\n  tail,\n  lastContentRow,\n  tailMode\n) {\n  var renderState = workInProgress.memoizedState;\n  null === renderState\n    ? (workInProgress.memoizedState = {\n        isBackwards: isBackwards,\n        rendering: null,\n        renderingStartTime: 0,\n        last: lastContentRow,\n        tail: tail,\n        tailMode: tailMode\n      })\n    : ((renderState.isBackwards = isBackwards),\n      (renderState.rendering = null),\n      (renderState.renderingStartTime = 0),\n      (renderState.last = lastContentRow),\n      (renderState.tail = tail),\n      (renderState.tailMode = tailMode));\n}\nfunction updateSuspenseListComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    revealOrder = nextProps.revealOrder,\n    tailMode = nextProps.tail;\n  reconcileChildren(current, workInProgress, nextProps.children, renderLanes);\n  nextProps = suspenseStackCursor.current;\n  if (0 !== (nextProps & 2))\n    (nextProps = (nextProps & 1) | 2), (workInProgress.flags |= 128);\n  else {\n    if (null !== current && 0 !== (current.flags & 128))\n      a: for (current = workInProgress.child; null !== current; ) {\n        if (13 === current.tag)\n          null !== current.memoizedState &&\n            scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (19 === current.tag)\n          scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n        else if (null !== current.child) {\n          current.child.return = current;\n          current = current.child;\n          continue;\n        }\n        if (current === workInProgress) break a;\n        for (; null === current.sibling; ) {\n          if (null === current.return || current.return === workInProgress)\n            break a;\n          current = current.return;\n        }\n        current.sibling.return = current.return;\n        current = current.sibling;\n      }\n    nextProps &= 1;\n  }\n  push(suspenseStackCursor, nextProps);\n  switch (revealOrder) {\n    case \"forwards\":\n      renderLanes = workInProgress.child;\n      for (revealOrder = null; null !== renderLanes; )\n        (current = renderLanes.alternate),\n          null !== current &&\n            null === findFirstSuspended(current) &&\n            (revealOrder = renderLanes),\n          (renderLanes = renderLanes.sibling);\n      renderLanes = revealOrder;\n      null === renderLanes\n        ? ((revealOrder = workInProgress.child), (workInProgress.child = null))\n        : ((revealOrder = renderLanes.sibling), (renderLanes.sibling = null));\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        revealOrder,\n        renderLanes,\n        tailMode\n      );\n      break;\n    case \"backwards\":\n      renderLanes = null;\n      revealOrder = workInProgress.child;\n      for (workInProgress.child = null; null !== revealOrder; ) {\n        current = revealOrder.alternate;\n        if (null !== current && null === findFirstSuspended(current)) {\n          workInProgress.child = revealOrder;\n          break;\n        }\n        current = revealOrder.sibling;\n        revealOrder.sibling = renderLanes;\n        renderLanes = revealOrder;\n        revealOrder = current;\n      }\n      initSuspenseListRenderState(\n        workInProgress,\n        !0,\n        renderLanes,\n        null,\n        tailMode\n      );\n      break;\n    case \"together\":\n      initSuspenseListRenderState(workInProgress, !1, null, null, void 0);\n      break;\n    default:\n      workInProgress.memoizedState = null;\n  }\n  return workInProgress.child;\n}\nfunction bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes) {\n  null !== current && (workInProgress.dependencies = current.dependencies);\n  workInProgressRootSkippedLanes |= workInProgress.lanes;\n  if (0 === (renderLanes & workInProgress.childLanes))\n    if (null !== current) {\n      if (\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        0 === (renderLanes & workInProgress.childLanes))\n      )\n        return null;\n    } else return null;\n  if (null !== current && workInProgress.child !== current.child)\n    throw Error(formatProdErrorMessage(153));\n  if (null !== workInProgress.child) {\n    current = workInProgress.child;\n    renderLanes = createWorkInProgress(current, current.pendingProps);\n    workInProgress.child = renderLanes;\n    for (renderLanes.return = workInProgress; null !== current.sibling; )\n      (current = current.sibling),\n        (renderLanes = renderLanes.sibling =\n          createWorkInProgress(current, current.pendingProps)),\n        (renderLanes.return = workInProgress);\n    renderLanes.sibling = null;\n  }\n  return workInProgress.child;\n}\nfunction checkScheduledUpdateOrContext(current, renderLanes) {\n  if (0 !== (current.lanes & renderLanes)) return !0;\n  current = current.dependencies;\n  return null !== current && checkIfContextChanged(current) ? !0 : !1;\n}\nfunction attemptEarlyBailoutIfNoScheduledUpdate(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  switch (workInProgress.tag) {\n    case 3:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n      resetHydrationState();\n      break;\n    case 27:\n    case 5:\n      pushHostContext(workInProgress);\n      break;\n    case 4:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      break;\n    case 10:\n      pushProvider(\n        workInProgress,\n        workInProgress.type,\n        workInProgress.memoizedProps.value\n      );\n      break;\n    case 13:\n      var state = workInProgress.memoizedState;\n      if (null !== state) {\n        if (null !== state.dehydrated)\n          return (\n            pushPrimaryTreeSuspenseHandler(workInProgress),\n            (workInProgress.flags |= 128),\n            null\n          );\n        if (0 !== (renderLanes & workInProgress.child.childLanes))\n          return updateSuspenseComponent(current, workInProgress, renderLanes);\n        pushPrimaryTreeSuspenseHandler(workInProgress);\n        current = bailoutOnAlreadyFinishedWork(\n          current,\n          workInProgress,\n          renderLanes\n        );\n        return null !== current ? current.sibling : null;\n      }\n      pushPrimaryTreeSuspenseHandler(workInProgress);\n      break;\n    case 19:\n      var didSuspendBefore = 0 !== (current.flags & 128);\n      state = 0 !== (renderLanes & workInProgress.childLanes);\n      state ||\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        (state = 0 !== (renderLanes & workInProgress.childLanes)));\n      if (didSuspendBefore) {\n        if (state)\n          return updateSuspenseListComponent(\n            current,\n            workInProgress,\n            renderLanes\n          );\n        workInProgress.flags |= 128;\n      }\n      didSuspendBefore = workInProgress.memoizedState;\n      null !== didSuspendBefore &&\n        ((didSuspendBefore.rendering = null),\n        (didSuspendBefore.tail = null),\n        (didSuspendBefore.lastEffect = null));\n      push(suspenseStackCursor, suspenseStackCursor.current);\n      if (state) break;\n      else return null;\n    case 22:\n    case 23:\n      return (\n        (workInProgress.lanes = 0),\n        updateOffscreenComponent(current, workInProgress, renderLanes)\n      );\n    case 24:\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n  }\n  return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n}\nfunction beginWork(current, workInProgress, renderLanes) {\n  if (null !== current)\n    if (current.memoizedProps !== workInProgress.pendingProps)\n      didReceiveUpdate = !0;\n    else {\n      if (\n        !checkScheduledUpdateOrContext(current, renderLanes) &&\n        0 === (workInProgress.flags & 128)\n      )\n        return (\n          (didReceiveUpdate = !1),\n          attemptEarlyBailoutIfNoScheduledUpdate(\n            current,\n            workInProgress,\n            renderLanes\n          )\n        );\n      didReceiveUpdate = 0 !== (current.flags & 131072) ? !0 : !1;\n    }\n  else\n    (didReceiveUpdate = !1),\n      isHydrating &&\n        0 !== (workInProgress.flags & 1048576) &&\n        pushTreeId(workInProgress, treeForkCount, workInProgress.index);\n  workInProgress.lanes = 0;\n  switch (workInProgress.tag) {\n    case 16:\n      a: {\n        current = workInProgress.pendingProps;\n        var lazyComponent = workInProgress.elementType,\n          init = lazyComponent._init;\n        lazyComponent = init(lazyComponent._payload);\n        workInProgress.type = lazyComponent;\n        if (\"function\" === typeof lazyComponent)\n          shouldConstruct(lazyComponent)\n            ? ((current = resolveClassComponentProps(lazyComponent, current)),\n              (workInProgress.tag = 1),\n              (workInProgress = updateClassComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )))\n            : ((workInProgress.tag = 0),\n              (workInProgress = updateFunctionComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              )));\n        else {\n          if (void 0 !== lazyComponent && null !== lazyComponent)\n            if (\n              ((init = lazyComponent.$$typeof), init === REACT_FORWARD_REF_TYPE)\n            ) {\n              workInProgress.tag = 11;\n              workInProgress = updateForwardRef(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            } else if (init === REACT_MEMO_TYPE) {\n              workInProgress.tag = 14;\n              workInProgress = updateMemoComponent(\n                null,\n                workInProgress,\n                lazyComponent,\n                current,\n                renderLanes\n              );\n              break a;\n            }\n          workInProgress =\n            getComponentNameFromType(lazyComponent) || lazyComponent;\n          throw Error(formatProdErrorMessage(306, workInProgress, \"\"));\n        }\n      }\n      return workInProgress;\n    case 0:\n      return updateFunctionComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 1:\n      return (\n        (lazyComponent = workInProgress.type),\n        (init = resolveClassComponentProps(\n          lazyComponent,\n          workInProgress.pendingProps\n        )),\n        updateClassComponent(\n          current,\n          workInProgress,\n          lazyComponent,\n          init,\n          renderLanes\n        )\n      );\n    case 3:\n      a: {\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        );\n        if (null === current) throw Error(formatProdErrorMessage(387));\n        var nextProps = workInProgress.pendingProps;\n        init = workInProgress.memoizedState;\n        lazyComponent = init.element;\n        cloneUpdateQueue(current, workInProgress);\n        processUpdateQueue(workInProgress, nextProps, null, renderLanes);\n        var nextState = workInProgress.memoizedState;\n        nextProps = nextState.cache;\n        pushProvider(workInProgress, CacheContext, nextProps);\n        nextProps !== init.cache &&\n          propagateContextChanges(\n            workInProgress,\n            [CacheContext],\n            renderLanes,\n            !0\n          );\n        suspendIfUpdateReadFromEntangledAsyncAction();\n        nextProps = nextState.element;\n        if (init.isDehydrated)\n          if (\n            ((init = {\n              element: nextProps,\n              isDehydrated: !1,\n              cache: nextState.cache\n            }),\n            (workInProgress.updateQueue.baseState = init),\n            (workInProgress.memoizedState = init),\n            workInProgress.flags & 256)\n          ) {\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              nextProps,\n              renderLanes\n            );\n            break a;\n          } else if (nextProps !== lazyComponent) {\n            lazyComponent = createCapturedValueAtFiber(\n              Error(formatProdErrorMessage(424)),\n              workInProgress\n            );\n            queueHydrationError(lazyComponent);\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              nextProps,\n              renderLanes\n            );\n            break a;\n          } else\n            for (\n              nextHydratableInstance = getNextHydratable(\n                workInProgress.stateNode.containerInfo.firstChild\n              ),\n                hydrationParentFiber = workInProgress,\n                isHydrating = !0,\n                hydrationErrors = null,\n                rootOrSingletonContext = !0,\n                renderLanes = mountChildFibers(\n                  workInProgress,\n                  null,\n                  nextProps,\n                  renderLanes\n                ),\n                workInProgress.child = renderLanes;\n              renderLanes;\n\n            )\n              (renderLanes.flags = (renderLanes.flags & -3) | 4096),\n                (renderLanes = renderLanes.sibling);\n        else {\n          resetHydrationState();\n          if (nextProps === lazyComponent) {\n            workInProgress = bailoutOnAlreadyFinishedWork(\n              current,\n              workInProgress,\n              renderLanes\n            );\n            break a;\n          }\n          reconcileChildren(current, workInProgress, nextProps, renderLanes);\n        }\n        workInProgress = workInProgress.child;\n      }\n      return workInProgress;\n    case 26:\n      return (\n        markRef(current, workInProgress),\n        null === current\n          ? (renderLanes = getResource(\n              workInProgress.type,\n              null,\n              workInProgress.pendingProps,\n              null\n            ))\n            ? (workInProgress.memoizedState = renderLanes)\n            : isHydrating ||\n              ((renderLanes = workInProgress.type),\n              (current = workInProgress.pendingProps),\n              (lazyComponent = getOwnerDocumentFromRootContainer(\n                rootInstanceStackCursor.current\n              ).createElement(renderLanes)),\n              (lazyComponent[internalInstanceKey] = workInProgress),\n              (lazyComponent[internalPropsKey] = current),\n              setInitialProperties(lazyComponent, renderLanes, current),\n              markNodeAsHoistable(lazyComponent),\n              (workInProgress.stateNode = lazyComponent))\n          : (workInProgress.memoizedState = getResource(\n              workInProgress.type,\n              current.memoizedProps,\n              workInProgress.pendingProps,\n              current.memoizedState\n            )),\n        null\n      );\n    case 27:\n      return (\n        pushHostContext(workInProgress),\n        null === current &&\n          isHydrating &&\n          ((lazyComponent = workInProgress.stateNode =\n            resolveSingletonInstance(\n              workInProgress.type,\n              workInProgress.pendingProps,\n              rootInstanceStackCursor.current\n            )),\n          (hydrationParentFiber = workInProgress),\n          (rootOrSingletonContext = !0),\n          (nextHydratableInstance = getNextHydratable(\n            lazyComponent.firstChild\n          ))),\n        (lazyComponent = workInProgress.pendingProps.children),\n        null !== current || isHydrating\n          ? reconcileChildren(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            )\n          : (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            )),\n        markRef(current, workInProgress),\n        workInProgress.child\n      );\n    case 5:\n      if (null === current && isHydrating) {\n        if ((init = lazyComponent = nextHydratableInstance))\n          (lazyComponent = canHydrateInstance(\n            lazyComponent,\n            workInProgress.type,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== lazyComponent\n              ? ((workInProgress.stateNode = lazyComponent),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = getNextHydratable(\n                  lazyComponent.firstChild\n                )),\n                (rootOrSingletonContext = !1),\n                (init = !0))\n              : (init = !1);\n        init || throwOnHydrationMismatch(workInProgress);\n      }\n      pushHostContext(workInProgress);\n      init = workInProgress.type;\n      nextProps = workInProgress.pendingProps;\n      nextState = null !== current ? current.memoizedProps : null;\n      lazyComponent = nextProps.children;\n      shouldSetTextContent(init, nextProps)\n        ? (lazyComponent = null)\n        : null !== nextState &&\n          shouldSetTextContent(init, nextState) &&\n          (workInProgress.flags |= 32);\n      null !== workInProgress.memoizedState &&\n        ((init = renderWithHooks(\n          current,\n          workInProgress,\n          TransitionAwareHostComponent,\n          null,\n          null,\n          renderLanes\n        )),\n        (HostTransitionContext._currentValue = init));\n      markRef(current, workInProgress);\n      reconcileChildren(current, workInProgress, lazyComponent, renderLanes);\n      return workInProgress.child;\n    case 6:\n      if (null === current && isHydrating) {\n        if ((current = renderLanes = nextHydratableInstance))\n          (renderLanes = canHydrateTextInstance(\n            renderLanes,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== renderLanes\n              ? ((workInProgress.stateNode = renderLanes),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = null),\n                (current = !0))\n              : (current = !1);\n        current || throwOnHydrationMismatch(workInProgress);\n      }\n      return null;\n    case 13:\n      return updateSuspenseComponent(current, workInProgress, renderLanes);\n    case 4:\n      return (\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        ),\n        (lazyComponent = workInProgress.pendingProps),\n        null === current\n          ? (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              lazyComponent,\n              renderLanes\n            ))\n          : reconcileChildren(\n              current,\n              workInProgress,\n              lazyComponent,\n              renderLanes\n            ),\n        workInProgress.child\n      );\n    case 11:\n      return updateForwardRef(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 7:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 8:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 12:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 10:\n      return (\n        (lazyComponent = workInProgress.pendingProps),\n        pushProvider(workInProgress, workInProgress.type, lazyComponent.value),\n        reconcileChildren(\n          current,\n          workInProgress,\n          lazyComponent.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 9:\n      return (\n        (init = workInProgress.type._context),\n        (lazyComponent = workInProgress.pendingProps.children),\n        prepareToReadContext(workInProgress),\n        (init = readContext(init)),\n        (lazyComponent = lazyComponent(init)),\n        (workInProgress.flags |= 1),\n        reconcileChildren(current, workInProgress, lazyComponent, renderLanes),\n        workInProgress.child\n      );\n    case 14:\n      return updateMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 15:\n      return updateSimpleMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 19:\n      return updateSuspenseListComponent(current, workInProgress, renderLanes);\n    case 22:\n      return updateOffscreenComponent(current, workInProgress, renderLanes);\n    case 24:\n      return (\n        prepareToReadContext(workInProgress),\n        (lazyComponent = readContext(CacheContext)),\n        null === current\n          ? ((init = peekCacheFromPool()),\n            null === init &&\n              ((init = workInProgressRoot),\n              (nextProps = createCache()),\n              (init.pooledCache = nextProps),\n              nextProps.refCount++,\n              null !== nextProps && (init.pooledCacheLanes |= renderLanes),\n              (init = nextProps)),\n            (workInProgress.memoizedState = {\n              parent: lazyComponent,\n              cache: init\n            }),\n            initializeUpdateQueue(workInProgress),\n            pushProvider(workInProgress, CacheContext, init))\n          : (0 !== (current.lanes & renderLanes) &&\n              (cloneUpdateQueue(current, workInProgress),\n              processUpdateQueue(workInProgress, null, null, renderLanes),\n              suspendIfUpdateReadFromEntangledAsyncAction()),\n            (init = current.memoizedState),\n            (nextProps = workInProgress.memoizedState),\n            init.parent !== lazyComponent\n              ? ((init = { parent: lazyComponent, cache: lazyComponent }),\n                (workInProgress.memoizedState = init),\n                0 === workInProgress.lanes &&\n                  (workInProgress.memoizedState =\n                    workInProgress.updateQueue.baseState =\n                      init),\n                pushProvider(workInProgress, CacheContext, lazyComponent))\n              : ((lazyComponent = nextProps.cache),\n                pushProvider(workInProgress, CacheContext, lazyComponent),\n                lazyComponent !== init.cache &&\n                  propagateContextChanges(\n                    workInProgress,\n                    [CacheContext],\n                    renderLanes,\n                    !0\n                  ))),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 29:\n      throw workInProgress.pendingProps;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nvar valueCursor = createCursor(null),\n  currentlyRenderingFiber = null,\n  lastContextDependency = null;\nfunction pushProvider(providerFiber, context, nextValue) {\n  push(valueCursor, context._currentValue);\n  context._currentValue = nextValue;\n}\nfunction popProvider(context) {\n  context._currentValue = valueCursor.current;\n  pop(valueCursor);\n}\nfunction scheduleContextWorkOnParentPath(parent, renderLanes, propagationRoot) {\n  for (; null !== parent; ) {\n    var alternate = parent.alternate;\n    (parent.childLanes & renderLanes) !== renderLanes\n      ? ((parent.childLanes |= renderLanes),\n        null !== alternate && (alternate.childLanes |= renderLanes))\n      : null !== alternate &&\n        (alternate.childLanes & renderLanes) !== renderLanes &&\n        (alternate.childLanes |= renderLanes);\n    if (parent === propagationRoot) break;\n    parent = parent.return;\n  }\n}\nfunction propagateContextChanges(\n  workInProgress,\n  contexts,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  var fiber = workInProgress.child;\n  null !== fiber && (fiber.return = workInProgress);\n  for (; null !== fiber; ) {\n    var list = fiber.dependencies;\n    if (null !== list) {\n      var nextFiber = fiber.child;\n      list = list.firstContext;\n      a: for (; null !== list; ) {\n        var dependency = list;\n        list = fiber;\n        for (var i = 0; i < contexts.length; i++)\n          if (dependency.context === contexts[i]) {\n            list.lanes |= renderLanes;\n            dependency = list.alternate;\n            null !== dependency && (dependency.lanes |= renderLanes);\n            scheduleContextWorkOnParentPath(\n              list.return,\n              renderLanes,\n              workInProgress\n            );\n            forcePropagateEntireTree || (nextFiber = null);\n            break a;\n          }\n        list = dependency.next;\n      }\n    } else if (18 === fiber.tag) {\n      nextFiber = fiber.return;\n      if (null === nextFiber) throw Error(formatProdErrorMessage(341));\n      nextFiber.lanes |= renderLanes;\n      list = nextFiber.alternate;\n      null !== list && (list.lanes |= renderLanes);\n      scheduleContextWorkOnParentPath(nextFiber, renderLanes, workInProgress);\n      nextFiber = null;\n    } else nextFiber = fiber.child;\n    if (null !== nextFiber) nextFiber.return = fiber;\n    else\n      for (nextFiber = fiber; null !== nextFiber; ) {\n        if (nextFiber === workInProgress) {\n          nextFiber = null;\n          break;\n        }\n        fiber = nextFiber.sibling;\n        if (null !== fiber) {\n          fiber.return = nextFiber.return;\n          nextFiber = fiber;\n          break;\n        }\n        nextFiber = nextFiber.return;\n      }\n    fiber = nextFiber;\n  }\n}\nfunction propagateParentContextChanges(\n  current,\n  workInProgress,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  current = null;\n  for (\n    var parent = workInProgress, isInsidePropagationBailout = !1;\n    null !== parent;\n\n  ) {\n    if (!isInsidePropagationBailout)\n      if (0 !== (parent.flags & 524288)) isInsidePropagationBailout = !0;\n      else if (0 !== (parent.flags & 262144)) break;\n    if (10 === parent.tag) {\n      var currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent = currentParent.memoizedProps;\n      if (null !== currentParent) {\n        var context = parent.type;\n        objectIs(parent.pendingProps.value, currentParent.value) ||\n          (null !== current ? current.push(context) : (current = [context]));\n      }\n    } else if (parent === hostTransitionProviderCursor.current) {\n      currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent.memoizedState.memoizedState !==\n        parent.memoizedState.memoizedState &&\n        (null !== current\n          ? current.push(HostTransitionContext)\n          : (current = [HostTransitionContext]));\n    }\n    parent = parent.return;\n  }\n  null !== current &&\n    propagateContextChanges(\n      workInProgress,\n      current,\n      renderLanes,\n      forcePropagateEntireTree\n    );\n  workInProgress.flags |= 262144;\n}\nfunction checkIfContextChanged(currentDependencies) {\n  for (\n    currentDependencies = currentDependencies.firstContext;\n    null !== currentDependencies;\n\n  ) {\n    if (\n      !objectIs(\n        currentDependencies.context._currentValue,\n        currentDependencies.memoizedValue\n      )\n    )\n      return !0;\n    currentDependencies = currentDependencies.next;\n  }\n  return !1;\n}\nfunction prepareToReadContext(workInProgress) {\n  currentlyRenderingFiber = workInProgress;\n  lastContextDependency = null;\n  workInProgress = workInProgress.dependencies;\n  null !== workInProgress && (workInProgress.firstContext = null);\n}\nfunction readContext(context) {\n  return readContextForConsumer(currentlyRenderingFiber, context);\n}\nfunction readContextDuringReconciliation(consumer, context) {\n  null === currentlyRenderingFiber && prepareToReadContext(consumer);\n  return readContextForConsumer(consumer, context);\n}\nfunction readContextForConsumer(consumer, context) {\n  var value = context._currentValue;\n  context = { context: context, memoizedValue: value, next: null };\n  if (null === lastContextDependency) {\n    if (null === consumer) throw Error(formatProdErrorMessage(308));\n    lastContextDependency = context;\n    consumer.dependencies = { lanes: 0, firstContext: context };\n    consumer.flags |= 524288;\n  } else lastContextDependency = lastContextDependency.next = context;\n  return value;\n}\nvar hasForceUpdate = !1;\nfunction initializeUpdateQueue(fiber) {\n  fiber.updateQueue = {\n    baseState: fiber.memoizedState,\n    firstBaseUpdate: null,\n    lastBaseUpdate: null,\n    shared: { pending: null, lanes: 0, hiddenCallbacks: null },\n    callbacks: null\n  };\n}\nfunction cloneUpdateQueue(current, workInProgress) {\n  current = current.updateQueue;\n  workInProgress.updateQueue === current &&\n    (workInProgress.updateQueue = {\n      baseState: current.baseState,\n      firstBaseUpdate: current.firstBaseUpdate,\n      lastBaseUpdate: current.lastBaseUpdate,\n      shared: current.shared,\n      callbacks: null\n    });\n}\nfunction createUpdate(lane) {\n  return { lane: lane, tag: 0, payload: null, callback: null, next: null };\n}\nfunction enqueueUpdate(fiber, update, lane) {\n  var updateQueue = fiber.updateQueue;\n  if (null === updateQueue) return null;\n  updateQueue = updateQueue.shared;\n  if (0 !== (executionContext & 2)) {\n    var pending = updateQueue.pending;\n    null === pending\n      ? (update.next = update)\n      : ((update.next = pending.next), (pending.next = update));\n    updateQueue.pending = update;\n    update = getRootForUpdatedFiber(fiber);\n    markUpdateLaneFromFiberToRoot(fiber, null, lane);\n    return update;\n  }\n  enqueueUpdate$1(fiber, updateQueue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction entangleTransitions(root, fiber, lane) {\n  fiber = fiber.updateQueue;\n  if (null !== fiber && ((fiber = fiber.shared), 0 !== (lane & 4194176))) {\n    var queueLanes = fiber.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    fiber.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nfunction enqueueCapturedUpdate(workInProgress, capturedUpdate) {\n  var queue = workInProgress.updateQueue,\n    current = workInProgress.alternate;\n  if (\n    null !== current &&\n    ((current = current.updateQueue), queue === current)\n  ) {\n    var newFirst = null,\n      newLast = null;\n    queue = queue.firstBaseUpdate;\n    if (null !== queue) {\n      do {\n        var clone = {\n          lane: queue.lane,\n          tag: queue.tag,\n          payload: queue.payload,\n          callback: null,\n          next: null\n        };\n        null === newLast\n          ? (newFirst = newLast = clone)\n          : (newLast = newLast.next = clone);\n        queue = queue.next;\n      } while (null !== queue);\n      null === newLast\n        ? (newFirst = newLast = capturedUpdate)\n        : (newLast = newLast.next = capturedUpdate);\n    } else newFirst = newLast = capturedUpdate;\n    queue = {\n      baseState: current.baseState,\n      firstBaseUpdate: newFirst,\n      lastBaseUpdate: newLast,\n      shared: current.shared,\n      callbacks: current.callbacks\n    };\n    workInProgress.updateQueue = queue;\n    return;\n  }\n  workInProgress = queue.lastBaseUpdate;\n  null === workInProgress\n    ? (queue.firstBaseUpdate = capturedUpdate)\n    : (workInProgress.next = capturedUpdate);\n  queue.lastBaseUpdate = capturedUpdate;\n}\nvar didReadFromEntangledAsyncAction = !1;\nfunction suspendIfUpdateReadFromEntangledAsyncAction() {\n  if (didReadFromEntangledAsyncAction) {\n    var entangledActionThenable = currentEntangledActionThenable;\n    if (null !== entangledActionThenable) throw entangledActionThenable;\n  }\n}\nfunction processUpdateQueue(\n  workInProgress$jscomp$0,\n  props,\n  instance$jscomp$0,\n  renderLanes\n) {\n  didReadFromEntangledAsyncAction = !1;\n  var queue = workInProgress$jscomp$0.updateQueue;\n  hasForceUpdate = !1;\n  var firstBaseUpdate = queue.firstBaseUpdate,\n    lastBaseUpdate = queue.lastBaseUpdate,\n    pendingQueue = queue.shared.pending;\n  if (null !== pendingQueue) {\n    queue.shared.pending = null;\n    var lastPendingUpdate = pendingQueue,\n      firstPendingUpdate = lastPendingUpdate.next;\n    lastPendingUpdate.next = null;\n    null === lastBaseUpdate\n      ? (firstBaseUpdate = firstPendingUpdate)\n      : (lastBaseUpdate.next = firstPendingUpdate);\n    lastBaseUpdate = lastPendingUpdate;\n    var current = workInProgress$jscomp$0.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      (pendingQueue = current.lastBaseUpdate),\n      pendingQueue !== lastBaseUpdate &&\n        (null === pendingQueue\n          ? (current.firstBaseUpdate = firstPendingUpdate)\n          : (pendingQueue.next = firstPendingUpdate),\n        (current.lastBaseUpdate = lastPendingUpdate)));\n  }\n  if (null !== firstBaseUpdate) {\n    var newState = queue.baseState;\n    lastBaseUpdate = 0;\n    current = firstPendingUpdate = lastPendingUpdate = null;\n    pendingQueue = firstBaseUpdate;\n    do {\n      var updateLane = pendingQueue.lane & -536870913,\n        isHiddenUpdate = updateLane !== pendingQueue.lane;\n      if (\n        isHiddenUpdate\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        0 !== updateLane &&\n          updateLane === currentEntangledLane &&\n          (didReadFromEntangledAsyncAction = !0);\n        null !== current &&\n          (current = current.next =\n            {\n              lane: 0,\n              tag: pendingQueue.tag,\n              payload: pendingQueue.payload,\n              callback: null,\n              next: null\n            });\n        a: {\n          var workInProgress = workInProgress$jscomp$0,\n            update = pendingQueue;\n          updateLane = props;\n          var instance = instance$jscomp$0;\n          switch (update.tag) {\n            case 1:\n              workInProgress = update.payload;\n              if (\"function\" === typeof workInProgress) {\n                newState = workInProgress.call(instance, newState, updateLane);\n                break a;\n              }\n              newState = workInProgress;\n              break a;\n            case 3:\n              workInProgress.flags = (workInProgress.flags & -65537) | 128;\n            case 0:\n              workInProgress = update.payload;\n              updateLane =\n                \"function\" === typeof workInProgress\n                  ? workInProgress.call(instance, newState, updateLane)\n                  : workInProgress;\n              if (null === updateLane || void 0 === updateLane) break a;\n              newState = assign({}, newState, updateLane);\n              break a;\n            case 2:\n              hasForceUpdate = !0;\n          }\n        }\n        updateLane = pendingQueue.callback;\n        null !== updateLane &&\n          ((workInProgress$jscomp$0.flags |= 64),\n          isHiddenUpdate && (workInProgress$jscomp$0.flags |= 8192),\n          (isHiddenUpdate = queue.callbacks),\n          null === isHiddenUpdate\n            ? (queue.callbacks = [updateLane])\n            : isHiddenUpdate.push(updateLane));\n      } else\n        (isHiddenUpdate = {\n          lane: updateLane,\n          tag: pendingQueue.tag,\n          payload: pendingQueue.payload,\n          callback: pendingQueue.callback,\n          next: null\n        }),\n          null === current\n            ? ((firstPendingUpdate = current = isHiddenUpdate),\n              (lastPendingUpdate = newState))\n            : (current = current.next = isHiddenUpdate),\n          (lastBaseUpdate |= updateLane);\n      pendingQueue = pendingQueue.next;\n      if (null === pendingQueue)\n        if (((pendingQueue = queue.shared.pending), null === pendingQueue))\n          break;\n        else\n          (isHiddenUpdate = pendingQueue),\n            (pendingQueue = isHiddenUpdate.next),\n            (isHiddenUpdate.next = null),\n            (queue.lastBaseUpdate = isHiddenUpdate),\n            (queue.shared.pending = null);\n    } while (1);\n    null === current && (lastPendingUpdate = newState);\n    queue.baseState = lastPendingUpdate;\n    queue.firstBaseUpdate = firstPendingUpdate;\n    queue.lastBaseUpdate = current;\n    null === firstBaseUpdate && (queue.shared.lanes = 0);\n    workInProgressRootSkippedLanes |= lastBaseUpdate;\n    workInProgress$jscomp$0.lanes = lastBaseUpdate;\n    workInProgress$jscomp$0.memoizedState = newState;\n  }\n}\nfunction callCallback(callback, context) {\n  if (\"function\" !== typeof callback)\n    throw Error(formatProdErrorMessage(191, callback));\n  callback.call(context);\n}\nfunction commitCallbacks(updateQueue, context) {\n  var callbacks = updateQueue.callbacks;\n  if (null !== callbacks)\n    for (\n      updateQueue.callbacks = null, updateQueue = 0;\n      updateQueue < callbacks.length;\n      updateQueue++\n    )\n      callCallback(callbacks[updateQueue], context);\n}\nfunction commitHookEffectListMount(flags, finishedWork) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          lastEffect = void 0;\n          var create = updateQueue.create,\n            inst = updateQueue.inst;\n          lastEffect = create();\n          inst.destroy = lastEffect;\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHookEffectListUnmount(\n  flags,\n  finishedWork,\n  nearestMountedAncestor$jscomp$0\n) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          var inst = updateQueue.inst,\n            destroy = inst.destroy;\n          if (void 0 !== destroy) {\n            inst.destroy = void 0;\n            lastEffect = finishedWork;\n            var nearestMountedAncestor = nearestMountedAncestor$jscomp$0;\n            try {\n              destroy();\n            } catch (error) {\n              captureCommitPhaseError(\n                lastEffect,\n                nearestMountedAncestor,\n                error\n              );\n            }\n          }\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitClassCallbacks(finishedWork) {\n  var updateQueue = finishedWork.updateQueue;\n  if (null !== updateQueue) {\n    var instance = finishedWork.stateNode;\n    try {\n      commitCallbacks(updateQueue, instance);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction safelyCallComponentWillUnmount(\n  current,\n  nearestMountedAncestor,\n  instance\n) {\n  instance.props = resolveClassComponentProps(\n    current.type,\n    current.memoizedProps\n  );\n  instance.state = current.memoizedState;\n  try {\n    instance.componentWillUnmount();\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyAttachRef(current, nearestMountedAncestor) {\n  try {\n    var ref = current.ref;\n    if (null !== ref) {\n      var instance = current.stateNode;\n      switch (current.tag) {\n        case 26:\n        case 27:\n        case 5:\n          var instanceToUse = instance;\n          break;\n        default:\n          instanceToUse = instance;\n      }\n      \"function\" === typeof ref\n        ? (current.refCleanup = ref(instanceToUse))\n        : (ref.current = instanceToUse);\n    }\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyDetachRef(current, nearestMountedAncestor) {\n  var ref = current.ref,\n    refCleanup = current.refCleanup;\n  if (null !== ref)\n    if (\"function\" === typeof refCleanup)\n      try {\n        refCleanup();\n      } catch (error) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error);\n      } finally {\n        (current.refCleanup = null),\n          (current = current.alternate),\n          null != current && (current.refCleanup = null);\n      }\n    else if (\"function\" === typeof ref)\n      try {\n        ref(null);\n      } catch (error$112) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error$112);\n      }\n    else ref.current = null;\n}\nfunction commitHostMount(finishedWork) {\n  var type = finishedWork.type,\n    props = finishedWork.memoizedProps,\n    instance = finishedWork.stateNode;\n  try {\n    a: switch (type) {\n      case \"button\":\n      case \"input\":\n      case \"select\":\n      case \"textarea\":\n        props.autoFocus && instance.focus();\n        break a;\n      case \"img\":\n        props.src\n          ? (instance.src = props.src)\n          : props.srcSet && (instance.srcset = props.srcSet);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHostUpdate(finishedWork, newProps, oldProps) {\n  try {\n    var domElement = finishedWork.stateNode;\n    updateProperties(domElement, finishedWork.type, oldProps, newProps);\n    domElement[internalPropsKey] = newProps;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction isHostParent(fiber) {\n  return (\n    5 === fiber.tag ||\n    3 === fiber.tag ||\n    26 === fiber.tag ||\n    27 === fiber.tag ||\n    4 === fiber.tag\n  );\n}\nfunction getHostSibling(fiber) {\n  a: for (;;) {\n    for (; null === fiber.sibling; ) {\n      if (null === fiber.return || isHostParent(fiber.return)) return null;\n      fiber = fiber.return;\n    }\n    fiber.sibling.return = fiber.return;\n    for (\n      fiber = fiber.sibling;\n      5 !== fiber.tag &&\n      6 !== fiber.tag &&\n      27 !== fiber.tag &&\n      18 !== fiber.tag;\n\n    ) {\n      if (fiber.flags & 2) continue a;\n      if (null === fiber.child || 4 === fiber.tag) continue a;\n      else (fiber.child.return = fiber), (fiber = fiber.child);\n    }\n    if (!(fiber.flags & 2)) return fiber.stateNode;\n  }\n}\nfunction insertOrAppendPlacementNodeIntoContainer(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before\n        ? 8 === parent.nodeType\n          ? parent.parentNode.insertBefore(node, before)\n          : parent.insertBefore(node, before)\n        : (8 === parent.nodeType\n            ? ((before = parent.parentNode), before.insertBefore(node, parent))\n            : ((before = parent), before.appendChild(node)),\n          (parent = parent._reactRootContainer),\n          (null !== parent && void 0 !== parent) ||\n            null !== before.onclick ||\n            (before.onclick = noop$1));\n  else if (4 !== tag && 27 !== tag && ((node = node.child), null !== node))\n    for (\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        (node = node.sibling);\n}\nfunction insertOrAppendPlacementNode(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before ? parent.insertBefore(node, before) : parent.appendChild(node);\n  else if (4 !== tag && 27 !== tag && ((node = node.child), null !== node))\n    for (\n      insertOrAppendPlacementNode(node, before, parent), node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNode(node, before, parent), (node = node.sibling);\n}\nvar offscreenSubtreeIsHidden = !1,\n  offscreenSubtreeWasHidden = !1,\n  needsFormReset = !1,\n  PossiblyWeakSet = \"function\" === typeof WeakSet ? WeakSet : Set,\n  nextEffect = null,\n  shouldFireAfterActiveInstanceBlur = !1;\nfunction commitBeforeMutationEffects(root, firstChild) {\n  root = root.containerInfo;\n  eventsEnabled = _enabled;\n  root = getActiveElementDeep(root);\n  if (hasSelectionCapabilities(root)) {\n    if (\"selectionStart\" in root)\n      var JSCompiler_temp = {\n        start: root.selectionStart,\n        end: root.selectionEnd\n      };\n    else\n      a: {\n        JSCompiler_temp =\n          ((JSCompiler_temp = root.ownerDocument) &&\n            JSCompiler_temp.defaultView) ||\n          window;\n        var selection =\n          JSCompiler_temp.getSelection && JSCompiler_temp.getSelection();\n        if (selection && 0 !== selection.rangeCount) {\n          JSCompiler_temp = selection.anchorNode;\n          var anchorOffset = selection.anchorOffset,\n            focusNode = selection.focusNode;\n          selection = selection.focusOffset;\n          try {\n            JSCompiler_temp.nodeType, focusNode.nodeType;\n          } catch (e$20) {\n            JSCompiler_temp = null;\n            break a;\n          }\n          var length = 0,\n            start = -1,\n            end = -1,\n            indexWithinAnchor = 0,\n            indexWithinFocus = 0,\n            node = root,\n            parentNode = null;\n          b: for (;;) {\n            for (var next; ; ) {\n              node !== JSCompiler_temp ||\n                (0 !== anchorOffset && 3 !== node.nodeType) ||\n                (start = length + anchorOffset);\n              node !== focusNode ||\n                (0 !== selection && 3 !== node.nodeType) ||\n                (end = length + selection);\n              3 === node.nodeType && (length += node.nodeValue.length);\n              if (null === (next = node.firstChild)) break;\n              parentNode = node;\n              node = next;\n            }\n            for (;;) {\n              if (node === root) break b;\n              parentNode === JSCompiler_temp &&\n                ++indexWithinAnchor === anchorOffset &&\n                (start = length);\n              parentNode === focusNode &&\n                ++indexWithinFocus === selection &&\n                (end = length);\n              if (null !== (next = node.nextSibling)) break;\n              node = parentNode;\n              parentNode = node.parentNode;\n            }\n            node = next;\n          }\n          JSCompiler_temp =\n            -1 === start || -1 === end ? null : { start: start, end: end };\n        } else JSCompiler_temp = null;\n      }\n    JSCompiler_temp = JSCompiler_temp || { start: 0, end: 0 };\n  } else JSCompiler_temp = null;\n  selectionInformation = { focusedElem: root, selectionRange: JSCompiler_temp };\n  _enabled = !1;\n  for (nextEffect = firstChild; null !== nextEffect; )\n    if (\n      ((firstChild = nextEffect),\n      (root = firstChild.child),\n      0 !== (firstChild.subtreeFlags & 1028) && null !== root)\n    )\n      (root.return = firstChild), (nextEffect = root);\n    else\n      for (; null !== nextEffect; ) {\n        firstChild = nextEffect;\n        focusNode = firstChild.alternate;\n        root = firstChild.flags;\n        switch (firstChild.tag) {\n          case 0:\n            break;\n          case 11:\n          case 15:\n            break;\n          case 1:\n            if (0 !== (root & 1024) && null !== focusNode) {\n              root = void 0;\n              JSCompiler_temp = firstChild;\n              anchorOffset = focusNode.memoizedProps;\n              focusNode = focusNode.memoizedState;\n              selection = JSCompiler_temp.stateNode;\n              try {\n                var resolvedPrevProps = resolveClassComponentProps(\n                  JSCompiler_temp.type,\n                  anchorOffset,\n                  JSCompiler_temp.elementType === JSCompiler_temp.type\n                );\n                root = selection.getSnapshotBeforeUpdate(\n                  resolvedPrevProps,\n                  focusNode\n                );\n                selection.__reactInternalSnapshotBeforeUpdate = root;\n              } catch (error) {\n                captureCommitPhaseError(\n                  JSCompiler_temp,\n                  JSCompiler_temp.return,\n                  error\n                );\n              }\n            }\n            break;\n          case 3:\n            if (0 !== (root & 1024))\n              if (\n                ((root = firstChild.stateNode.containerInfo),\n                (JSCompiler_temp = root.nodeType),\n                9 === JSCompiler_temp)\n              )\n                clearContainerSparingly(root);\n              else if (1 === JSCompiler_temp)\n                switch (root.nodeName) {\n                  case \"HEAD\":\n                  case \"HTML\":\n                  case \"BODY\":\n                    clearContainerSparingly(root);\n                    break;\n                  default:\n                    root.textContent = \"\";\n                }\n            break;\n          case 5:\n          case 26:\n          case 27:\n          case 6:\n          case 4:\n          case 17:\n            break;\n          default:\n            if (0 !== (root & 1024)) throw Error(formatProdErrorMessage(163));\n        }\n        root = firstChild.sibling;\n        if (null !== root) {\n          root.return = firstChild.return;\n          nextEffect = root;\n          break;\n        }\n        nextEffect = firstChild.return;\n      }\n  resolvedPrevProps = shouldFireAfterActiveInstanceBlur;\n  shouldFireAfterActiveInstanceBlur = !1;\n  return resolvedPrevProps;\n}\nfunction commitLayoutEffectOnFiber(finishedRoot, current, finishedWork) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitHookEffectListMount(5, finishedWork);\n      break;\n    case 1:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 4)\n        if (((finishedRoot = finishedWork.stateNode), null === current))\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(finishedWork, finishedWork.return, error);\n          }\n        else {\n          var prevProps = resolveClassComponentProps(\n            finishedWork.type,\n            current.memoizedProps\n          );\n          current = current.memoizedState;\n          try {\n            finishedRoot.componentDidUpdate(\n              prevProps,\n              current,\n              finishedRoot.__reactInternalSnapshotBeforeUpdate\n            );\n          } catch (error$111) {\n            captureCommitPhaseError(\n              finishedWork,\n              finishedWork.return,\n              error$111\n            );\n          }\n        }\n      flags & 64 && commitClassCallbacks(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 64 && ((flags = finishedWork.updateQueue), null !== flags)) {\n        finishedRoot = null;\n        if (null !== finishedWork.child)\n          switch (finishedWork.child.tag) {\n            case 27:\n            case 5:\n              finishedRoot = finishedWork.child.stateNode;\n              break;\n            case 1:\n              finishedRoot = finishedWork.child.stateNode;\n          }\n        try {\n          commitCallbacks(flags, finishedRoot);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 26:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 27:\n    case 5:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      null === current && flags & 4 && commitHostMount(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 12:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n      break;\n    case 22:\n      prevProps =\n        null !== finishedWork.memoizedState || offscreenSubtreeIsHidden;\n      if (!prevProps) {\n        current =\n          (null !== current && null !== current.memoizedState) ||\n          offscreenSubtreeWasHidden;\n        var prevOffscreenSubtreeIsHidden = offscreenSubtreeIsHidden,\n          prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n        offscreenSubtreeIsHidden = prevProps;\n        (offscreenSubtreeWasHidden = current) && !prevOffscreenSubtreeWasHidden\n          ? recursivelyTraverseReappearLayoutEffects(\n              finishedRoot,\n              finishedWork,\n              0 !== (finishedWork.subtreeFlags & 8772)\n            )\n          : recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n        offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden;\n        offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      }\n      flags & 512 &&\n        (\"manual\" === finishedWork.memoizedProps.mode\n          ? safelyAttachRef(finishedWork, finishedWork.return)\n          : safelyDetachRef(finishedWork, finishedWork.return));\n      break;\n    default:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n  }\n}\nfunction detachFiberAfterEffects(fiber) {\n  var alternate = fiber.alternate;\n  null !== alternate &&\n    ((fiber.alternate = null), detachFiberAfterEffects(alternate));\n  fiber.child = null;\n  fiber.deletions = null;\n  fiber.sibling = null;\n  5 === fiber.tag &&\n    ((alternate = fiber.stateNode),\n    null !== alternate && detachDeletedInstance(alternate));\n  fiber.stateNode = null;\n  fiber.return = null;\n  fiber.dependencies = null;\n  fiber.memoizedProps = null;\n  fiber.memoizedState = null;\n  fiber.pendingProps = null;\n  fiber.stateNode = null;\n  fiber.updateQueue = null;\n}\nvar hostParent = null,\n  hostParentIsContainer = !1;\nfunction recursivelyTraverseDeletionEffects(\n  finishedRoot,\n  nearestMountedAncestor,\n  parent\n) {\n  for (parent = parent.child; null !== parent; )\n    commitDeletionEffectsOnFiber(finishedRoot, nearestMountedAncestor, parent),\n      (parent = parent.sibling);\n}\nfunction commitDeletionEffectsOnFiber(\n  finishedRoot,\n  nearestMountedAncestor,\n  deletedFiber\n) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberUnmount)\n    try {\n      injectedHook.onCommitFiberUnmount(rendererID, deletedFiber);\n    } catch (err) {}\n  switch (deletedFiber.tag) {\n    case 26:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber.memoizedState\n        ? deletedFiber.memoizedState.count--\n        : deletedFiber.stateNode &&\n          ((deletedFiber = deletedFiber.stateNode),\n          deletedFiber.parentNode.removeChild(deletedFiber));\n      break;\n    case 27:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      var prevHostParent = hostParent,\n        prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber = deletedFiber.stateNode;\n      for (\n        nearestMountedAncestor = deletedFiber.attributes;\n        nearestMountedAncestor.length;\n\n      )\n        deletedFiber.removeAttributeNode(nearestMountedAncestor[0]);\n      detachDeletedInstance(deletedFiber);\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 5:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n    case 6:\n      prevHostParentIsContainer = hostParent;\n      var prevHostParentIsContainer$119 = hostParentIsContainer;\n      hostParent = null;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParentIsContainer;\n      hostParentIsContainer = prevHostParentIsContainer$119;\n      if (null !== hostParent)\n        if (hostParentIsContainer)\n          try {\n            (finishedRoot = hostParent),\n              (prevHostParent = deletedFiber.stateNode),\n              8 === finishedRoot.nodeType\n                ? finishedRoot.parentNode.removeChild(prevHostParent)\n                : finishedRoot.removeChild(prevHostParent);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n        else\n          try {\n            hostParent.removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n      break;\n    case 18:\n      null !== hostParent &&\n        (hostParentIsContainer\n          ? ((nearestMountedAncestor = hostParent),\n            (deletedFiber = deletedFiber.stateNode),\n            8 === nearestMountedAncestor.nodeType\n              ? clearSuspenseBoundary(\n                  nearestMountedAncestor.parentNode,\n                  deletedFiber\n                )\n              : 1 === nearestMountedAncestor.nodeType &&\n                clearSuspenseBoundary(nearestMountedAncestor, deletedFiber),\n            retryIfBlockedOn(nearestMountedAncestor))\n          : clearSuspenseBoundary(hostParent, deletedFiber.stateNode));\n      break;\n    case 4:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode.containerInfo;\n      hostParentIsContainer = !0;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(2, deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(4, deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 1:\n      offscreenSubtreeWasHidden ||\n        (safelyDetachRef(deletedFiber, nearestMountedAncestor),\n        (prevHostParent = deletedFiber.stateNode),\n        \"function\" === typeof prevHostParent.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            deletedFiber,\n            nearestMountedAncestor,\n            prevHostParent\n          ));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 21:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 22:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden =\n        (prevHostParent = offscreenSubtreeWasHidden) ||\n        null !== deletedFiber.memoizedState;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      offscreenSubtreeWasHidden = prevHostParent;\n      break;\n    default:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n  }\n}\nfunction commitSuspenseHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState),\n      null !== finishedRoot &&\n        ((finishedRoot = finishedRoot.dehydrated), null !== finishedRoot)))\n  )\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n}\nfunction getRetryCache(finishedWork) {\n  switch (finishedWork.tag) {\n    case 13:\n    case 19:\n      var retryCache = finishedWork.stateNode;\n      null === retryCache &&\n        (retryCache = finishedWork.stateNode = new PossiblyWeakSet());\n      return retryCache;\n    case 22:\n      return (\n        (finishedWork = finishedWork.stateNode),\n        (retryCache = finishedWork._retryCache),\n        null === retryCache &&\n          (retryCache = finishedWork._retryCache = new PossiblyWeakSet()),\n        retryCache\n      );\n    default:\n      throw Error(formatProdErrorMessage(435, finishedWork.tag));\n  }\n}\nfunction attachSuspenseRetryListeners(finishedWork, wakeables) {\n  var retryCache = getRetryCache(finishedWork);\n  wakeables.forEach(function (wakeable) {\n    var retry = resolveRetryWakeable.bind(null, finishedWork, wakeable);\n    retryCache.has(wakeable) ||\n      (retryCache.add(wakeable), wakeable.then(retry, retry));\n  });\n}\nfunction recursivelyTraverseMutationEffects(root$jscomp$0, parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (null !== deletions)\n    for (var i = 0; i < deletions.length; i++) {\n      var childToDelete = deletions[i],\n        root = root$jscomp$0,\n        returnFiber = parentFiber,\n        parent = returnFiber;\n      a: for (; null !== parent; ) {\n        switch (parent.tag) {\n          case 27:\n          case 5:\n            hostParent = parent.stateNode;\n            hostParentIsContainer = !1;\n            break a;\n          case 3:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n          case 4:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n        }\n        parent = parent.return;\n      }\n      if (null === hostParent) throw Error(formatProdErrorMessage(160));\n      commitDeletionEffectsOnFiber(root, returnFiber, childToDelete);\n      hostParent = null;\n      hostParentIsContainer = !1;\n      root = childToDelete.alternate;\n      null !== root && (root.return = null);\n      childToDelete.return = null;\n    }\n  if (parentFiber.subtreeFlags & 13878)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitMutationEffectsOnFiber(parentFiber, root$jscomp$0),\n        (parentFiber = parentFiber.sibling);\n}\nvar currentHoistableRoot = null;\nfunction commitMutationEffectsOnFiber(finishedWork, root) {\n  var current = finishedWork.alternate,\n    flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        (commitHookEffectListUnmount(3, finishedWork, finishedWork.return),\n        commitHookEffectListMount(3, finishedWork),\n        commitHookEffectListUnmount(5, finishedWork, finishedWork.return));\n      break;\n    case 1:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      flags & 64 &&\n        offscreenSubtreeIsHidden &&\n        ((finishedWork = finishedWork.updateQueue),\n        null !== finishedWork &&\n          ((flags = finishedWork.callbacks),\n          null !== flags &&\n            ((current = finishedWork.shared.hiddenCallbacks),\n            (finishedWork.shared.hiddenCallbacks =\n              null === current ? flags : current.concat(flags)))));\n      break;\n    case 26:\n      var hoistableRoot = currentHoistableRoot;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (flags & 4) {\n        var currentResource = null !== current ? current.memoizedState : null;\n        flags = finishedWork.memoizedState;\n        if (null === current)\n          if (null === flags)\n            if (null === finishedWork.stateNode) {\n              a: {\n                flags = finishedWork.type;\n                current = finishedWork.memoizedProps;\n                hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n                b: switch (flags) {\n                  case \"title\":\n                    currentResource =\n                      hoistableRoot.getElementsByTagName(\"title\")[0];\n                    if (\n                      !currentResource ||\n                      currentResource[internalHoistableMarker] ||\n                      currentResource[internalInstanceKey] ||\n                      \"http://www.w3.org/2000/svg\" ===\n                        currentResource.namespaceURI ||\n                      currentResource.hasAttribute(\"itemprop\")\n                    )\n                      (currentResource = hoistableRoot.createElement(flags)),\n                        hoistableRoot.head.insertBefore(\n                          currentResource,\n                          hoistableRoot.querySelector(\"head > title\")\n                        );\n                    setInitialProperties(currentResource, flags, current);\n                    currentResource[internalInstanceKey] = finishedWork;\n                    markNodeAsHoistable(currentResource);\n                    flags = currentResource;\n                    break a;\n                  case \"link\":\n                    var maybeNodes = getHydratableHoistableCache(\n                      \"link\",\n                      \"href\",\n                      hoistableRoot\n                    ).get(flags + (current.href || \"\"));\n                    if (maybeNodes)\n                      for (var i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"href\") ===\n                            (null == current.href ? null : current.href) &&\n                            currentResource.getAttribute(\"rel\") ===\n                              (null == current.rel ? null : current.rel) &&\n                            currentResource.getAttribute(\"title\") ===\n                              (null == current.title ? null : current.title) &&\n                            currentResource.getAttribute(\"crossorigin\") ===\n                              (null == current.crossOrigin\n                                ? null\n                                : current.crossOrigin))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  case \"meta\":\n                    if (\n                      (maybeNodes = getHydratableHoistableCache(\n                        \"meta\",\n                        \"content\",\n                        hoistableRoot\n                      ).get(flags + (current.content || \"\")))\n                    )\n                      for (i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"content\") ===\n                            (null == current.content\n                              ? null\n                              : \"\" + current.content) &&\n                            currentResource.getAttribute(\"name\") ===\n                              (null == current.name ? null : current.name) &&\n                            currentResource.getAttribute(\"property\") ===\n                              (null == current.property\n                                ? null\n                                : current.property) &&\n                            currentResource.getAttribute(\"http-equiv\") ===\n                              (null == current.httpEquiv\n                                ? null\n                                : current.httpEquiv) &&\n                            currentResource.getAttribute(\"charset\") ===\n                              (null == current.charSet\n                                ? null\n                                : current.charSet))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  default:\n                    throw Error(formatProdErrorMessage(468, flags));\n                }\n                currentResource[internalInstanceKey] = finishedWork;\n                markNodeAsHoistable(currentResource);\n                flags = currentResource;\n              }\n              finishedWork.stateNode = flags;\n            } else\n              mountHoistable(\n                hoistableRoot,\n                finishedWork.type,\n                finishedWork.stateNode\n              );\n          else\n            finishedWork.stateNode = acquireResource(\n              hoistableRoot,\n              flags,\n              finishedWork.memoizedProps\n            );\n        else\n          currentResource !== flags\n            ? (null === currentResource\n                ? null !== current.stateNode &&\n                  ((current = current.stateNode),\n                  current.parentNode.removeChild(current))\n                : currentResource.count--,\n              null === flags\n                ? mountHoistable(\n                    hoistableRoot,\n                    finishedWork.type,\n                    finishedWork.stateNode\n                  )\n                : acquireResource(\n                    hoistableRoot,\n                    flags,\n                    finishedWork.memoizedProps\n                  ))\n            : null === flags &&\n              null !== finishedWork.stateNode &&\n              commitHostUpdate(\n                finishedWork,\n                finishedWork.memoizedProps,\n                current.memoizedProps\n              );\n      }\n      break;\n    case 27:\n      if (flags & 4 && null === finishedWork.alternate) {\n        hoistableRoot = finishedWork.stateNode;\n        currentResource = finishedWork.memoizedProps;\n        try {\n          for (var node = hoistableRoot.firstChild; node; ) {\n            var nextNode = node.nextSibling,\n              nodeName = node.nodeName;\n            node[internalHoistableMarker] ||\n              \"HEAD\" === nodeName ||\n              \"BODY\" === nodeName ||\n              \"SCRIPT\" === nodeName ||\n              \"STYLE\" === nodeName ||\n              (\"LINK\" === nodeName &&\n                \"stylesheet\" === node.rel.toLowerCase()) ||\n              hoistableRoot.removeChild(node);\n            node = nextNode;\n          }\n          for (\n            var type = finishedWork.type, attributes = hoistableRoot.attributes;\n            attributes.length;\n\n          )\n            hoistableRoot.removeAttributeNode(attributes[0]);\n          setInitialProperties(hoistableRoot, type, currentResource);\n          hoistableRoot[internalInstanceKey] = finishedWork;\n          hoistableRoot[internalPropsKey] = currentResource;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n    case 5:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (finishedWork.flags & 32) {\n        hoistableRoot = finishedWork.stateNode;\n        try {\n          setTextContent(hoistableRoot, \"\");\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      flags & 4 &&\n        null != finishedWork.stateNode &&\n        ((hoistableRoot = finishedWork.memoizedProps),\n        commitHostUpdate(\n          finishedWork,\n          hoistableRoot,\n          null !== current ? current.memoizedProps : hoistableRoot\n        ));\n      flags & 1024 && (needsFormReset = !0);\n      break;\n    case 6:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4) {\n        if (null === finishedWork.stateNode)\n          throw Error(formatProdErrorMessage(162));\n        flags = finishedWork.memoizedProps;\n        current = finishedWork.stateNode;\n        try {\n          current.nodeValue = flags;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 3:\n      tagCaches = null;\n      hoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(root.containerInfo);\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      currentHoistableRoot = hoistableRoot;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4 && null !== current && current.memoizedState.isDehydrated)\n        try {\n          retryIfBlockedOn(root.containerInfo);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      needsFormReset &&\n        ((needsFormReset = !1), recursivelyResetForms(finishedWork));\n      break;\n    case 4:\n      flags = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(\n        finishedWork.stateNode.containerInfo\n      );\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      currentHoistableRoot = flags;\n      break;\n    case 12:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      finishedWork.child.flags & 8192 &&\n        (null !== finishedWork.memoizedState) !==\n          (null !== current && null !== current.memoizedState) &&\n        (globalMostRecentFallbackTime = now());\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 22:\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      node = null !== finishedWork.memoizedState;\n      nextNode = null !== current && null !== current.memoizedState;\n      nodeName = offscreenSubtreeIsHidden;\n      type = offscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = nodeName || node;\n      offscreenSubtreeWasHidden = type || nextNode;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      offscreenSubtreeWasHidden = type;\n      offscreenSubtreeIsHidden = nodeName;\n      commitReconciliationEffects(finishedWork);\n      root = finishedWork.stateNode;\n      root._current = finishedWork;\n      root._visibility &= -3;\n      root._visibility |= root._pendingVisibility & 2;\n      if (\n        flags & 8192 &&\n        ((root._visibility = node\n          ? root._visibility & -2\n          : root._visibility | 1),\n        node &&\n          ((root = offscreenSubtreeIsHidden || offscreenSubtreeWasHidden),\n          null === current ||\n            nextNode ||\n            root ||\n            recursivelyTraverseDisappearLayoutEffects(finishedWork)),\n        null === finishedWork.memoizedProps ||\n          \"manual\" !== finishedWork.memoizedProps.mode)\n      )\n        a: for (current = null, root = finishedWork; ; ) {\n          if (5 === root.tag || 26 === root.tag || 27 === root.tag) {\n            if (null === current) {\n              nextNode = current = root;\n              try {\n                if (((hoistableRoot = nextNode.stateNode), node))\n                  (currentResource = hoistableRoot.style),\n                    \"function\" === typeof currentResource.setProperty\n                      ? currentResource.setProperty(\n                          \"display\",\n                          \"none\",\n                          \"important\"\n                        )\n                      : (currentResource.display = \"none\");\n                else {\n                  maybeNodes = nextNode.stateNode;\n                  i = nextNode.memoizedProps.style;\n                  var display =\n                    void 0 !== i && null !== i && i.hasOwnProperty(\"display\")\n                      ? i.display\n                      : null;\n                  maybeNodes.style.display =\n                    null == display || \"boolean\" === typeof display\n                      ? \"\"\n                      : (\"\" + display).trim();\n                }\n              } catch (error) {\n                captureCommitPhaseError(nextNode, nextNode.return, error);\n              }\n            }\n          } else if (6 === root.tag) {\n            if (null === current) {\n              nextNode = root;\n              try {\n                nextNode.stateNode.nodeValue = node\n                  ? \"\"\n                  : nextNode.memoizedProps;\n              } catch (error) {\n                captureCommitPhaseError(nextNode, nextNode.return, error);\n              }\n            }\n          } else if (\n            ((22 !== root.tag && 23 !== root.tag) ||\n              null === root.memoizedState ||\n              root === finishedWork) &&\n            null !== root.child\n          ) {\n            root.child.return = root;\n            root = root.child;\n            continue;\n          }\n          if (root === finishedWork) break a;\n          for (; null === root.sibling; ) {\n            if (null === root.return || root.return === finishedWork) break a;\n            current === root && (current = null);\n            root = root.return;\n          }\n          current === root && (current = null);\n          root.sibling.return = root.return;\n          root = root.sibling;\n        }\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((current = flags.retryQueue),\n          null !== current &&\n            ((flags.retryQueue = null),\n            attachSuspenseRetryListeners(finishedWork, current))));\n      break;\n    case 19:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 21:\n      break;\n    default:\n      recursivelyTraverseMutationEffects(root, finishedWork),\n        commitReconciliationEffects(finishedWork);\n  }\n}\nfunction commitReconciliationEffects(finishedWork) {\n  var flags = finishedWork.flags;\n  if (flags & 2) {\n    try {\n      if (27 !== finishedWork.tag) {\n        a: {\n          for (var parent = finishedWork.return; null !== parent; ) {\n            if (isHostParent(parent)) {\n              var JSCompiler_inline_result = parent;\n              break a;\n            }\n            parent = parent.return;\n          }\n          throw Error(formatProdErrorMessage(160));\n        }\n        switch (JSCompiler_inline_result.tag) {\n          case 27:\n            var parent$jscomp$0 = JSCompiler_inline_result.stateNode,\n              before = getHostSibling(finishedWork);\n            insertOrAppendPlacementNode(finishedWork, before, parent$jscomp$0);\n            break;\n          case 5:\n            var parent$113 = JSCompiler_inline_result.stateNode;\n            JSCompiler_inline_result.flags & 32 &&\n              (setTextContent(parent$113, \"\"),\n              (JSCompiler_inline_result.flags &= -33));\n            var before$114 = getHostSibling(finishedWork);\n            insertOrAppendPlacementNode(finishedWork, before$114, parent$113);\n            break;\n          case 3:\n          case 4:\n            var parent$115 = JSCompiler_inline_result.stateNode.containerInfo,\n              before$116 = getHostSibling(finishedWork);\n            insertOrAppendPlacementNodeIntoContainer(\n              finishedWork,\n              before$116,\n              parent$115\n            );\n            break;\n          default:\n            throw Error(formatProdErrorMessage(161));\n        }\n      }\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n    finishedWork.flags &= -3;\n  }\n  flags & 4096 && (finishedWork.flags &= -4097);\n}\nfunction recursivelyResetForms(parentFiber) {\n  if (parentFiber.subtreeFlags & 1024)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var fiber = parentFiber;\n      recursivelyResetForms(fiber);\n      5 === fiber.tag && fiber.flags & 1024 && fiber.stateNode.reset();\n      parentFiber = parentFiber.sibling;\n    }\n}\nfunction recursivelyTraverseLayoutEffects(root, parentFiber) {\n  if (parentFiber.subtreeFlags & 8772)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitLayoutEffectOnFiber(root, parentFiber.alternate, parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction recursivelyTraverseDisappearLayoutEffects(parentFiber) {\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedWork = parentFiber;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 14:\n      case 15:\n        commitHookEffectListUnmount(4, finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 1:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        var instance = finishedWork.stateNode;\n        \"function\" === typeof instance.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            finishedWork,\n            finishedWork.return,\n            instance\n          );\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 26:\n      case 27:\n      case 5:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 22:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      default:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseReappearLayoutEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 8772);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var current = parentFiber.alternate,\n      finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(4, finishedWork);\n        break;\n      case 1:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        current = finishedWork;\n        finishedRoot = current.stateNode;\n        if (\"function\" === typeof finishedRoot.componentDidMount)\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        current = finishedWork;\n        finishedRoot = current.updateQueue;\n        if (null !== finishedRoot) {\n          var instance = current.stateNode;\n          try {\n            var hiddenCallbacks = finishedRoot.shared.hiddenCallbacks;\n            if (null !== hiddenCallbacks)\n              for (\n                finishedRoot.shared.hiddenCallbacks = null, finishedRoot = 0;\n                finishedRoot < hiddenCallbacks.length;\n                finishedRoot++\n              )\n                callCallback(hiddenCallbacks[finishedRoot], instance);\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        }\n        includeWorkInProgressEffects &&\n          flags & 64 &&\n          commitClassCallbacks(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 26:\n      case 27:\n      case 5:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          null === current &&\n          flags & 4 &&\n          commitHostMount(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 12:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        break;\n      case 13:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseReappearLayoutEffects(\n            finishedRoot,\n            finishedWork,\n            includeWorkInProgressEffects\n          );\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      default:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitOffscreenPassiveMountEffects(current, finishedWork) {\n  var previousCache = null;\n  null !== current &&\n    null !== current.memoizedState &&\n    null !== current.memoizedState.cachePool &&\n    (previousCache = current.memoizedState.cachePool.pool);\n  current = null;\n  null !== finishedWork.memoizedState &&\n    null !== finishedWork.memoizedState.cachePool &&\n    (current = finishedWork.memoizedState.cachePool.pool);\n  current !== previousCache &&\n    (null != current && current.refCount++,\n    null != previousCache && releaseCache(previousCache));\n}\nfunction commitCachePassiveMountEffect(current, finishedWork) {\n  current = null;\n  null !== finishedWork.alternate &&\n    (current = finishedWork.alternate.memoizedState.cache);\n  finishedWork = finishedWork.memoizedState.cache;\n  finishedWork !== current &&\n    (finishedWork.refCount++, null != current && releaseCache(current));\n}\nfunction recursivelyTraversePassiveMountEffects(\n  root,\n  parentFiber,\n  committedLanes,\n  committedTransitions\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveMountOnFiber(\n        root,\n        parentFiber,\n        committedLanes,\n        committedTransitions\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveMountOnFiber(\n  finishedRoot,\n  finishedWork,\n  committedLanes,\n  committedTransitions\n) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 && commitHookEffectListMount(9, finishedWork);\n      break;\n    case 3:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        ((finishedRoot = null),\n        null !== finishedWork.alternate &&\n          (finishedRoot = finishedWork.alternate.memoizedState.cache),\n        (finishedWork = finishedWork.memoizedState.cache),\n        finishedWork !== finishedRoot &&\n          (finishedWork.refCount++,\n          null != finishedRoot && releaseCache(finishedRoot)));\n      break;\n    case 12:\n      if (flags & 2048) {\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n        finishedRoot = finishedWork.stateNode;\n        try {\n          var _finishedWork$memoize2 = finishedWork.memoizedProps,\n            id = _finishedWork$memoize2.id,\n            onPostCommit = _finishedWork$memoize2.onPostCommit;\n          \"function\" === typeof onPostCommit &&\n            onPostCommit(\n              id,\n              null === finishedWork.alternate ? \"mount\" : \"update\",\n              finishedRoot.passiveEffectDuration,\n              -0\n            );\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      } else\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n      break;\n    case 23:\n      break;\n    case 22:\n      _finishedWork$memoize2 = finishedWork.stateNode;\n      null !== finishedWork.memoizedState\n        ? _finishedWork$memoize2._visibility & 4\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork)\n        : _finishedWork$memoize2._visibility & 4\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : ((_finishedWork$memoize2._visibility |= 4),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              0 !== (finishedWork.subtreeFlags & 10256)\n            ));\n      flags & 2048 &&\n        commitOffscreenPassiveMountEffects(\n          finishedWork.alternate,\n          finishedWork\n        );\n      break;\n    case 24:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n  }\n}\nfunction recursivelyTraverseReconnectPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  committedLanes$jscomp$0,\n  committedTransitions$jscomp$0,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 10256);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      committedLanes = committedLanes$jscomp$0,\n      committedTransitions = committedTransitions$jscomp$0,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(8, finishedWork);\n        break;\n      case 23:\n        break;\n      case 22:\n        var instance = finishedWork.stateNode;\n        null !== finishedWork.memoizedState\n          ? instance._visibility & 4\n            ? recursivelyTraverseReconnectPassiveEffects(\n                finishedRoot,\n                finishedWork,\n                committedLanes,\n                committedTransitions,\n                includeWorkInProgressEffects\n              )\n            : recursivelyTraverseAtomicPassiveEffects(\n                finishedRoot,\n                finishedWork\n              )\n          : ((instance._visibility |= 4),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              includeWorkInProgressEffects\n            ));\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitOffscreenPassiveMountEffects(\n            finishedWork.alternate,\n            finishedWork\n          );\n        break;\n      case 24:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n        break;\n      default:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseAtomicPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var finishedRoot = finishedRoot$jscomp$0,\n        finishedWork = parentFiber,\n        flags = finishedWork.flags;\n      switch (finishedWork.tag) {\n        case 22:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitOffscreenPassiveMountEffects(\n              finishedWork.alternate,\n              finishedWork\n            );\n          break;\n        case 24:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n          break;\n        default:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n      }\n      parentFiber = parentFiber.sibling;\n    }\n}\nvar suspenseyCommitFlag = 8192;\nfunction recursivelyAccumulateSuspenseyCommit(parentFiber) {\n  if (parentFiber.subtreeFlags & suspenseyCommitFlag)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      accumulateSuspenseyCommitOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction accumulateSuspenseyCommitOnFiber(fiber) {\n  switch (fiber.tag) {\n    case 26:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      fiber.flags & suspenseyCommitFlag &&\n        null !== fiber.memoizedState &&\n        suspendResource(\n          currentHoistableRoot,\n          fiber.memoizedState,\n          fiber.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      break;\n    case 3:\n    case 4:\n      var previousHoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(fiber.stateNode.containerInfo);\n      recursivelyAccumulateSuspenseyCommit(fiber);\n      currentHoistableRoot = previousHoistableRoot;\n      break;\n    case 22:\n      null === fiber.memoizedState &&\n        ((previousHoistableRoot = fiber.alternate),\n        null !== previousHoistableRoot &&\n        null !== previousHoistableRoot.memoizedState\n          ? ((previousHoistableRoot = suspenseyCommitFlag),\n            (suspenseyCommitFlag = 16777216),\n            recursivelyAccumulateSuspenseyCommit(fiber),\n            (suspenseyCommitFlag = previousHoistableRoot))\n          : recursivelyAccumulateSuspenseyCommit(fiber));\n      break;\n    default:\n      recursivelyAccumulateSuspenseyCommit(fiber);\n  }\n}\nfunction detachAlternateSiblings(parentFiber) {\n  var previousFiber = parentFiber.alternate;\n  if (\n    null !== previousFiber &&\n    ((parentFiber = previousFiber.child), null !== parentFiber)\n  ) {\n    previousFiber.child = null;\n    do\n      (previousFiber = parentFiber.sibling),\n        (parentFiber.sibling = null),\n        (parentFiber = previousFiber);\n    while (null !== parentFiber);\n  }\n}\nfunction recursivelyTraversePassiveUnmountEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveUnmountOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveUnmountOnFiber(finishedWork) {\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      finishedWork.flags & 2048 &&\n        commitHookEffectListUnmount(9, finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 12:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 22:\n      var instance = finishedWork.stateNode;\n      null !== finishedWork.memoizedState &&\n      instance._visibility & 4 &&\n      (null === finishedWork.return || 13 !== finishedWork.return.tag)\n        ? ((instance._visibility &= -5),\n          recursivelyTraverseDisconnectPassiveEffects(finishedWork))\n        : recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n  }\n}\nfunction recursivelyTraverseDisconnectPassiveEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    deletions = parentFiber;\n    switch (deletions.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, deletions, deletions.return);\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n        break;\n      case 22:\n        i = deletions.stateNode;\n        i._visibility & 4 &&\n          ((i._visibility &= -5),\n          recursivelyTraverseDisconnectPassiveEffects(deletions));\n        break;\n      default:\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n  deletedSubtreeRoot,\n  nearestMountedAncestor\n) {\n  for (; null !== nextEffect; ) {\n    var fiber = nextEffect;\n    switch (fiber.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, fiber, nearestMountedAncestor);\n        break;\n      case 23:\n      case 22:\n        if (\n          null !== fiber.memoizedState &&\n          null !== fiber.memoizedState.cachePool\n        ) {\n          var cache = fiber.memoizedState.cachePool.pool;\n          null != cache && cache.refCount++;\n        }\n        break;\n      case 24:\n        releaseCache(fiber.memoizedState.cache);\n    }\n    cache = fiber.child;\n    if (null !== cache) (cache.return = fiber), (nextEffect = cache);\n    else\n      a: for (fiber = deletedSubtreeRoot; null !== nextEffect; ) {\n        cache = nextEffect;\n        var sibling = cache.sibling,\n          returnFiber = cache.return;\n        detachFiberAfterEffects(cache);\n        if (cache === fiber) {\n          nextEffect = null;\n          break a;\n        }\n        if (null !== sibling) {\n          sibling.return = returnFiber;\n          nextEffect = sibling;\n          break a;\n        }\n        nextEffect = returnFiber;\n      }\n  }\n}\nfunction FiberNode(tag, pendingProps, key, mode) {\n  this.tag = tag;\n  this.key = key;\n  this.sibling =\n    this.child =\n    this.return =\n    this.stateNode =\n    this.type =\n    this.elementType =\n      null;\n  this.index = 0;\n  this.refCleanup = this.ref = null;\n  this.pendingProps = pendingProps;\n  this.dependencies =\n    this.memoizedState =\n    this.updateQueue =\n    this.memoizedProps =\n      null;\n  this.mode = mode;\n  this.subtreeFlags = this.flags = 0;\n  this.deletions = null;\n  this.childLanes = this.lanes = 0;\n  this.alternate = null;\n}\nfunction createFiberImplClass(tag, pendingProps, key, mode) {\n  return new FiberNode(tag, pendingProps, key, mode);\n}\nfunction shouldConstruct(Component) {\n  Component = Component.prototype;\n  return !(!Component || !Component.isReactComponent);\n}\nfunction createWorkInProgress(current, pendingProps) {\n  var workInProgress = current.alternate;\n  null === workInProgress\n    ? ((workInProgress = createFiberImplClass(\n        current.tag,\n        pendingProps,\n        current.key,\n        current.mode\n      )),\n      (workInProgress.elementType = current.elementType),\n      (workInProgress.type = current.type),\n      (workInProgress.stateNode = current.stateNode),\n      (workInProgress.alternate = current),\n      (current.alternate = workInProgress))\n    : ((workInProgress.pendingProps = pendingProps),\n      (workInProgress.type = current.type),\n      (workInProgress.flags = 0),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null));\n  workInProgress.flags = current.flags & 31457280;\n  workInProgress.childLanes = current.childLanes;\n  workInProgress.lanes = current.lanes;\n  workInProgress.child = current.child;\n  workInProgress.memoizedProps = current.memoizedProps;\n  workInProgress.memoizedState = current.memoizedState;\n  workInProgress.updateQueue = current.updateQueue;\n  pendingProps = current.dependencies;\n  workInProgress.dependencies =\n    null === pendingProps\n      ? null\n      : { lanes: pendingProps.lanes, firstContext: pendingProps.firstContext };\n  workInProgress.sibling = current.sibling;\n  workInProgress.index = current.index;\n  workInProgress.ref = current.ref;\n  workInProgress.refCleanup = current.refCleanup;\n  return workInProgress;\n}\nfunction resetWorkInProgress(workInProgress, renderLanes) {\n  workInProgress.flags &= 31457282;\n  var current = workInProgress.alternate;\n  null === current\n    ? ((workInProgress.childLanes = 0),\n      (workInProgress.lanes = renderLanes),\n      (workInProgress.child = null),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.memoizedProps = null),\n      (workInProgress.memoizedState = null),\n      (workInProgress.updateQueue = null),\n      (workInProgress.dependencies = null),\n      (workInProgress.stateNode = null))\n    : ((workInProgress.childLanes = current.childLanes),\n      (workInProgress.lanes = current.lanes),\n      (workInProgress.child = current.child),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null),\n      (workInProgress.memoizedProps = current.memoizedProps),\n      (workInProgress.memoizedState = current.memoizedState),\n      (workInProgress.updateQueue = current.updateQueue),\n      (workInProgress.type = current.type),\n      (renderLanes = current.dependencies),\n      (workInProgress.dependencies =\n        null === renderLanes\n          ? null\n          : {\n              lanes: renderLanes.lanes,\n              firstContext: renderLanes.firstContext\n            }));\n  return workInProgress;\n}\nfunction createFiberFromTypeAndProps(\n  type,\n  key,\n  pendingProps,\n  owner,\n  mode,\n  lanes\n) {\n  var fiberTag = 0;\n  owner = type;\n  if (\"function\" === typeof type) shouldConstruct(type) && (fiberTag = 1);\n  else if (\"string\" === typeof type)\n    fiberTag = isHostHoistableType(\n      type,\n      pendingProps,\n      contextStackCursor.current\n    )\n      ? 26\n      : \"html\" === type || \"head\" === type || \"body\" === type\n        ? 27\n        : 5;\n  else\n    a: switch (type) {\n      case REACT_FRAGMENT_TYPE:\n        return createFiberFromFragment(pendingProps.children, mode, lanes, key);\n      case REACT_STRICT_MODE_TYPE:\n        fiberTag = 8;\n        mode |= 24;\n        break;\n      case REACT_PROFILER_TYPE:\n        return (\n          (type = createFiberImplClass(12, pendingProps, key, mode | 2)),\n          (type.elementType = REACT_PROFILER_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_TYPE:\n        return (\n          (type = createFiberImplClass(13, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_LIST_TYPE:\n        return (\n          (type = createFiberImplClass(19, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_LIST_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_OFFSCREEN_TYPE:\n        return createFiberFromOffscreen(pendingProps, mode, lanes, key);\n      default:\n        if (\"object\" === typeof type && null !== type)\n          switch (type.$$typeof) {\n            case REACT_PROVIDER_TYPE:\n            case REACT_CONTEXT_TYPE:\n              fiberTag = 10;\n              break a;\n            case REACT_CONSUMER_TYPE:\n              fiberTag = 9;\n              break a;\n            case REACT_FORWARD_REF_TYPE:\n              fiberTag = 11;\n              break a;\n            case REACT_MEMO_TYPE:\n              fiberTag = 14;\n              break a;\n            case REACT_LAZY_TYPE:\n              fiberTag = 16;\n              owner = null;\n              break a;\n          }\n        fiberTag = 29;\n        pendingProps = Error(\n          formatProdErrorMessage(130, null === type ? \"null\" : typeof type, \"\")\n        );\n        owner = null;\n    }\n  key = createFiberImplClass(fiberTag, pendingProps, key, mode);\n  key.elementType = type;\n  key.type = owner;\n  key.lanes = lanes;\n  return key;\n}\nfunction createFiberFromFragment(elements, mode, lanes, key) {\n  elements = createFiberImplClass(7, elements, key, mode);\n  elements.lanes = lanes;\n  return elements;\n}\nfunction createFiberFromOffscreen(pendingProps, mode, lanes, key) {\n  pendingProps = createFiberImplClass(22, pendingProps, key, mode);\n  pendingProps.elementType = REACT_OFFSCREEN_TYPE;\n  pendingProps.lanes = lanes;\n  var primaryChildInstance = {\n    _visibility: 1,\n    _pendingVisibility: 1,\n    _pendingMarkers: null,\n    _retryCache: null,\n    _transitions: null,\n    _current: null,\n    detach: function () {\n      var fiber = primaryChildInstance._current;\n      if (null === fiber) throw Error(formatProdErrorMessage(456));\n      if (0 === (primaryChildInstance._pendingVisibility & 2)) {\n        var root = enqueueConcurrentRenderForLane(fiber, 2);\n        null !== root &&\n          ((primaryChildInstance._pendingVisibility |= 2),\n          scheduleUpdateOnFiber(root, fiber, 2));\n      }\n    },\n    attach: function () {\n      var fiber = primaryChildInstance._current;\n      if (null === fiber) throw Error(formatProdErrorMessage(456));\n      if (0 !== (primaryChildInstance._pendingVisibility & 2)) {\n        var root = enqueueConcurrentRenderForLane(fiber, 2);\n        null !== root &&\n          ((primaryChildInstance._pendingVisibility &= -3),\n          scheduleUpdateOnFiber(root, fiber, 2));\n      }\n    }\n  };\n  pendingProps.stateNode = primaryChildInstance;\n  return pendingProps;\n}\nfunction createFiberFromText(content, mode, lanes) {\n  content = createFiberImplClass(6, content, null, mode);\n  content.lanes = lanes;\n  return content;\n}\nfunction createFiberFromPortal(portal, mode, lanes) {\n  mode = createFiberImplClass(\n    4,\n    null !== portal.children ? portal.children : [],\n    portal.key,\n    mode\n  );\n  mode.lanes = lanes;\n  mode.stateNode = {\n    containerInfo: portal.containerInfo,\n    pendingChildren: null,\n    implementation: portal.implementation\n  };\n  return mode;\n}\nfunction markUpdate(workInProgress) {\n  workInProgress.flags |= 4;\n}\nfunction preloadResourceAndSuspendIfNeeded(workInProgress, resource) {\n  if (\"stylesheet\" !== resource.type || 0 !== (resource.state.loading & 4))\n    workInProgress.flags &= -16777217;\n  else if (((workInProgress.flags |= 16777216), !preloadResource(resource))) {\n    resource = suspenseHandlerStackCursor.current;\n    if (\n      null !== resource &&\n      ((workInProgressRootRenderLanes & 4194176) ===\n      workInProgressRootRenderLanes\n        ? null !== shellBoundary\n        : ((workInProgressRootRenderLanes & 62914560) !==\n            workInProgressRootRenderLanes &&\n            0 === (workInProgressRootRenderLanes & 536870912)) ||\n          resource !== shellBoundary)\n    )\n      throw (\n        ((suspendedThenable = noopSuspenseyCommitThenable),\n        SuspenseyCommitException)\n      );\n    workInProgress.flags |= 8192;\n  }\n}\nfunction scheduleRetryEffect(workInProgress, retryQueue) {\n  null !== retryQueue && (workInProgress.flags |= 4);\n  workInProgress.flags & 16384 &&\n    ((retryQueue =\n      22 !== workInProgress.tag ? claimNextRetryLane() : 536870912),\n    (workInProgress.lanes |= retryQueue),\n    (workInProgressSuspendedRetryLanes |= retryQueue));\n}\nfunction cutOffTailIfNeeded(renderState, hasRenderedATailFallback) {\n  if (!isHydrating)\n    switch (renderState.tailMode) {\n      case \"hidden\":\n        hasRenderedATailFallback = renderState.tail;\n        for (var lastTailNode = null; null !== hasRenderedATailFallback; )\n          null !== hasRenderedATailFallback.alternate &&\n            (lastTailNode = hasRenderedATailFallback),\n            (hasRenderedATailFallback = hasRenderedATailFallback.sibling);\n        null === lastTailNode\n          ? (renderState.tail = null)\n          : (lastTailNode.sibling = null);\n        break;\n      case \"collapsed\":\n        lastTailNode = renderState.tail;\n        for (var lastTailNode$131 = null; null !== lastTailNode; )\n          null !== lastTailNode.alternate && (lastTailNode$131 = lastTailNode),\n            (lastTailNode = lastTailNode.sibling);\n        null === lastTailNode$131\n          ? hasRenderedATailFallback || null === renderState.tail\n            ? (renderState.tail = null)\n            : (renderState.tail.sibling = null)\n          : (lastTailNode$131.sibling = null);\n    }\n}\nfunction bubbleProperties(completedWork) {\n  var didBailout =\n      null !== completedWork.alternate &&\n      completedWork.alternate.child === completedWork.child,\n    newChildLanes = 0,\n    subtreeFlags = 0;\n  if (didBailout)\n    for (var child$132 = completedWork.child; null !== child$132; )\n      (newChildLanes |= child$132.lanes | child$132.childLanes),\n        (subtreeFlags |= child$132.subtreeFlags & 31457280),\n        (subtreeFlags |= child$132.flags & 31457280),\n        (child$132.return = completedWork),\n        (child$132 = child$132.sibling);\n  else\n    for (child$132 = completedWork.child; null !== child$132; )\n      (newChildLanes |= child$132.lanes | child$132.childLanes),\n        (subtreeFlags |= child$132.subtreeFlags),\n        (subtreeFlags |= child$132.flags),\n        (child$132.return = completedWork),\n        (child$132 = child$132.sibling);\n  completedWork.subtreeFlags |= subtreeFlags;\n  completedWork.childLanes = newChildLanes;\n  return didBailout;\n}\nfunction completeWork(current, workInProgress, renderLanes) {\n  var newProps = workInProgress.pendingProps;\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 16:\n    case 15:\n    case 0:\n    case 11:\n    case 7:\n    case 8:\n    case 12:\n    case 9:\n    case 14:\n      return bubbleProperties(workInProgress), null;\n    case 1:\n      return bubbleProperties(workInProgress), null;\n    case 3:\n      renderLanes = workInProgress.stateNode;\n      newProps = null;\n      null !== current && (newProps = current.memoizedState.cache);\n      workInProgress.memoizedState.cache !== newProps &&\n        (workInProgress.flags |= 2048);\n      popProvider(CacheContext);\n      popHostContainer();\n      renderLanes.pendingContext &&\n        ((renderLanes.context = renderLanes.pendingContext),\n        (renderLanes.pendingContext = null));\n      if (null === current || null === current.child)\n        popHydrationState(workInProgress)\n          ? markUpdate(workInProgress)\n          : null === current ||\n            (current.memoizedState.isDehydrated &&\n              0 === (workInProgress.flags & 256)) ||\n            ((workInProgress.flags |= 1024),\n            null !== hydrationErrors &&\n              (queueRecoverableErrors(hydrationErrors),\n              (hydrationErrors = null)));\n      bubbleProperties(workInProgress);\n      return null;\n    case 26:\n      return (\n        (renderLanes = workInProgress.memoizedState),\n        null === current\n          ? (markUpdate(workInProgress),\n            null !== renderLanes\n              ? (bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217)))\n          : renderLanes\n            ? renderLanes !== current.memoizedState\n              ? (markUpdate(workInProgress),\n                bubbleProperties(workInProgress),\n                preloadResourceAndSuspendIfNeeded(workInProgress, renderLanes))\n              : (bubbleProperties(workInProgress),\n                (workInProgress.flags &= -16777217))\n            : (current.memoizedProps !== newProps && markUpdate(workInProgress),\n              bubbleProperties(workInProgress),\n              (workInProgress.flags &= -16777217)),\n        null\n      );\n    case 27:\n      popHostContext(workInProgress);\n      renderLanes = rootInstanceStackCursor.current;\n      var type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        popHydrationState(workInProgress)\n          ? prepareToHydrateHostInstance(workInProgress, current)\n          : ((current = resolveSingletonInstance(type, newProps, renderLanes)),\n            (workInProgress.stateNode = current),\n            markUpdate(workInProgress));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 5:\n      popHostContext(workInProgress);\n      renderLanes = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        if (popHydrationState(workInProgress))\n          prepareToHydrateHostInstance(workInProgress, current);\n        else {\n          type = getOwnerDocumentFromRootContainer(\n            rootInstanceStackCursor.current\n          );\n          switch (current) {\n            case 1:\n              current = type.createElementNS(\n                \"http://www.w3.org/2000/svg\",\n                renderLanes\n              );\n              break;\n            case 2:\n              current = type.createElementNS(\n                \"http://www.w3.org/1998/Math/MathML\",\n                renderLanes\n              );\n              break;\n            default:\n              switch (renderLanes) {\n                case \"svg\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/2000/svg\",\n                    renderLanes\n                  );\n                  break;\n                case \"math\":\n                  current = type.createElementNS(\n                    \"http://www.w3.org/1998/Math/MathML\",\n                    renderLanes\n                  );\n                  break;\n                case \"script\":\n                  current = type.createElement(\"div\");\n                  current.innerHTML = \"<script>\\x3c/script>\";\n                  current = current.removeChild(current.firstChild);\n                  break;\n                case \"select\":\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(\"select\", { is: newProps.is })\n                      : type.createElement(\"select\");\n                  newProps.multiple\n                    ? (current.multiple = !0)\n                    : newProps.size && (current.size = newProps.size);\n                  break;\n                default:\n                  current =\n                    \"string\" === typeof newProps.is\n                      ? type.createElement(renderLanes, { is: newProps.is })\n                      : type.createElement(renderLanes);\n              }\n          }\n          current[internalInstanceKey] = workInProgress;\n          current[internalPropsKey] = newProps;\n          a: for (type = workInProgress.child; null !== type; ) {\n            if (5 === type.tag || 6 === type.tag)\n              current.appendChild(type.stateNode);\n            else if (4 !== type.tag && 27 !== type.tag && null !== type.child) {\n              type.child.return = type;\n              type = type.child;\n              continue;\n            }\n            if (type === workInProgress) break a;\n            for (; null === type.sibling; ) {\n              if (null === type.return || type.return === workInProgress)\n                break a;\n              type = type.return;\n            }\n            type.sibling.return = type.return;\n            type = type.sibling;\n          }\n          workInProgress.stateNode = current;\n          a: switch (\n            (setInitialProperties(current, renderLanes, newProps), renderLanes)\n          ) {\n            case \"button\":\n            case \"input\":\n            case \"select\":\n            case \"textarea\":\n              current = !!newProps.autoFocus;\n              break a;\n            case \"img\":\n              current = !0;\n              break a;\n            default:\n              current = !1;\n          }\n          current && markUpdate(workInProgress);\n        }\n      }\n      bubbleProperties(workInProgress);\n      workInProgress.flags &= -16777217;\n      return null;\n    case 6:\n      if (current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (\"string\" !== typeof newProps && null === workInProgress.stateNode)\n          throw Error(formatProdErrorMessage(166));\n        current = rootInstanceStackCursor.current;\n        if (popHydrationState(workInProgress)) {\n          current = workInProgress.stateNode;\n          renderLanes = workInProgress.memoizedProps;\n          newProps = null;\n          type = hydrationParentFiber;\n          if (null !== type)\n            switch (type.tag) {\n              case 27:\n              case 5:\n                newProps = type.memoizedProps;\n            }\n          current[internalInstanceKey] = workInProgress;\n          current =\n            current.nodeValue === renderLanes ||\n            (null !== newProps && !0 === newProps.suppressHydrationWarning) ||\n            checkForUnmatchedText(current.nodeValue, renderLanes)\n              ? !0\n              : !1;\n          current || throwOnHydrationMismatch(workInProgress);\n        } else\n          (current =\n            getOwnerDocumentFromRootContainer(current).createTextNode(\n              newProps\n            )),\n            (current[internalInstanceKey] = workInProgress),\n            (workInProgress.stateNode = current);\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 13:\n      newProps = workInProgress.memoizedState;\n      if (\n        null === current ||\n        (null !== current.memoizedState &&\n          null !== current.memoizedState.dehydrated)\n      ) {\n        type = popHydrationState(workInProgress);\n        if (null !== newProps && null !== newProps.dehydrated) {\n          if (null === current) {\n            if (!type) throw Error(formatProdErrorMessage(318));\n            type = workInProgress.memoizedState;\n            type = null !== type ? type.dehydrated : null;\n            if (!type) throw Error(formatProdErrorMessage(317));\n            type[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          type = !1;\n        } else\n          null !== hydrationErrors &&\n            (queueRecoverableErrors(hydrationErrors), (hydrationErrors = null)),\n            (type = !0);\n        if (!type) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n      }\n      popSuspenseHandler(workInProgress);\n      if (0 !== (workInProgress.flags & 128))\n        return (workInProgress.lanes = renderLanes), workInProgress;\n      renderLanes = null !== newProps;\n      current = null !== current && null !== current.memoizedState;\n      if (renderLanes) {\n        newProps = workInProgress.child;\n        type = null;\n        null !== newProps.alternate &&\n          null !== newProps.alternate.memoizedState &&\n          null !== newProps.alternate.memoizedState.cachePool &&\n          (type = newProps.alternate.memoizedState.cachePool.pool);\n        var cache$144 = null;\n        null !== newProps.memoizedState &&\n          null !== newProps.memoizedState.cachePool &&\n          (cache$144 = newProps.memoizedState.cachePool.pool);\n        cache$144 !== type && (newProps.flags |= 2048);\n      }\n      renderLanes !== current &&\n        renderLanes &&\n        (workInProgress.child.flags |= 8192);\n      scheduleRetryEffect(workInProgress, workInProgress.updateQueue);\n      bubbleProperties(workInProgress);\n      return null;\n    case 4:\n      return (\n        popHostContainer(),\n        null === current &&\n          listenToAllSupportedEvents(workInProgress.stateNode.containerInfo),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 10:\n      return (\n        popProvider(workInProgress.type), bubbleProperties(workInProgress), null\n      );\n    case 19:\n      pop(suspenseStackCursor);\n      type = workInProgress.memoizedState;\n      if (null === type) return bubbleProperties(workInProgress), null;\n      newProps = 0 !== (workInProgress.flags & 128);\n      cache$144 = type.rendering;\n      if (null === cache$144)\n        if (newProps) cutOffTailIfNeeded(type, !1);\n        else {\n          if (\n            0 !== workInProgressRootExitStatus ||\n            (null !== current && 0 !== (current.flags & 128))\n          )\n            for (current = workInProgress.child; null !== current; ) {\n              cache$144 = findFirstSuspended(current);\n              if (null !== cache$144) {\n                workInProgress.flags |= 128;\n                cutOffTailIfNeeded(type, !1);\n                current = cache$144.updateQueue;\n                workInProgress.updateQueue = current;\n                scheduleRetryEffect(workInProgress, current);\n                workInProgress.subtreeFlags = 0;\n                current = renderLanes;\n                for (renderLanes = workInProgress.child; null !== renderLanes; )\n                  resetWorkInProgress(renderLanes, current),\n                    (renderLanes = renderLanes.sibling);\n                push(\n                  suspenseStackCursor,\n                  (suspenseStackCursor.current & 1) | 2\n                );\n                return workInProgress.child;\n              }\n              current = current.sibling;\n            }\n          null !== type.tail &&\n            now() > workInProgressRootRenderTargetTime &&\n            ((workInProgress.flags |= 128),\n            (newProps = !0),\n            cutOffTailIfNeeded(type, !1),\n            (workInProgress.lanes = 4194304));\n        }\n      else {\n        if (!newProps)\n          if (((current = findFirstSuspended(cache$144)), null !== current)) {\n            if (\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              (current = current.updateQueue),\n              (workInProgress.updateQueue = current),\n              scheduleRetryEffect(workInProgress, current),\n              cutOffTailIfNeeded(type, !0),\n              null === type.tail &&\n                \"hidden\" === type.tailMode &&\n                !cache$144.alternate &&\n                !isHydrating)\n            )\n              return bubbleProperties(workInProgress), null;\n          } else\n            2 * now() - type.renderingStartTime >\n              workInProgressRootRenderTargetTime &&\n              536870912 !== renderLanes &&\n              ((workInProgress.flags |= 128),\n              (newProps = !0),\n              cutOffTailIfNeeded(type, !1),\n              (workInProgress.lanes = 4194304));\n        type.isBackwards\n          ? ((cache$144.sibling = workInProgress.child),\n            (workInProgress.child = cache$144))\n          : ((current = type.last),\n            null !== current\n              ? (current.sibling = cache$144)\n              : (workInProgress.child = cache$144),\n            (type.last = cache$144));\n      }\n      if (null !== type.tail)\n        return (\n          (workInProgress = type.tail),\n          (type.rendering = workInProgress),\n          (type.tail = workInProgress.sibling),\n          (type.renderingStartTime = now()),\n          (workInProgress.sibling = null),\n          (current = suspenseStackCursor.current),\n          push(suspenseStackCursor, newProps ? (current & 1) | 2 : current & 1),\n          workInProgress\n        );\n      bubbleProperties(workInProgress);\n      return null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        (newProps = null !== workInProgress.memoizedState),\n        null !== current\n          ? (null !== current.memoizedState) !== newProps &&\n            (workInProgress.flags |= 8192)\n          : newProps && (workInProgress.flags |= 8192),\n        newProps\n          ? 0 !== (renderLanes & 536870912) &&\n            0 === (workInProgress.flags & 128) &&\n            (bubbleProperties(workInProgress),\n            workInProgress.subtreeFlags & 6 && (workInProgress.flags |= 8192))\n          : bubbleProperties(workInProgress),\n        (renderLanes = workInProgress.updateQueue),\n        null !== renderLanes &&\n          scheduleRetryEffect(workInProgress, renderLanes.retryQueue),\n        (renderLanes = null),\n        null !== current &&\n          null !== current.memoizedState &&\n          null !== current.memoizedState.cachePool &&\n          (renderLanes = current.memoizedState.cachePool.pool),\n        (newProps = null),\n        null !== workInProgress.memoizedState &&\n          null !== workInProgress.memoizedState.cachePool &&\n          (newProps = workInProgress.memoizedState.cachePool.pool),\n        newProps !== renderLanes && (workInProgress.flags |= 2048),\n        null !== current && pop(resumedCache),\n        null\n      );\n    case 24:\n      return (\n        (renderLanes = null),\n        null !== current && (renderLanes = current.memoizedState.cache),\n        workInProgress.memoizedState.cache !== renderLanes &&\n          (workInProgress.flags |= 2048),\n        popProvider(CacheContext),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 25:\n      return null;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction unwindWork(current, workInProgress) {\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 1:\n      return (\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 3:\n      return (\n        popProvider(CacheContext),\n        popHostContainer(),\n        (current = workInProgress.flags),\n        0 !== (current & 65536) && 0 === (current & 128)\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 26:\n    case 27:\n    case 5:\n      return popHostContext(workInProgress), null;\n    case 13:\n      popSuspenseHandler(workInProgress);\n      current = workInProgress.memoizedState;\n      if (null !== current && null !== current.dehydrated) {\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 19:\n      return pop(suspenseStackCursor), null;\n    case 4:\n      return popHostContainer(), null;\n    case 10:\n      return popProvider(workInProgress.type), null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        null !== current && pop(resumedCache),\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 24:\n      return popProvider(CacheContext), null;\n    case 25:\n      return null;\n    default:\n      return null;\n  }\n}\nfunction unwindInterruptedWork(current, interruptedWork) {\n  popTreeContext(interruptedWork);\n  switch (interruptedWork.tag) {\n    case 3:\n      popProvider(CacheContext);\n      popHostContainer();\n      break;\n    case 26:\n    case 27:\n    case 5:\n      popHostContext(interruptedWork);\n      break;\n    case 4:\n      popHostContainer();\n      break;\n    case 13:\n      popSuspenseHandler(interruptedWork);\n      break;\n    case 19:\n      pop(suspenseStackCursor);\n      break;\n    case 10:\n      popProvider(interruptedWork.type);\n      break;\n    case 22:\n    case 23:\n      popSuspenseHandler(interruptedWork);\n      popHiddenContext();\n      null !== current && pop(resumedCache);\n      break;\n    case 24:\n      popProvider(CacheContext);\n  }\n}\nvar DefaultAsyncDispatcher = {\n    getCacheForType: function (resourceType) {\n      var cache = readContext(CacheContext),\n        cacheForType = cache.data.get(resourceType);\n      void 0 === cacheForType &&\n        ((cacheForType = resourceType()),\n        cache.data.set(resourceType, cacheForType));\n      return cacheForType;\n    }\n  },\n  PossiblyWeakMap = \"function\" === typeof WeakMap ? WeakMap : Map,\n  executionContext = 0,\n  workInProgressRoot = null,\n  workInProgress = null,\n  workInProgressRootRenderLanes = 0,\n  workInProgressSuspendedReason = 0,\n  workInProgressThrownValue = null,\n  workInProgressRootDidSkipSuspendedSiblings = !1,\n  workInProgressRootIsPrerendering = !1,\n  workInProgressRootDidAttachPingListener = !1,\n  entangledRenderLanes = 0,\n  workInProgressRootExitStatus = 0,\n  workInProgressRootSkippedLanes = 0,\n  workInProgressRootInterleavedUpdatedLanes = 0,\n  workInProgressRootPingedLanes = 0,\n  workInProgressDeferredLane = 0,\n  workInProgressSuspendedRetryLanes = 0,\n  workInProgressRootConcurrentErrors = null,\n  workInProgressRootRecoverableErrors = null,\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1,\n  globalMostRecentFallbackTime = 0,\n  workInProgressRootRenderTargetTime = Infinity,\n  workInProgressTransitions = null,\n  legacyErrorBoundariesThatAlreadyFailed = null,\n  rootDoesHavePassiveEffects = !1,\n  rootWithPendingPassiveEffects = null,\n  pendingPassiveEffectsLanes = 0,\n  pendingPassiveEffectsRemainingLanes = 0,\n  pendingPassiveTransitions = null,\n  nestedUpdateCount = 0,\n  rootWithNestedUpdates = null;\nfunction requestUpdateLane() {\n  if (0 !== (executionContext & 2) && 0 !== workInProgressRootRenderLanes)\n    return workInProgressRootRenderLanes & -workInProgressRootRenderLanes;\n  if (null !== ReactSharedInternals.T) {\n    var actionScopeLane = currentEntangledLane;\n    return 0 !== actionScopeLane ? actionScopeLane : requestTransitionLane();\n  }\n  return resolveUpdatePriority();\n}\nfunction requestDeferredLane() {\n  0 === workInProgressDeferredLane &&\n    (workInProgressDeferredLane =\n      0 === (workInProgressRootRenderLanes & 536870912) || isHydrating\n        ? claimNextTransitionLane()\n        : 536870912);\n  var suspenseHandler = suspenseHandlerStackCursor.current;\n  null !== suspenseHandler && (suspenseHandler.flags |= 32);\n  return workInProgressDeferredLane;\n}\nfunction scheduleUpdateOnFiber(root, fiber, lane) {\n  if (\n    (root === workInProgressRoot && 2 === workInProgressSuspendedReason) ||\n    null !== root.cancelPendingCommit\n  )\n    prepareFreshStack(root, 0),\n      markRootSuspended(\n        root,\n        workInProgressRootRenderLanes,\n        workInProgressDeferredLane,\n        !1\n      );\n  markRootUpdated$1(root, lane);\n  if (0 === (executionContext & 2) || root !== workInProgressRoot)\n    root === workInProgressRoot &&\n      (0 === (executionContext & 2) &&\n        (workInProgressRootInterleavedUpdatedLanes |= lane),\n      4 === workInProgressRootExitStatus &&\n        markRootSuspended(\n          root,\n          workInProgressRootRenderLanes,\n          workInProgressDeferredLane,\n          !1\n        )),\n      ensureRootIsScheduled(root);\n}\nfunction performWorkOnRoot(root$jscomp$0, lanes, forceSync) {\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var shouldTimeSlice =\n      (!forceSync &&\n        0 === (lanes & 60) &&\n        0 === (lanes & root$jscomp$0.expiredLanes)) ||\n      checkIfRootIsPrerendering(root$jscomp$0, lanes),\n    exitStatus = shouldTimeSlice\n      ? renderRootConcurrent(root$jscomp$0, lanes)\n      : renderRootSync(root$jscomp$0, lanes, !0),\n    renderWasConcurrent = shouldTimeSlice;\n  do {\n    if (0 === exitStatus) {\n      workInProgressRootIsPrerendering &&\n        !shouldTimeSlice &&\n        markRootSuspended(root$jscomp$0, lanes, 0, !1);\n      break;\n    } else if (6 === exitStatus)\n      markRootSuspended(\n        root$jscomp$0,\n        lanes,\n        0,\n        !workInProgressRootDidSkipSuspendedSiblings\n      );\n    else {\n      forceSync = root$jscomp$0.current.alternate;\n      if (\n        renderWasConcurrent &&\n        !isRenderConsistentWithExternalStores(forceSync)\n      ) {\n        exitStatus = renderRootSync(root$jscomp$0, lanes, !1);\n        renderWasConcurrent = !1;\n        continue;\n      }\n      if (2 === exitStatus) {\n        renderWasConcurrent = lanes;\n        if (root$jscomp$0.errorRecoveryDisabledLanes & renderWasConcurrent)\n          var JSCompiler_inline_result = 0;\n        else\n          (JSCompiler_inline_result = root$jscomp$0.pendingLanes & -536870913),\n            (JSCompiler_inline_result =\n              0 !== JSCompiler_inline_result\n                ? JSCompiler_inline_result\n                : JSCompiler_inline_result & 536870912\n                  ? 536870912\n                  : 0);\n        if (0 !== JSCompiler_inline_result) {\n          lanes = JSCompiler_inline_result;\n          a: {\n            var root = root$jscomp$0;\n            exitStatus = workInProgressRootConcurrentErrors;\n            var wasRootDehydrated = root.current.memoizedState.isDehydrated;\n            wasRootDehydrated &&\n              (prepareFreshStack(root, JSCompiler_inline_result).flags |= 256);\n            JSCompiler_inline_result = renderRootSync(\n              root,\n              JSCompiler_inline_result,\n              !1\n            );\n            if (2 !== JSCompiler_inline_result) {\n              if (\n                workInProgressRootDidAttachPingListener &&\n                !wasRootDehydrated\n              ) {\n                root.errorRecoveryDisabledLanes |= renderWasConcurrent;\n                workInProgressRootInterleavedUpdatedLanes |=\n                  renderWasConcurrent;\n                exitStatus = 4;\n                break a;\n              }\n              renderWasConcurrent = workInProgressRootRecoverableErrors;\n              workInProgressRootRecoverableErrors = exitStatus;\n              null !== renderWasConcurrent &&\n                queueRecoverableErrors(renderWasConcurrent);\n            }\n            exitStatus = JSCompiler_inline_result;\n          }\n          renderWasConcurrent = !1;\n          if (2 !== exitStatus) continue;\n        }\n      }\n      if (1 === exitStatus) {\n        prepareFreshStack(root$jscomp$0, 0);\n        markRootSuspended(root$jscomp$0, lanes, 0, !0);\n        break;\n      }\n      a: {\n        shouldTimeSlice = root$jscomp$0;\n        switch (exitStatus) {\n          case 0:\n          case 1:\n            throw Error(formatProdErrorMessage(345));\n          case 4:\n            if ((lanes & 4194176) === lanes) {\n              markRootSuspended(\n                shouldTimeSlice,\n                lanes,\n                workInProgressDeferredLane,\n                !workInProgressRootDidSkipSuspendedSiblings\n              );\n              break a;\n            }\n            break;\n          case 2:\n            workInProgressRootRecoverableErrors = null;\n            break;\n          case 3:\n          case 5:\n            break;\n          default:\n            throw Error(formatProdErrorMessage(329));\n        }\n        shouldTimeSlice.finishedWork = forceSync;\n        shouldTimeSlice.finishedLanes = lanes;\n        if (\n          (lanes & 62914560) === lanes &&\n          ((renderWasConcurrent = globalMostRecentFallbackTime + 300 - now()),\n          10 < renderWasConcurrent)\n        ) {\n          markRootSuspended(\n            shouldTimeSlice,\n            lanes,\n            workInProgressDeferredLane,\n            !workInProgressRootDidSkipSuspendedSiblings\n          );\n          if (0 !== getNextLanes(shouldTimeSlice, 0)) break a;\n          shouldTimeSlice.timeoutHandle = scheduleTimeout(\n            commitRootWhenReady.bind(\n              null,\n              shouldTimeSlice,\n              forceSync,\n              workInProgressRootRecoverableErrors,\n              workInProgressTransitions,\n              workInProgressRootDidIncludeRecursiveRenderUpdate,\n              lanes,\n              workInProgressDeferredLane,\n              workInProgressRootInterleavedUpdatedLanes,\n              workInProgressSuspendedRetryLanes,\n              workInProgressRootDidSkipSuspendedSiblings,\n              2,\n              -0,\n              0\n            ),\n            renderWasConcurrent\n          );\n          break a;\n        }\n        commitRootWhenReady(\n          shouldTimeSlice,\n          forceSync,\n          workInProgressRootRecoverableErrors,\n          workInProgressTransitions,\n          workInProgressRootDidIncludeRecursiveRenderUpdate,\n          lanes,\n          workInProgressDeferredLane,\n          workInProgressRootInterleavedUpdatedLanes,\n          workInProgressSuspendedRetryLanes,\n          workInProgressRootDidSkipSuspendedSiblings,\n          0,\n          -0,\n          0\n        );\n      }\n    }\n    break;\n  } while (1);\n  ensureRootIsScheduled(root$jscomp$0);\n}\nfunction queueRecoverableErrors(errors) {\n  null === workInProgressRootRecoverableErrors\n    ? (workInProgressRootRecoverableErrors = errors)\n    : workInProgressRootRecoverableErrors.push.apply(\n        workInProgressRootRecoverableErrors,\n        errors\n      );\n}\nfunction commitRootWhenReady(\n  root,\n  finishedWork,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  lanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  didSkipSuspendedSiblings,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  var subtreeFlags = finishedWork.subtreeFlags;\n  if (subtreeFlags & 8192 || 16785408 === (subtreeFlags & 16785408))\n    if (\n      ((suspendedState = { stylesheets: null, count: 0, unsuspend: noop }),\n      accumulateSuspenseyCommitOnFiber(finishedWork),\n      (finishedWork = waitForCommitToBeReady()),\n      null !== finishedWork)\n    ) {\n      root.cancelPendingCommit = finishedWork(\n        commitRoot.bind(\n          null,\n          root,\n          recoverableErrors,\n          transitions,\n          didIncludeRenderPhaseUpdate,\n          spawnedLane,\n          updatedLanes,\n          suspendedRetryLanes,\n          1,\n          completedRenderStartTime,\n          completedRenderEndTime\n        )\n      );\n      markRootSuspended(root, lanes, spawnedLane, !didSkipSuspendedSiblings);\n      return;\n    }\n  commitRoot(\n    root,\n    recoverableErrors,\n    transitions,\n    didIncludeRenderPhaseUpdate,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes,\n    suspendedCommitReason,\n    completedRenderStartTime,\n    completedRenderEndTime\n  );\n}\nfunction isRenderConsistentWithExternalStores(finishedWork) {\n  for (var node = finishedWork; ; ) {\n    var tag = node.tag;\n    if (\n      (0 === tag || 11 === tag || 15 === tag) &&\n      node.flags & 16384 &&\n      ((tag = node.updateQueue),\n      null !== tag && ((tag = tag.stores), null !== tag))\n    )\n      for (var i = 0; i < tag.length; i++) {\n        var check = tag[i],\n          getSnapshot = check.getSnapshot;\n        check = check.value;\n        try {\n          if (!objectIs(getSnapshot(), check)) return !1;\n        } catch (error) {\n          return !1;\n        }\n      }\n    tag = node.child;\n    if (node.subtreeFlags & 16384 && null !== tag)\n      (tag.return = node), (node = tag);\n    else {\n      if (node === finishedWork) break;\n      for (; null === node.sibling; ) {\n        if (null === node.return || node.return === finishedWork) return !0;\n        node = node.return;\n      }\n      node.sibling.return = node.return;\n      node = node.sibling;\n    }\n  }\n  return !0;\n}\nfunction markRootSuspended(\n  root,\n  suspendedLanes,\n  spawnedLane,\n  didAttemptEntireTree\n) {\n  suspendedLanes &= ~workInProgressRootPingedLanes;\n  suspendedLanes &= ~workInProgressRootInterleavedUpdatedLanes;\n  root.suspendedLanes |= suspendedLanes;\n  root.pingedLanes &= ~suspendedLanes;\n  didAttemptEntireTree && (root.warmLanes |= suspendedLanes);\n  didAttemptEntireTree = root.expirationTimes;\n  for (var lanes = suspendedLanes; 0 < lanes; ) {\n    var index$6 = 31 - clz32(lanes),\n      lane = 1 << index$6;\n    didAttemptEntireTree[index$6] = -1;\n    lanes &= ~lane;\n  }\n  0 !== spawnedLane &&\n    markSpawnedDeferredLane(root, spawnedLane, suspendedLanes);\n}\nfunction flushSyncWork$1() {\n  return 0 === (executionContext & 6)\n    ? (flushSyncWorkAcrossRoots_impl(0, !1), !1)\n    : !0;\n}\nfunction resetWorkInProgressStack() {\n  if (null !== workInProgress) {\n    if (0 === workInProgressSuspendedReason)\n      var interruptedWork = workInProgress.return;\n    else\n      (interruptedWork = workInProgress),\n        (lastContextDependency = currentlyRenderingFiber = null),\n        resetHooksOnUnwind(interruptedWork),\n        (thenableState$1 = null),\n        (thenableIndexCounter$1 = 0),\n        (interruptedWork = workInProgress);\n    for (; null !== interruptedWork; )\n      unwindInterruptedWork(interruptedWork.alternate, interruptedWork),\n        (interruptedWork = interruptedWork.return);\n    workInProgress = null;\n  }\n}\nfunction prepareFreshStack(root, lanes) {\n  root.finishedWork = null;\n  root.finishedLanes = 0;\n  var timeoutHandle = root.timeoutHandle;\n  -1 !== timeoutHandle &&\n    ((root.timeoutHandle = -1), cancelTimeout(timeoutHandle));\n  timeoutHandle = root.cancelPendingCommit;\n  null !== timeoutHandle &&\n    ((root.cancelPendingCommit = null), timeoutHandle());\n  resetWorkInProgressStack();\n  workInProgressRoot = root;\n  workInProgress = timeoutHandle = createWorkInProgress(root.current, null);\n  workInProgressRootRenderLanes = lanes;\n  workInProgressSuspendedReason = 0;\n  workInProgressThrownValue = null;\n  workInProgressRootDidSkipSuspendedSiblings = !1;\n  workInProgressRootIsPrerendering = checkIfRootIsPrerendering(root, lanes);\n  workInProgressRootDidAttachPingListener = !1;\n  workInProgressSuspendedRetryLanes =\n    workInProgressDeferredLane =\n    workInProgressRootPingedLanes =\n    workInProgressRootInterleavedUpdatedLanes =\n    workInProgressRootSkippedLanes =\n    workInProgressRootExitStatus =\n      0;\n  workInProgressRootRecoverableErrors = workInProgressRootConcurrentErrors =\n    null;\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1;\n  0 !== (lanes & 8) && (lanes |= lanes & 32);\n  var allEntangledLanes = root.entangledLanes;\n  if (0 !== allEntangledLanes)\n    for (\n      root = root.entanglements, allEntangledLanes &= lanes;\n      0 < allEntangledLanes;\n\n    ) {\n      var index$4 = 31 - clz32(allEntangledLanes),\n        lane = 1 << index$4;\n      lanes |= root[index$4];\n      allEntangledLanes &= ~lane;\n    }\n  entangledRenderLanes = lanes;\n  finishQueueingConcurrentUpdates();\n  return timeoutHandle;\n}\nfunction handleThrow(root, thrownValue) {\n  currentlyRenderingFiber$1 = null;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  thrownValue === SuspenseException\n    ? ((thrownValue = getSuspendedThenable()),\n      (workInProgressSuspendedReason = 3))\n    : thrownValue === SuspenseyCommitException\n      ? ((thrownValue = getSuspendedThenable()),\n        (workInProgressSuspendedReason = 4))\n      : (workInProgressSuspendedReason =\n          thrownValue === SelectiveHydrationException\n            ? 8\n            : null !== thrownValue &&\n                \"object\" === typeof thrownValue &&\n                \"function\" === typeof thrownValue.then\n              ? 6\n              : 1);\n  workInProgressThrownValue = thrownValue;\n  null === workInProgress &&\n    ((workInProgressRootExitStatus = 1),\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    ));\n}\nfunction pushDispatcher() {\n  var prevDispatcher = ReactSharedInternals.H;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  return null === prevDispatcher ? ContextOnlyDispatcher : prevDispatcher;\n}\nfunction pushAsyncDispatcher() {\n  var prevAsyncDispatcher = ReactSharedInternals.A;\n  ReactSharedInternals.A = DefaultAsyncDispatcher;\n  return prevAsyncDispatcher;\n}\nfunction renderDidSuspendDelayIfPossible() {\n  workInProgressRootExitStatus = 4;\n  workInProgressRootDidSkipSuspendedSiblings ||\n    ((workInProgressRootRenderLanes & 4194176) !==\n      workInProgressRootRenderLanes &&\n      null !== suspenseHandlerStackCursor.current) ||\n    (workInProgressRootIsPrerendering = !0);\n  (0 === (workInProgressRootSkippedLanes & 134217727) &&\n    0 === (workInProgressRootInterleavedUpdatedLanes & 134217727)) ||\n    null === workInProgressRoot ||\n    markRootSuspended(\n      workInProgressRoot,\n      workInProgressRootRenderLanes,\n      workInProgressDeferredLane,\n      !1\n    );\n}\nfunction renderRootSync(root, lanes, shouldYieldForPrerendering) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes)\n    (workInProgressTransitions = null), prepareFreshStack(root, lanes);\n  lanes = !1;\n  var exitStatus = workInProgressRootExitStatus;\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        var unitOfWork = workInProgress,\n          thrownValue = workInProgressThrownValue;\n        switch (workInProgressSuspendedReason) {\n          case 8:\n            resetWorkInProgressStack();\n            exitStatus = 6;\n            break a;\n          case 3:\n          case 2:\n          case 6:\n            null === suspenseHandlerStackCursor.current && (lanes = !0);\n            var reason = workInProgressSuspendedReason;\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n            if (\n              shouldYieldForPrerendering &&\n              workInProgressRootIsPrerendering\n            ) {\n              exitStatus = 0;\n              break a;\n            }\n            break;\n          default:\n            (reason = workInProgressSuspendedReason),\n              (workInProgressSuspendedReason = 0),\n              (workInProgressThrownValue = null),\n              throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n        }\n      }\n      workLoopSync();\n      exitStatus = workInProgressRootExitStatus;\n      break;\n    } catch (thrownValue$164) {\n      handleThrow(root, thrownValue$164);\n    }\n  while (1);\n  lanes && root.shellSuspendCounter++;\n  lastContextDependency = currentlyRenderingFiber = null;\n  executionContext = prevExecutionContext;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  null === workInProgress &&\n    ((workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0),\n    finishQueueingConcurrentUpdates());\n  return exitStatus;\n}\nfunction workLoopSync() {\n  for (; null !== workInProgress; ) performUnitOfWork(workInProgress);\n}\nfunction renderRootConcurrent(root, lanes) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes\n    ? ((workInProgressTransitions = null),\n      (workInProgressRootRenderTargetTime = now() + 500),\n      prepareFreshStack(root, lanes))\n    : (workInProgressRootIsPrerendering = checkIfRootIsPrerendering(\n        root,\n        lanes\n      ));\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        lanes = workInProgress;\n        var thrownValue = workInProgressThrownValue;\n        b: switch (workInProgressSuspendedReason) {\n          case 1:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 1);\n            break;\n          case 2:\n            if (isThenableResolved(thrownValue)) {\n              workInProgressSuspendedReason = 0;\n              workInProgressThrownValue = null;\n              replaySuspendedUnitOfWork(lanes);\n              break;\n            }\n            lanes = function () {\n              2 === workInProgressSuspendedReason &&\n                workInProgressRoot === root &&\n                (workInProgressSuspendedReason = 7);\n              ensureRootIsScheduled(root);\n            };\n            thrownValue.then(lanes, lanes);\n            break a;\n          case 3:\n            workInProgressSuspendedReason = 7;\n            break a;\n          case 4:\n            workInProgressSuspendedReason = 5;\n            break a;\n          case 7:\n            isThenableResolved(thrownValue)\n              ? ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                replaySuspendedUnitOfWork(lanes))\n              : ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                throwAndUnwindWorkLoop(root, lanes, thrownValue, 7));\n            break;\n          case 5:\n            var resource = null;\n            switch (workInProgress.tag) {\n              case 26:\n                resource = workInProgress.memoizedState;\n              case 5:\n              case 27:\n                var hostFiber = workInProgress;\n                if (resource ? preloadResource(resource) : 1) {\n                  workInProgressSuspendedReason = 0;\n                  workInProgressThrownValue = null;\n                  var sibling = hostFiber.sibling;\n                  if (null !== sibling) workInProgress = sibling;\n                  else {\n                    var returnFiber = hostFiber.return;\n                    null !== returnFiber\n                      ? ((workInProgress = returnFiber),\n                        completeUnitOfWork(returnFiber))\n                      : (workInProgress = null);\n                  }\n                  break b;\n                }\n            }\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 5);\n            break;\n          case 6:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 6);\n            break;\n          case 8:\n            resetWorkInProgressStack();\n            workInProgressRootExitStatus = 6;\n            break a;\n          default:\n            throw Error(formatProdErrorMessage(462));\n        }\n      }\n      workLoopConcurrent();\n      break;\n    } catch (thrownValue$166) {\n      handleThrow(root, thrownValue$166);\n    }\n  while (1);\n  lastContextDependency = currentlyRenderingFiber = null;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  executionContext = prevExecutionContext;\n  if (null !== workInProgress) return 0;\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = 0;\n  finishQueueingConcurrentUpdates();\n  return workInProgressRootExitStatus;\n}\nfunction workLoopConcurrent() {\n  for (; null !== workInProgress && !shouldYield(); )\n    performUnitOfWork(workInProgress);\n}\nfunction performUnitOfWork(unitOfWork) {\n  var next = beginWork(unitOfWork.alternate, unitOfWork, entangledRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction replaySuspendedUnitOfWork(unitOfWork) {\n  var next = unitOfWork;\n  var current = next.alternate;\n  switch (next.tag) {\n    case 15:\n    case 0:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type,\n        void 0,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 11:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type.render,\n        next.ref,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 5:\n      resetHooksOnUnwind(next);\n    default:\n      unwindInterruptedWork(current, next),\n        (next = workInProgress =\n          resetWorkInProgress(next, entangledRenderLanes)),\n        (next = beginWork(current, next, entangledRenderLanes));\n  }\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction throwAndUnwindWorkLoop(\n  root,\n  unitOfWork,\n  thrownValue,\n  suspendedReason\n) {\n  lastContextDependency = currentlyRenderingFiber = null;\n  resetHooksOnUnwind(unitOfWork);\n  thenableState$1 = null;\n  thenableIndexCounter$1 = 0;\n  var returnFiber = unitOfWork.return;\n  try {\n    if (\n      throwException(\n        root,\n        returnFiber,\n        unitOfWork,\n        thrownValue,\n        workInProgressRootRenderLanes\n      )\n    ) {\n      workInProgressRootExitStatus = 1;\n      logUncaughtError(\n        root,\n        createCapturedValueAtFiber(thrownValue, root.current)\n      );\n      workInProgress = null;\n      return;\n    }\n  } catch (error) {\n    if (null !== returnFiber) throw ((workInProgress = returnFiber), error);\n    workInProgressRootExitStatus = 1;\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    );\n    workInProgress = null;\n    return;\n  }\n  if (unitOfWork.flags & 32768) {\n    if (isHydrating || 1 === suspendedReason) root = !0;\n    else if (\n      workInProgressRootIsPrerendering ||\n      0 !== (workInProgressRootRenderLanes & 536870912)\n    )\n      root = !1;\n    else if (\n      ((workInProgressRootDidSkipSuspendedSiblings = root = !0),\n      2 === suspendedReason || 3 === suspendedReason || 6 === suspendedReason)\n    )\n      (suspendedReason = suspenseHandlerStackCursor.current),\n        null !== suspendedReason &&\n          13 === suspendedReason.tag &&\n          (suspendedReason.flags |= 16384);\n    unwindUnitOfWork(unitOfWork, root);\n  } else completeUnitOfWork(unitOfWork);\n}\nfunction completeUnitOfWork(unitOfWork) {\n  var completedWork = unitOfWork;\n  do {\n    if (0 !== (completedWork.flags & 32768)) {\n      unwindUnitOfWork(\n        completedWork,\n        workInProgressRootDidSkipSuspendedSiblings\n      );\n      return;\n    }\n    unitOfWork = completedWork.return;\n    var next = completeWork(\n      completedWork.alternate,\n      completedWork,\n      entangledRenderLanes\n    );\n    if (null !== next) {\n      workInProgress = next;\n      return;\n    }\n    completedWork = completedWork.sibling;\n    if (null !== completedWork) {\n      workInProgress = completedWork;\n      return;\n    }\n    workInProgress = completedWork = unitOfWork;\n  } while (null !== completedWork);\n  0 === workInProgressRootExitStatus && (workInProgressRootExitStatus = 5);\n}\nfunction unwindUnitOfWork(unitOfWork, skipSiblings) {\n  do {\n    var next = unwindWork(unitOfWork.alternate, unitOfWork);\n    if (null !== next) {\n      next.flags &= 32767;\n      workInProgress = next;\n      return;\n    }\n    next = unitOfWork.return;\n    null !== next &&\n      ((next.flags |= 32768), (next.subtreeFlags = 0), (next.deletions = null));\n    if (\n      !skipSiblings &&\n      ((unitOfWork = unitOfWork.sibling), null !== unitOfWork)\n    ) {\n      workInProgress = unitOfWork;\n      return;\n    }\n    workInProgress = unitOfWork = next;\n  } while (null !== unitOfWork);\n  workInProgressRootExitStatus = 6;\n  workInProgress = null;\n}\nfunction commitRoot(\n  root,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  var prevTransition = ReactSharedInternals.T,\n    previousUpdateLanePriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      (ReactSharedInternals.T = null),\n      commitRootImpl(\n        root,\n        recoverableErrors,\n        transitions,\n        didIncludeRenderPhaseUpdate,\n        previousUpdateLanePriority,\n        spawnedLane,\n        updatedLanes,\n        suspendedRetryLanes,\n        suspendedCommitReason,\n        completedRenderStartTime,\n        completedRenderEndTime\n      );\n  } finally {\n    (ReactSharedInternals.T = prevTransition),\n      (ReactDOMSharedInternals.p = previousUpdateLanePriority);\n  }\n}\nfunction commitRootImpl(\n  root,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  renderPriorityLevel,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  do flushPassiveEffects();\n  while (null !== rootWithPendingPassiveEffects);\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var finishedWork = root.finishedWork;\n  didIncludeRenderPhaseUpdate = root.finishedLanes;\n  if (null === finishedWork) return null;\n  root.finishedWork = null;\n  root.finishedLanes = 0;\n  if (finishedWork === root.current) throw Error(formatProdErrorMessage(177));\n  root.callbackNode = null;\n  root.callbackPriority = 0;\n  root.cancelPendingCommit = null;\n  var remainingLanes = finishedWork.lanes | finishedWork.childLanes;\n  remainingLanes |= concurrentlyUpdatedLanes;\n  markRootFinished(\n    root,\n    didIncludeRenderPhaseUpdate,\n    remainingLanes,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes\n  );\n  root === workInProgressRoot &&\n    ((workInProgress = workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0));\n  (0 === (finishedWork.subtreeFlags & 10256) &&\n    0 === (finishedWork.flags & 10256)) ||\n    rootDoesHavePassiveEffects ||\n    ((rootDoesHavePassiveEffects = !0),\n    (pendingPassiveEffectsRemainingLanes = remainingLanes),\n    (pendingPassiveTransitions = transitions),\n    scheduleCallback$1(NormalPriority$1, function () {\n      flushPassiveEffects(!0);\n      return null;\n    }));\n  transitions = 0 !== (finishedWork.flags & 15990);\n  0 !== (finishedWork.subtreeFlags & 15990) || transitions\n    ? ((transitions = ReactSharedInternals.T),\n      (ReactSharedInternals.T = null),\n      (spawnedLane = ReactDOMSharedInternals.p),\n      (ReactDOMSharedInternals.p = 2),\n      (updatedLanes = executionContext),\n      (executionContext |= 4),\n      commitBeforeMutationEffects(root, finishedWork),\n      commitMutationEffectsOnFiber(finishedWork, root),\n      restoreSelection(selectionInformation, root.containerInfo),\n      (_enabled = !!eventsEnabled),\n      (selectionInformation = eventsEnabled = null),\n      (root.current = finishedWork),\n      commitLayoutEffectOnFiber(root, finishedWork.alternate, finishedWork),\n      requestPaint(),\n      (executionContext = updatedLanes),\n      (ReactDOMSharedInternals.p = spawnedLane),\n      (ReactSharedInternals.T = transitions))\n    : (root.current = finishedWork);\n  rootDoesHavePassiveEffects\n    ? ((rootDoesHavePassiveEffects = !1),\n      (rootWithPendingPassiveEffects = root),\n      (pendingPassiveEffectsLanes = didIncludeRenderPhaseUpdate))\n    : releaseRootPooledCache(root, remainingLanes);\n  remainingLanes = root.pendingLanes;\n  0 === remainingLanes && (legacyErrorBoundariesThatAlreadyFailed = null);\n  onCommitRoot(finishedWork.stateNode, renderPriorityLevel);\n  ensureRootIsScheduled(root);\n  if (null !== recoverableErrors)\n    for (\n      renderPriorityLevel = root.onRecoverableError, finishedWork = 0;\n      finishedWork < recoverableErrors.length;\n      finishedWork++\n    )\n      (remainingLanes = recoverableErrors[finishedWork]),\n        renderPriorityLevel(remainingLanes.value, {\n          componentStack: remainingLanes.stack\n        });\n  0 !== (pendingPassiveEffectsLanes & 3) && flushPassiveEffects();\n  remainingLanes = root.pendingLanes;\n  0 !== (didIncludeRenderPhaseUpdate & 4194218) && 0 !== (remainingLanes & 42)\n    ? root === rootWithNestedUpdates\n      ? nestedUpdateCount++\n      : ((nestedUpdateCount = 0), (rootWithNestedUpdates = root))\n    : (nestedUpdateCount = 0);\n  flushSyncWorkAcrossRoots_impl(0, !1);\n  return null;\n}\nfunction releaseRootPooledCache(root, remainingLanes) {\n  0 === (root.pooledCacheLanes &= remainingLanes) &&\n    ((remainingLanes = root.pooledCache),\n    null != remainingLanes &&\n      ((root.pooledCache = null), releaseCache(remainingLanes)));\n}\nfunction flushPassiveEffects() {\n  if (null !== rootWithPendingPassiveEffects) {\n    var root$170 = rootWithPendingPassiveEffects,\n      remainingLanes = pendingPassiveEffectsRemainingLanes;\n    pendingPassiveEffectsRemainingLanes = 0;\n    var renderPriority = lanesToEventPriority(pendingPassiveEffectsLanes),\n      prevTransition = ReactSharedInternals.T,\n      previousPriority = ReactDOMSharedInternals.p;\n    try {\n      ReactDOMSharedInternals.p = 32 > renderPriority ? 32 : renderPriority;\n      ReactSharedInternals.T = null;\n      if (null === rootWithPendingPassiveEffects)\n        var JSCompiler_inline_result = !1;\n      else {\n        renderPriority = pendingPassiveTransitions;\n        pendingPassiveTransitions = null;\n        var root = rootWithPendingPassiveEffects,\n          lanes = pendingPassiveEffectsLanes;\n        rootWithPendingPassiveEffects = null;\n        pendingPassiveEffectsLanes = 0;\n        if (0 !== (executionContext & 6))\n          throw Error(formatProdErrorMessage(331));\n        var prevExecutionContext = executionContext;\n        executionContext |= 4;\n        commitPassiveUnmountOnFiber(root.current);\n        commitPassiveMountOnFiber(root, root.current, lanes, renderPriority);\n        executionContext = prevExecutionContext;\n        flushSyncWorkAcrossRoots_impl(0, !1);\n        if (\n          injectedHook &&\n          \"function\" === typeof injectedHook.onPostCommitFiberRoot\n        )\n          try {\n            injectedHook.onPostCommitFiberRoot(rendererID, root);\n          } catch (err) {}\n        JSCompiler_inline_result = !0;\n      }\n      return JSCompiler_inline_result;\n    } finally {\n      (ReactDOMSharedInternals.p = previousPriority),\n        (ReactSharedInternals.T = prevTransition),\n        releaseRootPooledCache(root$170, remainingLanes);\n    }\n  }\n  return !1;\n}\nfunction captureCommitPhaseErrorOnRoot(rootFiber, sourceFiber, error) {\n  sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n  sourceFiber = createRootErrorUpdate(rootFiber.stateNode, sourceFiber, 2);\n  rootFiber = enqueueUpdate(rootFiber, sourceFiber, 2);\n  null !== rootFiber &&\n    (markRootUpdated$1(rootFiber, 2), ensureRootIsScheduled(rootFiber));\n}\nfunction captureCommitPhaseError(sourceFiber, nearestMountedAncestor, error) {\n  if (3 === sourceFiber.tag)\n    captureCommitPhaseErrorOnRoot(sourceFiber, sourceFiber, error);\n  else\n    for (; null !== nearestMountedAncestor; ) {\n      if (3 === nearestMountedAncestor.tag) {\n        captureCommitPhaseErrorOnRoot(\n          nearestMountedAncestor,\n          sourceFiber,\n          error\n        );\n        break;\n      } else if (1 === nearestMountedAncestor.tag) {\n        var instance = nearestMountedAncestor.stateNode;\n        if (\n          \"function\" ===\n            typeof nearestMountedAncestor.type.getDerivedStateFromError ||\n          (\"function\" === typeof instance.componentDidCatch &&\n            (null === legacyErrorBoundariesThatAlreadyFailed ||\n              !legacyErrorBoundariesThatAlreadyFailed.has(instance)))\n        ) {\n          sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n          error = createClassErrorUpdate(2);\n          instance = enqueueUpdate(nearestMountedAncestor, error, 2);\n          null !== instance &&\n            (initializeClassErrorUpdate(\n              error,\n              instance,\n              nearestMountedAncestor,\n              sourceFiber\n            ),\n            markRootUpdated$1(instance, 2),\n            ensureRootIsScheduled(instance));\n          break;\n        }\n      }\n      nearestMountedAncestor = nearestMountedAncestor.return;\n    }\n}\nfunction attachPingListener(root, wakeable, lanes) {\n  var pingCache = root.pingCache;\n  if (null === pingCache) {\n    pingCache = root.pingCache = new PossiblyWeakMap();\n    var threadIDs = new Set();\n    pingCache.set(wakeable, threadIDs);\n  } else\n    (threadIDs = pingCache.get(wakeable)),\n      void 0 === threadIDs &&\n        ((threadIDs = new Set()), pingCache.set(wakeable, threadIDs));\n  threadIDs.has(lanes) ||\n    ((workInProgressRootDidAttachPingListener = !0),\n    threadIDs.add(lanes),\n    (root = pingSuspendedRoot.bind(null, root, wakeable, lanes)),\n    wakeable.then(root, root));\n}\nfunction pingSuspendedRoot(root, wakeable, pingedLanes) {\n  var pingCache = root.pingCache;\n  null !== pingCache && pingCache.delete(wakeable);\n  root.pingedLanes |= root.suspendedLanes & pingedLanes;\n  root.warmLanes &= ~pingedLanes;\n  workInProgressRoot === root &&\n    (workInProgressRootRenderLanes & pingedLanes) === pingedLanes &&\n    (4 === workInProgressRootExitStatus ||\n    (3 === workInProgressRootExitStatus &&\n      (workInProgressRootRenderLanes & 62914560) ===\n        workInProgressRootRenderLanes &&\n      300 > now() - globalMostRecentFallbackTime)\n      ? 0 === (executionContext & 2) && prepareFreshStack(root, 0)\n      : (workInProgressRootPingedLanes |= pingedLanes),\n    workInProgressSuspendedRetryLanes === workInProgressRootRenderLanes &&\n      (workInProgressSuspendedRetryLanes = 0));\n  ensureRootIsScheduled(root);\n}\nfunction retryTimedOutBoundary(boundaryFiber, retryLane) {\n  0 === retryLane && (retryLane = claimNextRetryLane());\n  boundaryFiber = enqueueConcurrentRenderForLane(boundaryFiber, retryLane);\n  null !== boundaryFiber &&\n    (markRootUpdated$1(boundaryFiber, retryLane),\n    ensureRootIsScheduled(boundaryFiber));\n}\nfunction retryDehydratedSuspenseBoundary(boundaryFiber) {\n  var suspenseState = boundaryFiber.memoizedState,\n    retryLane = 0;\n  null !== suspenseState && (retryLane = suspenseState.retryLane);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction resolveRetryWakeable(boundaryFiber, wakeable) {\n  var retryLane = 0;\n  switch (boundaryFiber.tag) {\n    case 13:\n      var retryCache = boundaryFiber.stateNode;\n      var suspenseState = boundaryFiber.memoizedState;\n      null !== suspenseState && (retryLane = suspenseState.retryLane);\n      break;\n    case 19:\n      retryCache = boundaryFiber.stateNode;\n      break;\n    case 22:\n      retryCache = boundaryFiber.stateNode._retryCache;\n      break;\n    default:\n      throw Error(formatProdErrorMessage(314));\n  }\n  null !== retryCache && retryCache.delete(wakeable);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction scheduleCallback$1(priorityLevel, callback) {\n  return scheduleCallback$3(priorityLevel, callback);\n}\nvar firstScheduledRoot = null,\n  lastScheduledRoot = null,\n  didScheduleMicrotask = !1,\n  mightHavePendingSyncWork = !1,\n  isFlushingWork = !1,\n  currentEventTransitionLane = 0;\nfunction ensureRootIsScheduled(root) {\n  root !== lastScheduledRoot &&\n    null === root.next &&\n    (null === lastScheduledRoot\n      ? (firstScheduledRoot = lastScheduledRoot = root)\n      : (lastScheduledRoot = lastScheduledRoot.next = root));\n  mightHavePendingSyncWork = !0;\n  didScheduleMicrotask ||\n    ((didScheduleMicrotask = !0),\n    scheduleImmediateTask(processRootScheduleInMicrotask));\n}\nfunction flushSyncWorkAcrossRoots_impl(syncTransitionLanes, onlyLegacy) {\n  if (!isFlushingWork && mightHavePendingSyncWork) {\n    isFlushingWork = !0;\n    do {\n      var didPerformSomeWork = !1;\n      for (var root$172 = firstScheduledRoot; null !== root$172; ) {\n        if (!onlyLegacy)\n          if (0 !== syncTransitionLanes) {\n            var pendingLanes = root$172.pendingLanes;\n            if (0 === pendingLanes) var JSCompiler_inline_result = 0;\n            else {\n              var suspendedLanes = root$172.suspendedLanes,\n                pingedLanes = root$172.pingedLanes;\n              JSCompiler_inline_result =\n                (1 << (31 - clz32(42 | syncTransitionLanes) + 1)) - 1;\n              JSCompiler_inline_result &=\n                pendingLanes & ~(suspendedLanes & ~pingedLanes);\n              JSCompiler_inline_result =\n                JSCompiler_inline_result & 201326677\n                  ? (JSCompiler_inline_result & 201326677) | 1\n                  : JSCompiler_inline_result\n                    ? JSCompiler_inline_result | 2\n                    : 0;\n            }\n            0 !== JSCompiler_inline_result &&\n              ((didPerformSomeWork = !0),\n              performSyncWorkOnRoot(root$172, JSCompiler_inline_result));\n          } else\n            (JSCompiler_inline_result = workInProgressRootRenderLanes),\n              (JSCompiler_inline_result = getNextLanes(\n                root$172,\n                root$172 === workInProgressRoot ? JSCompiler_inline_result : 0\n              )),\n              0 === (JSCompiler_inline_result & 3) ||\n                checkIfRootIsPrerendering(root$172, JSCompiler_inline_result) ||\n                ((didPerformSomeWork = !0),\n                performSyncWorkOnRoot(root$172, JSCompiler_inline_result));\n        root$172 = root$172.next;\n      }\n    } while (didPerformSomeWork);\n    isFlushingWork = !1;\n  }\n}\nfunction processRootScheduleInMicrotask() {\n  mightHavePendingSyncWork = didScheduleMicrotask = !1;\n  var syncTransitionLanes = 0;\n  0 !== currentEventTransitionLane &&\n    (shouldAttemptEagerTransition() &&\n      (syncTransitionLanes = currentEventTransitionLane),\n    (currentEventTransitionLane = 0));\n  for (\n    var currentTime = now(), prev = null, root = firstScheduledRoot;\n    null !== root;\n\n  ) {\n    var next = root.next,\n      nextLanes = scheduleTaskForRootDuringMicrotask(root, currentTime);\n    if (0 === nextLanes)\n      (root.next = null),\n        null === prev ? (firstScheduledRoot = next) : (prev.next = next),\n        null === next && (lastScheduledRoot = prev);\n    else if (\n      ((prev = root), 0 !== syncTransitionLanes || 0 !== (nextLanes & 3))\n    )\n      mightHavePendingSyncWork = !0;\n    root = next;\n  }\n  flushSyncWorkAcrossRoots_impl(syncTransitionLanes, !1);\n}\nfunction scheduleTaskForRootDuringMicrotask(root, currentTime) {\n  for (\n    var suspendedLanes = root.suspendedLanes,\n      pingedLanes = root.pingedLanes,\n      expirationTimes = root.expirationTimes,\n      lanes = root.pendingLanes & -62914561;\n    0 < lanes;\n\n  ) {\n    var index$5 = 31 - clz32(lanes),\n      lane = 1 << index$5,\n      expirationTime = expirationTimes[index$5];\n    if (-1 === expirationTime) {\n      if (0 === (lane & suspendedLanes) || 0 !== (lane & pingedLanes))\n        expirationTimes[index$5] = computeExpirationTime(lane, currentTime);\n    } else expirationTime <= currentTime && (root.expiredLanes |= lane);\n    lanes &= ~lane;\n  }\n  currentTime = workInProgressRoot;\n  suspendedLanes = workInProgressRootRenderLanes;\n  suspendedLanes = getNextLanes(\n    root,\n    root === currentTime ? suspendedLanes : 0\n  );\n  pingedLanes = root.callbackNode;\n  if (\n    0 === suspendedLanes ||\n    (root === currentTime && 2 === workInProgressSuspendedReason) ||\n    null !== root.cancelPendingCommit\n  )\n    return (\n      null !== pingedLanes &&\n        null !== pingedLanes &&\n        cancelCallback$1(pingedLanes),\n      (root.callbackNode = null),\n      (root.callbackPriority = 0)\n    );\n  if (\n    0 === (suspendedLanes & 3) ||\n    checkIfRootIsPrerendering(root, suspendedLanes)\n  ) {\n    currentTime = suspendedLanes & -suspendedLanes;\n    if (currentTime === root.callbackPriority) return currentTime;\n    null !== pingedLanes && cancelCallback$1(pingedLanes);\n    switch (lanesToEventPriority(suspendedLanes)) {\n      case 2:\n      case 8:\n        suspendedLanes = UserBlockingPriority;\n        break;\n      case 32:\n        suspendedLanes = NormalPriority$1;\n        break;\n      case 268435456:\n        suspendedLanes = IdlePriority;\n        break;\n      default:\n        suspendedLanes = NormalPriority$1;\n    }\n    pingedLanes = performWorkOnRootViaSchedulerTask.bind(null, root);\n    suspendedLanes = scheduleCallback$3(suspendedLanes, pingedLanes);\n    root.callbackPriority = currentTime;\n    root.callbackNode = suspendedLanes;\n    return currentTime;\n  }\n  null !== pingedLanes && null !== pingedLanes && cancelCallback$1(pingedLanes);\n  root.callbackPriority = 2;\n  root.callbackNode = null;\n  return 2;\n}\nfunction performWorkOnRootViaSchedulerTask(root, didTimeout) {\n  var originalCallbackNode = root.callbackNode;\n  if (flushPassiveEffects() && root.callbackNode !== originalCallbackNode)\n    return null;\n  var workInProgressRootRenderLanes$jscomp$0 = workInProgressRootRenderLanes;\n  workInProgressRootRenderLanes$jscomp$0 = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes$jscomp$0 : 0\n  );\n  if (0 === workInProgressRootRenderLanes$jscomp$0) return null;\n  performWorkOnRoot(root, workInProgressRootRenderLanes$jscomp$0, didTimeout);\n  scheduleTaskForRootDuringMicrotask(root, now());\n  return null != root.callbackNode && root.callbackNode === originalCallbackNode\n    ? performWorkOnRootViaSchedulerTask.bind(null, root)\n    : null;\n}\nfunction performSyncWorkOnRoot(root, lanes) {\n  if (flushPassiveEffects()) return null;\n  performWorkOnRoot(root, lanes, !0);\n}\nfunction scheduleImmediateTask(cb) {\n  scheduleMicrotask(function () {\n    0 !== (executionContext & 6)\n      ? scheduleCallback$3(ImmediatePriority, cb)\n      : cb();\n  });\n}\nfunction requestTransitionLane() {\n  0 === currentEventTransitionLane &&\n    (currentEventTransitionLane = claimNextTransitionLane());\n  return currentEventTransitionLane;\n}\nfunction coerceFormActionProp(actionProp) {\n  return null == actionProp ||\n    \"symbol\" === typeof actionProp ||\n    \"boolean\" === typeof actionProp\n    ? null\n    : \"function\" === typeof actionProp\n      ? actionProp\n      : sanitizeURL(\"\" + actionProp);\n}\nfunction createFormDataWithSubmitter(form, submitter) {\n  var temp = submitter.ownerDocument.createElement(\"input\");\n  temp.name = submitter.name;\n  temp.value = submitter.value;\n  form.id && temp.setAttribute(\"form\", form.id);\n  submitter.parentNode.insertBefore(temp, submitter);\n  form = new FormData(form);\n  temp.parentNode.removeChild(temp);\n  return form;\n}\nfunction extractEvents$1(\n  dispatchQueue,\n  domEventName,\n  maybeTargetInst,\n  nativeEvent,\n  nativeEventTarget\n) {\n  if (\n    \"submit\" === domEventName &&\n    maybeTargetInst &&\n    maybeTargetInst.stateNode === nativeEventTarget\n  ) {\n    var action = coerceFormActionProp(\n        (nativeEventTarget[internalPropsKey] || null).action\n      ),\n      submitter = nativeEvent.submitter;\n    submitter &&\n      ((domEventName = (domEventName = submitter[internalPropsKey] || null)\n        ? coerceFormActionProp(domEventName.formAction)\n        : submitter.getAttribute(\"formAction\")),\n      null !== domEventName && ((action = domEventName), (submitter = null)));\n    var event = new SyntheticEvent(\n      \"action\",\n      \"action\",\n      null,\n      nativeEvent,\n      nativeEventTarget\n    );\n    dispatchQueue.push({\n      event: event,\n      listeners: [\n        {\n          instance: null,\n          listener: function () {\n            if (nativeEvent.defaultPrevented) {\n              if (0 !== currentEventTransitionLane) {\n                var formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget);\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  null,\n                  formData\n                );\n              }\n            } else\n              \"function\" === typeof action &&\n                (event.preventDefault(),\n                (formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget)),\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  action,\n                  formData\n                ));\n          },\n          currentTarget: nativeEventTarget\n        }\n      ]\n    });\n  }\n}\nfor (\n  var i$jscomp$inline_1439 = 0;\n  i$jscomp$inline_1439 < simpleEventPluginEvents.length;\n  i$jscomp$inline_1439++\n) {\n  var eventName$jscomp$inline_1440 =\n      simpleEventPluginEvents[i$jscomp$inline_1439],\n    domEventName$jscomp$inline_1441 =\n      eventName$jscomp$inline_1440.toLowerCase(),\n    capitalizedEvent$jscomp$inline_1442 =\n      eventName$jscomp$inline_1440[0].toUpperCase() +\n      eventName$jscomp$inline_1440.slice(1);\n  registerSimpleEvent(\n    domEventName$jscomp$inline_1441,\n    \"on\" + capitalizedEvent$jscomp$inline_1442\n  );\n}\nregisterSimpleEvent(ANIMATION_END, \"onAnimationEnd\");\nregisterSimpleEvent(ANIMATION_ITERATION, \"onAnimationIteration\");\nregisterSimpleEvent(ANIMATION_START, \"onAnimationStart\");\nregisterSimpleEvent(\"dblclick\", \"onDoubleClick\");\nregisterSimpleEvent(\"focusin\", \"onFocus\");\nregisterSimpleEvent(\"focusout\", \"onBlur\");\nregisterSimpleEvent(TRANSITION_RUN, \"onTransitionRun\");\nregisterSimpleEvent(TRANSITION_START, \"onTransitionStart\");\nregisterSimpleEvent(TRANSITION_CANCEL, \"onTransitionCancel\");\nregisterSimpleEvent(TRANSITION_END, \"onTransitionEnd\");\nregisterDirectEvent(\"onMouseEnter\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onMouseLeave\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onPointerEnter\", [\"pointerout\", \"pointerover\"]);\nregisterDirectEvent(\"onPointerLeave\", [\"pointerout\", \"pointerover\"]);\nregisterTwoPhaseEvent(\n  \"onChange\",\n  \"change click focusin focusout input keydown keyup selectionchange\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onSelect\",\n  \"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\n    \" \"\n  )\n);\nregisterTwoPhaseEvent(\"onBeforeInput\", [\n  \"compositionend\",\n  \"keypress\",\n  \"textInput\",\n  \"paste\"\n]);\nregisterTwoPhaseEvent(\n  \"onCompositionEnd\",\n  \"compositionend focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionStart\",\n  \"compositionstart focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionUpdate\",\n  \"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \")\n);\nvar mediaEventTypes =\n    \"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\n      \" \"\n    ),\n  nonDelegatedEvents = new Set(\n    \"beforetoggle cancel close invalid load scroll scrollend toggle\"\n      .split(\" \")\n      .concat(mediaEventTypes)\n  );\nfunction processDispatchQueue(dispatchQueue, eventSystemFlags) {\n  eventSystemFlags = 0 !== (eventSystemFlags & 4);\n  for (var i = 0; i < dispatchQueue.length; i++) {\n    var _dispatchQueue$i = dispatchQueue[i],\n      event = _dispatchQueue$i.event;\n    _dispatchQueue$i = _dispatchQueue$i.listeners;\n    a: {\n      var previousInstance = void 0;\n      if (eventSystemFlags)\n        for (\n          var i$jscomp$0 = _dispatchQueue$i.length - 1;\n          0 <= i$jscomp$0;\n          i$jscomp$0--\n        ) {\n          var _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0],\n            instance = _dispatchListeners$i.instance,\n            currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n      else\n        for (\n          i$jscomp$0 = 0;\n          i$jscomp$0 < _dispatchQueue$i.length;\n          i$jscomp$0++\n        ) {\n          _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0];\n          instance = _dispatchListeners$i.instance;\n          currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n    }\n  }\n}\nfunction listenToNonDelegatedEvent(domEventName, targetElement) {\n  var JSCompiler_inline_result = targetElement[internalEventHandlersKey];\n  void 0 === JSCompiler_inline_result &&\n    (JSCompiler_inline_result = targetElement[internalEventHandlersKey] =\n      new Set());\n  var listenerSetKey = domEventName + \"__bubble\";\n  JSCompiler_inline_result.has(listenerSetKey) ||\n    (addTrappedEventListener(targetElement, domEventName, 2, !1),\n    JSCompiler_inline_result.add(listenerSetKey));\n}\nfunction listenToNativeEvent(domEventName, isCapturePhaseListener, target) {\n  var eventSystemFlags = 0;\n  isCapturePhaseListener && (eventSystemFlags |= 4);\n  addTrappedEventListener(\n    target,\n    domEventName,\n    eventSystemFlags,\n    isCapturePhaseListener\n  );\n}\nvar listeningMarker = \"_reactListening\" + Math.random().toString(36).slice(2);\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  if (!rootContainerElement[listeningMarker]) {\n    rootContainerElement[listeningMarker] = !0;\n    allNativeEvents.forEach(function (domEventName) {\n      \"selectionchange\" !== domEventName &&\n        (nonDelegatedEvents.has(domEventName) ||\n          listenToNativeEvent(domEventName, !1, rootContainerElement),\n        listenToNativeEvent(domEventName, !0, rootContainerElement));\n    });\n    var ownerDocument =\n      9 === rootContainerElement.nodeType\n        ? rootContainerElement\n        : rootContainerElement.ownerDocument;\n    null === ownerDocument ||\n      ownerDocument[listeningMarker] ||\n      ((ownerDocument[listeningMarker] = !0),\n      listenToNativeEvent(\"selectionchange\", !1, ownerDocument));\n  }\n}\nfunction addTrappedEventListener(\n  targetContainer,\n  domEventName,\n  eventSystemFlags,\n  isCapturePhaseListener\n) {\n  switch (getEventPriority(domEventName)) {\n    case 2:\n      var listenerWrapper = dispatchDiscreteEvent;\n      break;\n    case 8:\n      listenerWrapper = dispatchContinuousEvent;\n      break;\n    default:\n      listenerWrapper = dispatchEvent;\n  }\n  eventSystemFlags = listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer\n  );\n  listenerWrapper = void 0;\n  !passiveBrowserEventsSupported ||\n    (\"touchstart\" !== domEventName &&\n      \"touchmove\" !== domEventName &&\n      \"wheel\" !== domEventName) ||\n    (listenerWrapper = !0);\n  isCapturePhaseListener\n    ? void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          capture: !0,\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !0)\n    : void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !1);\n}\nfunction dispatchEventForPluginEventSystem(\n  domEventName,\n  eventSystemFlags,\n  nativeEvent,\n  targetInst$jscomp$0,\n  targetContainer\n) {\n  var ancestorInst = targetInst$jscomp$0;\n  if (\n    0 === (eventSystemFlags & 1) &&\n    0 === (eventSystemFlags & 2) &&\n    null !== targetInst$jscomp$0\n  )\n    a: for (;;) {\n      if (null === targetInst$jscomp$0) return;\n      var nodeTag = targetInst$jscomp$0.tag;\n      if (3 === nodeTag || 4 === nodeTag) {\n        var container = targetInst$jscomp$0.stateNode.containerInfo;\n        if (\n          container === targetContainer ||\n          (8 === container.nodeType && container.parentNode === targetContainer)\n        )\n          break;\n        if (4 === nodeTag)\n          for (nodeTag = targetInst$jscomp$0.return; null !== nodeTag; ) {\n            var grandTag = nodeTag.tag;\n            if (3 === grandTag || 4 === grandTag)\n              if (\n                ((grandTag = nodeTag.stateNode.containerInfo),\n                grandTag === targetContainer ||\n                  (8 === grandTag.nodeType &&\n                    grandTag.parentNode === targetContainer))\n              )\n                return;\n            nodeTag = nodeTag.return;\n          }\n        for (; null !== container; ) {\n          nodeTag = getClosestInstanceFromNode(container);\n          if (null === nodeTag) return;\n          grandTag = nodeTag.tag;\n          if (\n            5 === grandTag ||\n            6 === grandTag ||\n            26 === grandTag ||\n            27 === grandTag\n          ) {\n            targetInst$jscomp$0 = ancestorInst = nodeTag;\n            continue a;\n          }\n          container = container.parentNode;\n        }\n      }\n      targetInst$jscomp$0 = targetInst$jscomp$0.return;\n    }\n  batchedUpdates$1(function () {\n    var targetInst = ancestorInst,\n      nativeEventTarget = getEventTarget(nativeEvent),\n      dispatchQueue = [];\n    a: {\n      var reactName = topLevelEventsToReactNames.get(domEventName);\n      if (void 0 !== reactName) {\n        var SyntheticEventCtor = SyntheticEvent,\n          reactEventType = domEventName;\n        switch (domEventName) {\n          case \"keypress\":\n            if (0 === getEventCharCode(nativeEvent)) break a;\n          case \"keydown\":\n          case \"keyup\":\n            SyntheticEventCtor = SyntheticKeyboardEvent;\n            break;\n          case \"focusin\":\n            reactEventType = \"focus\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"focusout\":\n            reactEventType = \"blur\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"beforeblur\":\n          case \"afterblur\":\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"click\":\n            if (2 === nativeEvent.button) break a;\n          case \"auxclick\":\n          case \"dblclick\":\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n          case \"mouseout\":\n          case \"mouseover\":\n          case \"contextmenu\":\n            SyntheticEventCtor = SyntheticMouseEvent;\n            break;\n          case \"drag\":\n          case \"dragend\":\n          case \"dragenter\":\n          case \"dragexit\":\n          case \"dragleave\":\n          case \"dragover\":\n          case \"dragstart\":\n          case \"drop\":\n            SyntheticEventCtor = SyntheticDragEvent;\n            break;\n          case \"touchcancel\":\n          case \"touchend\":\n          case \"touchmove\":\n          case \"touchstart\":\n            SyntheticEventCtor = SyntheticTouchEvent;\n            break;\n          case ANIMATION_END:\n          case ANIMATION_ITERATION:\n          case ANIMATION_START:\n            SyntheticEventCtor = SyntheticAnimationEvent;\n            break;\n          case TRANSITION_END:\n            SyntheticEventCtor = SyntheticTransitionEvent;\n            break;\n          case \"scroll\":\n          case \"scrollend\":\n            SyntheticEventCtor = SyntheticUIEvent;\n            break;\n          case \"wheel\":\n            SyntheticEventCtor = SyntheticWheelEvent;\n            break;\n          case \"copy\":\n          case \"cut\":\n          case \"paste\":\n            SyntheticEventCtor = SyntheticClipboardEvent;\n            break;\n          case \"gotpointercapture\":\n          case \"lostpointercapture\":\n          case \"pointercancel\":\n          case \"pointerdown\":\n          case \"pointermove\":\n          case \"pointerout\":\n          case \"pointerover\":\n          case \"pointerup\":\n            SyntheticEventCtor = SyntheticPointerEvent;\n            break;\n          case \"toggle\":\n          case \"beforetoggle\":\n            SyntheticEventCtor = SyntheticToggleEvent;\n        }\n        var inCapturePhase = 0 !== (eventSystemFlags & 4),\n          accumulateTargetOnly =\n            !inCapturePhase &&\n            (\"scroll\" === domEventName || \"scrollend\" === domEventName),\n          reactEventName = inCapturePhase\n            ? null !== reactName\n              ? reactName + \"Capture\"\n              : null\n            : reactName;\n        inCapturePhase = [];\n        for (\n          var instance = targetInst, lastHostComponent;\n          null !== instance;\n\n        ) {\n          var _instance = instance;\n          lastHostComponent = _instance.stateNode;\n          _instance = _instance.tag;\n          (5 !== _instance && 26 !== _instance && 27 !== _instance) ||\n            null === lastHostComponent ||\n            null === reactEventName ||\n            ((_instance = getListener(instance, reactEventName)),\n            null != _instance &&\n              inCapturePhase.push(\n                createDispatchListener(instance, _instance, lastHostComponent)\n              ));\n          if (accumulateTargetOnly) break;\n          instance = instance.return;\n        }\n        0 < inCapturePhase.length &&\n          ((reactName = new SyntheticEventCtor(\n            reactName,\n            reactEventType,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: reactName, listeners: inCapturePhase }));\n      }\n    }\n    if (0 === (eventSystemFlags & 7)) {\n      a: {\n        reactName =\n          \"mouseover\" === domEventName || \"pointerover\" === domEventName;\n        SyntheticEventCtor =\n          \"mouseout\" === domEventName || \"pointerout\" === domEventName;\n        if (\n          reactName &&\n          nativeEvent !== currentReplayingEvent &&\n          (reactEventType =\n            nativeEvent.relatedTarget || nativeEvent.fromElement) &&\n          (getClosestInstanceFromNode(reactEventType) ||\n            reactEventType[internalContainerInstanceKey])\n        )\n          break a;\n        if (SyntheticEventCtor || reactName) {\n          reactName =\n            nativeEventTarget.window === nativeEventTarget\n              ? nativeEventTarget\n              : (reactName = nativeEventTarget.ownerDocument)\n                ? reactName.defaultView || reactName.parentWindow\n                : window;\n          if (SyntheticEventCtor) {\n            if (\n              ((reactEventType =\n                nativeEvent.relatedTarget || nativeEvent.toElement),\n              (SyntheticEventCtor = targetInst),\n              (reactEventType = reactEventType\n                ? getClosestInstanceFromNode(reactEventType)\n                : null),\n              null !== reactEventType &&\n                ((accumulateTargetOnly =\n                  getNearestMountedFiber(reactEventType)),\n                (inCapturePhase = reactEventType.tag),\n                reactEventType !== accumulateTargetOnly ||\n                  (5 !== inCapturePhase &&\n                    27 !== inCapturePhase &&\n                    6 !== inCapturePhase)))\n            )\n              reactEventType = null;\n          } else (SyntheticEventCtor = null), (reactEventType = targetInst);\n          if (SyntheticEventCtor !== reactEventType) {\n            inCapturePhase = SyntheticMouseEvent;\n            _instance = \"onMouseLeave\";\n            reactEventName = \"onMouseEnter\";\n            instance = \"mouse\";\n            if (\"pointerout\" === domEventName || \"pointerover\" === domEventName)\n              (inCapturePhase = SyntheticPointerEvent),\n                (_instance = \"onPointerLeave\"),\n                (reactEventName = \"onPointerEnter\"),\n                (instance = \"pointer\");\n            accumulateTargetOnly =\n              null == SyntheticEventCtor\n                ? reactName\n                : getNodeFromInstance(SyntheticEventCtor);\n            lastHostComponent =\n              null == reactEventType\n                ? reactName\n                : getNodeFromInstance(reactEventType);\n            reactName = new inCapturePhase(\n              _instance,\n              instance + \"leave\",\n              SyntheticEventCtor,\n              nativeEvent,\n              nativeEventTarget\n            );\n            reactName.target = accumulateTargetOnly;\n            reactName.relatedTarget = lastHostComponent;\n            _instance = null;\n            getClosestInstanceFromNode(nativeEventTarget) === targetInst &&\n              ((inCapturePhase = new inCapturePhase(\n                reactEventName,\n                instance + \"enter\",\n                reactEventType,\n                nativeEvent,\n                nativeEventTarget\n              )),\n              (inCapturePhase.target = lastHostComponent),\n              (inCapturePhase.relatedTarget = accumulateTargetOnly),\n              (_instance = inCapturePhase));\n            accumulateTargetOnly = _instance;\n            if (SyntheticEventCtor && reactEventType)\n              b: {\n                inCapturePhase = SyntheticEventCtor;\n                reactEventName = reactEventType;\n                instance = 0;\n                for (\n                  lastHostComponent = inCapturePhase;\n                  lastHostComponent;\n                  lastHostComponent = getParent(lastHostComponent)\n                )\n                  instance++;\n                lastHostComponent = 0;\n                for (\n                  _instance = reactEventName;\n                  _instance;\n                  _instance = getParent(_instance)\n                )\n                  lastHostComponent++;\n                for (; 0 < instance - lastHostComponent; )\n                  (inCapturePhase = getParent(inCapturePhase)), instance--;\n                for (; 0 < lastHostComponent - instance; )\n                  (reactEventName = getParent(reactEventName)),\n                    lastHostComponent--;\n                for (; instance--; ) {\n                  if (\n                    inCapturePhase === reactEventName ||\n                    (null !== reactEventName &&\n                      inCapturePhase === reactEventName.alternate)\n                  )\n                    break b;\n                  inCapturePhase = getParent(inCapturePhase);\n                  reactEventName = getParent(reactEventName);\n                }\n                inCapturePhase = null;\n              }\n            else inCapturePhase = null;\n            null !== SyntheticEventCtor &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                reactName,\n                SyntheticEventCtor,\n                inCapturePhase,\n                !1\n              );\n            null !== reactEventType &&\n              null !== accumulateTargetOnly &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                accumulateTargetOnly,\n                reactEventType,\n                inCapturePhase,\n                !0\n              );\n          }\n        }\n      }\n      a: {\n        reactName = targetInst ? getNodeFromInstance(targetInst) : window;\n        SyntheticEventCtor =\n          reactName.nodeName && reactName.nodeName.toLowerCase();\n        if (\n          \"select\" === SyntheticEventCtor ||\n          (\"input\" === SyntheticEventCtor && \"file\" === reactName.type)\n        )\n          var getTargetInstFunc = getTargetInstForChangeEvent;\n        else if (isTextInputElement(reactName))\n          if (isInputEventSupported)\n            getTargetInstFunc = getTargetInstForInputOrChangeEvent;\n          else {\n            getTargetInstFunc = getTargetInstForInputEventPolyfill;\n            var handleEventFunc = handleEventsForInputEventPolyfill;\n          }\n        else\n          (SyntheticEventCtor = reactName.nodeName),\n            !SyntheticEventCtor ||\n            \"input\" !== SyntheticEventCtor.toLowerCase() ||\n            (\"checkbox\" !== reactName.type && \"radio\" !== reactName.type)\n              ? targetInst &&\n                isCustomElement(targetInst.elementType) &&\n                (getTargetInstFunc = getTargetInstForChangeEvent)\n              : (getTargetInstFunc = getTargetInstForClickEvent);\n        if (\n          getTargetInstFunc &&\n          (getTargetInstFunc = getTargetInstFunc(domEventName, targetInst))\n        ) {\n          createAndAccumulateChangeEvent(\n            dispatchQueue,\n            getTargetInstFunc,\n            nativeEvent,\n            nativeEventTarget\n          );\n          break a;\n        }\n        handleEventFunc && handleEventFunc(domEventName, reactName, targetInst);\n        \"focusout\" === domEventName &&\n          targetInst &&\n          \"number\" === reactName.type &&\n          null != targetInst.memoizedProps.value &&\n          setDefaultValue(reactName, \"number\", reactName.value);\n      }\n      handleEventFunc = targetInst ? getNodeFromInstance(targetInst) : window;\n      switch (domEventName) {\n        case \"focusin\":\n          if (\n            isTextInputElement(handleEventFunc) ||\n            \"true\" === handleEventFunc.contentEditable\n          )\n            (activeElement = handleEventFunc),\n              (activeElementInst = targetInst),\n              (lastSelection = null);\n          break;\n        case \"focusout\":\n          lastSelection = activeElementInst = activeElement = null;\n          break;\n        case \"mousedown\":\n          mouseDown = !0;\n          break;\n        case \"contextmenu\":\n        case \"mouseup\":\n        case \"dragend\":\n          mouseDown = !1;\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n          break;\n        case \"selectionchange\":\n          if (skipSelectionChangeEvent) break;\n        case \"keydown\":\n        case \"keyup\":\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n      }\n      var fallbackData;\n      if (canUseCompositionEvent)\n        b: {\n          switch (domEventName) {\n            case \"compositionstart\":\n              var eventType = \"onCompositionStart\";\n              break b;\n            case \"compositionend\":\n              eventType = \"onCompositionEnd\";\n              break b;\n            case \"compositionupdate\":\n              eventType = \"onCompositionUpdate\";\n              break b;\n          }\n          eventType = void 0;\n        }\n      else\n        isComposing\n          ? isFallbackCompositionEnd(domEventName, nativeEvent) &&\n            (eventType = \"onCompositionEnd\")\n          : \"keydown\" === domEventName &&\n            229 === nativeEvent.keyCode &&\n            (eventType = \"onCompositionStart\");\n      eventType &&\n        (useFallbackCompositionData &&\n          \"ko\" !== nativeEvent.locale &&\n          (isComposing || \"onCompositionStart\" !== eventType\n            ? \"onCompositionEnd\" === eventType &&\n              isComposing &&\n              (fallbackData = getData())\n            : ((root = nativeEventTarget),\n              (startText = \"value\" in root ? root.value : root.textContent),\n              (isComposing = !0))),\n        (handleEventFunc = accumulateTwoPhaseListeners(targetInst, eventType)),\n        0 < handleEventFunc.length &&\n          ((eventType = new SyntheticCompositionEvent(\n            eventType,\n            domEventName,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: eventType, listeners: handleEventFunc }),\n          fallbackData\n            ? (eventType.data = fallbackData)\n            : ((fallbackData = getDataFromCustomEvent(nativeEvent)),\n              null !== fallbackData && (eventType.data = fallbackData))));\n      if (\n        (fallbackData = canUseTextInputEvent\n          ? getNativeBeforeInputChars(domEventName, nativeEvent)\n          : getFallbackBeforeInputChars(domEventName, nativeEvent))\n      )\n        (eventType = accumulateTwoPhaseListeners(targetInst, \"onBeforeInput\")),\n          0 < eventType.length &&\n            ((handleEventFunc = new SyntheticCompositionEvent(\n              \"onBeforeInput\",\n              \"beforeinput\",\n              null,\n              nativeEvent,\n              nativeEventTarget\n            )),\n            dispatchQueue.push({\n              event: handleEventFunc,\n              listeners: eventType\n            }),\n            (handleEventFunc.data = fallbackData));\n      extractEvents$1(\n        dispatchQueue,\n        domEventName,\n        targetInst,\n        nativeEvent,\n        nativeEventTarget\n      );\n    }\n    processDispatchQueue(dispatchQueue, eventSystemFlags);\n  });\n}\nfunction createDispatchListener(instance, listener, currentTarget) {\n  return {\n    instance: instance,\n    listener: listener,\n    currentTarget: currentTarget\n  };\n}\nfunction accumulateTwoPhaseListeners(targetFiber, reactName) {\n  for (\n    var captureName = reactName + \"Capture\", listeners = [];\n    null !== targetFiber;\n\n  ) {\n    var _instance2 = targetFiber,\n      stateNode = _instance2.stateNode;\n    _instance2 = _instance2.tag;\n    (5 !== _instance2 && 26 !== _instance2 && 27 !== _instance2) ||\n      null === stateNode ||\n      ((_instance2 = getListener(targetFiber, captureName)),\n      null != _instance2 &&\n        listeners.unshift(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ),\n      (_instance2 = getListener(targetFiber, reactName)),\n      null != _instance2 &&\n        listeners.push(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ));\n    targetFiber = targetFiber.return;\n  }\n  return listeners;\n}\nfunction getParent(inst) {\n  if (null === inst) return null;\n  do inst = inst.return;\n  while (inst && 5 !== inst.tag && 27 !== inst.tag);\n  return inst ? inst : null;\n}\nfunction accumulateEnterLeaveListenersForEvent(\n  dispatchQueue,\n  event,\n  target,\n  common,\n  inCapturePhase\n) {\n  for (\n    var registrationName = event._reactName, listeners = [];\n    null !== target && target !== common;\n\n  ) {\n    var _instance3 = target,\n      alternate = _instance3.alternate,\n      stateNode = _instance3.stateNode;\n    _instance3 = _instance3.tag;\n    if (null !== alternate && alternate === common) break;\n    (5 !== _instance3 && 26 !== _instance3 && 27 !== _instance3) ||\n      null === stateNode ||\n      ((alternate = stateNode),\n      inCapturePhase\n        ? ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.unshift(\n              createDispatchListener(target, stateNode, alternate)\n            ))\n        : inCapturePhase ||\n          ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.push(\n              createDispatchListener(target, stateNode, alternate)\n            )));\n    target = target.return;\n  }\n  0 !== listeners.length &&\n    dispatchQueue.push({ event: event, listeners: listeners });\n}\nvar NORMALIZE_NEWLINES_REGEX = /\\r\\n?/g,\n  NORMALIZE_NULL_AND_REPLACEMENT_REGEX = /\\u0000|\\uFFFD/g;\nfunction normalizeMarkupForTextOrAttribute(markup) {\n  return (\"string\" === typeof markup ? markup : \"\" + markup)\n    .replace(NORMALIZE_NEWLINES_REGEX, \"\\n\")\n    .replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX, \"\");\n}\nfunction checkForUnmatchedText(serverText, clientText) {\n  clientText = normalizeMarkupForTextOrAttribute(clientText);\n  return normalizeMarkupForTextOrAttribute(serverText) === clientText ? !0 : !1;\n}\nfunction noop$1() {}\nfunction setProp(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"children\":\n      \"string\" === typeof value\n        ? \"body\" === tag ||\n          (\"textarea\" === tag && \"\" === value) ||\n          setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          \"body\" !== tag &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"className\":\n      setValueForKnownAttribute(domElement, \"class\", value);\n      break;\n    case \"tabIndex\":\n      setValueForKnownAttribute(domElement, \"tabindex\", value);\n      break;\n    case \"dir\":\n    case \"role\":\n    case \"viewBox\":\n    case \"width\":\n    case \"height\":\n      setValueForKnownAttribute(domElement, key, value);\n      break;\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"data\":\n      if (\"object\" !== tag) {\n        setValueForKnownAttribute(domElement, \"data\", value);\n        break;\n      }\n    case \"src\":\n    case \"href\":\n      if (\"\" === value && (\"a\" !== tag || \"href\" !== key)) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"action\":\n    case \"formAction\":\n      if (\"function\" === typeof value) {\n        domElement.setAttribute(\n          key,\n          \"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\"\n        );\n        break;\n      } else\n        \"function\" === typeof prevValue &&\n          (\"formAction\" === key\n            ? (\"input\" !== tag &&\n                setProp(domElement, tag, \"name\", props.name, props, null),\n              setProp(\n                domElement,\n                tag,\n                \"formEncType\",\n                props.formEncType,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formMethod\",\n                props.formMethod,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formTarget\",\n                props.formTarget,\n                props,\n                null\n              ))\n            : (setProp(domElement, tag, \"encType\", props.encType, props, null),\n              setProp(domElement, tag, \"method\", props.method, props, null),\n              setProp(domElement, tag, \"target\", props.target, props, null)));\n      if (\n        null == value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"multiple\":\n      domElement.multiple =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"muted\":\n      domElement.muted =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"defaultValue\":\n    case \"defaultChecked\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"autoFocus\":\n      break;\n    case \"xlinkHref\":\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"boolean\" === typeof value ||\n        \"symbol\" === typeof value\n      ) {\n        domElement.removeAttribute(\"xlink:href\");\n        break;\n      }\n      key = sanitizeURL(\"\" + value);\n      domElement.setAttributeNS(\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:href\",\n        key\n      );\n      break;\n    case \"contentEditable\":\n    case \"spellCheck\":\n    case \"draggable\":\n    case \"value\":\n    case \"autoReverse\":\n    case \"externalResourcesRequired\":\n    case \"focusable\":\n    case \"preserveAlpha\":\n      null != value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\" + value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"inert\":\n    case \"allowFullScreen\":\n    case \"async\":\n    case \"autoPlay\":\n    case \"controls\":\n    case \"default\":\n    case \"defer\":\n    case \"disabled\":\n    case \"disablePictureInPicture\":\n    case \"disableRemotePlayback\":\n    case \"formNoValidate\":\n    case \"hidden\":\n    case \"loop\":\n    case \"noModule\":\n    case \"noValidate\":\n    case \"open\":\n    case \"playsInline\":\n    case \"readOnly\":\n    case \"required\":\n    case \"reversed\":\n    case \"scoped\":\n    case \"seamless\":\n    case \"itemScope\":\n      value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\")\n        : domElement.removeAttribute(key);\n      break;\n    case \"capture\":\n    case \"download\":\n      !0 === value\n        ? domElement.setAttribute(key, \"\")\n        : !1 !== value &&\n            null != value &&\n            \"function\" !== typeof value &&\n            \"symbol\" !== typeof value\n          ? domElement.setAttribute(key, value)\n          : domElement.removeAttribute(key);\n      break;\n    case \"cols\":\n    case \"rows\":\n    case \"size\":\n    case \"span\":\n      null != value &&\n      \"function\" !== typeof value &&\n      \"symbol\" !== typeof value &&\n      !isNaN(value) &&\n      1 <= value\n        ? domElement.setAttribute(key, value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"rowSpan\":\n    case \"start\":\n      null == value ||\n      \"function\" === typeof value ||\n      \"symbol\" === typeof value ||\n      isNaN(value)\n        ? domElement.removeAttribute(key)\n        : domElement.setAttribute(key, value);\n      break;\n    case \"popover\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      setValueForAttribute(domElement, \"popover\", value);\n      break;\n    case \"xlinkActuate\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:actuate\",\n        value\n      );\n      break;\n    case \"xlinkArcrole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:arcrole\",\n        value\n      );\n      break;\n    case \"xlinkRole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:role\",\n        value\n      );\n      break;\n    case \"xlinkShow\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:show\",\n        value\n      );\n      break;\n    case \"xlinkTitle\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:title\",\n        value\n      );\n      break;\n    case \"xlinkType\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:type\",\n        value\n      );\n      break;\n    case \"xmlBase\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:base\",\n        value\n      );\n      break;\n    case \"xmlLang\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:lang\",\n        value\n      );\n      break;\n    case \"xmlSpace\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:space\",\n        value\n      );\n      break;\n    case \"is\":\n      setValueForAttribute(domElement, \"is\", value);\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (\n        !(2 < key.length) ||\n        (\"o\" !== key[0] && \"O\" !== key[0]) ||\n        (\"n\" !== key[1] && \"N\" !== key[1])\n      )\n        (key = aliases.get(key) || key),\n          setValueForAttribute(domElement, key, value);\n  }\n}\nfunction setPropOnCustomElement(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"children\":\n      \"string\" === typeof value\n        ? setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (!registrationNameDependencies.hasOwnProperty(key))\n        a: {\n          if (\n            \"o\" === key[0] &&\n            \"n\" === key[1] &&\n            ((props = key.endsWith(\"Capture\")),\n            (tag = key.slice(2, props ? key.length - 7 : void 0)),\n            (prevValue = domElement[internalPropsKey] || null),\n            (prevValue = null != prevValue ? prevValue[key] : null),\n            \"function\" === typeof prevValue &&\n              domElement.removeEventListener(tag, prevValue, props),\n            \"function\" === typeof value)\n          ) {\n            \"function\" !== typeof prevValue &&\n              null !== prevValue &&\n              (key in domElement\n                ? (domElement[key] = null)\n                : domElement.hasAttribute(key) &&\n                  domElement.removeAttribute(key));\n            domElement.addEventListener(tag, value, props);\n            break a;\n          }\n          key in domElement\n            ? (domElement[key] = value)\n            : !0 === value\n              ? domElement.setAttribute(key, \"\")\n              : setValueForAttribute(domElement, key, value);\n        }\n  }\n}\nfunction setInitialProperties(domElement, tag, props) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"img\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      var hasSrc = !1,\n        hasSrcSet = !1,\n        propKey;\n      for (propKey in props)\n        if (props.hasOwnProperty(propKey)) {\n          var propValue = props[propKey];\n          if (null != propValue)\n            switch (propKey) {\n              case \"src\":\n                hasSrc = !0;\n                break;\n              case \"srcSet\":\n                hasSrcSet = !0;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                throw Error(formatProdErrorMessage(137, tag));\n              default:\n                setProp(domElement, tag, propKey, propValue, props, null);\n            }\n        }\n      hasSrcSet &&\n        setProp(domElement, tag, \"srcSet\", props.srcSet, props, null);\n      hasSrc && setProp(domElement, tag, \"src\", props.src, props, null);\n      return;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      var defaultValue = (propKey = propValue = hasSrcSet = null),\n        checked = null,\n        defaultChecked = null;\n      for (hasSrc in props)\n        if (props.hasOwnProperty(hasSrc)) {\n          var propValue$186 = props[hasSrc];\n          if (null != propValue$186)\n            switch (hasSrc) {\n              case \"name\":\n                hasSrcSet = propValue$186;\n                break;\n              case \"type\":\n                propValue = propValue$186;\n                break;\n              case \"checked\":\n                checked = propValue$186;\n                break;\n              case \"defaultChecked\":\n                defaultChecked = propValue$186;\n                break;\n              case \"value\":\n                propKey = propValue$186;\n                break;\n              case \"defaultValue\":\n                defaultValue = propValue$186;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                if (null != propValue$186)\n                  throw Error(formatProdErrorMessage(137, tag));\n                break;\n              default:\n                setProp(domElement, tag, hasSrc, propValue$186, props, null);\n            }\n        }\n      initInput(\n        domElement,\n        propKey,\n        defaultValue,\n        checked,\n        defaultChecked,\n        propValue,\n        hasSrcSet,\n        !1\n      );\n      track(domElement);\n      return;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      hasSrc = propValue = propKey = null;\n      for (hasSrcSet in props)\n        if (\n          props.hasOwnProperty(hasSrcSet) &&\n          ((defaultValue = props[hasSrcSet]), null != defaultValue)\n        )\n          switch (hasSrcSet) {\n            case \"value\":\n              propKey = defaultValue;\n              break;\n            case \"defaultValue\":\n              propValue = defaultValue;\n              break;\n            case \"multiple\":\n              hasSrc = defaultValue;\n            default:\n              setProp(domElement, tag, hasSrcSet, defaultValue, props, null);\n          }\n      tag = propKey;\n      props = propValue;\n      domElement.multiple = !!hasSrc;\n      null != tag\n        ? updateOptions(domElement, !!hasSrc, tag, !1)\n        : null != props && updateOptions(domElement, !!hasSrc, props, !0);\n      return;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      propKey = hasSrcSet = hasSrc = null;\n      for (propValue in props)\n        if (\n          props.hasOwnProperty(propValue) &&\n          ((defaultValue = props[propValue]), null != defaultValue)\n        )\n          switch (propValue) {\n            case \"value\":\n              hasSrc = defaultValue;\n              break;\n            case \"defaultValue\":\n              hasSrcSet = defaultValue;\n              break;\n            case \"children\":\n              propKey = defaultValue;\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != defaultValue) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              setProp(domElement, tag, propValue, defaultValue, props, null);\n          }\n      initTextarea(domElement, hasSrc, hasSrcSet, propKey);\n      track(domElement);\n      return;\n    case \"option\":\n      for (checked in props)\n        if (\n          props.hasOwnProperty(checked) &&\n          ((hasSrc = props[checked]), null != hasSrc)\n        )\n          switch (checked) {\n            case \"selected\":\n              domElement.selected =\n                hasSrc &&\n                \"function\" !== typeof hasSrc &&\n                \"symbol\" !== typeof hasSrc;\n              break;\n            default:\n              setProp(domElement, tag, checked, hasSrc, props, null);\n          }\n      return;\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", domElement);\n      listenToNonDelegatedEvent(\"close\", domElement);\n      break;\n    case \"iframe\":\n    case \"object\":\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (hasSrc = 0; hasSrc < mediaEventTypes.length; hasSrc++)\n        listenToNonDelegatedEvent(mediaEventTypes[hasSrc], domElement);\n      break;\n    case \"image\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      break;\n    case \"embed\":\n    case \"source\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", domElement),\n        listenToNonDelegatedEvent(\"load\", domElement);\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (defaultChecked in props)\n        if (\n          props.hasOwnProperty(defaultChecked) &&\n          ((hasSrc = props[defaultChecked]), null != hasSrc)\n        )\n          switch (defaultChecked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              throw Error(formatProdErrorMessage(137, tag));\n            default:\n              setProp(domElement, tag, defaultChecked, hasSrc, props, null);\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (propValue$186 in props)\n          props.hasOwnProperty(propValue$186) &&\n            ((hasSrc = props[propValue$186]),\n            void 0 !== hasSrc &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propValue$186,\n                hasSrc,\n                props,\n                void 0\n              ));\n        return;\n      }\n  }\n  for (defaultValue in props)\n    props.hasOwnProperty(defaultValue) &&\n      ((hasSrc = props[defaultValue]),\n      null != hasSrc &&\n        setProp(domElement, tag, defaultValue, hasSrc, props, null));\n}\nfunction updateProperties(domElement, tag, lastProps, nextProps) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"input\":\n      var name = null,\n        type = null,\n        value = null,\n        defaultValue = null,\n        lastDefaultValue = null,\n        checked = null,\n        defaultChecked = null;\n      for (propKey in lastProps) {\n        var lastProp = lastProps[propKey];\n        if (lastProps.hasOwnProperty(propKey) && null != lastProp)\n          switch (propKey) {\n            case \"checked\":\n              break;\n            case \"value\":\n              break;\n            case \"defaultValue\":\n              lastDefaultValue = lastProp;\n            default:\n              nextProps.hasOwnProperty(propKey) ||\n                setProp(domElement, tag, propKey, null, nextProps, lastProp);\n          }\n      }\n      for (var propKey$203 in nextProps) {\n        var propKey = nextProps[propKey$203];\n        lastProp = lastProps[propKey$203];\n        if (\n          nextProps.hasOwnProperty(propKey$203) &&\n          (null != propKey || null != lastProp)\n        )\n          switch (propKey$203) {\n            case \"type\":\n              type = propKey;\n              break;\n            case \"name\":\n              name = propKey;\n              break;\n            case \"checked\":\n              checked = propKey;\n              break;\n            case \"defaultChecked\":\n              defaultChecked = propKey;\n              break;\n            case \"value\":\n              value = propKey;\n              break;\n            case \"defaultValue\":\n              defaultValue = propKey;\n              break;\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              propKey !== lastProp &&\n                setProp(\n                  domElement,\n                  tag,\n                  propKey$203,\n                  propKey,\n                  nextProps,\n                  lastProp\n                );\n          }\n      }\n      updateInput(\n        domElement,\n        value,\n        defaultValue,\n        lastDefaultValue,\n        checked,\n        defaultChecked,\n        type,\n        name\n      );\n      return;\n    case \"select\":\n      propKey = value = defaultValue = propKey$203 = null;\n      for (type in lastProps)\n        if (\n          ((lastDefaultValue = lastProps[type]),\n          lastProps.hasOwnProperty(type) && null != lastDefaultValue)\n        )\n          switch (type) {\n            case \"value\":\n              break;\n            case \"multiple\":\n              propKey = lastDefaultValue;\n            default:\n              nextProps.hasOwnProperty(type) ||\n                setProp(\n                  domElement,\n                  tag,\n                  type,\n                  null,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      for (name in nextProps)\n        if (\n          ((type = nextProps[name]),\n          (lastDefaultValue = lastProps[name]),\n          nextProps.hasOwnProperty(name) &&\n            (null != type || null != lastDefaultValue))\n        )\n          switch (name) {\n            case \"value\":\n              propKey$203 = type;\n              break;\n            case \"defaultValue\":\n              defaultValue = type;\n              break;\n            case \"multiple\":\n              value = type;\n            default:\n              type !== lastDefaultValue &&\n                setProp(\n                  domElement,\n                  tag,\n                  name,\n                  type,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      tag = defaultValue;\n      lastProps = value;\n      nextProps = propKey;\n      null != propKey$203\n        ? updateOptions(domElement, !!lastProps, propKey$203, !1)\n        : !!nextProps !== !!lastProps &&\n          (null != tag\n            ? updateOptions(domElement, !!lastProps, tag, !0)\n            : updateOptions(domElement, !!lastProps, lastProps ? [] : \"\", !1));\n      return;\n    case \"textarea\":\n      propKey = propKey$203 = null;\n      for (defaultValue in lastProps)\n        if (\n          ((name = lastProps[defaultValue]),\n          lastProps.hasOwnProperty(defaultValue) &&\n            null != name &&\n            !nextProps.hasOwnProperty(defaultValue))\n        )\n          switch (defaultValue) {\n            case \"value\":\n              break;\n            case \"children\":\n              break;\n            default:\n              setProp(domElement, tag, defaultValue, null, nextProps, name);\n          }\n      for (value in nextProps)\n        if (\n          ((name = nextProps[value]),\n          (type = lastProps[value]),\n          nextProps.hasOwnProperty(value) && (null != name || null != type))\n        )\n          switch (value) {\n            case \"value\":\n              propKey$203 = name;\n              break;\n            case \"defaultValue\":\n              propKey = name;\n              break;\n            case \"children\":\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != name) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              name !== type &&\n                setProp(domElement, tag, value, name, nextProps, type);\n          }\n      updateTextarea(domElement, propKey$203, propKey);\n      return;\n    case \"option\":\n      for (var propKey$219 in lastProps)\n        if (\n          ((propKey$203 = lastProps[propKey$219]),\n          lastProps.hasOwnProperty(propKey$219) &&\n            null != propKey$203 &&\n            !nextProps.hasOwnProperty(propKey$219))\n        )\n          switch (propKey$219) {\n            case \"selected\":\n              domElement.selected = !1;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                propKey$219,\n                null,\n                nextProps,\n                propKey$203\n              );\n          }\n      for (lastDefaultValue in nextProps)\n        if (\n          ((propKey$203 = nextProps[lastDefaultValue]),\n          (propKey = lastProps[lastDefaultValue]),\n          nextProps.hasOwnProperty(lastDefaultValue) &&\n            propKey$203 !== propKey &&\n            (null != propKey$203 || null != propKey))\n        )\n          switch (lastDefaultValue) {\n            case \"selected\":\n              domElement.selected =\n                propKey$203 &&\n                \"function\" !== typeof propKey$203 &&\n                \"symbol\" !== typeof propKey$203;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                lastDefaultValue,\n                propKey$203,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    case \"img\":\n    case \"link\":\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"embed\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"source\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (var propKey$224 in lastProps)\n        (propKey$203 = lastProps[propKey$224]),\n          lastProps.hasOwnProperty(propKey$224) &&\n            null != propKey$203 &&\n            !nextProps.hasOwnProperty(propKey$224) &&\n            setProp(domElement, tag, propKey$224, null, nextProps, propKey$203);\n      for (checked in nextProps)\n        if (\n          ((propKey$203 = nextProps[checked]),\n          (propKey = lastProps[checked]),\n          nextProps.hasOwnProperty(checked) &&\n            propKey$203 !== propKey &&\n            (null != propKey$203 || null != propKey))\n        )\n          switch (checked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey$203)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                checked,\n                propKey$203,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (var propKey$229 in lastProps)\n          (propKey$203 = lastProps[propKey$229]),\n            lastProps.hasOwnProperty(propKey$229) &&\n              void 0 !== propKey$203 &&\n              !nextProps.hasOwnProperty(propKey$229) &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propKey$229,\n                void 0,\n                nextProps,\n                propKey$203\n              );\n        for (defaultChecked in nextProps)\n          (propKey$203 = nextProps[defaultChecked]),\n            (propKey = lastProps[defaultChecked]),\n            !nextProps.hasOwnProperty(defaultChecked) ||\n              propKey$203 === propKey ||\n              (void 0 === propKey$203 && void 0 === propKey) ||\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                defaultChecked,\n                propKey$203,\n                nextProps,\n                propKey\n              );\n        return;\n      }\n  }\n  for (var propKey$234 in lastProps)\n    (propKey$203 = lastProps[propKey$234]),\n      lastProps.hasOwnProperty(propKey$234) &&\n        null != propKey$203 &&\n        !nextProps.hasOwnProperty(propKey$234) &&\n        setProp(domElement, tag, propKey$234, null, nextProps, propKey$203);\n  for (lastProp in nextProps)\n    (propKey$203 = nextProps[lastProp]),\n      (propKey = lastProps[lastProp]),\n      !nextProps.hasOwnProperty(lastProp) ||\n        propKey$203 === propKey ||\n        (null == propKey$203 && null == propKey) ||\n        setProp(domElement, tag, lastProp, propKey$203, nextProps, propKey);\n}\nvar eventsEnabled = null,\n  selectionInformation = null;\nfunction getOwnerDocumentFromRootContainer(rootContainerElement) {\n  return 9 === rootContainerElement.nodeType\n    ? rootContainerElement\n    : rootContainerElement.ownerDocument;\n}\nfunction getOwnHostContext(namespaceURI) {\n  switch (namespaceURI) {\n    case \"http://www.w3.org/2000/svg\":\n      return 1;\n    case \"http://www.w3.org/1998/Math/MathML\":\n      return 2;\n    default:\n      return 0;\n  }\n}\nfunction getChildHostContextProd(parentNamespace, type) {\n  if (0 === parentNamespace)\n    switch (type) {\n      case \"svg\":\n        return 1;\n      case \"math\":\n        return 2;\n      default:\n        return 0;\n    }\n  return 1 === parentNamespace && \"foreignObject\" === type\n    ? 0\n    : parentNamespace;\n}\nfunction shouldSetTextContent(type, props) {\n  return (\n    \"textarea\" === type ||\n    \"noscript\" === type ||\n    \"string\" === typeof props.children ||\n    \"number\" === typeof props.children ||\n    \"bigint\" === typeof props.children ||\n    (\"object\" === typeof props.dangerouslySetInnerHTML &&\n      null !== props.dangerouslySetInnerHTML &&\n      null != props.dangerouslySetInnerHTML.__html)\n  );\n}\nvar currentPopstateTransitionEvent = null;\nfunction shouldAttemptEagerTransition() {\n  var event = window.event;\n  if (event && \"popstate\" === event.type) {\n    if (event === currentPopstateTransitionEvent) return !1;\n    currentPopstateTransitionEvent = event;\n    return !0;\n  }\n  currentPopstateTransitionEvent = null;\n  return !1;\n}\nvar scheduleTimeout = \"function\" === typeof setTimeout ? setTimeout : void 0,\n  cancelTimeout = \"function\" === typeof clearTimeout ? clearTimeout : void 0,\n  localPromise = \"function\" === typeof Promise ? Promise : void 0,\n  scheduleMicrotask =\n    \"function\" === typeof queueMicrotask\n      ? queueMicrotask\n      : \"undefined\" !== typeof localPromise\n        ? function (callback) {\n            return localPromise\n              .resolve(null)\n              .then(callback)\n              .catch(handleErrorInNextTick);\n          }\n        : scheduleTimeout;\nfunction handleErrorInNextTick(error) {\n  setTimeout(function () {\n    throw error;\n  });\n}\nfunction clearSuspenseBoundary(parentInstance, suspenseInstance) {\n  var node = suspenseInstance,\n    depth = 0;\n  do {\n    var nextNode = node.nextSibling;\n    parentInstance.removeChild(node);\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node)) {\n        if (0 === depth) {\n          parentInstance.removeChild(nextNode);\n          retryIfBlockedOn(suspenseInstance);\n          return;\n        }\n        depth--;\n      } else (\"$\" !== node && \"$?\" !== node && \"$!\" !== node) || depth++;\n    node = nextNode;\n  } while (node);\n  retryIfBlockedOn(suspenseInstance);\n}\nfunction clearContainerSparingly(container) {\n  var nextNode = container.firstChild;\n  nextNode && 10 === nextNode.nodeType && (nextNode = nextNode.nextSibling);\n  for (; nextNode; ) {\n    var node = nextNode;\n    nextNode = nextNode.nextSibling;\n    switch (node.nodeName) {\n      case \"HTML\":\n      case \"HEAD\":\n      case \"BODY\":\n        clearContainerSparingly(node);\n        detachDeletedInstance(node);\n        continue;\n      case \"SCRIPT\":\n      case \"STYLE\":\n        continue;\n      case \"LINK\":\n        if (\"stylesheet\" === node.rel.toLowerCase()) continue;\n    }\n    container.removeChild(node);\n  }\n}\nfunction canHydrateInstance(instance, type, props, inRootOrSingleton) {\n  for (; 1 === instance.nodeType; ) {\n    var anyProps = props;\n    if (instance.nodeName.toLowerCase() !== type.toLowerCase()) {\n      if (\n        !inRootOrSingleton &&\n        (\"INPUT\" !== instance.nodeName || \"hidden\" !== instance.type)\n      )\n        break;\n    } else if (!inRootOrSingleton)\n      if (\"input\" === type && \"hidden\" === instance.type) {\n        var name = null == anyProps.name ? null : \"\" + anyProps.name;\n        if (\n          \"hidden\" === anyProps.type &&\n          instance.getAttribute(\"name\") === name\n        )\n          return instance;\n      } else return instance;\n    else if (!instance[internalHoistableMarker])\n      switch (type) {\n        case \"meta\":\n          if (!instance.hasAttribute(\"itemprop\")) break;\n          return instance;\n        case \"link\":\n          name = instance.getAttribute(\"rel\");\n          if (\"stylesheet\" === name && instance.hasAttribute(\"data-precedence\"))\n            break;\n          else if (\n            name !== anyProps.rel ||\n            instance.getAttribute(\"href\") !==\n              (null == anyProps.href ? null : anyProps.href) ||\n            instance.getAttribute(\"crossorigin\") !==\n              (null == anyProps.crossOrigin ? null : anyProps.crossOrigin) ||\n            instance.getAttribute(\"title\") !==\n              (null == anyProps.title ? null : anyProps.title)\n          )\n            break;\n          return instance;\n        case \"style\":\n          if (instance.hasAttribute(\"data-precedence\")) break;\n          return instance;\n        case \"script\":\n          name = instance.getAttribute(\"src\");\n          if (\n            (name !== (null == anyProps.src ? null : anyProps.src) ||\n              instance.getAttribute(\"type\") !==\n                (null == anyProps.type ? null : anyProps.type) ||\n              instance.getAttribute(\"crossorigin\") !==\n                (null == anyProps.crossOrigin ? null : anyProps.crossOrigin)) &&\n            name &&\n            instance.hasAttribute(\"async\") &&\n            !instance.hasAttribute(\"itemprop\")\n          )\n            break;\n          return instance;\n        default:\n          return instance;\n      }\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) break;\n  }\n  return null;\n}\nfunction canHydrateTextInstance(instance, text, inRootOrSingleton) {\n  if (\"\" === text) return null;\n  for (; 3 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction getNextHydratable(node) {\n  for (; null != node; node = node.nextSibling) {\n    var nodeType = node.nodeType;\n    if (1 === nodeType || 3 === nodeType) break;\n    if (8 === nodeType) {\n      nodeType = node.data;\n      if (\n        \"$\" === nodeType ||\n        \"$!\" === nodeType ||\n        \"$?\" === nodeType ||\n        \"F!\" === nodeType ||\n        \"F\" === nodeType\n      )\n        break;\n      if (\"/$\" === nodeType) return null;\n    }\n  }\n  return node;\n}\nfunction getParentSuspenseInstance(targetInstance) {\n  targetInstance = targetInstance.previousSibling;\n  for (var depth = 0; targetInstance; ) {\n    if (8 === targetInstance.nodeType) {\n      var data = targetInstance.data;\n      if (\"$\" === data || \"$!\" === data || \"$?\" === data) {\n        if (0 === depth) return targetInstance;\n        depth--;\n      } else \"/$\" === data && depth++;\n    }\n    targetInstance = targetInstance.previousSibling;\n  }\n  return null;\n}\nfunction resolveSingletonInstance(type, props, rootContainerInstance) {\n  props = getOwnerDocumentFromRootContainer(rootContainerInstance);\n  switch (type) {\n    case \"html\":\n      type = props.documentElement;\n      if (!type) throw Error(formatProdErrorMessage(452));\n      return type;\n    case \"head\":\n      type = props.head;\n      if (!type) throw Error(formatProdErrorMessage(453));\n      return type;\n    case \"body\":\n      type = props.body;\n      if (!type) throw Error(formatProdErrorMessage(454));\n      return type;\n    default:\n      throw Error(formatProdErrorMessage(451));\n  }\n}\nvar preloadPropsMap = new Map(),\n  preconnectsSet = new Set();\nfunction getHoistableRoot(container) {\n  return \"function\" === typeof container.getRootNode\n    ? container.getRootNode()\n    : container.ownerDocument;\n}\nvar previousDispatcher = ReactDOMSharedInternals.d;\nReactDOMSharedInternals.d = {\n  f: flushSyncWork,\n  r: requestFormReset,\n  D: prefetchDNS,\n  C: preconnect,\n  L: preload,\n  m: preloadModule,\n  X: preinitScript,\n  S: preinitStyle,\n  M: preinitModuleScript\n};\nfunction flushSyncWork() {\n  var previousWasRendering = previousDispatcher.f(),\n    wasRendering = flushSyncWork$1();\n  return previousWasRendering || wasRendering;\n}\nfunction requestFormReset(form) {\n  var formInst = getInstanceFromNode(form);\n  null !== formInst && 5 === formInst.tag && \"form\" === formInst.type\n    ? requestFormReset$1(formInst)\n    : previousDispatcher.r(form);\n}\nvar globalDocument = \"undefined\" === typeof document ? null : document;\nfunction preconnectAs(rel, href, crossOrigin) {\n  var ownerDocument = globalDocument;\n  if (ownerDocument && \"string\" === typeof href && href) {\n    var limitedEscapedHref =\n      escapeSelectorAttributeValueInsideDoubleQuotes(href);\n    limitedEscapedHref =\n      'link[rel=\"' + rel + '\"][href=\"' + limitedEscapedHref + '\"]';\n    \"string\" === typeof crossOrigin &&\n      (limitedEscapedHref += '[crossorigin=\"' + crossOrigin + '\"]');\n    preconnectsSet.has(limitedEscapedHref) ||\n      (preconnectsSet.add(limitedEscapedHref),\n      (rel = { rel: rel, crossOrigin: crossOrigin, href: href }),\n      null === ownerDocument.querySelector(limitedEscapedHref) &&\n        ((href = ownerDocument.createElement(\"link\")),\n        setInitialProperties(href, \"link\", rel),\n        markNodeAsHoistable(href),\n        ownerDocument.head.appendChild(href)));\n  }\n}\nfunction prefetchDNS(href) {\n  previousDispatcher.D(href);\n  preconnectAs(\"dns-prefetch\", href, null);\n}\nfunction preconnect(href, crossOrigin) {\n  previousDispatcher.C(href, crossOrigin);\n  preconnectAs(\"preconnect\", href, crossOrigin);\n}\nfunction preload(href, as, options) {\n  previousDispatcher.L(href, as, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href && as) {\n    var preloadSelector =\n      'link[rel=\"preload\"][as=\"' +\n      escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n      '\"]';\n    \"image\" === as\n      ? options && options.imageSrcSet\n        ? ((preloadSelector +=\n            '[imagesrcset=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(\n              options.imageSrcSet\n            ) +\n            '\"]'),\n          \"string\" === typeof options.imageSizes &&\n            (preloadSelector +=\n              '[imagesizes=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                options.imageSizes\n              ) +\n              '\"]'))\n        : (preloadSelector +=\n            '[href=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n            '\"]')\n      : (preloadSelector +=\n          '[href=\"' +\n          escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n          '\"]');\n    var key = preloadSelector;\n    switch (as) {\n      case \"style\":\n        key = getStyleKey(href);\n        break;\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    preloadPropsMap.has(key) ||\n      ((href = assign(\n        {\n          rel: \"preload\",\n          href:\n            \"image\" === as && options && options.imageSrcSet ? void 0 : href,\n          as: as\n        },\n        options\n      )),\n      preloadPropsMap.set(key, href),\n      null !== ownerDocument.querySelector(preloadSelector) ||\n        (\"style\" === as &&\n          ownerDocument.querySelector(getStylesheetSelectorFromKey(key))) ||\n        (\"script\" === as &&\n          ownerDocument.querySelector(getScriptSelectorFromKey(key))) ||\n        ((as = ownerDocument.createElement(\"link\")),\n        setInitialProperties(as, \"link\", href),\n        markNodeAsHoistable(as),\n        ownerDocument.head.appendChild(as)));\n  }\n}\nfunction preloadModule(href, options) {\n  previousDispatcher.m(href, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var as = options && \"string\" === typeof options.as ? options.as : \"script\",\n      preloadSelector =\n        'link[rel=\"modulepreload\"][as=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n        '\"][href=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n        '\"]',\n      key = preloadSelector;\n    switch (as) {\n      case \"audioworklet\":\n      case \"paintworklet\":\n      case \"serviceworker\":\n      case \"sharedworker\":\n      case \"worker\":\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    if (\n      !preloadPropsMap.has(key) &&\n      ((href = assign({ rel: \"modulepreload\", href: href }, options)),\n      preloadPropsMap.set(key, href),\n      null === ownerDocument.querySelector(preloadSelector))\n    ) {\n      switch (as) {\n        case \"audioworklet\":\n        case \"paintworklet\":\n        case \"serviceworker\":\n        case \"sharedworker\":\n        case \"worker\":\n        case \"script\":\n          if (ownerDocument.querySelector(getScriptSelectorFromKey(key)))\n            return;\n      }\n      as = ownerDocument.createElement(\"link\");\n      setInitialProperties(as, \"link\", href);\n      markNodeAsHoistable(as);\n      ownerDocument.head.appendChild(as);\n    }\n  }\n}\nfunction preinitStyle(href, precedence, options) {\n  previousDispatcher.S(href, precedence, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var styles = getResourcesFromRoot(ownerDocument).hoistableStyles,\n      key = getStyleKey(href);\n    precedence = precedence || \"default\";\n    var resource = styles.get(key);\n    if (!resource) {\n      var state = { loading: 0, preload: null };\n      if (\n        (resource = ownerDocument.querySelector(\n          getStylesheetSelectorFromKey(key)\n        ))\n      )\n        state.loading = 5;\n      else {\n        href = assign(\n          { rel: \"stylesheet\", href: href, \"data-precedence\": precedence },\n          options\n        );\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForStylesheet(href, options);\n        var link = (resource = ownerDocument.createElement(\"link\"));\n        markNodeAsHoistable(link);\n        setInitialProperties(link, \"link\", href);\n        link._p = new Promise(function (resolve, reject) {\n          link.onload = resolve;\n          link.onerror = reject;\n        });\n        link.addEventListener(\"load\", function () {\n          state.loading |= 1;\n        });\n        link.addEventListener(\"error\", function () {\n          state.loading |= 2;\n        });\n        state.loading |= 4;\n        insertStylesheet(resource, precedence, ownerDocument);\n      }\n      resource = {\n        type: \"stylesheet\",\n        instance: resource,\n        count: 1,\n        state: state\n      };\n      styles.set(key, resource);\n    }\n  }\n}\nfunction preinitScript(src, options) {\n  previousDispatcher.X(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0 }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction preinitModuleScript(src, options) {\n  previousDispatcher.M(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0, type: \"module\" }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction getResource(type, currentProps, pendingProps, currentResource) {\n  var JSCompiler_inline_result = (JSCompiler_inline_result =\n    rootInstanceStackCursor.current)\n    ? getHoistableRoot(JSCompiler_inline_result)\n    : null;\n  if (!JSCompiler_inline_result) throw Error(formatProdErrorMessage(446));\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return null;\n    case \"style\":\n      return \"string\" === typeof pendingProps.precedence &&\n        \"string\" === typeof pendingProps.href\n        ? ((currentProps = getStyleKey(pendingProps.href)),\n          (pendingProps = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles),\n          (currentResource = pendingProps.get(currentProps)),\n          currentResource ||\n            ((currentResource = {\n              type: \"style\",\n              instance: null,\n              count: 0,\n              state: null\n            }),\n            pendingProps.set(currentProps, currentResource)),\n          currentResource)\n        : { type: \"void\", instance: null, count: 0, state: null };\n    case \"link\":\n      if (\n        \"stylesheet\" === pendingProps.rel &&\n        \"string\" === typeof pendingProps.href &&\n        \"string\" === typeof pendingProps.precedence\n      ) {\n        type = getStyleKey(pendingProps.href);\n        var styles$242 = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles,\n          resource$243 = styles$242.get(type);\n        resource$243 ||\n          ((JSCompiler_inline_result =\n            JSCompiler_inline_result.ownerDocument || JSCompiler_inline_result),\n          (resource$243 = {\n            type: \"stylesheet\",\n            instance: null,\n            count: 0,\n            state: { loading: 0, preload: null }\n          }),\n          styles$242.set(type, resource$243),\n          (styles$242 = JSCompiler_inline_result.querySelector(\n            getStylesheetSelectorFromKey(type)\n          )) &&\n            !styles$242._p &&\n            ((resource$243.instance = styles$242),\n            (resource$243.state.loading = 5)),\n          preloadPropsMap.has(type) ||\n            ((pendingProps = {\n              rel: \"preload\",\n              as: \"style\",\n              href: pendingProps.href,\n              crossOrigin: pendingProps.crossOrigin,\n              integrity: pendingProps.integrity,\n              media: pendingProps.media,\n              hrefLang: pendingProps.hrefLang,\n              referrerPolicy: pendingProps.referrerPolicy\n            }),\n            preloadPropsMap.set(type, pendingProps),\n            styles$242 ||\n              preloadStylesheet(\n                JSCompiler_inline_result,\n                type,\n                pendingProps,\n                resource$243.state\n              )));\n        if (currentProps && null === currentResource)\n          throw Error(formatProdErrorMessage(528, \"\"));\n        return resource$243;\n      }\n      if (currentProps && null !== currentResource)\n        throw Error(formatProdErrorMessage(529, \"\"));\n      return null;\n    case \"script\":\n      return (\n        (currentProps = pendingProps.async),\n        (pendingProps = pendingProps.src),\n        \"string\" === typeof pendingProps &&\n        currentProps &&\n        \"function\" !== typeof currentProps &&\n        \"symbol\" !== typeof currentProps\n          ? ((currentProps = getScriptKey(pendingProps)),\n            (pendingProps = getResourcesFromRoot(\n              JSCompiler_inline_result\n            ).hoistableScripts),\n            (currentResource = pendingProps.get(currentProps)),\n            currentResource ||\n              ((currentResource = {\n                type: \"script\",\n                instance: null,\n                count: 0,\n                state: null\n              }),\n              pendingProps.set(currentProps, currentResource)),\n            currentResource)\n          : { type: \"void\", instance: null, count: 0, state: null }\n      );\n    default:\n      throw Error(formatProdErrorMessage(444, type));\n  }\n}\nfunction getStyleKey(href) {\n  return 'href=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(href) + '\"';\n}\nfunction getStylesheetSelectorFromKey(key) {\n  return 'link[rel=\"stylesheet\"][' + key + \"]\";\n}\nfunction stylesheetPropsFromRawProps(rawProps) {\n  return assign({}, rawProps, {\n    \"data-precedence\": rawProps.precedence,\n    precedence: null\n  });\n}\nfunction preloadStylesheet(ownerDocument, key, preloadProps, state) {\n  ownerDocument.querySelector('link[rel=\"preload\"][as=\"style\"][' + key + \"]\")\n    ? (state.loading = 1)\n    : ((key = ownerDocument.createElement(\"link\")),\n      (state.preload = key),\n      key.addEventListener(\"load\", function () {\n        return (state.loading |= 1);\n      }),\n      key.addEventListener(\"error\", function () {\n        return (state.loading |= 2);\n      }),\n      setInitialProperties(key, \"link\", preloadProps),\n      markNodeAsHoistable(key),\n      ownerDocument.head.appendChild(key));\n}\nfunction getScriptKey(src) {\n  return '[src=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(src) + '\"]';\n}\nfunction getScriptSelectorFromKey(key) {\n  return \"script[async]\" + key;\n}\nfunction acquireResource(hoistableRoot, resource, props) {\n  resource.count++;\n  if (null === resource.instance)\n    switch (resource.type) {\n      case \"style\":\n        var instance = hoistableRoot.querySelector(\n          'style[data-href~=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(props.href) +\n            '\"]'\n        );\n        if (instance)\n          return (\n            (resource.instance = instance),\n            markNodeAsHoistable(instance),\n            instance\n          );\n        var styleProps = assign({}, props, {\n          \"data-href\": props.href,\n          \"data-precedence\": props.precedence,\n          href: null,\n          precedence: null\n        });\n        instance = (hoistableRoot.ownerDocument || hoistableRoot).createElement(\n          \"style\"\n        );\n        markNodeAsHoistable(instance);\n        setInitialProperties(instance, \"style\", styleProps);\n        insertStylesheet(instance, props.precedence, hoistableRoot);\n        return (resource.instance = instance);\n      case \"stylesheet\":\n        styleProps = getStyleKey(props.href);\n        var instance$248 = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(styleProps)\n        );\n        if (instance$248)\n          return (\n            (resource.state.loading |= 4),\n            (resource.instance = instance$248),\n            markNodeAsHoistable(instance$248),\n            instance$248\n          );\n        instance = stylesheetPropsFromRawProps(props);\n        (styleProps = preloadPropsMap.get(styleProps)) &&\n          adoptPreloadPropsForStylesheet(instance, styleProps);\n        instance$248 = (\n          hoistableRoot.ownerDocument || hoistableRoot\n        ).createElement(\"link\");\n        markNodeAsHoistable(instance$248);\n        var linkInstance = instance$248;\n        linkInstance._p = new Promise(function (resolve, reject) {\n          linkInstance.onload = resolve;\n          linkInstance.onerror = reject;\n        });\n        setInitialProperties(instance$248, \"link\", instance);\n        resource.state.loading |= 4;\n        insertStylesheet(instance$248, props.precedence, hoistableRoot);\n        return (resource.instance = instance$248);\n      case \"script\":\n        instance$248 = getScriptKey(props.src);\n        if (\n          (styleProps = hoistableRoot.querySelector(\n            getScriptSelectorFromKey(instance$248)\n          ))\n        )\n          return (\n            (resource.instance = styleProps),\n            markNodeAsHoistable(styleProps),\n            styleProps\n          );\n        instance = props;\n        if ((styleProps = preloadPropsMap.get(instance$248)))\n          (instance = assign({}, props)),\n            adoptPreloadPropsForScript(instance, styleProps);\n        hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n        styleProps = hoistableRoot.createElement(\"script\");\n        markNodeAsHoistable(styleProps);\n        setInitialProperties(styleProps, \"link\", instance);\n        hoistableRoot.head.appendChild(styleProps);\n        return (resource.instance = styleProps);\n      case \"void\":\n        return null;\n      default:\n        throw Error(formatProdErrorMessage(443, resource.type));\n    }\n  else\n    \"stylesheet\" === resource.type &&\n      0 === (resource.state.loading & 4) &&\n      ((instance = resource.instance),\n      (resource.state.loading |= 4),\n      insertStylesheet(instance, props.precedence, hoistableRoot));\n  return resource.instance;\n}\nfunction insertStylesheet(instance, precedence, root) {\n  for (\n    var nodes = root.querySelectorAll(\n        'link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'\n      ),\n      last = nodes.length ? nodes[nodes.length - 1] : null,\n      prior = last,\n      i = 0;\n    i < nodes.length;\n    i++\n  ) {\n    var node = nodes[i];\n    if (node.dataset.precedence === precedence) prior = node;\n    else if (prior !== last) break;\n  }\n  prior\n    ? prior.parentNode.insertBefore(instance, prior.nextSibling)\n    : ((precedence = 9 === root.nodeType ? root.head : root),\n      precedence.insertBefore(instance, precedence.firstChild));\n}\nfunction adoptPreloadPropsForStylesheet(stylesheetProps, preloadProps) {\n  null == stylesheetProps.crossOrigin &&\n    (stylesheetProps.crossOrigin = preloadProps.crossOrigin);\n  null == stylesheetProps.referrerPolicy &&\n    (stylesheetProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == stylesheetProps.title && (stylesheetProps.title = preloadProps.title);\n}\nfunction adoptPreloadPropsForScript(scriptProps, preloadProps) {\n  null == scriptProps.crossOrigin &&\n    (scriptProps.crossOrigin = preloadProps.crossOrigin);\n  null == scriptProps.referrerPolicy &&\n    (scriptProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == scriptProps.integrity &&\n    (scriptProps.integrity = preloadProps.integrity);\n}\nvar tagCaches = null;\nfunction getHydratableHoistableCache(type, keyAttribute, ownerDocument) {\n  if (null === tagCaches) {\n    var cache = new Map();\n    var caches = (tagCaches = new Map());\n    caches.set(ownerDocument, cache);\n  } else\n    (caches = tagCaches),\n      (cache = caches.get(ownerDocument)),\n      cache || ((cache = new Map()), caches.set(ownerDocument, cache));\n  if (cache.has(type)) return cache;\n  cache.set(type, null);\n  ownerDocument = ownerDocument.getElementsByTagName(type);\n  for (caches = 0; caches < ownerDocument.length; caches++) {\n    var node = ownerDocument[caches];\n    if (\n      !(\n        node[internalHoistableMarker] ||\n        node[internalInstanceKey] ||\n        (\"link\" === type && \"stylesheet\" === node.getAttribute(\"rel\"))\n      ) &&\n      \"http://www.w3.org/2000/svg\" !== node.namespaceURI\n    ) {\n      var nodeKey = node.getAttribute(keyAttribute) || \"\";\n      nodeKey = type + nodeKey;\n      var existing = cache.get(nodeKey);\n      existing ? existing.push(node) : cache.set(nodeKey, [node]);\n    }\n  }\n  return cache;\n}\nfunction mountHoistable(hoistableRoot, type, instance) {\n  hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n  hoistableRoot.head.insertBefore(\n    instance,\n    \"title\" === type ? hoistableRoot.querySelector(\"head > title\") : null\n  );\n}\nfunction isHostHoistableType(type, props, hostContext) {\n  if (1 === hostContext || null != props.itemProp) return !1;\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return !0;\n    case \"style\":\n      if (\n        \"string\" !== typeof props.precedence ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href\n      )\n        break;\n      return !0;\n    case \"link\":\n      if (\n        \"string\" !== typeof props.rel ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href ||\n        props.onLoad ||\n        props.onError\n      )\n        break;\n      switch (props.rel) {\n        case \"stylesheet\":\n          return (\n            (type = props.disabled),\n            \"string\" === typeof props.precedence && null == type\n          );\n        default:\n          return !0;\n      }\n    case \"script\":\n      if (\n        props.async &&\n        \"function\" !== typeof props.async &&\n        \"symbol\" !== typeof props.async &&\n        !props.onLoad &&\n        !props.onError &&\n        props.src &&\n        \"string\" === typeof props.src\n      )\n        return !0;\n  }\n  return !1;\n}\nfunction preloadResource(resource) {\n  return \"stylesheet\" === resource.type && 0 === (resource.state.loading & 3)\n    ? !1\n    : !0;\n}\nvar suspendedState = null;\nfunction noop() {}\nfunction suspendResource(hoistableRoot, resource, props) {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  if (\n    \"stylesheet\" === resource.type &&\n    (\"string\" !== typeof props.media ||\n      !1 !== matchMedia(props.media).matches) &&\n    0 === (resource.state.loading & 4)\n  ) {\n    if (null === resource.instance) {\n      var key = getStyleKey(props.href),\n        instance = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(key)\n        );\n      if (instance) {\n        hoistableRoot = instance._p;\n        null !== hoistableRoot &&\n          \"object\" === typeof hoistableRoot &&\n          \"function\" === typeof hoistableRoot.then &&\n          (state.count++,\n          (state = onUnsuspend.bind(state)),\n          hoistableRoot.then(state, state));\n        resource.state.loading |= 4;\n        resource.instance = instance;\n        markNodeAsHoistable(instance);\n        return;\n      }\n      instance = hoistableRoot.ownerDocument || hoistableRoot;\n      props = stylesheetPropsFromRawProps(props);\n      (key = preloadPropsMap.get(key)) &&\n        adoptPreloadPropsForStylesheet(props, key);\n      instance = instance.createElement(\"link\");\n      markNodeAsHoistable(instance);\n      var linkInstance = instance;\n      linkInstance._p = new Promise(function (resolve, reject) {\n        linkInstance.onload = resolve;\n        linkInstance.onerror = reject;\n      });\n      setInitialProperties(instance, \"link\", props);\n      resource.instance = instance;\n    }\n    null === state.stylesheets && (state.stylesheets = new Map());\n    state.stylesheets.set(resource, hoistableRoot);\n    (hoistableRoot = resource.state.preload) &&\n      0 === (resource.state.loading & 3) &&\n      (state.count++,\n      (resource = onUnsuspend.bind(state)),\n      hoistableRoot.addEventListener(\"load\", resource),\n      hoistableRoot.addEventListener(\"error\", resource));\n  }\n}\nfunction waitForCommitToBeReady() {\n  if (null === suspendedState) throw Error(formatProdErrorMessage(475));\n  var state = suspendedState;\n  state.stylesheets &&\n    0 === state.count &&\n    insertSuspendedStylesheets(state, state.stylesheets);\n  return 0 < state.count\n    ? function (commit) {\n        var stylesheetTimer = setTimeout(function () {\n          state.stylesheets &&\n            insertSuspendedStylesheets(state, state.stylesheets);\n          if (state.unsuspend) {\n            var unsuspend = state.unsuspend;\n            state.unsuspend = null;\n            unsuspend();\n          }\n        }, 6e4);\n        state.unsuspend = commit;\n        return function () {\n          state.unsuspend = null;\n          clearTimeout(stylesheetTimer);\n        };\n      }\n    : null;\n}\nfunction onUnsuspend() {\n  this.count--;\n  if (0 === this.count)\n    if (this.stylesheets) insertSuspendedStylesheets(this, this.stylesheets);\n    else if (this.unsuspend) {\n      var unsuspend = this.unsuspend;\n      this.unsuspend = null;\n      unsuspend();\n    }\n}\nvar precedencesByRoot = null;\nfunction insertSuspendedStylesheets(state, resources) {\n  state.stylesheets = null;\n  null !== state.unsuspend &&\n    (state.count++,\n    (precedencesByRoot = new Map()),\n    resources.forEach(insertStylesheetIntoRoot, state),\n    (precedencesByRoot = null),\n    onUnsuspend.call(state));\n}\nfunction insertStylesheetIntoRoot(root, resource) {\n  if (!(resource.state.loading & 4)) {\n    var precedences = precedencesByRoot.get(root);\n    if (precedences) var last = precedences.get(null);\n    else {\n      precedences = new Map();\n      precedencesByRoot.set(root, precedences);\n      for (\n        var nodes = root.querySelectorAll(\n            \"link[data-precedence],style[data-precedence]\"\n          ),\n          i = 0;\n        i < nodes.length;\n        i++\n      ) {\n        var node = nodes[i];\n        if (\n          \"LINK\" === node.nodeName ||\n          \"not all\" !== node.getAttribute(\"media\")\n        )\n          precedences.set(node.dataset.precedence, node), (last = node);\n      }\n      last && precedences.set(null, last);\n    }\n    nodes = resource.instance;\n    node = nodes.getAttribute(\"data-precedence\");\n    i = precedences.get(node) || last;\n    i === last && precedences.set(null, nodes);\n    precedences.set(node, nodes);\n    this.count++;\n    last = onUnsuspend.bind(this);\n    nodes.addEventListener(\"load\", last);\n    nodes.addEventListener(\"error\", last);\n    i\n      ? i.parentNode.insertBefore(nodes, i.nextSibling)\n      : ((root = 9 === root.nodeType ? root.head : root),\n        root.insertBefore(nodes, root.firstChild));\n    resource.state.loading |= 4;\n  }\n}\nvar HostTransitionContext = {\n  $$typeof: REACT_CONTEXT_TYPE,\n  Provider: null,\n  Consumer: null,\n  _currentValue: sharedNotPendingObject,\n  _currentValue2: sharedNotPendingObject,\n  _threadCount: 0\n};\nfunction FiberRootNode(\n  containerInfo,\n  tag,\n  hydrate,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  formState\n) {\n  this.tag = 1;\n  this.containerInfo = containerInfo;\n  this.finishedWork =\n    this.pingCache =\n    this.current =\n    this.pendingChildren =\n      null;\n  this.timeoutHandle = -1;\n  this.callbackNode =\n    this.next =\n    this.pendingContext =\n    this.context =\n    this.cancelPendingCommit =\n      null;\n  this.callbackPriority = 0;\n  this.expirationTimes = createLaneMap(-1);\n  this.entangledLanes =\n    this.shellSuspendCounter =\n    this.errorRecoveryDisabledLanes =\n    this.finishedLanes =\n    this.expiredLanes =\n    this.warmLanes =\n    this.pingedLanes =\n    this.suspendedLanes =\n    this.pendingLanes =\n      0;\n  this.entanglements = createLaneMap(0);\n  this.hiddenUpdates = createLaneMap(null);\n  this.identifierPrefix = identifierPrefix;\n  this.onUncaughtError = onUncaughtError;\n  this.onCaughtError = onCaughtError;\n  this.onRecoverableError = onRecoverableError;\n  this.pooledCache = null;\n  this.pooledCacheLanes = 0;\n  this.formState = formState;\n  this.incompleteTransitions = new Map();\n}\nfunction createFiberRoot(\n  containerInfo,\n  tag,\n  hydrate,\n  initialChildren,\n  hydrationCallbacks,\n  isStrictMode,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  transitionCallbacks,\n  formState\n) {\n  containerInfo = new FiberRootNode(\n    containerInfo,\n    tag,\n    hydrate,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    formState\n  );\n  tag = 1;\n  !0 === isStrictMode && (tag |= 24);\n  isStrictMode = createFiberImplClass(3, null, null, tag);\n  containerInfo.current = isStrictMode;\n  isStrictMode.stateNode = containerInfo;\n  tag = createCache();\n  tag.refCount++;\n  containerInfo.pooledCache = tag;\n  tag.refCount++;\n  isStrictMode.memoizedState = {\n    element: initialChildren,\n    isDehydrated: hydrate,\n    cache: tag\n  };\n  initializeUpdateQueue(isStrictMode);\n  return containerInfo;\n}\nfunction getContextForSubtree(parentComponent) {\n  if (!parentComponent) return emptyContextObject;\n  parentComponent = emptyContextObject;\n  return parentComponent;\n}\nfunction updateContainerImpl(\n  rootFiber,\n  lane,\n  element,\n  container,\n  parentComponent,\n  callback\n) {\n  parentComponent = getContextForSubtree(parentComponent);\n  null === container.context\n    ? (container.context = parentComponent)\n    : (container.pendingContext = parentComponent);\n  container = createUpdate(lane);\n  container.payload = { element: element };\n  callback = void 0 === callback ? null : callback;\n  null !== callback && (container.callback = callback);\n  element = enqueueUpdate(rootFiber, container, lane);\n  null !== element &&\n    (scheduleUpdateOnFiber(element, rootFiber, lane),\n    entangleTransitions(element, rootFiber, lane));\n}\nfunction markRetryLaneImpl(fiber, retryLane) {\n  fiber = fiber.memoizedState;\n  if (null !== fiber && null !== fiber.dehydrated) {\n    var a = fiber.retryLane;\n    fiber.retryLane = 0 !== a && a < retryLane ? a : retryLane;\n  }\n}\nfunction markRetryLaneIfNotHydrated(fiber, retryLane) {\n  markRetryLaneImpl(fiber, retryLane);\n  (fiber = fiber.alternate) && markRetryLaneImpl(fiber, retryLane);\n}\nfunction attemptContinuousHydration(fiber) {\n  if (13 === fiber.tag) {\n    var root = enqueueConcurrentRenderForLane(fiber, 67108864);\n    null !== root && scheduleUpdateOnFiber(root, fiber, 67108864);\n    markRetryLaneIfNotHydrated(fiber, 67108864);\n  }\n}\nvar _enabled = !0;\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 8),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchEvent(\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (_enabled) {\n    var blockedOn = findInstanceBlockingEvent(nativeEvent);\n    if (null === blockedOn)\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        return_targetInst,\n        targetContainer\n      ),\n        clearIfContinuousEvent(domEventName, nativeEvent);\n    else if (\n      queueIfContinuousEvent(\n        blockedOn,\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent\n      )\n    )\n      nativeEvent.stopPropagation();\n    else if (\n      (clearIfContinuousEvent(domEventName, nativeEvent),\n      eventSystemFlags & 4 &&\n        -1 < discreteReplayableEvents.indexOf(domEventName))\n    ) {\n      for (; null !== blockedOn; ) {\n        var fiber = getInstanceFromNode(blockedOn);\n        if (null !== fiber)\n          switch (fiber.tag) {\n            case 3:\n              fiber = fiber.stateNode;\n              if (fiber.current.memoizedState.isDehydrated) {\n                var lanes = getHighestPriorityLanes(fiber.pendingLanes);\n                if (0 !== lanes) {\n                  var root = fiber;\n                  root.pendingLanes |= 2;\n                  for (root.entangledLanes |= 2; lanes; ) {\n                    var lane = 1 << (31 - clz32(lanes));\n                    root.entanglements[1] |= lane;\n                    lanes &= ~lane;\n                  }\n                  ensureRootIsScheduled(fiber);\n                  0 === (executionContext & 6) &&\n                    ((workInProgressRootRenderTargetTime = now() + 500),\n                    flushSyncWorkAcrossRoots_impl(0, !1));\n                }\n              }\n              break;\n            case 13:\n              (root = enqueueConcurrentRenderForLane(fiber, 2)),\n                null !== root && scheduleUpdateOnFiber(root, fiber, 2),\n                flushSyncWork$1(),\n                markRetryLaneIfNotHydrated(fiber, 2);\n          }\n        fiber = findInstanceBlockingEvent(nativeEvent);\n        null === fiber &&\n          dispatchEventForPluginEventSystem(\n            domEventName,\n            eventSystemFlags,\n            nativeEvent,\n            return_targetInst,\n            targetContainer\n          );\n        if (fiber === blockedOn) break;\n        blockedOn = fiber;\n      }\n      null !== blockedOn && nativeEvent.stopPropagation();\n    } else\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        null,\n        targetContainer\n      );\n  }\n}\nfunction findInstanceBlockingEvent(nativeEvent) {\n  nativeEvent = getEventTarget(nativeEvent);\n  return findInstanceBlockingTarget(nativeEvent);\n}\nvar return_targetInst = null;\nfunction findInstanceBlockingTarget(targetNode) {\n  return_targetInst = null;\n  targetNode = getClosestInstanceFromNode(targetNode);\n  if (null !== targetNode) {\n    var nearestMounted = getNearestMountedFiber(targetNode);\n    if (null === nearestMounted) targetNode = null;\n    else {\n      var tag = nearestMounted.tag;\n      if (13 === tag) {\n        targetNode = getSuspenseInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (3 === tag) {\n        if (nearestMounted.stateNode.current.memoizedState.isDehydrated)\n          return 3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        targetNode = null;\n      } else nearestMounted !== targetNode && (targetNode = null);\n    }\n  }\n  return_targetInst = targetNode;\n  return null;\n}\nfunction getEventPriority(domEventName) {\n  switch (domEventName) {\n    case \"beforetoggle\":\n    case \"cancel\":\n    case \"click\":\n    case \"close\":\n    case \"contextmenu\":\n    case \"copy\":\n    case \"cut\":\n    case \"auxclick\":\n    case \"dblclick\":\n    case \"dragend\":\n    case \"dragstart\":\n    case \"drop\":\n    case \"focusin\":\n    case \"focusout\":\n    case \"input\":\n    case \"invalid\":\n    case \"keydown\":\n    case \"keypress\":\n    case \"keyup\":\n    case \"mousedown\":\n    case \"mouseup\":\n    case \"paste\":\n    case \"pause\":\n    case \"play\":\n    case \"pointercancel\":\n    case \"pointerdown\":\n    case \"pointerup\":\n    case \"ratechange\":\n    case \"reset\":\n    case \"resize\":\n    case \"seeked\":\n    case \"submit\":\n    case \"toggle\":\n    case \"touchcancel\":\n    case \"touchend\":\n    case \"touchstart\":\n    case \"volumechange\":\n    case \"change\":\n    case \"selectionchange\":\n    case \"textInput\":\n    case \"compositionstart\":\n    case \"compositionend\":\n    case \"compositionupdate\":\n    case \"beforeblur\":\n    case \"afterblur\":\n    case \"beforeinput\":\n    case \"blur\":\n    case \"fullscreenchange\":\n    case \"focus\":\n    case \"hashchange\":\n    case \"popstate\":\n    case \"select\":\n    case \"selectstart\":\n      return 2;\n    case \"drag\":\n    case \"dragenter\":\n    case \"dragexit\":\n    case \"dragleave\":\n    case \"dragover\":\n    case \"mousemove\":\n    case \"mouseout\":\n    case \"mouseover\":\n    case \"pointermove\":\n    case \"pointerout\":\n    case \"pointerover\":\n    case \"scroll\":\n    case \"touchmove\":\n    case \"wheel\":\n    case \"mouseenter\":\n    case \"mouseleave\":\n    case \"pointerenter\":\n    case \"pointerleave\":\n      return 8;\n    case \"message\":\n      switch (getCurrentPriorityLevel()) {\n        case ImmediatePriority:\n          return 2;\n        case UserBlockingPriority:\n          return 8;\n        case NormalPriority$1:\n        case LowPriority:\n          return 32;\n        case IdlePriority:\n          return 268435456;\n        default:\n          return 32;\n      }\n    default:\n      return 32;\n  }\n}\nvar hasScheduledReplayAttempt = !1,\n  queuedFocus = null,\n  queuedDrag = null,\n  queuedMouse = null,\n  queuedPointers = new Map(),\n  queuedPointerCaptures = new Map(),\n  queuedExplicitHydrationTargets = [],\n  discreteReplayableEvents =\n    \"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\n      \" \"\n    );\nfunction clearIfContinuousEvent(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"focusin\":\n    case \"focusout\":\n      queuedFocus = null;\n      break;\n    case \"dragenter\":\n    case \"dragleave\":\n      queuedDrag = null;\n      break;\n    case \"mouseover\":\n    case \"mouseout\":\n      queuedMouse = null;\n      break;\n    case \"pointerover\":\n    case \"pointerout\":\n      queuedPointers.delete(nativeEvent.pointerId);\n      break;\n    case \"gotpointercapture\":\n    case \"lostpointercapture\":\n      queuedPointerCaptures.delete(nativeEvent.pointerId);\n  }\n}\nfunction accumulateOrCreateContinuousQueuedReplayableEvent(\n  existingQueuedEvent,\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (\n    null === existingQueuedEvent ||\n    existingQueuedEvent.nativeEvent !== nativeEvent\n  )\n    return (\n      (existingQueuedEvent = {\n        blockedOn: blockedOn,\n        domEventName: domEventName,\n        eventSystemFlags: eventSystemFlags,\n        nativeEvent: nativeEvent,\n        targetContainers: [targetContainer]\n      }),\n      null !== blockedOn &&\n        ((blockedOn = getInstanceFromNode(blockedOn)),\n        null !== blockedOn && attemptContinuousHydration(blockedOn)),\n      existingQueuedEvent\n    );\n  existingQueuedEvent.eventSystemFlags |= eventSystemFlags;\n  blockedOn = existingQueuedEvent.targetContainers;\n  null !== targetContainer &&\n    -1 === blockedOn.indexOf(targetContainer) &&\n    blockedOn.push(targetContainer);\n  return existingQueuedEvent;\n}\nfunction queueIfContinuousEvent(\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  switch (domEventName) {\n    case \"focusin\":\n      return (\n        (queuedFocus = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedFocus,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"dragenter\":\n      return (\n        (queuedDrag = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedDrag,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"mouseover\":\n      return (\n        (queuedMouse = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedMouse,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"pointerover\":\n      var pointerId = nativeEvent.pointerId;\n      queuedPointers.set(\n        pointerId,\n        accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedPointers.get(pointerId) || null,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )\n      );\n      return !0;\n    case \"gotpointercapture\":\n      return (\n        (pointerId = nativeEvent.pointerId),\n        queuedPointerCaptures.set(\n          pointerId,\n          accumulateOrCreateContinuousQueuedReplayableEvent(\n            queuedPointerCaptures.get(pointerId) || null,\n            blockedOn,\n            domEventName,\n            eventSystemFlags,\n            targetContainer,\n            nativeEvent\n          )\n        ),\n        !0\n      );\n  }\n  return !1;\n}\nfunction attemptExplicitHydrationTarget(queuedTarget) {\n  var targetInst = getClosestInstanceFromNode(queuedTarget.target);\n  if (null !== targetInst) {\n    var nearestMounted = getNearestMountedFiber(targetInst);\n    if (null !== nearestMounted)\n      if (((targetInst = nearestMounted.tag), 13 === targetInst)) {\n        if (\n          ((targetInst = getSuspenseInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            if (13 === nearestMounted.tag) {\n              var lane = requestUpdateLane(),\n                root = enqueueConcurrentRenderForLane(nearestMounted, lane);\n              null !== root &&\n                scheduleUpdateOnFiber(root, nearestMounted, lane);\n              markRetryLaneIfNotHydrated(nearestMounted, lane);\n            }\n          });\n          return;\n        }\n      } else if (\n        3 === targetInst &&\n        nearestMounted.stateNode.current.memoizedState.isDehydrated\n      ) {\n        queuedTarget.blockedOn =\n          3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        return;\n      }\n  }\n  queuedTarget.blockedOn = null;\n}\nfunction attemptReplayContinuousQueuedEvent(queuedEvent) {\n  if (null !== queuedEvent.blockedOn) return !1;\n  for (\n    var targetContainers = queuedEvent.targetContainers;\n    0 < targetContainers.length;\n\n  ) {\n    var nextBlockedOn = findInstanceBlockingEvent(queuedEvent.nativeEvent);\n    if (null === nextBlockedOn) {\n      nextBlockedOn = queuedEvent.nativeEvent;\n      var nativeEventClone = new nextBlockedOn.constructor(\n        nextBlockedOn.type,\n        nextBlockedOn\n      );\n      currentReplayingEvent = nativeEventClone;\n      nextBlockedOn.target.dispatchEvent(nativeEventClone);\n      currentReplayingEvent = null;\n    } else\n      return (\n        (targetContainers = getInstanceFromNode(nextBlockedOn)),\n        null !== targetContainers &&\n          attemptContinuousHydration(targetContainers),\n        (queuedEvent.blockedOn = nextBlockedOn),\n        !1\n      );\n    targetContainers.shift();\n  }\n  return !0;\n}\nfunction attemptReplayContinuousQueuedEventInMap(queuedEvent, key, map) {\n  attemptReplayContinuousQueuedEvent(queuedEvent) && map.delete(key);\n}\nfunction replayUnblockedEvents() {\n  hasScheduledReplayAttempt = !1;\n  null !== queuedFocus &&\n    attemptReplayContinuousQueuedEvent(queuedFocus) &&\n    (queuedFocus = null);\n  null !== queuedDrag &&\n    attemptReplayContinuousQueuedEvent(queuedDrag) &&\n    (queuedDrag = null);\n  null !== queuedMouse &&\n    attemptReplayContinuousQueuedEvent(queuedMouse) &&\n    (queuedMouse = null);\n  queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap);\n  queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap);\n}\nfunction scheduleCallbackIfUnblocked(queuedEvent, unblocked) {\n  queuedEvent.blockedOn === unblocked &&\n    ((queuedEvent.blockedOn = null),\n    hasScheduledReplayAttempt ||\n      ((hasScheduledReplayAttempt = !0),\n      Scheduler.unstable_scheduleCallback(\n        Scheduler.unstable_NormalPriority,\n        replayUnblockedEvents\n      )));\n}\nvar lastScheduledReplayQueue = null;\nfunction scheduleReplayQueueIfNeeded(formReplayingQueue) {\n  lastScheduledReplayQueue !== formReplayingQueue &&\n    ((lastScheduledReplayQueue = formReplayingQueue),\n    Scheduler.unstable_scheduleCallback(\n      Scheduler.unstable_NormalPriority,\n      function () {\n        lastScheduledReplayQueue === formReplayingQueue &&\n          (lastScheduledReplayQueue = null);\n        for (var i = 0; i < formReplayingQueue.length; i += 3) {\n          var form = formReplayingQueue[i],\n            submitterOrAction = formReplayingQueue[i + 1],\n            formData = formReplayingQueue[i + 2];\n          if (\"function\" !== typeof submitterOrAction)\n            if (null === findInstanceBlockingTarget(submitterOrAction || form))\n              continue;\n            else break;\n          var formInst = getInstanceFromNode(form);\n          null !== formInst &&\n            (formReplayingQueue.splice(i, 3),\n            (i -= 3),\n            startHostTransition(\n              formInst,\n              {\n                pending: !0,\n                data: formData,\n                method: form.method,\n                action: submitterOrAction\n              },\n              submitterOrAction,\n              formData\n            ));\n        }\n      }\n    ));\n}\nfunction retryIfBlockedOn(unblocked) {\n  function unblock(queuedEvent) {\n    return scheduleCallbackIfUnblocked(queuedEvent, unblocked);\n  }\n  null !== queuedFocus && scheduleCallbackIfUnblocked(queuedFocus, unblocked);\n  null !== queuedDrag && scheduleCallbackIfUnblocked(queuedDrag, unblocked);\n  null !== queuedMouse && scheduleCallbackIfUnblocked(queuedMouse, unblocked);\n  queuedPointers.forEach(unblock);\n  queuedPointerCaptures.forEach(unblock);\n  for (var i = 0; i < queuedExplicitHydrationTargets.length; i++) {\n    var queuedTarget = queuedExplicitHydrationTargets[i];\n    queuedTarget.blockedOn === unblocked && (queuedTarget.blockedOn = null);\n  }\n  for (\n    ;\n    0 < queuedExplicitHydrationTargets.length &&\n    ((i = queuedExplicitHydrationTargets[0]), null === i.blockedOn);\n\n  )\n    attemptExplicitHydrationTarget(i),\n      null === i.blockedOn && queuedExplicitHydrationTargets.shift();\n  i = (unblocked.ownerDocument || unblocked).$$reactFormReplay;\n  if (null != i)\n    for (queuedTarget = 0; queuedTarget < i.length; queuedTarget += 3) {\n      var form = i[queuedTarget],\n        submitterOrAction = i[queuedTarget + 1],\n        formProps = form[internalPropsKey] || null;\n      if (\"function\" === typeof submitterOrAction)\n        formProps || scheduleReplayQueueIfNeeded(i);\n      else if (formProps) {\n        var action = null;\n        if (submitterOrAction && submitterOrAction.hasAttribute(\"formAction\"))\n          if (\n            ((form = submitterOrAction),\n            (formProps = submitterOrAction[internalPropsKey] || null))\n          )\n            action = formProps.formAction;\n          else {\n            if (null !== findInstanceBlockingTarget(form)) continue;\n          }\n        else action = formProps.action;\n        \"function\" === typeof action\n          ? (i[queuedTarget + 1] = action)\n          : (i.splice(queuedTarget, 3), (queuedTarget -= 3));\n        scheduleReplayQueueIfNeeded(i);\n      }\n    }\n}\nfunction ReactDOMRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.render = ReactDOMRoot.prototype.render =\n  function (children) {\n    var root = this._internalRoot;\n    if (null === root) throw Error(formatProdErrorMessage(409));\n    var current = root.current,\n      lane = requestUpdateLane();\n    updateContainerImpl(current, lane, children, root, null, null);\n  };\nReactDOMHydrationRoot.prototype.unmount = ReactDOMRoot.prototype.unmount =\n  function () {\n    var root = this._internalRoot;\n    if (null !== root) {\n      this._internalRoot = null;\n      var container = root.containerInfo;\n      0 === root.tag && flushPassiveEffects();\n      updateContainerImpl(root.current, 2, null, root, null, null);\n      flushSyncWork$1();\n      container[internalContainerInstanceKey] = null;\n    }\n  };\nfunction ReactDOMHydrationRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n  if (target) {\n    var updatePriority = resolveUpdatePriority();\n    target = { blockedOn: null, target: target, priority: updatePriority };\n    for (\n      var i = 0;\n      i < queuedExplicitHydrationTargets.length &&\n      0 !== updatePriority &&\n      updatePriority < queuedExplicitHydrationTargets[i].priority;\n      i++\n    );\n    queuedExplicitHydrationTargets.splice(i, 0, target);\n    0 === i && attemptExplicitHydrationTarget(target);\n  }\n};\nvar isomorphicReactPackageVersion$jscomp$inline_1686 = React.version;\nif (\n  \"19.0.0\" !==\n  isomorphicReactPackageVersion$jscomp$inline_1686\n)\n  throw Error(\n    formatProdErrorMessage(\n      527,\n      isomorphicReactPackageVersion$jscomp$inline_1686,\n      \"19.0.0\"\n    )\n  );\nReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n  var fiber = componentOrElement._reactInternals;\n  if (void 0 === fiber) {\n    if (\"function\" === typeof componentOrElement.render)\n      throw Error(formatProdErrorMessage(188));\n    componentOrElement = Object.keys(componentOrElement).join(\",\");\n    throw Error(formatProdErrorMessage(268, componentOrElement));\n  }\n  componentOrElement = findCurrentFiberUsingSlowPath(fiber);\n  componentOrElement =\n    null !== componentOrElement\n      ? findCurrentHostFiberImpl(componentOrElement)\n      : null;\n  componentOrElement =\n    null === componentOrElement ? null : componentOrElement.stateNode;\n  return componentOrElement;\n};\nvar internals$jscomp$inline_2165 = {\n  bundleType: 0,\n  version: \"19.0.0\",\n  rendererPackageName: \"react-dom\",\n  currentDispatcherRef: ReactSharedInternals,\n  findFiberByHostInstance: getClosestInstanceFromNode,\n  reconcilerVersion: \"19.0.0\"\n};\nif (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n  var hook$jscomp$inline_2166 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n  if (\n    !hook$jscomp$inline_2166.isDisabled &&\n    hook$jscomp$inline_2166.supportsFiber\n  )\n    try {\n      (rendererID = hook$jscomp$inline_2166.inject(\n        internals$jscomp$inline_2165\n      )),\n        (injectedHook = hook$jscomp$inline_2166);\n    } catch (err) {}\n}\nexports.createRoot = function (container, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks));\n  options = createFiberRoot(\n    container,\n    1,\n    !1,\n    null,\n    null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    null\n  );\n  container[internalContainerInstanceKey] = options.current;\n  listenToAllSupportedEvents(\n    8 === container.nodeType ? container.parentNode : container\n  );\n  return new ReactDOMRoot(options);\n};\nexports.hydrateRoot = function (container, initialChildren, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    transitionCallbacks = null,\n    formState = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.unstable_transitionCallbacks &&\n      (transitionCallbacks = options.unstable_transitionCallbacks),\n    void 0 !== options.formState && (formState = options.formState));\n  initialChildren = createFiberRoot(\n    container,\n    1,\n    !0,\n    initialChildren,\n    null != options ? options : null,\n    isStrictMode,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    transitionCallbacks,\n    formState\n  );\n  initialChildren.context = getContextForSubtree(null);\n  options = initialChildren.current;\n  isStrictMode = requestUpdateLane();\n  identifierPrefix = createUpdate(isStrictMode);\n  identifierPrefix.callback = null;\n  enqueueUpdate(options, identifierPrefix, isStrictMode);\n  initialChildren.current.lanes = isStrictMode;\n  markRootUpdated$1(initialChildren, isStrictMode);\n  ensureRootIsScheduled(initialChildren);\n  container[internalContainerInstanceKey] = initialChildren.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMHydrationRoot(initialChildren);\n};\nexports.version = \"19.0.0\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom-client.production.js');\n} else {\n  module.exports = require('./cjs/react-dom-client.development.js');\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (value.length > 1 && !modifier && !ALIASES[value] && !CODES[name]) {\n        throw new TypeError('Unknown modifier: \"' + value + '\"');\n      }\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","\n/* **********************************************\n     Begin prism-core.js\n********************************************** */\n\n/// <reference lib=\"WebWorker\"/>\n\nvar _self = (typeof window !== 'undefined')\n\t? window   // if in browser\n\t: (\n\t\t(typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope)\n\t\t\t? self // if in worker\n\t\t\t: {}   // if in node js\n\t);\n\n/**\n * Prism: Lightweight, robust, elegant syntax highlighting\n *\n * @license MIT <https://opensource.org/licenses/MIT>\n * @author Lea Verou <https://lea.verou.me>\n * @namespace\n * @public\n */\nvar Prism = (function (_self) {\n\n\t// Private helper vars\n\tvar lang = /(?:^|\\s)lang(?:uage)?-([\\w-]+)(?=\\s|$)/i;\n\tvar uniqueId = 0;\n\n\t// The grammar object for plaintext\n\tvar plainTextGrammar = {};\n\n\n\tvar _ = {\n\t\t/**\n\t\t * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the\n\t\t * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load\n\t\t * additional languages or plugins yourself.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.\n\t\t *\n\t\t * You obviously have to change this value before the automatic highlighting started. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.manual = true;\n\t\t * // add a new <script> to load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tmanual: _self.Prism && _self.Prism.manual,\n\t\t/**\n\t\t * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses\n\t\t * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your\n\t\t * own worker, you don't want it to do this.\n\t\t *\n\t\t * By setting this value to `true`, Prism will not add its own listeners to the worker.\n\t\t *\n\t\t * You obviously have to change this value before Prism executes. To do this, you can add an\n\t\t * empty Prism object into the global scope before loading the Prism script like this:\n\t\t *\n\t\t * ```js\n\t\t * window.Prism = window.Prism || {};\n\t\t * Prism.disableWorkerMessageHandler = true;\n\t\t * // Load Prism's script\n\t\t * ```\n\t\t *\n\t\t * @default false\n\t\t * @type {boolean}\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tdisableWorkerMessageHandler: _self.Prism && _self.Prism.disableWorkerMessageHandler,\n\n\t\t/**\n\t\t * A namespace for utility methods.\n\t\t *\n\t\t * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may\n\t\t * change or disappear at any time.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t */\n\t\tutil: {\n\t\t\tencode: function encode(tokens) {\n\t\t\t\tif (tokens instanceof Token) {\n\t\t\t\t\treturn new Token(tokens.type, encode(tokens.content), tokens.alias);\n\t\t\t\t} else if (Array.isArray(tokens)) {\n\t\t\t\t\treturn tokens.map(encode);\n\t\t\t\t} else {\n\t\t\t\t\treturn tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the name of the type of the given value.\n\t\t\t *\n\t\t\t * @param {any} o\n\t\t\t * @returns {string}\n\t\t\t * @example\n\t\t\t * type(null)      === 'Null'\n\t\t\t * type(undefined) === 'Undefined'\n\t\t\t * type(123)       === 'Number'\n\t\t\t * type('foo')     === 'String'\n\t\t\t * type(true)      === 'Boolean'\n\t\t\t * type([1, 2])    === 'Array'\n\t\t\t * type({})        === 'Object'\n\t\t\t * type(String)    === 'Function'\n\t\t\t * type(/abc+/)    === 'RegExp'\n\t\t\t */\n\t\t\ttype: function (o) {\n\t\t\t\treturn Object.prototype.toString.call(o).slice(8, -1);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns a unique number for the given object. Later calls will still return the same number.\n\t\t\t *\n\t\t\t * @param {Object} obj\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tobjId: function (obj) {\n\t\t\t\tif (!obj['__id']) {\n\t\t\t\t\tObject.defineProperty(obj, '__id', { value: ++uniqueId });\n\t\t\t\t}\n\t\t\t\treturn obj['__id'];\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Creates a deep clone of the given object.\n\t\t\t *\n\t\t\t * The main intended use of this function is to clone language definitions.\n\t\t\t *\n\t\t\t * @param {T} o\n\t\t\t * @param {Record<number, any>} [visited]\n\t\t\t * @returns {T}\n\t\t\t * @template T\n\t\t\t */\n\t\t\tclone: function deepClone(o, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar clone; var id;\n\t\t\t\tswitch (_.util.type(o)) {\n\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = /** @type {Record<string, any>} */ ({});\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\tfor (var key in o) {\n\t\t\t\t\t\t\tif (o.hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\tclone[key] = deepClone(o[key], visited);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tcase 'Array':\n\t\t\t\t\t\tid = _.util.objId(o);\n\t\t\t\t\t\tif (visited[id]) {\n\t\t\t\t\t\t\treturn visited[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t\tvisited[id] = clone;\n\n\t\t\t\t\t\t(/** @type {Array} */(/** @type {any} */(o))).forEach(function (v, i) {\n\t\t\t\t\t\t\tclone[i] = deepClone(v, visited);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn /** @type {any} */ (clone);\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.\n\t\t\t *\n\t\t\t * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tgetLanguage: function (element) {\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar m = lang.exec(element.className);\n\t\t\t\t\tif (m) {\n\t\t\t\t\t\treturn m[1].toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn 'none';\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets the Prism `language-xxxx` class of the given element.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} language\n\t\t\t * @returns {void}\n\t\t\t */\n\t\t\tsetLanguage: function (element, language) {\n\t\t\t\t// remove all `language-xxxx` classes\n\t\t\t\t// (this might leave behind a leading space)\n\t\t\t\telement.className = element.className.replace(RegExp(lang, 'gi'), '');\n\n\t\t\t\t// add the new `language-xxxx` class\n\t\t\t\t// (using `classList` will automatically clean up spaces for us)\n\t\t\t\telement.classList.add('language-' + language);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns the script element that is currently executing.\n\t\t\t *\n\t\t\t * This does __not__ work for line script element.\n\t\t\t *\n\t\t\t * @returns {HTMLScriptElement | null}\n\t\t\t */\n\t\t\tcurrentScript: function () {\n\t\t\t\tif (typeof document === 'undefined') {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif ('currentScript' in document && 1 < 2 /* hack to trip TS' flow analysis */) {\n\t\t\t\t\treturn /** @type {any} */ (document.currentScript);\n\t\t\t\t}\n\n\t\t\t\t// IE11 workaround\n\t\t\t\t// we'll get the src of the current script by parsing IE11's error stack trace\n\t\t\t\t// this will not work for inline scripts\n\n\t\t\t\ttry {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Get file src url from stack. Specifically works with the format of stack traces in IE.\n\t\t\t\t\t// A stack will look like this:\n\t\t\t\t\t//\n\t\t\t\t\t// Error\n\t\t\t\t\t//    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)\n\t\t\t\t\t//    at Global code (http://localhost/components/prism-core.js:606:1)\n\n\t\t\t\t\tvar src = (/at [^(\\r\\n]*\\((.*):[^:]+:[^:]+\\)$/i.exec(err.stack) || [])[1];\n\t\t\t\t\tif (src) {\n\t\t\t\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\t\t\t\tfor (var i in scripts) {\n\t\t\t\t\t\t\tif (scripts[i].src == src) {\n\t\t\t\t\t\t\t\treturn scripts[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Returns whether a given class is active for `element`.\n\t\t\t *\n\t\t\t * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated\n\t\t\t * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the\n\t\t\t * given class is just the given class with a `no-` prefix.\n\t\t\t *\n\t\t\t * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is\n\t\t\t * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its\n\t\t\t * ancestors have the given class or the negated version of it, then the default activation will be returned.\n\t\t\t *\n\t\t\t * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated\n\t\t\t * version of it, the class is considered active.\n\t\t\t *\n\t\t\t * @param {Element} element\n\t\t\t * @param {string} className\n\t\t\t * @param {boolean} [defaultActivation=false]\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tisActive: function (element, className, defaultActivation) {\n\t\t\t\tvar no = 'no-' + className;\n\n\t\t\t\twhile (element) {\n\t\t\t\t\tvar classList = element.classList;\n\t\t\t\t\tif (classList.contains(className)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif (classList.contains(no)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telement = element.parentElement;\n\t\t\t\t}\n\t\t\t\treturn !!defaultActivation;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.\n\t\t *\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\tlanguages: {\n\t\t\t/**\n\t\t\t * The grammar for plain, unformatted text.\n\t\t\t */\n\t\t\tplain: plainTextGrammar,\n\t\t\tplaintext: plainTextGrammar,\n\t\t\ttext: plainTextGrammar,\n\t\t\ttxt: plainTextGrammar,\n\n\t\t\t/**\n\t\t\t * Creates a deep copy of the language with the given id and appends the given tokens.\n\t\t\t *\n\t\t\t * If a token in `redef` also appears in the copied language, then the existing token in the copied language\n\t\t\t * will be overwritten at its original position.\n\t\t\t *\n\t\t\t * ## Best practices\n\t\t\t *\n\t\t\t * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)\n\t\t\t * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to\n\t\t\t * understand the language definition because, normally, the order of tokens matters in Prism grammars.\n\t\t\t *\n\t\t\t * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.\n\t\t\t * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.\n\t\t\t *\n\t\t\t * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.\n\t\t\t * @param {Grammar} redef The new tokens to append.\n\t\t\t * @returns {Grammar} The new language created.\n\t\t\t * @public\n\t\t\t * @example\n\t\t\t * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {\n\t\t\t *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token\n\t\t\t *     // at its original position\n\t\t\t *     'comment': { ... },\n\t\t\t *     // CSS doesn't have a 'color' token, so this token will be appended\n\t\t\t *     'color': /\\b(?:red|green|blue)\\b/\n\t\t\t * });\n\t\t\t */\n\t\t\textend: function (id, redef) {\n\t\t\t\tvar lang = _.util.clone(_.languages[id]);\n\n\t\t\t\tfor (var key in redef) {\n\t\t\t\t\tlang[key] = redef[key];\n\t\t\t\t}\n\n\t\t\t\treturn lang;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Inserts tokens _before_ another token in a language definition or any other grammar.\n\t\t\t *\n\t\t\t * ## Usage\n\t\t\t *\n\t\t\t * This helper method makes it easy to modify existing languages. For example, the CSS language definition\n\t\t\t * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded\n\t\t\t * in HTML through `<style>` elements. To do this, it needs to modify `Prism.languages.markup` and add the\n\t\t\t * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do\n\t\t\t * this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.markup.style = {\n\t\t\t *     // token\n\t\t\t * };\n\t\t\t * ```\n\t\t\t *\n\t\t\t * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens\n\t\t\t * before existing tokens. For the CSS example above, you would use it like this:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'cdata', {\n\t\t\t *     'style': {\n\t\t\t *         // token\n\t\t\t *     }\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Special cases\n\t\t\t *\n\t\t\t * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar\n\t\t\t * will be ignored.\n\t\t\t *\n\t\t\t * This behavior can be used to insert tokens after `before`:\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * Prism.languages.insertBefore('markup', 'comment', {\n\t\t\t *     'comment': Prism.languages.markup.comment,\n\t\t\t *     // tokens after 'comment'\n\t\t\t * });\n\t\t\t * ```\n\t\t\t *\n\t\t\t * ## Limitations\n\t\t\t *\n\t\t\t * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object\n\t\t\t * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave\n\t\t\t * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily\n\t\t\t * deleting properties which is necessary to insert at arbitrary positions.\n\t\t\t *\n\t\t\t * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.\n\t\t\t * Instead, it will create a new object and replace all references to the target object with the new one. This\n\t\t\t * can be done without temporarily deleting properties, so the iteration order is well-defined.\n\t\t\t *\n\t\t\t * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if\n\t\t\t * you hold the target object in a variable, then the value of the variable will not change.\n\t\t\t *\n\t\t\t * ```js\n\t\t\t * var oldMarkup = Prism.languages.markup;\n\t\t\t * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });\n\t\t\t *\n\t\t\t * assert(oldMarkup !== Prism.languages.markup);\n\t\t\t * assert(newMarkup === Prism.languages.markup);\n\t\t\t * ```\n\t\t\t *\n\t\t\t * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the\n\t\t\t * object to be modified.\n\t\t\t * @param {string} before The key to insert before.\n\t\t\t * @param {Grammar} insert An object containing the key-value pairs to be inserted.\n\t\t\t * @param {Object<string, any>} [root] The object containing `inside`, i.e. the object that contains the\n\t\t\t * object to be modified.\n\t\t\t *\n\t\t\t * Defaults to `Prism.languages`.\n\t\t\t * @returns {Grammar} The new grammar object.\n\t\t\t * @public\n\t\t\t */\n\t\t\tinsertBefore: function (inside, before, insert, root) {\n\t\t\t\troot = root || /** @type {any} */ (_.languages);\n\t\t\t\tvar grammar = root[inside];\n\t\t\t\t/** @type {Grammar} */\n\t\t\t\tvar ret = {};\n\n\t\t\t\tfor (var token in grammar) {\n\t\t\t\t\tif (grammar.hasOwnProperty(token)) {\n\n\t\t\t\t\t\tif (token == before) {\n\t\t\t\t\t\t\tfor (var newToken in insert) {\n\t\t\t\t\t\t\t\tif (insert.hasOwnProperty(newToken)) {\n\t\t\t\t\t\t\t\t\tret[newToken] = insert[newToken];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do not insert token which also occur in insert. See #1525\n\t\t\t\t\t\tif (!insert.hasOwnProperty(token)) {\n\t\t\t\t\t\t\tret[token] = grammar[token];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar old = root[inside];\n\t\t\t\troot[inside] = ret;\n\n\t\t\t\t// Update references in other language definitions\n\t\t\t\t_.languages.DFS(_.languages, function (key, value) {\n\t\t\t\t\tif (value === old && key != inside) {\n\t\t\t\t\t\tthis[key] = ret;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn ret;\n\t\t\t},\n\n\t\t\t// Traverse a language definition with Depth First Search\n\t\t\tDFS: function DFS(o, callback, type, visited) {\n\t\t\t\tvisited = visited || {};\n\n\t\t\t\tvar objId = _.util.objId;\n\n\t\t\t\tfor (var i in o) {\n\t\t\t\t\tif (o.hasOwnProperty(i)) {\n\t\t\t\t\t\tcallback.call(o, i, o[i], type || i);\n\n\t\t\t\t\t\tvar property = o[i];\n\t\t\t\t\t\tvar propertyType = _.util.type(property);\n\n\t\t\t\t\t\tif (propertyType === 'Object' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, null, visited);\n\t\t\t\t\t\t} else if (propertyType === 'Array' && !visited[objId(property)]) {\n\t\t\t\t\t\t\tvisited[objId(property)] = true;\n\t\t\t\t\t\t\tDFS(property, callback, i, visited);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tplugins: {},\n\n\t\t/**\n\t\t * This is the most high-level function in Prisms API.\n\t\t * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on\n\t\t * each one of them.\n\t\t *\n\t\t * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.\n\t\t *\n\t\t * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAll: function (async, callback) {\n\t\t\t_.highlightAllUnder(document, async, callback);\n\t\t},\n\n\t\t/**\n\t\t * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls\n\t\t * {@link Prism.highlightElement} on each one of them.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-highlightall`\n\t\t * 2. `before-all-elements-highlight`\n\t\t * 3. All hooks of {@link Prism.highlightElement} for each element.\n\t\t *\n\t\t * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.\n\t\t * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightAllUnder: function (container, async, callback) {\n\t\t\tvar env = {\n\t\t\t\tcallback: callback,\n\t\t\t\tcontainer: container,\n\t\t\t\tselector: 'code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code'\n\t\t\t};\n\n\t\t\t_.hooks.run('before-highlightall', env);\n\n\t\t\tenv.elements = Array.prototype.slice.apply(env.container.querySelectorAll(env.selector));\n\n\t\t\t_.hooks.run('before-all-elements-highlight', env);\n\n\t\t\tfor (var i = 0, element; (element = env.elements[i++]);) {\n\t\t\t\t_.highlightElement(element, async === true, env.callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Highlights the code inside a single element.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-sanity-check`\n\t\t * 2. `before-highlight`\n\t\t * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.\n\t\t * 4. `before-insert`\n\t\t * 5. `after-highlight`\n\t\t * 6. `complete`\n\t\t *\n\t\t * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for\n\t\t * the element's language.\n\t\t *\n\t\t * @param {Element} element The element containing the code.\n\t\t * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.\n\t\t * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers\n\t\t * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is\n\t\t * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).\n\t\t *\n\t\t * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for\n\t\t * asynchronous highlighting to work. You can build your own bundle on the\n\t\t * [Download page](https://prismjs.com/download.html).\n\t\t * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.\n\t\t * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thighlightElement: function (element, async, callback) {\n\t\t\t// Find language\n\t\t\tvar language = _.util.getLanguage(element);\n\t\t\tvar grammar = _.languages[language];\n\n\t\t\t// Set language on the element, if not present\n\t\t\t_.util.setLanguage(element, language);\n\n\t\t\t// Set language on the parent, for styling\n\t\t\tvar parent = element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre') {\n\t\t\t\t_.util.setLanguage(parent, language);\n\t\t\t}\n\n\t\t\tvar code = element.textContent;\n\n\t\t\tvar env = {\n\t\t\t\telement: element,\n\t\t\t\tlanguage: language,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tcode: code\n\t\t\t};\n\n\t\t\tfunction insertHighlightedCode(highlightedCode) {\n\t\t\t\tenv.highlightedCode = highlightedCode;\n\n\t\t\t\t_.hooks.run('before-insert', env);\n\n\t\t\t\tenv.element.innerHTML = env.highlightedCode;\n\n\t\t\t\t_.hooks.run('after-highlight', env);\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t}\n\n\t\t\t_.hooks.run('before-sanity-check', env);\n\n\t\t\t// plugins may change/add the parent/element\n\t\t\tparent = env.element.parentElement;\n\t\t\tif (parent && parent.nodeName.toLowerCase() === 'pre' && !parent.hasAttribute('tabindex')) {\n\t\t\t\tparent.setAttribute('tabindex', '0');\n\t\t\t}\n\n\t\t\tif (!env.code) {\n\t\t\t\t_.hooks.run('complete', env);\n\t\t\t\tcallback && callback.call(env.element);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_.hooks.run('before-highlight', env);\n\n\t\t\tif (!env.grammar) {\n\t\t\t\tinsertHighlightedCode(_.util.encode(env.code));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (async && _self.Worker) {\n\t\t\t\tvar worker = new Worker(_.filename);\n\n\t\t\t\tworker.onmessage = function (evt) {\n\t\t\t\t\tinsertHighlightedCode(evt.data);\n\t\t\t\t};\n\n\t\t\t\tworker.postMessage(JSON.stringify({\n\t\t\t\t\tlanguage: env.language,\n\t\t\t\t\tcode: env.code,\n\t\t\t\t\timmediateClose: true\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\tinsertHighlightedCode(_.highlight(env.code, env.grammar, env.language));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Low-level function, only use if you know what youre doing. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns a string with the HTML produced.\n\t\t *\n\t\t * The following hooks will be run:\n\t\t * 1. `before-tokenize`\n\t\t * 2. `after-tokenize`\n\t\t * 3. `wrap`: On each {@link Token}.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @param {string} language The name of the language definition passed to `grammar`.\n\t\t * @returns {string} The highlighted HTML.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');\n\t\t */\n\t\thighlight: function (text, grammar, language) {\n\t\t\tvar env = {\n\t\t\t\tcode: text,\n\t\t\t\tgrammar: grammar,\n\t\t\t\tlanguage: language\n\t\t\t};\n\t\t\t_.hooks.run('before-tokenize', env);\n\t\t\tif (!env.grammar) {\n\t\t\t\tthrow new Error('The language \"' + env.language + '\" has no grammar.');\n\t\t\t}\n\t\t\tenv.tokens = _.tokenize(env.code, env.grammar);\n\t\t\t_.hooks.run('after-tokenize', env);\n\t\t\treturn Token.stringify(_.util.encode(env.tokens), env.language);\n\t\t},\n\n\t\t/**\n\t\t * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input\n\t\t * and the language definitions to use, and returns an array with the tokenized code.\n\t\t *\n\t\t * When the language definition includes nested tokens, the function is called recursively on each of these tokens.\n\t\t *\n\t\t * This method could be useful in other contexts as well, as a very crude parser.\n\t\t *\n\t\t * @param {string} text A string with the code to be highlighted.\n\t\t * @param {Grammar} grammar An object containing the tokens to use.\n\t\t *\n\t\t * Usually a language definition like `Prism.languages.markup`.\n\t\t * @returns {TokenStream} An array of strings and tokens, a token stream.\n\t\t * @memberof Prism\n\t\t * @public\n\t\t * @example\n\t\t * let code = `var foo = 0;`;\n\t\t * let tokens = Prism.tokenize(code, Prism.languages.javascript);\n\t\t * tokens.forEach(token => {\n\t\t *     if (token instanceof Prism.Token && token.type === 'number') {\n\t\t *         console.log(`Found numeric literal: ${token.content}`);\n\t\t *     }\n\t\t * });\n\t\t */\n\t\ttokenize: function (text, grammar) {\n\t\t\tvar rest = grammar.rest;\n\t\t\tif (rest) {\n\t\t\t\tfor (var token in rest) {\n\t\t\t\t\tgrammar[token] = rest[token];\n\t\t\t\t}\n\n\t\t\t\tdelete grammar.rest;\n\t\t\t}\n\n\t\t\tvar tokenList = new LinkedList();\n\t\t\taddAfter(tokenList, tokenList.head, text);\n\n\t\t\tmatchGrammar(text, tokenList, grammar, tokenList.head, 0);\n\n\t\t\treturn toArray(tokenList);\n\t\t},\n\n\t\t/**\n\t\t * @namespace\n\t\t * @memberof Prism\n\t\t * @public\n\t\t */\n\t\thooks: {\n\t\t\tall: {},\n\n\t\t\t/**\n\t\t\t * Adds the given callback to the list of callbacks for the given hook.\n\t\t\t *\n\t\t\t * The callback will be invoked when the hook it is registered for is run.\n\t\t\t * Hooks are usually directly run by a highlight function but you can also run hooks yourself.\n\t\t\t *\n\t\t\t * One callback function can be registered to multiple hooks and the same hook multiple times.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {HookCallback} callback The callback function which is given environment variables.\n\t\t\t * @public\n\t\t\t */\n\t\t\tadd: function (name, callback) {\n\t\t\t\tvar hooks = _.hooks.all;\n\n\t\t\t\thooks[name] = hooks[name] || [];\n\n\t\t\t\thooks[name].push(callback);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Runs a hook invoking all registered callbacks with the given environment variables.\n\t\t\t *\n\t\t\t * Callbacks will be invoked synchronously and in the order in which they were registered.\n\t\t\t *\n\t\t\t * @param {string} name The name of the hook.\n\t\t\t * @param {Object<string, any>} env The environment variables of the hook passed to all callbacks registered.\n\t\t\t * @public\n\t\t\t */\n\t\t\trun: function (name, env) {\n\t\t\t\tvar callbacks = _.hooks.all[name];\n\n\t\t\t\tif (!callbacks || !callbacks.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, callback; (callback = callbacks[i++]);) {\n\t\t\t\t\tcallback(env);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tToken: Token\n\t};\n\t_self.Prism = _;\n\n\n\t// Typescript note:\n\t// The following can be used to import the Token type in JSDoc:\n\t//\n\t//   @typedef {InstanceType<import(\"./prism-core\")[\"Token\"]>} Token\n\n\t/**\n\t * Creates a new token.\n\t *\n\t * @param {string} type See {@link Token#type type}\n\t * @param {string | TokenStream} content See {@link Token#content content}\n\t * @param {string|string[]} [alias] The alias(es) of the token.\n\t * @param {string} [matchedStr=\"\"] A copy of the full string this token was created from.\n\t * @class\n\t * @global\n\t * @public\n\t */\n\tfunction Token(type, content, alias, matchedStr) {\n\t\t/**\n\t\t * The type of the token.\n\t\t *\n\t\t * This is usually the key of a pattern in a {@link Grammar}.\n\t\t *\n\t\t * @type {string}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.type = type;\n\t\t/**\n\t\t * The strings or tokens contained by this token.\n\t\t *\n\t\t * This will be a token stream if the pattern matched also defined an `inside` grammar.\n\t\t *\n\t\t * @type {string | TokenStream}\n\t\t * @public\n\t\t */\n\t\tthis.content = content;\n\t\t/**\n\t\t * The alias(es) of the token.\n\t\t *\n\t\t * @type {string|string[]}\n\t\t * @see GrammarToken\n\t\t * @public\n\t\t */\n\t\tthis.alias = alias;\n\t\t// Copy of the full string this token was created from\n\t\tthis.length = (matchedStr || '').length | 0;\n\t}\n\n\t/**\n\t * A token stream is an array of strings and {@link Token Token} objects.\n\t *\n\t * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process\n\t * them.\n\t *\n\t * 1. No adjacent strings.\n\t * 2. No empty strings.\n\t *\n\t *    The only exception here is the token stream that only contains the empty string and nothing else.\n\t *\n\t * @typedef {Array<string | Token>} TokenStream\n\t * @global\n\t * @public\n\t */\n\n\t/**\n\t * Converts the given token or token stream to an HTML representation.\n\t *\n\t * The following hooks will be run:\n\t * 1. `wrap`: On each {@link Token}.\n\t *\n\t * @param {string | Token | TokenStream} o The token or token stream to be converted.\n\t * @param {string} language The name of current language.\n\t * @returns {string} The HTML representation of the token or token stream.\n\t * @memberof Token\n\t * @static\n\t */\n\tToken.stringify = function stringify(o, language) {\n\t\tif (typeof o == 'string') {\n\t\t\treturn o;\n\t\t}\n\t\tif (Array.isArray(o)) {\n\t\t\tvar s = '';\n\t\t\to.forEach(function (e) {\n\t\t\t\ts += stringify(e, language);\n\t\t\t});\n\t\t\treturn s;\n\t\t}\n\n\t\tvar env = {\n\t\t\ttype: o.type,\n\t\t\tcontent: stringify(o.content, language),\n\t\t\ttag: 'span',\n\t\t\tclasses: ['token', o.type],\n\t\t\tattributes: {},\n\t\t\tlanguage: language\n\t\t};\n\n\t\tvar aliases = o.alias;\n\t\tif (aliases) {\n\t\t\tif (Array.isArray(aliases)) {\n\t\t\t\tArray.prototype.push.apply(env.classes, aliases);\n\t\t\t} else {\n\t\t\t\tenv.classes.push(aliases);\n\t\t\t}\n\t\t}\n\n\t\t_.hooks.run('wrap', env);\n\n\t\tvar attributes = '';\n\t\tfor (var name in env.attributes) {\n\t\t\tattributes += ' ' + name + '=\"' + (env.attributes[name] || '').replace(/\"/g, '&quot;') + '\"';\n\t\t}\n\n\t\treturn '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\"' + attributes + '>' + env.content + '</' + env.tag + '>';\n\t};\n\n\t/**\n\t * @param {RegExp} pattern\n\t * @param {number} pos\n\t * @param {string} text\n\t * @param {boolean} lookbehind\n\t * @returns {RegExpExecArray | null}\n\t */\n\tfunction matchPattern(pattern, pos, text, lookbehind) {\n\t\tpattern.lastIndex = pos;\n\t\tvar match = pattern.exec(text);\n\t\tif (match && lookbehind && match[1]) {\n\t\t\t// change the match to remove the text matched by the Prism lookbehind group\n\t\t\tvar lookbehindLength = match[1].length;\n\t\t\tmatch.index += lookbehindLength;\n\t\t\tmatch[0] = match[0].slice(lookbehindLength);\n\t\t}\n\t\treturn match;\n\t}\n\n\t/**\n\t * @param {string} text\n\t * @param {LinkedList<string | Token>} tokenList\n\t * @param {any} grammar\n\t * @param {LinkedListNode<string | Token>} startNode\n\t * @param {number} startPos\n\t * @param {RematchOptions} [rematch]\n\t * @returns {void}\n\t * @private\n\t *\n\t * @typedef RematchOptions\n\t * @property {string} cause\n\t * @property {number} reach\n\t */\n\tfunction matchGrammar(text, tokenList, grammar, startNode, startPos, rematch) {\n\t\tfor (var token in grammar) {\n\t\t\tif (!grammar.hasOwnProperty(token) || !grammar[token]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar patterns = grammar[token];\n\t\t\tpatterns = Array.isArray(patterns) ? patterns : [patterns];\n\n\t\t\tfor (var j = 0; j < patterns.length; ++j) {\n\t\t\t\tif (rematch && rematch.cause == token + ',' + j) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar patternObj = patterns[j];\n\t\t\t\tvar inside = patternObj.inside;\n\t\t\t\tvar lookbehind = !!patternObj.lookbehind;\n\t\t\t\tvar greedy = !!patternObj.greedy;\n\t\t\t\tvar alias = patternObj.alias;\n\n\t\t\t\tif (greedy && !patternObj.pattern.global) {\n\t\t\t\t\t// Without the global flag, lastIndex won't work\n\t\t\t\t\tvar flags = patternObj.pattern.toString().match(/[imsuy]*$/)[0];\n\t\t\t\t\tpatternObj.pattern = RegExp(patternObj.pattern.source, flags + 'g');\n\t\t\t\t}\n\n\t\t\t\t/** @type {RegExp} */\n\t\t\t\tvar pattern = patternObj.pattern || patternObj;\n\n\t\t\t\tfor ( // iterate the token list and keep track of the current token/string position\n\t\t\t\t\tvar currentNode = startNode.next, pos = startPos;\n\t\t\t\t\tcurrentNode !== tokenList.tail;\n\t\t\t\t\tpos += currentNode.value.length, currentNode = currentNode.next\n\t\t\t\t) {\n\n\t\t\t\t\tif (rematch && pos >= rematch.reach) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar str = currentNode.value;\n\n\t\t\t\t\tif (tokenList.length > text.length) {\n\t\t\t\t\t\t// Something went terribly wrong, ABORT, ABORT!\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (str instanceof Token) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeCount = 1; // this is the to parameter of removeBetween\n\t\t\t\t\tvar match;\n\n\t\t\t\t\tif (greedy) {\n\t\t\t\t\t\tmatch = matchPattern(pattern, pos, text, lookbehind);\n\t\t\t\t\t\tif (!match || match.index >= text.length) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar from = match.index;\n\t\t\t\t\t\tvar to = match.index + match[0].length;\n\t\t\t\t\t\tvar p = pos;\n\n\t\t\t\t\t\t// find the node that contains the match\n\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\twhile (from >= p) {\n\t\t\t\t\t\t\tcurrentNode = currentNode.next;\n\t\t\t\t\t\t\tp += currentNode.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// adjust pos (and p)\n\t\t\t\t\t\tp -= currentNode.value.length;\n\t\t\t\t\t\tpos = p;\n\n\t\t\t\t\t\t// the current node is a Token, then the match starts inside another Token, which is invalid\n\t\t\t\t\t\tif (currentNode.value instanceof Token) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// find the last node which is affected by this match\n\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\tvar k = currentNode;\n\t\t\t\t\t\t\tk !== tokenList.tail && (p < to || typeof k.value === 'string');\n\t\t\t\t\t\t\tk = k.next\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveCount++;\n\t\t\t\t\t\t\tp += k.value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoveCount--;\n\n\t\t\t\t\t\t// replace with the new match\n\t\t\t\t\t\tstr = text.slice(pos, p);\n\t\t\t\t\t\tmatch.index -= pos;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmatch = matchPattern(pattern, 0, str, lookbehind);\n\t\t\t\t\t\tif (!match) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// eslint-disable-next-line no-redeclare\n\t\t\t\t\tvar from = match.index;\n\t\t\t\t\tvar matchStr = match[0];\n\t\t\t\t\tvar before = str.slice(0, from);\n\t\t\t\t\tvar after = str.slice(from + matchStr.length);\n\n\t\t\t\t\tvar reach = pos + str.length;\n\t\t\t\t\tif (rematch && reach > rematch.reach) {\n\t\t\t\t\t\trematch.reach = reach;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar removeFrom = currentNode.prev;\n\n\t\t\t\t\tif (before) {\n\t\t\t\t\t\tremoveFrom = addAfter(tokenList, removeFrom, before);\n\t\t\t\t\t\tpos += before.length;\n\t\t\t\t\t}\n\n\t\t\t\t\tremoveRange(tokenList, removeFrom, removeCount);\n\n\t\t\t\t\tvar wrapped = new Token(token, inside ? _.tokenize(matchStr, inside) : matchStr, alias, matchStr);\n\t\t\t\t\tcurrentNode = addAfter(tokenList, removeFrom, wrapped);\n\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\taddAfter(tokenList, currentNode, after);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (removeCount > 1) {\n\t\t\t\t\t\t// at least one Token object was removed, so we have to do some rematching\n\t\t\t\t\t\t// this can only happen if the current pattern is greedy\n\n\t\t\t\t\t\t/** @type {RematchOptions} */\n\t\t\t\t\t\tvar nestedRematch = {\n\t\t\t\t\t\t\tcause: token + ',' + j,\n\t\t\t\t\t\t\treach: reach\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmatchGrammar(text, tokenList, grammar, currentNode.prev, pos, nestedRematch);\n\n\t\t\t\t\t\t// the reach might have been extended because of the rematching\n\t\t\t\t\t\tif (rematch && nestedRematch.reach > rematch.reach) {\n\t\t\t\t\t\t\trematch.reach = nestedRematch.reach;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @typedef LinkedListNode\n\t * @property {T} value\n\t * @property {LinkedListNode<T> | null} prev The previous node.\n\t * @property {LinkedListNode<T> | null} next The next node.\n\t * @template T\n\t * @private\n\t */\n\n\t/**\n\t * @template T\n\t * @private\n\t */\n\tfunction LinkedList() {\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar head = { value: null, prev: null, next: null };\n\t\t/** @type {LinkedListNode<T>} */\n\t\tvar tail = { value: null, prev: head, next: null };\n\t\thead.next = tail;\n\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.head = head;\n\t\t/** @type {LinkedListNode<T>} */\n\t\tthis.tail = tail;\n\t\tthis.length = 0;\n\t}\n\n\t/**\n\t * Adds a new node with the given value to the list.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {T} value\n\t * @returns {LinkedListNode<T>} The added node.\n\t * @template T\n\t */\n\tfunction addAfter(list, node, value) {\n\t\t// assumes that node != list.tail && values.length >= 0\n\t\tvar next = node.next;\n\n\t\tvar newNode = { value: value, prev: node, next: next };\n\t\tnode.next = newNode;\n\t\tnext.prev = newNode;\n\t\tlist.length++;\n\n\t\treturn newNode;\n\t}\n\t/**\n\t * Removes `count` nodes after the given node. The given node will not be removed.\n\t *\n\t * @param {LinkedList<T>} list\n\t * @param {LinkedListNode<T>} node\n\t * @param {number} count\n\t * @template T\n\t */\n\tfunction removeRange(list, node, count) {\n\t\tvar next = node.next;\n\t\tfor (var i = 0; i < count && next !== list.tail; i++) {\n\t\t\tnext = next.next;\n\t\t}\n\t\tnode.next = next;\n\t\tnext.prev = node;\n\t\tlist.length -= i;\n\t}\n\t/**\n\t * @param {LinkedList<T>} list\n\t * @returns {T[]}\n\t * @template T\n\t */\n\tfunction toArray(list) {\n\t\tvar array = [];\n\t\tvar node = list.head.next;\n\t\twhile (node !== list.tail) {\n\t\t\tarray.push(node.value);\n\t\t\tnode = node.next;\n\t\t}\n\t\treturn array;\n\t}\n\n\n\tif (!_self.document) {\n\t\tif (!_self.addEventListener) {\n\t\t\t// in Node.js\n\t\t\treturn _;\n\t\t}\n\n\t\tif (!_.disableWorkerMessageHandler) {\n\t\t\t// In worker\n\t\t\t_self.addEventListener('message', function (evt) {\n\t\t\t\tvar message = JSON.parse(evt.data);\n\t\t\t\tvar lang = message.language;\n\t\t\t\tvar code = message.code;\n\t\t\t\tvar immediateClose = message.immediateClose;\n\n\t\t\t\t_self.postMessage(_.highlight(code, _.languages[lang], lang));\n\t\t\t\tif (immediateClose) {\n\t\t\t\t\t_self.close();\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\n\t\treturn _;\n\t}\n\n\t// Get current script and highlight\n\tvar script = _.util.currentScript();\n\n\tif (script) {\n\t\t_.filename = script.src;\n\n\t\tif (script.hasAttribute('data-manual')) {\n\t\t\t_.manual = true;\n\t\t}\n\t}\n\n\tfunction highlightAutomaticallyCallback() {\n\t\tif (!_.manual) {\n\t\t\t_.highlightAll();\n\t\t}\n\t}\n\n\tif (!_.manual) {\n\t\t// If the document state is \"loading\", then we'll use DOMContentLoaded.\n\t\t// If the document state is \"interactive\" and the prism.js script is deferred, then we'll also use the\n\t\t// DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they\n\t\t// might take longer one animation frame to execute which can create a race condition where only some plugins have\n\t\t// been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.\n\t\t// See https://github.com/PrismJS/prism/issues/2102\n\t\tvar readyState = document.readyState;\n\t\tif (readyState === 'loading' || readyState === 'interactive' && script && script.defer) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', highlightAutomaticallyCallback);\n\t\t} else {\n\t\t\tif (window.requestAnimationFrame) {\n\t\t\t\twindow.requestAnimationFrame(highlightAutomaticallyCallback);\n\t\t\t} else {\n\t\t\t\twindow.setTimeout(highlightAutomaticallyCallback, 16);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn _;\n\n}(_self));\n\nif (typeof module !== 'undefined' && module.exports) {\n\tmodule.exports = Prism;\n}\n\n// hack for components to work correctly in node.js\nif (typeof global !== 'undefined') {\n\tglobal.Prism = Prism;\n}\n\n// some additional documentation/types\n\n/**\n * The expansion of a simple `RegExp` literal to support additional properties.\n *\n * @typedef GrammarToken\n * @property {RegExp} pattern The regular expression of the token.\n * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)\n * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.\n * @property {boolean} [greedy=false] Whether the token is greedy.\n * @property {string|string[]} [alias] An optional alias or list of aliases.\n * @property {Grammar} [inside] The nested grammar of this token.\n *\n * The `inside` grammar will be used to tokenize the text value of each token of this kind.\n *\n * This can be used to make nested and even recursive language definitions.\n *\n * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into\n * each another.\n * @global\n * @public\n */\n\n/**\n * @typedef Grammar\n * @type {Object<string, RegExp | GrammarToken | Array<RegExp | GrammarToken>>}\n * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.\n * @global\n * @public\n */\n\n/**\n * A function which will invoked after an element was successfully highlighted.\n *\n * @callback HighlightCallback\n * @param {Element} element The element successfully highlighted.\n * @returns {void}\n * @global\n * @public\n */\n\n/**\n * @callback HookCallback\n * @param {Object<string, any>} env The environment variables of the hook.\n * @returns {void}\n * @global\n * @public\n */\n\n\n/* **********************************************\n     Begin prism-markup.js\n********************************************** */\n\nPrism.languages.markup = {\n\t'comment': {\n\t\tpattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n\t\tgreedy: true\n\t},\n\t'prolog': {\n\t\tpattern: /<\\?[\\s\\S]+?\\?>/,\n\t\tgreedy: true\n\t},\n\t'doctype': {\n\t\t// https://www.w3.org/TR/xml/#NT-doctypedecl\n\t\tpattern: /<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'internal-subset': {\n\t\t\t\tpattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: null // see below\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /\"[^\"]*\"|'[^']*'/,\n\t\t\t\tgreedy: true\n\t\t\t},\n\t\t\t'punctuation': /^<!|>$|[[\\]]/,\n\t\t\t'doctype-tag': /^DOCTYPE/i,\n\t\t\t'name': /[^\\s<>'\"]+/\n\t\t}\n\t},\n\t'cdata': {\n\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\tgreedy: true\n\t},\n\t'tag': {\n\t\tpattern: /<\\/?(?!\\d)[^\\s>\\/=$<%]+(?:\\s(?:\\s*[^\\s>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'tag': {\n\t\t\t\tpattern: /^<\\/?[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^<\\/?/,\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t},\n\t\t\t'special-attr': [],\n\t\t\t'attr-value': {\n\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\tlookbehind: true\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\t'punctuation': /\\/?>/,\n\t\t\t'attr-name': {\n\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t},\n\t'entity': [\n\t\t{\n\t\t\tpattern: /&[\\da-z]{1,8};/i,\n\t\t\talias: 'named-entity'\n\t\t},\n\t\t/&#x?[\\da-f]{1,8};/i\n\t]\n};\n\nPrism.languages.markup['tag'].inside['attr-value'].inside['entity'] =\n\tPrism.languages.markup['entity'];\nPrism.languages.markup['doctype'].inside['internal-subset'].inside = Prism.languages.markup;\n\n// Plugin to make entity title show the real entity, idea by Roman Komarov\nPrism.hooks.add('wrap', function (env) {\n\n\tif (env.type === 'entity') {\n\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t}\n});\n\nObject.defineProperty(Prism.languages.markup.tag, 'addInlined', {\n\t/**\n\t * Adds an inlined language to markup.\n\t *\n\t * An example of an inlined language is CSS with `<style>` tags.\n\t *\n\t * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addInlined('style', 'css');\n\t */\n\tvalue: function addInlined(tagName, lang) {\n\t\tvar includedCdataInside = {};\n\t\tincludedCdataInside['language-' + lang] = {\n\t\t\tpattern: /(^<!\\[CDATA\\[)[\\s\\S]+?(?=\\]\\]>$)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\t\tincludedCdataInside['cdata'] = /^<!\\[CDATA\\[|\\]\\]>$/i;\n\n\t\tvar inside = {\n\t\t\t'included-cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tinside: includedCdataInside\n\t\t\t}\n\t\t};\n\t\tinside['language-' + lang] = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: Prism.languages[lang]\n\t\t};\n\n\t\tvar def = {};\n\t\tdef[tagName] = {\n\t\t\tpattern: RegExp(/(<__[^>]*>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[\\s\\S])*?(?=<\\/__>)/.source.replace(/__/g, function () { return tagName; }), 'i'),\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true,\n\t\t\tinside: inside\n\t\t};\n\n\t\tPrism.languages.insertBefore('markup', 'cdata', def);\n\t}\n});\nObject.defineProperty(Prism.languages.markup.tag, 'addAttribute', {\n\t/**\n\t * Adds an pattern to highlight languages embedded in HTML attributes.\n\t *\n\t * An example of an inlined language is CSS with `style` attributes.\n\t *\n\t * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as\n\t * case insensitive.\n\t * @param {string} lang The language key.\n\t * @example\n\t * addAttribute('style', 'css');\n\t */\n\tvalue: function (attrName, lang) {\n\t\tPrism.languages.markup.tag.inside['special-attr'].push({\n\t\t\tpattern: RegExp(\n\t\t\t\t/(^|[\"'\\s])/.source + '(?:' + attrName + ')' + /\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))/.source,\n\t\t\t\t'i'\n\t\t\t),\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'attr-name': /^[^\\s=]+/,\n\t\t\t\t'attr-value': {\n\t\t\t\t\tpattern: /=[\\s\\S]+/,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'value': {\n\t\t\t\t\t\t\tpattern: /(^=\\s*([\"']|(?![\"'])))\\S[\\s\\S]*(?=\\2$)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\talias: [lang, 'language-' + lang],\n\t\t\t\t\t\t\tinside: Prism.languages[lang]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\t\talias: 'attr-equals'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/\"|'/\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\nPrism.languages.html = Prism.languages.markup;\nPrism.languages.mathml = Prism.languages.markup;\nPrism.languages.svg = Prism.languages.markup;\n\nPrism.languages.xml = Prism.languages.extend('markup', {});\nPrism.languages.ssml = Prism.languages.xml;\nPrism.languages.atom = Prism.languages.xml;\nPrism.languages.rss = Prism.languages.xml;\n\n\n/* **********************************************\n     Begin prism-css.js\n********************************************** */\n\n(function (Prism) {\n\n\tvar string = /(?:\"(?:\\\\(?:\\r\\n|[\\s\\S])|[^\"\\\\\\r\\n])*\"|'(?:\\\\(?:\\r\\n|[\\s\\S])|[^'\\\\\\r\\n])*')/;\n\n\tPrism.languages.css = {\n\t\t'comment': /\\/\\*[\\s\\S]*?\\*\\//,\n\t\t'atrule': {\n\t\t\tpattern: RegExp('@[\\\\w-](?:' + /[^;{\\s\"']|\\s+(?!\\s)/.source + '|' + string.source + ')*?' + /(?:;|(?=\\s*\\{))/.source),\n\t\t\tinside: {\n\t\t\t\t'rule': /^@[\\w-]+/,\n\t\t\t\t'selector-function-argument': {\n\t\t\t\t\tpattern: /(\\bselector\\s*\\(\\s*(?![\\s)]))(?:[^()\\s]|\\s+(?![\\s)])|\\((?:[^()]|\\([^()]*\\))*\\))+(?=\\s*\\))/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'selector'\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\tpattern: /(^|[^\\w-])(?:and|not|only|or)(?![\\w-])/,\n\t\t\t\t\tlookbehind: true\n\t\t\t\t}\n\t\t\t\t// See rest below\n\t\t\t}\n\t\t},\n\t\t'url': {\n\t\t\t// https://drafts.csswg.org/css-values-3/#urls\n\t\t\tpattern: RegExp('\\\\burl\\\\((?:' + string.source + '|' + /(?:[^\\\\\\r\\n()\"']|\\\\[\\s\\S])*/.source + ')\\\\)', 'i'),\n\t\t\tgreedy: true,\n\t\t\tinside: {\n\t\t\t\t'function': /^url/i,\n\t\t\t\t'punctuation': /^\\(|\\)$/,\n\t\t\t\t'string': {\n\t\t\t\t\tpattern: RegExp('^' + string.source + '$'),\n\t\t\t\t\talias: 'url'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t'selector': {\n\t\t\tpattern: RegExp('(^|[{}\\\\s])[^{}\\\\s](?:[^{};\"\\'\\\\s]|\\\\s+(?![\\\\s{])|' + string.source + ')*(?=\\\\s*\\\\{)'),\n\t\t\tlookbehind: true\n\t\t},\n\t\t'string': {\n\t\t\tpattern: string,\n\t\t\tgreedy: true\n\t\t},\n\t\t'property': {\n\t\t\tpattern: /(^|[^-\\w\\xA0-\\uFFFF])(?!\\s)[-_a-z\\xA0-\\uFFFF](?:(?!\\s)[-\\w\\xA0-\\uFFFF])*(?=\\s*:)/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'important': /!important\\b/i,\n\t\t'function': {\n\t\t\tpattern: /(^|[^-a-z0-9])[-a-z0-9]+(?=\\()/i,\n\t\t\tlookbehind: true\n\t\t},\n\t\t'punctuation': /[(){};:,]/\n\t};\n\n\tPrism.languages.css['atrule'].inside.rest = Prism.languages.css;\n\n\tvar markup = Prism.languages.markup;\n\tif (markup) {\n\t\tmarkup.tag.addInlined('style', 'css');\n\t\tmarkup.tag.addAttribute('style', 'css');\n\t}\n\n}(Prism));\n\n\n/* **********************************************\n     Begin prism-clike.js\n********************************************** */\n\nPrism.languages.clike = {\n\t'comment': [\n\t\t{\n\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^\\\\:])\\/\\/.*/,\n\t\t\tlookbehind: true,\n\t\t\tgreedy: true\n\t\t}\n\t],\n\t'string': {\n\t\tpattern: /([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n\t\tgreedy: true\n\t},\n\t'class-name': {\n\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new|trait)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+/i,\n\t\tlookbehind: true,\n\t\tinside: {\n\t\t\t'punctuation': /[.\\\\]/\n\t\t}\n\t},\n\t'keyword': /\\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\\b/,\n\t'boolean': /\\b(?:false|true)\\b/,\n\t'function': /\\b\\w+(?=\\()/,\n\t'number': /\\b0x[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?/i,\n\t'operator': /[<>]=?|[!=]=?=?|--?|\\+\\+?|&&?|\\|\\|?|[?*/~^%]/,\n\t'punctuation': /[{}[\\];(),.:]/\n};\n\n\n/* **********************************************\n     Begin prism-javascript.js\n********************************************** */\n\nPrism.languages.javascript = Prism.languages.extend('clike', {\n\t'class-name': [\n\t\tPrism.languages.clike['class-name'],\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n\t\t\tlookbehind: true\n\t\t}\n\t],\n\t'keyword': [\n\t\t{\n\t\t\tpattern: /((?:^|\\})\\s*)catch\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\\s*(?:\\{|$))|for|from(?=\\s*(?:['\"]|$))|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\\b/,\n\t\t\tlookbehind: true\n\t\t},\n\t],\n\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t'function': /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t'number': {\n\t\tpattern: RegExp(\n\t\t\t/(^|[^\\w$])/.source +\n\t\t\t'(?:' +\n\t\t\t(\n\t\t\t\t// constant\n\t\t\t\t/NaN|Infinity/.source +\n\t\t\t\t'|' +\n\t\t\t\t// binary integer\n\t\t\t\t/0[bB][01]+(?:_[01]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// octal integer\n\t\t\t\t/0[oO][0-7]+(?:_[0-7]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// hexadecimal integer\n\t\t\t\t/0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal bigint\n\t\t\t\t/\\d+(?:_\\d+)*n/.source +\n\t\t\t\t'|' +\n\t\t\t\t// decimal number (integer or float) but no bigint\n\t\t\t\t/(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/.source\n\t\t\t) +\n\t\t\t')' +\n\t\t\t/(?![\\w$])/.source\n\t\t),\n\t\tlookbehind: true\n\t},\n\t'operator': /--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/\n});\n\nPrism.languages.javascript['class-name'][0].pattern = /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/;\n\nPrism.languages.insertBefore('javascript', 'keyword', {\n\t'regex': {\n\t\tpattern: RegExp(\n\t\t\t// lookbehind\n\t\t\t// eslint-disable-next-line regexp/no-dupe-characters-character-class\n\t\t\t/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n\t\t\t// Regex pattern:\n\t\t\t// There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n\t\t\t// classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n\t\t\t// with the only syntax, so we have to define 2 different regex patterns.\n\t\t\t/\\//.source +\n\t\t\t'(?:' +\n\t\t\t/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source +\n\t\t\t'|' +\n\t\t\t// `v` flag syntax. This supports 3 levels of nested character classes.\n\t\t\t/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source +\n\t\t\t')' +\n\t\t\t// lookahead\n\t\t\t/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source\n\t\t),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'regex-source': {\n\t\t\t\tpattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'language-regex',\n\t\t\t\tinside: Prism.languages.regex\n\t\t\t},\n\t\t\t'regex-delimiter': /^\\/|\\/$/,\n\t\t\t'regex-flags': /^[a-z]+$/,\n\t\t}\n\t},\n\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t'function-variable': {\n\t\tpattern: /#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n\t\talias: 'function'\n\t},\n\t'parameter': [\n\t\t{\n\t\t\tpattern: /(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t},\n\t\t{\n\t\t\tpattern: /((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n\t\t\tlookbehind: true,\n\t\t\tinside: Prism.languages.javascript\n\t\t}\n\t],\n\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/\n});\n\nPrism.languages.insertBefore('javascript', 'string', {\n\t'hashbang': {\n\t\tpattern: /^#!.*/,\n\t\tgreedy: true,\n\t\talias: 'comment'\n\t},\n\t'template-string': {\n\t\tpattern: /`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,\n\t\tgreedy: true,\n\t\tinside: {\n\t\t\t'template-punctuation': {\n\t\t\t\tpattern: /^`|`$/,\n\t\t\t\talias: 'string'\n\t\t\t},\n\t\t\t'interpolation': {\n\t\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\talias: 'punctuation'\n\t\t\t\t\t},\n\t\t\t\t\trest: Prism.languages.javascript\n\t\t\t\t}\n\t\t\t},\n\t\t\t'string': /[\\s\\S]+/\n\t\t}\n\t},\n\t'string-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'property'\n\t}\n});\n\nPrism.languages.insertBefore('javascript', 'operator', {\n\t'literal-property': {\n\t\tpattern: /((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n\t\tlookbehind: true,\n\t\talias: 'property'\n\t},\n});\n\nif (Prism.languages.markup) {\n\tPrism.languages.markup.tag.addInlined('script', 'javascript');\n\n\t// add attribute support for all DOM events.\n\t// https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events\n\tPrism.languages.markup.tag.addAttribute(\n\t\t/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,\n\t\t'javascript'\n\t);\n}\n\nPrism.languages.js = Prism.languages.javascript;\n\n\n/* **********************************************\n     Begin prism-file-highlight.js\n********************************************** */\n\n(function () {\n\n\tif (typeof Prism === 'undefined' || typeof document === 'undefined') {\n\t\treturn;\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\n\tif (!Element.prototype.matches) {\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\t}\n\n\tvar LOADING_MESSAGE = 'Loading';\n\tvar FAILURE_MESSAGE = function (status, message) {\n\t\treturn ' Error ' + status + ' while fetching file: ' + message;\n\t};\n\tvar FAILURE_EMPTY_MESSAGE = ' Error: File does not exist or is empty';\n\n\tvar EXTENSIONS = {\n\t\t'js': 'javascript',\n\t\t'py': 'python',\n\t\t'rb': 'ruby',\n\t\t'ps1': 'powershell',\n\t\t'psm1': 'powershell',\n\t\t'sh': 'bash',\n\t\t'bat': 'batch',\n\t\t'h': 'c',\n\t\t'tex': 'latex'\n\t};\n\n\tvar STATUS_ATTR = 'data-src-status';\n\tvar STATUS_LOADING = 'loading';\n\tvar STATUS_LOADED = 'loaded';\n\tvar STATUS_FAILED = 'failed';\n\n\tvar SELECTOR = 'pre[data-src]:not([' + STATUS_ATTR + '=\"' + STATUS_LOADED + '\"])'\n\t\t+ ':not([' + STATUS_ATTR + '=\"' + STATUS_LOADING + '\"])';\n\n\t/**\n\t * Loads the given file.\n\t *\n\t * @param {string} src The URL or path of the source file to load.\n\t * @param {(result: string) => void} success\n\t * @param {(reason: string) => void} error\n\t */\n\tfunction loadFile(src, success, error) {\n\t\tvar xhr = new XMLHttpRequest();\n\t\txhr.open('GET', src, true);\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (xhr.readyState == 4) {\n\t\t\t\tif (xhr.status < 400 && xhr.responseText) {\n\t\t\t\t\tsuccess(xhr.responseText);\n\t\t\t\t} else {\n\t\t\t\t\tif (xhr.status >= 400) {\n\t\t\t\t\t\terror(FAILURE_MESSAGE(xhr.status, xhr.statusText));\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror(FAILURE_EMPTY_MESSAGE);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\txhr.send(null);\n\t}\n\n\t/**\n\t * Parses the given range.\n\t *\n\t * This returns a range with inclusive ends.\n\t *\n\t * @param {string | null | undefined} range\n\t * @returns {[number, number | undefined] | undefined}\n\t */\n\tfunction parseRange(range) {\n\t\tvar m = /^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(range || '');\n\t\tif (m) {\n\t\t\tvar start = Number(m[1]);\n\t\t\tvar comma = m[2];\n\t\t\tvar end = m[3];\n\n\t\t\tif (!comma) {\n\t\t\t\treturn [start, start];\n\t\t\t}\n\t\t\tif (!end) {\n\t\t\t\treturn [start, undefined];\n\t\t\t}\n\t\t\treturn [start, Number(end)];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tPrism.hooks.add('before-highlightall', function (env) {\n\t\tenv.selector += ', ' + SELECTOR;\n\t});\n\n\tPrism.hooks.add('before-sanity-check', function (env) {\n\t\tvar pre = /** @type {HTMLPreElement} */ (env.element);\n\t\tif (pre.matches(SELECTOR)) {\n\t\t\tenv.code = ''; // fast-path the whole thing and go to complete\n\n\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADING); // mark as loading\n\n\t\t\t// add code element with loading message\n\t\t\tvar code = pre.appendChild(document.createElement('CODE'));\n\t\t\tcode.textContent = LOADING_MESSAGE;\n\n\t\t\tvar src = pre.getAttribute('data-src');\n\n\t\t\tvar language = env.language;\n\t\t\tif (language === 'none') {\n\t\t\t\t// the language might be 'none' because there is no language set;\n\t\t\t\t// in this case, we want to use the extension as the language\n\t\t\t\tvar extension = (/\\.(\\w+)$/.exec(src) || [, 'none'])[1];\n\t\t\t\tlanguage = EXTENSIONS[extension] || extension;\n\t\t\t}\n\n\t\t\t// set language classes\n\t\t\tPrism.util.setLanguage(code, language);\n\t\t\tPrism.util.setLanguage(pre, language);\n\n\t\t\t// preload the language\n\t\t\tvar autoloader = Prism.plugins.autoloader;\n\t\t\tif (autoloader) {\n\t\t\t\tautoloader.loadLanguages(language);\n\t\t\t}\n\n\t\t\t// load file\n\t\t\tloadFile(\n\t\t\t\tsrc,\n\t\t\t\tfunction (text) {\n\t\t\t\t\t// mark as loaded\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_LOADED);\n\n\t\t\t\t\t// handle data-range\n\t\t\t\t\tvar range = parseRange(pre.getAttribute('data-range'));\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tvar lines = text.split(/\\r\\n?|\\n/g);\n\n\t\t\t\t\t\t// the range is one-based and inclusive on both ends\n\t\t\t\t\t\tvar start = range[0];\n\t\t\t\t\t\tvar end = range[1] == null ? lines.length : range[1];\n\n\t\t\t\t\t\tif (start < 0) { start += lines.length; }\n\t\t\t\t\t\tstart = Math.max(0, Math.min(start - 1, lines.length));\n\t\t\t\t\t\tif (end < 0) { end += lines.length; }\n\t\t\t\t\t\tend = Math.max(0, Math.min(end, lines.length));\n\n\t\t\t\t\t\ttext = lines.slice(start, end).join('\\n');\n\n\t\t\t\t\t\t// add data-start for line numbers\n\t\t\t\t\t\tif (!pre.hasAttribute('data-start')) {\n\t\t\t\t\t\t\tpre.setAttribute('data-start', String(start + 1));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// highlight code\n\t\t\t\t\tcode.textContent = text;\n\t\t\t\t\tPrism.highlightElement(code);\n\t\t\t\t},\n\t\t\t\tfunction (error) {\n\t\t\t\t\t// mark as failed\n\t\t\t\t\tpre.setAttribute(STATUS_ATTR, STATUS_FAILED);\n\n\t\t\t\t\tcode.textContent = error;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t});\n\n\tPrism.plugins.fileHighlight = {\n\t\t/**\n\t\t * Executes the File Highlight plugin for all matching `pre` elements under the given container.\n\t\t *\n\t\t * Note: Elements which are already loaded or currently loading will not be touched by this method.\n\t\t *\n\t\t * @param {ParentNode} [container=document]\n\t\t */\n\t\thighlight: function highlight(container) {\n\t\t\tvar elements = (container || document).querySelectorAll(SELECTOR);\n\n\t\t\tfor (var i = 0, element; (element = elements[i++]);) {\n\t\t\t\tPrism.highlightElement(element);\n\t\t\t}\n\t\t}\n\t};\n\n\tvar logged = false;\n\t/** @deprecated Use `Prism.plugins.fileHighlight.highlight` instead. */\n\tPrism.fileHighlight = function () {\n\t\tif (!logged) {\n\t\t\tconsole.warn('Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead.');\n\t\t\tlogged = true;\n\t\t}\n\t\tPrism.plugins.fileHighlight.highlight.apply(this, arguments);\n\t};\n\n}());\n","import {\n  createRef,\n  RefObject,\n  useCallback,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from \"react\"\nimport { createRoot } from \"react-dom/client\"\nimport { Editable, useEditor } from './entry/index'\n\nexport { Editable, useEditor }\n\n/**\n * The options passed into the standalone version of Wysimark.\n */\ntype StandaloneOptions = Parameters<typeof useEditor>[0] & {\n  onChange?: (markdown: string) => void\n  placeholder?: string\n  initialMarkdown?: string\n  className?: string\n}\n\ntype StandaloneMethods = {\n  getMarkdown: () => string\n  setMarkdown: (markdown: string) => void\n}\n\n/**\n * The object returned by `createWysimark`\n */\nexport type Wysimark = {\n  unmount: () => void\n  getMarkdown: () => string\n  setMarkdown: (markdown: string) => void\n}\n\nfunction StandaloneEditor({\n  standaloneOptions: { onChange, placeholder, className, ...options },\n  standaloneMethodsRef,\n}: {\n  standaloneOptions: StandaloneOptions\n  standaloneMethodsRef: RefObject<StandaloneMethods | null>\n}) {\n  const [markdown, setMarkdown] = useState(options.initialMarkdown || \"\")\n  const markdownRef = useRef(markdown)\n  const editor = useEditor(options)\n\n  markdownRef.current = markdown\n\n  useImperativeHandle(\n    standaloneMethodsRef,\n    () => {\n      return {\n        getMarkdown() {\n          return markdownRef.current\n        },\n        setMarkdown(markdown: string) {\n          markdownRef.current = markdown\n          setMarkdown(markdown)\n        },\n      }\n    },\n    [markdownRef, setMarkdown]\n  )\n\n  const onChangeEditable = useCallback(\n    (markdown: string) => {\n      /**\n       * Setting the ref is important in the case where there is an attempt to\n       * call the `getMarkdown` method from `onChange`. Otherwise the `ref`\n       * doesn't get updated until the next render which happens sometime after\n       * the `onChange` callback is called.\n       */\n      markdownRef.current = markdown\n      setMarkdown(markdown)\n      onChange?.(markdown)\n    },\n    [editor]\n  )\n\n  return (\n    <Editable\n      editor={editor}\n      value={markdown}\n      className={className || \"\"}\n      onChange={onChangeEditable}\n      placeholder={placeholder}\n    />\n  )\n}\n\n/**\n * The primary entry point for the standalone version of Wysimark.\n */\nexport function createWysimark(\n  containerElement: HTMLElement,\n  options: StandaloneOptions\n): Wysimark {\n  const standaloneMethodsRef = createRef<StandaloneMethods | null>()\n\n  const root = createRoot(containerElement)\n\n  root.render(\n    <StandaloneEditor\n      standaloneMethodsRef={standaloneMethodsRef}\n      standaloneOptions={options}\n    />\n  )\n\n  return {\n    unmount() {\n      try {\n        root.unmount()\n      } catch (e) {\n        /* ignore */\n      }\n    },\n    getMarkdown() {\n      return standaloneMethodsRef.current?.getMarkdown() || \"\"\n      // const markdown = editorRef.current?.getMarkdown()\n      // return typeof markdown === \"string\"\n      //   ? markdown\n      //   : options.initialMarkdown || \"\"\n    },\n    setMarkdown(markdown: string) {\n      standaloneMethodsRef.current?.setMarkdown(markdown)\n    },\n  }\n}\n","import throttle from \"lodash.throttle\"\nimport { useCallback, useRef, useState } from \"react\"\nimport { Descendant, Editor, Element, Transforms } from \"slate\"\nimport { ReactEditor, RenderLeafProps, Slate } from \"slate-react\"\n\nimport { parse, serialize, escapeUrlSlashes, unescapeUrlSlashes } from \"../convert\"\nimport { t } from \"../utils/translations\"\nimport { SinkEditable } from \"./SinkEditable\"\nimport { useEditor } from \"./useEditor\"\nimport * as Icon from \"../toolbar-plugin/icons\"\n\nexport type { Element, Text } from \"./plugins\"\n\nexport { useEditor }\n\nfunction renderLeaf({ children, attributes }: RenderLeafProps) {\n  return <span {...attributes}>{children}</span>\n}\n\nexport type EditableProps = {\n  // editor: BaseEditor & ReactEditor & HistoryEditor & SinkEditor & WysimarkEditor\n  editor: Editor\n  value: string\n  onChange: (markdown: string) => void\n  throttleInMs?: number\n  placeholder?: string\n  className?: string\n  style?: React.CSSProperties\n} // & Omit<React.TextareaHTMLAttributes<HTMLDivElement>, \"onChange\">\n\nexport function Editable({\n  editor,\n  value,\n  onChange,\n  throttleInMs = 1000,\n  placeholder,\n  className,\n  style,\n}: EditableProps) {\n  const [isRawMode, setIsRawMode] = useState(false)\n  const [rawText, setRawText] = useState(value)\n  const ignoreNextChangeRef = useRef<boolean>(false)\n\n  /**\n   * This is a temporary ref that is only used once to store the initial value\n   * derived from the initial Markdown value.\n   */\n  const initialValueRef = useRef<Descendant[] | undefined>(undefined)\n\n  /**\n   * Track the previous value of the editor. This is used to determine if the\n   * change from the editor resulted in a change in the contents of the editor\n   * as opposed to just a cursor movement for example.\n   */\n  const prevValueRef = useRef<Descendant[] | undefined>(undefined)\n\n  /**\n   * Throttled version of `onChange` for the `Slate` component. This method gets\n   * called on every change to the editor except for:\n   *\n   * - The first call to `onChange` when the component is mounted which would\n   *   be in response to the initial normalization pass that is always run to\n   *   make sure the content is in a good state.\n   * - When the incoming value (markdown) to the editor is changed and we force\n   *   the editor to update its value after doing a `parse` on the markdown.\n   *   We don't want the `onChange` callback to be called for this because if\n   *   the change came from an edit to a textarea, for example, it would\n   *   serialize the editor and the value of the textarea would be updated with\n   *   a slightly different value. This would cause the selection to jump. This\n   *   is especially bad if the cursor is at the end of a line and the user\n   *   presses the spacebar. This is because Markdown does not support spaces\n   *   at the end of a line and the space would be removed and the cursor would\n   *   have nowhere to be.\n   */\n  const onThrottledSlateChange = useCallback(\n    throttle(\n      () => {\n        const markdown = serialize(editor.children as Element[])\n        editor.wysimark.prevValue = {\n          markdown,\n          children: editor.children,\n        }\n        onChange(markdown)\n      },\n      throttleInMs,\n      { leading: false, trailing: true }\n    ),\n    [editor, onChange, throttleInMs]\n  )\n\n  /**\n   * This handles the initial `onChange` event from the `Slate` component and\n   * makes sure to ignore any change events that don't change the content of\n   * the editor. For example, if the user just moves the cursor around, we\n   * don't want to call the `onChange` callback.\n   *\n   * If it's neither, then it passes the call to the throttled `onChange` method.\n   */\n  const onSlateChange = useCallback(() => {\n    if (prevValueRef.current === editor.children) {\n      return\n    }\n    prevValueRef.current = editor.children\n    onThrottledSlateChange()\n  }, [onThrottledSlateChange])\n\n  /**\n   * Handle the initial mounting of the component. This is where we set the\n   * initial value of the editor. We also set the `prevValue` on the editor\n   * which is used to determine if a change in the editor resulted in a change\n   * in the contents of the editor vs just changing the cursor position for\n   * example.\n   *\n   * We add a check for `initialValueRef.current` not being null because the\n   * ref can be lost on a hot reload. This then reinitializes the editor with\n   * the initial value.\n   *\n   * NOTE: This value hasn't been normalized yet.\n   */\n  if (editor.wysimark.prevValue == null || initialValueRef.current == null) {\n    ignoreNextChangeRef.current = true\n    // Only escape URL slashes when not in raw mode\n    const valueToProcess = isRawMode ? value : escapeUrlSlashes(value);\n    const children = parse(valueToProcess)\n    prevValueRef.current = initialValueRef.current = children\n    editor.wysimark.prevValue = {\n      markdown: value, // Store the original unescaped value\n      children,\n    }\n  } else {\n    /**\n     * Handle the case where the `value` differs from the last `markdown` value\n     * set in the Wysimark editor. If it differs, that means the change came\n     * from somewhere else and we need to set the editor value.\n     *\n     * Apart from setting `editor.children` we also need to set the selection\n     * to the start of the document. This is because the selection may be set\n     * to an invalid value based on the new document value.\n     */\n    if (value !== editor.wysimark.prevValue.markdown) {\n      ignoreNextChangeRef.current = true\n      // Only escape URL slashes when not in raw mode\n      const valueToProcess = isRawMode ? value : escapeUrlSlashes(value);\n      const documentValue = parse(valueToProcess)\n      editor.children = documentValue\n      editor.selection = null\n      Transforms.select(editor, Editor.start(editor, [0]))\n    }\n  }\n\n  const onSinkeEditableMouseDown = useCallback(() => {\n    /**\n     * For some reason, Firefox doesn't focus the editor when clicking on\n     * it until the second try. This is a workaround for that.\n     * Handled narrowly to avoid potentially breaking other browsers.\n     */\n    if (navigator.userAgent.toLowerCase().includes(\"firefox\")) {\n      ReactEditor.focus(editor)\n    }\n  }, [editor])\n\n  /**\n   * When the user exits the editor, we want to call the `onChange` callback\n   * immediately.\n   */\n  const onBlur = useCallback(() => {\n    onThrottledSlateChange.flush()\n  }, [onThrottledSlateChange])\n\n  // Handle raw text change\n  const handleRawTextChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newText = e.target.value;\n    setRawText(newText);\n    // Also update the editor's value through onChange\n    onChange(newText);\n  }\n\n  // When switching from raw mode to visual mode\n  const applyRawTextToEditor = useCallback(() => {\n    if (rawText !== editor.getMarkdown()) {\n      editor.setMarkdown(rawText);\n    }\n  }, [editor, rawText]);\n\n  // When switching from visual mode to raw mode\n  const updateRawTextFromEditor = useCallback(() => {\n    const currentMarkdown = editor.getMarkdown();\n    setRawText(currentMarkdown);\n  }, [editor]);\n\n  // Handle mode toggle\n  const handleRawModeToggle = useCallback(() => {\n    if (isRawMode) {\n      // Switching from raw mode to visual mode\n      applyRawTextToEditor();\n    } else {\n      // Switching from visual mode to raw mode\n      updateRawTextFromEditor();\n    }\n    setIsRawMode(!isRawMode);\n  }, [isRawMode, applyRawTextToEditor, updateRawTextFromEditor]);\n\n  // Set the Raw mode state and toggle function on the editor\n  // This allows the toolbar to access these properties\n  editor.wysimark.isRawMode = isRawMode;\n  editor.wysimark.toggleRawMode = handleRawModeToggle;\n\n  return (\n    <div style={{ position: 'relative' }}>\n      {/* Only show the Raw mode icon when in Raw mode */}\n      {isRawMode && (\n        <div style={{ position: 'absolute', top: '5px', right: '25px', zIndex: 10 }}>\n          <div\n            onClick={handleRawModeToggle}\n            style={{\n              background: 'none',\n              border: '1px solid #4a90e2',\n              cursor: 'pointer',\n              padding: '6px',\n              borderRadius: '4px',\n              backgroundColor: 'rgba(74, 144, 226, 0.1)',\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n              transition: 'all 0.2s ease-in-out',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center'\n            }}\n            title={t(\"switchToVisualEditor\")}\n            role=\"button\"\n            tabIndex={0}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                handleRawModeToggle();\n                e.preventDefault();\n              }\n            }}\n          >\n            {/* Use the VisualEditor icon */}\n            <span style={{ color: '#4a90e2', fontSize: '1.25em' }}>\n              <Icon.VisualEditor />\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Raw mode textarea - always in DOM but hidden when not in raw mode */}\n      <div style={{ display: isRawMode ? 'block' : 'none', textAlign: 'center' }}>\n        <textarea\n          value={unescapeUrlSlashes(rawText).replace(/&nbsp;/g, '')}\n          onChange={handleRawTextChange}\n          placeholder={placeholder}\n          className={className}\n          style={{\n            width: 'calc(100% - 60px)', /* Full width minus 200px on each side */\n            margin: '0 auto', /* Center the textarea */\n            minHeight: '200px',\n            padding: '20px',\n            fontFamily: 'monospace',\n            fontSize: '14px',\n            color: '#333',\n            lineHeight: '1.5',\n            backgroundColor: '#fff',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            ...style\n          }}\n        />\n      </div>\n\n      {/* Visual editor - always in DOM but hidden when in raw mode */}\n      <div style={{ display: isRawMode ? 'none' : 'block' }}>\n        <Slate\n          editor={editor}\n          /* NOTE: This is the initial value even though it is named value */\n          value={initialValueRef.current}\n          onChange={onSlateChange}\n        >\n          <SinkEditable\n            renderLeaf={renderLeaf}\n            onMouseDown={onSinkeEditableMouseDown}\n            onBlur={onBlur}\n            placeholder={placeholder}\n            className={className}\n            style={style}\n          />\n        </Slate>\n      </div>\n    </div>\n  )\n}\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport { isPlainObject };\n","const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t},\n\t24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.map(s => `'${s}'`).join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtype,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor?.[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nconst objectCtorString = Object.prototype.constructor.toString()\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\tif (proto === null) {\n\t\treturn true\n\t}\n\tconst Ctor =\n\t\tObject.hasOwnProperty.call(proto, \"constructor\") && proto.constructor\n\n\tif (Ctor === Object) return true\n\n\treturn (\n\t\ttypeof Ctor == \"function\" &&\n\t\tFunction.toString.call(Ctor) === objectCtorString\n\t)\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors ||\n\tfunction getOwnPropertyDescriptors(target: any) {\n\t\t// Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n\t\tconst res: any = {}\n\t\townKeys(target).forEach(key => {\n\t\t\tres[key] = Object.getOwnPropertyDescriptor(target, key)\n\t\t})\n\t\treturn res\n\t}\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === Archtype.Object) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): Archtype {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? Archtype.Array\n\t\t: isMap(thing)\n\t\t? Archtype.Map\n\t\t: isSet(thing)\n\t\t? Archtype.Set\n\t\t: Archtype.Object\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === Archtype.Map\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === Archtype.Map) thing.set(propOrOldValue, value)\n\telse if (t === Archtype.Set) {\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return Array.prototype.slice.call(base)\n\tconst descriptors = getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tlet keys = ownKeys(descriptors)\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key: any = keys[i]\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\n/**\n * Freezes draftable objects. Returns the original object.\n * By default freezes shallowly, but if the second argument is `true` it will freeze recursively.\n *\n * @param obj\n * @param deep\n */\nexport function freeze<T>(obj: T, deep?: boolean): T\nexport function freeze<T>(obj: any, deep: boolean = false): T {\n\tif (isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return obj\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n\treturn obj\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyType,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\tbase: any,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(18, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tif (!plugins[pluginKey]) plugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: ProxyType.ES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: ProxyType.ES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: ProxyType.Map\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: ProxyType.Set\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyType,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyType.ProxyObject ||\n\t\tstate.type_ === ProxyType.ProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyType,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE].base_,\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumerable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyType.ES5Object || state.type_ === ProxyType.ES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// Finalize all children of the copy\n\t\t// For sets we clone before iterating, otherwise we can get in endless loop due to modifying during iteration, see #628\n\t\t// To preserve insertion order in all cases we then clear the set\n\t\t// And we let finalizeProperty know it needs to re-add non-draft children back to the target\n\t\tlet resultEach = result\n\t\tlet isSet = false\n\t\tif (state.type_ === ProxyType.Set) {\n\t\t\tresultEach = new Set(result)\n\t\t\tresult.clear()\n\t\t\tisSet = true\n\t\t}\n\t\teach(resultEach, (key, childValue) =>\n\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path, isSet)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath,\n\ttargetIsSet?: boolean\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyType.Set && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t} else if (targetIsSet) {\n\t\ttargetObject.add(childValue)\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\t// we never freeze for a non-root scope; as it would prevent pruning for drafts inside wrapping objects\n\tif (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyType\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyType.ProxyArray : (ProxyType.ProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(\n\t\tstate: ProxyObjectState,\n\t\tprop: string /* strictly not, but helps TS */,\n\t\tvalue\n\t) {\n\t\tconst desc = getDescriptorFromProto(latest(state), prop)\n\t\tif (desc?.set) {\n\t\t\t// special case: if this write is captured by a setter, we have\n\t\t\t// to trigger it with the correct context\n\t\t\tdesc.set.call(state.draft_, value)\n\t\t\treturn true\n\t\t}\n\t\tif (!state.modified_) {\n\t\t\t// the last check is because we need to be able to distinguish setting a non-existing to undefined (which is a change)\n\t\t\t// from setting an existing property with value undefined to undefined (which is not a change)\n\t\t\tconst current = peek(latest(state), prop)\n\t\t\t// special case, if we assigning the original value to a draft, we can ignore the assignment\n\t\t\tconst currentState: ProxyObjectState = current?.[DRAFT_STATE]\n\t\t\tif (currentState && currentState.base_ === value) {\n\t\t\t\tstate.copy_![prop] = value\n\t\t\t\tstate.assigned_[prop] = false\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tif (is(value, current) && (value !== undefined || has(state.base_, prop)))\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\n\t\tif (\n\t\t\t(state.copy_![prop] === value &&\n\t\t\t\t// special case: handle new props with value 'undefined'\n\t\t\t\t(value !== undefined || prop in state.copy_)) ||\n\t\t\t// special case: NaN\n\t\t\t(Number.isNaN(value) && Number.isNaN(state.copy_![prop]))\n\t\t)\n\t\t\treturn true\n\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\tstate.assigned_[prop] = true\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyType.ProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\t// @ts-ignore\n\treturn arrayTraps.set!.call(this, state, prop, undefined)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\tconst desc = getDescriptorFromProto(source, prop)\n\treturn desc\n\t\t? `value` in desc\n\t\t\t? desc.value\n\t\t\t: // This is a very special case, if the prop is a getter defined by the\n\t\t\t  // prototype, we should invoke it with the draft as context!\n\t\t\t  desc.get?.call(state.draft_)\n\t\t: undefined\n}\n\nfunction getDescriptorFromProto(\n\tsource: any,\n\tprop: PropertyKey\n): PropertyDescriptor | undefined {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\tif (desc) return desc\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = true\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce: IProduce = (base: any, recipe?: any, patchListener?: any) => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === undefined) result = base\n\t\t\tif (result === NOTHING) result = undefined\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\tif (patchListener) {\n\t\t\t\tconst p: Patch[] = []\n\t\t\t\tconst ip: Patch[] = []\n\t\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip)\n\t\t\t\tpatchListener(p, ip)\n\t\t\t}\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches: IProduceWithPatches = (base: any, recipe?: any): any => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => base(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst result = this.produce(base, recipe, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\n\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\treturn result.then(nextState => [nextState, patches!, inversePatches!])\n\t\t}\n\t\treturn [result, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is enabled.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches<T extends Objectish>(base: T, patches: Patch[]): T {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// If there was a patch that replaced the entire state, start from the\n\t\t// patch after that.\n\t\tif (i > -1) {\n\t\t\tpatches = patches.slice(i + 1)\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches)\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtype,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === Archtype.Set ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase Archtype.Map:\n\t\t\treturn new Map(value)\n\t\tcase Archtype.Set:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tImmerState,\n\tDrafted,\n\tES5ArrayState,\n\tES5ObjectState,\n\teach,\n\thas,\n\tisDraft,\n\tlatest,\n\tDRAFT_STATE,\n\tis,\n\tloadPlugin,\n\tImmerScope,\n\tProxyType,\n\tgetCurrentScope,\n\tdie,\n\tmarkChanged,\n\tobjectTraps,\n\townKeys,\n\tgetOwnPropertyDescriptors\n} from \"../internal\"\n\ntype ES5State = ES5ArrayState | ES5ObjectState\n\nexport function enableES5() {\n\tfunction willFinalizeES5_(\n\t\tscope: ImmerScope,\n\t\tresult: any,\n\t\tisReplaced: boolean\n\t) {\n\t\tif (!isReplaced) {\n\t\t\tif (scope.patches_) {\n\t\t\t\tmarkChangesRecursively(scope.drafts_![0])\n\t\t\t}\n\t\t\t// This is faster when we don't care about which attributes changed.\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t\t// When a child draft is returned, look for changes.\n\t\telse if (\n\t\t\tisDraft(result) &&\n\t\t\t(result[DRAFT_STATE] as ES5State).scope_ === scope\n\t\t) {\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t}\n\n\tfunction createES5Draft(isArray: boolean, base: any) {\n\t\tif (isArray) {\n\t\t\tconst draft = new Array(base.length)\n\t\t\tfor (let i = 0; i < base.length; i++)\n\t\t\t\tObject.defineProperty(draft, \"\" + i, proxyProperty(i, true))\n\t\t\treturn draft\n\t\t} else {\n\t\t\tconst descriptors = getOwnPropertyDescriptors(base)\n\t\t\tdelete descriptors[DRAFT_STATE as any]\n\t\t\tconst keys = ownKeys(descriptors)\n\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\tconst key: any = keys[i]\n\t\t\t\tdescriptors[key] = proxyProperty(\n\t\t\t\t\tkey,\n\t\t\t\t\tisArray || !!descriptors[key].enumerable\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n\t\t}\n\t}\n\n\tfunction createES5Proxy_<T>(\n\t\tbase: T,\n\t\tparent?: ImmerState\n\t): Drafted<T, ES5ObjectState | ES5ArrayState> {\n\t\tconst isArray = Array.isArray(base)\n\t\tconst draft = createES5Draft(isArray, base)\n\n\t\tconst state: ES5ObjectState | ES5ArrayState = {\n\t\t\ttype_: isArray ? ProxyType.ES5Array : (ProxyType.ES5Object as any),\n\t\t\tscope_: parent ? parent.scope_ : getCurrentScope(),\n\t\t\tmodified_: false,\n\t\t\tfinalized_: false,\n\t\t\tassigned_: {},\n\t\t\tparent_: parent,\n\t\t\t// base is the object we are drafting\n\t\t\tbase_: base,\n\t\t\t// draft is the draft object itself, that traps all reads and reads from either the base (if unmodified) or copy (if modified)\n\t\t\tdraft_: draft,\n\t\t\tcopy_: null,\n\t\t\trevoked_: false,\n\t\t\tisManual_: false\n\t\t}\n\n\t\tObject.defineProperty(draft, DRAFT_STATE, {\n\t\t\tvalue: state,\n\t\t\t// enumerable: false <- the default\n\t\t\twritable: true\n\t\t})\n\t\treturn draft\n\t}\n\n\t// property descriptors are recycled to make sure we don't create a get and set closure per property,\n\t// but share them all instead\n\tconst descriptors: {[prop: string]: PropertyDescriptor} = {}\n\n\tfunction proxyProperty(\n\t\tprop: string | number,\n\t\tenumerable: boolean\n\t): PropertyDescriptor {\n\t\tlet desc = descriptors[prop]\n\t\tif (desc) {\n\t\t\tdesc.enumerable = enumerable\n\t\t} else {\n\t\t\tdescriptors[prop] = desc = {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable,\n\t\t\t\tget(this: any) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\treturn objectTraps.get(state, prop)\n\t\t\t\t},\n\t\t\t\tset(this: any, value) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tobjectTraps.set(state, prop, value)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn desc\n\t}\n\n\t// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\n\tfunction markChangesSweep(drafts: Drafted<any, ImmerState>[]) {\n\t\t// The natural order of drafts in the `scope` array is based on when they\n\t\t// were accessed. By processing drafts in reverse natural order, we have a\n\t\t// better chance of processing leaf nodes first. When a leaf node is known to\n\t\t// have changed, we can avoid any traversal of its ancestor nodes.\n\t\tfor (let i = drafts.length - 1; i >= 0; i--) {\n\t\t\tconst state: ES5State = drafts[i][DRAFT_STATE]\n\t\t\tif (!state.modified_) {\n\t\t\t\tswitch (state.type_) {\n\t\t\t\t\tcase ProxyType.ES5Array:\n\t\t\t\t\t\tif (hasArrayChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase ProxyType.ES5Object:\n\t\t\t\t\t\tif (hasObjectChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction markChangesRecursively(object: any) {\n\t\tif (!object || typeof object !== \"object\") return\n\t\tconst state: ES5State | undefined = object[DRAFT_STATE]\n\t\tif (!state) return\n\t\tconst {base_, draft_, assigned_, type_} = state\n\t\tif (type_ === ProxyType.ES5Object) {\n\t\t\t// Look for added keys.\n\t\t\t// probably there is a faster way to detect changes, as sweep + recurse seems to do some\n\t\t\t// unnecessary work.\n\t\t\t// also: probably we can store the information we detect here, to speed up tree finalization!\n\t\t\teach(draft_, key => {\n\t\t\t\tif ((key as any) === DRAFT_STATE) return\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif ((base_ as any)[key] === undefined && !has(base_, key)) {\n\t\t\t\t\tassigned_[key] = true\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t} else if (!assigned_[key]) {\n\t\t\t\t\t// Only untouched properties trigger recursion.\n\t\t\t\t\tmarkChangesRecursively(draft_[key])\n\t\t\t\t}\n\t\t\t})\n\t\t\t// Look for removed keys.\n\t\t\teach(base_, key => {\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif (draft_[key] === undefined && !has(draft_, key)) {\n\t\t\t\t\tassigned_[key] = false\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t}\n\t\t\t})\n\t\t} else if (type_ === ProxyType.ES5Array) {\n\t\t\tif (hasArrayChanges(state as ES5ArrayState)) {\n\t\t\t\tmarkChanged(state)\n\t\t\t\tassigned_.length = true\n\t\t\t}\n\n\t\t\tif (draft_.length < base_.length) {\n\t\t\t\tfor (let i = draft_.length; i < base_.length; i++) assigned_[i] = false\n\t\t\t} else {\n\t\t\t\tfor (let i = base_.length; i < draft_.length; i++) assigned_[i] = true\n\t\t\t}\n\n\t\t\t// Minimum count is enough, the other parts has been processed.\n\t\t\tconst min = Math.min(draft_.length, base_.length)\n\n\t\t\tfor (let i = 0; i < min; i++) {\n\t\t\t\t// Only untouched indices trigger recursion.\n\t\t\t\tif (!draft_.hasOwnProperty(i)) {\n\t\t\t\t\tassigned_[i] = true\n\t\t\t\t}\n\t\t\t\tif (assigned_[i] === undefined) markChangesRecursively(draft_[i])\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasObjectChanges(state: ES5ObjectState) {\n\t\tconst {base_, draft_} = state\n\n\t\t// Search for added keys and changed keys. Start at the back, because\n\t\t// non-numeric keys are ordered by time of definition on the object.\n\t\tconst keys = ownKeys(draft_)\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst key: any = keys[i]\n\t\t\tif (key === DRAFT_STATE) continue\n\t\t\tconst baseValue = base_[key]\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (baseValue === undefined && !has(base_, key)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t// Once a base key is deleted, future changes go undetected, because its\n\t\t\t// descriptor is erased. This branch detects any missed changes.\n\t\t\telse {\n\t\t\t\tconst value = draft_[key]\n\t\t\t\tconst state: ImmerState = value && value[DRAFT_STATE]\n\t\t\t\tif (state ? state.base_ !== baseValue : !is(value, baseValue)) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// At this point, no keys were added or changed.\n\t\t// Compare key count to determine if keys were deleted.\n\t\tconst baseIsDraft = !!base_[DRAFT_STATE as any]\n\t\treturn keys.length !== ownKeys(base_).length + (baseIsDraft ? 0 : 1) // + 1 to correct for DRAFT_STATE\n\t}\n\n\tfunction hasArrayChanges(state: ES5ArrayState) {\n\t\tconst {draft_} = state\n\t\tif (draft_.length !== state.base_.length) return true\n\t\t// See #116\n\t\t// If we first shorten the length, our array interceptors will be removed.\n\t\t// If after that new items are added, result in the same original length,\n\t\t// those last items will have no intercepting property.\n\t\t// So if there is no own descriptor on the last position, we know that items were removed and added\n\t\t// N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n\t\t// the last one\n\t\t// last descriptor can be not a trap, if the array was extended\n\t\tconst descriptor = Object.getOwnPropertyDescriptor(\n\t\t\tdraft_,\n\t\t\tdraft_.length - 1\n\t\t)\n\t\t// descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\t\tif (descriptor && !descriptor.get) return true\n\t\t// if we miss a property, it has been deleted, so array probobaly changed\n\t\tfor (let i = 0; i < draft_.length; i++) {\n\t\t\tif (!draft_.hasOwnProperty(i)) return true\n\t\t}\n\t\t// For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\t\treturn false\n\t}\n\n\tfunction hasChanges_(state: ES5State) {\n\t\treturn state.type_ === ProxyType.ES5Object\n\t\t\t? hasObjectChanges(state)\n\t\t\t: hasArrayChanges(state)\n\t}\n\n\tfunction assertUnrevoked(state: any /*ES5State | MapState | SetState*/) {\n\t\tif (state.revoked_) die(3, JSON.stringify(latest(state)))\n\t}\n\n\tloadPlugin(\"ES5\", {\n\t\tcreateES5Proxy_,\n\t\twillFinalizeES5_,\n\t\thasChanges_\n\t})\n}\n","import {immerable} from \"../immer\"\nimport {\n\tImmerState,\n\tPatch,\n\tSetState,\n\tES5ArrayState,\n\tProxyArrayState,\n\tMapState,\n\tES5ObjectState,\n\tProxyObjectState,\n\tPatchPath,\n\tget,\n\teach,\n\thas,\n\tgetArchtype,\n\tisSet,\n\tisMap,\n\tloadPlugin,\n\tProxyType,\n\tArchtype,\n\tdie,\n\tisDraft,\n\tisDraftable,\n\tNOTHING\n} from \"../internal\"\n\nexport function enablePatches() {\n\tconst REPLACE = \"replace\"\n\tconst ADD = \"add\"\n\tconst REMOVE = \"remove\"\n\n\tfunction generatePatches_(\n\t\tstate: ImmerState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t): void {\n\t\tswitch (state.type_) {\n\t\t\tcase ProxyType.ProxyObject:\n\t\t\tcase ProxyType.ES5Object:\n\t\t\tcase ProxyType.Map:\n\t\t\t\treturn generatePatchesFromAssigned(\n\t\t\t\t\tstate,\n\t\t\t\t\tbasePath,\n\t\t\t\t\tpatches,\n\t\t\t\t\tinversePatches\n\t\t\t\t)\n\t\t\tcase ProxyType.ES5Array:\n\t\t\tcase ProxyType.ProxyArray:\n\t\t\t\treturn generateArrayPatches(state, basePath, patches, inversePatches)\n\t\t\tcase ProxyType.Set:\n\t\t\t\treturn generateSetPatches(\n\t\t\t\t\t(state as any) as SetState,\n\t\t\t\t\tbasePath,\n\t\t\t\t\tpatches,\n\t\t\t\t\tinversePatches\n\t\t\t\t)\n\t\t}\n\t}\n\n\tfunction generateArrayPatches(\n\t\tstate: ES5ArrayState | ProxyArrayState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tlet {base_, assigned_} = state\n\t\tlet copy_ = state.copy_!\n\n\t\t// Reduce complexity by ensuring `base` is never longer.\n\t\tif (copy_.length < base_.length) {\n\t\t\t// @ts-ignore\n\t\t\t;[base_, copy_] = [copy_, base_]\n\t\t\t;[patches, inversePatches] = [inversePatches, patches]\n\t\t}\n\n\t\t// Process replaced indices.\n\t\tfor (let i = 0; i < base_.length; i++) {\n\t\t\tif (assigned_[i] && copy_[i] !== base_[i]) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: REPLACE,\n\t\t\t\t\tpath,\n\t\t\t\t\t// Need to maybe clone it, as it can in fact be the original value\n\t\t\t\t\t// due to the base/copy inversion at the start of this function\n\t\t\t\t\tvalue: clonePatchValueIfNeeded(copy_[i])\n\t\t\t\t})\n\t\t\t\tinversePatches.push({\n\t\t\t\t\top: REPLACE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue: clonePatchValueIfNeeded(base_[i])\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\t// Process added indices.\n\t\tfor (let i = base_.length; i < copy_.length; i++) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: ADD,\n\t\t\t\tpath,\n\t\t\t\t// Need to maybe clone it, as it can in fact be the original value\n\t\t\t\t// due to the base/copy inversion at the start of this function\n\t\t\t\tvalue: clonePatchValueIfNeeded(copy_[i])\n\t\t\t})\n\t\t}\n\t\tif (base_.length < copy_.length) {\n\t\t\tinversePatches.push({\n\t\t\t\top: REPLACE,\n\t\t\t\tpath: basePath.concat([\"length\"]),\n\t\t\t\tvalue: base_.length\n\t\t\t})\n\t\t}\n\t}\n\n\t// This is used for both Map objects and normal objects.\n\tfunction generatePatchesFromAssigned(\n\t\tstate: MapState | ES5ObjectState | ProxyObjectState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tconst {base_, copy_} = state\n\t\teach(state.assigned_!, (key, assignedValue) => {\n\t\t\tconst origValue = get(base_, key)\n\t\t\tconst value = get(copy_!, key)\n\t\t\tconst op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD\n\t\t\tif (origValue === value && op === REPLACE) return\n\t\t\tconst path = basePath.concat(key as any)\n\t\t\tpatches.push(op === REMOVE ? {op, path} : {op, path, value})\n\t\t\tinversePatches.push(\n\t\t\t\top === ADD\n\t\t\t\t\t? {op: REMOVE, path}\n\t\t\t\t\t: op === REMOVE\n\t\t\t\t\t? {op: ADD, path, value: clonePatchValueIfNeeded(origValue)}\n\t\t\t\t\t: {op: REPLACE, path, value: clonePatchValueIfNeeded(origValue)}\n\t\t\t)\n\t\t})\n\t}\n\n\tfunction generateSetPatches(\n\t\tstate: SetState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tlet {base_, copy_} = state\n\n\t\tlet i = 0\n\t\tbase_.forEach((value: any) => {\n\t\t\tif (!copy_!.has(value)) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: REMOVE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t\tinversePatches.unshift({\n\t\t\t\t\top: ADD,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t}\n\t\t\ti++\n\t\t})\n\t\ti = 0\n\t\tcopy_!.forEach((value: any) => {\n\t\t\tif (!base_.has(value)) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: ADD,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t\tinversePatches.unshift({\n\t\t\t\t\top: REMOVE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t}\n\t\t\ti++\n\t\t})\n\t}\n\n\tfunction generateReplacementPatches_(\n\t\tbaseValue: any,\n\t\treplacement: any,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t): void {\n\t\tpatches.push({\n\t\t\top: REPLACE,\n\t\t\tpath: [],\n\t\t\tvalue: replacement === NOTHING ? undefined : replacement\n\t\t})\n\t\tinversePatches.push({\n\t\t\top: REPLACE,\n\t\t\tpath: [],\n\t\t\tvalue: baseValue\n\t\t})\n\t}\n\n\tfunction applyPatches_<T>(draft: T, patches: Patch[]): T {\n\t\tpatches.forEach(patch => {\n\t\t\tconst {path, op} = patch\n\n\t\t\tlet base: any = draft\n\t\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\t\tconst parentType = getArchtype(base)\n\t\t\t\tlet p = path[i]\n\t\t\t\tif (typeof p !== \"string\" && typeof p !== \"number\") {\n\t\t\t\t\tp = \"\" + p\n\t\t\t\t}\n\n\t\t\t\t// See #738, avoid prototype pollution\n\t\t\t\tif (\n\t\t\t\t\t(parentType === Archtype.Object || parentType === Archtype.Array) &&\n\t\t\t\t\t(p === \"__proto__\" || p === \"constructor\")\n\t\t\t\t)\n\t\t\t\t\tdie(24)\n\t\t\t\tif (typeof base === \"function\" && p === \"prototype\") die(24)\n\t\t\t\tbase = get(base, p)\n\t\t\t\tif (typeof base !== \"object\") die(15, path.join(\"/\"))\n\t\t\t}\n\n\t\t\tconst type = getArchtype(base)\n\t\t\tconst value = deepClonePatchValue(patch.value) // used to clone patch to ensure original patch is not modified, see #411\n\t\t\tconst key = path[path.length - 1]\n\t\t\tswitch (op) {\n\t\t\t\tcase REPLACE:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\t\tdie(16)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// if value is an object, then it's assigned by reference\n\t\t\t\t\t\t\t// in the following add or remove ops, the value field inside the patch will also be modifyed\n\t\t\t\t\t\t\t// so we use value from the cloned patch\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t\t}\n\t\t\t\tcase ADD:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\t\treturn key === \"-\"\n\t\t\t\t\t\t\t\t? base.push(value)\n\t\t\t\t\t\t\t\t: base.splice(key as any, 0, value)\n\t\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\t\treturn base.add(value)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t\t}\n\t\t\t\tcase REMOVE:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\t\treturn base.splice(key as any, 1)\n\t\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\t\treturn base.delete(key)\n\t\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\t\treturn base.delete(patch.value)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn delete base[key]\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tdie(17, op)\n\t\t\t}\n\t\t})\n\n\t\treturn draft\n\t}\n\n\t// optimize: this is quite a performance hit, can we detect intelligently when it is needed?\n\t// E.g. auto-draft when new objects from outside are assigned and modified?\n\t// (See failing test when deepClone just returns obj)\n\tfunction deepClonePatchValue<T>(obj: T): T\n\tfunction deepClonePatchValue(obj: any) {\n\t\tif (!isDraftable(obj)) return obj\n\t\tif (Array.isArray(obj)) return obj.map(deepClonePatchValue)\n\t\tif (isMap(obj))\n\t\t\treturn new Map(\n\t\t\t\tArray.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n\t\t\t)\n\t\tif (isSet(obj)) return new Set(Array.from(obj).map(deepClonePatchValue))\n\t\tconst cloned = Object.create(Object.getPrototypeOf(obj))\n\t\tfor (const key in obj) cloned[key] = deepClonePatchValue(obj[key])\n\t\tif (has(obj, immerable)) cloned[immerable] = obj[immerable]\n\t\treturn cloned\n\t}\n\n\tfunction clonePatchValueIfNeeded<T>(obj: T): T {\n\t\tif (isDraft(obj)) {\n\t\t\treturn deepClonePatchValue(obj)\n\t\t} else return obj\n\t}\n\n\tloadPlugin(\"Patches\", {\n\t\tapplyPatches_,\n\t\tgeneratePatches_,\n\t\tgenerateReplacementPatches_\n\t})\n}\n","// types only!\nimport {\n\tImmerState,\n\tAnyMap,\n\tAnySet,\n\tMapState,\n\tSetState,\n\tDRAFT_STATE,\n\tgetCurrentScope,\n\tlatest,\n\titeratorSymbol,\n\tisDraftable,\n\tcreateProxy,\n\tloadPlugin,\n\tmarkChanged,\n\tProxyType,\n\tdie,\n\teach\n} from \"../internal\"\n\nexport function enableMapSet() {\n\t/* istanbul ignore next */\n\tvar extendStatics = function(d: any, b: any): any {\n\t\textendStatics =\n\t\t\tObject.setPrototypeOf ||\n\t\t\t({__proto__: []} instanceof Array &&\n\t\t\t\tfunction(d, b) {\n\t\t\t\t\td.__proto__ = b\n\t\t\t\t}) ||\n\t\t\tfunction(d, b) {\n\t\t\t\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]\n\t\t\t}\n\t\treturn extendStatics(d, b)\n\t}\n\n\t// Ugly hack to resolve #502 and inherit built in Map / Set\n\tfunction __extends(d: any, b: any): any {\n\t\textendStatics(d, b)\n\t\tfunction __(this: any): any {\n\t\t\tthis.constructor = d\n\t\t}\n\t\td.prototype =\n\t\t\t// @ts-ignore\n\t\t\t((__.prototype = b.prototype), new __())\n\t}\n\n\tconst DraftMap = (function(_super) {\n\t\t__extends(DraftMap, _super)\n\t\t// Create class manually, cause #502\n\t\tfunction DraftMap(this: any, target: AnyMap, parent?: ImmerState): any {\n\t\t\tthis[DRAFT_STATE] = {\n\t\t\t\ttype_: ProxyType.Map,\n\t\t\t\tparent_: parent,\n\t\t\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t\t\tmodified_: false,\n\t\t\t\tfinalized_: false,\n\t\t\t\tcopy_: undefined,\n\t\t\t\tassigned_: undefined,\n\t\t\t\tbase_: target,\n\t\t\t\tdraft_: this as any,\n\t\t\t\tisManual_: false,\n\t\t\t\trevoked_: false\n\t\t\t} as MapState\n\t\t\treturn this\n\t\t}\n\t\tconst p = DraftMap.prototype\n\n\t\tObject.defineProperty(p, \"size\", {\n\t\t\tget: function() {\n\t\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t\t}\n\t\t\t// enumerable: false,\n\t\t\t// configurable: true\n\t\t})\n\n\t\tp.has = function(key: any): boolean {\n\t\t\treturn latest(this[DRAFT_STATE]).has(key)\n\t\t}\n\n\t\tp.set = function(key: any, value: any) {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (!latest(state).has(key) || latest(state).get(key) !== value) {\n\t\t\t\tprepareMapCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.assigned_!.set(key, true)\n\t\t\t\tstate.copy_!.set(key, value)\n\t\t\t\tstate.assigned_!.set(key, true)\n\t\t\t}\n\t\t\treturn this\n\t\t}\n\n\t\tp.delete = function(key: any): boolean {\n\t\t\tif (!this.has(key)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareMapCopy(state)\n\t\t\tmarkChanged(state)\n\t\t\tif (state.base_.has(key)) {\n\t\t\t\tstate.assigned_!.set(key, false)\n\t\t\t} else {\n\t\t\t\tstate.assigned_!.delete(key)\n\t\t\t}\n\t\t\tstate.copy_!.delete(key)\n\t\t\treturn true\n\t\t}\n\n\t\tp.clear = function() {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (latest(state).size) {\n\t\t\t\tprepareMapCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.assigned_ = new Map()\n\t\t\t\teach(state.base_, key => {\n\t\t\t\t\tstate.assigned_!.set(key, false)\n\t\t\t\t})\n\t\t\t\tstate.copy_!.clear()\n\t\t\t}\n\t\t}\n\n\t\tp.forEach = function(\n\t\t\tcb: (value: any, key: any, self: any) => void,\n\t\t\tthisArg?: any\n\t\t) {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tlatest(state).forEach((_value: any, key: any, _map: any) => {\n\t\t\t\tcb.call(thisArg, this.get(key), key, this)\n\t\t\t})\n\t\t}\n\n\t\tp.get = function(key: any): any {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tconst value = latest(state).get(key)\n\t\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\t\treturn value\n\t\t\t}\n\t\t\tif (value !== state.base_.get(key)) {\n\t\t\t\treturn value // either already drafted or reassigned\n\t\t\t}\n\t\t\t// despite what it looks, this creates a draft only once, see above condition\n\t\t\tconst draft = createProxy(state.scope_.immer_, value, state)\n\t\t\tprepareMapCopy(state)\n\t\t\tstate.copy_!.set(key, draft)\n\t\t\treturn draft\n\t\t}\n\n\t\tp.keys = function(): IterableIterator<any> {\n\t\t\treturn latest(this[DRAFT_STATE]).keys()\n\t\t}\n\n\t\tp.values = function(): IterableIterator<any> {\n\t\t\tconst iterator = this.keys()\n\t\t\treturn {\n\t\t\t\t[iteratorSymbol]: () => this.values(),\n\t\t\t\tnext: () => {\n\t\t\t\t\tconst r = iterator.next()\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tif (r.done) return r\n\t\t\t\t\tconst value = this.get(r.value)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdone: false,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} as any\n\t\t}\n\n\t\tp.entries = function(): IterableIterator<[any, any]> {\n\t\t\tconst iterator = this.keys()\n\t\t\treturn {\n\t\t\t\t[iteratorSymbol]: () => this.entries(),\n\t\t\t\tnext: () => {\n\t\t\t\t\tconst r = iterator.next()\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tif (r.done) return r\n\t\t\t\t\tconst value = this.get(r.value)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdone: false,\n\t\t\t\t\t\tvalue: [r.value, value]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} as any\n\t\t}\n\n\t\tp[iteratorSymbol] = function() {\n\t\t\treturn this.entries()\n\t\t}\n\n\t\treturn DraftMap\n\t})(Map)\n\n\tfunction proxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T {\n\t\t// @ts-ignore\n\t\treturn new DraftMap(target, parent)\n\t}\n\n\tfunction prepareMapCopy(state: MapState) {\n\t\tif (!state.copy_) {\n\t\t\tstate.assigned_ = new Map()\n\t\t\tstate.copy_ = new Map(state.base_)\n\t\t}\n\t}\n\n\tconst DraftSet = (function(_super) {\n\t\t__extends(DraftSet, _super)\n\t\t// Create class manually, cause #502\n\t\tfunction DraftSet(this: any, target: AnySet, parent?: ImmerState) {\n\t\t\tthis[DRAFT_STATE] = {\n\t\t\t\ttype_: ProxyType.Set,\n\t\t\t\tparent_: parent,\n\t\t\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t\t\tmodified_: false,\n\t\t\t\tfinalized_: false,\n\t\t\t\tcopy_: undefined,\n\t\t\t\tbase_: target,\n\t\t\t\tdraft_: this,\n\t\t\t\tdrafts_: new Map(),\n\t\t\t\trevoked_: false,\n\t\t\t\tisManual_: false\n\t\t\t} as SetState\n\t\t\treturn this\n\t\t}\n\t\tconst p = DraftSet.prototype\n\n\t\tObject.defineProperty(p, \"size\", {\n\t\t\tget: function() {\n\t\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t\t}\n\t\t\t// enumerable: true,\n\t\t})\n\n\t\tp.has = function(value: any): boolean {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\t// bit of trickery here, to be able to recognize both the value, and the draft of its value\n\t\t\tif (!state.copy_) {\n\t\t\t\treturn state.base_.has(value)\n\t\t\t}\n\t\t\tif (state.copy_.has(value)) return true\n\t\t\tif (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n\t\t\t\treturn true\n\t\t\treturn false\n\t\t}\n\n\t\tp.add = function(value: any): any {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (!this.has(value)) {\n\t\t\t\tprepareSetCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.copy_!.add(value)\n\t\t\t}\n\t\t\treturn this\n\t\t}\n\n\t\tp.delete = function(value: any): any {\n\t\t\tif (!this.has(value)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\tmarkChanged(state)\n\t\t\treturn (\n\t\t\t\tstate.copy_!.delete(value) ||\n\t\t\t\t(state.drafts_.has(value)\n\t\t\t\t\t? state.copy_!.delete(state.drafts_.get(value))\n\t\t\t\t\t: /* istanbul ignore next */ false)\n\t\t\t)\n\t\t}\n\n\t\tp.clear = function() {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (latest(state).size) {\n\t\t\t\tprepareSetCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.copy_!.clear()\n\t\t\t}\n\t\t}\n\n\t\tp.values = function(): IterableIterator<any> {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\treturn state.copy_!.values()\n\t\t}\n\n\t\tp.entries = function entries(): IterableIterator<[any, any]> {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\treturn state.copy_!.entries()\n\t\t}\n\n\t\tp.keys = function(): IterableIterator<any> {\n\t\t\treturn this.values()\n\t\t}\n\n\t\tp[iteratorSymbol] = function() {\n\t\t\treturn this.values()\n\t\t}\n\n\t\tp.forEach = function forEach(cb: any, thisArg?: any) {\n\t\t\tconst iterator = this.values()\n\t\t\tlet result = iterator.next()\n\t\t\twhile (!result.done) {\n\t\t\t\tcb.call(thisArg, result.value, result.value, this)\n\t\t\t\tresult = iterator.next()\n\t\t\t}\n\t\t}\n\n\t\treturn DraftSet\n\t})(Set)\n\n\tfunction proxySet_<T extends AnySet>(target: T, parent?: ImmerState): T {\n\t\t// @ts-ignore\n\t\treturn new DraftSet(target, parent)\n\t}\n\n\tfunction prepareSetCopy(state: SetState) {\n\t\tif (!state.copy_) {\n\t\t\t// create drafts for all entries to preserve insertion order\n\t\t\tstate.copy_ = new Set()\n\t\t\tstate.base_.forEach(value => {\n\t\t\t\tif (isDraftable(value)) {\n\t\t\t\t\tconst draft = createProxy(state.scope_.immer_, value, state)\n\t\t\t\t\tstate.drafts_.set(value, draft)\n\t\t\t\t\tstate.copy_!.add(draft)\n\t\t\t\t} else {\n\t\t\t\t\tstate.copy_!.add(value)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction assertUnrevoked(state: any /*ES5State | MapState | SetState*/) {\n\t\tif (state.revoked_) die(3, JSON.stringify(latest(state)))\n\t}\n\n\tloadPlugin(\"MapSet\", {proxyMap_, proxySet_})\n}\n","import {enableES5} from \"./es5\"\nimport {enableMapSet} from \"./mapset\"\nimport {enablePatches} from \"./patches\"\n\nexport function enableAllPlugins() {\n\tenableES5()\n\tenableMapSet()\n\tenablePatches()\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable,\n\tfreeze\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * Always freeze by default, even in production mode\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol.for(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { Editor, Path, PathRef, PointRef, RangeRef } from '..'\n\nexport const DIRTY_PATHS: WeakMap<Editor, Path[]> = new WeakMap()\nexport const DIRTY_PATH_KEYS: WeakMap<Editor, Set<string>> = new WeakMap()\nexport const FLUSHING: WeakMap<Editor, boolean> = new WeakMap()\nexport const NORMALIZING: WeakMap<Editor, boolean> = new WeakMap()\nexport const PATH_REFS: WeakMap<Editor, Set<PathRef>> = new WeakMap()\nexport const POINT_REFS: WeakMap<Editor, Set<PointRef>> = new WeakMap()\nexport const RANGE_REFS: WeakMap<Editor, Set<RangeRef>> = new WeakMap()\n","import {\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  PointRef,\n  Range,\n  RangeRef,\n  Text,\n  Transforms,\n} from './'\nimport { DIRTY_PATHS, DIRTY_PATH_KEYS, FLUSHING } from './utils/weak-maps'\nimport { TextUnit } from './interfaces/types'\n\n/**\n * Create a new Slate `Editor` object.\n */\n\nexport const createEditor = (): Editor => {\n  const editor: Editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isInline: () => false,\n    isVoid: () => false,\n    markableVoid: () => false,\n    onChange: () => {},\n\n    apply: (op: Operation) => {\n      for (const ref of Editor.pathRefs(editor)) {\n        PathRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.pointRefs(editor)) {\n        PointRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.rangeRefs(editor)) {\n        RangeRef.transform(ref, op)\n      }\n\n      const oldDirtyPaths = DIRTY_PATHS.get(editor) || []\n      const oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || new Set()\n      let dirtyPaths: Path[]\n      let dirtyPathKeys: Set<string>\n\n      const add = (path: Path | null) => {\n        if (path) {\n          const key = path.join(',')\n\n          if (!dirtyPathKeys.has(key)) {\n            dirtyPathKeys.add(key)\n            dirtyPaths.push(path)\n          }\n        }\n      }\n\n      if (Path.operationCanTransformPath(op)) {\n        dirtyPaths = []\n        dirtyPathKeys = new Set()\n        for (const path of oldDirtyPaths) {\n          const newPath = Path.transform(path, op)\n          add(newPath)\n        }\n      } else {\n        dirtyPaths = oldDirtyPaths\n        dirtyPathKeys = oldDirtyPathKeys\n      }\n\n      const newDirtyPaths = editor.getDirtyPaths(op)\n      for (const path of newDirtyPaths) {\n        add(path)\n      }\n\n      DIRTY_PATHS.set(editor, dirtyPaths)\n      DIRTY_PATH_KEYS.set(editor, dirtyPathKeys)\n      Transforms.transform(editor, op)\n      editor.operations.push(op)\n      Editor.normalize(editor)\n\n      // Clear any formats applied to the cursor if the selection changes.\n      if (op.type === 'set_selection') {\n        editor.marks = null\n      }\n\n      if (!FLUSHING.get(editor)) {\n        FLUSHING.set(editor, true)\n\n        Promise.resolve().then(() => {\n          FLUSHING.set(editor, false)\n          editor.onChange()\n          editor.operations = []\n        })\n      }\n    },\n\n    addMark: (key: string, value: any) => {\n      const { selection, markableVoid } = editor\n\n      if (selection) {\n        const match = (node: Node, path: Path) => {\n          if (!Text.isText(node)) {\n            return false // marks can only be applied to text\n          }\n          const [parentNode, parentPath] = Editor.parent(editor, path)\n          return !editor.isVoid(parentNode) || editor.markableVoid(parentNode)\n        }\n        const expandedSelection = Range.isExpanded(selection)\n        let markAcceptingVoidSelected = false\n        if (!expandedSelection) {\n          const [selectedNode, selectedPath] = Editor.node(editor, selection)\n          if (selectedNode && match(selectedNode, selectedPath)) {\n            const [parentNode] = Editor.parent(editor, selectedPath)\n            markAcceptingVoidSelected =\n              parentNode && editor.markableVoid(parentNode)\n          }\n        }\n        if (expandedSelection || markAcceptingVoidSelected) {\n          Transforms.setNodes(\n            editor,\n            { [key]: value },\n            {\n              match,\n              split: true,\n              voids: true,\n            }\n          )\n        } else {\n          const marks = {\n            ...(Editor.marks(editor) || {}),\n            [key]: value,\n          }\n\n          editor.marks = marks\n          if (!FLUSHING.get(editor)) {\n            editor.onChange()\n          }\n        }\n      }\n    },\n\n    deleteBackward: (unit: TextUnit) => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit, reverse: true })\n      }\n    },\n\n    deleteForward: (unit: TextUnit) => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit })\n      }\n    },\n\n    deleteFragment: (direction?: 'forward' | 'backward') => {\n      const { selection } = editor\n\n      if (selection && Range.isExpanded(selection)) {\n        Transforms.delete(editor, { reverse: direction === 'backward' })\n      }\n    },\n\n    getFragment: () => {\n      const { selection } = editor\n\n      if (selection) {\n        return Node.fragment(editor, selection)\n      }\n      return []\n    },\n\n    insertBreak: () => {\n      Transforms.splitNodes(editor, { always: true })\n    },\n\n    insertSoftBreak: () => {\n      Transforms.splitNodes(editor, { always: true })\n    },\n\n    insertFragment: (fragment: Node[]) => {\n      Transforms.insertFragment(editor, fragment)\n    },\n\n    insertNode: (node: Node) => {\n      Transforms.insertNodes(editor, node)\n    },\n\n    insertText: (text: string) => {\n      const { selection, marks } = editor\n\n      if (selection) {\n        if (marks) {\n          const node = { text, ...marks }\n          Transforms.insertNodes(editor, node)\n        } else {\n          Transforms.insertText(editor, text)\n        }\n\n        editor.marks = null\n      }\n    },\n\n    normalizeNode: (entry: NodeEntry) => {\n      const [node, path] = entry\n\n      // There are no core normalizations for text nodes.\n      if (Text.isText(node)) {\n        return\n      }\n\n      // Ensure that block and inline nodes have at least one text child.\n      if (Element.isElement(node) && node.children.length === 0) {\n        const child = { text: '' }\n        Transforms.insertNodes(editor, child, {\n          at: path.concat(0),\n          voids: true,\n        })\n        return\n      }\n\n      // Determine whether the node should have block or inline children.\n      const shouldHaveInlines = Editor.isEditor(node)\n        ? false\n        : Element.isElement(node) &&\n          (editor.isInline(node) ||\n            node.children.length === 0 ||\n            Text.isText(node.children[0]) ||\n            editor.isInline(node.children[0]))\n\n      // Since we'll be applying operations while iterating, keep track of an\n      // index that accounts for any added/removed nodes.\n      let n = 0\n\n      for (let i = 0; i < node.children.length; i++, n++) {\n        const currentNode = Node.get(editor, path)\n        if (Text.isText(currentNode)) continue\n        const child = node.children[i] as Descendant\n        const prev = currentNode.children[n - 1] as Descendant\n        const isLast = i === node.children.length - 1\n        const isInlineOrText =\n          Text.isText(child) ||\n          (Element.isElement(child) && editor.isInline(child))\n\n        // Only allow block nodes in the top-level children and parent blocks\n        // that only contain block nodes. Similarly, only allow inline nodes in\n        // other inline nodes, or parent blocks that only contain inlines and\n        // text.\n        if (isInlineOrText !== shouldHaveInlines) {\n          Transforms.removeNodes(editor, { at: path.concat(n), voids: true })\n          n--\n        } else if (Element.isElement(child)) {\n          // Ensure that inline nodes are surrounded by text nodes.\n          if (editor.isInline(child)) {\n            if (prev == null || !Text.isText(prev)) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n++\n            } else if (isLast) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n + 1),\n                voids: true,\n              })\n              n++\n            }\n          }\n        } else {\n          // Merge adjacent text nodes that are empty or match.\n          if (prev != null && Text.isText(prev)) {\n            if (Text.equals(child, prev, { loose: true })) {\n              Transforms.mergeNodes(editor, { at: path.concat(n), voids: true })\n              n--\n            } else if (prev.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n - 1),\n                voids: true,\n              })\n              n--\n            } else if (child.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n--\n            }\n          }\n        }\n      }\n    },\n\n    removeMark: (key: string) => {\n      const { selection } = editor\n\n      if (selection) {\n        const match = (node: Node, path: Path) => {\n          if (!Text.isText(node)) {\n            return false // marks can only be applied to text\n          }\n          const [parentNode, parentPath] = Editor.parent(editor, path)\n          return !editor.isVoid(parentNode) || editor.markableVoid(parentNode)\n        }\n        const expandedSelection = Range.isExpanded(selection)\n        let markAcceptingVoidSelected = false\n        if (!expandedSelection) {\n          const [selectedNode, selectedPath] = Editor.node(editor, selection)\n          if (selectedNode && match(selectedNode, selectedPath)) {\n            const [parentNode] = Editor.parent(editor, selectedPath)\n            markAcceptingVoidSelected =\n              parentNode && editor.markableVoid(parentNode)\n          }\n        }\n        if (expandedSelection || markAcceptingVoidSelected) {\n          Transforms.unsetNodes(editor, key, {\n            match,\n            split: true,\n            voids: true,\n          })\n        } else {\n          const marks = { ...(Editor.marks(editor) || {}) }\n          delete marks[key]\n          editor.marks = marks\n          if (!FLUSHING.get(editor)) {\n            editor.onChange()\n          }\n        }\n      }\n    },\n\n    /**\n     * Get the \"dirty\" paths generated from an operation.\n     */\n\n    getDirtyPaths: (op: Operation): Path[] => {\n      switch (op.type) {\n        case 'insert_text':\n        case 'remove_text':\n        case 'set_node': {\n          const { path } = op\n          return Path.levels(path)\n        }\n\n        case 'insert_node': {\n          const { node, path } = op\n          const levels = Path.levels(path)\n          const descendants = Text.isText(node)\n            ? []\n            : Array.from(Node.nodes(node), ([, p]) => path.concat(p))\n\n          return [...levels, ...descendants]\n        }\n\n        case 'merge_node': {\n          const { path } = op\n          const ancestors = Path.ancestors(path)\n          const previousPath = Path.previous(path)\n          return [...ancestors, previousPath]\n        }\n\n        case 'move_node': {\n          const { path, newPath } = op\n\n          if (Path.equals(path, newPath)) {\n            return []\n          }\n\n          const oldAncestors: Path[] = []\n          const newAncestors: Path[] = []\n\n          for (const ancestor of Path.ancestors(path)) {\n            const p = Path.transform(ancestor, op)\n            oldAncestors.push(p!)\n          }\n\n          for (const ancestor of Path.ancestors(newPath)) {\n            const p = Path.transform(ancestor, op)\n            newAncestors.push(p!)\n          }\n\n          const newParent = newAncestors[newAncestors.length - 1]\n          const newIndex = newPath[newPath.length - 1]\n          const resultPath = newParent.concat(newIndex)\n\n          return [...oldAncestors, ...newAncestors, resultPath]\n        }\n\n        case 'remove_node': {\n          const { path } = op\n          const ancestors = Path.ancestors(path)\n          return [...ancestors]\n        }\n\n        case 'split_node': {\n          const { path } = op\n          const levels = Path.levels(path)\n          const nextPath = Path.next(path)\n          return [...levels, nextPath]\n        }\n\n        default: {\n          return []\n        }\n      }\n    },\n  }\n\n  return editor\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","// Character (grapheme cluster) boundaries are determined according to\n// the default grapheme cluster boundary specification, extended grapheme clusters variant[1].\n//\n// References:\n//\n// [1] https://www.unicode.org/reports/tr29/#Default_Grapheme_Cluster_Table\n// [2] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt\n// [3] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.html\n// [4] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.txt\n\n/**\n * Get the distance to the end of the first character in a string of text.\n */\n\nexport const getCharacterDistance = (str: string, isRTL = false): number => {\n  const isLTR = !isRTL\n  const codepoints = isRTL ? codepointsIteratorRTL(str) : str\n\n  let left: CodepointType = CodepointType.None\n  let right: CodepointType = CodepointType.None\n  let distance = 0\n  // Evaluation of these conditions are deferred.\n  let gb11: boolean | null = null // Is GB11 applicable?\n  let gb12Or13: boolean | null = null // Is GB12 or GB13 applicable?\n\n  for (const char of codepoints) {\n    const code = char.codePointAt(0)\n    if (!code) break\n\n    const type = getCodepointType(char, code)\n    ;[left, right] = isLTR ? [right, type] : [type, left]\n\n    if (\n      intersects(left, CodepointType.ZWJ) &&\n      intersects(right, CodepointType.ExtPict)\n    ) {\n      if (isLTR) {\n        gb11 = endsWithEmojiZWJ(str.substring(0, distance))\n      } else {\n        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance))\n      }\n      if (!gb11) break\n    }\n\n    if (\n      intersects(left, CodepointType.RI) &&\n      intersects(right, CodepointType.RI)\n    ) {\n      if (gb12Or13 !== null) {\n        gb12Or13 = !gb12Or13\n      } else {\n        if (isLTR) {\n          gb12Or13 = true\n        } else {\n          gb12Or13 = endsWithOddNumberOfRIs(\n            str.substring(0, str.length - distance)\n          )\n        }\n      }\n      if (!gb12Or13) break\n    }\n\n    if (\n      left !== CodepointType.None &&\n      right !== CodepointType.None &&\n      isBoundaryPair(left, right)\n    ) {\n      break\n    }\n\n    distance += char.length\n  }\n\n  return distance || 1\n}\n\nconst SPACE = /\\s/\nconst PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\nconst CHAMELEON = /['\\u2018\\u2019]/\n\n/**\n * Get the distance to the end of the first word in a string of text.\n */\n\nexport const getWordDistance = (text: string, isRTL = false): number => {\n  let dist = 0\n  let started = false\n\n  while (text.length > 0) {\n    const charDist = getCharacterDistance(text, isRTL)\n    const [char, remaining] = splitByCharacterDistance(text, charDist, isRTL)\n\n    if (isWordCharacter(char, remaining, isRTL)) {\n      started = true\n      dist += charDist\n    } else if (!started) {\n      dist += charDist\n    } else {\n      break\n    }\n\n    text = remaining\n  }\n\n  return dist\n}\n\n/**\n * Split a string in two parts at a given distance starting from the end when\n * `isRTL` is set to `true`.\n */\n\nexport const splitByCharacterDistance = (\n  str: string,\n  dist: number,\n  isRTL?: boolean\n): [string, string] => {\n  if (isRTL) {\n    const at = str.length - dist\n    return [str.slice(at, str.length), str.slice(0, at)]\n  }\n\n  return [str.slice(0, dist), str.slice(dist)]\n}\n\n/**\n * Check if a character is a word character. The `remaining` argument is used\n * because sometimes you must read subsequent characters to truly determine it.\n */\n\nconst isWordCharacter = (\n  char: string,\n  remaining: string,\n  isRTL = false\n): boolean => {\n  if (SPACE.test(char)) {\n    return false\n  }\n\n  // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n  if (CHAMELEON.test(char)) {\n    const charDist = getCharacterDistance(remaining, isRTL)\n    const [nextChar, nextRemaining] = splitByCharacterDistance(\n      remaining,\n      charDist,\n      isRTL\n    )\n\n    if (isWordCharacter(nextChar, nextRemaining, isRTL)) {\n      return true\n    }\n  }\n\n  if (PUNCTUATION.test(char)) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Iterate on codepoints from right to left.\n */\n\nexport const codepointsIteratorRTL = function*(str: string) {\n  const end = str.length - 1\n\n  for (let i = 0; i < str.length; i++) {\n    const char1 = str.charAt(end - i)\n\n    if (isLowSurrogate(char1.charCodeAt(0))) {\n      const char2 = str.charAt(end - i - 1)\n      if (isHighSurrogate(char2.charCodeAt(0))) {\n        yield char2 + char1\n\n        i++\n        continue\n      }\n    }\n\n    yield char1\n  }\n}\n\n/**\n * Is `charCode` a high surrogate.\n *\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\n */\n\nconst isHighSurrogate = (charCode: number) => {\n  return charCode >= 0xd800 && charCode <= 0xdbff\n}\n\n/**\n * Is `charCode` a low surrogate.\n *\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\n */\n\nconst isLowSurrogate = (charCode: number) => {\n  return charCode >= 0xdc00 && charCode <= 0xdfff\n}\n\nenum CodepointType {\n  None = 0,\n  Extend = 1 << 0,\n  ZWJ = 1 << 1,\n  RI = 1 << 2,\n  Prepend = 1 << 3,\n  SpacingMark = 1 << 4,\n  L = 1 << 5,\n  V = 1 << 6,\n  T = 1 << 7,\n  LV = 1 << 8,\n  LVT = 1 << 9,\n  ExtPict = 1 << 10,\n  Any = 1 << 11,\n}\n\nconst reExtend = /^[\\p{Gr_Ext}\\p{EMod}]$/u\nconst rePrepend = /^[\\u0600-\\u0605\\u06DD\\u070F\\u0890-\\u0891\\u08E2\\u0D4E\\u{110BD}\\u{110CD}\\u{111C2}-\\u{111C3}\\u{1193F}\\u{11941}\\u{11A3A}\\u{11A84}-\\u{11A89}\\u{11D46}]$/u\nconst reSpacingMark = /^[\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E-\\u094F\\u0982-\\u0983\\u09BF-\\u09C0\\u09C7-\\u09C8\\u09CB-\\u09CC\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB-\\u0ACC\\u0B02-\\u0B03\\u0B40\\u0B47-\\u0B48\\u0B4B-\\u0B4C\\u0BBF\\u0BC1-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82-\\u0C83\\u0CBE\\u0CC0-\\u0CC1\\u0CC3-\\u0CC4\\u0CC7-\\u0CC8\\u0CCA-\\u0CCB\\u0D02-\\u0D03\\u0D3F-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D82-\\u0D83\\u0DD0-\\u0DD1\\u0DD8-\\u0DDE\\u0DF2-\\u0DF3\\u0E33\\u0EB3\\u0F3E-\\u0F3F\\u0F7F\\u1031\\u103B-\\u103C\\u1056-\\u1057\\u1084\\u1715\\u1734\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930-\\u1931\\u1933-\\u1938\\u1A19-\\u1A1A\\u1A55\\u1A57\\u1A6D-\\u1A72\\u1B04\\u1B3B\\u1B3D-\\u1B41\\u1B43-\\u1B44\\u1B82\\u1BA1\\u1BA6-\\u1BA7\\u1BAA\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2-\\u1BF3\\u1C24-\\u1C2B\\u1C34-\\u1C35\\u1CE1\\u1CF7\\uA823-\\uA824\\uA827\\uA880-\\uA881\\uA8B4-\\uA8C3\\uA952-\\uA953\\uA983\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BE-\\uA9C0\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA4D\\uAAEB\\uAAEE-\\uAAEF\\uAAF5\\uABE3-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEA\\uABEC\\u{11000}\\u{11002}\\u{11082}\\u{110B0}-\\u{110B2}\\u{110B7}-\\u{110B8}\\u{1112C}\\u{11145}-\\u{11146}\\u{11182}\\u{111B3}-\\u{111B5}\\u{111BF}-\\u{111C0}\\u{111CE}\\u{1122C}-\\u{1122E}\\u{11232}-\\u{11233}\\u{11235}\\u{112E0}-\\u{112E2}\\u{11302}-\\u{11303}\\u{1133F}\\u{11341}-\\u{11344}\\u{11347}-\\u{11348}\\u{1134B}-\\u{1134D}\\u{11362}-\\u{11363}\\u{11435}-\\u{11437}\\u{11440}-\\u{11441}\\u{11445}\\u{114B1}-\\u{114B2}\\u{114B9}\\u{114BB}-\\u{114BC}\\u{114BE}\\u{114C1}\\u{115B0}-\\u{115B1}\\u{115B8}-\\u{115BB}\\u{115BE}\\u{11630}-\\u{11632}\\u{1163B}-\\u{1163C}\\u{1163E}\\u{116AC}\\u{116AE}-\\u{116AF}\\u{116B6}\\u{11726}\\u{1182C}-\\u{1182E}\\u{11838}\\u{11931}-\\u{11935}\\u{11937}-\\u{11938}\\u{1193D}\\u{11940}\\u{11942}\\u{119D1}-\\u{119D3}\\u{119DC}-\\u{119DF}\\u{119E4}\\u{11A39}\\u{11A57}-\\u{11A58}\\u{11A97}\\u{11C2F}\\u{11C3E}\\u{11CA9}\\u{11CB1}\\u{11CB4}\\u{11D8A}-\\u{11D8E}\\u{11D93}-\\u{11D94}\\u{11D96}\\u{11EF5}-\\u{11EF6}\\u{16F51}-\\u{16F87}\\u{16FF0}-\\u{16FF1}\\u{1D166}\\u{1D16D}]$/u\nconst reL = /^[\\u1100-\\u115F\\uA960-\\uA97C]$/u\nconst reV = /^[\\u1160-\\u11A7\\uD7B0-\\uD7C6]$/u\nconst reT = /^[\\u11A8-\\u11FF\\uD7CB-\\uD7FB]$/u\nconst reLV = /^[\\uAC00\\uAC1C\\uAC38\\uAC54\\uAC70\\uAC8C\\uACA8\\uACC4\\uACE0\\uACFC\\uAD18\\uAD34\\uAD50\\uAD6C\\uAD88\\uADA4\\uADC0\\uADDC\\uADF8\\uAE14\\uAE30\\uAE4C\\uAE68\\uAE84\\uAEA0\\uAEBC\\uAED8\\uAEF4\\uAF10\\uAF2C\\uAF48\\uAF64\\uAF80\\uAF9C\\uAFB8\\uAFD4\\uAFF0\\uB00C\\uB028\\uB044\\uB060\\uB07C\\uB098\\uB0B4\\uB0D0\\uB0EC\\uB108\\uB124\\uB140\\uB15C\\uB178\\uB194\\uB1B0\\uB1CC\\uB1E8\\uB204\\uB220\\uB23C\\uB258\\uB274\\uB290\\uB2AC\\uB2C8\\uB2E4\\uB300\\uB31C\\uB338\\uB354\\uB370\\uB38C\\uB3A8\\uB3C4\\uB3E0\\uB3FC\\uB418\\uB434\\uB450\\uB46C\\uB488\\uB4A4\\uB4C0\\uB4DC\\uB4F8\\uB514\\uB530\\uB54C\\uB568\\uB584\\uB5A0\\uB5BC\\uB5D8\\uB5F4\\uB610\\uB62C\\uB648\\uB664\\uB680\\uB69C\\uB6B8\\uB6D4\\uB6F0\\uB70C\\uB728\\uB744\\uB760\\uB77C\\uB798\\uB7B4\\uB7D0\\uB7EC\\uB808\\uB824\\uB840\\uB85C\\uB878\\uB894\\uB8B0\\uB8CC\\uB8E8\\uB904\\uB920\\uB93C\\uB958\\uB974\\uB990\\uB9AC\\uB9C8\\uB9E4\\uBA00\\uBA1C\\uBA38\\uBA54\\uBA70\\uBA8C\\uBAA8\\uBAC4\\uBAE0\\uBAFC\\uBB18\\uBB34\\uBB50\\uBB6C\\uBB88\\uBBA4\\uBBC0\\uBBDC\\uBBF8\\uBC14\\uBC30\\uBC4C\\uBC68\\uBC84\\uBCA0\\uBCBC\\uBCD8\\uBCF4\\uBD10\\uBD2C\\uBD48\\uBD64\\uBD80\\uBD9C\\uBDB8\\uBDD4\\uBDF0\\uBE0C\\uBE28\\uBE44\\uBE60\\uBE7C\\uBE98\\uBEB4\\uBED0\\uBEEC\\uBF08\\uBF24\\uBF40\\uBF5C\\uBF78\\uBF94\\uBFB0\\uBFCC\\uBFE8\\uC004\\uC020\\uC03C\\uC058\\uC074\\uC090\\uC0AC\\uC0C8\\uC0E4\\uC100\\uC11C\\uC138\\uC154\\uC170\\uC18C\\uC1A8\\uC1C4\\uC1E0\\uC1FC\\uC218\\uC234\\uC250\\uC26C\\uC288\\uC2A4\\uC2C0\\uC2DC\\uC2F8\\uC314\\uC330\\uC34C\\uC368\\uC384\\uC3A0\\uC3BC\\uC3D8\\uC3F4\\uC410\\uC42C\\uC448\\uC464\\uC480\\uC49C\\uC4B8\\uC4D4\\uC4F0\\uC50C\\uC528\\uC544\\uC560\\uC57C\\uC598\\uC5B4\\uC5D0\\uC5EC\\uC608\\uC624\\uC640\\uC65C\\uC678\\uC694\\uC6B0\\uC6CC\\uC6E8\\uC704\\uC720\\uC73C\\uC758\\uC774\\uC790\\uC7AC\\uC7C8\\uC7E4\\uC800\\uC81C\\uC838\\uC854\\uC870\\uC88C\\uC8A8\\uC8C4\\uC8E0\\uC8FC\\uC918\\uC934\\uC950\\uC96C\\uC988\\uC9A4\\uC9C0\\uC9DC\\uC9F8\\uCA14\\uCA30\\uCA4C\\uCA68\\uCA84\\uCAA0\\uCABC\\uCAD8\\uCAF4\\uCB10\\uCB2C\\uCB48\\uCB64\\uCB80\\uCB9C\\uCBB8\\uCBD4\\uCBF0\\uCC0C\\uCC28\\uCC44\\uCC60\\uCC7C\\uCC98\\uCCB4\\uCCD0\\uCCEC\\uCD08\\uCD24\\uCD40\\uCD5C\\uCD78\\uCD94\\uCDB0\\uCDCC\\uCDE8\\uCE04\\uCE20\\uCE3C\\uCE58\\uCE74\\uCE90\\uCEAC\\uCEC8\\uCEE4\\uCF00\\uCF1C\\uCF38\\uCF54\\uCF70\\uCF8C\\uCFA8\\uCFC4\\uCFE0\\uCFFC\\uD018\\uD034\\uD050\\uD06C\\uD088\\uD0A4\\uD0C0\\uD0DC\\uD0F8\\uD114\\uD130\\uD14C\\uD168\\uD184\\uD1A0\\uD1BC\\uD1D8\\uD1F4\\uD210\\uD22C\\uD248\\uD264\\uD280\\uD29C\\uD2B8\\uD2D4\\uD2F0\\uD30C\\uD328\\uD344\\uD360\\uD37C\\uD398\\uD3B4\\uD3D0\\uD3EC\\uD408\\uD424\\uD440\\uD45C\\uD478\\uD494\\uD4B0\\uD4CC\\uD4E8\\uD504\\uD520\\uD53C\\uD558\\uD574\\uD590\\uD5AC\\uD5C8\\uD5E4\\uD600\\uD61C\\uD638\\uD654\\uD670\\uD68C\\uD6A8\\uD6C4\\uD6E0\\uD6FC\\uD718\\uD734\\uD750\\uD76C\\uD788]$/u\nconst reLVT = /^[\\uAC01-\\uAC1B\\uAC1D-\\uAC37\\uAC39-\\uAC53\\uAC55-\\uAC6F\\uAC71-\\uAC8B\\uAC8D-\\uACA7\\uACA9-\\uACC3\\uACC5-\\uACDF\\uACE1-\\uACFB\\uACFD-\\uAD17\\uAD19-\\uAD33\\uAD35-\\uAD4F\\uAD51-\\uAD6B\\uAD6D-\\uAD87\\uAD89-\\uADA3\\uADA5-\\uADBF\\uADC1-\\uADDB\\uADDD-\\uADF7\\uADF9-\\uAE13\\uAE15-\\uAE2F\\uAE31-\\uAE4B\\uAE4D-\\uAE67\\uAE69-\\uAE83\\uAE85-\\uAE9F\\uAEA1-\\uAEBB\\uAEBD-\\uAED7\\uAED9-\\uAEF3\\uAEF5-\\uAF0F\\uAF11-\\uAF2B\\uAF2D-\\uAF47\\uAF49-\\uAF63\\uAF65-\\uAF7F\\uAF81-\\uAF9B\\uAF9D-\\uAFB7\\uAFB9-\\uAFD3\\uAFD5-\\uAFEF\\uAFF1-\\uB00B\\uB00D-\\uB027\\uB029-\\uB043\\uB045-\\uB05F\\uB061-\\uB07B\\uB07D-\\uB097\\uB099-\\uB0B3\\uB0B5-\\uB0CF\\uB0D1-\\uB0EB\\uB0ED-\\uB107\\uB109-\\uB123\\uB125-\\uB13F\\uB141-\\uB15B\\uB15D-\\uB177\\uB179-\\uB193\\uB195-\\uB1AF\\uB1B1-\\uB1CB\\uB1CD-\\uB1E7\\uB1E9-\\uB203\\uB205-\\uB21F\\uB221-\\uB23B\\uB23D-\\uB257\\uB259-\\uB273\\uB275-\\uB28F\\uB291-\\uB2AB\\uB2AD-\\uB2C7\\uB2C9-\\uB2E3\\uB2E5-\\uB2FF\\uB301-\\uB31B\\uB31D-\\uB337\\uB339-\\uB353\\uB355-\\uB36F\\uB371-\\uB38B\\uB38D-\\uB3A7\\uB3A9-\\uB3C3\\uB3C5-\\uB3DF\\uB3E1-\\uB3FB\\uB3FD-\\uB417\\uB419-\\uB433\\uB435-\\uB44F\\uB451-\\uB46B\\uB46D-\\uB487\\uB489-\\uB4A3\\uB4A5-\\uB4BF\\uB4C1-\\uB4DB\\uB4DD-\\uB4F7\\uB4F9-\\uB513\\uB515-\\uB52F\\uB531-\\uB54B\\uB54D-\\uB567\\uB569-\\uB583\\uB585-\\uB59F\\uB5A1-\\uB5BB\\uB5BD-\\uB5D7\\uB5D9-\\uB5F3\\uB5F5-\\uB60F\\uB611-\\uB62B\\uB62D-\\uB647\\uB649-\\uB663\\uB665-\\uB67F\\uB681-\\uB69B\\uB69D-\\uB6B7\\uB6B9-\\uB6D3\\uB6D5-\\uB6EF\\uB6F1-\\uB70B\\uB70D-\\uB727\\uB729-\\uB743\\uB745-\\uB75F\\uB761-\\uB77B\\uB77D-\\uB797\\uB799-\\uB7B3\\uB7B5-\\uB7CF\\uB7D1-\\uB7EB\\uB7ED-\\uB807\\uB809-\\uB823\\uB825-\\uB83F\\uB841-\\uB85B\\uB85D-\\uB877\\uB879-\\uB893\\uB895-\\uB8AF\\uB8B1-\\uB8CB\\uB8CD-\\uB8E7\\uB8E9-\\uB903\\uB905-\\uB91F\\uB921-\\uB93B\\uB93D-\\uB957\\uB959-\\uB973\\uB975-\\uB98F\\uB991-\\uB9AB\\uB9AD-\\uB9C7\\uB9C9-\\uB9E3\\uB9E5-\\uB9FF\\uBA01-\\uBA1B\\uBA1D-\\uBA37\\uBA39-\\uBA53\\uBA55-\\uBA6F\\uBA71-\\uBA8B\\uBA8D-\\uBAA7\\uBAA9-\\uBAC3\\uBAC5-\\uBADF\\uBAE1-\\uBAFB\\uBAFD-\\uBB17\\uBB19-\\uBB33\\uBB35-\\uBB4F\\uBB51-\\uBB6B\\uBB6D-\\uBB87\\uBB89-\\uBBA3\\uBBA5-\\uBBBF\\uBBC1-\\uBBDB\\uBBDD-\\uBBF7\\uBBF9-\\uBC13\\uBC15-\\uBC2F\\uBC31-\\uBC4B\\uBC4D-\\uBC67\\uBC69-\\uBC83\\uBC85-\\uBC9F\\uBCA1-\\uBCBB\\uBCBD-\\uBCD7\\uBCD9-\\uBCF3\\uBCF5-\\uBD0F\\uBD11-\\uBD2B\\uBD2D-\\uBD47\\uBD49-\\uBD63\\uBD65-\\uBD7F\\uBD81-\\uBD9B\\uBD9D-\\uBDB7\\uBDB9-\\uBDD3\\uBDD5-\\uBDEF\\uBDF1-\\uBE0B\\uBE0D-\\uBE27\\uBE29-\\uBE43\\uBE45-\\uBE5F\\uBE61-\\uBE7B\\uBE7D-\\uBE97\\uBE99-\\uBEB3\\uBEB5-\\uBECF\\uBED1-\\uBEEB\\uBEED-\\uBF07\\uBF09-\\uBF23\\uBF25-\\uBF3F\\uBF41-\\uBF5B\\uBF5D-\\uBF77\\uBF79-\\uBF93\\uBF95-\\uBFAF\\uBFB1-\\uBFCB\\uBFCD-\\uBFE7\\uBFE9-\\uC003\\uC005-\\uC01F\\uC021-\\uC03B\\uC03D-\\uC057\\uC059-\\uC073\\uC075-\\uC08F\\uC091-\\uC0AB\\uC0AD-\\uC0C7\\uC0C9-\\uC0E3\\uC0E5-\\uC0FF\\uC101-\\uC11B\\uC11D-\\uC137\\uC139-\\uC153\\uC155-\\uC16F\\uC171-\\uC18B\\uC18D-\\uC1A7\\uC1A9-\\uC1C3\\uC1C5-\\uC1DF\\uC1E1-\\uC1FB\\uC1FD-\\uC217\\uC219-\\uC233\\uC235-\\uC24F\\uC251-\\uC26B\\uC26D-\\uC287\\uC289-\\uC2A3\\uC2A5-\\uC2BF\\uC2C1-\\uC2DB\\uC2DD-\\uC2F7\\uC2F9-\\uC313\\uC315-\\uC32F\\uC331-\\uC34B\\uC34D-\\uC367\\uC369-\\uC383\\uC385-\\uC39F\\uC3A1-\\uC3BB\\uC3BD-\\uC3D7\\uC3D9-\\uC3F3\\uC3F5-\\uC40F\\uC411-\\uC42B\\uC42D-\\uC447\\uC449-\\uC463\\uC465-\\uC47F\\uC481-\\uC49B\\uC49D-\\uC4B7\\uC4B9-\\uC4D3\\uC4D5-\\uC4EF\\uC4F1-\\uC50B\\uC50D-\\uC527\\uC529-\\uC543\\uC545-\\uC55F\\uC561-\\uC57B\\uC57D-\\uC597\\uC599-\\uC5B3\\uC5B5-\\uC5CF\\uC5D1-\\uC5EB\\uC5ED-\\uC607\\uC609-\\uC623\\uC625-\\uC63F\\uC641-\\uC65B\\uC65D-\\uC677\\uC679-\\uC693\\uC695-\\uC6AF\\uC6B1-\\uC6CB\\uC6CD-\\uC6E7\\uC6E9-\\uC703\\uC705-\\uC71F\\uC721-\\uC73B\\uC73D-\\uC757\\uC759-\\uC773\\uC775-\\uC78F\\uC791-\\uC7AB\\uC7AD-\\uC7C7\\uC7C9-\\uC7E3\\uC7E5-\\uC7FF\\uC801-\\uC81B\\uC81D-\\uC837\\uC839-\\uC853\\uC855-\\uC86F\\uC871-\\uC88B\\uC88D-\\uC8A7\\uC8A9-\\uC8C3\\uC8C5-\\uC8DF\\uC8E1-\\uC8FB\\uC8FD-\\uC917\\uC919-\\uC933\\uC935-\\uC94F\\uC951-\\uC96B\\uC96D-\\uC987\\uC989-\\uC9A3\\uC9A5-\\uC9BF\\uC9C1-\\uC9DB\\uC9DD-\\uC9F7\\uC9F9-\\uCA13\\uCA15-\\uCA2F\\uCA31-\\uCA4B\\uCA4D-\\uCA67\\uCA69-\\uCA83\\uCA85-\\uCA9F\\uCAA1-\\uCABB\\uCABD-\\uCAD7\\uCAD9-\\uCAF3\\uCAF5-\\uCB0F\\uCB11-\\uCB2B\\uCB2D-\\uCB47\\uCB49-\\uCB63\\uCB65-\\uCB7F\\uCB81-\\uCB9B\\uCB9D-\\uCBB7\\uCBB9-\\uCBD3\\uCBD5-\\uCBEF\\uCBF1-\\uCC0B\\uCC0D-\\uCC27\\uCC29-\\uCC43\\uCC45-\\uCC5F\\uCC61-\\uCC7B\\uCC7D-\\uCC97\\uCC99-\\uCCB3\\uCCB5-\\uCCCF\\uCCD1-\\uCCEB\\uCCED-\\uCD07\\uCD09-\\uCD23\\uCD25-\\uCD3F\\uCD41-\\uCD5B\\uCD5D-\\uCD77\\uCD79-\\uCD93\\uCD95-\\uCDAF\\uCDB1-\\uCDCB\\uCDCD-\\uCDE7\\uCDE9-\\uCE03\\uCE05-\\uCE1F\\uCE21-\\uCE3B\\uCE3D-\\uCE57\\uCE59-\\uCE73\\uCE75-\\uCE8F\\uCE91-\\uCEAB\\uCEAD-\\uCEC7\\uCEC9-\\uCEE3\\uCEE5-\\uCEFF\\uCF01-\\uCF1B\\uCF1D-\\uCF37\\uCF39-\\uCF53\\uCF55-\\uCF6F\\uCF71-\\uCF8B\\uCF8D-\\uCFA7\\uCFA9-\\uCFC3\\uCFC5-\\uCFDF\\uCFE1-\\uCFFB\\uCFFD-\\uD017\\uD019-\\uD033\\uD035-\\uD04F\\uD051-\\uD06B\\uD06D-\\uD087\\uD089-\\uD0A3\\uD0A5-\\uD0BF\\uD0C1-\\uD0DB\\uD0DD-\\uD0F7\\uD0F9-\\uD113\\uD115-\\uD12F\\uD131-\\uD14B\\uD14D-\\uD167\\uD169-\\uD183\\uD185-\\uD19F\\uD1A1-\\uD1BB\\uD1BD-\\uD1D7\\uD1D9-\\uD1F3\\uD1F5-\\uD20F\\uD211-\\uD22B\\uD22D-\\uD247\\uD249-\\uD263\\uD265-\\uD27F\\uD281-\\uD29B\\uD29D-\\uD2B7\\uD2B9-\\uD2D3\\uD2D5-\\uD2EF\\uD2F1-\\uD30B\\uD30D-\\uD327\\uD329-\\uD343\\uD345-\\uD35F\\uD361-\\uD37B\\uD37D-\\uD397\\uD399-\\uD3B3\\uD3B5-\\uD3CF\\uD3D1-\\uD3EB\\uD3ED-\\uD407\\uD409-\\uD423\\uD425-\\uD43F\\uD441-\\uD45B\\uD45D-\\uD477\\uD479-\\uD493\\uD495-\\uD4AF\\uD4B1-\\uD4CB\\uD4CD-\\uD4E7\\uD4E9-\\uD503\\uD505-\\uD51F\\uD521-\\uD53B\\uD53D-\\uD557\\uD559-\\uD573\\uD575-\\uD58F\\uD591-\\uD5AB\\uD5AD-\\uD5C7\\uD5C9-\\uD5E3\\uD5E5-\\uD5FF\\uD601-\\uD61B\\uD61D-\\uD637\\uD639-\\uD653\\uD655-\\uD66F\\uD671-\\uD68B\\uD68D-\\uD6A7\\uD6A9-\\uD6C3\\uD6C5-\\uD6DF\\uD6E1-\\uD6FB\\uD6FD-\\uD717\\uD719-\\uD733\\uD735-\\uD74F\\uD751-\\uD76B\\uD76D-\\uD787\\uD789-\\uD7A3]$/u\nconst reExtPict = /^\\p{ExtPict}$/u\n\nconst getCodepointType = (char: string, code: number): CodepointType => {\n  let type = CodepointType.Any\n  if (char.search(reExtend) !== -1) {\n    type |= CodepointType.Extend\n  }\n  if (code === 0x200d) {\n    type |= CodepointType.ZWJ\n  }\n  if (code >= 0x1f1e6 && code <= 0x1f1ff) {\n    type |= CodepointType.RI\n  }\n  if (char.search(rePrepend) !== -1) {\n    type |= CodepointType.Prepend\n  }\n  if (char.search(reSpacingMark) !== -1) {\n    type |= CodepointType.SpacingMark\n  }\n  if (char.search(reL) !== -1) {\n    type |= CodepointType.L\n  }\n  if (char.search(reV) !== -1) {\n    type |= CodepointType.V\n  }\n  if (char.search(reT) !== -1) {\n    type |= CodepointType.T\n  }\n  if (char.search(reLV) !== -1) {\n    type |= CodepointType.LV\n  }\n  if (char.search(reLVT) !== -1) {\n    type |= CodepointType.LVT\n  }\n  if (char.search(reExtPict) !== -1) {\n    type |= CodepointType.ExtPict\n  }\n\n  return type\n}\n\nfunction intersects(x: CodepointType, y: CodepointType) {\n  return (x & y) !== 0\n}\n\nconst NonBoundaryPairs: [CodepointType, CodepointType][] = [\n  // GB6\n  [\n    CodepointType.L,\n    CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT,\n  ],\n  // GB7\n  [CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T],\n  // GB8\n  [CodepointType.LVT | CodepointType.T, CodepointType.T],\n  // GB9\n  [CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ],\n  // GB9a\n  [CodepointType.Any, CodepointType.SpacingMark],\n  // GB9b\n  [CodepointType.Prepend, CodepointType.Any],\n  // GB11\n  [CodepointType.ZWJ, CodepointType.ExtPict],\n  // GB12 and GB13\n  [CodepointType.RI, CodepointType.RI],\n]\n\nfunction isBoundaryPair(left: CodepointType, right: CodepointType) {\n  return (\n    NonBoundaryPairs.findIndex(\n      r => intersects(left, r[0]) && intersects(right, r[1])\n    ) === -1\n  )\n}\n\nconst endingEmojiZWJ = /\\p{ExtPict}[\\p{Gr_Ext}\\p{EMod}]*\\u200D$/u\nconst endsWithEmojiZWJ = (str: string): boolean => {\n  return str.search(endingEmojiZWJ) !== -1\n}\n\nconst endingRIs = /\\p{RI}+$/gu\nconst endsWithOddNumberOfRIs = (str: string): boolean => {\n  const match = str.match(endingRIs)\n  if (match === null) {\n    return false\n  } else {\n    // A RI is represented by a surrogate pair.\n    const numRIs = match[0].length / 2\n    return numRIs % 2 === 1\n  }\n}\n","import { isPlainObject } from 'is-plain-object'\nimport { Editor, Node, Path, Descendant, ExtendedType, Ancestor } from '..'\n\n/**\n * `Element` objects are a type of node in a Slate document that contain other\n * element nodes or text nodes. They can be either \"blocks\" or \"inlines\"\n * depending on the Slate editor's configuration.\n */\n\nexport interface BaseElement {\n  children: Descendant[]\n}\n\nexport type Element = ExtendedType<'Element', BaseElement>\n\nexport interface ElementInterface {\n  isAncestor: (value: any) => value is Ancestor\n  isElement: (value: any) => value is Element\n  isElementList: (value: any) => value is Element[]\n  isElementProps: (props: any) => props is Partial<Element>\n  isElementType: <T extends Element>(\n    value: any,\n    elementVal: string,\n    elementKey?: string\n  ) => value is T\n  matches: (element: Element, props: Partial<Element>) => boolean\n}\n\n/**\n * Shared the function with isElementType utility\n */\nconst isElement = (value: any): value is Element => {\n  return (\n    isPlainObject(value) &&\n    Node.isNodeList(value.children) &&\n    !Editor.isEditor(value)\n  )\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Element: ElementInterface = {\n  /**\n   * Check if a value implements the 'Ancestor' interface.\n   */\n\n  isAncestor(value: any): value is Ancestor {\n    return isPlainObject(value) && Node.isNodeList(value.children)\n  },\n\n  /**\n   * Check if a value implements the `Element` interface.\n   */\n\n  isElement,\n  /**\n   * Check if a value is an array of `Element` objects.\n   */\n\n  isElementList(value: any): value is Element[] {\n    return Array.isArray(value) && value.every(val => Element.isElement(val))\n  },\n\n  /**\n   * Check if a set of props is a partial of Element.\n   */\n\n  isElementProps(props: any): props is Partial<Element> {\n    return (props as Partial<Element>).children !== undefined\n  },\n\n  /**\n   * Check if a value implements the `Element` interface and has elementKey with selected value.\n   * Default it check to `type` key value\n   */\n\n  isElementType: <T extends Element>(\n    value: any,\n    elementVal: string,\n    elementKey: string = 'type'\n  ): value is T => {\n    return isElement(value) && value[elementKey] === elementVal\n  },\n\n  /**\n   * Check if an element matches set of properties.\n   *\n   * Note: this checks custom properties, and it does not ensure that any\n   * children are equivalent.\n   */\n\n  matches(element: Element, props: Partial<Element>): boolean {\n    for (const key in props) {\n      if (key === 'children') {\n        continue\n      }\n\n      if (element[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n}\n\n/**\n * `ElementEntry` objects refer to an `Element` and the `Path` where it can be\n * found inside a root node.\n */\n\nexport type ElementEntry = [Element, Path]\n","import { isPlainObject } from 'is-plain-object'\n\nimport {\n  Ancestor,\n  ExtendedType,\n  Location,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  Point,\n  PointRef,\n  Range,\n  RangeRef,\n  Span,\n  Text,\n} from '..'\nimport {\n  DIRTY_PATHS,\n  DIRTY_PATH_KEYS,\n  NORMALIZING,\n  PATH_REFS,\n  POINT_REFS,\n  RANGE_REFS,\n} from '../utils/weak-maps'\nimport {\n  getWordDistance,\n  getCharacterDistance,\n  splitByCharacterDistance,\n} from '../utils/string'\nimport { Descendant } from './node'\nimport { Element } from './element'\nimport {\n  LeafEdge,\n  SelectionMode,\n  TextDirection,\n  TextUnit,\n  TextUnitAdjustment,\n  RangeDirection,\n  MaximizeMode,\n} from './types'\n\nexport type BaseSelection = Range | null\n\nexport type Selection = ExtendedType<'Selection', BaseSelection>\n\nexport type EditorMarks = Omit<Text, 'text'>\n\n/**\n * The `Editor` interface stores all the state of a Slate editor. It is extended\n * by plugins that wish to add their own helpers and implement new behaviors.\n */\n\nexport interface BaseEditor {\n  children: Descendant[]\n  selection: Selection\n  operations: Operation[]\n  marks: EditorMarks | null\n\n  // Schema-specific node behaviors.\n  isInline: (element: Element) => boolean\n  isVoid: (element: Element) => boolean\n  markableVoid: (element: Element) => boolean\n  normalizeNode: (entry: NodeEntry) => void\n  onChange: () => void\n\n  // Overrideable core actions.\n  addMark: (key: string, value: any) => void\n  apply: (operation: Operation) => void\n  deleteBackward: (unit: TextUnit) => void\n  deleteForward: (unit: TextUnit) => void\n  deleteFragment: (direction?: TextDirection) => void\n  getFragment: () => Descendant[]\n  insertBreak: () => void\n  insertSoftBreak: () => void\n  insertFragment: (fragment: Node[]) => void\n  insertNode: (node: Node) => void\n  insertText: (text: string) => void\n  removeMark: (key: string) => void\n  getDirtyPaths: (op: Operation) => Path[]\n}\n\nexport type Editor = ExtendedType<'Editor', BaseEditor>\n\nexport interface EditorAboveOptions<T extends Ancestor> {\n  at?: Location\n  match?: NodeMatch<T>\n  mode?: MaximizeMode\n  voids?: boolean\n}\n\nexport interface EditorAfterOptions {\n  distance?: number\n  unit?: TextUnitAdjustment\n  voids?: boolean\n}\n\nexport interface EditorBeforeOptions {\n  distance?: number\n  unit?: TextUnitAdjustment\n  voids?: boolean\n}\n\nexport interface EditorDirectedDeletionOptions {\n  unit?: TextUnit\n}\n\nexport interface EditorFragmentDeletionOptions {\n  direction?: TextDirection\n}\n\nexport interface EditorLeafOptions {\n  depth?: number\n  edge?: LeafEdge\n}\n\nexport interface EditorLevelsOptions<T extends Node> {\n  at?: Location\n  match?: NodeMatch<T>\n  reverse?: boolean\n  voids?: boolean\n}\n\nexport interface EditorNextOptions<T extends Descendant> {\n  at?: Location\n  match?: NodeMatch<T>\n  mode?: SelectionMode\n  voids?: boolean\n}\n\nexport interface EditorNodeOptions {\n  depth?: number\n  edge?: LeafEdge\n}\n\nexport interface EditorNodesOptions<T extends Node> {\n  at?: Location | Span\n  match?: NodeMatch<T>\n  mode?: SelectionMode\n  universal?: boolean\n  reverse?: boolean\n  voids?: boolean\n}\n\nexport interface EditorNormalizeOptions {\n  force?: boolean\n}\n\nexport interface EditorParentOptions {\n  depth?: number\n  edge?: LeafEdge\n}\n\nexport interface EditorPathOptions {\n  depth?: number\n  edge?: LeafEdge\n}\n\nexport interface EditorPathRefOptions {\n  affinity?: TextDirection | null\n}\n\nexport interface EditorPointOptions {\n  edge?: LeafEdge\n}\n\nexport interface EditorPointRefOptions {\n  affinity?: TextDirection | null\n}\n\nexport interface EditorPositionsOptions {\n  at?: Location\n  unit?: TextUnitAdjustment\n  reverse?: boolean\n  voids?: boolean\n}\n\nexport interface EditorPreviousOptions<T extends Node> {\n  at?: Location\n  match?: NodeMatch<T>\n  mode?: SelectionMode\n  voids?: boolean\n}\n\nexport interface EditorRangeRefOptions {\n  affinity?: RangeDirection | null\n}\n\nexport interface EditorStringOptions {\n  voids?: boolean\n}\n\nexport interface EditorUnhangRangeOptions {\n  voids?: boolean\n}\n\nexport interface EditorVoidOptions {\n  at?: Location\n  mode?: MaximizeMode\n  voids?: boolean\n}\n\nexport interface EditorInterface {\n  above: <T extends Ancestor>(\n    editor: Editor,\n    options?: EditorAboveOptions<T>\n  ) => NodeEntry<T> | undefined\n  addMark: (editor: Editor, key: string, value: any) => void\n  after: (\n    editor: Editor,\n    at: Location,\n    options?: EditorAfterOptions\n  ) => Point | undefined\n  before: (\n    editor: Editor,\n    at: Location,\n    options?: EditorBeforeOptions\n  ) => Point | undefined\n  deleteBackward: (\n    editor: Editor,\n    options?: EditorDirectedDeletionOptions\n  ) => void\n  deleteForward: (\n    editor: Editor,\n    options?: EditorDirectedDeletionOptions\n  ) => void\n  deleteFragment: (\n    editor: Editor,\n    options?: EditorFragmentDeletionOptions\n  ) => void\n  edges: (editor: Editor, at: Location) => [Point, Point]\n  end: (editor: Editor, at: Location) => Point\n  first: (editor: Editor, at: Location) => NodeEntry\n  fragment: (editor: Editor, at: Location) => Descendant[]\n  hasBlocks: (editor: Editor, element: Element) => boolean\n  hasInlines: (editor: Editor, element: Element) => boolean\n  hasPath: (editor: Editor, path: Path) => boolean\n  hasTexts: (editor: Editor, element: Element) => boolean\n  insertBreak: (editor: Editor) => void\n  insertSoftBreak: (editor: Editor) => void\n  insertFragment: (editor: Editor, fragment: Node[]) => void\n  insertNode: (editor: Editor, node: Node) => void\n  insertText: (editor: Editor, text: string) => void\n  isBlock: (editor: Editor, value: any) => value is Element\n  isEditor: (value: any) => value is Editor\n  isEnd: (editor: Editor, point: Point, at: Location) => boolean\n  isEdge: (editor: Editor, point: Point, at: Location) => boolean\n  isEmpty: (editor: Editor, element: Element) => boolean\n  isInline: (editor: Editor, value: any) => value is Element\n  isNormalizing: (editor: Editor) => boolean\n  isStart: (editor: Editor, point: Point, at: Location) => boolean\n  isVoid: (editor: Editor, value: any) => value is Element\n  last: (editor: Editor, at: Location) => NodeEntry\n  leaf: (\n    editor: Editor,\n    at: Location,\n    options?: EditorLeafOptions\n  ) => NodeEntry<Text>\n  levels: <T extends Node>(\n    editor: Editor,\n    options?: EditorLevelsOptions<T>\n  ) => Generator<NodeEntry<T>, void, undefined>\n  marks: (editor: Editor) => Omit<Text, 'text'> | null\n  next: <T extends Descendant>(\n    editor: Editor,\n    options?: EditorNextOptions<T>\n  ) => NodeEntry<T> | undefined\n  node: (editor: Editor, at: Location, options?: EditorNodeOptions) => NodeEntry\n  nodes: <T extends Node>(\n    editor: Editor,\n    options?: EditorNodesOptions<T>\n  ) => Generator<NodeEntry<T>, void, undefined>\n  normalize: (editor: Editor, options?: EditorNormalizeOptions) => void\n  parent: (\n    editor: Editor,\n    at: Location,\n    options?: EditorParentOptions\n  ) => NodeEntry<Ancestor>\n  path: (editor: Editor, at: Location, options?: EditorPathOptions) => Path\n  pathRef: (\n    editor: Editor,\n    path: Path,\n    options?: EditorPathRefOptions\n  ) => PathRef\n  pathRefs: (editor: Editor) => Set<PathRef>\n  point: (editor: Editor, at: Location, options?: EditorPointOptions) => Point\n  pointRef: (\n    editor: Editor,\n    point: Point,\n    options?: EditorPointRefOptions\n  ) => PointRef\n  pointRefs: (editor: Editor) => Set<PointRef>\n  positions: (\n    editor: Editor,\n    options?: EditorPositionsOptions\n  ) => Generator<Point, void, undefined>\n  previous: <T extends Node>(\n    editor: Editor,\n    options?: EditorPreviousOptions<T>\n  ) => NodeEntry<T> | undefined\n  range: (editor: Editor, at: Location, to?: Location) => Range\n  rangeRef: (\n    editor: Editor,\n    range: Range,\n    options?: EditorRangeRefOptions\n  ) => RangeRef\n  rangeRefs: (editor: Editor) => Set<RangeRef>\n  removeMark: (editor: Editor, key: string) => void\n  setNormalizing: (editor: Editor, isNormalizing: boolean) => void\n  start: (editor: Editor, at: Location) => Point\n  string: (\n    editor: Editor,\n    at: Location,\n    options?: EditorStringOptions\n  ) => string\n  unhangRange: (\n    editor: Editor,\n    range: Range,\n    options?: EditorUnhangRangeOptions\n  ) => Range\n  void: (\n    editor: Editor,\n    options?: EditorVoidOptions\n  ) => NodeEntry<Element> | undefined\n  withoutNormalizing: (editor: Editor, fn: () => void) => void\n}\n\nconst IS_EDITOR_CACHE = new WeakMap<object, boolean>()\n\n// eslint-disable-next-line no-redeclare\nexport const Editor: EditorInterface = {\n  /**\n   * Get the ancestor above a location in the document.\n   */\n\n  above<T extends Ancestor>(\n    editor: Editor,\n    options: EditorAboveOptions<T> = {}\n  ): NodeEntry<T> | undefined {\n    const {\n      voids = false,\n      mode = 'lowest',\n      at = editor.selection,\n      match,\n    } = options\n\n    if (!at) {\n      return\n    }\n\n    const path = Editor.path(editor, at)\n    const reverse = mode === 'lowest'\n\n    for (const [n, p] of Editor.levels(editor, {\n      at: path,\n      voids,\n      match,\n      reverse,\n    })) {\n      if (Text.isText(n)) return\n      if (Range.isRange(at)) {\n        if (\n          Path.isAncestor(p, at.anchor.path) &&\n          Path.isAncestor(p, at.focus.path)\n        ) {\n          return [n, p]\n        }\n      } else {\n        if (!Path.equals(path, p)) {\n          return [n, p]\n        }\n      }\n    }\n  },\n\n  /**\n   * Add a custom property to the leaf text nodes in the current selection.\n   *\n   * If the selection is currently collapsed, the marks will be added to the\n   * `editor.marks` property instead, and applied when text is inserted next.\n   */\n\n  addMark(editor: Editor, key: string, value: any): void {\n    editor.addMark(key, value)\n  },\n\n  /**\n   * Get the point after a location.\n   */\n\n  after(\n    editor: Editor,\n    at: Location,\n    options: EditorAfterOptions = {}\n  ): Point | undefined {\n    const anchor = Editor.point(editor, at, { edge: 'end' })\n    const focus = Editor.end(editor, [])\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, {\n      ...options,\n      at: range,\n    })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Get the point before a location.\n   */\n\n  before(\n    editor: Editor,\n    at: Location,\n    options: EditorBeforeOptions = {}\n  ): Point | undefined {\n    const anchor = Editor.start(editor, [])\n    const focus = Editor.point(editor, at, { edge: 'start' })\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, {\n      ...options,\n      at: range,\n      reverse: true,\n    })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Delete content in the editor backward from the current selection.\n   */\n\n  deleteBackward(\n    editor: Editor,\n    options: EditorDirectedDeletionOptions = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteBackward(unit)\n  },\n\n  /**\n   * Delete content in the editor forward from the current selection.\n   */\n\n  deleteForward(\n    editor: Editor,\n    options: EditorDirectedDeletionOptions = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteForward(unit)\n  },\n\n  /**\n   * Delete the content in the current selection.\n   */\n\n  deleteFragment(\n    editor: Editor,\n    options: EditorFragmentDeletionOptions = {}\n  ): void {\n    const { direction = 'forward' } = options\n    editor.deleteFragment(direction)\n  },\n\n  /**\n   * Get the start and end points of a location.\n   */\n\n  edges(editor: Editor, at: Location): [Point, Point] {\n    return [Editor.start(editor, at), Editor.end(editor, at)]\n  },\n\n  /**\n   * Get the end point of a location.\n   */\n\n  end(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'end' })\n  },\n\n  /**\n   * Get the first node at a location.\n   */\n\n  first(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'start' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the fragment at a location.\n   */\n\n  fragment(editor: Editor, at: Location): Descendant[] {\n    const range = Editor.range(editor, at)\n    const fragment = Node.fragment(editor, range)\n    return fragment\n  },\n  /**\n   * Check if a node has block children.\n   */\n\n  hasBlocks(editor: Editor, element: Element): boolean {\n    return element.children.some(n => Editor.isBlock(editor, n))\n  },\n\n  /**\n   * Check if a node has inline and text children.\n   */\n\n  hasInlines(editor: Editor, element: Element): boolean {\n    return element.children.some(\n      n => Text.isText(n) || Editor.isInline(editor, n)\n    )\n  },\n\n  /**\n   * Check if a node has text children.\n   */\n\n  hasTexts(editor: Editor, element: Element): boolean {\n    return element.children.every(n => Text.isText(n))\n  },\n\n  /**\n   * Insert a block break at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertBreak(editor: Editor): void {\n    editor.insertBreak()\n  },\n\n  /**\n   * Insert a soft break at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertSoftBreak(editor: Editor): void {\n    editor.insertSoftBreak()\n  },\n\n  /**\n   * Insert a fragment at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertFragment(editor: Editor, fragment: Node[]): void {\n    editor.insertFragment(fragment)\n  },\n\n  /**\n   * Insert a node at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertNode(editor: Editor, node: Node): void {\n    editor.insertNode(node)\n  },\n\n  /**\n   * Insert text at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertText(editor: Editor, text: string): void {\n    editor.insertText(text)\n  },\n\n  /**\n   * Check if a value is a block `Element` object.\n   */\n\n  isBlock(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && !editor.isInline(value)\n  },\n\n  /**\n   * Check if a value is an `Editor` object.\n   */\n\n  isEditor(value: any): value is Editor {\n    const cachedIsEditor = IS_EDITOR_CACHE.get(value)\n    if (cachedIsEditor !== undefined) {\n      return cachedIsEditor\n    }\n\n    if (!isPlainObject(value)) {\n      return false\n    }\n\n    const isEditor =\n      typeof value.addMark === 'function' &&\n      typeof value.apply === 'function' &&\n      typeof value.deleteBackward === 'function' &&\n      typeof value.deleteForward === 'function' &&\n      typeof value.deleteFragment === 'function' &&\n      typeof value.insertBreak === 'function' &&\n      typeof value.insertSoftBreak === 'function' &&\n      typeof value.insertFragment === 'function' &&\n      typeof value.insertNode === 'function' &&\n      typeof value.insertText === 'function' &&\n      typeof value.isInline === 'function' &&\n      typeof value.isVoid === 'function' &&\n      typeof value.normalizeNode === 'function' &&\n      typeof value.onChange === 'function' &&\n      typeof value.removeMark === 'function' &&\n      typeof value.getDirtyPaths === 'function' &&\n      (value.marks === null || isPlainObject(value.marks)) &&\n      (value.selection === null || Range.isRange(value.selection)) &&\n      Node.isNodeList(value.children) &&\n      Operation.isOperationList(value.operations)\n    IS_EDITOR_CACHE.set(value, isEditor)\n    return isEditor\n  },\n\n  /**\n   * Check if a point is the end point of a location.\n   */\n\n  isEnd(editor: Editor, point: Point, at: Location): boolean {\n    const end = Editor.end(editor, at)\n    return Point.equals(point, end)\n  },\n\n  /**\n   * Check if a point is an edge of a location.\n   */\n\n  isEdge(editor: Editor, point: Point, at: Location): boolean {\n    return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at)\n  },\n\n  /**\n   * Check if an element is empty, accounting for void nodes.\n   */\n\n  isEmpty(editor: Editor, element: Element): boolean {\n    const { children } = element\n    const [first] = children\n    return (\n      children.length === 0 ||\n      (children.length === 1 &&\n        Text.isText(first) &&\n        first.text === '' &&\n        !editor.isVoid(element))\n    )\n  },\n\n  /**\n   * Check if a value is an inline `Element` object.\n   */\n\n  isInline(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isInline(value)\n  },\n\n  /**\n   * Check if the editor is currently normalizing after each operation.\n   */\n\n  isNormalizing(editor: Editor): boolean {\n    const isNormalizing = NORMALIZING.get(editor)\n    return isNormalizing === undefined ? true : isNormalizing\n  },\n\n  /**\n   * Check if a point is the start point of a location.\n   */\n\n  isStart(editor: Editor, point: Point, at: Location): boolean {\n    // PERF: If the offset isn't `0` we know it's not the start.\n    if (point.offset !== 0) {\n      return false\n    }\n\n    const start = Editor.start(editor, at)\n    return Point.equals(point, start)\n  },\n\n  /**\n   * Check if a value is a void `Element` object.\n   */\n\n  isVoid(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isVoid(value)\n  },\n\n  /**\n   * Get the last node at a location.\n   */\n\n  last(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'end' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the leaf text node at a location.\n   */\n\n  leaf(\n    editor: Editor,\n    at: Location,\n    options: EditorLeafOptions = {}\n  ): NodeEntry<Text> {\n    const path = Editor.path(editor, at, options)\n    const node = Node.leaf(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the levels at a location.\n   */\n\n  *levels<T extends Node>(\n    editor: Editor,\n    options: EditorLevelsOptions<T> = {}\n  ): Generator<NodeEntry<T>, void, undefined> {\n    const { at = editor.selection, reverse = false, voids = false } = options\n    let { match } = options\n\n    if (match == null) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    const levels: NodeEntry<T>[] = []\n    const path = Editor.path(editor, at)\n\n    for (const [n, p] of Node.levels(editor, path)) {\n      if (!match(n, p)) {\n        continue\n      }\n\n      levels.push([n, p])\n\n      if (!voids && Editor.isVoid(editor, n)) {\n        break\n      }\n    }\n\n    if (reverse) {\n      levels.reverse()\n    }\n\n    yield* levels\n  },\n\n  /**\n   * Get the marks that would be added to text at the current selection.\n   */\n\n  marks(editor: Editor): Omit<Text, 'text'> | null {\n    const { marks, selection } = editor\n\n    if (!selection) {\n      return null\n    }\n\n    if (marks) {\n      return marks\n    }\n\n    if (Range.isExpanded(selection)) {\n      const [match] = Editor.nodes(editor, { match: Text.isText })\n\n      if (match) {\n        const [node] = match as NodeEntry<Text>\n        const { text, ...rest } = node\n        return rest\n      } else {\n        return {}\n      }\n    }\n\n    const { anchor } = selection\n    const { path } = anchor\n    let [node] = Editor.leaf(editor, path)\n\n    if (anchor.offset === 0) {\n      const prev = Editor.previous(editor, { at: path, match: Text.isText })\n      const block = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n      })\n\n      if (prev && block) {\n        const [prevNode, prevPath] = prev\n        const [, blockPath] = block\n\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode as Text\n        }\n      }\n    }\n\n    const { text, ...rest } = node\n    return rest\n  },\n\n  /**\n   * Get the matching node in the branch of the document after a location.\n   */\n\n  next<T extends Descendant>(\n    editor: Editor,\n    options: EditorNextOptions<T> = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const pointAfterLocation = Editor.after(editor, at, { voids })\n\n    if (!pointAfterLocation) return\n\n    const [, to] = Editor.last(editor, [])\n\n    const span: Span = [pointAfterLocation.path, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the next node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [next] = Editor.nodes(editor, { at: span, match, mode, voids })\n    return next\n  },\n\n  /**\n   * Get the node at a location.\n   */\n\n  node(\n    editor: Editor,\n    at: Location,\n    options: EditorNodeOptions = {}\n  ): NodeEntry {\n    const path = Editor.path(editor, at, options)\n    const node = Node.get(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the nodes in the Editor.\n   */\n\n  *nodes<T extends Node>(\n    editor: Editor,\n    options: EditorNodesOptions<T> = {}\n  ): Generator<NodeEntry<T>, void, undefined> {\n    const {\n      at = editor.selection,\n      mode = 'all',\n      universal = false,\n      reverse = false,\n      voids = false,\n    } = options\n    let { match } = options\n\n    if (!match) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    let from\n    let to\n\n    if (Span.isSpan(at)) {\n      from = at[0]\n      to = at[1]\n    } else {\n      const first = Editor.path(editor, at, { edge: 'start' })\n      const last = Editor.path(editor, at, { edge: 'end' })\n      from = reverse ? last : first\n      to = reverse ? first : last\n    }\n\n    const nodeEntries = Node.nodes(editor, {\n      reverse,\n      from,\n      to,\n      pass: ([n]) => (voids ? false : Editor.isVoid(editor, n)),\n    })\n\n    const matches: NodeEntry<T>[] = []\n    let hit: NodeEntry<T> | undefined\n\n    for (const [node, path] of nodeEntries) {\n      const isLower = hit && Path.compare(path, hit[1]) === 0\n\n      // In highest mode any node lower than the last hit is not a match.\n      if (mode === 'highest' && isLower) {\n        continue\n      }\n\n      if (!match(node, path)) {\n        // If we've arrived at a leaf text node that is not lower than the last\n        // hit, then we've found a branch that doesn't include a match, which\n        // means the match is not universal.\n        if (universal && !isLower && Text.isText(node)) {\n          return\n        } else {\n          continue\n        }\n      }\n\n      // If there's a match and it's lower than the last, update the hit.\n      if (mode === 'lowest' && isLower) {\n        hit = [node, path]\n        continue\n      }\n\n      // In lowest mode we emit the last hit, once it's guaranteed lowest.\n      const emit: NodeEntry<T> | undefined =\n        mode === 'lowest' ? hit : [node, path]\n\n      if (emit) {\n        if (universal) {\n          matches.push(emit)\n        } else {\n          yield emit\n        }\n      }\n\n      hit = [node, path]\n    }\n\n    // Since lowest is always emitting one behind, catch up at the end.\n    if (mode === 'lowest' && hit) {\n      if (universal) {\n        matches.push(hit)\n      } else {\n        yield hit\n      }\n    }\n\n    // Universal defers to ensure that the match occurs in every branch, so we\n    // yield all of the matches after iterating.\n    if (universal) {\n      yield* matches\n    }\n  },\n  /**\n   * Normalize any dirty objects in the editor.\n   */\n\n  normalize(editor: Editor, options: EditorNormalizeOptions = {}): void {\n    const { force = false } = options\n    const getDirtyPaths = (editor: Editor) => {\n      return DIRTY_PATHS.get(editor) || []\n    }\n\n    const getDirtyPathKeys = (editor: Editor) => {\n      return DIRTY_PATH_KEYS.get(editor) || new Set()\n    }\n\n    const popDirtyPath = (editor: Editor): Path => {\n      const path = getDirtyPaths(editor).pop()!\n      const key = path.join(',')\n      getDirtyPathKeys(editor).delete(key)\n      return path\n    }\n\n    if (!Editor.isNormalizing(editor)) {\n      return\n    }\n\n    if (force) {\n      const allPaths = Array.from(Node.nodes(editor), ([, p]) => p)\n      const allPathKeys = new Set(allPaths.map(p => p.join(',')))\n      DIRTY_PATHS.set(editor, allPaths)\n      DIRTY_PATH_KEYS.set(editor, allPathKeys)\n    }\n\n    if (getDirtyPaths(editor).length === 0) {\n      return\n    }\n\n    Editor.withoutNormalizing(editor, () => {\n      /*\n        Fix dirty elements with no children.\n        editor.normalizeNode() does fix this, but some normalization fixes also require it to work.\n        Running an initial pass avoids the catch-22 race condition.\n      */\n      for (const dirtyPath of getDirtyPaths(editor)) {\n        if (Node.has(editor, dirtyPath)) {\n          const entry = Editor.node(editor, dirtyPath)\n          const [node, _] = entry\n\n          /*\n            The default normalizer inserts an empty text node in this scenario, but it can be customised.\n            So there is some risk here.\n\n            As long as the normalizer only inserts child nodes for this case it is safe to do in any order;\n            by definition adding children to an empty node can't cause other paths to change.\n          */\n          if (Element.isElement(node) && node.children.length === 0) {\n            editor.normalizeNode(entry)\n          }\n        }\n      }\n\n      const max = getDirtyPaths(editor).length * 42 // HACK: better way?\n      let m = 0\n\n      while (getDirtyPaths(editor).length !== 0) {\n        if (m > max) {\n          throw new Error(`\n            Could not completely normalize the editor after ${max} iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          `)\n        }\n\n        const dirtyPath = popDirtyPath(editor)\n\n        // If the node doesn't exist in the tree, it does not need to be normalized.\n        if (Node.has(editor, dirtyPath)) {\n          const entry = Editor.node(editor, dirtyPath)\n          editor.normalizeNode(entry)\n        }\n        m++\n      }\n    })\n  },\n\n  /**\n   * Get the parent node of a location.\n   */\n\n  parent(\n    editor: Editor,\n    at: Location,\n    options: EditorParentOptions = {}\n  ): NodeEntry<Ancestor> {\n    const path = Editor.path(editor, at, options)\n    const parentPath = Path.parent(path)\n    const entry = Editor.node(editor, parentPath)\n    return entry as NodeEntry<Ancestor>\n  },\n\n  /**\n   * Get the path of a location.\n   */\n\n  path(editor: Editor, at: Location, options: EditorPathOptions = {}): Path {\n    const { depth, edge } = options\n\n    if (Path.isPath(at)) {\n      if (edge === 'start') {\n        const [, firstPath] = Node.first(editor, at)\n        at = firstPath\n      } else if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        at = lastPath\n      }\n    }\n\n    if (Range.isRange(at)) {\n      if (edge === 'start') {\n        at = Range.start(at)\n      } else if (edge === 'end') {\n        at = Range.end(at)\n      } else {\n        at = Path.common(at.anchor.path, at.focus.path)\n      }\n    }\n\n    if (Point.isPoint(at)) {\n      at = at.path\n    }\n\n    if (depth != null) {\n      at = at.slice(0, depth)\n    }\n\n    return at\n  },\n\n  hasPath(editor: Editor, path: Path): boolean {\n    return Node.has(editor, path)\n  },\n\n  /**\n   * Create a mutable ref for a `Path` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pathRef(\n    editor: Editor,\n    path: Path,\n    options: EditorPathRefOptions = {}\n  ): PathRef {\n    const { affinity = 'forward' } = options\n    const ref: PathRef = {\n      current: path,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pathRefs = Editor.pathRefs(editor)\n        pathRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pathRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked path refs of the editor.\n   */\n\n  pathRefs(editor: Editor): Set<PathRef> {\n    let refs = PATH_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      PATH_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Get the start or end point of a location.\n   */\n\n  point(editor: Editor, at: Location, options: EditorPointOptions = {}): Point {\n    const { edge = 'start' } = options\n\n    if (Path.isPath(at)) {\n      let path\n\n      if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        path = lastPath\n      } else {\n        const [, firstPath] = Node.first(editor, at)\n        path = firstPath\n      }\n\n      const node = Node.get(editor, path)\n\n      if (!Text.isText(node)) {\n        throw new Error(\n          `Cannot get the ${edge} point in the node at path [${at}] because it has no ${edge} text node.`\n        )\n      }\n\n      return { path, offset: edge === 'end' ? node.text.length : 0 }\n    }\n\n    if (Range.isRange(at)) {\n      const [start, end] = Range.edges(at)\n      return edge === 'start' ? start : end\n    }\n\n    return at\n  },\n\n  /**\n   * Create a mutable ref for a `Point` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pointRef(\n    editor: Editor,\n    point: Point,\n    options: EditorPointRefOptions = {}\n  ): PointRef {\n    const { affinity = 'forward' } = options\n    const ref: PointRef = {\n      current: point,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pointRefs = Editor.pointRefs(editor)\n        pointRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pointRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked point refs of the editor.\n   */\n\n  pointRefs(editor: Editor): Set<PointRef> {\n    let refs = POINT_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      POINT_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Return all the positions in `at` range where a `Point` can be placed.\n   *\n   * By default, moves forward by individual offsets at a time, but\n   * the `unit` option can be used to to move by character, word, line, or block.\n   *\n   * The `reverse` option can be used to change iteration direction.\n   *\n   * Note: By default void nodes are treated as a single point and iteration\n   * will not happen inside their content unless you pass in true for the\n   * `voids` option, then iteration will occur.\n   */\n\n  *positions(\n    editor: Editor,\n    options: EditorPositionsOptions = {}\n  ): Generator<Point, void, undefined> {\n    const {\n      at = editor.selection,\n      unit = 'offset',\n      reverse = false,\n      voids = false,\n    } = options\n\n    if (!at) {\n      return\n    }\n\n    /**\n     * Algorithm notes:\n     *\n     * Each step `distance` is dynamic depending on the underlying text\n     * and the `unit` specified.  Each step, e.g., a line or word, may\n     * span multiple text nodes, so we iterate through the text both on\n     * two levels in step-sync:\n     *\n     * `leafText` stores the text on a text leaf level, and is advanced\n     * through using the counters `leafTextOffset` and `leafTextRemaining`.\n     *\n     * `blockText` stores the text on a block level, and is shortened\n     * by `distance` every time it is advanced.\n     *\n     * We only maintain a window of one blockText and one leafText because\n     * a block node always appears before all of its leaf nodes.\n     */\n\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    const first = reverse ? end : start\n    let isNewBlock = false\n    let blockText = ''\n    let distance = 0 // Distance for leafText to catch up to blockText.\n    let leafTextRemaining = 0\n    let leafTextOffset = 0\n\n    // Iterate through all nodes in range, grabbing entire textual content\n    // of block nodes in blockText, and text nodes in leafText.\n    // Exploits the fact that nodes are sequenced in such a way that we first\n    // encounter the block node, then all of its text nodes, so when iterating\n    // through the blockText and leafText we just need to remember a window of\n    // one block node and leaf node, respectively.\n    for (const [node, path] of Editor.nodes(editor, { at, reverse, voids })) {\n      /*\n       * ELEMENT NODE - Yield position(s) for voids, collect blockText for blocks\n       */\n      if (Element.isElement(node)) {\n        // Void nodes are a special case, so by default we will always\n        // yield their first point. If the `voids` option is set to true,\n        // then we will iterate over their content.\n        if (!voids && editor.isVoid(node)) {\n          yield Editor.start(editor, path)\n          continue\n        }\n\n        // Inline element nodes are ignored as they don't themselves\n        // contribute to `blockText` or `leafText` - their parent and\n        // children do.\n        if (editor.isInline(node)) continue\n\n        // Block element node - set `blockText` to its text content.\n        if (Editor.hasInlines(editor, node)) {\n          // We always exhaust block nodes before encountering a new one:\n          //   console.assert(blockText === '',\n          //     `blockText='${blockText}' - `+\n          //     `not exhausted before new block node`, path)\n\n          // Ensure range considered is capped to `range`, in the\n          // start/end edge cases where block extends beyond range.\n          // Equivalent to this, but presumably more performant:\n          //   blockRange = Editor.range(editor, ...Editor.edges(editor, path))\n          //   blockRange = Range.intersection(range, blockRange) // intersect\n          //   blockText = Editor.string(editor, blockRange, { voids })\n          const e = Path.isAncestor(path, end.path)\n            ? end\n            : Editor.end(editor, path)\n          const s = Path.isAncestor(path, start.path)\n            ? start\n            : Editor.start(editor, path)\n\n          blockText = Editor.string(editor, { anchor: s, focus: e }, { voids })\n          isNewBlock = true\n        }\n      }\n\n      /*\n       * TEXT LEAF NODE - Iterate through text content, yielding\n       * positions every `distance` offset according to `unit`.\n       */\n      if (Text.isText(node)) {\n        const isFirst = Path.equals(path, first.path)\n\n        // Proof that we always exhaust text nodes before encountering a new one:\n        //   console.assert(leafTextRemaining <= 0,\n        //     `leafTextRemaining=${leafTextRemaining} - `+\n        //     `not exhausted before new leaf text node`, path)\n\n        // Reset `leafText` counters for new text node.\n        if (isFirst) {\n          leafTextRemaining = reverse\n            ? first.offset\n            : node.text.length - first.offset\n          leafTextOffset = first.offset // Works for reverse too.\n        } else {\n          leafTextRemaining = node.text.length\n          leafTextOffset = reverse ? leafTextRemaining : 0\n        }\n\n        // Yield position at the start of node (potentially).\n        if (isFirst || isNewBlock || unit === 'offset') {\n          yield { path, offset: leafTextOffset }\n          isNewBlock = false\n        }\n\n        // Yield positions every (dynamically calculated) `distance` offset.\n        while (true) {\n          // If `leafText` has caught up with `blockText` (distance=0),\n          // and if blockText is exhausted, break to get another block node,\n          // otherwise advance blockText forward by the new `distance`.\n          if (distance === 0) {\n            if (blockText === '') break\n            distance = calcDistance(blockText, unit, reverse)\n            // Split the string at the previously found distance and use the\n            // remaining string for the next iteration.\n            blockText = splitByCharacterDistance(\n              blockText,\n              distance,\n              reverse\n            )[1]\n          }\n\n          // Advance `leafText` by the current `distance`.\n          leafTextOffset = reverse\n            ? leafTextOffset - distance\n            : leafTextOffset + distance\n          leafTextRemaining = leafTextRemaining - distance\n\n          // If `leafText` is exhausted, break to get a new leaf node\n          // and set distance to the overflow amount, so we'll (maybe)\n          // catch up to blockText in the next leaf text node.\n          if (leafTextRemaining < 0) {\n            distance = -leafTextRemaining\n            break\n          }\n\n          // Successfully walked `distance` offsets through `leafText`\n          // to catch up with `blockText`, so we can reset `distance`\n          // and yield this position in this node.\n          distance = 0\n          yield { path, offset: leafTextOffset }\n        }\n      }\n    }\n    // Proof that upon completion, we've exahusted both leaf and block text:\n    //   console.assert(leafTextRemaining <= 0, \"leafText wasn't exhausted\")\n    //   console.assert(blockText === '', \"blockText wasn't exhausted\")\n\n    // Helper:\n    // Return the distance in offsets for a step of size `unit` on given string.\n    function calcDistance(text: string, unit: string, reverse?: boolean) {\n      if (unit === 'character') {\n        return getCharacterDistance(text, reverse)\n      } else if (unit === 'word') {\n        return getWordDistance(text, reverse)\n      } else if (unit === 'line' || unit === 'block') {\n        return text.length\n      }\n      return 1\n    }\n  },\n\n  /**\n   * Get the matching node in the branch of the document before a location.\n   */\n\n  previous<T extends Node>(\n    editor: Editor,\n    options: EditorPreviousOptions<T> = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const pointBeforeLocation = Editor.before(editor, at, { voids })\n\n    if (!pointBeforeLocation) {\n      return\n    }\n\n    const [, to] = Editor.first(editor, [])\n\n    // The search location is from the start of the document to the path of\n    // the point before the location passed in\n    const span: Span = [pointBeforeLocation.path, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the previous node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [previous] = Editor.nodes(editor, {\n      reverse: true,\n      at: span,\n      match,\n      mode,\n      voids,\n    })\n\n    return previous\n  },\n\n  /**\n   * Get a range of a location.\n   */\n\n  range(editor: Editor, at: Location, to?: Location): Range {\n    if (Range.isRange(at) && !to) {\n      return at\n    }\n\n    const start = Editor.start(editor, at)\n    const end = Editor.end(editor, to || at)\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Create a mutable ref for a `Range` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  rangeRef(\n    editor: Editor,\n    range: Range,\n    options: EditorRangeRefOptions = {}\n  ): RangeRef {\n    const { affinity = 'forward' } = options\n    const ref: RangeRef = {\n      current: range,\n      affinity,\n      unref() {\n        const { current } = ref\n        const rangeRefs = Editor.rangeRefs(editor)\n        rangeRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.rangeRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked range refs of the editor.\n   */\n\n  rangeRefs(editor: Editor): Set<RangeRef> {\n    let refs = RANGE_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      RANGE_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Remove a custom property from all of the leaf text nodes in the current\n   * selection.\n   *\n   * If the selection is currently collapsed, the removal will be stored on\n   * `editor.marks` and applied to the text inserted next.\n   */\n\n  removeMark(editor: Editor, key: string): void {\n    editor.removeMark(key)\n  },\n\n  /**\n   * Manually set if the editor should currently be normalizing.\n   *\n   * Note: Using this incorrectly can leave the editor in an invalid state.\n   *\n   */\n  setNormalizing(editor: Editor, isNormalizing: boolean): void {\n    NORMALIZING.set(editor, isNormalizing)\n  },\n\n  /**\n   * Get the start point of a location.\n   */\n\n  start(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'start' })\n  },\n\n  /**\n   * Get the text string content of a location.\n   *\n   * Note: by default the text of void nodes is considered to be an empty\n   * string, regardless of content, unless you pass in true for the voids option\n   */\n\n  string(\n    editor: Editor,\n    at: Location,\n    options: EditorStringOptions = {}\n  ): string {\n    const { voids = false } = options\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    let text = ''\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: range,\n      match: Text.isText,\n      voids,\n    })) {\n      let t = node.text\n\n      if (Path.equals(path, end.path)) {\n        t = t.slice(0, end.offset)\n      }\n\n      if (Path.equals(path, start.path)) {\n        t = t.slice(start.offset)\n      }\n\n      text += t\n    }\n\n    return text\n  },\n\n  /**\n   * Convert a range into a non-hanging one.\n   */\n\n  unhangRange(\n    editor: Editor,\n    range: Range,\n    options: EditorUnhangRangeOptions = {}\n  ): Range {\n    const { voids = false } = options\n    let [start, end] = Range.edges(range)\n\n    // PERF: exit early if we can guarantee that the range isn't hanging.\n    if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range)) {\n      return range\n    }\n\n    const endBlock = Editor.above(editor, {\n      at: end,\n      match: n => Editor.isBlock(editor, n),\n    })\n    const blockPath = endBlock ? endBlock[1] : []\n    const first = Editor.start(editor, start)\n    const before = { anchor: first, focus: end }\n    let skip = true\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: before,\n      match: Text.isText,\n      reverse: true,\n      voids,\n    })) {\n      if (skip) {\n        skip = false\n        continue\n      }\n\n      if (node.text !== '' || Path.isBefore(path, blockPath)) {\n        end = { path, offset: node.text.length }\n        break\n      }\n    }\n\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Match a void node in the current branch of the editor.\n   */\n\n  void(\n    editor: Editor,\n    options: EditorVoidOptions = {}\n  ): NodeEntry<Element> | undefined {\n    return Editor.above(editor, {\n      ...options,\n      match: n => Editor.isVoid(editor, n),\n    })\n  },\n\n  /**\n   * Call a function, deferring normalization until after it completes.\n   */\n\n  withoutNormalizing(editor: Editor, fn: () => void): void {\n    const value = Editor.isNormalizing(editor)\n    Editor.setNormalizing(editor, false)\n    try {\n      fn()\n    } finally {\n      Editor.setNormalizing(editor, value)\n    }\n    Editor.normalize(editor)\n  },\n}\n\n/**\n * A helper type for narrowing matched nodes with a predicate.\n */\n\nexport type NodeMatch<T extends Node> =\n  | ((node: Node, path: Path) => node is T)\n  | ((node: Node, path: Path) => boolean)\n\nexport type PropsCompare = (prop: Partial<Node>, node: Partial<Node>) => boolean\nexport type PropsMerge = (prop: Partial<Node>, node: Partial<Node>) => object\n","import { Path, Point, Range } from '..'\n\n/**\n * The `Location` interface is a union of the ways to refer to a specific\n * location in a Slate document: paths, points or ranges.\n *\n * Methods will often accept a `Location` instead of requiring only a `Path`,\n * `Point` or `Range`. This eliminates the need for developers to manage\n * converting between the different interfaces in their own code base.\n */\n\nexport type Location = Path | Point | Range\n\nexport interface LocationInterface {\n  isLocation: (value: any) => value is Location\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Location: LocationInterface = {\n  /**\n   * Check if a value implements the `Location` interface.\n   */\n\n  isLocation(value: any): value is Location {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value)\n  },\n}\n\n/**\n * The `Span` interface is a low-level way to refer to locations in nodes\n * without using `Point` which requires leaf text nodes to be present.\n */\n\nexport type Span = [Path, Path]\n\nexport interface SpanInterface {\n  isSpan: (value: any) => value is Span\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Span: SpanInterface = {\n  /**\n   * Check if a value implements the `Span` interface.\n   */\n\n  isSpan(value: any): value is Span {\n    return (\n      Array.isArray(value) && value.length === 2 && value.every(Path.isPath)\n    )\n  },\n}\n","import { produce } from 'immer'\nimport { Editor, Path, Range, Text, Scrubber } from '..'\nimport { Element, ElementEntry } from './element'\n\n/**\n * The `Node` union type represents all of the different types of nodes that\n * occur in a Slate document tree.\n */\n\nexport type BaseNode = Editor | Element | Text\nexport type Node = Editor | Element | Text\n\nexport interface NodeAncestorsOptions {\n  reverse?: boolean\n}\n\nexport interface NodeChildrenOptions {\n  reverse?: boolean\n}\n\nexport interface NodeDescendantsOptions {\n  from?: Path\n  to?: Path\n  reverse?: boolean\n  pass?: (node: NodeEntry) => boolean\n}\n\nexport interface NodeElementsOptions {\n  from?: Path\n  to?: Path\n  reverse?: boolean\n  pass?: (node: NodeEntry) => boolean\n}\n\nexport interface NodeLevelsOptions {\n  reverse?: boolean\n}\n\nexport interface NodeNodesOptions {\n  from?: Path\n  to?: Path\n  reverse?: boolean\n  pass?: (entry: NodeEntry) => boolean\n}\n\nexport interface NodeTextsOptions {\n  from?: Path\n  to?: Path\n  reverse?: boolean\n  pass?: (node: NodeEntry) => boolean\n}\n\nexport interface NodeInterface {\n  ancestor: (root: Node, path: Path) => Ancestor\n  ancestors: (\n    root: Node,\n    path: Path,\n    options?: NodeAncestorsOptions\n  ) => Generator<NodeEntry<Ancestor>, void, undefined>\n  child: (root: Node, index: number) => Descendant\n  children: (\n    root: Node,\n    path: Path,\n    options?: NodeChildrenOptions\n  ) => Generator<NodeEntry<Descendant>, void, undefined>\n  common: (root: Node, path: Path, another: Path) => NodeEntry\n  descendant: (root: Node, path: Path) => Descendant\n  descendants: (\n    root: Node,\n    options?: NodeDescendantsOptions\n  ) => Generator<NodeEntry<Descendant>, void, undefined>\n  elements: (\n    root: Node,\n    options?: NodeElementsOptions\n  ) => Generator<ElementEntry, void, undefined>\n  extractProps: (node: Node) => NodeProps\n  first: (root: Node, path: Path) => NodeEntry\n  fragment: (root: Node, range: Range) => Descendant[]\n  get: (root: Node, path: Path) => Node\n  has: (root: Node, path: Path) => boolean\n  isNode: (value: any) => value is Node\n  isNodeList: (value: any) => value is Node[]\n  last: (root: Node, path: Path) => NodeEntry\n  leaf: (root: Node, path: Path) => Text\n  levels: (\n    root: Node,\n    path: Path,\n    options?: NodeLevelsOptions\n  ) => Generator<NodeEntry, void, undefined>\n  matches: (node: Node, props: Partial<Node>) => boolean\n  nodes: (\n    root: Node,\n    options?: NodeNodesOptions\n  ) => Generator<NodeEntry, void, undefined>\n  parent: (root: Node, path: Path) => Ancestor\n  string: (node: Node) => string\n  texts: (\n    root: Node,\n    options?: NodeTextsOptions\n  ) => Generator<NodeEntry<Text>, void, undefined>\n}\n\nconst IS_NODE_LIST_CACHE = new WeakMap<any[], boolean>()\n\n// eslint-disable-next-line no-redeclare\nexport const Node: NodeInterface = {\n  /**\n   * Get the node at a specific path, asserting that it's an ancestor node.\n   */\n\n  ancestor(root: Node, path: Path): Ancestor {\n    const node = Node.get(root, path)\n\n    if (Text.isText(node)) {\n      throw new Error(\n        `Cannot get the ancestor node at path [${path}] because it refers to a text node instead: ${Scrubber.stringify(\n          node\n        )}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of all the ancestor nodes above a specific path.\n   *\n   * By default the order is top-down, from highest to lowest ancestor in\n   * the tree, but you can pass the `reverse: true` option to go bottom-up.\n   */\n\n  *ancestors(\n    root: Node,\n    path: Path,\n    options: NodeAncestorsOptions = {}\n  ): Generator<NodeEntry<Ancestor>, void, undefined> {\n    for (const p of Path.ancestors(path, options)) {\n      const n = Node.ancestor(root, p)\n      const entry: NodeEntry<Ancestor> = [n, p]\n      yield entry\n    }\n  },\n\n  /**\n   * Get the child of a node at a specific index.\n   */\n\n  child(root: Node, index: number): Descendant {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get the child of a text node: ${Scrubber.stringify(root)}`\n      )\n    }\n\n    const c = root.children[index] as Descendant\n\n    if (c == null) {\n      throw new Error(\n        `Cannot get child at index \\`${index}\\` in node: ${Scrubber.stringify(\n          root\n        )}`\n      )\n    }\n\n    return c\n  },\n\n  /**\n   * Iterate over the children of a node at a specific path.\n   */\n\n  *children(\n    root: Node,\n    path: Path,\n    options: NodeChildrenOptions = {}\n  ): Generator<NodeEntry<Descendant>, void, undefined> {\n    const { reverse = false } = options\n    const ancestor = Node.ancestor(root, path)\n    const { children } = ancestor\n    let index = reverse ? children.length - 1 : 0\n\n    while (reverse ? index >= 0 : index < children.length) {\n      const child = Node.child(ancestor, index)\n      const childPath = path.concat(index)\n      yield [child, childPath]\n      index = reverse ? index - 1 : index + 1\n    }\n  },\n\n  /**\n   * Get an entry for the common ancesetor node of two paths.\n   */\n\n  common(root: Node, path: Path, another: Path): NodeEntry {\n    const p = Path.common(path, another)\n    const n = Node.get(root, p)\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, asserting that it's a descendant node.\n   */\n\n  descendant(root: Node, path: Path): Descendant {\n    const node = Node.get(root, path)\n\n    if (Editor.isEditor(node)) {\n      throw new Error(\n        `Cannot get the descendant node at path [${path}] because it refers to the root editor node instead: ${Scrubber.stringify(\n          node\n        )}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of all the descendant node entries inside a root node.\n   */\n\n  *descendants(\n    root: Node,\n    options: NodeDescendantsOptions = {}\n  ): Generator<NodeEntry<Descendant>, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (path.length !== 0) {\n        // NOTE: we have to coerce here because checking the path's length does\n        // guarantee that `node` is not a `Editor`, but TypeScript doesn't know.\n        yield [node, path] as NodeEntry<Descendant>\n      }\n    }\n  },\n\n  /**\n   * Return a generator of all the element nodes inside a root node. Each iteration\n   * will return an `ElementEntry` tuple consisting of `[Element, Path]`. If the\n   * root node is an element it will be included in the iteration as well.\n   */\n\n  *elements(\n    root: Node,\n    options: NodeElementsOptions = {}\n  ): Generator<ElementEntry, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Element.isElement(node)) {\n        yield [node, path]\n      }\n    }\n  },\n\n  /**\n   * Extract props from a Node.\n   */\n\n  extractProps(node: Node): NodeProps {\n    if (Element.isAncestor(node)) {\n      const { children, ...properties } = node\n\n      return properties\n    } else {\n      const { text, ...properties } = node\n\n      return properties\n    }\n  },\n\n  /**\n   * Get the first node entry in a root node from a path.\n   */\n\n  first(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        n = n.children[0]\n        p.push(0)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the sliced fragment represented by a range inside a root node.\n   */\n\n  fragment(root: Node, range: Range): Descendant[] {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get a fragment starting from a root text node: ${Scrubber.stringify(\n          root\n        )}`\n      )\n    }\n\n    const newRoot = produce({ children: root.children }, r => {\n      const [start, end] = Range.edges(range)\n      const nodeEntries = Node.nodes(r, {\n        reverse: true,\n        pass: ([, path]) => !Range.includes(range, path),\n      })\n\n      for (const [, path] of nodeEntries) {\n        if (!Range.includes(range, path)) {\n          const parent = Node.parent(r, path)\n          const index = path[path.length - 1]\n          parent.children.splice(index, 1)\n        }\n\n        if (Path.equals(path, end.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(0, end.offset)\n        }\n\n        if (Path.equals(path, start.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(start.offset)\n        }\n      }\n\n      if (Editor.isEditor(r)) {\n        r.selection = null\n      }\n    })\n\n    return newRoot.children\n  },\n\n  /**\n   * Get the descendant node referred to by a specific path. If the path is an\n   * empty array, it refers to the root node itself.\n   */\n\n  get(root: Node, path: Path): Node {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\n          `Cannot find a descendant at path [${path}] in node: ${Scrubber.stringify(\n            root\n          )}`\n        )\n      }\n\n      node = node.children[p]\n    }\n\n    return node\n  },\n\n  /**\n   * Check if a descendant node exists at a specific path.\n   */\n\n  has(root: Node, path: Path): boolean {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        return false\n      }\n\n      node = node.children[p]\n    }\n\n    return true\n  },\n\n  /**\n   * Check if a value implements the `Node` interface.\n   */\n\n  isNode(value: any): value is Node {\n    return (\n      Text.isText(value) || Element.isElement(value) || Editor.isEditor(value)\n    )\n  },\n\n  /**\n   * Check if a value is a list of `Node` objects.\n   */\n\n  isNodeList(value: any): value is Node[] {\n    if (!Array.isArray(value)) {\n      return false\n    }\n    const cachedResult = IS_NODE_LIST_CACHE.get(value)\n    if (cachedResult !== undefined) {\n      return cachedResult\n    }\n    const isNodeList = value.every(val => Node.isNode(val))\n    IS_NODE_LIST_CACHE.set(value, isNodeList)\n    return isNodeList\n  },\n\n  /**\n   * Get the last node entry in a root node from a path.\n   */\n\n  last(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        const i = n.children.length - 1\n        n = n.children[i]\n        p.push(i)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, ensuring it's a leaf text node.\n   */\n\n  leaf(root: Node, path: Path): Text {\n    const node = Node.get(root, path)\n\n    if (!Text.isText(node)) {\n      throw new Error(\n        `Cannot get the leaf node at path [${path}] because it refers to a non-leaf node: ${Scrubber.stringify(\n          node\n        )}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of the in a branch of the tree, from a specific path.\n   *\n   * By default the order is top-down, from highest to lowest node in the tree,\n   * but you can pass the `reverse: true` option to go bottom-up.\n   */\n\n  *levels(\n    root: Node,\n    path: Path,\n    options: NodeLevelsOptions = {}\n  ): Generator<NodeEntry, void, undefined> {\n    for (const p of Path.levels(path, options)) {\n      const n = Node.get(root, p)\n      yield [n, p]\n    }\n  },\n\n  /**\n   * Check if a node matches a set of props.\n   */\n\n  matches(node: Node, props: Partial<Node>): boolean {\n    return (\n      (Element.isElement(node) &&\n        Element.isElementProps(props) &&\n        Element.matches(node, props)) ||\n      (Text.isText(node) &&\n        Text.isTextProps(props) &&\n        Text.matches(node, props))\n    )\n  },\n\n  /**\n   * Return a generator of all the node entries of a root node. Each entry is\n   * returned as a `[Node, Path]` tuple, with the path referring to the node's\n   * position inside the root node.\n   */\n\n  *nodes(\n    root: Node,\n    options: NodeNodesOptions = {}\n  ): Generator<NodeEntry, void, undefined> {\n    const { pass, reverse = false } = options\n    const { from = [], to } = options\n    const visited = new Set()\n    let p: Path = []\n    let n = root\n\n    while (true) {\n      if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {\n        break\n      }\n\n      if (!visited.has(n)) {\n        yield [n, p]\n      }\n\n      // If we're allowed to go downward and we haven't descended yet, do.\n      if (\n        !visited.has(n) &&\n        !Text.isText(n) &&\n        n.children.length !== 0 &&\n        (pass == null || pass([n, p]) === false)\n      ) {\n        visited.add(n)\n        let nextIndex = reverse ? n.children.length - 1 : 0\n\n        if (Path.isAncestor(p, from)) {\n          nextIndex = from[p.length]\n        }\n\n        p = p.concat(nextIndex)\n        n = Node.get(root, p)\n        continue\n      }\n\n      // If we're at the root and we can't go down, we're done.\n      if (p.length === 0) {\n        break\n      }\n\n      // If we're going forward...\n      if (!reverse) {\n        const newPath = Path.next(p)\n\n        if (Node.has(root, newPath)) {\n          p = newPath\n          n = Node.get(root, p)\n          continue\n        }\n      }\n\n      // If we're going backward...\n      if (reverse && p[p.length - 1] !== 0) {\n        const newPath = Path.previous(p)\n        p = newPath\n        n = Node.get(root, p)\n        continue\n      }\n\n      // Otherwise we're going upward...\n      p = Path.parent(p)\n      n = Node.get(root, p)\n      visited.add(n)\n    }\n  },\n\n  /**\n   * Get the parent of a node at a specific path.\n   */\n\n  parent(root: Node, path: Path): Ancestor {\n    const parentPath = Path.parent(path)\n    const p = Node.get(root, parentPath)\n\n    if (Text.isText(p)) {\n      throw new Error(\n        `Cannot get the parent of path [${path}] because it does not exist in the root.`\n      )\n    }\n\n    return p\n  },\n\n  /**\n   * Get the concatenated text string of a node's content.\n   *\n   * Note that this will not include spaces or line breaks between block nodes.\n   * It is not a user-facing string, but a string for performing offset-related\n   * computations for a node.\n   */\n\n  string(node: Node): string {\n    if (Text.isText(node)) {\n      return node.text\n    } else {\n      return node.children.map(Node.string).join('')\n    }\n  },\n\n  /**\n   * Return a generator of all leaf text nodes in a root node.\n   */\n\n  *texts(\n    root: Node,\n    options: NodeTextsOptions = {}\n  ): Generator<NodeEntry<Text>, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Text.isText(node)) {\n        yield [node, path]\n      }\n    }\n  },\n}\n\n/**\n * The `Descendant` union type represents nodes that are descendants in the\n * tree. It is returned as a convenience in certain cases to narrow a value\n * further than the more generic `Node` union.\n */\n\nexport type Descendant = Element | Text\n\n/**\n * The `Ancestor` union type represents nodes that are ancestors in the tree.\n * It is returned as a convenience in certain cases to narrow a value further\n * than the more generic `Node` union.\n */\n\nexport type Ancestor = Editor | Element\n\n/**\n * `NodeEntry` objects are returned when iterating over the nodes in a Slate\n * document tree. They consist of the node and its `Path` relative to the root\n * node in the document.\n */\n\nexport type NodeEntry<T extends Node = Node> = [T, Path]\n\n/**\n * Convenience type for returning the props of a node.\n */\nexport type NodeProps =\n  | Omit<Editor, 'children'>\n  | Omit<Element, 'children'>\n  | Omit<Text, 'text'>\n","import { ExtendedType, Node, Path, Range } from '..'\nimport { isPlainObject } from 'is-plain-object'\n\nexport type BaseInsertNodeOperation = {\n  type: 'insert_node'\n  path: Path\n  node: Node\n}\n\nexport type InsertNodeOperation = ExtendedType<\n  'InsertNodeOperation',\n  BaseInsertNodeOperation\n>\n\nexport type BaseInsertTextOperation = {\n  type: 'insert_text'\n  path: Path\n  offset: number\n  text: string\n}\n\nexport type InsertTextOperation = ExtendedType<\n  'InsertTextOperation',\n  BaseInsertTextOperation\n>\n\nexport type BaseMergeNodeOperation = {\n  type: 'merge_node'\n  path: Path\n  position: number\n  properties: Partial<Node>\n}\n\nexport type MergeNodeOperation = ExtendedType<\n  'MergeNodeOperation',\n  BaseMergeNodeOperation\n>\n\nexport type BaseMoveNodeOperation = {\n  type: 'move_node'\n  path: Path\n  newPath: Path\n}\n\nexport type MoveNodeOperation = ExtendedType<\n  'MoveNodeOperation',\n  BaseMoveNodeOperation\n>\n\nexport type BaseRemoveNodeOperation = {\n  type: 'remove_node'\n  path: Path\n  node: Node\n}\n\nexport type RemoveNodeOperation = ExtendedType<\n  'RemoveNodeOperation',\n  BaseRemoveNodeOperation\n>\n\nexport type BaseRemoveTextOperation = {\n  type: 'remove_text'\n  path: Path\n  offset: number\n  text: string\n}\n\nexport type RemoveTextOperation = ExtendedType<\n  'RemoveTextOperation',\n  BaseRemoveTextOperation\n>\n\nexport type BaseSetNodeOperation = {\n  type: 'set_node'\n  path: Path\n  properties: Partial<Node>\n  newProperties: Partial<Node>\n}\n\nexport type SetNodeOperation = ExtendedType<\n  'SetNodeOperation',\n  BaseSetNodeOperation\n>\n\nexport type BaseSetSelectionOperation =\n  | {\n      type: 'set_selection'\n      properties: null\n      newProperties: Range\n    }\n  | {\n      type: 'set_selection'\n      properties: Partial<Range>\n      newProperties: Partial<Range>\n    }\n  | {\n      type: 'set_selection'\n      properties: Range\n      newProperties: null\n    }\n\nexport type SetSelectionOperation = ExtendedType<\n  'SetSelectionOperation',\n  BaseSetSelectionOperation\n>\n\nexport type BaseSplitNodeOperation = {\n  type: 'split_node'\n  path: Path\n  position: number\n  properties: Partial<Node>\n}\n\nexport type SplitNodeOperation = ExtendedType<\n  'SplitNodeOperation',\n  BaseSplitNodeOperation\n>\n\nexport type NodeOperation =\n  | InsertNodeOperation\n  | MergeNodeOperation\n  | MoveNodeOperation\n  | RemoveNodeOperation\n  | SetNodeOperation\n  | SplitNodeOperation\n\nexport type SelectionOperation = SetSelectionOperation\n\nexport type TextOperation = InsertTextOperation | RemoveTextOperation\n\n/**\n * `Operation` objects define the low-level instructions that Slate editors use\n * to apply changes to their internal state. Representing all changes as\n * operations is what allows Slate editors to easily implement history,\n * collaboration, and other features.\n */\n\nexport type BaseOperation = NodeOperation | SelectionOperation | TextOperation\nexport type Operation = ExtendedType<'Operation', BaseOperation>\n\nexport interface OperationInterface {\n  isNodeOperation: (value: any) => value is NodeOperation\n  isOperation: (value: any) => value is Operation\n  isOperationList: (value: any) => value is Operation[]\n  isSelectionOperation: (value: any) => value is SelectionOperation\n  isTextOperation: (value: any) => value is TextOperation\n  inverse: (op: Operation) => Operation\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Operation: OperationInterface = {\n  /**\n   * Check of a value is a `NodeOperation` object.\n   */\n\n  isNodeOperation(value: any): value is NodeOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_node')\n  },\n\n  /**\n   * Check of a value is an `Operation` object.\n   */\n\n  isOperation(value: any): value is Operation {\n    if (!isPlainObject(value)) {\n      return false\n    }\n\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'insert_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'merge_node':\n        return (\n          typeof value.position === 'number' &&\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties)\n        )\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath)\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'remove_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'set_node':\n        return (\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties) &&\n          isPlainObject(value.newProperties)\n        )\n      case 'set_selection':\n        return (\n          (value.properties === null && Range.isRange(value.newProperties)) ||\n          (value.newProperties === null && Range.isRange(value.properties)) ||\n          (isPlainObject(value.properties) &&\n            isPlainObject(value.newProperties))\n        )\n      case 'split_node':\n        return (\n          Path.isPath(value.path) &&\n          typeof value.position === 'number' &&\n          isPlainObject(value.properties)\n        )\n      default:\n        return false\n    }\n  },\n\n  /**\n   * Check if a value is a list of `Operation` objects.\n   */\n\n  isOperationList(value: any): value is Operation[] {\n    return (\n      Array.isArray(value) && value.every(val => Operation.isOperation(val))\n    )\n  },\n\n  /**\n   * Check of a value is a `SelectionOperation` object.\n   */\n\n  isSelectionOperation(value: any): value is SelectionOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_selection')\n  },\n\n  /**\n   * Check of a value is a `TextOperation` object.\n   */\n\n  isTextOperation(value: any): value is TextOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_text')\n  },\n\n  /**\n   * Invert an operation, returning a new operation that will exactly undo the\n   * original when applied.\n   */\n\n  inverse(op: Operation): Operation {\n    switch (op.type) {\n      case 'insert_node': {\n        return { ...op, type: 'remove_node' }\n      }\n\n      case 'insert_text': {\n        return { ...op, type: 'remove_text' }\n      }\n\n      case 'merge_node': {\n        return { ...op, type: 'split_node', path: Path.previous(op.path) }\n      }\n\n      case 'move_node': {\n        const { newPath, path } = op\n\n        // PERF: in this case the move operation is a no-op anyways.\n        if (Path.equals(newPath, path)) {\n          return op\n        }\n\n        // If the move happens completely within a single parent the path and\n        // newPath are stable with respect to each other.\n        if (Path.isSibling(path, newPath)) {\n          return { ...op, path: newPath, newPath: path }\n        }\n\n        // If the move does not happen within a single parent it is possible\n        // for the move to impact the true path to the location where the node\n        // was removed from and where it was inserted. We have to adjust for this\n        // and find the original path. We can accomplish this (only in non-sibling)\n        // moves by looking at the impact of the move operation on the node\n        // after the original move path.\n        const inversePath = Path.transform(path, op)!\n        const inverseNewPath = Path.transform(Path.next(path), op)!\n        return { ...op, path: inversePath, newPath: inverseNewPath }\n      }\n\n      case 'remove_node': {\n        return { ...op, type: 'insert_node' }\n      }\n\n      case 'remove_text': {\n        return { ...op, type: 'insert_text' }\n      }\n\n      case 'set_node': {\n        const { properties, newProperties } = op\n        return { ...op, properties: newProperties, newProperties: properties }\n      }\n\n      case 'set_selection': {\n        const { properties, newProperties } = op\n\n        if (properties == null) {\n          return {\n            ...op,\n            properties: newProperties as Range,\n            newProperties: null,\n          }\n        } else if (newProperties == null) {\n          return {\n            ...op,\n            properties: null,\n            newProperties: properties as Range,\n          }\n        } else {\n          return { ...op, properties: newProperties, newProperties: properties }\n        }\n      }\n\n      case 'split_node': {\n        return { ...op, type: 'merge_node', path: Path.next(op.path) }\n      }\n    }\n  },\n}\n","import { Operation } from '..'\nimport { TextDirection } from './types'\n\n/**\n * `Path` arrays are a list of indexes that describe a node's exact position in\n * a Slate node tree. Although they are usually relative to the root `Editor`\n * object, they can be relative to any `Node` object.\n */\n\nexport type Path = number[]\n\nexport interface PathAncestorsOptions {\n  reverse?: boolean\n}\n\nexport interface PathLevelsOptions {\n  reverse?: boolean\n}\n\nexport interface PathTransformOptions {\n  affinity?: TextDirection | null\n}\n\nexport interface PathInterface {\n  ancestors: (path: Path, options?: PathAncestorsOptions) => Path[]\n  common: (path: Path, another: Path) => Path\n  compare: (path: Path, another: Path) => -1 | 0 | 1\n  endsAfter: (path: Path, another: Path) => boolean\n  endsAt: (path: Path, another: Path) => boolean\n  endsBefore: (path: Path, another: Path) => boolean\n  equals: (path: Path, another: Path) => boolean\n  hasPrevious: (path: Path) => boolean\n  isAfter: (path: Path, another: Path) => boolean\n  isAncestor: (path: Path, another: Path) => boolean\n  isBefore: (path: Path, another: Path) => boolean\n  isChild: (path: Path, another: Path) => boolean\n  isCommon: (path: Path, another: Path) => boolean\n  isDescendant: (path: Path, another: Path) => boolean\n  isParent: (path: Path, another: Path) => boolean\n  isPath: (value: any) => value is Path\n  isSibling: (path: Path, another: Path) => boolean\n  levels: (path: Path, options?: PathLevelsOptions) => Path[]\n  next: (path: Path) => Path\n  operationCanTransformPath: (operation: Operation) => boolean\n  parent: (path: Path) => Path\n  previous: (path: Path) => Path\n  relative: (path: Path, ancestor: Path) => Path\n  transform: (\n    path: Path,\n    operation: Operation,\n    options?: PathTransformOptions\n  ) => Path | null\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Path: PathInterface = {\n  /**\n   * Get a list of ancestor paths for a given path.\n   *\n   * The paths are sorted from shallowest to deepest ancestor. However, if the\n   * `reverse: true` option is passed, they are reversed.\n   */\n\n  ancestors(path: Path, options: PathAncestorsOptions = {}): Path[] {\n    const { reverse = false } = options\n    let paths = Path.levels(path, options)\n\n    if (reverse) {\n      paths = paths.slice(1)\n    } else {\n      paths = paths.slice(0, -1)\n    }\n\n    return paths\n  },\n\n  /**\n   * Get the common ancestor path of two paths.\n   */\n\n  common(path: Path, another: Path): Path {\n    const common: Path = []\n\n    for (let i = 0; i < path.length && i < another.length; i++) {\n      const av = path[i]\n      const bv = another[i]\n\n      if (av !== bv) {\n        break\n      }\n\n      common.push(av)\n    }\n\n    return common\n  },\n\n  /**\n   * Compare a path to another, returning an integer indicating whether the path\n   * was before, at, or after the other.\n   *\n   * Note: Two paths of unequal length can still receive a `0` result if one is\n   * directly above or below the other. If you want exact matching, use\n   * [[Path.equals]] instead.\n   */\n\n  compare(path: Path, another: Path): -1 | 0 | 1 {\n    const min = Math.min(path.length, another.length)\n\n    for (let i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1\n      if (path[i] > another[i]) return 1\n    }\n\n    return 0\n  },\n\n  /**\n   * Check if a path ends after one of the indexes in another.\n   */\n\n  endsAfter(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av > bv\n  },\n\n  /**\n   * Check if a path ends at one of the indexes in another.\n   */\n\n  endsAt(path: Path, another: Path): boolean {\n    const i = path.length\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    return Path.equals(as, bs)\n  },\n\n  /**\n   * Check if a path ends before one of the indexes in another.\n   */\n\n  endsBefore(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av < bv\n  },\n\n  /**\n   * Check if a path is exactly equal to another.\n   */\n\n  equals(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length && path.every((n, i) => n === another[i])\n    )\n  },\n\n  /**\n   * Check if the path of previous sibling node exists\n   */\n\n  hasPrevious(path: Path): boolean {\n    return path[path.length - 1] > 0\n  },\n\n  /**\n   * Check if a path is after another.\n   */\n\n  isAfter(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === 1\n  },\n\n  /**\n   * Check if a path is an ancestor of another.\n   */\n\n  isAncestor(path: Path, another: Path): boolean {\n    return path.length < another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is before another.\n   */\n\n  isBefore(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === -1\n  },\n\n  /**\n   * Check if a path is a child of another.\n   */\n\n  isChild(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length + 1 && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check if a path is equal to or an ancestor of another.\n   */\n\n  isCommon(path: Path, another: Path): boolean {\n    return path.length <= another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is a descendant of another.\n   */\n\n  isDescendant(path: Path, another: Path): boolean {\n    return path.length > another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is the parent of another.\n   */\n\n  isParent(path: Path, another: Path): boolean {\n    return (\n      path.length + 1 === another.length && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check is a value implements the `Path` interface.\n   */\n\n  isPath(value: any): value is Path {\n    return (\n      Array.isArray(value) &&\n      (value.length === 0 || typeof value[0] === 'number')\n    )\n  },\n\n  /**\n   * Check if a path is a sibling of another.\n   */\n\n  isSibling(path: Path, another: Path): boolean {\n    if (path.length !== another.length) {\n      return false\n    }\n\n    const as = path.slice(0, -1)\n    const bs = another.slice(0, -1)\n    const al = path[path.length - 1]\n    const bl = another[another.length - 1]\n    return al !== bl && Path.equals(as, bs)\n  },\n\n  /**\n   * Get a list of paths at every level down to a path. Note: this is the same\n   * as `Path.ancestors`, but including the path itself.\n   *\n   * The paths are sorted from shallowest to deepest. However, if the `reverse:\n   * true` option is passed, they are reversed.\n   */\n\n  levels(path: Path, options: PathLevelsOptions = {}): Path[] {\n    const { reverse = false } = options\n    const list: Path[] = []\n\n    for (let i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i))\n    }\n\n    if (reverse) {\n      list.reverse()\n    }\n\n    return list\n  },\n\n  /**\n   * Given a path, get the path to the next sibling node.\n   */\n\n  next(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the next path of a root path [${path}], because it has no next index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n    return path.slice(0, -1).concat(last + 1)\n  },\n\n  /**\n   * Returns whether this operation can affect paths or not. Used as an\n   * optimization when updating dirty paths during normalization\n   *\n   * NOTE: This *must* be kept in sync with the implementation of 'transform'\n   * below\n   */\n  operationCanTransformPath(operation: Operation): boolean {\n    switch (operation.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node':\n      case 'move_node':\n        return true\n      default:\n        return false\n    }\n  },\n\n  /**\n   * Given a path, return a new path referring to the parent node above it.\n   */\n\n  parent(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(`Cannot get the parent path of the root path [${path}].`)\n    }\n\n    return path.slice(0, -1)\n  },\n\n  /**\n   * Given a path, get the path to the previous sibling node.\n   */\n\n  previous(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the previous path of a root path [${path}], because it has no previous index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n\n    if (last <= 0) {\n      throw new Error(\n        `Cannot get the previous path of a first child path [${path}] because it would result in a negative index.`\n      )\n    }\n\n    return path.slice(0, -1).concat(last - 1)\n  },\n\n  /**\n   * Get a path relative to an ancestor.\n   */\n\n  relative(path: Path, ancestor: Path): Path {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\n        `Cannot get the relative path of [${path}] inside ancestor [${ancestor}], because it is not above or equal to the path.`\n      )\n    }\n\n    return path.slice(ancestor.length)\n  },\n\n  /**\n   * Transform a path by an operation.\n   */\n\n  transform(\n    path: Path | null,\n    operation: Operation,\n    options: PathTransformOptions = {}\n  ): Path | null {\n    if (!path) return null\n\n    // PERF: use destructing instead of immer\n    const p = [...path]\n    const { affinity = 'forward' } = options\n\n    // PERF: Exit early if the operation is guaranteed not to have an effect.\n    if (path.length === 0) {\n      return p\n    }\n\n    switch (operation.type) {\n      case 'insert_node': {\n        const { path: op } = operation\n\n        if (\n          Path.equals(op, p) ||\n          Path.endsBefore(op, p) ||\n          Path.isAncestor(op, p)\n        ) {\n          p[op.length - 1] += 1\n        }\n\n        break\n      }\n\n      case 'remove_node': {\n        const { path: op } = operation\n\n        if (Path.equals(op, p) || Path.isAncestor(op, p)) {\n          return null\n        } else if (Path.endsBefore(op, p)) {\n          p[op.length - 1] -= 1\n        }\n\n        break\n      }\n\n      case 'merge_node': {\n        const { path: op, position } = operation\n\n        if (Path.equals(op, p) || Path.endsBefore(op, p)) {\n          p[op.length - 1] -= 1\n        } else if (Path.isAncestor(op, p)) {\n          p[op.length - 1] -= 1\n          p[op.length] += position\n        }\n\n        break\n      }\n\n      case 'split_node': {\n        const { path: op, position } = operation\n\n        if (Path.equals(op, p)) {\n          if (affinity === 'forward') {\n            p[p.length - 1] += 1\n          } else if (affinity === 'backward') {\n            // Nothing, because it still refers to the right path.\n          } else {\n            return null\n          }\n        } else if (Path.endsBefore(op, p)) {\n          p[op.length - 1] += 1\n        } else if (Path.isAncestor(op, p) && path[op.length] >= position) {\n          p[op.length - 1] += 1\n          p[op.length] -= position\n        }\n\n        break\n      }\n\n      case 'move_node': {\n        const { path: op, newPath: onp } = operation\n\n        // If the old and new path are the same, it's a no-op.\n        if (Path.equals(op, onp)) {\n          return p\n        }\n\n        if (Path.isAncestor(op, p) || Path.equals(op, p)) {\n          const copy = onp.slice()\n\n          if (Path.endsBefore(op, onp) && op.length < onp.length) {\n            copy[op.length - 1] -= 1\n          }\n\n          return copy.concat(p.slice(op.length))\n        } else if (\n          Path.isSibling(op, onp) &&\n          (Path.isAncestor(onp, p) || Path.equals(onp, p))\n        ) {\n          if (Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          } else {\n            p[op.length - 1] += 1\n          }\n        } else if (\n          Path.endsBefore(onp, p) ||\n          Path.equals(onp, p) ||\n          Path.isAncestor(onp, p)\n        ) {\n          if (Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          }\n\n          p[onp.length - 1] += 1\n        } else if (Path.endsBefore(op, p)) {\n          if (Path.equals(onp, p)) {\n            p[onp.length - 1] += 1\n          }\n\n          p[op.length - 1] -= 1\n        }\n\n        break\n      }\n    }\n\n    return p\n  },\n}\n","import { Operation, Path } from '..'\n\n/**\n * `PathRef` objects keep a specific path in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date path value.\n */\n\nexport interface PathRef {\n  current: Path | null\n  affinity: 'forward' | 'backward' | null\n  unref(): Path | null\n}\n\nexport interface PathRefInterface {\n  transform: (ref: PathRef, op: Operation) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const PathRef: PathRefInterface = {\n  /**\n   * Transform the path ref's current value by an operation.\n   */\n\n  transform(ref: PathRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Path.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","import { isPlainObject } from 'is-plain-object'\nimport { produce } from 'immer'\nimport { ExtendedType, Operation, Path } from '..'\nimport { TextDirection } from './types'\n\n/**\n * `Point` objects refer to a specific location in a text node in a Slate\n * document. Its path refers to the location of the node in the tree, and its\n * offset refers to the distance into the node's string of text. Points can\n * only refer to `Text` nodes.\n */\n\nexport interface BasePoint {\n  path: Path\n  offset: number\n}\n\nexport type Point = ExtendedType<'Point', BasePoint>\n\nexport interface PointTransformOptions {\n  affinity?: TextDirection | null\n}\n\nexport interface PointInterface {\n  compare: (point: Point, another: Point) => -1 | 0 | 1\n  isAfter: (point: Point, another: Point) => boolean\n  isBefore: (point: Point, another: Point) => boolean\n  equals: (point: Point, another: Point) => boolean\n  isPoint: (value: any) => value is Point\n  transform: (\n    point: Point,\n    op: Operation,\n    options?: PointTransformOptions\n  ) => Point | null\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Point: PointInterface = {\n  /**\n   * Compare a point to another, returning an integer indicating whether the\n   * point was before, at, or after the other.\n   */\n\n  compare(point: Point, another: Point): -1 | 0 | 1 {\n    const result = Path.compare(point.path, another.path)\n\n    if (result === 0) {\n      if (point.offset < another.offset) return -1\n      if (point.offset > another.offset) return 1\n      return 0\n    }\n\n    return result\n  },\n\n  /**\n   * Check if a point is after another.\n   */\n\n  isAfter(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === 1\n  },\n\n  /**\n   * Check if a point is before another.\n   */\n\n  isBefore(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === -1\n  },\n\n  /**\n   * Check if a point is exactly equal to another.\n   */\n\n  equals(point: Point, another: Point): boolean {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return (\n      point.offset === another.offset && Path.equals(point.path, another.path)\n    )\n  },\n\n  /**\n   * Check if a value implements the `Point` interface.\n   */\n\n  isPoint(value: any): value is Point {\n    return (\n      isPlainObject(value) &&\n      typeof value.offset === 'number' &&\n      Path.isPath(value.path)\n    )\n  },\n\n  /**\n   * Transform a point by an operation.\n   */\n\n  transform(\n    point: Point | null,\n    op: Operation,\n    options: PointTransformOptions = {}\n  ): Point | null {\n    return produce(point, p => {\n      if (p === null) {\n        return null\n      }\n      const { affinity = 'forward' } = options\n      const { path, offset } = p\n\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node': {\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'insert_text': {\n          if (\n            Path.equals(op.path, path) &&\n            (op.offset < offset ||\n              (op.offset === offset && affinity === 'forward'))\n          ) {\n            p.offset += op.text.length\n          }\n\n          break\n        }\n\n        case 'merge_node': {\n          if (Path.equals(op.path, path)) {\n            p.offset += op.position\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'remove_text': {\n          if (Path.equals(op.path, path) && op.offset <= offset) {\n            p.offset -= Math.min(offset - op.offset, op.text.length)\n          }\n\n          break\n        }\n\n        case 'remove_node': {\n          if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n            return null\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'split_node': {\n          if (Path.equals(op.path, path)) {\n            if (op.position === offset && affinity == null) {\n              return null\n            } else if (\n              op.position < offset ||\n              (op.position === offset && affinity === 'forward')\n            ) {\n              p.offset -= op.position\n\n              p.path = Path.transform(path, op, {\n                ...options,\n                affinity: 'forward',\n              })!\n            }\n          } else {\n            p.path = Path.transform(path, op, options)!\n          }\n\n          break\n        }\n      }\n    })\n  },\n}\n\n/**\n * `PointEntry` objects are returned when iterating over `Point` objects that\n * belong to a range.\n */\n\nexport type PointEntry = [Point, 'anchor' | 'focus']\n","import { Operation, Point } from '..'\nimport { TextDirection } from './types'\n\n/**\n * `PointRef` objects keep a specific point in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date point value.\n */\n\nexport interface PointRef {\n  current: Point | null\n  affinity: TextDirection | null\n  unref(): Point | null\n}\n\nexport interface PointRefInterface {\n  transform: (ref: PointRef, op: Operation) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const PointRef: PointRefInterface = {\n  /**\n   * Transform the point ref's current value by an operation.\n   */\n\n  transform(ref: PointRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const point = Point.transform(current, op, { affinity })\n    ref.current = point\n\n    if (point == null) {\n      ref.unref()\n    }\n  },\n}\n","import { produce } from 'immer'\nimport { isPlainObject } from 'is-plain-object'\nimport { ExtendedType, Operation, Path, Point, PointEntry } from '..'\nimport { RangeDirection } from './types'\n\n/**\n * `Range` objects are a set of points that refer to a specific span of a Slate\n * document. They can define a span inside a single node or a can span across\n * multiple nodes.\n */\n\nexport interface BaseRange {\n  anchor: Point\n  focus: Point\n}\n\nexport type Range = ExtendedType<'Range', BaseRange>\n\nexport interface RangeEdgesOptions {\n  reverse?: boolean\n}\n\nexport interface RangeTransformOptions {\n  affinity?: RangeDirection | null\n}\n\nexport interface RangeInterface {\n  edges: (range: Range, options?: RangeEdgesOptions) => [Point, Point]\n  end: (range: Range) => Point\n  equals: (range: Range, another: Range) => boolean\n  includes: (range: Range, target: Path | Point | Range) => boolean\n  intersection: (range: Range, another: Range) => Range | null\n  isBackward: (range: Range) => boolean\n  isCollapsed: (range: Range) => boolean\n  isExpanded: (range: Range) => boolean\n  isForward: (range: Range) => boolean\n  isRange: (value: any) => value is Range\n  points: (range: Range) => Generator<PointEntry, void, undefined>\n  start: (range: Range) => Point\n  transform: (\n    range: Range,\n    op: Operation,\n    options?: RangeTransformOptions\n  ) => Range | null\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Range: RangeInterface = {\n  /**\n   * Get the start and end points of a range, in the order in which they appear\n   * in the document.\n   */\n\n  edges(range: Range, options: RangeEdgesOptions = {}): [Point, Point] {\n    const { reverse = false } = options\n    const { anchor, focus } = range\n    return Range.isBackward(range) === reverse\n      ? [anchor, focus]\n      : [focus, anchor]\n  },\n\n  /**\n   * Get the end point of a range.\n   */\n\n  end(range: Range): Point {\n    const [, end] = Range.edges(range)\n    return end\n  },\n\n  /**\n   * Check if a range is exactly equal to another.\n   */\n\n  equals(range: Range, another: Range): boolean {\n    return (\n      Point.equals(range.anchor, another.anchor) &&\n      Point.equals(range.focus, another.focus)\n    )\n  },\n\n  /**\n   * Check if a range includes a path, a point or part of another range.\n   */\n\n  includes(range: Range, target: Path | Point | Range): boolean {\n    if (Range.isRange(target)) {\n      if (\n        Range.includes(range, target.anchor) ||\n        Range.includes(range, target.focus)\n      ) {\n        return true\n      }\n\n      const [rs, re] = Range.edges(range)\n      const [ts, te] = Range.edges(target)\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te)\n    }\n\n    const [start, end] = Range.edges(range)\n    let isAfterStart = false\n    let isBeforeEnd = false\n\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0\n      isBeforeEnd = Point.compare(target, end) <= 0\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0\n      isBeforeEnd = Path.compare(target, end.path) <= 0\n    }\n\n    return isAfterStart && isBeforeEnd\n  },\n\n  /**\n   * Get the intersection of a range with another.\n   */\n\n  intersection(range: Range, another: Range): Range | null {\n    const { anchor, focus, ...rest } = range\n    const [s1, e1] = Range.edges(range)\n    const [s2, e2] = Range.edges(another)\n    const start = Point.isBefore(s1, s2) ? s2 : s1\n    const end = Point.isBefore(e1, e2) ? e1 : e2\n\n    if (Point.isBefore(end, start)) {\n      return null\n    } else {\n      return { anchor: start, focus: end, ...rest }\n    }\n  },\n\n  /**\n   * Check if a range is backward, meaning that its anchor point appears in the\n   * document _after_ its focus point.\n   */\n\n  isBackward(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.isAfter(anchor, focus)\n  },\n\n  /**\n   * Check if a range is collapsed, meaning that both its anchor and focus\n   * points refer to the exact same position in the document.\n   */\n\n  isCollapsed(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.equals(anchor, focus)\n  },\n\n  /**\n   * Check if a range is expanded.\n   *\n   * This is the opposite of [[Range.isCollapsed]] and is provided for legibility.\n   */\n\n  isExpanded(range: Range): boolean {\n    return !Range.isCollapsed(range)\n  },\n\n  /**\n   * Check if a range is forward.\n   *\n   * This is the opposite of [[Range.isBackward]] and is provided for legibility.\n   */\n\n  isForward(range: Range): boolean {\n    return !Range.isBackward(range)\n  },\n\n  /**\n   * Check if a value implements the [[Range]] interface.\n   */\n\n  isRange(value: any): value is Range {\n    return (\n      isPlainObject(value) &&\n      Point.isPoint(value.anchor) &&\n      Point.isPoint(value.focus)\n    )\n  },\n\n  /**\n   * Iterate through all of the point entries in a range.\n   */\n\n  *points(range: Range): Generator<PointEntry, void, undefined> {\n    yield [range.anchor, 'anchor']\n    yield [range.focus, 'focus']\n  },\n\n  /**\n   * Get the start point of a range.\n   */\n\n  start(range: Range): Point {\n    const [start] = Range.edges(range)\n    return start\n  },\n\n  /**\n   * Transform a range by an operation.\n   */\n\n  transform(\n    range: Range | null,\n    op: Operation,\n    options: RangeTransformOptions = {}\n  ): Range | null {\n    return produce(range, r => {\n      if (r === null) {\n        return null\n      }\n      const { affinity = 'inward' } = options\n      let affinityAnchor: 'forward' | 'backward' | null\n      let affinityFocus: 'forward' | 'backward' | null\n\n      if (affinity === 'inward') {\n        // If the range is collapsed, make sure to use the same affinity to\n        // avoid the two points passing each other and expanding in the opposite\n        // direction\n        const isCollapsed = Range.isCollapsed(r)\n        if (Range.isForward(r)) {\n          affinityAnchor = 'forward'\n          affinityFocus = isCollapsed ? affinityAnchor : 'backward'\n        } else {\n          affinityAnchor = 'backward'\n          affinityFocus = isCollapsed ? affinityAnchor : 'forward'\n        }\n      } else if (affinity === 'outward') {\n        if (Range.isForward(r)) {\n          affinityAnchor = 'backward'\n          affinityFocus = 'forward'\n        } else {\n          affinityAnchor = 'forward'\n          affinityFocus = 'backward'\n        }\n      } else {\n        affinityAnchor = affinity\n        affinityFocus = affinity\n      }\n      const anchor = Point.transform(r.anchor, op, { affinity: affinityAnchor })\n      const focus = Point.transform(r.focus, op, { affinity: affinityFocus })\n\n      if (!anchor || !focus) {\n        return null\n      }\n\n      r.anchor = anchor\n      r.focus = focus\n    })\n  },\n}\n","import { Operation, Range } from '..'\n\n/**\n * `RangeRef` objects keep a specific range in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date range value.\n */\n\nexport interface RangeRef {\n  current: Range | null\n  affinity: 'forward' | 'backward' | 'outward' | 'inward' | null\n  unref(): Range | null\n}\n\nexport interface RangeRefInterface {\n  transform: (ref: RangeRef, op: Operation) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const RangeRef: RangeRefInterface = {\n  /**\n   * Transform the range ref's current value by an operation.\n   */\n\n  transform(ref: RangeRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Range.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","export type Scrubber = (key: string, value: unknown) => unknown\n\nexport interface ScrubberInterface {\n  setScrubber(scrubber: Scrubber | undefined): void\n  stringify(value: any): string\n}\n\nlet _scrubber: Scrubber | undefined = undefined\n\n/**\n * This interface implements a stringify() function, which is used by Slate\n * internally when generating exceptions containing end user data. Developers\n * using Slate may call Scrubber.setScrubber() to alter the behavior of this\n * stringify() function.\n *\n * For example, to prevent the cleartext logging of 'text' fields within Nodes:\n *\n *    import { Scrubber } from 'slate';\n *    Scrubber.setScrubber((key, val) => {\n *      if (key === 'text') return '...scrubbed...'\n *      return val\n *    });\n *\n */\n// eslint-disable-next-line no-redeclare\nexport const Scrubber: ScrubberInterface = {\n  setScrubber(scrubber: Scrubber | undefined): void {\n    _scrubber = scrubber\n  },\n\n  stringify(value: any): string {\n    return JSON.stringify(value, _scrubber)\n  },\n}\n","import { isPlainObject } from 'is-plain-object'\n\n/*\n  Custom deep equal comparison for Slate nodes.\n\n  We don't need general purpose deep equality;\n  Slate only supports plain values, Arrays, and nested objects.\n  Complex values nested inside Arrays are not supported.\n\n  Slate objects are designed to be serialised, so\n  missing keys are deliberately normalised to undefined.\n */\nexport const isDeepEqual = (\n  node: Record<string, any>,\n  another: Record<string, any>\n): boolean => {\n  for (const key in node) {\n    const a = node[key]\n    const b = another[key]\n    if (isPlainObject(a) && isPlainObject(b)) {\n      if (!isDeepEqual(a, b)) return false\n    } else if (Array.isArray(a) && Array.isArray(b)) {\n      if (a.length !== b.length) return false\n      for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false\n      }\n    } else if (a !== b) {\n      return false\n    }\n  }\n\n  /*\n    Deep object equality is only necessary in one direction; in the reverse direction\n    we are only looking for keys that are missing.\n    As above, undefined keys are normalised to missing.\n  */\n\n  for (const key in another) {\n    if (node[key] === undefined && another[key] !== undefined) {\n      return false\n    }\n  }\n\n  return true\n}\n","import { isPlainObject } from 'is-plain-object'\nimport { Range } from '..'\nimport { ExtendedType } from './custom-types'\nimport { isDeepEqual } from '../utils/deep-equal'\n\n/**\n * `Text` objects represent the nodes that contain the actual text content of a\n * Slate document along with any formatting properties. They are always leaf\n * nodes in the document tree as they cannot contain any children.\n */\n\nexport interface BaseText {\n  text: string\n}\n\nexport type Text = ExtendedType<'Text', BaseText>\n\nexport interface TextEqualsOptions {\n  loose?: boolean\n}\n\nexport interface TextInterface {\n  equals: (text: Text, another: Text, options?: TextEqualsOptions) => boolean\n  isText: (value: any) => value is Text\n  isTextList: (value: any) => value is Text[]\n  isTextProps: (props: any) => props is Partial<Text>\n  matches: (text: Text, props: Partial<Text>) => boolean\n  decorations: (node: Text, decorations: Range[]) => Text[]\n}\n\n// eslint-disable-next-line no-redeclare\nexport const Text: TextInterface = {\n  /**\n   * Check if two text nodes are equal.\n   *\n   * When loose is set, the text is not compared. This is\n   * used to check whether sibling text nodes can be merged.\n   */\n  equals(text: Text, another: Text, options: TextEqualsOptions = {}): boolean {\n    const { loose = false } = options\n\n    function omitText(obj: Record<any, any>) {\n      const { text, ...rest } = obj\n\n      return rest\n    }\n\n    return isDeepEqual(\n      loose ? omitText(text) : text,\n      loose ? omitText(another) : another\n    )\n  },\n\n  /**\n   * Check if a value implements the `Text` interface.\n   */\n\n  isText(value: any): value is Text {\n    return isPlainObject(value) && typeof value.text === 'string'\n  },\n\n  /**\n   * Check if a value is a list of `Text` objects.\n   */\n\n  isTextList(value: any): value is Text[] {\n    return Array.isArray(value) && value.every(val => Text.isText(val))\n  },\n\n  /**\n   * Check if some props are a partial of Text.\n   */\n\n  isTextProps(props: any): props is Partial<Text> {\n    return (props as Partial<Text>).text !== undefined\n  },\n\n  /**\n   * Check if an text matches set of properties.\n   *\n   * Note: this is for matching custom properties, and it does not ensure that\n   * the `text` property are two nodes equal.\n   */\n\n  matches(text: Text, props: Partial<Text>): boolean {\n    for (const key in props) {\n      if (key === 'text') {\n        continue\n      }\n\n      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * Get the leaves for a text node given decorations.\n   */\n\n  decorations(node: Text, decorations: Range[]): Text[] {\n    let leaves: Text[] = [{ ...node }]\n\n    for (const dec of decorations) {\n      const { anchor, focus, ...rest } = dec\n      const [start, end] = Range.edges(dec)\n      const next = []\n      let leafEnd = 0\n      const decorationStart = start.offset\n      const decorationEnd = end.offset\n\n      for (const leaf of leaves) {\n        const { length } = leaf.text\n        const leafStart = leafEnd\n        leafEnd += length\n\n        // If the range encompasses the entire leaf, add the range.\n        if (decorationStart <= leafStart && leafEnd <= decorationEnd) {\n          Object.assign(leaf, rest)\n          next.push(leaf)\n          continue\n        }\n\n        // If the range expanded and match the leaf, or starts after, or ends before it, continue.\n        if (\n          (decorationStart !== decorationEnd &&\n            (decorationStart === leafEnd || decorationEnd === leafStart)) ||\n          decorationStart > leafEnd ||\n          decorationEnd < leafStart ||\n          (decorationEnd === leafStart && leafStart !== 0)\n        ) {\n          next.push(leaf)\n          continue\n        }\n\n        // Otherwise we need to split the leaf, at the start, end, or both,\n        // and add the range to the middle intersecting section. Do the end\n        // split first since we don't need to update the offset that way.\n        let middle = leaf\n        let before\n        let after\n\n        if (decorationEnd < leafEnd) {\n          const off = decorationEnd - leafStart\n          after = { ...middle, text: middle.text.slice(off) }\n          middle = { ...middle, text: middle.text.slice(0, off) }\n        }\n\n        if (decorationStart > leafStart) {\n          const off = decorationStart - leafStart\n          before = { ...middle, text: middle.text.slice(0, off) }\n          middle = { ...middle, text: middle.text.slice(off) }\n        }\n\n        Object.assign(middle, rest)\n\n        if (before) {\n          next.push(before)\n        }\n\n        next.push(middle)\n\n        if (after) {\n          next.push(after)\n        }\n      }\n\n      leaves = next\n    }\n\n    return leaves\n  },\n}\n","import { createDraft, finishDraft, isDraft } from 'immer'\nimport {\n  Ancestor,\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  Point,\n  Range,\n  Scrubber,\n  Selection,\n  Text,\n} from '..'\n\nexport interface GeneralTransforms {\n  transform: (editor: Editor, op: Operation) => void\n}\n\nconst applyToDraft = (editor: Editor, selection: Selection, op: Operation) => {\n  switch (op.type) {\n    case 'insert_node': {\n      const { path, node } = op\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      if (index > parent.children.length) {\n        throw new Error(\n          `Cannot apply an \"insert_node\" operation at path [${path}] because the destination is past the end of the node.`\n        )\n      }\n\n      parent.children.splice(index, 0, node)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'insert_text': {\n      const { path, offset, text } = op\n      if (text.length === 0) break\n      const node = Node.leaf(editor, path)\n      const before = node.text.slice(0, offset)\n      const after = node.text.slice(offset)\n      node.text = before + text + after\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'merge_node': {\n      const { path } = op\n      const node = Node.get(editor, path)\n      const prevPath = Path.previous(path)\n      const prev = Node.get(editor, prevPath)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      if (Text.isText(node) && Text.isText(prev)) {\n        prev.text += node.text\n      } else if (!Text.isText(node) && !Text.isText(prev)) {\n        prev.children.push(...node.children)\n      } else {\n        throw new Error(\n          `Cannot apply a \"merge_node\" operation at path [${path}] to nodes of different interfaces: ${Scrubber.stringify(\n            node\n          )} ${Scrubber.stringify(prev)}`\n        )\n      }\n\n      parent.children.splice(index, 1)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'move_node': {\n      const { path, newPath } = op\n\n      if (Path.isAncestor(path, newPath)) {\n        throw new Error(\n          `Cannot move a path [${path}] to new path [${newPath}] because the destination is inside itself.`\n        )\n      }\n\n      const node = Node.get(editor, path)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      // This is tricky, but since the `path` and `newPath` both refer to\n      // the same snapshot in time, there's a mismatch. After either\n      // removing the original position, the second step's path can be out\n      // of date. So instead of using the `op.newPath` directly, we\n      // transform `op.path` to ascertain what the `newPath` would be after\n      // the operation was applied.\n      parent.children.splice(index, 1)\n      const truePath = Path.transform(path, op)!\n      const newParent = Node.get(editor, Path.parent(truePath)) as Ancestor\n      const newIndex = truePath[truePath.length - 1]\n\n      newParent.children.splice(newIndex, 0, node)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'remove_node': {\n      const { path } = op\n      const index = path[path.length - 1]\n      const parent = Node.parent(editor, path)\n      parent.children.splice(index, 1)\n\n      // Transform all of the points in the value, but if the point was in the\n      // node that was removed we need to update the range or remove it.\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          const result = Point.transform(point, op)\n\n          if (selection != null && result != null) {\n            selection[key] = result\n          } else {\n            let prev: NodeEntry<Text> | undefined\n            let next: NodeEntry<Text> | undefined\n\n            for (const [n, p] of Node.texts(editor)) {\n              if (Path.compare(p, path) === -1) {\n                prev = [n, p]\n              } else {\n                next = [n, p]\n                break\n              }\n            }\n\n            let preferNext = false\n            if (prev && next) {\n              if (Path.equals(next[1], path)) {\n                preferNext = !Path.hasPrevious(next[1])\n              } else {\n                preferNext =\n                  Path.common(prev[1], path).length <\n                  Path.common(next[1], path).length\n              }\n            }\n\n            if (prev && !preferNext) {\n              point.path = prev[1]\n              point.offset = prev[0].text.length\n            } else if (next) {\n              point.path = next[1]\n              point.offset = 0\n            } else {\n              selection = null\n            }\n          }\n        }\n      }\n\n      break\n    }\n\n    case 'remove_text': {\n      const { path, offset, text } = op\n      if (text.length === 0) break\n      const node = Node.leaf(editor, path)\n      const before = node.text.slice(0, offset)\n      const after = node.text.slice(offset + text.length)\n      node.text = before + after\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'set_node': {\n      const { path, properties, newProperties } = op\n\n      if (path.length === 0) {\n        throw new Error(`Cannot set properties on the root node!`)\n      }\n\n      const node = Node.get(editor, path)\n\n      for (const key in newProperties) {\n        if (key === 'children' || key === 'text') {\n          throw new Error(`Cannot set the \"${key}\" property of nodes!`)\n        }\n\n        const value = newProperties[key]\n\n        if (value == null) {\n          delete node[key]\n        } else {\n          node[key] = value\n        }\n      }\n\n      // properties that were previously defined, but are now missing, must be deleted\n      for (const key in properties) {\n        if (!newProperties.hasOwnProperty(key)) {\n          delete node[key]\n        }\n      }\n\n      break\n    }\n\n    case 'set_selection': {\n      const { newProperties } = op\n\n      if (newProperties == null) {\n        selection = newProperties\n      } else {\n        if (selection == null) {\n          if (!Range.isRange(newProperties)) {\n            throw new Error(\n              `Cannot apply an incomplete \"set_selection\" operation properties ${Scrubber.stringify(\n                newProperties\n              )} when there is no current selection.`\n            )\n          }\n\n          selection = { ...newProperties }\n        }\n\n        for (const key in newProperties) {\n          const value = newProperties[key]\n\n          if (value == null) {\n            if (key === 'anchor' || key === 'focus') {\n              throw new Error(`Cannot remove the \"${key}\" selection property`)\n            }\n\n            delete selection[key]\n          } else {\n            selection[key] = value\n          }\n        }\n      }\n\n      break\n    }\n\n    case 'split_node': {\n      const { path, position, properties } = op\n\n      if (path.length === 0) {\n        throw new Error(\n          `Cannot apply a \"split_node\" operation at path [${path}] because the root node cannot be split.`\n        )\n      }\n\n      const node = Node.get(editor, path)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n      let newNode: Descendant\n\n      if (Text.isText(node)) {\n        const before = node.text.slice(0, position)\n        const after = node.text.slice(position)\n        node.text = before\n        newNode = {\n          ...(properties as Partial<Text>),\n          text: after,\n        }\n      } else {\n        const before = node.children.slice(0, position)\n        const after = node.children.slice(position)\n        node.children = before\n\n        newNode = {\n          ...(properties as Partial<Element>),\n          children: after,\n        }\n      }\n\n      parent.children.splice(index + 1, 0, newNode)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n  }\n  return selection\n}\n\n// eslint-disable-next-line no-redeclare\nexport const GeneralTransforms: GeneralTransforms = {\n  /**\n   * Transform the editor by an operation.\n   */\n\n  transform(editor: Editor, op: Operation): void {\n    editor.children = createDraft(editor.children)\n    let selection = editor.selection && createDraft(editor.selection)\n\n    try {\n      selection = applyToDraft(editor, selection, op)\n    } finally {\n      editor.children = finishDraft(editor.children)\n\n      if (selection) {\n        editor.selection = isDraft(selection)\n          ? (finishDraft(selection) as Range)\n          : selection\n      } else {\n        editor.selection = null\n      }\n    }\n  },\n}\n","import {\n  Ancestor,\n  Editor,\n  Element,\n  Location,\n  Node,\n  NodeEntry,\n  Path,\n  Point,\n  Range,\n  Scrubber,\n  Text,\n  Transforms,\n} from '..'\nimport { NodeMatch, PropsCompare, PropsMerge } from '../interfaces/editor'\nimport { PointRef } from '../interfaces/point-ref'\nimport { RangeMode, MaximizeMode } from '../interfaces/types'\n\nexport interface NodeTransforms {\n  insertNodes: <T extends Node>(\n    editor: Editor,\n    nodes: Node | Node[],\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      select?: boolean\n      voids?: boolean\n    }\n  ) => void\n  liftNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      voids?: boolean\n    }\n  ) => void\n  mergeNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  moveNodes: <T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      to: Path\n      voids?: boolean\n    }\n  ) => void\n  removeNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  setNodes: <T extends Node>(\n    editor: Editor,\n    props: Partial<T>,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      hanging?: boolean\n      split?: boolean\n      voids?: boolean\n      compare?: PropsCompare\n      merge?: PropsMerge\n    }\n  ) => void\n  splitNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      always?: boolean\n      height?: number\n      voids?: boolean\n    }\n  ) => void\n  unsetNodes: <T extends Node>(\n    editor: Editor,\n    props: string | string[],\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n  unwrapNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n  wrapNodes: <T extends Node>(\n    editor: Editor,\n    element: Element,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const NodeTransforms: NodeTransforms = {\n  /**\n   * Insert nodes at a specific location in the Editor.\n   */\n\n  insertNodes<T extends Node>(\n    editor: Editor,\n    nodes: Node | Node[],\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      select?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at, match, select } = options\n\n      if (Node.isNode(nodes)) {\n        nodes = [nodes]\n      }\n\n      if (nodes.length === 0) {\n        return\n      }\n\n      const [node] = nodes\n\n      // By default, use the selection as the target location. But if there is\n      // no selection, insert at the end of the document since that is such a\n      // common use case when inserting from a non-selected state.\n      if (!at) {\n        if (editor.selection) {\n          at = editor.selection\n        } else if (editor.children.length > 0) {\n          at = Editor.end(editor, [])\n        } else {\n          at = [0]\n        }\n\n        select = true\n      }\n\n      if (select == null) {\n        select = false\n      }\n\n      if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      }\n\n      if (Point.isPoint(at)) {\n        if (match == null) {\n          if (Text.isText(node)) {\n            match = n => Text.isText(n)\n          } else if (editor.isInline(node)) {\n            match = n => Text.isText(n) || Editor.isInline(editor, n)\n          } else {\n            match = n => Editor.isBlock(editor, n)\n          }\n        }\n\n        const [entry] = Editor.nodes(editor, {\n          at: at.path,\n          match,\n          mode,\n          voids,\n        })\n\n        if (entry) {\n          const [, matchPath] = entry\n          const pathRef = Editor.pathRef(editor, matchPath)\n          const isAtEnd = Editor.isEnd(editor, at, matchPath)\n          Transforms.splitNodes(editor, { at, match, mode, voids })\n          const path = pathRef.unref()!\n          at = isAtEnd ? Path.next(path) : path\n        } else {\n          return\n        }\n      }\n\n      const parentPath = Path.parent(at)\n      let index = at[at.length - 1]\n\n      if (!voids && Editor.void(editor, { at: parentPath })) {\n        return\n      }\n\n      for (const node of nodes) {\n        const path = parentPath.concat(index)\n        index++\n        editor.apply({ type: 'insert_node', path, node })\n        at = Path.next(at)\n      }\n      at = Path.previous(at)\n\n      if (select) {\n        const point = Editor.end(editor, at)\n\n        if (point) {\n          Transforms.select(editor, point)\n        }\n      }\n    })\n  },\n\n  /**\n   * Lift nodes at a specific location upwards in the document tree, splitting\n   * their parent in two if necessary.\n   */\n\n  liftNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { at = editor.selection, mode = 'lowest', voids = false } = options\n      let { match } = options\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!at) {\n        return\n      }\n\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path.length < 2) {\n          throw new Error(\n            `Cannot lift node at a path [${path}] because it has a depth of less than \\`2\\`.`\n          )\n        }\n\n        const parentNodeEntry = Editor.node(editor, Path.parent(path))\n        const [parent, parentPath] = parentNodeEntry as NodeEntry<Ancestor>\n        const index = path[path.length - 1]\n        const { length } = parent.children\n\n        if (length === 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n          Transforms.removeNodes(editor, { at: parentPath, voids })\n        } else if (index === 0) {\n          Transforms.moveNodes(editor, { at: path, to: parentPath, voids })\n        } else if (index === length - 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        } else {\n          const splitPath = Path.next(path)\n          const toPath = Path.next(parentPath)\n          Transforms.splitNodes(editor, { at: splitPath, voids })\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        }\n      }\n    })\n  },\n\n  /**\n   * Merge a node at a location with the previous node of the same depth,\n   * removing any empty containing nodes after the merge if necessary.\n   */\n\n  mergeNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection } = options\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          const [parent] = Editor.parent(editor, at)\n          match = n => parent.children.includes(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n\n          if (options.at == null) {\n            Transforms.select(editor, at)\n          }\n        }\n      }\n\n      const [current] = Editor.nodes(editor, { at, match, voids, mode })\n      const prev = Editor.previous(editor, { at, match, voids, mode })\n\n      if (!current || !prev) {\n        return\n      }\n\n      const [node, path] = current\n      const [prevNode, prevPath] = prev\n\n      if (path.length === 0 || prevPath.length === 0) {\n        return\n      }\n\n      const newPath = Path.next(prevPath)\n      const commonPath = Path.common(path, prevPath)\n      const isPreviousSibling = Path.isSibling(path, prevPath)\n      const levels = Array.from(Editor.levels(editor, { at: path }), ([n]) => n)\n        .slice(commonPath.length)\n        .slice(0, -1)\n\n      // Determine if the merge will leave an ancestor of the path empty as a\n      // result, in which case we'll want to remove it after merging.\n      const emptyAncestor = Editor.above(editor, {\n        at: path,\n        mode: 'highest',\n        match: n => levels.includes(n) && hasSingleChildNest(editor, n),\n      })\n\n      const emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1])\n      let properties\n      let position\n\n      // Ensure that the nodes are equivalent, and figure out what the position\n      // and extra properties of the merge will be.\n      if (Text.isText(node) && Text.isText(prevNode)) {\n        const { text, ...rest } = node\n        position = prevNode.text.length\n        properties = rest as Partial<Text>\n      } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n        const { children, ...rest } = node\n        position = prevNode.children.length\n        properties = rest as Partial<Element>\n      } else {\n        throw new Error(\n          `Cannot merge the node at path [${path}] with the previous sibling because it is not the same kind: ${Scrubber.stringify(\n            node\n          )} ${Scrubber.stringify(prevNode)}`\n        )\n      }\n\n      // If the node isn't already the next sibling of the previous node, move\n      // it so that it is before merging.\n      if (!isPreviousSibling) {\n        Transforms.moveNodes(editor, { at: path, to: newPath, voids })\n      }\n\n      // If there was going to be an empty ancestor of the node that was merged,\n      // we remove it from the tree.\n      if (emptyRef) {\n        Transforms.removeNodes(editor, { at: emptyRef.current!, voids })\n      }\n\n      // If the target node that we're merging with is empty, remove it instead\n      // of merging the two. This is a common rich text editor behavior to\n      // prevent losing formatting when deleting entire nodes when you have a\n      // hanging selection.\n      // if prevNode is first child in parent,don't remove it.\n      if (\n        (Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode)) ||\n        (Text.isText(prevNode) &&\n          prevNode.text === '' &&\n          prevPath[prevPath.length - 1] !== 0)\n      ) {\n        Transforms.removeNodes(editor, { at: prevPath, voids })\n      } else {\n        editor.apply({\n          type: 'merge_node',\n          path: newPath,\n          position,\n          properties,\n        })\n      }\n\n      if (emptyRef) {\n        emptyRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Move the nodes at a location to a new location.\n   */\n\n  moveNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      to: Path\n      voids?: boolean\n    }\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        to,\n        at = editor.selection,\n        mode = 'lowest',\n        voids = false,\n      } = options\n      let { match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      const toRef = Editor.pathRef(editor, to)\n      const targets = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(targets, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const newPath = toRef.current!\n\n        if (path.length !== 0) {\n          editor.apply({ type: 'move_node', path, newPath })\n        }\n\n        if (\n          toRef.current &&\n          Path.isSibling(newPath, path) &&\n          Path.isAfter(newPath, path)\n        ) {\n          // When performing a sibling move to a later index, the path at the destination is shifted\n          // to before the insertion point instead of after. To ensure our group of nodes are inserted\n          // in the correct order we increment toRef to account for that\n          toRef.current = Path.next(toRef.current)\n        }\n      }\n\n      toRef.unref()\n    })\n  },\n\n  /**\n   * Remove the nodes at a specific location in the document.\n   */\n\n  removeNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      const depths = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(depths, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path) {\n          const [node] = Editor.node(editor, path)\n          editor.apply({ type: 'remove_node', path, node })\n        }\n      }\n    })\n  },\n\n  /**\n   * Set new properties on the nodes at a location.\n   */\n\n  setNodes<T extends Node>(\n    editor: Editor,\n    props: Partial<Node>,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      hanging?: boolean\n      split?: boolean\n      voids?: boolean\n      compare?: PropsCompare\n      merge?: PropsMerge\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection, compare, merge } = options\n      const {\n        hanging = false,\n        mode = 'lowest',\n        split = false,\n        voids = false,\n      } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (split && Range.isRange(at)) {\n        if (\n          Range.isCollapsed(at) &&\n          Editor.leaf(editor, at.anchor)[0].text.length > 0\n        ) {\n          // If the range is collapsed in a non-empty node and 'split' is true, there's nothing to\n          // set that won't get normalized away\n          return\n        }\n        const rangeRef = Editor.rangeRef(editor, at, { affinity: 'inward' })\n        const [start, end] = Range.edges(at)\n        const splitMode = mode === 'lowest' ? 'lowest' : 'highest'\n        const endAtEndOfNode = Editor.isEnd(editor, end, end.path)\n        Transforms.splitNodes(editor, {\n          at: end,\n          match,\n          mode: splitMode,\n          voids,\n          always: !endAtEndOfNode,\n        })\n        const startAtStartOfNode = Editor.isStart(editor, start, start.path)\n        Transforms.splitNodes(editor, {\n          at: start,\n          match,\n          mode: splitMode,\n          voids,\n          always: !startAtStartOfNode,\n        })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      if (!compare) {\n        compare = (prop, nodeProp) => prop !== nodeProp\n      }\n\n      for (const [node, path] of Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids,\n      })) {\n        const properties: Partial<Node> = {}\n        const newProperties: Partial<Node> = {}\n\n        // You can't set properties on the editor node.\n        if (path.length === 0) {\n          continue\n        }\n\n        let hasChanges = false\n\n        for (const k in props) {\n          if (k === 'children' || k === 'text') {\n            continue\n          }\n\n          if (compare(props[k], node[k])) {\n            hasChanges = true\n            // Omit new properties from the old properties list\n            if (node.hasOwnProperty(k)) properties[k] = node[k]\n            // Omit properties that have been removed from the new properties list\n            if (merge) {\n              if (props[k] != null) newProperties[k] = merge(node[k], props[k])\n            } else {\n              if (props[k] != null) newProperties[k] = props[k]\n            }\n          }\n        }\n\n        if (hasChanges) {\n          editor.apply({\n            type: 'set_node',\n            path,\n            properties,\n            newProperties,\n          })\n        }\n      }\n    })\n  },\n\n  /**\n   * Split the nodes at a specific location.\n   */\n\n  splitNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: RangeMode\n      always?: boolean\n      height?: number\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', voids = false } = options\n      let { match, at = editor.selection, height = 0, always = false } = options\n\n      if (match == null) {\n        match = n => Editor.isBlock(editor, n)\n      }\n\n      if (Range.isRange(at)) {\n        at = deleteRange(editor, at)\n      }\n\n      // If the target is a path, the default height-skipping and position\n      // counters need to account for us potentially splitting at a non-leaf.\n      if (Path.isPath(at)) {\n        const path = at\n        const point = Editor.point(editor, path)\n        const [parent] = Editor.parent(editor, path)\n        match = n => n === parent\n        height = point.path.length - path.length + 1\n        at = point\n        always = true\n      }\n\n      if (!at) {\n        return\n      }\n\n      const beforeRef = Editor.pointRef(editor, at, {\n        affinity: 'backward',\n      })\n      let afterRef: PointRef | undefined\n      try {\n        const [highest] = Editor.nodes(editor, { at, match, mode, voids })\n\n        if (!highest) {\n          return\n        }\n\n        const voidMatch = Editor.void(editor, { at, mode: 'highest' })\n        const nudge = 0\n\n        if (!voids && voidMatch) {\n          const [voidNode, voidPath] = voidMatch\n\n          if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n            let after = Editor.after(editor, voidPath)\n\n            if (!after) {\n              const text = { text: '' }\n              const afterPath = Path.next(voidPath)\n              Transforms.insertNodes(editor, text, { at: afterPath, voids })\n              after = Editor.point(editor, afterPath)!\n            }\n\n            at = after\n            always = true\n          }\n\n          const siblingHeight = at.path.length - voidPath.length\n          height = siblingHeight + 1\n          always = true\n        }\n\n        afterRef = Editor.pointRef(editor, at)\n        const depth = at.path.length - height\n        const [, highestPath] = highest\n        const lowestPath = at.path.slice(0, depth)\n        let position = height === 0 ? at.offset : at.path[depth] + nudge\n\n        for (const [node, path] of Editor.levels(editor, {\n          at: lowestPath,\n          reverse: true,\n          voids,\n        })) {\n          let split = false\n\n          if (\n            path.length < highestPath.length ||\n            path.length === 0 ||\n            (!voids && Editor.isVoid(editor, node))\n          ) {\n            break\n          }\n\n          const point = beforeRef.current!\n          const isEnd = Editor.isEnd(editor, point, path)\n\n          if (always || !beforeRef || !Editor.isEdge(editor, point, path)) {\n            split = true\n            const properties = Node.extractProps(node)\n            editor.apply({\n              type: 'split_node',\n              path,\n              position,\n              properties,\n            })\n          }\n\n          position = path[path.length - 1] + (split || isEnd ? 1 : 0)\n        }\n\n        if (options.at == null) {\n          const point = afterRef.current || Editor.end(editor, [])\n          Transforms.select(editor, point)\n        }\n      } finally {\n        beforeRef.unref()\n        afterRef?.unref()\n      }\n    })\n  },\n\n  /**\n   * Unset properties on the nodes at a location.\n   */\n\n  unsetNodes<T extends Node>(\n    editor: Editor,\n    props: string | string[],\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    if (!Array.isArray(props)) {\n      props = [props]\n    }\n\n    const obj = {}\n\n    for (const key of props) {\n      obj[key] = null\n    }\n\n    Transforms.setNodes(editor, obj, options)\n  },\n\n  /**\n   * Unwrap the nodes at a location from a parent node, splitting the parent if\n   * necessary to ensure that only the content in the range is unwrapped.\n   */\n\n  unwrapNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      const rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(\n        matches,\n        ([, p]) => Editor.pathRef(editor, p)\n        // unwrapNode will call liftNode which does not support splitting the node when nested.\n        // If we do not reverse the order and call it from top to the bottom, it will remove all blocks\n        // that wrap target node. So we reverse the order.\n      ).reverse()\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const [node] = Editor.node(editor, path)\n        let range = Editor.range(editor, path)\n\n        if (split && rangeRef) {\n          range = Range.intersection(rangeRef.current!, range)!\n        }\n\n        Transforms.liftNodes(editor, {\n          at: range,\n          match: n => Element.isAncestor(node) && node.children.includes(n),\n          voids,\n        })\n      }\n\n      if (rangeRef) {\n        rangeRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Wrap the nodes at a location in a new container node, splitting the edges\n   * of the range first to ensure that only the content in the range is wrapped.\n   */\n\n  wrapNodes<T extends Node>(\n    editor: Editor,\n    element: Element,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: MaximizeMode\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { match, at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          match = matchPath(editor, at)\n        } else if (editor.isInline(element)) {\n          match = n => Editor.isInline(editor, n) || Text.isText(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (split && Range.isRange(at)) {\n        const [start, end] = Range.edges(at)\n        const rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward',\n        })\n        Transforms.splitNodes(editor, { at: end, match, voids })\n        Transforms.splitNodes(editor, { at: start, match, voids })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      const roots = Array.from(\n        Editor.nodes(editor, {\n          at,\n          match: editor.isInline(element)\n            ? n => Editor.isBlock(editor, n)\n            : n => Editor.isEditor(n),\n          mode: 'lowest',\n          voids,\n        })\n      )\n\n      for (const [, rootPath] of roots) {\n        const a = Range.isRange(at)\n          ? Range.intersection(at, Editor.range(editor, rootPath))\n          : at\n\n        if (!a) {\n          continue\n        }\n\n        const matches = Array.from(\n          Editor.nodes(editor, { at: a, match, mode, voids })\n        )\n\n        if (matches.length > 0) {\n          const [first] = matches\n          const last = matches[matches.length - 1]\n          const [, firstPath] = first\n          const [, lastPath] = last\n\n          if (firstPath.length === 0 && lastPath.length === 0) {\n            // if there's no matching parent - usually means the node is an editor - don't do anything\n            continue\n          }\n\n          const commonPath = Path.equals(firstPath, lastPath)\n            ? Path.parent(firstPath)\n            : Path.common(firstPath, lastPath)\n\n          const range = Editor.range(editor, firstPath, lastPath)\n          const commonNodeEntry = Editor.node(editor, commonPath)\n          const [commonNode] = commonNodeEntry\n          const depth = commonPath.length + 1\n          const wrapperPath = Path.next(lastPath.slice(0, depth))\n          const wrapper = { ...element, children: [] }\n          Transforms.insertNodes(editor, wrapper, { at: wrapperPath, voids })\n\n          Transforms.moveNodes(editor, {\n            at: range,\n            match: n =>\n              Element.isAncestor(commonNode) && commonNode.children.includes(n),\n            to: wrapperPath.concat(0),\n            voids,\n          })\n        }\n      }\n    })\n  },\n}\n\nconst hasSingleChildNest = (editor: Editor, node: Node): boolean => {\n  if (Element.isElement(node)) {\n    const element = node as Element\n    if (Editor.isVoid(editor, node)) {\n      return true\n    } else if (element.children.length === 1) {\n      return hasSingleChildNest(editor, element.children[0])\n    } else {\n      return false\n    }\n  } else if (Editor.isEditor(node)) {\n    return false\n  } else {\n    return true\n  }\n}\n\n/**\n * Convert a range into a point by deleting it's content.\n */\n\nconst deleteRange = (editor: Editor, range: Range): Point | null => {\n  if (Range.isCollapsed(range)) {\n    return range.anchor\n  } else {\n    const [, end] = Range.edges(range)\n    const pointRef = Editor.pointRef(editor, end)\n    Transforms.delete(editor, { at: range })\n    return pointRef.unref()\n  }\n}\n\nconst matchPath = (editor: Editor, path: Path): ((node: Node) => boolean) => {\n  const [node] = Editor.node(editor, path)\n  return n => n === node\n}\n","import { Editor, Location, Point, Range, Scrubber, Transforms } from '..'\nimport { SelectionEdge, MoveUnit } from '../interfaces/types'\n\nexport interface SelectionCollapseOptions {\n  edge?: SelectionEdge\n}\n\nexport interface SelectionMoveOptions {\n  distance?: number\n  unit?: MoveUnit\n  reverse?: boolean\n  edge?: SelectionEdge\n}\n\nexport interface SelectionSetPointOptions {\n  edge?: SelectionEdge\n}\n\nexport interface SelectionTransforms {\n  collapse: (editor: Editor, options?: SelectionCollapseOptions) => void\n  deselect: (editor: Editor) => void\n  move: (editor: Editor, options?: SelectionMoveOptions) => void\n  select: (editor: Editor, target: Location) => void\n  setPoint: (\n    editor: Editor,\n    props: Partial<Point>,\n    options?: SelectionSetPointOptions\n  ) => void\n  setSelection: (editor: Editor, props: Partial<Range>) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const SelectionTransforms: SelectionTransforms = {\n  /**\n   * Collapse the selection.\n   */\n\n  collapse(editor: Editor, options: SelectionCollapseOptions = {}): void {\n    const { edge = 'anchor' } = options\n    const { selection } = editor\n\n    if (!selection) {\n      return\n    } else if (edge === 'anchor') {\n      Transforms.select(editor, selection.anchor)\n    } else if (edge === 'focus') {\n      Transforms.select(editor, selection.focus)\n    } else if (edge === 'start') {\n      const [start] = Range.edges(selection)\n      Transforms.select(editor, start)\n    } else if (edge === 'end') {\n      const [, end] = Range.edges(selection)\n      Transforms.select(editor, end)\n    }\n  },\n\n  /**\n   * Unset the selection.\n   */\n\n  deselect(editor: Editor): void {\n    const { selection } = editor\n\n    if (selection) {\n      editor.apply({\n        type: 'set_selection',\n        properties: selection,\n        newProperties: null,\n      })\n    }\n  },\n\n  /**\n   * Move the selection's point forward or backward.\n   */\n\n  move(editor: Editor, options: SelectionMoveOptions = {}): void {\n    const { selection } = editor\n    const { distance = 1, unit = 'character', reverse = false } = options\n    let { edge = null } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const opts = { distance, unit }\n    const props: Partial<Range> = {}\n\n    if (edge == null || edge === 'anchor') {\n      const point = reverse\n        ? Editor.before(editor, anchor, opts)\n        : Editor.after(editor, anchor, opts)\n\n      if (point) {\n        props.anchor = point\n      }\n    }\n\n    if (edge == null || edge === 'focus') {\n      const point = reverse\n        ? Editor.before(editor, focus, opts)\n        : Editor.after(editor, focus, opts)\n\n      if (point) {\n        props.focus = point\n      }\n    }\n\n    Transforms.setSelection(editor, props)\n  },\n\n  /**\n   * Set the selection to a new value.\n   */\n\n  select(editor: Editor, target: Location): void {\n    const { selection } = editor\n    target = Editor.range(editor, target)\n\n    if (selection) {\n      Transforms.setSelection(editor, target)\n      return\n    }\n\n    if (!Range.isRange(target)) {\n      throw new Error(\n        `When setting the selection and the current selection is \\`null\\` you must provide at least an \\`anchor\\` and \\`focus\\`, but you passed: ${Scrubber.stringify(\n          target\n        )}`\n      )\n    }\n\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: target,\n    })\n  },\n\n  /**\n   * Set new properties on one of the selection's points.\n   */\n\n  setPoint(\n    editor: Editor,\n    props: Partial<Point>,\n    options: SelectionSetPointOptions = {}\n  ): void {\n    const { selection } = editor\n    let { edge = 'both' } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const point = edge === 'anchor' ? anchor : focus\n\n    Transforms.setSelection(editor, {\n      [edge === 'anchor' ? 'anchor' : 'focus']: { ...point, ...props },\n    })\n  },\n\n  /**\n   * Set new properties on the selection.\n   */\n\n  setSelection(editor: Editor, props: Partial<Range>): void {\n    const { selection } = editor\n    const oldProps: Partial<Range> | null = {}\n    const newProps: Partial<Range> = {}\n\n    if (!selection) {\n      return\n    }\n\n    for (const k in props) {\n      if (\n        (k === 'anchor' &&\n          props.anchor != null &&\n          !Point.equals(props.anchor, selection.anchor)) ||\n        (k === 'focus' &&\n          props.focus != null &&\n          !Point.equals(props.focus, selection.focus)) ||\n        (k !== 'anchor' && k !== 'focus' && props[k] !== selection[k])\n      ) {\n        oldProps[k] = selection[k]\n        newProps[k] = props[k]\n      }\n    }\n\n    if (Object.keys(oldProps).length > 0) {\n      editor.apply({\n        type: 'set_selection',\n        properties: oldProps,\n        newProperties: newProps,\n      })\n    }\n  },\n}\n","import {\n  Editor,\n  Element,\n  Location,\n  Node,\n  NodeEntry,\n  Path,\n  Text,\n  Point,\n  Range,\n  Transforms,\n} from '..'\nimport { TextUnit } from '../interfaces/types'\n\nexport interface TextDeleteOptions {\n  at?: Location\n  distance?: number\n  unit?: TextUnit\n  reverse?: boolean\n  hanging?: boolean\n  voids?: boolean\n}\n\nexport interface TextInsertFragmentOptions {\n  at?: Location\n  hanging?: boolean\n  voids?: boolean\n}\n\nexport interface TextInsertTextOptions {\n  at?: Location\n  voids?: boolean\n}\n\nexport interface TextTransforms {\n  delete: (editor: Editor, options?: TextDeleteOptions) => void\n  insertFragment: (\n    editor: Editor,\n    fragment: Node[],\n    options?: TextInsertFragmentOptions\n  ) => void\n  insertText: (\n    editor: Editor,\n    text: string,\n    options?: TextInsertTextOptions\n  ) => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const TextTransforms: TextTransforms = {\n  /**\n   * Delete content in the editor.\n   */\n\n  delete(editor: Editor, options: TextDeleteOptions = {}): void {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        reverse = false,\n        unit = 'character',\n        distance = 1,\n        voids = false,\n      } = options\n      let { at = editor.selection, hanging = false } = options\n\n      if (!at) {\n        return\n      }\n\n      let isCollapsed = false\n      if (Range.isRange(at) && Range.isCollapsed(at)) {\n        isCollapsed = true\n        at = at.anchor\n      }\n\n      if (Point.isPoint(at)) {\n        const furthestVoid = Editor.void(editor, { at, mode: 'highest' })\n\n        if (!voids && furthestVoid) {\n          const [, voidPath] = furthestVoid\n          at = voidPath\n        } else {\n          const opts = { unit, distance }\n          const target = reverse\n            ? Editor.before(editor, at, opts) || Editor.start(editor, [])\n            : Editor.after(editor, at, opts) || Editor.end(editor, [])\n          at = { anchor: at, focus: target }\n          hanging = true\n        }\n      }\n\n      if (Path.isPath(at)) {\n        Transforms.removeNodes(editor, { at, voids })\n        return\n      }\n\n      if (Range.isCollapsed(at)) {\n        return\n      }\n\n      if (!hanging) {\n        const [, end] = Range.edges(at)\n        const endOfDoc = Editor.end(editor, [])\n\n        if (!Point.equals(end, endOfDoc)) {\n          at = Editor.unhangRange(editor, at, { voids })\n        }\n      }\n\n      let [start, end] = Range.edges(at)\n      const startBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: start,\n        voids,\n      })\n      const endBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: end,\n        voids,\n      })\n      const isAcrossBlocks =\n        startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1])\n      const isSingleText = Path.equals(start.path, end.path)\n      const startVoid = voids\n        ? null\n        : Editor.void(editor, { at: start, mode: 'highest' })\n      const endVoid = voids\n        ? null\n        : Editor.void(editor, { at: end, mode: 'highest' })\n\n      // If the start or end points are inside an inline void, nudge them out.\n      if (startVoid) {\n        const before = Editor.before(editor, start)\n\n        if (\n          before &&\n          startBlock &&\n          Path.isAncestor(startBlock[1], before.path)\n        ) {\n          start = before\n        }\n      }\n\n      if (endVoid) {\n        const after = Editor.after(editor, end)\n\n        if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n          end = after\n        }\n      }\n\n      // Get the highest nodes that are completely inside the range, as well as\n      // the start and end nodes.\n      const matches: NodeEntry[] = []\n      let lastPath: Path | undefined\n\n      for (const entry of Editor.nodes(editor, { at, voids })) {\n        const [node, path] = entry\n\n        if (lastPath && Path.compare(path, lastPath) === 0) {\n          continue\n        }\n\n        if (\n          (!voids && Editor.isVoid(editor, node)) ||\n          (!Path.isCommon(path, start.path) && !Path.isCommon(path, end.path))\n        ) {\n          matches.push(entry)\n          lastPath = path\n        }\n      }\n\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n      const startRef = Editor.pointRef(editor, start)\n      const endRef = Editor.pointRef(editor, end)\n\n      let removedText = ''\n\n      if (!isSingleText && !startVoid) {\n        const point = startRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const { offset } = start\n        const text = node.text.slice(offset)\n        if (text.length > 0) {\n          editor.apply({ type: 'remove_text', path, offset, text })\n          removedText = text\n        }\n      }\n\n      pathRefs\n        .reverse()\n        .map(r => r.unref())\n        .filter((r): r is Path => r !== null)\n        .forEach(p => Transforms.removeNodes(editor, { at: p, voids }))\n\n      if (!endVoid) {\n        const point = endRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const offset = isSingleText ? start.offset : 0\n        const text = node.text.slice(offset, end.offset)\n        if (text.length > 0) {\n          editor.apply({ type: 'remove_text', path, offset, text })\n          removedText = text\n        }\n      }\n\n      if (\n        !isSingleText &&\n        isAcrossBlocks &&\n        endRef.current &&\n        startRef.current\n      ) {\n        Transforms.mergeNodes(editor, {\n          at: endRef.current,\n          hanging: true,\n          voids,\n        })\n      }\n\n      // For Thai script, deleting N character(s) backward should delete\n      // N code point(s) instead of an entire grapheme cluster.\n      // Therefore, the remaining code points should be inserted back.\n      if (\n        isCollapsed &&\n        reverse &&\n        unit === 'character' &&\n        removedText.length > 1 &&\n        removedText.match(/[\\u0E00-\\u0E7F]+/)\n      ) {\n        Transforms.insertText(\n          editor,\n          removedText.slice(0, removedText.length - distance)\n        )\n      }\n\n      const startUnref = startRef.unref()\n      const endUnref = endRef.unref()\n      const point = reverse ? startUnref || endUnref : endUnref || startUnref\n\n      if (options.at == null && point) {\n        Transforms.select(editor, point)\n      }\n    })\n  },\n\n  /**\n   * Insert a fragment at a specific location in the editor.\n   */\n\n  insertFragment(\n    editor: Editor,\n    fragment: Node[],\n    options: TextInsertFragmentOptions = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!fragment.length) {\n        return\n      }\n\n      if (!at) {\n        return\n      } else if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      } else if (Path.isPath(at)) {\n        at = Editor.start(editor, at)\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      // If the insert point is at the edge of an inline node, move it outside\n      // instead since it will need to be split otherwise.\n      const inlineElementMatch = Editor.above(editor, {\n        at,\n        match: n => Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (inlineElementMatch) {\n        const [, inlinePath] = inlineElementMatch\n\n        if (Editor.isEnd(editor, at, inlinePath)) {\n          const after = Editor.after(editor, inlinePath)!\n          at = after\n        } else if (Editor.isStart(editor, at, inlinePath)) {\n          const before = Editor.before(editor, inlinePath)!\n          at = before\n        }\n      }\n\n      const blockMatch = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at,\n        voids,\n      })!\n      const [, blockPath] = blockMatch\n      const isBlockStart = Editor.isStart(editor, at, blockPath)\n      const isBlockEnd = Editor.isEnd(editor, at, blockPath)\n      const isBlockEmpty = isBlockStart && isBlockEnd\n      const mergeStart = !isBlockStart || (isBlockStart && isBlockEnd)\n      const mergeEnd = !isBlockEnd\n      const [, firstPath] = Node.first({ children: fragment }, [])\n      const [, lastPath] = Node.last({ children: fragment }, [])\n\n      const matches: NodeEntry[] = []\n      const matcher = ([n, p]: NodeEntry) => {\n        const isRoot = p.length === 0\n        if (isRoot) {\n          return false\n        }\n\n        if (isBlockEmpty) {\n          return true\n        }\n\n        if (\n          mergeStart &&\n          Path.isAncestor(p, firstPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        if (\n          mergeEnd &&\n          Path.isAncestor(p, lastPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        return true\n      }\n\n      for (const entry of Node.nodes(\n        { children: fragment },\n        { pass: matcher }\n      )) {\n        if (matcher(entry)) {\n          matches.push(entry)\n        }\n      }\n\n      const starts = []\n      const middles = []\n      const ends = []\n      let starting = true\n      let hasBlocks = false\n\n      for (const [node] of matches) {\n        if (Element.isElement(node) && !editor.isInline(node)) {\n          starting = false\n          hasBlocks = true\n          middles.push(node)\n        } else if (starting) {\n          starts.push(node)\n        } else {\n          ends.push(node)\n        }\n      }\n\n      const [inlineMatch] = Editor.nodes(editor, {\n        at,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })!\n\n      const [, inlinePath] = inlineMatch\n      const isInlineStart = Editor.isStart(editor, at, inlinePath)\n      const isInlineEnd = Editor.isEnd(editor, at, inlinePath)\n\n      const middleRef = Editor.pathRef(\n        editor,\n        isBlockEnd && !ends.length ? Path.next(blockPath) : blockPath\n      )\n\n      const endRef = Editor.pathRef(\n        editor,\n        isInlineEnd ? Path.next(inlinePath) : inlinePath\n      )\n\n      Transforms.splitNodes(editor, {\n        at,\n        match: n =>\n          hasBlocks\n            ? Editor.isBlock(editor, n)\n            : Text.isText(n) || Editor.isInline(editor, n),\n        mode: hasBlocks ? 'lowest' : 'highest',\n        always:\n          hasBlocks &&\n          (!isBlockStart || starts.length > 0) &&\n          (!isBlockEnd || ends.length > 0),\n        voids,\n      })\n\n      const startRef = Editor.pathRef(\n        editor,\n        !isInlineStart || (isInlineStart && isInlineEnd)\n          ? Path.next(inlinePath)\n          : inlinePath\n      )\n\n      Transforms.insertNodes(editor, starts, {\n        at: startRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (isBlockEmpty && !starts.length && middles.length && !ends.length) {\n        Transforms.delete(editor, { at: blockPath, voids })\n      }\n\n      Transforms.insertNodes(editor, middles, {\n        at: middleRef.current!,\n        match: n => Editor.isBlock(editor, n),\n        mode: 'lowest',\n        voids,\n      })\n\n      Transforms.insertNodes(editor, ends, {\n        at: endRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (!options.at) {\n        let path\n\n        if (ends.length > 0 && endRef.current) {\n          path = Path.previous(endRef.current)\n        } else if (middles.length > 0 && middleRef.current) {\n          path = Path.previous(middleRef.current)\n        } else if (startRef.current) {\n          path = Path.previous(startRef.current)\n        }\n\n        if (path) {\n          const end = Editor.end(editor, path)\n          Transforms.select(editor, end)\n        }\n      }\n\n      startRef.unref()\n      middleRef.unref()\n      endRef.unref()\n    })\n  },\n\n  /**\n   * Insert a string of text in the Editor.\n   */\n\n  insertText(\n    editor: Editor,\n    text: string,\n    options: TextInsertTextOptions = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const end = Range.end(at)\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n          const start = Range.start(at)\n          const startRef = Editor.pointRef(editor, start)\n          const endRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at, voids })\n          const startPoint = startRef.unref()\n          const endPoint = endRef.unref()\n\n          at = startPoint || endPoint!\n          Transforms.setSelection(editor, { anchor: at, focus: at })\n        }\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      const { path, offset } = at\n      if (text.length > 0)\n        editor.apply({ type: 'insert_text', path, offset, text })\n    })\n  },\n}\n","import { GeneralTransforms } from './general'\nimport { NodeTransforms } from './node'\nimport { SelectionTransforms } from './selection'\nimport { TextTransforms } from './text'\n\nexport const Transforms: GeneralTransforms &\n  NodeTransforms &\n  SelectionTransforms &\n  TextTransforms = {\n  ...GeneralTransforms,\n  ...NodeTransforms,\n  ...SelectionTransforms,\n  ...TextTransforms,\n}\n","// Compute what scrolling needs to be done on required scrolling boxes for target to be in view\n\n// The type names here are named after the spec to make it easier to find more information around what they mean:\n// To reduce churn and reduce things that need be maintained things from the official TS DOM library is used here\n// https://drafts.csswg.org/cssom-view/\n\n// For a definition on what is \"block flow direction\" exactly, check this: https://drafts.csswg.org/css-writing-modes-4/#block-flow-direction\n\n// add support for visualViewport object currently implemented in chrome\ninterface visualViewport {\n  height: number\n  width: number\n}\n\ntype ScrollLogicalPosition = 'start' | 'center' | 'end' | 'nearest'\n// This new option is tracked in this PR, which is the most likely candidate at the time: https://github.com/w3c/csswg-drafts/pull/1805\ntype ScrollMode = 'always' | 'if-needed'\n// New option that skips auto-scrolling all nodes with overflow: hidden set\n// See FF implementation: https://hg.mozilla.org/integration/fx-team/rev/c48c3ec05012#l7.18\ntype SkipOverflowHiddenElements = boolean\n\ninterface Options {\n  block?: ScrollLogicalPosition\n  inline?: ScrollLogicalPosition\n  scrollMode?: ScrollMode\n  boundary?: CustomScrollBoundary\n  skipOverflowHiddenElements?: SkipOverflowHiddenElements\n}\n\n// Custom behavior, not in any spec\ntype CustomScrollBoundaryCallback = (parent: Element) => boolean\ntype CustomScrollBoundary = Element | CustomScrollBoundaryCallback | null\ninterface CustomScrollAction {\n  el: Element\n  top: number\n  left: number\n}\n\n// @TODO better shadowdom test, 11 = document fragment\nfunction isElement(el: any): el is Element {\n  return typeof el === 'object' && el != null && el.nodeType === 1\n}\n\nfunction canOverflow(\n  overflow: string | null,\n  skipOverflowHiddenElements?: boolean\n) {\n  if (skipOverflowHiddenElements && overflow === 'hidden') {\n    return false\n  }\n\n  return overflow !== 'visible' && overflow !== 'clip'\n}\n\nfunction getFrameElement(el: Element) {\n  if (!el.ownerDocument || !el.ownerDocument.defaultView) {\n    return null\n  }\n\n  try {\n    return el.ownerDocument.defaultView.frameElement\n  } catch (e) {\n    return null\n  }\n}\n\nfunction isHiddenByFrame(el: Element): boolean {\n  const frame = getFrameElement(el)\n  if (!frame) {\n    return false\n  }\n\n  return (\n    frame.clientHeight < el.scrollHeight || frame.clientWidth < el.scrollWidth\n  )\n}\n\nfunction isScrollable(el: Element, skipOverflowHiddenElements?: boolean) {\n  if (el.clientHeight < el.scrollHeight || el.clientWidth < el.scrollWidth) {\n    const style = getComputedStyle(el, null)\n    return (\n      canOverflow(style.overflowY, skipOverflowHiddenElements) ||\n      canOverflow(style.overflowX, skipOverflowHiddenElements) ||\n      isHiddenByFrame(el)\n    )\n  }\n\n  return false\n}\n/**\n * Find out which edge to align against when logical scroll position is \"nearest\"\n * Interesting fact: \"nearest\" works similarily to \"if-needed\", if the element is fully visible it will not scroll it\n *\n * Legends:\n *      \n *  target    frame\n *      \n */\nfunction alignNearest(\n  scrollingEdgeStart: number,\n  scrollingEdgeEnd: number,\n  scrollingSize: number,\n  scrollingBorderStart: number,\n  scrollingBorderEnd: number,\n  elementEdgeStart: number,\n  elementEdgeEnd: number,\n  elementSize: number\n) {\n  /**\n   * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n   *\n   *          \n   *        \n   *            \n   *                    do nothing\n   *            \n   *        \n   *          \n   *\n   *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n   *\n   *         \n   *   \n   *                    do nothing\n   *   \n   *         \n   */\n  if (\n    (elementEdgeStart < scrollingEdgeStart &&\n      elementEdgeEnd > scrollingEdgeEnd) ||\n    (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)\n  ) {\n    return 0\n  }\n\n  /**\n   * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n   *\n   *          \n   *                 \n   *                         \n   *  from             to    \n   *\n   *                     \n   *\n   * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n   *\n   *                   \n   *                             \n   *  from         to      \n   *                           \n   *                 \n   *                         \n   *            \n   *          \n   *\n   * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n   *\n   *       from                 to\n   *                       \n   *                   \n   *                            \n   *                   \n   *                       \n   *\n   * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n   *\n   *       from                 to\n   *                       \n   *           \n   *                              \n   *           \n   *                       \n   */\n  if (\n    (elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n    (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)\n  ) {\n    return elementEdgeStart - scrollingEdgeStart - scrollingBorderStart\n  }\n\n  /**\n   * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n   *\n   *                     \n   *\n   *  from             to    \n   *                         \n   *                 \n   *          \n   *\n   * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n   *\n   *          \n   *            \n   *                         \n   *                 \n   *                           \n   *  from         to      \n   *                             \n   *                   \n   *\n   * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n   *\n   *           from                 to\n   *                           \n   *             \n   *                                \n   *             \n   *                           \n   *\n   * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n   *\n   *           from                 to\n   *                           \n   *                             \n   *                                \n   *                             \n   *                           \n   *\n   */\n  if (\n    (elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) ||\n    (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)\n  ) {\n    return elementEdgeEnd - scrollingEdgeEnd + scrollingBorderEnd\n  }\n\n  return 0\n}\n\nfunction getParentElement(element: Node): Element | null {\n  const parent = element.parentElement\n  if (parent == null) {\n    return (element.getRootNode() as ShadowRoot).host || null\n  }\n  return parent\n}\n\nexport default (target: Element, options: Options): CustomScrollAction[] => {\n  //TODO: remove this hack when microbundle will support typescript >= 4.0\n  const windowWithViewport = window as unknown as Window & {\n    visualViewport: visualViewport\n  }\n\n  const { scrollMode, block, inline, boundary, skipOverflowHiddenElements } =\n    options\n  // Allow using a callback to check the boundary\n  // The default behavior is to check if the current target matches the boundary element or not\n  // If undefined it'll check that target is never undefined (can happen as we recurse up the tree)\n  const checkBoundary =\n    typeof boundary === 'function' ? boundary : (node: any) => node !== boundary\n\n  if (!isElement(target)) {\n    throw new TypeError('Invalid target')\n  }\n\n  // Used to handle the top most element that can be scrolled\n  const scrollingElement = document.scrollingElement || document.documentElement\n\n  // Collect all the scrolling boxes, as defined in the spec: https://drafts.csswg.org/cssom-view/#scrolling-box\n  const frames: Element[] = []\n  let cursor: Element | null = target\n  while (isElement(cursor) && checkBoundary(cursor)) {\n    // Move cursor to parent\n    cursor = getParentElement(cursor)\n\n    // Stop when we reach the viewport\n    if (cursor === scrollingElement) {\n      frames.push(cursor)\n      break\n    }\n\n    // Skip document.body if it's not the scrollingElement and documentElement isn't independently scrollable\n    if (\n      cursor != null &&\n      cursor === document.body &&\n      isScrollable(cursor) &&\n      !isScrollable(document.documentElement)\n    ) {\n      continue\n    }\n\n    // Now we check if the element is scrollable, this code only runs if the loop haven't already hit the viewport or a custom boundary\n    if (cursor != null && isScrollable(cursor, skipOverflowHiddenElements)) {\n      frames.push(cursor)\n    }\n  }\n\n  // Support pinch-zooming properly, making sure elements scroll into the visual viewport\n  // Browsers that don't support visualViewport will report the layout viewport dimensions on document.documentElement.clientWidth/Height\n  // and viewport dimensions on window.innerWidth/Height\n  // https://www.quirksmode.org/mobile/viewports2.html\n  // https://bokand.github.io/viewport/index.html\n  const viewportWidth = windowWithViewport.visualViewport\n    ? windowWithViewport.visualViewport.width\n    : innerWidth\n  const viewportHeight = windowWithViewport.visualViewport\n    ? windowWithViewport.visualViewport.height\n    : innerHeight\n\n  // Newer browsers supports scroll[X|Y], page[X|Y]Offset is\n  const viewportX = window.scrollX || pageXOffset\n  const viewportY = window.scrollY || pageYOffset\n\n  const {\n    height: targetHeight,\n    width: targetWidth,\n    top: targetTop,\n    right: targetRight,\n    bottom: targetBottom,\n    left: targetLeft,\n  } = target.getBoundingClientRect()\n\n  // These values mutate as we loop through and generate scroll coordinates\n  let targetBlock: number =\n    block === 'start' || block === 'nearest'\n      ? targetTop\n      : block === 'end'\n      ? targetBottom\n      : targetTop + targetHeight / 2 // block === 'center\n  let targetInline: number =\n    inline === 'center'\n      ? targetLeft + targetWidth / 2\n      : inline === 'end'\n      ? targetRight\n      : targetLeft // inline === 'start || inline === 'nearest\n\n  // Collect new scroll positions\n  const computations: CustomScrollAction[] = []\n  // In chrome there's no longer a difference between caching the `frames.length` to a var or not, so we don't in this case (size > speed anyways)\n  for (let index = 0; index < frames.length; index++) {\n    const frame = frames[index]\n\n    // @TODO add a shouldScroll hook here that allows userland code to take control\n\n    const { height, width, top, right, bottom, left } =\n      frame.getBoundingClientRect()\n\n    // If the element is already visible we can end it here\n    // @TODO targetBlock and targetInline should be taken into account to be compliant with https://github.com/w3c/csswg-drafts/pull/1805/files#diff-3c17f0e43c20f8ecf89419d49e7ef5e0R1333\n    if (\n      scrollMode === 'if-needed' &&\n      targetTop >= 0 &&\n      targetLeft >= 0 &&\n      targetBottom <= viewportHeight &&\n      targetRight <= viewportWidth &&\n      targetTop >= top &&\n      targetBottom <= bottom &&\n      targetLeft >= left &&\n      targetRight <= right\n    ) {\n      // Break the loop and return the computations for things that are not fully visible\n      return computations\n    }\n\n    const frameStyle = getComputedStyle(frame)\n    const borderLeft = parseInt(frameStyle.borderLeftWidth as string, 10)\n    const borderTop = parseInt(frameStyle.borderTopWidth as string, 10)\n    const borderRight = parseInt(frameStyle.borderRightWidth as string, 10)\n    const borderBottom = parseInt(frameStyle.borderBottomWidth as string, 10)\n\n    let blockScroll: number = 0\n    let inlineScroll: number = 0\n\n    // The property existance checks for offfset[Width|Height] is because only HTMLElement objects have them, but any Element might pass by here\n    // @TODO find out if the \"as HTMLElement\" overrides can be dropped\n    const scrollbarWidth =\n      'offsetWidth' in frame\n        ? (frame as HTMLElement).offsetWidth -\n          (frame as HTMLElement).clientWidth -\n          borderLeft -\n          borderRight\n        : 0\n    const scrollbarHeight =\n      'offsetHeight' in frame\n        ? (frame as HTMLElement).offsetHeight -\n          (frame as HTMLElement).clientHeight -\n          borderTop -\n          borderBottom\n        : 0\n\n    const scaleX =\n      'offsetWidth' in frame\n        ? (frame as HTMLElement).offsetWidth === 0\n          ? 0\n          : width / (frame as HTMLElement).offsetWidth\n        : 0\n    const scaleY =\n      'offsetHeight' in frame\n        ? (frame as HTMLElement).offsetHeight === 0\n          ? 0\n          : height / (frame as HTMLElement).offsetHeight\n        : 0\n\n    if (scrollingElement === frame) {\n      // Handle viewport logic (document.documentElement or document.body)\n\n      if (block === 'start') {\n        blockScroll = targetBlock\n      } else if (block === 'end') {\n        blockScroll = targetBlock - viewportHeight\n      } else if (block === 'nearest') {\n        blockScroll = alignNearest(\n          viewportY,\n          viewportY + viewportHeight,\n          viewportHeight,\n          borderTop,\n          borderBottom,\n          viewportY + targetBlock,\n          viewportY + targetBlock + targetHeight,\n          targetHeight\n        )\n      } else {\n        // block === 'center' is the default\n        blockScroll = targetBlock - viewportHeight / 2\n      }\n\n      if (inline === 'start') {\n        inlineScroll = targetInline\n      } else if (inline === 'center') {\n        inlineScroll = targetInline - viewportWidth / 2\n      } else if (inline === 'end') {\n        inlineScroll = targetInline - viewportWidth\n      } else {\n        // inline === 'nearest' is the default\n        inlineScroll = alignNearest(\n          viewportX,\n          viewportX + viewportWidth,\n          viewportWidth,\n          borderLeft,\n          borderRight,\n          viewportX + targetInline,\n          viewportX + targetInline + targetWidth,\n          targetWidth\n        )\n      }\n\n      // Apply scroll position offsets and ensure they are within bounds\n      // @TODO add more test cases to cover this 100%\n      blockScroll = Math.max(0, blockScroll + viewportY)\n      inlineScroll = Math.max(0, inlineScroll + viewportX)\n    } else {\n      // Handle each scrolling frame that might exist between the target and the viewport\n\n      if (block === 'start') {\n        blockScroll = targetBlock - top - borderTop\n      } else if (block === 'end') {\n        blockScroll = targetBlock - bottom + borderBottom + scrollbarHeight\n      } else if (block === 'nearest') {\n        blockScroll = alignNearest(\n          top,\n          bottom,\n          height,\n          borderTop,\n          borderBottom + scrollbarHeight,\n          targetBlock,\n          targetBlock + targetHeight,\n          targetHeight\n        )\n      } else {\n        // block === 'center' is the default\n        blockScroll = targetBlock - (top + height / 2) + scrollbarHeight / 2\n      }\n\n      if (inline === 'start') {\n        inlineScroll = targetInline - left - borderLeft\n      } else if (inline === 'center') {\n        inlineScroll = targetInline - (left + width / 2) + scrollbarWidth / 2\n      } else if (inline === 'end') {\n        inlineScroll = targetInline - right + borderRight + scrollbarWidth\n      } else {\n        // inline === 'nearest' is the default\n        inlineScroll = alignNearest(\n          left,\n          right,\n          width,\n          borderLeft,\n          borderRight + scrollbarWidth,\n          targetInline,\n          targetInline + targetWidth,\n          targetWidth\n        )\n      }\n\n      const { scrollLeft, scrollTop } = frame\n      // Ensure scroll coordinates are not out of bounds while applying scroll offsets\n      blockScroll = Math.max(\n        0,\n        Math.min(\n          scrollTop + blockScroll / scaleY,\n          frame.scrollHeight - height / scaleY + scrollbarHeight\n        )\n      )\n      inlineScroll = Math.max(\n        0,\n        Math.min(\n          scrollLeft + inlineScroll / scaleX,\n          frame.scrollWidth - width / scaleX + scrollbarWidth\n        )\n      )\n\n      // Cache the offset so that parent frames can scroll this into view correctly\n      targetBlock += scrollTop - blockScroll\n      targetInline += scrollLeft - inlineScroll\n    }\n\n    computations.push({ el: frame, top: blockScroll, left: inlineScroll })\n  }\n\n  return computations\n}\n","import compute from 'compute-scroll-into-view';\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n  if (isOptionsObject(options)) {\n    return options;\n  }\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\nfunction scrollIntoView(target, options) {\n  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(isTargetAttached ? compute(target, options) : []);\n  }\n  if (!isTargetAttached) {\n    return;\n  }\n  var computeOptions = getOptions(options);\n  return defaultBehavior(compute(target, computeOptions), computeOptions.behavior);\n}\nexport default scrollIntoView;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/**\n * An auto-incrementing identifier for keys.\n */\n\nlet n = 0\n\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\n\nexport class Key {\n  id: string\n\n  constructor() {\n    this.id = `${n++}`\n  }\n}\n","import { Ancestor, Editor, Node, Range, RangeRef, Text } from 'slate'\nimport { Action } from '../hooks/android-input-manager/android-input-manager'\nimport { TextDiff } from './diff-text'\nimport { Key } from './key'\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\n\nexport const NODE_TO_INDEX: WeakMap<Node, number> = new WeakMap()\nexport const NODE_TO_PARENT: WeakMap<Node, Ancestor> = new WeakMap()\n\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nexport const EDITOR_TO_WINDOW: WeakMap<Editor, Window> = new WeakMap()\nexport const EDITOR_TO_ELEMENT: WeakMap<Editor, HTMLElement> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER: WeakMap<Editor, string> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER_ELEMENT: WeakMap<\n  Editor,\n  HTMLElement\n> = new WeakMap()\nexport const ELEMENT_TO_NODE: WeakMap<HTMLElement, Node> = new WeakMap()\nexport const NODE_TO_ELEMENT: WeakMap<Node, HTMLElement> = new WeakMap()\nexport const NODE_TO_KEY: WeakMap<Node, Key> = new WeakMap()\nexport const EDITOR_TO_KEY_TO_ELEMENT: WeakMap<\n  Editor,\n  WeakMap<Key, HTMLElement>\n> = new WeakMap()\n\n/**\n * Weak maps for storing editor-related state.\n */\n\nexport const IS_READ_ONLY: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_FOCUSED: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_DRAGGING: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_CLICKING: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_COMPOSING: WeakMap<Editor, boolean> = new WeakMap()\n\nexport const EDITOR_TO_USER_SELECTION: WeakMap<\n  Editor,\n  RangeRef | null\n> = new WeakMap()\n\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\n\nexport const EDITOR_TO_ON_CHANGE = new WeakMap<Editor, () => void>()\n\n/**\n * Weak maps for saving pending state on composition stage.\n */\n\nexport const EDITOR_TO_SCHEDULE_FLUSH: WeakMap<\n  Editor,\n  () => void\n> = new WeakMap()\n\nexport const EDITOR_TO_PENDING_INSERTION_MARKS: WeakMap<\n  Editor,\n  Partial<Text> | null\n> = new WeakMap()\n\nexport const EDITOR_TO_USER_MARKS: WeakMap<\n  Editor,\n  Partial<Text> | null\n> = new WeakMap()\n\n/**\n * Android input handling specific weak-maps\n */\n\nexport const EDITOR_TO_PENDING_DIFFS: WeakMap<\n  Editor,\n  TextDiff[]\n> = new WeakMap()\n\nexport const EDITOR_TO_PENDING_ACTION: WeakMap<\n  Editor,\n  Action | null\n> = new WeakMap()\n\nexport const EDITOR_TO_PENDING_SELECTION: WeakMap<\n  Editor,\n  Range | null\n> = new WeakMap()\n\nexport const EDITOR_TO_FORCE_RENDER: WeakMap<Editor, () => void> = new WeakMap()\n\n/**\n * Symbols.\n */\n\nexport const PLACEHOLDER_SYMBOL = (Symbol('placeholder') as unknown) as string\nexport const MARK_PLACEHOLDER_SYMBOL = (Symbol(\n  'mark-placeholder'\n) as unknown) as string\n","/**\n * Types.\n */\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\nimport { ReactEditor } from '../plugin/react-editor'\n\nexport {\n  DOMNode,\n  DOMComment,\n  DOMElement,\n  DOMText,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n}\n\ndeclare global {\n  interface Window {\n    Selection: typeof Selection['constructor']\n    DataTransfer: typeof DataTransfer['constructor']\n    Node: typeof Node['constructor']\n  }\n}\n\nexport type DOMPoint = [Node, number]\n\n/**\n * Returns the host window of a DOM node\n */\n\nexport const getDefaultView = (value: any): Window | null => {\n  return (\n    (value && value.ownerDocument && value.ownerDocument.defaultView) || null\n  )\n}\n\n/**\n * Check if a DOM node is a comment node.\n */\n\nexport const isDOMComment = (value: any): value is DOMComment => {\n  return isDOMNode(value) && value.nodeType === 8\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMElement = (value: any): value is DOMElement => {\n  return isDOMNode(value) && value.nodeType === 1\n}\n\n/**\n * Check if a value is a DOM node.\n */\n\nexport const isDOMNode = (value: any): value is DOMNode => {\n  const window = getDefaultView(value)\n  return !!window && value instanceof window.Node\n}\n\n/**\n * Check if a value is a DOM selection.\n */\n\nexport const isDOMSelection = (value: any): value is DOMSelection => {\n  const window = value && value.anchorNode && getDefaultView(value.anchorNode)\n  return !!window && value instanceof window.Selection\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMText = (value: any): value is DOMText => {\n  return isDOMNode(value) && value.nodeType === 3\n}\n\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\n\nexport const isPlainTextOnlyPaste = (event: ClipboardEvent) => {\n  return (\n    event.clipboardData &&\n    event.clipboardData.getData('text/plain') !== '' &&\n    event.clipboardData.types.length === 1\n  )\n}\n\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\n\nexport const normalizeDOMPoint = (domPoint: DOMPoint): DOMPoint => {\n  let [node, offset] = domPoint\n\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    let isLast = offset === node.childNodes.length\n    let index = isLast ? offset - 1 : offset\n    ;[node, index] = getEditableChildAndIndex(\n      node,\n      index,\n      isLast ? 'backward' : 'forward'\n    )\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset\n\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      const i = isLast ? node.childNodes.length - 1 : 0\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward')\n    }\n\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0\n  }\n\n  // Return the node and offset.\n  return [node, offset]\n}\n\n/**\n * Determines wether the active element is nested within a shadowRoot\n */\n\nexport const hasShadowRoot = () => {\n  return !!(\n    window.document.activeElement && window.document.activeElement.shadowRoot\n  )\n}\n\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChildAndIndex = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): [DOMNode, number] => {\n  const { childNodes } = parent\n  let child = childNodes[index]\n  let i = index\n  let triedForward = false\n  let triedBackward = false\n\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (\n    isDOMComment(child) ||\n    (isDOMElement(child) && child.childNodes.length === 0) ||\n    (isDOMElement(child) && child.getAttribute('contenteditable') === 'false')\n  ) {\n    if (triedForward && triedBackward) {\n      break\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true\n      i = index - 1\n      direction = 'backward'\n      continue\n    }\n\n    if (i < 0) {\n      triedBackward = true\n      i = index + 1\n      direction = 'forward'\n      continue\n    }\n\n    child = childNodes[i]\n    index = i\n    i += direction === 'forward' ? 1 : -1\n  }\n\n  return [child, index]\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChild = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): DOMNode => {\n  const [child] = getEditableChildAndIndex(parent, index, direction)\n  return child\n}\n\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\n\nexport const getPlainText = (domNode: DOMNode) => {\n  let text = ''\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue\n  }\n\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode)\n    }\n\n    const display = getComputedStyle(domNode).getPropertyValue('display')\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n'\n    }\n  }\n\n  return text\n}\n\n/**\n * Get x-slate-fragment attribute from data-slate-fragment\n */\nconst catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m\nexport const getSlateFragmentAttribute = (\n  dataTransfer: DataTransfer\n): string | void => {\n  const htmlData = dataTransfer.getData('text/html')\n  const [, fragment] = htmlData.match(catchSlateFragment) || []\n  return fragment\n}\n\n/**\n * Get the x-slate-fragment attribute that exist in text/html data\n * and append it to the DataTransfer object\n */\nexport const getClipboardData = (dataTransfer: DataTransfer): DataTransfer => {\n  if (!dataTransfer.getData('application/x-slate-fragment')) {\n    const fragment = getSlateFragmentAttribute(dataTransfer)\n    if (fragment) {\n      const clipboardData = new DataTransfer()\n      dataTransfer.types.forEach(type => {\n        clipboardData.setData(type, dataTransfer.getData(type))\n      })\n      clipboardData.setData('application/x-slate-fragment', fragment)\n      return clipboardData\n    }\n  }\n  return dataTransfer\n}\n\n/**\n * Check whether a mutation originates from a editable element inside the editor.\n */\n\nexport const isTrackedMutation = (\n  editor: ReactEditor,\n  mutation: MutationRecord,\n  batch: MutationRecord[]\n): boolean => {\n  const { target } = mutation\n  if (isDOMElement(target) && target.matches('[contentEditable=\"false\"]')) {\n    return false\n  }\n\n  const { document } = ReactEditor.getWindow(editor)\n  if (document.contains(target)) {\n    return ReactEditor.hasDOMNode(editor, target, { editable: true })\n  }\n\n  const parentMutation = batch.find(({ addedNodes, removedNodes }) => {\n    for (const node of addedNodes) {\n      if (node === target || node.contains(target)) {\n        return true\n      }\n    }\n\n    for (const node of removedNodes) {\n      if (node === target || node.contains(target)) {\n        return true\n      }\n    }\n  })\n\n  if (!parentMutation || parentMutation === mutation) {\n    return false\n  }\n\n  // Target add/remove is tracked. Track the mutation if we track the parent mutation.\n  return isTrackedMutation(editor, parentMutation, batch)\n}\n","import React from 'react'\n\nexport const IS_REACT_VERSION_17_OR_ABOVE =\n  parseInt(React.version.split('.')[0], 10) >= 17\n\nexport const IS_IOS =\n  typeof navigator !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n  !window.MSStream\n\nexport const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent)\n\nexport const IS_ANDROID =\n  typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent)\n\nexport const IS_FIREFOX =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const IS_SAFARI =\n  typeof navigator !== 'undefined' &&\n  /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent)\n\n// \"modern\" Edge was released at 79.x\nexport const IS_EDGE_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])(?:\\.)/i.test(navigator.userAgent)\n\nexport const IS_CHROME =\n  typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent)\n\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nexport const IS_CHROME_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])(?:\\.)/i.test(navigator.userAgent)\n\n// Firefox did not support `beforeInput` until `v87`.\nexport const IS_FIREFOX_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])(?:\\.)).*/i.test(\n    navigator.userAgent\n  )\n\n// qq browser\nexport const IS_QQBROWSER =\n  typeof navigator !== 'undefined' && /.*QQBrowser/.test(navigator.userAgent)\n\n// UC mobile browser\nexport const IS_UC_MOBILE =\n  typeof navigator !== 'undefined' && /.*UCBrowser/.test(navigator.userAgent)\n\n// Wechat browser\nexport const IS_WECHATBROWSER =\n  typeof navigator !== 'undefined' && /.*Wechat/.test(navigator.userAgent)\n\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const CAN_USE_DOM = !!(\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n)\n\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nexport const HAS_BEFORE_INPUT_SUPPORT =\n  !IS_CHROME_LEGACY &&\n  !IS_EDGE_LEGACY &&\n  // globalThis is undefined in older browsers\n  typeof globalThis !== 'undefined' &&\n  globalThis.InputEvent &&\n  // @ts-ignore The `getTargetRanges` property isn't recognized.\n  typeof globalThis.InputEvent.prototype.getTargetRanges === 'function'\n","import {\n  BaseEditor,\n  Editor,\n  Node,\n  Path,\n  Point,\n  Range,\n  Scrubber,\n  Transforms,\n} from 'slate'\n\nimport { Key } from '../utils/key'\nimport {\n  EDITOR_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  NODE_TO_INDEX,\n  NODE_TO_KEY,\n  NODE_TO_PARENT,\n  EDITOR_TO_WINDOW,\n  EDITOR_TO_KEY_TO_ELEMENT,\n  IS_COMPOSING,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_PENDING_DIFFS,\n} from '../utils/weak-maps'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMPoint,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n  isDOMElement,\n  isDOMSelection,\n  normalizeDOMPoint,\n  hasShadowRoot,\n  DOMText,\n} from '../utils/dom'\nimport { IS_CHROME, IS_FIREFOX, IS_ANDROID } from '../utils/environment'\n\n/**\n * A React and DOM-specific version of the `Editor` interface.\n */\n\nexport interface ReactEditor extends BaseEditor {\n  insertData: (data: DataTransfer) => void\n  insertFragmentData: (data: DataTransfer) => boolean\n  insertTextData: (data: DataTransfer) => boolean\n  setFragmentData: (\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ) => void\n  hasRange: (editor: ReactEditor, range: Range) => boolean\n}\n\n// eslint-disable-next-line no-redeclare\nexport const ReactEditor = {\n  /**\n   * Check if the user is currently composing inside the editor.\n   */\n\n  isComposing(editor: ReactEditor): boolean {\n    return !!IS_COMPOSING.get(editor)\n  },\n\n  /**\n   * Return the host window of the current editor.\n   */\n\n  getWindow(editor: ReactEditor): Window {\n    const window = EDITOR_TO_WINDOW.get(editor)\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor')\n    }\n    return window\n  },\n\n  /**\n   * Find a key for a Slate node.\n   */\n\n  findKey(editor: ReactEditor, node: Node): Key {\n    let key = NODE_TO_KEY.get(node)\n\n    if (!key) {\n      key = new Key()\n      NODE_TO_KEY.set(node, key)\n    }\n\n    return key\n  },\n\n  /**\n   * Find the path of Slate node.\n   */\n\n  findPath(editor: ReactEditor, node: Node): Path {\n    const path: Path = []\n    let child = node\n\n    while (true) {\n      const parent = NODE_TO_PARENT.get(child)\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path\n        } else {\n          break\n        }\n      }\n\n      const i = NODE_TO_INDEX.get(child)\n\n      if (i == null) {\n        break\n      }\n\n      path.unshift(i)\n      child = parent\n    }\n\n    throw new Error(\n      `Unable to find the path for Slate node: ${Scrubber.stringify(node)}`\n    )\n  },\n\n  /**\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\n   */\n\n  findDocumentOrShadowRoot(editor: ReactEditor): Document | ShadowRoot {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = el.getRootNode()\n\n    if (\n      (root instanceof Document || root instanceof ShadowRoot) &&\n      root.getSelection != null\n    ) {\n      return root\n    }\n\n    return el.ownerDocument\n  },\n\n  /**\n   * Check if the editor is focused.\n   */\n\n  isFocused(editor: ReactEditor): boolean {\n    return !!IS_FOCUSED.get(editor)\n  },\n\n  /**\n   * Check if the editor is in read-only mode.\n   */\n\n  isReadOnly(editor: ReactEditor): boolean {\n    return !!IS_READ_ONLY.get(editor)\n  },\n\n  /**\n   * Blur the editor.\n   */\n\n  blur(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, false)\n\n    if (root.activeElement === el) {\n      el.blur()\n    }\n  },\n\n  /**\n   * Focus the editor.\n   */\n\n  focus(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, true)\n\n    if (root.activeElement !== el) {\n      el.focus({ preventScroll: true })\n    }\n  },\n\n  /**\n   * Deselect the editor.\n   */\n\n  deselect(editor: ReactEditor): void {\n    const { selection } = editor\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = root.getSelection()\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges()\n    }\n\n    if (selection) {\n      Transforms.deselect(editor)\n    }\n  },\n\n  /**\n   * Check if a DOM node is within the editor.\n   */\n\n  hasDOMNode(\n    editor: ReactEditor,\n    target: DOMNode,\n    options: { editable?: boolean } = {}\n  ): boolean {\n    const { editable = false } = options\n    const editorEl = ReactEditor.toDOMNode(editor, editor)\n    let targetEl\n\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = (isDOMElement(target)\n        ? target\n        : target.parentElement) as HTMLElement\n    } catch (err) {\n      if (\n        !err.message.includes('Permission denied to access property \"nodeType\"')\n      ) {\n        throw err\n      }\n    }\n\n    if (!targetEl) {\n      return false\n    }\n\n    return (\n      targetEl.closest(`[data-slate-editor]`) === editorEl &&\n      (!editable || targetEl.isContentEditable\n        ? true\n        : (typeof targetEl.isContentEditable === 'boolean' && // isContentEditable exists only on HTMLElement, and on other nodes it will be undefined\n            // this is the core logic that lets you know you got the right editor.selection instead of null when editor is contenteditable=\"false\"(readOnly)\n            targetEl.closest('[contenteditable=\"false\"]') === editorEl) ||\n          !!targetEl.getAttribute('data-slate-zero-width'))\n    )\n  },\n\n  /**\n   * Insert data from a `DataTransfer` into the editor.\n   */\n\n  insertData(editor: ReactEditor, data: DataTransfer): void {\n    editor.insertData(data)\n  },\n\n  /**\n   * Insert fragment data from a `DataTransfer` into the editor.\n   */\n\n  insertFragmentData(editor: ReactEditor, data: DataTransfer): boolean {\n    return editor.insertFragmentData(data)\n  },\n\n  /**\n   * Insert text data from a `DataTransfer` into the editor.\n   */\n\n  insertTextData(editor: ReactEditor, data: DataTransfer): boolean {\n    return editor.insertTextData(data)\n  },\n\n  /**\n   * Sets data from the currently selected fragment on a `DataTransfer`.\n   */\n\n  setFragmentData(\n    editor: ReactEditor,\n    data: DataTransfer,\n    originEvent?: 'drag' | 'copy' | 'cut'\n  ): void {\n    editor.setFragmentData(data, originEvent)\n  },\n\n  /**\n   * Find the native DOM element from a Slate node.\n   */\n\n  toDOMNode(editor: ReactEditor, node: Node): HTMLElement {\n    const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n    const domNode = Editor.isEditor(node)\n      ? EDITOR_TO_ELEMENT.get(editor)\n      : KEY_TO_ELEMENT?.get(ReactEditor.findKey(editor, node))\n\n    if (!domNode) {\n      throw new Error(\n        `Cannot resolve a DOM node from Slate node: ${Scrubber.stringify(node)}`\n      )\n    }\n\n    return domNode\n  },\n\n  /**\n   * Find a native DOM selection point from a Slate point.\n   */\n\n  toDOMPoint(editor: ReactEditor, point: Point): DOMPoint {\n    const [node] = Editor.node(editor, point.path)\n    const el = ReactEditor.toDOMNode(editor, node)\n    let domPoint: DOMPoint | undefined\n\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, { at: point })) {\n      point = { path: point.path, offset: 0 }\n    }\n\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    const selector = `[data-slate-string], [data-slate-zero-width]`\n    const texts = Array.from(el.querySelectorAll(selector))\n    let start = 0\n\n    for (let i = 0; i < texts.length; i++) {\n      const text = texts[i]\n      const domNode = text.childNodes[0] as HTMLElement\n\n      if (domNode == null || domNode.textContent == null) {\n        continue\n      }\n\n      const { length } = domNode.textContent\n      const attr = text.getAttribute('data-slate-length')\n      const trueLength = attr == null ? length : parseInt(attr, 10)\n      const end = start + trueLength\n\n      // Prefer putting the selection inside the mark placeholder to ensure\n      // composed text is displayed with the correct marks.\n      const nextText = texts[i + 1]\n      if (\n        point.offset === end &&\n        nextText?.hasAttribute('data-slate-mark-placeholder')\n      ) {\n        const domText = nextText.childNodes[0]\n\n        domPoint = [\n          // COMPAT: If we don't explicity set the dom point to be on the actual\n          // dom text element, chrome will put the selection behind the actual dom\n          // text element, causing domRange.getBoundingClientRect() calls on a collapsed\n          // selection to return incorrect zero values (https://bugs.chromium.org/p/chromium/issues/detail?id=435438)\n          // which will cause issues when scrolling to it.\n          domText instanceof DOMText ? domText : nextText,\n          nextText.textContent?.startsWith('\\uFEFF') ? 1 : 0,\n        ]\n        break\n      }\n\n      if (point.offset <= end) {\n        const offset = Math.min(length, Math.max(0, point.offset - start))\n        domPoint = [domNode, offset]\n        break\n      }\n\n      start = end\n    }\n\n    if (!domPoint) {\n      throw new Error(\n        `Cannot resolve a DOM point from Slate point: ${Scrubber.stringify(\n          point\n        )}`\n      )\n    }\n\n    return domPoint\n  },\n\n  /**\n   * Find a native DOM range from a Slate `range`.\n   *\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\n   *\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\n   */\n\n  toDOMRange(editor: ReactEditor, range: Range): DOMRange {\n    const { anchor, focus } = range\n    const isBackward = Range.isBackward(range)\n    const domAnchor = ReactEditor.toDOMPoint(editor, anchor)\n    const domFocus = Range.isCollapsed(range)\n      ? domAnchor\n      : ReactEditor.toDOMPoint(editor, focus)\n\n    const window = ReactEditor.getWindow(editor)\n    const domRange = window.document.createRange()\n    const [startNode, startOffset] = isBackward ? domFocus : domAnchor\n    const [endNode, endOffset] = isBackward ? domAnchor : domFocus\n\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    const startEl = (isDOMElement(startNode)\n      ? startNode\n      : startNode.parentElement) as HTMLElement\n    const isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width')\n    const endEl = (isDOMElement(endNode)\n      ? endNode\n      : endNode.parentElement) as HTMLElement\n    const isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width')\n\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset)\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset)\n    return domRange\n  },\n\n  /**\n   * Find a Slate node from a native DOM `element`.\n   */\n\n  toSlateNode(editor: ReactEditor, domNode: DOMNode): Node {\n    let domEl = isDOMElement(domNode) ? domNode : domNode.parentElement\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(`[data-slate-node]`)\n    }\n\n    const node = domEl ? ELEMENT_TO_NODE.get(domEl as HTMLElement) : null\n\n    if (!node) {\n      throw new Error(`Cannot resolve a Slate node from DOM node: ${domEl}`)\n    }\n\n    return node\n  },\n\n  /**\n   * Get the target range from a DOM `event`.\n   */\n\n  findEventRange(editor: ReactEditor, event: any): Range {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent\n    }\n\n    const { clientX: x, clientY: y, target } = event\n\n    if (x == null || y == null) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    const node = ReactEditor.toSlateNode(editor, event.target)\n    const path = ReactEditor.findPath(editor, node)\n\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Editor.isVoid(editor, node)) {\n      const rect = target.getBoundingClientRect()\n      const isPrev = editor.isInline(node)\n        ? x - rect.left < rect.left + rect.width - x\n        : y - rect.top < rect.top + rect.height - y\n\n      const edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end',\n      })\n      const point = isPrev\n        ? Editor.before(editor, edge)\n        : Editor.after(editor, edge)\n\n      if (point) {\n        const range = Editor.range(editor, point)\n        return range\n      }\n    }\n\n    // Else resolve a range from the caret position where the drop occured.\n    let domRange\n    const { document } = ReactEditor.getWindow(editor)\n\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y)\n    } else {\n      const position = document.caretPositionFromPoint(x, y)\n\n      if (position) {\n        domRange = document.createRange()\n        domRange.setStart(position.offsetNode, position.offset)\n        domRange.setEnd(position.offsetNode, position.offset)\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    // Resolve a Slate range from the DOM range.\n    const range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n      suppressThrow: false,\n    })\n    return range\n  },\n\n  /**\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\n   */\n\n  toSlatePoint<T extends boolean>(\n    editor: ReactEditor,\n    domPoint: DOMPoint,\n    options: {\n      exactMatch: T\n      suppressThrow: T\n    }\n  ): T extends true ? Point | null : Point {\n    const { exactMatch, suppressThrow } = options\n    const [nearestNode, nearestOffset] = exactMatch\n      ? domPoint\n      : normalizeDOMPoint(domPoint)\n    const parentNode = nearestNode.parentNode as DOMElement\n    let textNode: DOMElement | null = null\n    let offset = 0\n\n    if (parentNode) {\n      const editorEl = ReactEditor.toDOMNode(editor, editor)\n      const potentialVoidNode = parentNode.closest('[data-slate-void=\"true\"]')\n      // Need to ensure that the closest void node is actually a void node\n      // within this editor, and not a void node within some parent editor. This can happen\n      // if this editor is within a void node of another editor (\"nested editors\", like in\n      // the \"Editable Voids\" example on the docs site).\n      const voidNode =\n        potentialVoidNode && editorEl.contains(potentialVoidNode)\n          ? potentialVoidNode\n          : null\n      let leafNode = parentNode.closest('[data-slate-leaf]')\n      let domNode: DOMElement | null = null\n\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')\n\n        if (textNode) {\n          const window = ReactEditor.getWindow(editor)\n          const range = window.document.createRange()\n          range.setStart(textNode, 0)\n          range.setEnd(nearestNode, nearestOffset)\n\n          const contents = range.cloneContents()\n          const removals = [\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[data-slate-zero-width]')\n            ),\n            ...Array.prototype.slice.call(\n              contents.querySelectorAll('[contenteditable=false]')\n            ),\n          ]\n\n          removals.forEach(el => {\n            // COMPAT: While composing at the start of a text node, some keyboards put\n            // the text content inside the zero width space.\n            if (\n              IS_ANDROID &&\n              !exactMatch &&\n              el.hasAttribute('data-slate-zero-width') &&\n              el.textContent.length > 0 &&\n              el.textContext !== '\\uFEFF'\n            ) {\n              if (el.textContent.startsWith('\\uFEFF')) {\n                el.textContent = el.textContent.slice(1)\n              }\n\n              return\n            }\n\n            el!.parentNode!.removeChild(el)\n          })\n\n          // COMPAT: Edge has a bug where Range.prototype.toString() will\n          // convert \\n into \\r\\n. The bug causes a loop when slate-react\n          // attempts to reposition its cursor to match the native position. Use\n          // textContent.length instead.\n          // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n          offset = contents.textContent!.length\n          domNode = textNode\n        }\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent and taking the\n        // first one that isn't inside a nested editor.\n        const leafNodes = voidNode.querySelectorAll('[data-slate-leaf]')\n        for (let index = 0; index < leafNodes.length; index++) {\n          const current = leafNodes[index]\n          if (ReactEditor.hasDOMNode(editor, current)) {\n            leafNode = current\n            break\n          }\n        }\n\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          offset = domNode.textContent!.length\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent!.length\n          })\n        }\n      }\n\n      if (\n        domNode &&\n        offset === domNode.textContent!.length &&\n        // COMPAT: Android IMEs might remove the zero width space while composing,\n        // and we don't add it for line-breaks.\n        IS_ANDROID &&\n        domNode.getAttribute('data-slate-zero-width') === 'z' &&\n        domNode.textContent?.startsWith('\\uFEFF') &&\n        // COMPAT: If the parent node is a Slate zero-width space, editor is\n        // because the text node should have no characters. However, during IME\n        // composition the ASCII characters will be prepended to the zero-width\n        // space, so subtract 1 from the offset to account for the zero-width\n        // space character.\n        (parentNode.hasAttribute('data-slate-zero-width') ||\n          // COMPAT: In Firefox, `range.cloneContents()` returns an extra trailing '\\n'\n          // when the document ends with a new-line character. This results in the offset\n          // length being off by one, so we need to subtract one to account for this.\n          (IS_FIREFOX && domNode.textContent?.endsWith('\\n\\n')))\n      ) {\n        offset--\n      }\n    }\n\n    if (IS_ANDROID && !textNode && !exactMatch) {\n      const node = parentNode.hasAttribute('data-slate-node')\n        ? parentNode\n        : parentNode.closest('[data-slate-node]')\n\n      if (node && ReactEditor.hasDOMNode(editor, node, { editable: true })) {\n        const slateNode = ReactEditor.toSlateNode(editor, node)\n        let { path, offset } = Editor.start(\n          editor,\n          ReactEditor.findPath(editor, slateNode)\n        )\n\n        if (!node.querySelector('[data-slate-leaf]')) {\n          offset = nearestOffset\n        }\n\n        return { path, offset } as T extends true ? Point | null : Point\n      }\n    }\n\n    if (!textNode) {\n      if (suppressThrow) {\n        return null as T extends true ? Point | null : Point\n      }\n      throw new Error(\n        `Cannot resolve a Slate point from DOM point: ${domPoint}`\n      )\n    }\n\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    const slateNode = ReactEditor.toSlateNode(editor, textNode!)\n    const path = ReactEditor.findPath(editor, slateNode)\n    return { path, offset } as T extends true ? Point | null : Point\n  },\n\n  /**\n   * Find a Slate range from a DOM range or selection.\n   */\n\n  toSlateRange<T extends boolean>(\n    editor: ReactEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: T\n      suppressThrow: T\n    }\n  ): T extends true ? Range | null : Range {\n    const { exactMatch, suppressThrow } = options\n    const el = isDOMSelection(domRange)\n      ? domRange.anchorNode\n      : domRange.startContainer\n    let anchorNode\n    let anchorOffset\n    let focusNode\n    let focusOffset\n    let isCollapsed\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        anchorNode = domRange.anchorNode\n        anchorOffset = domRange.anchorOffset\n        focusNode = domRange.focusNode\n        focusOffset = domRange.focusOffset\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        if (IS_CHROME && hasShadowRoot()) {\n          isCollapsed =\n            domRange.anchorNode === domRange.focusNode &&\n            domRange.anchorOffset === domRange.focusOffset\n        } else {\n          isCollapsed = domRange.isCollapsed\n        }\n      } else {\n        anchorNode = domRange.startContainer\n        anchorOffset = domRange.startOffset\n        focusNode = domRange.endContainer\n        focusOffset = domRange.endOffset\n        isCollapsed = domRange.collapsed\n      }\n    }\n\n    if (\n      anchorNode == null ||\n      focusNode == null ||\n      anchorOffset == null ||\n      focusOffset == null\n    ) {\n      throw new Error(\n        `Cannot resolve a Slate range from DOM range: ${domRange}`\n      )\n    }\n\n    const anchor = ReactEditor.toSlatePoint(\n      editor,\n      [anchorNode, anchorOffset],\n      { exactMatch, suppressThrow }\n    )\n    if (!anchor) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    const focus = isCollapsed\n      ? anchor\n      : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], {\n          exactMatch,\n          suppressThrow,\n        })\n    if (!focus) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    let range: Range = { anchor: anchor as Point, focus: focus as Point }\n    // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n    if (\n      Range.isExpanded(range) &&\n      Range.isForward(range) &&\n      isDOMElement(focusNode) &&\n      Editor.void(editor, { at: range.focus, mode: 'highest' })\n    ) {\n      range = Editor.unhangRange(editor, range, { voids: true })\n    }\n\n    return (range as unknown) as T extends true ? Range | null : Range\n  },\n\n  hasRange(editor: ReactEditor, range: Range): boolean {\n    const { anchor, focus } = range\n    return (\n      Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path)\n    )\n  },\n\n  /**\n   * Experimental and android specific: Flush all pending diffs and cancel composition at the next possible time.\n   */\n  androidScheduleFlush(editor: Editor) {\n    EDITOR_TO_SCHEDULE_FLUSH.get(editor)?.()\n  },\n\n  /**\n   * Experimental and android specific: Get pending diffs\n   */\n  androidPendingDiffs(editor: Editor) {\n    return EDITOR_TO_PENDING_DIFFS.get(editor)\n  },\n}\n","import { useLayoutEffect, useEffect } from 'react'\nimport { CAN_USE_DOM } from '../utils/environment'\n\n/**\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\n */\n\nexport const useIsomorphicLayoutEffect = CAN_USE_DOM\n  ? useLayoutEffect\n  : useEffect\n","import { Range } from 'slate'\nimport { PLACEHOLDER_SYMBOL } from './weak-maps'\n\nexport const shallowCompare = (obj1: {}, obj2: {}) =>\n  Object.keys(obj1).length === Object.keys(obj2).length &&\n  Object.keys(obj1).every(\n    key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\n  )\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isDecoratorRangeListEqual = (\n  list: Range[],\n  another: Range[]\n): boolean => {\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    const { anchor: rangeAnchor, focus: rangeFocus, ...rangeOwnProps } = range\n    const { anchor: otherAnchor, focus: otherFocus, ...otherOwnProps } = other\n\n    if (\n      !Range.equals(range, other) ||\n      range[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] ||\n      !shallowCompare(rangeOwnProps, otherOwnProps)\n    ) {\n      return false\n    }\n  }\n\n  return true\n}\n","import React, { useRef } from 'react'\nimport { Editor, Text, Path, Element, Node } from 'slate'\n\nimport { ReactEditor, useSlateStatic } from '..'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { IS_ANDROID } from '../utils/environment'\nimport { MARK_PLACEHOLDER_SYMBOL } from '../utils/weak-maps'\n\n/**\n * Leaf content strings.\n */\n\nconst String = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  text: Text\n}) => {\n  const { isLast, leaf, parent, text } = props\n  const editor = useSlateStatic()\n  const path = ReactEditor.findPath(editor, text)\n  const parentPath = Path.parent(path)\n  const isMarkPlaceholder = leaf[MARK_PLACEHOLDER_SYMBOL] === true\n\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return <ZeroWidthString length={Node.string(parent).length} />\n  }\n\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (\n    leaf.text === '' &&\n    parent.children[parent.children.length - 1] === text &&\n    !editor.isInline(parent) &&\n    Editor.string(editor, parentPath) === ''\n  ) {\n    return <ZeroWidthString isLineBreak isMarkPlaceholder={isMarkPlaceholder} />\n  }\n\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return <ZeroWidthString isMarkPlaceholder={isMarkPlaceholder} />\n  }\n\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return <TextString isTrailing text={leaf.text} />\n  }\n\n  return <TextString text={leaf.text} />\n}\n\n/**\n * Leaf strings with text in them.\n */\nconst TextString = (props: { text: string; isTrailing?: boolean }) => {\n  const { text, isTrailing = false } = props\n\n  const ref = useRef<HTMLSpanElement>(null)\n\n  const getTextContent = () => {\n    return `${text ?? ''}${isTrailing ? '\\n' : ''}`\n  }\n\n  // This is the actual text rendering boundary where we interface with the DOM\n  // The text is not rendered as part of the virtual DOM, as since we handle basic character insertions natively,\n  // updating the DOM is not a one way dataflow anymore. What we need here is not reconciliation and diffing\n  // with previous version of the virtual DOM, but rather diffing with the actual DOM element, and replace the DOM <span> content\n  // exactly if and only if its current content does not match our current virtual DOM.\n  // Otherwise the DOM TextNode would always be replaced by React as the user types, which interferes with native text features,\n  // eg makes native spellcheck opt out from checking the text node.\n\n  // useLayoutEffect: updating our span before browser paint\n  useIsomorphicLayoutEffect(() => {\n    // null coalescing text to make sure we're not outputing \"null\" as a string in the extreme case it is nullish at runtime\n    const textWithTrailing = getTextContent()\n\n    if (ref.current && ref.current.textContent !== textWithTrailing) {\n      ref.current.textContent = textWithTrailing\n    }\n\n    // intentionally not specifying dependencies, so that this effect runs on every render\n    // as this effectively replaces \"specifying the text in the virtual DOM under the <span> below\" on each render\n  })\n\n  // Render text content immediately if it's the first-time render\n  // Ensure that text content is rendered on server-side rendering\n  if (!ref.current) {\n    return (\n      <span data-slate-string ref={ref}>\n        {getTextContent()}\n      </span>\n    )\n  }\n\n  // the span is intentionally same on every render in virtual DOM, actual rendering happens in the layout effect above\n  return <span data-slate-string ref={ref} />\n}\n\n/**\n * Leaf strings without text, render as zero-width strings.\n */\n\nexport const ZeroWidthString = (props: {\n  length?: number\n  isLineBreak?: boolean\n  isMarkPlaceholder?: boolean\n}) => {\n  const { length = 0, isLineBreak = false, isMarkPlaceholder = false } = props\n\n  const attributes = {\n    'data-slate-zero-width': isLineBreak ? 'n' : 'z',\n    'data-slate-length': length,\n  }\n\n  if (isMarkPlaceholder) {\n    attributes['data-slate-mark-placeholder'] = true\n  }\n\n  return (\n    <span {...attributes}>\n      {!IS_ANDROID || !isLineBreak ? '\\uFEFF' : null}\n      {isLineBreak ? <br /> : null}\n    </span>\n  )\n}\n\nexport default String\n","import { createContext, useContext } from 'react'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { Editor } from 'slate'\n\n/**\n * A React context for sharing the editor object.\n */\n\nexport const EditorContext = createContext<ReactEditor | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlateStatic = (): Editor => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useSlateStatic\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import React, { useRef, useEffect } from 'react'\nimport { Element, Text } from 'slate'\nimport String from './string'\nimport {\n  PLACEHOLDER_SYMBOL,\n  EDITOR_TO_PLACEHOLDER_ELEMENT,\n} from '../utils/weak-maps'\nimport { RenderLeafProps, RenderPlaceholderProps } from './editable'\nimport { useSlateStatic } from '../hooks/use-slate-static'\nimport { ReactEditor } from '..'\n\n/**\n * Individual leaves in a text node with unique formatting.\n */\n\nconst Leaf = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: Text\n}) => {\n  const {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = (props: RenderLeafProps) => <DefaultLeaf {...props} />,\n  } = props\n\n  const placeholderRef = useRef<HTMLSpanElement | null>(null)\n  const editor = useSlateStatic()\n\n  useEffect(() => {\n    const placeholderEl = placeholderRef?.current\n    const editorEl = ReactEditor.toDOMNode(editor, editor)\n\n    if (!placeholderEl || !editorEl) {\n      return\n    }\n\n    editorEl.style.minHeight = `${placeholderEl.clientHeight}px`\n    EDITOR_TO_PLACEHOLDER_ELEMENT.set(editor, placeholderEl)\n\n    return () => {\n      editorEl.style.minHeight = 'auto'\n      EDITOR_TO_PLACEHOLDER_ELEMENT.delete(editor)\n    }\n  }, [placeholderRef, leaf])\n\n  let children = (\n    <String isLast={isLast} leaf={leaf} parent={parent} text={text} />\n  )\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    const placeholderProps: RenderPlaceholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none',\n        },\n        contentEditable: false,\n        ref: placeholderRef,\n      },\n    }\n\n    children = (\n      <React.Fragment>\n        {renderPlaceholder(placeholderProps)}\n        {children}\n      </React.Fragment>\n    )\n  }\n\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  const attributes: {\n    'data-slate-leaf': true\n  } = {\n    'data-slate-leaf': true,\n  }\n\n  return renderLeaf({ attributes, children, leaf, text })\n}\n\nconst MemoizedLeaf = React.memo(Leaf, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.renderPlaceholder === prev.renderPlaceholder &&\n    next.text === prev.text &&\n    Text.equals(next.leaf, prev.leaf) &&\n    next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL]\n  )\n})\n\nexport const DefaultLeaf = (props: RenderLeafProps) => {\n  const { attributes, children } = props\n  return <span {...attributes}>{children}</span>\n}\n\nexport default MemoizedLeaf\n","import React, { useRef } from 'react'\nimport { Element, Range, Text as SlateText } from 'slate'\nimport { ReactEditor, useSlateStatic } from '..'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { isDecoratorRangeListEqual } from '../utils/range-list'\nimport {\n  EDITOR_TO_KEY_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_ELEMENT,\n} from '../utils/weak-maps'\nimport { RenderLeafProps, RenderPlaceholderProps } from './editable'\nimport Leaf from './leaf'\n\n/**\n * Text.\n */\n\nconst Text = (props: {\n  decorations: Range[]\n  isLast: boolean\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: SlateText\n}) => {\n  const {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    text,\n  } = props\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLSpanElement>(null)\n  const leaves = SlateText.decorations(text, decorations)\n  const key = ReactEditor.findKey(editor, text)\n  const children = []\n\n  for (let i = 0; i < leaves.length; i++) {\n    const leaf = leaves[i]\n\n    children.push(\n      <Leaf\n        isLast={isLast && i === leaves.length - 1}\n        key={`${key.id}-${i}`}\n        renderPlaceholder={renderPlaceholder}\n        leaf={leaf}\n        text={text}\n        parent={parent}\n        renderLeaf={renderLeaf}\n      />\n    )\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n    if (ref.current) {\n      KEY_TO_ELEMENT?.set(key, ref.current)\n      NODE_TO_ELEMENT.set(text, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, text)\n    } else {\n      KEY_TO_ELEMENT?.delete(key)\n      NODE_TO_ELEMENT.delete(text)\n    }\n  })\n\n  return (\n    <span data-slate-node=\"text\" ref={ref}>\n      {children}\n    </span>\n  )\n}\n\nconst MemoizedText = React.memo(Text, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.text === prev.text &&\n    isDecoratorRangeListEqual(next.decorations, prev.decorations)\n  )\n})\n\nexport default MemoizedText\n","import React, { useCallback } from 'react'\nimport getDirection from 'direction'\nimport { Editor, Node, Range, Element as SlateElement } from 'slate'\n\nimport Text from './text'\nimport useChildren from '../hooks/use-children'\nimport { ReactEditor, useSlateStatic, useReadOnly } from '..'\nimport {\n  NODE_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_PARENT,\n  NODE_TO_INDEX,\n  EDITOR_TO_KEY_TO_ELEMENT,\n} from '../utils/weak-maps'\nimport { isDecoratorRangeListEqual } from '../utils/range-list'\nimport {\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n} from './editable'\n\n/**\n * Element.\n */\n\nconst Element = (props: {\n  decorations: Range[]\n  element: SlateElement\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorations,\n    element,\n    renderElement = (p: RenderElementProps) => <DefaultElement {...p} />,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  } = props\n  const editor = useSlateStatic()\n  const readOnly = useReadOnly()\n  const isInline = editor.isInline(element)\n  const key = ReactEditor.findKey(editor, element)\n  const ref = useCallback(\n    (ref: HTMLElement | null) => {\n      // Update element-related weak maps with the DOM element ref.\n      const KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor)\n      if (ref) {\n        KEY_TO_ELEMENT?.set(key, ref)\n        NODE_TO_ELEMENT.set(element, ref)\n        ELEMENT_TO_NODE.set(ref, element)\n      } else {\n        KEY_TO_ELEMENT?.delete(key)\n        NODE_TO_ELEMENT.delete(element)\n      }\n    },\n    [editor, key, element]\n  )\n  let children: React.ReactNode = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  })\n\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  const attributes: {\n    'data-slate-node': 'element'\n    'data-slate-void'?: true\n    'data-slate-inline'?: true\n    contentEditable?: false\n    dir?: 'rtl'\n    ref: any\n  } = {\n    'data-slate-node': 'element',\n    ref,\n  }\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true\n  }\n\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    const text = Node.string(element)\n    const dir = getDirection(text)\n\n    if (dir === 'rtl') {\n      attributes.dir = dir\n    }\n  }\n\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false\n    }\n\n    const Tag = isInline ? 'span' : 'div'\n    const [[text]] = Node.texts(element)\n\n    children = (\n      <Tag\n        data-slate-spacer\n        style={{\n          height: '0',\n          color: 'transparent',\n          outline: 'none',\n          position: 'absolute',\n        }}\n      >\n        <Text\n          renderPlaceholder={renderPlaceholder}\n          decorations={[]}\n          isLast={false}\n          parent={element}\n          text={text}\n        />\n      </Tag>\n    )\n\n    NODE_TO_INDEX.set(text, 0)\n    NODE_TO_PARENT.set(text, element)\n  }\n\n  return renderElement({ attributes, children, element })\n}\n\nconst MemoizedElement = React.memo(Element, (prev, next) => {\n  return (\n    prev.element === next.element &&\n    prev.renderElement === next.renderElement &&\n    prev.renderLeaf === next.renderLeaf &&\n    isDecoratorRangeListEqual(prev.decorations, next.decorations) &&\n    (prev.selection === next.selection ||\n      (!!prev.selection &&\n        !!next.selection &&\n        Range.equals(prev.selection, next.selection)))\n  )\n})\n\n/**\n * The default element renderer.\n */\n\nexport const DefaultElement = (props: RenderElementProps) => {\n  const { attributes, children, element } = props\n  const editor = useSlateStatic()\n  const Tag = editor.isInline(element) ? 'span' : 'div'\n  return (\n    <Tag {...attributes} style={{ position: 'relative' }}>\n      {children}\n    </Tag>\n  )\n}\n\nexport default MemoizedElement\n","import { createContext, useContext } from 'react'\nimport { Range, NodeEntry } from 'slate'\n\n/**\n * A React context for sharing the `decorate` prop of the editable.\n */\n\nexport const DecorateContext = createContext<(entry: NodeEntry) => Range[]>(\n  () => []\n)\n\n/**\n * Get the current `decorate` prop of the editable.\n */\n\nexport const useDecorate = (): ((entry: NodeEntry) => Range[]) => {\n  return useContext(DecorateContext)\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `selected` state of an element.\n */\n\nexport const SelectedContext = createContext(false)\n\n/**\n * Get the current `selected` state of an element.\n */\n\nexport const useSelected = (): boolean => {\n  return useContext(SelectedContext)\n}\n","import React from 'react'\nimport { Editor, Range, Element, Ancestor, Descendant } from 'slate'\n\nimport ElementComponent from '../components/element'\nimport TextComponent from '../components/text'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { useSlateStatic } from './use-slate-static'\nimport { useDecorate } from './use-decorate'\nimport { NODE_TO_INDEX, NODE_TO_PARENT } from '../utils/weak-maps'\nimport {\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n} from '../components/editable'\nimport { SelectedContext } from './use-selected'\n\n/**\n * Children.\n */\n\nconst useChildren = (props: {\n  decorations: Range[]\n  node: Ancestor\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  } = props\n  const decorate = useDecorate()\n  const editor = useSlateStatic()\n  const path = ReactEditor.findPath(editor, node)\n  const children = []\n  const isLeafBlock =\n    Element.isElement(node) &&\n    !editor.isInline(node) &&\n    Editor.hasInlines(editor, node)\n\n  for (let i = 0; i < node.children.length; i++) {\n    const p = path.concat(i)\n    const n = node.children[i] as Descendant\n    const key = ReactEditor.findKey(editor, n)\n    const range = Editor.range(editor, p)\n    const sel = selection && Range.intersection(range, selection)\n    const ds = decorate([n, p])\n\n    for (const dec of decorations) {\n      const d = Range.intersection(dec, range)\n\n      if (d) {\n        ds.push(d)\n      }\n    }\n\n    if (Element.isElement(n)) {\n      children.push(\n        <SelectedContext.Provider key={`provider-${key.id}`} value={!!sel}>\n          <ElementComponent\n            decorations={ds}\n            element={n}\n            key={key.id}\n            renderElement={renderElement}\n            renderPlaceholder={renderPlaceholder}\n            renderLeaf={renderLeaf}\n            selection={sel}\n          />\n        </SelectedContext.Provider>\n      )\n    } else {\n      children.push(\n        <TextComponent\n          decorations={ds}\n          key={key.id}\n          isLast={isLeafBlock && i === node.children.length - 1}\n          parent={node}\n          renderPlaceholder={renderPlaceholder}\n          renderLeaf={renderLeaf}\n          text={n}\n        />\n      )\n    }\n\n    NODE_TO_INDEX.set(n, i)\n    NODE_TO_PARENT.set(n, node)\n  }\n\n  return children\n}\n\nexport default useChildren\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\n\nexport const ReadOnlyContext = createContext(false)\n\n/**\n * Get the current `readOnly` state of the editor.\n */\n\nexport const useReadOnly = (): boolean => {\n  return useContext(ReadOnlyContext)\n}\n","import { createContext, useContext } from 'react'\nimport { Editor } from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * A React context for sharing the editor object, in a way that re-renders the\n * context whenever changes occur.\n */\n\nexport interface SlateContextValue {\n  v: number\n  editor: ReactEditor\n}\n\nexport const SlateContext = createContext<{\n  v: number\n  editor: ReactEditor\n} | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlate = (): Editor => {\n  const context = useContext(SlateContext)\n\n  if (!context) {\n    throw new Error(\n      `The \\`useSlate\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  const { editor } = context\n  return editor\n}\n\nexport const useSlateWithV = () => {\n  const context = useContext(SlateContext)\n\n  if (!context) {\n    throw new Error(\n      `The \\`useSlate\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return context\n}\n","export const TRIPLE_CLICK = 3\n","import { isKeyHotkey } from 'is-hotkey'\nimport { IS_APPLE } from './environment'\n\n/**\n * Hotkey mappings for each platform.\n */\n\nconst HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  insertSoftBreak: 'shift+enter',\n  splitBlock: 'enter',\n  undo: 'mod+z',\n}\n\nconst APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t',\n}\n\nconst WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z'],\n}\n\n/**\n * Create a platform-aware hotkey checker.\n */\n\nconst create = (key: string) => {\n  const generic = HOTKEYS[key]\n  const apple = APPLE_HOTKEYS[key]\n  const windows = WINDOWS_HOTKEYS[key]\n  const isGeneric = generic && isKeyHotkey(generic)\n  const isApple = apple && isKeyHotkey(apple)\n  const isWindows = windows && isKeyHotkey(windows)\n\n  return (event: KeyboardEvent) => {\n    if (isGeneric && isGeneric(event)) return true\n    if (IS_APPLE && isApple && isApple(event)) return true\n    if (!IS_APPLE && isWindows && isWindows(event)) return true\n    return false\n  }\n}\n\n/**\n * Hotkeys.\n */\n\nexport default {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSoftBreak: create('insertSoftBreak'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo'),\n}\n","import { RefObject } from 'react'\nimport { ReactEditor } from '../../plugin/react-editor'\nimport { isTrackedMutation } from '../../utils/dom'\n\nexport type RestoreDOMManager = {\n  registerMutations: (mutations: MutationRecord[]) => void\n  restoreDOM: () => void\n  clear: () => void\n}\n\nexport const createRestoreDomManager = (\n  editor: ReactEditor,\n  receivedUserInput: RefObject<boolean>\n): RestoreDOMManager => {\n  let bufferedMutations: MutationRecord[] = []\n\n  const clear = () => {\n    bufferedMutations = []\n  }\n\n  const registerMutations = (mutations: MutationRecord[]) => {\n    if (!receivedUserInput.current) {\n      return\n    }\n\n    const trackedMutations = mutations.filter(mutation =>\n      isTrackedMutation(editor, mutation, mutations)\n    )\n\n    bufferedMutations.push(...trackedMutations)\n  }\n\n  function restoreDOM() {\n    bufferedMutations.reverse().forEach(mutation => {\n      if (mutation.type === 'characterData') {\n        mutation.target.textContent = mutation.oldValue\n        return\n      }\n\n      mutation.removedNodes.forEach(node => {\n        mutation.target.insertBefore(node, mutation.nextSibling)\n      })\n\n      mutation.addedNodes.forEach(node => {\n        mutation.target.removeChild(node)\n      })\n    })\n\n    // Clear buffered mutations to ensure we don't undo them twice\n    clear()\n  }\n\n  return {\n    registerMutations,\n    restoreDOM,\n    clear,\n  }\n}\n","import React, { Component, ComponentType, ContextType, RefObject } from 'react'\nimport { EditorContext } from '../../hooks/use-slate-static'\nimport { IS_ANDROID } from '../../utils/environment'\nimport {\n  createRestoreDomManager,\n  RestoreDOMManager,\n} from './restore-dom-manager'\n\nconst MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n}\n\ntype RestoreDOMProps = {\n  receivedUserInput: RefObject<boolean>\n  node: RefObject<HTMLDivElement>\n}\n\n// We have to use a class component here since we rely on `getSnapshotBeforeUpdate` which has no FC equivalent\n// to run code synchronously immediately before react commits the component update to the DOM.\nclass RestoreDOMComponent extends Component<RestoreDOMProps> {\n  static contextType = EditorContext\n  context: ContextType<typeof EditorContext> = null\n\n  private manager: RestoreDOMManager | null = null\n  private mutationObserver: MutationObserver | null = null\n\n  observe() {\n    const { node } = this.props\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined')\n    }\n\n    this.mutationObserver?.observe(node.current, MUTATION_OBSERVER_CONFIG)\n  }\n\n  componentDidMount() {\n    const { receivedUserInput } = this.props\n    const editor = this.context!\n\n    this.manager = createRestoreDomManager(editor, receivedUserInput)\n    this.mutationObserver = new MutationObserver(this.manager.registerMutations)\n\n    this.observe()\n  }\n\n  getSnapshotBeforeUpdate() {\n    const pendingMutations = this.mutationObserver?.takeRecords()\n    if (pendingMutations?.length) {\n      this.manager?.registerMutations(pendingMutations)\n    }\n\n    this.mutationObserver?.disconnect()\n    this.manager?.restoreDOM()\n\n    return null\n  }\n\n  componentDidUpdate() {\n    this.manager?.clear()\n    this.observe()\n  }\n\n  componentWillUnmount() {\n    this.mutationObserver?.disconnect()\n  }\n\n  render() {\n    return this.props.children\n  }\n}\n\nexport const RestoreDOM: ComponentType<RestoreDOMProps> = IS_ANDROID\n  ? RestoreDOMComponent\n  : ({ children }) => <>{children}</>\n","import { Editor, Node, Operation, Path, Point, Range, Text } from 'slate'\nimport { EDITOR_TO_PENDING_DIFFS } from './weak-maps'\n\nexport type StringDiff = {\n  start: number\n  end: number\n  text: string\n}\n\nexport type TextDiff = {\n  id: number\n  path: Path\n  diff: StringDiff\n}\n\n/**\n * Check whether a text diff was applied in a way we can perform the pending action on /\n * recover the pending selection.\n */\nexport function verifyDiffState(editor: Editor, textDiff: TextDiff): boolean {\n  const { path, diff } = textDiff\n  if (!Editor.hasPath(editor, path)) {\n    return false\n  }\n\n  const node = Node.get(editor, path)\n  if (!Text.isText(node)) {\n    return false\n  }\n\n  if (diff.start !== node.text.length || diff.text.length === 0) {\n    return (\n      node.text.slice(diff.start, diff.start + diff.text.length) === diff.text\n    )\n  }\n\n  const nextPath = Path.next(path)\n  if (!Editor.hasPath(editor, nextPath)) {\n    return false\n  }\n\n  const nextNode = Node.get(editor, nextPath)\n  return Text.isText(nextNode) && nextNode.text.startsWith(diff.text)\n}\n\nfunction applyStringDiff(text: string, ...diffs: StringDiff[]) {\n  return diffs.reduce(\n    (text, diff) =>\n      text.slice(0, diff.start) + diff.text + text.slice(diff.end),\n    text\n  )\n}\n\nfunction longestCommonPrefixLength(str: string, another: string) {\n  const length = Math.min(str.length, another.length)\n\n  for (let i = 0; i < length; i++) {\n    if (str.charAt(i) !== another.charAt(i)) {\n      return i\n    }\n  }\n\n  return length\n}\n\nfunction longestCommonSuffixLength(\n  str: string,\n  another: string,\n  max: number\n): number {\n  const length = Math.min(str.length, another.length, max)\n\n  for (let i = 0; i < length; i++) {\n    if (\n      str.charAt(str.length - i - 1) !== another.charAt(another.length - i - 1)\n    ) {\n      return i\n    }\n  }\n\n  return length\n}\n\n/**\n * Remove redundant changes from the diff so that it spans the minimal possible range\n */\nexport function normalizeStringDiff(targetText: string, diff: StringDiff) {\n  const { start, end, text } = diff\n  const removedText = targetText.slice(start, end)\n\n  const prefixLength = longestCommonPrefixLength(removedText, text)\n  const max = Math.min(\n    removedText.length - prefixLength,\n    text.length - prefixLength\n  )\n  const suffixLength = longestCommonSuffixLength(removedText, text, max)\n\n  const normalized: StringDiff = {\n    start: start + prefixLength,\n    end: end - suffixLength,\n    text: text.slice(prefixLength, text.length - suffixLength),\n  }\n\n  if (normalized.start === normalized.end && normalized.text.length === 0) {\n    return null\n  }\n\n  return normalized\n}\n\n/**\n * Return a string diff that is equivalent to applying b after a spanning the range of\n * both changes\n */\nexport function mergeStringDiffs(\n  targetText: string,\n  a: StringDiff,\n  b: StringDiff\n): StringDiff | null {\n  const start = Math.min(a.start, b.start)\n  const overlap = Math.max(\n    0,\n    Math.min(a.start + a.text.length, b.end) - b.start\n  )\n\n  const applied = applyStringDiff(targetText, a, b)\n  const sliceEnd = Math.max(\n    b.start + b.text.length,\n    a.start +\n      a.text.length +\n      (a.start + a.text.length > b.start ? b.text.length : 0) -\n      overlap\n  )\n\n  const text = applied.slice(start, sliceEnd)\n  const end = Math.max(a.end, b.end - a.text.length + (a.end - a.start))\n  return normalizeStringDiff(targetText, { start, end, text })\n}\n\n/**\n * Get the slate range the text diff spans.\n */\nexport function targetRange(textDiff: TextDiff): Range {\n  const { path, diff } = textDiff\n  return {\n    anchor: { path, offset: diff.start },\n    focus: { path, offset: diff.end },\n  }\n}\n\n/**\n * Normalize a 'pending point' a.k.a a point based on the dom state before applying\n * the pending diffs. Since the pending diffs might have been inserted with different\n * marks we have to 'walk' the offset from the starting position to ensure we still\n * have a valid point inside the document\n */\nexport function normalizePoint(editor: Editor, point: Point): Point | null {\n  let { path, offset } = point\n  if (!Editor.hasPath(editor, path)) {\n    return null\n  }\n\n  let leaf = Node.get(editor, path)\n  if (!Text.isText(leaf)) {\n    return null\n  }\n\n  const parentBlock = Editor.above(editor, {\n    match: n => Editor.isBlock(editor, n),\n    at: path,\n  })\n\n  if (!parentBlock) {\n    return null\n  }\n\n  while (offset > leaf.text.length) {\n    const entry = Editor.next(editor, { at: path, match: Text.isText })\n    if (!entry || !Path.isDescendant(entry[1], parentBlock[1])) {\n      return null\n    }\n\n    offset -= leaf.text.length\n    leaf = entry[0]\n    path = entry[1]\n  }\n\n  return { path, offset }\n}\n\n/**\n * Normalize a 'pending selection' to ensure it's valid in the current document state.\n */\nexport function normalizeRange(editor: Editor, range: Range): Range | null {\n  const anchor = normalizePoint(editor, range.anchor)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = normalizePoint(editor, range.focus)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformPendingPoint(\n  editor: Editor,\n  point: Point,\n  op: Operation\n): Point | null {\n  const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor)\n  const textDiff = pendingDiffs?.find(({ path }) =>\n    Path.equals(path, point.path)\n  )\n\n  if (!textDiff || point.offset <= textDiff.diff.start) {\n    return Point.transform(point, op, { affinity: 'backward' })\n  }\n\n  const { diff } = textDiff\n  // Point references location inside the diff => transform the point based on the location\n  // the diff will be applied to and add the offset inside the diff.\n  if (point.offset <= diff.start + diff.text.length) {\n    const anchor = { path: point.path, offset: diff.start }\n    const transformed = Point.transform(anchor, op, {\n      affinity: 'backward',\n    })\n\n    if (!transformed) {\n      return null\n    }\n\n    return {\n      path: transformed.path,\n      offset: transformed.offset + point.offset - diff.start,\n    }\n  }\n\n  // Point references location after the diff\n  const anchor = {\n    path: point.path,\n    offset: point.offset - diff.text.length + diff.end - diff.start,\n  }\n  const transformed = Point.transform(anchor, op, {\n    affinity: 'backward',\n  })\n  if (!transformed) {\n    return null\n  }\n\n  if (\n    op.type === 'split_node' &&\n    Path.equals(op.path, point.path) &&\n    anchor.offset < op.position &&\n    diff.start < op.position\n  ) {\n    return transformed\n  }\n\n  return {\n    path: transformed.path,\n    offset: transformed.offset + diff.text.length - diff.end + diff.start,\n  }\n}\n\nexport function transformPendingRange(\n  editor: Editor,\n  range: Range,\n  op: Operation\n): Range | null {\n  const anchor = transformPendingPoint(editor, range.anchor, op)\n  if (!anchor) {\n    return null\n  }\n\n  if (Range.isCollapsed(range)) {\n    return { anchor, focus: anchor }\n  }\n\n  const focus = transformPendingPoint(editor, range.focus, op)\n  if (!focus) {\n    return null\n  }\n\n  return { anchor, focus }\n}\n\nexport function transformTextDiff(\n  textDiff: TextDiff,\n  op: Operation\n): TextDiff | null {\n  const { path, diff, id } = textDiff\n\n  switch (op.type) {\n    case 'insert_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset <= diff.start) {\n        return {\n          diff: {\n            start: op.text.length + diff.start,\n            end: op.text.length + diff.end,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end + op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'remove_text': {\n      if (!Path.equals(op.path, path) || op.offset >= diff.end) {\n        return textDiff\n      }\n\n      if (op.offset + op.text.length <= diff.start) {\n        return {\n          diff: {\n            start: diff.start - op.text.length,\n            end: diff.end - op.text.length,\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start,\n          end: diff.end - op.text.length,\n          text: diff.text,\n        },\n        id,\n        path,\n      }\n    }\n    case 'split_node': {\n      if (!Path.equals(op.path, path) || op.position >= diff.end) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op, { affinity: 'backward' })!,\n        }\n      }\n\n      if (op.position > diff.start) {\n        return {\n          diff: {\n            start: diff.start,\n            end: Math.min(op.position, diff.end),\n            text: diff.text,\n          },\n          id,\n          path,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start - op.position,\n          end: diff.end - op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op, { affinity: 'forward' })!,\n      }\n    }\n    case 'merge_node': {\n      if (!Path.equals(op.path, path)) {\n        return {\n          diff,\n          id,\n          path: Path.transform(path, op)!,\n        }\n      }\n\n      return {\n        diff: {\n          start: diff.start + op.position,\n          end: diff.end + op.position,\n          text: diff.text,\n        },\n        id,\n        path: Path.transform(path, op)!,\n      }\n    }\n  }\n\n  const newPath = Path.transform(path, op)\n  if (!newPath) {\n    return null\n  }\n\n  return {\n    diff,\n    path: newPath,\n    id,\n  }\n}\n","import { DebouncedFunc } from 'lodash'\nimport { Editor, Node, Path, Point, Range, Text, Transforms } from 'slate'\nimport { ReactEditor } from '../../plugin/react-editor'\nimport {\n  mergeStringDiffs,\n  normalizePoint,\n  normalizeRange,\n  normalizeStringDiff,\n  StringDiff,\n  targetRange,\n  TextDiff,\n  verifyDiffState,\n} from '../../utils/diff-text'\nimport { isDOMSelection, isTrackedMutation } from '../../utils/dom'\nimport {\n  EDITOR_TO_FORCE_RENDER,\n  EDITOR_TO_PENDING_ACTION,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_PENDING_SELECTION,\n  EDITOR_TO_PLACEHOLDER_ELEMENT,\n  EDITOR_TO_USER_MARKS,\n  IS_COMPOSING,\n} from '../../utils/weak-maps'\n\nexport type Action = { at?: Point | Range; run: () => void }\n\n// https://github.com/facebook/draft-js/blob/main/src/component/handlers/composition/DraftEditorCompositionHandler.js#L41\n// When using keyboard English association function, conpositionEnd triggered too fast, resulting in after `insertText` still maintain association state.\nconst RESOLVE_DELAY = 25\n\n// Time with no user interaction before the current user action is considered as done.\nconst FLUSH_DELAY = 200\n\n// Replace with `const debug = console.log` to debug\nconst debug = (..._: unknown[]) => {}\n\nexport type CreateAndroidInputManagerOptions = {\n  editor: ReactEditor\n\n  scheduleOnDOMSelectionChange: DebouncedFunc<() => void>\n  onDOMSelectionChange: DebouncedFunc<() => void>\n}\n\nexport type AndroidInputManager = {\n  flush: () => void\n  scheduleFlush: () => void\n\n  hasPendingDiffs: () => boolean\n  hasPendingAction: () => boolean\n  hasPendingChanges: () => boolean\n  isFlushing: () => boolean | 'action'\n\n  handleUserSelect: (range: Range | null) => void\n  handleCompositionEnd: (event: React.CompositionEvent<HTMLDivElement>) => void\n  handleCompositionStart: (\n    event: React.CompositionEvent<HTMLDivElement>\n  ) => void\n  handleDOMBeforeInput: (event: InputEvent) => void\n  handleKeyDown: (event: React.KeyboardEvent<HTMLDivElement>) => void\n\n  handleDomMutations: (mutations: MutationRecord[]) => void\n  handleInput: () => void\n}\n\nexport function createAndroidInputManager({\n  editor,\n  scheduleOnDOMSelectionChange,\n  onDOMSelectionChange,\n}: CreateAndroidInputManagerOptions): AndroidInputManager {\n  let flushing: 'action' | boolean = false\n  let compositionEndTimeoutId: ReturnType<typeof setTimeout> | null = null\n  let flushTimeoutId: ReturnType<typeof setTimeout> | null = null\n  let actionTimeoutId: ReturnType<typeof setTimeout> | null = null\n\n  let idCounter = 0\n  let insertPositionHint: StringDiff | null | false = false\n\n  const applyPendingSelection = () => {\n    const pendingSelection = EDITOR_TO_PENDING_SELECTION.get(editor)\n    EDITOR_TO_PENDING_SELECTION.delete(editor)\n\n    if (pendingSelection) {\n      const { selection } = editor\n      const normalized = normalizeRange(editor, pendingSelection)\n\n      debug('apply pending selection', pendingSelection, normalized)\n\n      if (normalized && (!selection || !Range.equals(normalized, selection))) {\n        Transforms.select(editor, normalized)\n      }\n    }\n  }\n\n  const performAction = () => {\n    const action = EDITOR_TO_PENDING_ACTION.get(editor)\n    EDITOR_TO_PENDING_ACTION.delete(editor)\n    if (!action) {\n      return\n    }\n\n    if (action.at) {\n      const target = Point.isPoint(action.at)\n        ? normalizePoint(editor, action.at)\n        : normalizeRange(editor, action.at)\n\n      if (!target) {\n        return\n      }\n\n      const targetRange = Editor.range(editor, target)\n      if (!editor.selection || !Range.equals(editor.selection, targetRange)) {\n        Transforms.select(editor, target)\n      }\n    }\n\n    action.run()\n  }\n\n  const flush = () => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    if (actionTimeoutId) {\n      clearTimeout(actionTimeoutId)\n      actionTimeoutId = null\n    }\n\n    if (!hasPendingDiffs() && !hasPendingAction()) {\n      applyPendingSelection()\n      return\n    }\n\n    if (!flushing) {\n      flushing = true\n      setTimeout(() => (flushing = false))\n    }\n\n    if (hasPendingAction()) {\n      flushing = 'action'\n    }\n\n    const selectionRef =\n      editor.selection &&\n      Editor.rangeRef(editor, editor.selection, { affinity: 'forward' })\n    EDITOR_TO_USER_MARKS.set(editor, editor.marks)\n\n    debug(\n      'flush',\n      EDITOR_TO_PENDING_ACTION.get(editor),\n      EDITOR_TO_PENDING_DIFFS.get(editor)\n    )\n\n    let scheduleSelectionChange = !!EDITOR_TO_PENDING_DIFFS.get(editor)?.length\n\n    let diff: TextDiff | undefined\n    while ((diff = EDITOR_TO_PENDING_DIFFS.get(editor)?.[0])) {\n      const pendingMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)\n\n      if (pendingMarks !== undefined) {\n        EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n        editor.marks = pendingMarks\n      }\n\n      if (pendingMarks && insertPositionHint === false) {\n        insertPositionHint = null\n        debug('insert after mark placeholder')\n      }\n\n      const range = targetRange(diff)\n      if (!editor.selection || !Range.equals(editor.selection, range)) {\n        Transforms.select(editor, range)\n      }\n\n      if (diff.diff.text) {\n        Editor.insertText(editor, diff.diff.text)\n      } else {\n        Editor.deleteFragment(editor)\n      }\n\n      // Remove diff only after we have applied it to account for it when transforming\n      // pending ranges.\n      EDITOR_TO_PENDING_DIFFS.set(\n        editor,\n        EDITOR_TO_PENDING_DIFFS.get(editor)?.filter(\n          ({ id }) => id !== diff!.id\n        )!\n      )\n\n      if (!verifyDiffState(editor, diff)) {\n        debug('invalid diff state')\n        scheduleSelectionChange = false\n        EDITOR_TO_PENDING_ACTION.delete(editor)\n        EDITOR_TO_USER_MARKS.delete(editor)\n        flushing = 'action'\n\n        // Ensure we don't restore the pending user (dom) selection\n        // since the document and dom state do not match.\n        EDITOR_TO_PENDING_SELECTION.delete(editor)\n        scheduleOnDOMSelectionChange.cancel()\n        onDOMSelectionChange.cancel()\n        selectionRef?.unref()\n      }\n    }\n\n    const selection = selectionRef?.unref()\n    if (\n      selection &&\n      !EDITOR_TO_PENDING_SELECTION.get(editor) &&\n      (!editor.selection || !Range.equals(selection, editor.selection))\n    ) {\n      Transforms.select(editor, selection)\n    }\n\n    if (hasPendingAction()) {\n      performAction()\n      return\n    }\n\n    // COMPAT: The selectionChange event is fired after the action is performed,\n    // so we have to manually schedule it to ensure we don't 'throw away' the selection\n    // while rendering if we have pending changes.\n    if (scheduleSelectionChange) {\n      debug('scheduleOnDOMSelectionChange pending changes')\n      scheduleOnDOMSelectionChange()\n    }\n\n    scheduleOnDOMSelectionChange.flush()\n    onDOMSelectionChange.flush()\n\n    applyPendingSelection()\n\n    const userMarks = EDITOR_TO_USER_MARKS.get(editor)\n    EDITOR_TO_USER_MARKS.delete(editor)\n    if (userMarks !== undefined) {\n      editor.marks = userMarks\n      editor.onChange()\n    }\n  }\n\n  const handleCompositionEnd = (\n    _event: React.CompositionEvent<HTMLDivElement>\n  ) => {\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId)\n    }\n\n    compositionEndTimeoutId = setTimeout(() => {\n      IS_COMPOSING.set(editor, false)\n      flush()\n    }, RESOLVE_DELAY)\n  }\n\n  const handleCompositionStart = (\n    _event: React.CompositionEvent<HTMLDivElement>\n  ) => {\n    debug('composition start')\n\n    IS_COMPOSING.set(editor, true)\n\n    if (compositionEndTimeoutId) {\n      clearTimeout(compositionEndTimeoutId)\n      compositionEndTimeoutId = null\n    }\n  }\n\n  const updatePlaceholderVisibility = (forceHide = false) => {\n    const placeholderElement = EDITOR_TO_PLACEHOLDER_ELEMENT.get(editor)\n    if (!placeholderElement) {\n      return\n    }\n\n    if (hasPendingDiffs() || forceHide) {\n      placeholderElement.style.display = 'none'\n      return\n    }\n\n    placeholderElement.style.removeProperty('display')\n  }\n\n  const storeDiff = (path: Path, diff: StringDiff) => {\n    debug('storeDiff', path, diff)\n\n    const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(editor) ?? []\n    EDITOR_TO_PENDING_DIFFS.set(editor, pendingDiffs)\n\n    const target = Node.leaf(editor, path)\n    const idx = pendingDiffs.findIndex(change => Path.equals(change.path, path))\n    if (idx < 0) {\n      const normalized = normalizeStringDiff(target.text, diff)\n      if (normalized) {\n        pendingDiffs.push({ path, diff, id: idCounter++ })\n      }\n\n      updatePlaceholderVisibility()\n      return\n    }\n\n    const merged = mergeStringDiffs(target.text, pendingDiffs[idx].diff, diff)\n    if (!merged) {\n      pendingDiffs.splice(idx, 1)\n      updatePlaceholderVisibility()\n      return\n    }\n\n    pendingDiffs[idx] = {\n      ...pendingDiffs[idx],\n      diff: merged,\n    }\n  }\n\n  const scheduleAction = (\n    run: () => void,\n    { at }: { at?: Point | Range } = {}\n  ): void => {\n    insertPositionHint = false\n    debug('scheduleAction', { at, run })\n\n    EDITOR_TO_PENDING_SELECTION.delete(editor)\n    scheduleOnDOMSelectionChange.cancel()\n    onDOMSelectionChange.cancel()\n\n    if (hasPendingAction()) {\n      flush()\n    }\n\n    EDITOR_TO_PENDING_ACTION.set(editor, { at, run })\n\n    // COMPAT: When deleting before a non-contenteditable element chrome only fires a beforeinput,\n    // (no input) and doesn't perform any dom mutations. Without a flush timeout we would never flush\n    // in this case and thus never actually perform the action.\n    actionTimeoutId = setTimeout(flush)\n  }\n\n  const handleDOMBeforeInput = (event: InputEvent): void => {\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    const { inputType: type } = event\n    let targetRange: Range | null = null\n    const data = (event as any).dataTransfer || event.data || undefined\n\n    if (\n      insertPositionHint !== false &&\n      type !== 'insertText' &&\n      type !== 'insertCompositionText'\n    ) {\n      insertPositionHint = false\n    }\n\n    let [nativeTargetRange] = (event as any).getTargetRanges()\n    if (nativeTargetRange) {\n      targetRange = ReactEditor.toSlateRange(editor, nativeTargetRange, {\n        exactMatch: false,\n        suppressThrow: true,\n      })\n    }\n\n    // COMPAT: SelectionChange event is fired after the action is performed, so we\n    // have to manually get the selection here to ensure it's up-to-date.\n    const window = ReactEditor.getWindow(editor)\n    const domSelection = window.getSelection()\n    if (!targetRange && domSelection) {\n      nativeTargetRange = domSelection\n      targetRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n        suppressThrow: true,\n      })\n    }\n\n    targetRange = targetRange ?? editor.selection\n    if (!targetRange) {\n      return\n    }\n\n    if (Range.isExpanded(targetRange) && type.startsWith('delete')) {\n      const [start, end] = Range.edges(targetRange)\n      const leaf = Node.leaf(editor, start.path)\n\n      if (leaf.text.length === start.offset && end.offset === 0) {\n        const next = Editor.next(editor, { at: start.path, match: Text.isText })\n        if (next && Path.equals(next[1], end.path)) {\n          targetRange = { anchor: end, focus: end }\n        }\n      }\n    }\n\n    if (Range.isExpanded(targetRange) && type.startsWith('delete')) {\n      if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n        const [start, end] = Range.edges(targetRange)\n        return storeDiff(targetRange.anchor.path, {\n          text: '',\n          end: end.offset,\n          start: start.offset,\n        })\n      }\n\n      const direction = type.endsWith('Backward') ? 'backward' : 'forward'\n      return scheduleAction(\n        () => Editor.deleteFragment(editor, { direction }),\n        { at: targetRange }\n      )\n    }\n\n    switch (type) {\n      case 'deleteByComposition':\n      case 'deleteByCut':\n      case 'deleteByDrag': {\n        return scheduleAction(() => Editor.deleteFragment(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteContent':\n      case 'deleteContentForward': {\n        const { anchor } = targetRange\n        if (Range.isCollapsed(targetRange)) {\n          const targetNode = Node.leaf(editor, anchor.path)\n\n          if (anchor.offset < targetNode.text.length) {\n            return storeDiff(anchor.path, {\n              text: '',\n              start: anchor.offset,\n              end: anchor.offset + 1,\n            })\n          }\n        }\n\n        return scheduleAction(() => Editor.deleteForward(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteContentBackward': {\n        const { anchor } = targetRange\n\n        // If we have a mismatch between the native and slate selection being collapsed\n        // we are most likely deleting a zero-width placeholder and thus should perform it\n        // as an action to ensure correct behavior (mostly happens with mark placeholders)\n        const nativeCollapsed = isDOMSelection(nativeTargetRange)\n          ? nativeTargetRange.isCollapsed\n          : !!nativeTargetRange?.collapsed\n\n        if (\n          nativeCollapsed &&\n          Range.isCollapsed(targetRange) &&\n          anchor.offset > 0\n        ) {\n          return storeDiff(anchor.path, {\n            text: '',\n            start: anchor.offset - 1,\n            end: anchor.offset,\n          })\n        }\n\n        return scheduleAction(() => Editor.deleteBackward(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'deleteEntireSoftLine': {\n        return scheduleAction(\n          () => {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            Editor.deleteForward(editor, { unit: 'line' })\n          },\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteHardLineBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'block' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteSoftLineBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'line' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteHardLineForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'block' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteSoftLineForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'line' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteWordBackward': {\n        return scheduleAction(\n          () => Editor.deleteBackward(editor, { unit: 'word' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'deleteWordForward': {\n        return scheduleAction(\n          () => Editor.deleteForward(editor, { unit: 'word' }),\n          { at: targetRange }\n        )\n      }\n\n      case 'insertLineBreak': {\n        return scheduleAction(() => Editor.insertSoftBreak(editor), {\n          at: targetRange,\n        })\n      }\n\n      case 'insertParagraph': {\n        return scheduleAction(() => Editor.insertBreak(editor), {\n          at: targetRange,\n        })\n      }\n      case 'insertCompositionText':\n      case 'deleteCompositionText':\n      case 'insertFromComposition':\n      case 'insertFromDrop':\n      case 'insertFromPaste':\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText': {\n        if (data?.constructor.name === 'DataTransfer') {\n          return scheduleAction(() => ReactEditor.insertData(editor, data), {\n            at: targetRange,\n          })\n        }\n\n        if (typeof data === 'string' && data.includes('\\n')) {\n          return scheduleAction(() => Editor.insertSoftBreak(editor), {\n            at: Range.end(targetRange),\n          })\n        }\n\n        let text = data ?? ''\n\n        // COMPAT: If we are writing inside a placeholder, the ime inserts the text inside\n        // the placeholder itself and thus includes the zero-width space inside edit events.\n        if (EDITOR_TO_PENDING_INSERTION_MARKS.get(editor)) {\n          text = text.replace('\\uFEFF', '')\n        }\n\n        if (Path.equals(targetRange.anchor.path, targetRange.focus.path)) {\n          const [start, end] = Range.edges(targetRange)\n\n          const diff = {\n            start: start.offset,\n            end: end.offset,\n            text,\n          }\n\n          // COMPAT: Swiftkey has a weird bug where the target range of the 2nd word\n          // inserted after a mark placeholder is inserted with an anchor offset off by 1.\n          // So writing 'some text' will result in 'some ttext'. Luckily all 'normal' insert\n          // text events are fired with the correct target ranges, only the final 'insertComposition'\n          // isn't, so we can adjust the target range start offset if we are confident this is the\n          // swiftkey insert causing the issue.\n          if (text && insertPositionHint && type === 'insertCompositionText') {\n            const hintPosition =\n              insertPositionHint.start + insertPositionHint.text.search(/\\S|$/)\n            const diffPosition = diff.start + diff.text.search(/\\S|$/)\n\n            if (\n              diffPosition === hintPosition + 1 &&\n              diff.end ===\n                insertPositionHint.start + insertPositionHint.text.length\n            ) {\n              debug('adjusting swiftKey insert position using hint')\n              diff.start -= 1\n              insertPositionHint = null\n              scheduleFlush()\n            } else {\n              insertPositionHint = false\n            }\n          } else if (type === 'insertText') {\n            if (insertPositionHint === null) {\n              insertPositionHint = diff\n            } else if (\n              insertPositionHint &&\n              Range.isCollapsed(targetRange) &&\n              insertPositionHint.end + insertPositionHint.text.length ===\n                start.offset\n            ) {\n              insertPositionHint = {\n                ...insertPositionHint,\n                text: insertPositionHint.text + text,\n              }\n            } else {\n              insertPositionHint = false\n            }\n          } else {\n            insertPositionHint = false\n          }\n\n          storeDiff(start.path, diff)\n          return\n        }\n\n        return scheduleAction(() => Editor.insertText(editor, text), {\n          at: targetRange,\n        })\n      }\n    }\n  }\n\n  const hasPendingAction = () => {\n    return !!EDITOR_TO_PENDING_ACTION.get(editor)\n  }\n\n  const hasPendingDiffs = () => {\n    return !!EDITOR_TO_PENDING_DIFFS.get(editor)?.length\n  }\n\n  const hasPendingChanges = () => {\n    return hasPendingAction() || hasPendingDiffs()\n  }\n\n  const isFlushing = () => {\n    return flushing\n  }\n\n  const handleUserSelect = (range: Range | null) => {\n    EDITOR_TO_PENDING_SELECTION.set(editor, range)\n\n    if (flushTimeoutId) {\n      clearTimeout(flushTimeoutId)\n      flushTimeoutId = null\n    }\n\n    const { selection } = editor\n    if (!range) {\n      return\n    }\n\n    const pathChanged =\n      !selection || !Path.equals(selection.anchor.path, range.anchor.path)\n    const parentPathChanged =\n      !selection ||\n      !Path.equals(\n        selection.anchor.path.slice(0, -1),\n        range.anchor.path.slice(0, -1)\n      )\n\n    if ((pathChanged && insertPositionHint) || parentPathChanged) {\n      insertPositionHint = false\n    }\n\n    if (pathChanged || !hasPendingDiffs()) {\n      flushTimeoutId = setTimeout(flush, FLUSH_DELAY)\n    }\n  }\n\n  const handleInput = () => {\n    if (hasPendingAction() || !hasPendingDiffs()) {\n      debug('flush input')\n      flush()\n    }\n  }\n\n  const handleKeyDown = (_: React.KeyboardEvent) => {\n    // COMPAT: Swiftkey closes the keyboard when typing inside a empty node\n    // directly next to a non-contenteditable element (= the placeholder).\n    // The only event fired soon enough for us to allow hiding the placeholder\n    // without swiftkey picking it up is the keydown event, so we have to hide it\n    // here. See https://github.com/ianstormtaylor/slate/pull/4988#issuecomment-1201050535\n    if (!hasPendingDiffs()) {\n      updatePlaceholderVisibility(true)\n      setTimeout(updatePlaceholderVisibility)\n    }\n  }\n\n  const scheduleFlush = () => {\n    if (!hasPendingAction()) {\n      actionTimeoutId = setTimeout(flush)\n    }\n  }\n\n  const handleDomMutations = (mutations: MutationRecord[]) => {\n    if (hasPendingDiffs() || hasPendingAction()) {\n      return\n    }\n\n    if (\n      mutations.some(mutation => isTrackedMutation(editor, mutation, mutations))\n    ) {\n      // Cause a re-render to restore the dom state if we encounter tracked mutations without\n      // a corresponding pending action.\n      EDITOR_TO_FORCE_RENDER.get(editor)?.()\n    }\n  }\n\n  return {\n    flush,\n    scheduleFlush,\n\n    hasPendingDiffs,\n    hasPendingAction,\n    hasPendingChanges,\n\n    isFlushing,\n\n    handleUserSelect,\n    handleCompositionEnd,\n    handleCompositionStart,\n    handleDOMBeforeInput,\n    handleKeyDown,\n\n    handleDomMutations,\n    handleInput,\n  }\n}\n","import { useEffect, useRef } from 'react'\n\nexport function useIsMounted() {\n  const isMountedRef = useRef(false)\n\n  useEffect(() => {\n    isMountedRef.current = true\n    return () => {\n      isMountedRef.current = false\n    }\n  }, [])\n\n  return isMountedRef.current\n}\n","import { RefObject, useEffect, useState } from 'react'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\nimport { isDOMElement } from '../utils/dom'\nimport { ReactEditor } from '../plugin/react-editor'\n\nexport function useMutationObserver(\n  node: RefObject<HTMLElement>,\n  callback: MutationCallback,\n  options: MutationObserverInit\n) {\n  const [mutationObserver] = useState(() => new MutationObserver(callback))\n\n  useIsomorphicLayoutEffect(() => {\n    // Discard mutations caused during render phase. This works due to react calling\n    // useLayoutEffect synchronously after the render phase before the next tick.\n    mutationObserver.takeRecords()\n  })\n\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined')\n    }\n\n    mutationObserver.observe(node.current, options)\n    return () => mutationObserver.disconnect()\n  }, [])\n}\n","import { RefObject, useState } from 'react'\nimport { useSlateStatic } from '../use-slate-static'\nimport { IS_ANDROID } from '../../utils/environment'\nimport { EDITOR_TO_SCHEDULE_FLUSH } from '../../utils/weak-maps'\nimport {\n  createAndroidInputManager,\n  CreateAndroidInputManagerOptions,\n} from './android-input-manager'\nimport { useIsMounted } from '../use-is-mounted'\nimport { useMutationObserver } from '../use-mutation-observer'\n\ntype UseAndroidInputManagerOptions = {\n  node: RefObject<HTMLElement>\n} & Omit<\n  CreateAndroidInputManagerOptions,\n  'editor' | 'onUserInput' | 'receivedUserInput'\n>\n\nconst MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  subtree: true,\n  childList: true,\n  characterData: true,\n}\n\nexport function useAndroidInputManager({\n  node,\n  ...options\n}: UseAndroidInputManagerOptions) {\n  if (!IS_ANDROID) {\n    return null\n  }\n\n  const editor = useSlateStatic()\n  const isMounted = useIsMounted()\n\n  const [inputManager] = useState(() =>\n    createAndroidInputManager({\n      editor,\n      ...options,\n    })\n  )\n\n  useMutationObserver(\n    node,\n    inputManager.handleDomMutations,\n    MUTATION_OBSERVER_CONFIG\n  )\n\n  EDITOR_TO_SCHEDULE_FLUSH.set(editor, inputManager.scheduleFlush)\n  if (isMounted) {\n    inputManager.flush()\n  }\n\n  return inputManager\n}\n","import { useCallback, useRef, useEffect } from 'react'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { useSlateStatic } from './use-slate-static'\n\nexport function useTrackUserInput() {\n  const editor = useSlateStatic()\n\n  const receivedUserInput = useRef<boolean>(false)\n  const animationFrameIdRef = useRef<number>(0)\n\n  const onUserInput = useCallback(() => {\n    if (receivedUserInput.current) {\n      return\n    }\n\n    receivedUserInput.current = true\n\n    const window = ReactEditor.getWindow(editor)\n    window.cancelAnimationFrame(animationFrameIdRef.current)\n\n    animationFrameIdRef.current = window.requestAnimationFrame(() => {\n      receivedUserInput.current = false\n    })\n  }, [])\n\n  useEffect(() => () => cancelAnimationFrame(animationFrameIdRef.current), [])\n\n  return {\n    receivedUserInput,\n    onUserInput,\n  }\n}\n","import getDirection from 'direction'\nimport debounce from 'lodash/debounce'\nimport throttle from 'lodash/throttle'\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Path,\n  Range,\n  Text,\n  Transforms,\n} from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\nimport useChildren from '../hooks/use-children'\nimport { DecorateContext } from '../hooks/use-decorate'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { ReadOnlyContext } from '../hooks/use-read-only'\nimport { useSlate } from '../hooks/use-slate'\nimport { TRIPLE_CLICK } from '../utils/constants'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMRange,\n  DOMText,\n  getDefaultView,\n  isDOMElement,\n  isDOMNode,\n  isPlainTextOnlyPaste,\n} from '../utils/dom'\nimport {\n  CAN_USE_DOM,\n  HAS_BEFORE_INPUT_SUPPORT,\n  IS_ANDROID,\n  IS_CHROME,\n  IS_FIREFOX,\n  IS_FIREFOX_LEGACY,\n  IS_IOS,\n  IS_QQBROWSER,\n  IS_SAFARI,\n  IS_UC_MOBILE,\n  IS_WECHATBROWSER,\n} from '../utils/environment'\nimport Hotkeys from '../utils/hotkeys'\nimport {\n  EDITOR_TO_ELEMENT,\n  EDITOR_TO_FORCE_RENDER,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n  EDITOR_TO_USER_MARKS,\n  EDITOR_TO_USER_SELECTION,\n  EDITOR_TO_WINDOW,\n  ELEMENT_TO_NODE,\n  IS_COMPOSING,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  MARK_PLACEHOLDER_SYMBOL,\n  NODE_TO_ELEMENT,\n  PLACEHOLDER_SYMBOL,\n} from '../utils/weak-maps'\nimport { RestoreDOM } from './restore-dom/restore-dom'\nimport { useAndroidInputManager } from '../hooks/android-input-manager/use-android-input-manager'\nimport { useTrackUserInput } from '../hooks/use-track-user-input'\n\ntype DeferredOperation = () => void\n\nconst Children = (props: Parameters<typeof useChildren>[0]) => (\n  <React.Fragment>{useChildren(props)}</React.Fragment>\n)\n\n/**\n * `RenderElementProps` are passed to the `renderElement` handler.\n */\n\nexport interface RenderElementProps {\n  children: any\n  element: Element\n  attributes: {\n    'data-slate-node': 'element'\n    'data-slate-inline'?: true\n    'data-slate-void'?: true\n    dir?: 'rtl'\n    ref: any\n  }\n}\n\n/**\n * `RenderLeafProps` are passed to the `renderLeaf` handler.\n */\n\nexport interface RenderLeafProps {\n  children: any\n  leaf: Text\n  text: Text\n  attributes: {\n    'data-slate-leaf': true\n  }\n}\n\n/**\n * `EditableProps` are passed to the `<Editable>` component.\n */\n\nexport type EditableProps = {\n  decorate?: (entry: NodeEntry) => Range[]\n  onDOMBeforeInput?: (event: InputEvent) => void\n  placeholder?: string\n  readOnly?: boolean\n  role?: string\n  style?: React.CSSProperties\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  renderPlaceholder?: (props: RenderPlaceholderProps) => JSX.Element\n  scrollSelectionIntoView?: (editor: ReactEditor, domRange: DOMRange) => void\n  as?: React.ElementType\n} & React.TextareaHTMLAttributes<HTMLDivElement>\n\n/**\n * Editable.\n */\n\nexport const Editable = (props: EditableProps) => {\n  const {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => <DefaultPlaceholder {...props} />,\n    scrollSelectionIntoView = defaultScrollSelectionIntoView,\n    style = {},\n    as: Component = 'div',\n    ...attributes\n  } = props\n  const editor = useSlate()\n  // Rerender editor when composition status changed\n  const [isComposing, setIsComposing] = useState(false)\n  const ref = useRef<HTMLDivElement>(null)\n  const deferredOperations = useRef<DeferredOperation[]>([])\n\n  const { onUserInput, receivedUserInput } = useTrackUserInput()\n\n  const [, forceRender] = useReducer(s => s + 1, 0)\n  EDITOR_TO_FORCE_RENDER.set(editor, forceRender)\n\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly)\n\n  // Keep track of some state for the event handler logic.\n  const state = useMemo(\n    () => ({\n      isDraggingInternally: false,\n      isUpdatingSelection: false,\n      latestElement: null as DOMElement | null,\n      hasMarkPlaceholder: false,\n    }),\n    []\n  )\n\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus()\n    }\n  }, [autoFocus])\n\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  const onDOMSelectionChange = useCallback(\n    throttle(() => {\n      if (\n        (IS_ANDROID || !ReactEditor.isComposing(editor)) &&\n        (!state.isUpdatingSelection || androidInputManager?.isFlushing()) &&\n        !state.isDraggingInternally\n      ) {\n        const root = ReactEditor.findDocumentOrShadowRoot(editor)\n        const { activeElement } = root\n        const el = ReactEditor.toDOMNode(editor, editor)\n        const domSelection = root.getSelection()\n\n        if (activeElement === el) {\n          state.latestElement = activeElement\n          IS_FOCUSED.set(editor, true)\n        } else {\n          IS_FOCUSED.delete(editor)\n        }\n\n        if (!domSelection) {\n          return Transforms.deselect(editor)\n        }\n\n        const { anchorNode, focusNode } = domSelection\n\n        const anchorNodeSelectable =\n          hasEditableTarget(editor, anchorNode) ||\n          isTargetInsideNonReadonlyVoid(editor, anchorNode)\n\n        const focusNodeSelectable =\n          hasEditableTarget(editor, focusNode) ||\n          isTargetInsideNonReadonlyVoid(editor, focusNode)\n\n        if (anchorNodeSelectable && focusNodeSelectable) {\n          const range = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: false,\n            suppressThrow: true,\n          })\n\n          if (range) {\n            if (\n              !ReactEditor.isComposing(editor) &&\n              !androidInputManager?.hasPendingChanges() &&\n              !androidInputManager?.isFlushing()\n            ) {\n              Transforms.select(editor, range)\n            } else {\n              androidInputManager?.handleUserSelect(range)\n            }\n          }\n        }\n\n        // Deselect the editor if the dom selection is not selectable in readonly mode\n        if (readOnly && (!anchorNodeSelectable || !focusNodeSelectable)) {\n          Transforms.deselect(editor)\n        }\n      }\n    }, 100),\n    [readOnly]\n  )\n\n  const scheduleOnDOMSelectionChange = useMemo(\n    () => debounce(onDOMSelectionChange, 0),\n    [onDOMSelectionChange]\n  )\n\n  const androidInputManager = useAndroidInputManager({\n    node: ref,\n    onDOMSelectionChange,\n    scheduleOnDOMSelectionChange,\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    let window\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window)\n      EDITOR_TO_ELEMENT.set(editor, ref.current)\n      NODE_TO_ELEMENT.set(editor, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, editor)\n    } else {\n      NODE_TO_ELEMENT.delete(editor)\n    }\n\n    // Make sure the DOM selection state is in sync.\n    const { selection } = editor\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = root.getSelection()\n\n    if (\n      !domSelection ||\n      !ReactEditor.isFocused(editor) ||\n      androidInputManager?.hasPendingAction()\n    ) {\n      return\n    }\n\n    const setDomSelection = (forceChange?: boolean) => {\n      const hasDomSelection = domSelection.type !== 'None'\n\n      // If the DOM selection is properly unset, we're done.\n      if (!selection && !hasDomSelection) {\n        return\n      }\n\n      // verify that the dom selection is in the editor\n      const editorElement = EDITOR_TO_ELEMENT.get(editor)!\n      let hasDomSelectionInEditor = false\n      if (\n        editorElement.contains(domSelection.anchorNode) &&\n        editorElement.contains(domSelection.focusNode)\n      ) {\n        hasDomSelectionInEditor = true\n      }\n\n      // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n      if (\n        hasDomSelection &&\n        hasDomSelectionInEditor &&\n        selection &&\n        !forceChange\n      ) {\n        const slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true,\n\n          // domSelection is not necessarily a valid Slate range\n          // (e.g. when clicking on contentEditable:false element)\n          suppressThrow: true,\n        })\n\n        if (slateRange && Range.equals(slateRange, selection)) {\n          if (!state.hasMarkPlaceholder) {\n            return\n          }\n\n          // Ensure selection is inside the mark placeholder\n          const { anchorNode } = domSelection\n          if (\n            anchorNode?.parentElement?.hasAttribute(\n              'data-slate-mark-placeholder'\n            )\n          ) {\n            return\n          }\n        }\n      }\n\n      // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n          suppressThrow: true,\n        })\n        return\n      }\n\n      // Otherwise the DOM selection is out of sync, so update it.\n      state.isUpdatingSelection = true\n\n      const newDomRange: DOMRange | null =\n        selection && ReactEditor.toDOMRange(editor, selection)\n\n      if (newDomRange) {\n        if (Range.isBackward(selection!)) {\n          domSelection.setBaseAndExtent(\n            newDomRange.endContainer,\n            newDomRange.endOffset,\n            newDomRange.startContainer,\n            newDomRange.startOffset\n          )\n        } else {\n          domSelection.setBaseAndExtent(\n            newDomRange.startContainer,\n            newDomRange.startOffset,\n            newDomRange.endContainer,\n            newDomRange.endOffset\n          )\n        }\n        scrollSelectionIntoView(editor, newDomRange)\n      } else {\n        domSelection.removeAllRanges()\n      }\n\n      return newDomRange\n    }\n\n    const newDomRange = setDomSelection()\n    const ensureSelection = androidInputManager?.isFlushing() === 'action'\n\n    if (!IS_ANDROID || !ensureSelection) {\n      setTimeout(() => {\n        // COMPAT: In Firefox, it's not enough to create a range, you also need\n        // to focus the contenteditable element too. (2016/11/16)\n        if (newDomRange && IS_FIREFOX) {\n          const el = ReactEditor.toDOMNode(editor, editor)\n          el.focus()\n        }\n\n        state.isUpdatingSelection = false\n      })\n      return\n    }\n\n    let timeoutId: ReturnType<typeof setTimeout> | null = null\n    const animationFrameId = requestAnimationFrame(() => {\n      if (ensureSelection) {\n        const ensureDomSelection = (forceChange?: boolean) => {\n          try {\n            const el = ReactEditor.toDOMNode(editor, editor)\n            el.focus()\n\n            setDomSelection(forceChange)\n          } catch (e) {\n            // Ignore, dom and state might be out of sync\n          }\n        }\n\n        // Compat: Android IMEs try to force their selection by manually re-applying it even after we set it.\n        // This essentially would make setting the slate selection during an update meaningless, so we force it\n        // again here. We can't only do it in the setTimeout after the animation frame since that would cause a\n        // visible flicker.\n        ensureDomSelection()\n\n        timeoutId = setTimeout(() => {\n          // COMPAT: While setting the selection in an animation frame visually correctly sets the selection,\n          // it doesn't update GBoards spellchecker state. We have to manually trigger a selection change after\n          // the animation frame to ensure it displays the correct state.\n          ensureDomSelection(true)\n          state.isUpdatingSelection = false\n        })\n      }\n    })\n\n    return () => {\n      cancelAnimationFrame(animationFrameId)\n      if (timeoutId) {\n        clearTimeout(timeoutId)\n      }\n    }\n  })\n\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  const onDOMBeforeInput = useCallback(\n    (event: InputEvent) => {\n      onUserInput()\n\n      if (\n        !readOnly &&\n        hasEditableTarget(editor, event.target) &&\n        !isDOMEventHandled(event, propsOnDOMBeforeInput)\n      ) {\n        // COMPAT: BeforeInput events aren't cancelable on android, so we have to handle them differently using the android input manager.\n        if (androidInputManager) {\n          return androidInputManager.handleDOMBeforeInput(event)\n        }\n\n        // Some IMEs/Chrome extensions like e.g. Grammarly set the selection immediately before\n        // triggering a `beforeinput` expecting the change to be applied to the immediately before\n        // set selection.\n        scheduleOnDOMSelectionChange.flush()\n        onDOMSelectionChange.flush()\n\n        const { selection } = editor\n        const { inputType: type } = event\n        const data = (event as any).dataTransfer || event.data || undefined\n\n        const isCompositionChange =\n          type === 'insertCompositionText' || type === 'deleteCompositionText'\n\n        // COMPAT: use composition change events as a hint to where we should insert\n        // composition text if we aren't composing to work around https://github.com/ianstormtaylor/slate/issues/5038\n        if (isCompositionChange && ReactEditor.isComposing(editor)) {\n          return\n        }\n\n        let native = false\n        if (\n          type === 'insertText' &&\n          selection &&\n          Range.isCollapsed(selection) &&\n          // Only use native character insertion for single characters a-z or space for now.\n          // Long-press events (hold a + press 4 = ) to choose a special character otherwise\n          // causes duplicate inserts.\n          event.data &&\n          event.data.length === 1 &&\n          /[a-z ]/i.test(event.data) &&\n          // Chrome has issues correctly editing the start of nodes: https://bugs.chromium.org/p/chromium/issues/detail?id=1249405\n          // When there is an inline element, e.g. a link, and you select\n          // right after it (the start of the next node).\n          selection.anchor.offset !== 0\n        ) {\n          native = true\n\n          // Skip native if there are marks, as\n          // `insertText` will insert a node, not just text.\n          if (editor.marks) {\n            native = false\n          }\n\n          // Chrome also has issues correctly editing the end of anchor elements: https://bugs.chromium.org/p/chromium/issues/detail?id=1259100\n          // Therefore we don't allow native events to insert text at the end of anchor nodes.\n          const { anchor } = selection\n\n          const [node, offset] = ReactEditor.toDOMPoint(editor, anchor)\n          const anchorNode = node.parentElement?.closest('a')\n\n          const window = ReactEditor.getWindow(editor)\n\n          if (\n            native &&\n            anchorNode &&\n            ReactEditor.hasDOMNode(editor, anchorNode)\n          ) {\n            // Find the last text node inside the anchor.\n            const lastText = window?.document\n              .createTreeWalker(anchorNode, NodeFilter.SHOW_TEXT)\n              .lastChild() as DOMText | null\n\n            if (lastText === node && lastText.textContent?.length === offset) {\n              native = false\n            }\n          }\n\n          // Chrome has issues with the presence of tab characters inside elements with whiteSpace = 'pre'\n          // causing abnormal insert behavior: https://bugs.chromium.org/p/chromium/issues/detail?id=1219139\n          if (\n            native &&\n            node.parentElement &&\n            window?.getComputedStyle(node.parentElement)?.whiteSpace === 'pre'\n          ) {\n            const block = Editor.above(editor, {\n              at: anchor.path,\n              match: n => Editor.isBlock(editor, n),\n            })\n\n            if (block && Node.string(block[0]).includes('\\t')) {\n              native = false\n            }\n          }\n        }\n\n        // COMPAT: For the deleting forward/backward input types we don't want\n        // to change the selection because it is the range that will be deleted,\n        // and those commands determine that for themselves.\n        if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n          const [targetRange] = (event as any).getTargetRanges()\n\n          if (targetRange) {\n            const range = ReactEditor.toSlateRange(editor, targetRange, {\n              exactMatch: false,\n              suppressThrow: false,\n            })\n\n            if (!selection || !Range.equals(selection, range)) {\n              native = false\n\n              const selectionRef =\n                !isCompositionChange &&\n                editor.selection &&\n                Editor.rangeRef(editor, editor.selection)\n\n              Transforms.select(editor, range)\n\n              if (selectionRef) {\n                EDITOR_TO_USER_SELECTION.set(editor, selectionRef)\n              }\n            }\n          }\n        }\n\n        // Composition change types occur while a user is composing text and can't be\n        // cancelled. Let them through and wait for the composition to end.\n        if (isCompositionChange) {\n          return\n        }\n\n        if (!native) {\n          event.preventDefault()\n        }\n\n        // COMPAT: If the selection is expanded, even if the command seems like\n        // a delete forward/backward command it should delete the selection.\n        if (\n          selection &&\n          Range.isExpanded(selection) &&\n          type.startsWith('delete')\n        ) {\n          const direction = type.endsWith('Backward') ? 'backward' : 'forward'\n          Editor.deleteFragment(editor, { direction })\n          return\n        }\n\n        switch (type) {\n          case 'deleteByComposition':\n          case 'deleteByCut':\n          case 'deleteByDrag': {\n            Editor.deleteFragment(editor)\n            break\n          }\n\n          case 'deleteContent':\n          case 'deleteContentForward': {\n            Editor.deleteForward(editor)\n            break\n          }\n\n          case 'deleteContentBackward': {\n            Editor.deleteBackward(editor)\n            break\n          }\n\n          case 'deleteEntireSoftLine': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineForward': {\n            Editor.deleteForward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineForward': {\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteWordBackward': {\n            Editor.deleteBackward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'deleteWordForward': {\n            Editor.deleteForward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'insertLineBreak':\n            Editor.insertSoftBreak(editor)\n            break\n\n          case 'insertParagraph': {\n            Editor.insertBreak(editor)\n            break\n          }\n\n          case 'insertFromComposition':\n          case 'insertFromDrop':\n          case 'insertFromPaste':\n          case 'insertFromYank':\n          case 'insertReplacementText':\n          case 'insertText': {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              if (ReactEditor.isComposing(editor)) {\n                setIsComposing(false)\n                IS_COMPOSING.set(editor, false)\n              }\n            }\n\n            // use a weak comparison instead of 'instanceof' to allow\n            // programmatic access of paste events coming from external windows\n            // like cypress where cy.window does not work realibly\n            if (data?.constructor.name === 'DataTransfer') {\n              ReactEditor.insertData(editor, data)\n            } else if (typeof data === 'string') {\n              // Only insertText operations use the native functionality, for now.\n              // Potentially expand to single character deletes, as well.\n              if (native) {\n                deferredOperations.current.push(() =>\n                  Editor.insertText(editor, data)\n                )\n              } else {\n                Editor.insertText(editor, data)\n              }\n            }\n\n            break\n          }\n        }\n\n        // Restore the actual user section if nothing manually set it.\n        const toRestore = EDITOR_TO_USER_SELECTION.get(editor)?.unref()\n        EDITOR_TO_USER_SELECTION.delete(editor)\n\n        if (\n          toRestore &&\n          (!editor.selection || !Range.equals(editor.selection, toRestore))\n        ) {\n          Transforms.select(editor, toRestore)\n        }\n      }\n    },\n    [readOnly, propsOnDOMBeforeInput]\n  )\n\n  // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput)\n    }\n\n    return () => {\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput)\n      }\n    }\n  }, [onDOMBeforeInput])\n\n  // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n  useIsomorphicLayoutEffect(() => {\n    const window = ReactEditor.getWindow(editor)\n\n    window.document.addEventListener(\n      'selectionchange',\n      scheduleOnDOMSelectionChange\n    )\n\n    return () => {\n      window.document.removeEventListener(\n        'selectionchange',\n        scheduleOnDOMSelectionChange\n      )\n    }\n  }, [scheduleOnDOMSelectionChange])\n\n  const decorations = decorate([editor, []])\n\n  if (\n    placeholder &&\n    editor.children.length === 1 &&\n    Array.from(Node.texts(editor)).length === 1 &&\n    Node.string(editor) === '' &&\n    !isComposing\n  ) {\n    const start = Editor.start(editor, [])\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start,\n    })\n  }\n\n  const { marks } = editor\n  state.hasMarkPlaceholder = false\n\n  if (editor.selection && Range.isCollapsed(editor.selection) && marks) {\n    const { anchor } = editor.selection\n    const leaf = Node.leaf(editor, anchor.path)\n    const { text, ...rest } = leaf\n\n    // While marks isn't a 'complete' text, we can still use loose Text.equals\n    // here which only compares marks anyway.\n    if (!Text.equals(leaf, marks as Text, { loose: true })) {\n      state.hasMarkPlaceholder = true\n\n      const unset = Object.fromEntries(\n        Object.keys(rest).map(mark => [mark, null])\n      )\n\n      decorations.push({\n        [MARK_PLACEHOLDER_SYMBOL]: true,\n        ...unset,\n        ...marks,\n\n        anchor,\n        focus: anchor,\n      })\n    }\n  }\n\n  // Update EDITOR_TO_MARK_PLACEHOLDER_MARKS in setTimeout useEffect to ensure we don't set it\n  // before we receive the composition end event.\n  useEffect(() => {\n    setTimeout(() => {\n      const { selection } = editor\n      if (selection) {\n        const { anchor } = selection\n        const text = Node.leaf(editor, anchor.path)\n\n        // While marks isn't a 'complete' text, we can still use loose Text.equals\n        // here which only compares marks anyway.\n        if (marks && !Text.equals(text, marks as Text, { loose: true })) {\n          EDITOR_TO_PENDING_INSERTION_MARKS.set(editor, marks)\n          return\n        }\n      }\n\n      EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n    })\n  })\n\n  return (\n    <ReadOnlyContext.Provider value={readOnly}>\n      <DecorateContext.Provider value={decorate}>\n        <RestoreDOM node={ref} receivedUserInput={receivedUserInput}>\n          <Component\n            role={readOnly ? undefined : 'textbox'}\n            aria-multiline={readOnly ? undefined : true}\n            {...attributes}\n            // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n            // have to use hacks to make these replacement-based features work.\n            // For SSR situations HAS_BEFORE_INPUT_SUPPORT is false and results in prop\n            // mismatch warning app moves to browser. Pass-through consumer props when\n            // not CAN_USE_DOM (SSR) and default to falsy value\n            spellCheck={\n              HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                ? attributes.spellCheck\n                : false\n            }\n            autoCorrect={\n              HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                ? attributes.autoCorrect\n                : 'false'\n            }\n            autoCapitalize={\n              HAS_BEFORE_INPUT_SUPPORT || !CAN_USE_DOM\n                ? attributes.autoCapitalize\n                : 'false'\n            }\n            data-slate-editor\n            data-slate-node=\"value\"\n            // explicitly set this\n            contentEditable={!readOnly}\n            // in some cases, a decoration needs access to the range / selection to decorate a text node,\n            // then you will select the whole text node when you select part the of text\n            // this magic zIndex=\"-1\" will fix it\n            zindex={-1}\n            suppressContentEditableWarning\n            ref={ref}\n            style={{\n              // Allow positioning relative to the editable element.\n              position: 'relative',\n              // Prevent the default outline styles.\n              outline: 'none',\n              // Preserve adjacent whitespace and new lines.\n              whiteSpace: 'pre-wrap',\n              // Allow words to break if they are too long.\n              wordWrap: 'break-word',\n              // Allow for passed-in styles to override anything.\n              ...style,\n            }}\n            onBeforeInput={useCallback(\n              (event: React.FormEvent<HTMLDivElement>) => {\n                // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                // fall back to React's leaky polyfill instead just for it. It\n                // only works for the `insertText` input type.\n                if (\n                  !HAS_BEFORE_INPUT_SUPPORT &&\n                  !readOnly &&\n                  !isEventHandled(event, attributes.onBeforeInput) &&\n                  hasEditableTarget(editor, event.target)\n                ) {\n                  event.preventDefault()\n                  if (!ReactEditor.isComposing(editor)) {\n                    const text = (event as any).data as string\n                    Editor.insertText(editor, text)\n                  }\n                }\n              },\n              [readOnly]\n            )}\n            onInput={useCallback((event: React.SyntheticEvent) => {\n              if (androidInputManager) {\n                androidInputManager.handleInput()\n                return\n              }\n\n              // Flush native operations, as native events will have propogated\n              // and we can correctly compare DOM text values in components\n              // to stop rendering, so that browser functions like autocorrect\n              // and spellcheck work as expected.\n              for (const op of deferredOperations.current) {\n                op()\n              }\n              deferredOperations.current = []\n            }, [])}\n            onBlur={useCallback(\n              (event: React.FocusEvent<HTMLDivElement>) => {\n                if (\n                  readOnly ||\n                  state.isUpdatingSelection ||\n                  !hasEditableTarget(editor, event.target) ||\n                  isEventHandled(event, attributes.onBlur)\n                ) {\n                  return\n                }\n\n                // COMPAT: If the current `activeElement` is still the previous\n                // one, this is due to the window being blurred when the tab\n                // itself becomes unfocused, so we want to abort early to allow to\n                // editor to stay focused when the tab becomes focused again.\n                const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                if (state.latestElement === root.activeElement) {\n                  return\n                }\n\n                const { relatedTarget } = event\n                const el = ReactEditor.toDOMNode(editor, editor)\n\n                // COMPAT: The event should be ignored if the focus is returning\n                // to the editor from an embedded editable element (eg. an <input>\n                // element inside a void node).\n                if (relatedTarget === el) {\n                  return\n                }\n\n                // COMPAT: The event should be ignored if the focus is moving from\n                // the editor to inside a void node's spacer element.\n                if (\n                  isDOMElement(relatedTarget) &&\n                  relatedTarget.hasAttribute('data-slate-spacer')\n                ) {\n                  return\n                }\n\n                // COMPAT: The event should be ignored if the focus is moving to a\n                // non- editable section of an element that isn't a void node (eg.\n                // a list item of the check list example).\n                if (\n                  relatedTarget != null &&\n                  isDOMNode(relatedTarget) &&\n                  ReactEditor.hasDOMNode(editor, relatedTarget)\n                ) {\n                  const node = ReactEditor.toSlateNode(editor, relatedTarget)\n\n                  if (Element.isElement(node) && !editor.isVoid(node)) {\n                    return\n                  }\n                }\n\n                // COMPAT: Safari doesn't always remove the selection even if the content-\n                // editable element no longer has focus. Refer to:\n                // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n                if (IS_SAFARI) {\n                  const domSelection = root.getSelection()\n                  domSelection?.removeAllRanges()\n                }\n\n                IS_FOCUSED.delete(editor)\n              },\n              [readOnly, attributes.onBlur]\n            )}\n            onClick={useCallback(\n              (event: React.MouseEvent<HTMLDivElement>) => {\n                if (\n                  hasTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onClick) &&\n                  isDOMNode(event.target)\n                ) {\n                  const node = ReactEditor.toSlateNode(editor, event.target)\n                  const path = ReactEditor.findPath(editor, node)\n\n                  // At this time, the Slate document may be arbitrarily different,\n                  // because onClick handlers can change the document before we get here.\n                  // Therefore we must check that this path actually exists,\n                  // and that it still refers to the same node.\n                  if (\n                    !Editor.hasPath(editor, path) ||\n                    Node.get(editor, path) !== node\n                  ) {\n                    return\n                  }\n\n                  if (event.detail === TRIPLE_CLICK && path.length >= 1) {\n                    let blockPath = path\n                    if (!Editor.isBlock(editor, node)) {\n                      const block = Editor.above(editor, {\n                        match: n => Editor.isBlock(editor, n),\n                        at: path,\n                      })\n\n                      blockPath = block?.[1] ?? path.slice(0, 1)\n                    }\n\n                    const range = Editor.range(editor, blockPath)\n                    Transforms.select(editor, range)\n                    return\n                  }\n\n                  if (readOnly) {\n                    return\n                  }\n\n                  const start = Editor.start(editor, path)\n                  const end = Editor.end(editor, path)\n                  const startVoid = Editor.void(editor, { at: start })\n                  const endVoid = Editor.void(editor, { at: end })\n\n                  if (\n                    startVoid &&\n                    endVoid &&\n                    Path.equals(startVoid[1], endVoid[1])\n                  ) {\n                    const range = Editor.range(editor, start)\n                    Transforms.select(editor, range)\n                  }\n                }\n              },\n              [readOnly, attributes.onClick]\n            )}\n            onCompositionEnd={useCallback(\n              (event: React.CompositionEvent<HTMLDivElement>) => {\n                if (hasEditableTarget(editor, event.target)) {\n                  if (ReactEditor.isComposing(editor)) {\n                    setIsComposing(false)\n                    IS_COMPOSING.set(editor, false)\n                  }\n\n                  androidInputManager?.handleCompositionEnd(event)\n\n                  if (\n                    isEventHandled(event, attributes.onCompositionEnd) ||\n                    IS_ANDROID\n                  ) {\n                    return\n                  }\n\n                  // COMPAT: In Chrome, `beforeinput` events for compositions\n                  // aren't correct and never fire the \"insertFromComposition\"\n                  // type that we need. So instead, insert whenever a composition\n                  // ends since it will already have been committed to the DOM.\n                  if (\n                    !IS_SAFARI &&\n                    !IS_FIREFOX_LEGACY &&\n                    !IS_IOS &&\n                    !IS_QQBROWSER &&\n                    !IS_WECHATBROWSER &&\n                    !IS_UC_MOBILE &&\n                    event.data\n                  ) {\n                    const placeholderMarks = EDITOR_TO_PENDING_INSERTION_MARKS.get(\n                      editor\n                    )\n                    EDITOR_TO_PENDING_INSERTION_MARKS.delete(editor)\n\n                    // Ensure we insert text with the marks the user was actually seeing\n                    if (placeholderMarks !== undefined) {\n                      EDITOR_TO_USER_MARKS.set(editor, editor.marks)\n                      editor.marks = placeholderMarks\n                    }\n\n                    Editor.insertText(editor, event.data)\n\n                    const userMarks = EDITOR_TO_USER_MARKS.get(editor)\n                    EDITOR_TO_USER_MARKS.delete(editor)\n                    if (userMarks !== undefined) {\n                      editor.marks = userMarks\n                    }\n                  }\n                }\n              },\n              [attributes.onCompositionEnd]\n            )}\n            onCompositionUpdate={useCallback(\n              (event: React.CompositionEvent<HTMLDivElement>) => {\n                if (\n                  hasEditableTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onCompositionUpdate)\n                ) {\n                  if (!ReactEditor.isComposing(editor)) {\n                    setIsComposing(true)\n                    IS_COMPOSING.set(editor, true)\n                  }\n                }\n              },\n              [attributes.onCompositionUpdate]\n            )}\n            onCompositionStart={useCallback(\n              (event: React.CompositionEvent<HTMLDivElement>) => {\n                if (hasEditableTarget(editor, event.target)) {\n                  androidInputManager?.handleCompositionStart(event)\n\n                  if (\n                    isEventHandled(event, attributes.onCompositionStart) ||\n                    IS_ANDROID\n                  ) {\n                    return\n                  }\n\n                  setIsComposing(true)\n\n                  const { selection } = editor\n                  if (selection) {\n                    if (Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor)\n                      return\n                    }\n                    const inline = Editor.above(editor, {\n                      match: n => Editor.isInline(editor, n),\n                      mode: 'highest',\n                    })\n                    if (inline) {\n                      const [, inlinePath] = inline\n                      if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n                        const point = Editor.after(editor, inlinePath)!\n                        Transforms.setSelection(editor, {\n                          anchor: point,\n                          focus: point,\n                        })\n                      }\n                    }\n                  }\n                }\n              },\n              [attributes.onCompositionStart]\n            )}\n            onCopy={useCallback(\n              (event: React.ClipboardEvent<HTMLDivElement>) => {\n                if (\n                  hasEditableTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onCopy)\n                ) {\n                  event.preventDefault()\n                  ReactEditor.setFragmentData(\n                    editor,\n                    event.clipboardData,\n                    'copy'\n                  )\n                }\n              },\n              [attributes.onCopy]\n            )}\n            onCut={useCallback(\n              (event: React.ClipboardEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  hasEditableTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onCut)\n                ) {\n                  event.preventDefault()\n                  ReactEditor.setFragmentData(\n                    editor,\n                    event.clipboardData,\n                    'cut'\n                  )\n                  const { selection } = editor\n\n                  if (selection) {\n                    if (Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor)\n                    } else {\n                      const node = Node.parent(editor, selection.anchor.path)\n                      if (Editor.isVoid(editor, node)) {\n                        Transforms.delete(editor)\n                      }\n                    }\n                  }\n                }\n              },\n              [readOnly, attributes.onCut]\n            )}\n            onDragOver={useCallback(\n              (event: React.DragEvent<HTMLDivElement>) => {\n                if (\n                  hasTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onDragOver)\n                ) {\n                  // Only when the target is void, call `preventDefault` to signal\n                  // that drops are allowed. Editable content is droppable by\n                  // default, and calling `preventDefault` hides the cursor.\n                  const node = ReactEditor.toSlateNode(editor, event.target)\n\n                  if (Editor.isVoid(editor, node)) {\n                    event.preventDefault()\n                  }\n                }\n              },\n              [attributes.onDragOver]\n            )}\n            onDragStart={useCallback(\n              (event: React.DragEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  hasTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onDragStart)\n                ) {\n                  const node = ReactEditor.toSlateNode(editor, event.target)\n                  const path = ReactEditor.findPath(editor, node)\n                  const voidMatch =\n                    Editor.isVoid(editor, node) ||\n                    Editor.void(editor, { at: path, voids: true })\n\n                  // If starting a drag on a void node, make sure it is selected\n                  // so that it shows up in the selection's fragment.\n                  if (voidMatch) {\n                    const range = Editor.range(editor, path)\n                    Transforms.select(editor, range)\n                  }\n\n                  state.isDraggingInternally = true\n\n                  ReactEditor.setFragmentData(\n                    editor,\n                    event.dataTransfer,\n                    'drag'\n                  )\n                }\n              },\n              [readOnly, attributes.onDragStart]\n            )}\n            onDrop={useCallback(\n              (event: React.DragEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  hasTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onDrop)\n                ) {\n                  event.preventDefault()\n\n                  // Keep a reference to the dragged range before updating selection\n                  const draggedRange = editor.selection\n\n                  // Find the range where the drop happened\n                  const range = ReactEditor.findEventRange(editor, event)\n                  const data = event.dataTransfer\n\n                  Transforms.select(editor, range)\n\n                  if (state.isDraggingInternally) {\n                    if (\n                      draggedRange &&\n                      !Range.equals(draggedRange, range) &&\n                      !Editor.void(editor, { at: range, voids: true })\n                    ) {\n                      Transforms.delete(editor, {\n                        at: draggedRange,\n                      })\n                    }\n                  }\n\n                  ReactEditor.insertData(editor, data)\n\n                  // When dragging from another source into the editor, it's possible\n                  // that the current editor does not have focus.\n                  if (!ReactEditor.isFocused(editor)) {\n                    ReactEditor.focus(editor)\n                  }\n                }\n\n                state.isDraggingInternally = false\n              },\n              [readOnly, attributes.onDrop]\n            )}\n            onDragEnd={useCallback(\n              (event: React.DragEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  state.isDraggingInternally &&\n                  attributes.onDragEnd &&\n                  hasTarget(editor, event.target)\n                ) {\n                  attributes.onDragEnd(event)\n                }\n\n                // When dropping on a different droppable element than the current editor,\n                // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n                // Note: `onDragEnd` is only called when `onDrop` is not called\n                state.isDraggingInternally = false\n              },\n              [readOnly, attributes.onDragEnd]\n            )}\n            onFocus={useCallback(\n              (event: React.FocusEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  !state.isUpdatingSelection &&\n                  hasEditableTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onFocus)\n                ) {\n                  const el = ReactEditor.toDOMNode(editor, editor)\n                  const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                  state.latestElement = root.activeElement\n\n                  // COMPAT: If the editor has nested editable elements, the focus\n                  // can go to them. In Firefox, this must be prevented because it\n                  // results in issues with keyboard navigation. (2017/03/30)\n                  if (IS_FIREFOX && event.target !== el) {\n                    el.focus()\n                    return\n                  }\n\n                  IS_FOCUSED.set(editor, true)\n                }\n              },\n              [readOnly, attributes.onFocus]\n            )}\n            onKeyDown={useCallback(\n              (event: React.KeyboardEvent<HTMLDivElement>) => {\n                if (!readOnly && hasEditableTarget(editor, event.target)) {\n                  androidInputManager?.handleKeyDown(event)\n\n                  const { nativeEvent } = event\n\n                  // COMPAT: The composition end event isn't fired reliably in all browsers,\n                  // so we sometimes might end up stuck in a composition state even though we\n                  // aren't composing any more.\n                  if (\n                    ReactEditor.isComposing(editor) &&\n                    nativeEvent.isComposing === false\n                  ) {\n                    IS_COMPOSING.set(editor, false)\n                    setIsComposing(false)\n                  }\n\n                  if (\n                    isEventHandled(event, attributes.onKeyDown) ||\n                    ReactEditor.isComposing(editor)\n                  ) {\n                    return\n                  }\n\n                  const { selection } = editor\n                  const element =\n                    editor.children[\n                      selection !== null ? selection.focus.path[0] : 0\n                    ]\n                  const isRTL = getDirection(Node.string(element)) === 'rtl'\n\n                  // COMPAT: Since we prevent the default behavior on\n                  // `beforeinput` events, the browser doesn't think there's ever\n                  // any history stack to undo or redo, so we have to manage these\n                  // hotkeys ourselves. (2019/11/06)\n                  if (Hotkeys.isRedo(nativeEvent)) {\n                    event.preventDefault()\n                    const maybeHistoryEditor: any = editor\n\n                    if (typeof maybeHistoryEditor.redo === 'function') {\n                      maybeHistoryEditor.redo()\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isUndo(nativeEvent)) {\n                    event.preventDefault()\n                    const maybeHistoryEditor: any = editor\n\n                    if (typeof maybeHistoryEditor.undo === 'function') {\n                      maybeHistoryEditor.undo()\n                    }\n\n                    return\n                  }\n\n                  // COMPAT: Certain browsers don't handle the selection updates\n                  // properly. In Chrome, the selection isn't properly extended.\n                  // And in Firefox, the selection isn't properly collapsed.\n                  // (2017/10/17)\n                  if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n                    event.preventDefault()\n                    Transforms.move(editor, { unit: 'line', reverse: true })\n                    return\n                  }\n\n                  if (Hotkeys.isMoveLineForward(nativeEvent)) {\n                    event.preventDefault()\n                    Transforms.move(editor, { unit: 'line' })\n                    return\n                  }\n\n                  if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n                    event.preventDefault()\n                    Transforms.move(editor, {\n                      unit: 'line',\n                      edge: 'focus',\n                      reverse: true,\n                    })\n                    return\n                  }\n\n                  if (Hotkeys.isExtendLineForward(nativeEvent)) {\n                    event.preventDefault()\n                    Transforms.move(editor, { unit: 'line', edge: 'focus' })\n                    return\n                  }\n\n                  // COMPAT: If a void node is selected, or a zero-width text node\n                  // adjacent to an inline is selected, we need to handle these\n                  // hotkeys manually because browsers won't be able to skip over\n                  // the void node with the zero-width space not being an empty\n                  // string.\n                  if (Hotkeys.isMoveBackward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isCollapsed(selection)) {\n                      Transforms.move(editor, { reverse: !isRTL })\n                    } else {\n                      Transforms.collapse(editor, { edge: 'start' })\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isMoveForward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isCollapsed(selection)) {\n                      Transforms.move(editor, { reverse: isRTL })\n                    } else {\n                      Transforms.collapse(editor, { edge: 'end' })\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Transforms.collapse(editor, { edge: 'focus' })\n                    }\n\n                    Transforms.move(editor, { unit: 'word', reverse: !isRTL })\n                    return\n                  }\n\n                  if (Hotkeys.isMoveWordForward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Transforms.collapse(editor, { edge: 'focus' })\n                    }\n\n                    Transforms.move(editor, { unit: 'word', reverse: isRTL })\n                    return\n                  }\n\n                  // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                  // fall back to guessing at the input intention for hotkeys.\n                  // COMPAT: In iOS, some of these hotkeys are handled in the\n                  if (!HAS_BEFORE_INPUT_SUPPORT) {\n                    // We don't have a core behavior for these, but they change the\n                    // DOM if we don't prevent them, so we have to.\n                    if (\n                      Hotkeys.isBold(nativeEvent) ||\n                      Hotkeys.isItalic(nativeEvent) ||\n                      Hotkeys.isTransposeCharacter(nativeEvent)\n                    ) {\n                      event.preventDefault()\n                      return\n                    }\n\n                    if (Hotkeys.isSoftBreak(nativeEvent)) {\n                      event.preventDefault()\n                      Editor.insertSoftBreak(editor)\n                      return\n                    }\n\n                    if (Hotkeys.isSplitBlock(nativeEvent)) {\n                      event.preventDefault()\n                      Editor.insertBreak(editor)\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteBackward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'backward' })\n                      } else {\n                        Editor.deleteBackward(editor)\n                      }\n\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteForward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'forward' })\n                      } else {\n                        Editor.deleteForward(editor)\n                      }\n\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'backward' })\n                      } else {\n                        Editor.deleteBackward(editor, { unit: 'line' })\n                      }\n\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'forward' })\n                      } else {\n                        Editor.deleteForward(editor, { unit: 'line' })\n                      }\n\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'backward' })\n                      } else {\n                        Editor.deleteBackward(editor, { unit: 'word' })\n                      }\n\n                      return\n                    }\n\n                    if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n                      event.preventDefault()\n\n                      if (selection && Range.isExpanded(selection)) {\n                        Editor.deleteFragment(editor, { direction: 'forward' })\n                      } else {\n                        Editor.deleteForward(editor, { unit: 'word' })\n                      }\n\n                      return\n                    }\n                  } else {\n                    if (IS_CHROME || IS_SAFARI) {\n                      // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n                      // an event when deleting backwards in a selected void inline node\n                      if (\n                        selection &&\n                        (Hotkeys.isDeleteBackward(nativeEvent) ||\n                          Hotkeys.isDeleteForward(nativeEvent)) &&\n                        Range.isCollapsed(selection)\n                      ) {\n                        const currentNode = Node.parent(\n                          editor,\n                          selection.anchor.path\n                        )\n\n                        if (\n                          Element.isElement(currentNode) &&\n                          Editor.isVoid(editor, currentNode) &&\n                          (Editor.isInline(editor, currentNode) ||\n                            Editor.isBlock(editor, currentNode))\n                        ) {\n                          event.preventDefault()\n                          Editor.deleteBackward(editor, { unit: 'block' })\n\n                          return\n                        }\n                      }\n                    }\n                  }\n                }\n              },\n              [readOnly, attributes.onKeyDown]\n            )}\n            onPaste={useCallback(\n              (event: React.ClipboardEvent<HTMLDivElement>) => {\n                if (\n                  !readOnly &&\n                  hasEditableTarget(editor, event.target) &&\n                  !isEventHandled(event, attributes.onPaste)\n                ) {\n                  // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                  // fall back to React's `onPaste` here instead.\n                  // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n                  // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n                  if (\n                    !HAS_BEFORE_INPUT_SUPPORT ||\n                    isPlainTextOnlyPaste(event.nativeEvent)\n                  ) {\n                    event.preventDefault()\n                    ReactEditor.insertData(editor, event.clipboardData)\n                  }\n                }\n              },\n              [readOnly, attributes.onPaste]\n            )}\n          >\n            <Children\n              decorations={decorations}\n              node={editor}\n              renderElement={renderElement}\n              renderPlaceholder={renderPlaceholder}\n              renderLeaf={renderLeaf}\n              selection={editor.selection}\n            />\n          </Component>\n        </RestoreDOM>\n      </DecorateContext.Provider>\n    </ReadOnlyContext.Provider>\n  )\n}\n\n/**\n * The props that get passed to renderPlaceholder\n */\nexport type RenderPlaceholderProps = {\n  children: any\n  attributes: {\n    'data-slate-placeholder': boolean\n    dir?: 'rtl'\n    contentEditable: boolean\n    ref: React.RefObject<any>\n    style: React.CSSProperties\n  }\n}\n\n/**\n * The default placeholder element\n */\n\nexport const DefaultPlaceholder = ({\n  attributes,\n  children,\n}: RenderPlaceholderProps) => (\n  // COMPAT: Artificially add a line-break to the end on the placeholder element\n  // to prevent Android IMEs to pick up its content in autocorrect and to auto-capitalize the first letter\n  <span {...attributes}>\n    {children}\n    {IS_ANDROID && <br />}\n  </span>\n)\n\n/**\n * A default memoized decorate function.\n */\n\nexport const defaultDecorate: (entry: NodeEntry) => Range[] = () => []\n\n/**\n * A default implement to scroll dom range into view.\n */\n\nconst defaultScrollSelectionIntoView = (\n  editor: ReactEditor,\n  domRange: DOMRange\n) => {\n  // This was affecting the selection of multiple blocks and dragging behavior,\n  // so enabled only if the selection has been collapsed.\n  if (\n    !editor.selection ||\n    (editor.selection && Range.isCollapsed(editor.selection))\n  ) {\n    const leafEl = domRange.startContainer.parentElement!\n    leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange)\n    scrollIntoView(leafEl, {\n      scrollMode: 'if-needed',\n    })\n\n    // @ts-expect-error an unorthodox delete D:\n    delete leafEl.getBoundingClientRect\n  }\n}\n\n/**\n * Check if the target is in the editor.\n */\n\nexport const hasTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target)\n}\n\n/**\n * Check if the target is editable and in the editor.\n */\n\nexport const hasEditableTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return (\n    isDOMNode(target) &&\n    ReactEditor.hasDOMNode(editor, target, { editable: true })\n  )\n}\n\n/**\n * Check if the target is inside void and in an non-readonly editor.\n */\n\nexport const isTargetInsideNonReadonlyVoid = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): boolean => {\n  if (IS_READ_ONLY.get(editor)) return false\n\n  const slateNode =\n    hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target)\n  return Editor.isVoid(editor, slateNode)\n}\n\n/**\n * Check if an event is overrided by a handler.\n */\n\nexport const isEventHandled = <\n  EventType extends React.SyntheticEvent<unknown, unknown>\n>(\n  event: EventType,\n  handler?: (event: EventType) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped()\n}\n\n/**\n * Check if a DOM event is overrided by a handler.\n */\n\nexport const isDOMEventHandled = <E extends Event>(\n  event: E,\n  handler?: (event: E) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.defaultPrevented\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\n\nexport const FocusedContext = createContext(false)\n\n/**\n * Get the current `focused` state of the editor.\n */\n\nexport const useFocused = (): boolean => {\n  return useContext(FocusedContext)\n}\n","import {\n  createContext,\n  useCallback,\n  useContext,\n  useMemo,\n  useReducer,\n  useRef,\n} from 'react'\nimport { Editor } from 'slate'\nimport { useIsomorphicLayoutEffect } from './use-isomorphic-layout-effect'\n\nfunction isError(error: any): error is Error {\n  return error instanceof Error\n}\n\ntype EditorChangeHandler = (editor: Editor) => void\n/**\n * A React context for sharing the editor selector context in a way to control rerenders\n */\n\nexport const SlateSelectorContext = createContext<{\n  getSlate: () => Editor\n  addEventListener: (callback: EditorChangeHandler) => () => void\n}>({} as any)\n\nconst refEquality = (a: any, b: any) => a === b\n\n/**\n * use redux style selectors to prevent rerendering on every keystroke.\n * Bear in mind rerendering can only prevented if the returned value is a value type or for reference types (e.g. objects and arrays) add a custom equality function.\n *\n * Example:\n * ```\n *  const isSelectionActive = useSlateSelector(editor => Boolean(editor.selection));\n * ```\n */\nexport function useSlateSelector<T>(\n  selector: (editor: Editor) => T,\n  equalityFn: (a: T, b: T) => boolean = refEquality\n) {\n  const [, forceRender] = useReducer(s => s + 1, 0)\n  const context = useContext(SlateSelectorContext)\n  if (!context) {\n    throw new Error(\n      `The \\`useSlateSelector\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n  const { getSlate, addEventListener } = context\n\n  const latestSubscriptionCallbackError = useRef<Error | undefined>()\n  const latestSelector = useRef<(editor: Editor) => T>(() => null as any)\n  const latestSelectedState = useRef<T>((null as any) as T)\n  let selectedState: T\n\n  try {\n    if (\n      selector !== latestSelector.current ||\n      latestSubscriptionCallbackError.current\n    ) {\n      selectedState = selector(getSlate())\n    } else {\n      selectedState = latestSelectedState.current\n    }\n  } catch (err) {\n    if (latestSubscriptionCallbackError.current && isError(err)) {\n      err.message += `\\nThe error may be correlated with this previous error:\\n${latestSubscriptionCallbackError.current.stack}\\n\\n`\n    }\n\n    throw err\n  }\n  useIsomorphicLayoutEffect(() => {\n    latestSelector.current = selector\n    latestSelectedState.current = selectedState\n    latestSubscriptionCallbackError.current = undefined\n  })\n\n  useIsomorphicLayoutEffect(\n    () => {\n      function checkForUpdates() {\n        try {\n          const newSelectedState = latestSelector.current(getSlate())\n\n          if (equalityFn(newSelectedState, latestSelectedState.current)) {\n            return\n          }\n\n          latestSelectedState.current = newSelectedState\n        } catch (err) {\n          // we ignore all errors here, since when the component\n          // is re-rendered, the selectors are called again, and\n          // will throw again, if neither props nor store state\n          // changed\n          latestSubscriptionCallbackError.current = err\n        }\n\n        forceRender()\n      }\n\n      const unsubscribe = addEventListener(checkForUpdates)\n\n      checkForUpdates()\n\n      return () => unsubscribe()\n    },\n    // don't rerender on equalityFn change since we want to be able to define it inline\n    [addEventListener, getSlate]\n  )\n\n  return selectedState\n}\n\n/**\n * Create selector context with editor updating on every editor change\n */\nexport function getSelectorContext(editor: Editor) {\n  const eventListeners = useRef<EditorChangeHandler[]>([]).current\n  const slateRef = useRef<{\n    editor: Editor\n  }>({\n    editor,\n  }).current\n  const onChange = useCallback((editor: Editor) => {\n    slateRef.editor = editor\n    eventListeners.forEach((listener: EditorChangeHandler) => listener(editor))\n  }, [])\n\n  const selectorContext = useMemo(() => {\n    return {\n      getSlate: () => slateRef.editor,\n      addEventListener: (callback: EditorChangeHandler) => {\n        eventListeners.push(callback)\n        return () => {\n          eventListeners.splice(eventListeners.indexOf(callback), 1)\n        }\n      },\n    }\n  }, [eventListeners, slateRef])\n  return { selectorContext, onChange }\n}\n","import React, { useState, useCallback, useEffect, useRef } from 'react'\nimport { Editor, Node, Descendant, Scrubber } from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { FocusedContext } from '../hooks/use-focused'\nimport { EditorContext } from '../hooks/use-slate-static'\nimport { SlateContext, SlateContextValue } from '../hooks/use-slate'\nimport {\n  getSelectorContext,\n  SlateSelectorContext,\n} from '../hooks/use-slate-selector'\nimport { EDITOR_TO_ON_CHANGE } from '../utils/weak-maps'\nimport { IS_REACT_VERSION_17_OR_ABOVE } from '../utils/environment'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\n\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\n\nexport const Slate = (props: {\n  editor: ReactEditor\n  value: Descendant[]\n  children: React.ReactNode\n  onChange?: (value: Descendant[]) => void\n}) => {\n  const { editor, children, onChange, value, ...rest } = props\n  const unmountRef = useRef(false)\n\n  const [context, setContext] = React.useState<SlateContextValue>(() => {\n    if (!Node.isNodeList(value)) {\n      throw new Error(\n        `[Slate] value is invalid! Expected a list of elements` +\n          `but got: ${Scrubber.stringify(value)}`\n      )\n    }\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\n        `[Slate] editor is invalid! you passed:` +\n          `${Scrubber.stringify(editor)}`\n      )\n    }\n    editor.children = value\n    Object.assign(editor, rest)\n    return { v: 0, editor }\n  })\n\n  const {\n    selectorContext,\n    onChange: handleSelectorChange,\n  } = getSelectorContext(editor)\n\n  const onContextChange = useCallback(() => {\n    if (onChange) {\n      onChange(editor.children)\n    }\n\n    setContext(prevContext => ({\n      v: prevContext.v + 1,\n      editor,\n    }))\n    handleSelectorChange(editor)\n  }, [onChange])\n\n  EDITOR_TO_ON_CHANGE.set(editor, onContextChange)\n\n  useEffect(() => {\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {})\n      unmountRef.current = true\n    }\n  }, [])\n\n  const [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor))\n\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor))\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    const fn = () => setIsFocused(ReactEditor.isFocused(editor))\n    if (IS_REACT_VERSION_17_OR_ABOVE) {\n      // In React >= 17 onFocus and onBlur listen to the focusin and focusout events during the bubbling phase.\n      // Therefore in order for <Editable />'s handlers to run first, which is necessary for ReactEditor.isFocused(editor)\n      // to return the correct value, we have to listen to the focusin and focusout events without useCapture here.\n      document.addEventListener('focusin', fn)\n      document.addEventListener('focusout', fn)\n      return () => {\n        document.removeEventListener('focusin', fn)\n        document.removeEventListener('focusout', fn)\n      }\n    } else {\n      document.addEventListener('focus', fn, true)\n      document.addEventListener('blur', fn, true)\n      return () => {\n        document.removeEventListener('focus', fn, true)\n        document.removeEventListener('blur', fn, true)\n      }\n    }\n  }, [])\n\n  return (\n    <SlateSelectorContext.Provider value={selectorContext}>\n      <SlateContext.Provider value={context}>\n        <EditorContext.Provider value={context.editor}>\n          <FocusedContext.Provider value={isFocused}>\n            {children}\n          </FocusedContext.Provider>\n        </EditorContext.Provider>\n      </SlateContext.Provider>\n    </SlateSelectorContext.Provider>\n  )\n}\n","import { useContext } from 'react'\n\nimport { EditorContext } from './use-slate-static'\n\n/**\n * Get the current editor object from the React context.\n * @deprecated Use useSlateStatic instead.\n */\n\nexport const useEditor = () => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useEditor\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import { BaseSelection, Range } from 'slate'\n\nimport { useSlateSelector } from './use-slate-selector'\n\n/**\n * Get the current slate selection.\n * Only triggers a rerender when the selection actually changes\n */\nexport const useSlateSelection = () => {\n  return useSlateSelector(editor => editor.selection, isSelectionEqual)\n}\n\nconst isSelectionEqual = (a: BaseSelection, b: BaseSelection) => {\n  if (!a && !b) return true\n  if (!a || !b) return false\n  return Range.equals(a, b)\n}\n","/**\n * Utilities for single-line deletion\n */\n\nimport { Range, Editor } from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\n\nconst doRectsIntersect = (rect: DOMRect, compareRect: DOMRect) => {\n  const middle = (compareRect.top + compareRect.bottom) / 2\n\n  return rect.top <= middle && rect.bottom >= middle\n}\n\nconst areRangesSameLine = (\n  editor: ReactEditor,\n  range1: Range,\n  range2: Range\n) => {\n  const rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect()\n  const rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect()\n\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1)\n}\n\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nexport const findCurrentLineRange = (\n  editor: ReactEditor,\n  parentRange: Range\n): Range => {\n  const parentRangeBoundary = Editor.range(editor, Range.end(parentRange))\n  const positions = Array.from(Editor.positions(editor, { at: parentRange }))\n\n  let left = 0\n  let right = positions.length\n  let middle = Math.floor(right / 2)\n\n  if (\n    areRangesSameLine(\n      editor,\n      Editor.range(editor, positions[left]),\n      parentRangeBoundary\n    )\n  ) {\n    return Editor.range(editor, positions[left], parentRangeBoundary)\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(\n      editor,\n      positions[positions.length - 1],\n      parentRangeBoundary\n    )\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (\n      areRangesSameLine(\n        editor,\n        Editor.range(editor, positions[middle]),\n        parentRangeBoundary\n      )\n    ) {\n      right = middle\n    } else {\n      left = middle\n    }\n\n    middle = Math.floor((left + right) / 2)\n  }\n\n  return Editor.range(editor, positions[right], parentRangeBoundary)\n}\n","import ReactDOM from 'react-dom'\nimport {\n  BaseEditor,\n  Editor,\n  Node,\n  Operation,\n  Path,\n  Point,\n  Range,\n  Transforms,\n} from 'slate'\nimport {\n  TextDiff,\n  transformPendingPoint,\n  transformPendingRange,\n  transformTextDiff,\n} from '../utils/diff-text'\nimport {\n  getPlainText,\n  getSlateFragmentAttribute,\n  isDOMText,\n} from '../utils/dom'\nimport { Key } from '../utils/key'\nimport { findCurrentLineRange } from '../utils/lines'\nimport {\n  EDITOR_TO_KEY_TO_ELEMENT,\n  EDITOR_TO_ON_CHANGE,\n  EDITOR_TO_PENDING_ACTION,\n  EDITOR_TO_PENDING_DIFFS,\n  EDITOR_TO_PENDING_SELECTION,\n  EDITOR_TO_USER_MARKS,\n  EDITOR_TO_USER_SELECTION,\n  NODE_TO_KEY,\n  EDITOR_TO_SCHEDULE_FLUSH,\n  EDITOR_TO_PENDING_INSERTION_MARKS,\n} from '../utils/weak-maps'\nimport { ReactEditor } from './react-editor'\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withReact = <T extends BaseEditor>(editor: T): T & ReactEditor => {\n  const e = editor as T & ReactEditor\n  const { apply, onChange, deleteBackward, addMark, removeMark } = e\n\n  // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap())\n\n  e.addMark = (key, value) => {\n    EDITOR_TO_SCHEDULE_FLUSH.get(e)?.()\n\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    addMark(key, value)\n  }\n\n  e.removeMark = key => {\n    if (\n      !EDITOR_TO_PENDING_INSERTION_MARKS.get(e) &&\n      EDITOR_TO_PENDING_DIFFS.get(e)?.length\n    ) {\n      // Ensure the current pending diffs originating from changes before the addMark\n      // are applied with the current formatting\n      EDITOR_TO_PENDING_INSERTION_MARKS.set(e, null)\n    }\n\n    EDITOR_TO_USER_MARKS.delete(e)\n\n    removeMark(key)\n  }\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit)\n    }\n\n    if (e.selection && Range.isCollapsed(e.selection)) {\n      const parentBlockEntry = Editor.above(e, {\n        match: n => Editor.isBlock(e, n),\n        at: e.selection,\n      })\n\n      if (parentBlockEntry) {\n        const [, parentBlockPath] = parentBlockEntry\n        const parentElementRange = Editor.range(\n          e,\n          parentBlockPath,\n          e.selection.anchor\n        )\n\n        const currentLineRange = findCurrentLineRange(e, parentElementRange)\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(e, { at: currentLineRange })\n        }\n      }\n    }\n  }\n\n  // This attempts to reset the NODE_TO_KEY entry to the correct value\n  // as apply() changes the object reference and hence invalidates the NODE_TO_KEY entry\n  e.apply = (op: Operation) => {\n    const matches: [Path, Key][] = []\n\n    const pendingDiffs = EDITOR_TO_PENDING_DIFFS.get(e)\n    if (pendingDiffs?.length) {\n      const transformed = pendingDiffs\n        .map(textDiff => transformTextDiff(textDiff, op))\n        .filter(Boolean) as TextDiff[]\n\n      EDITOR_TO_PENDING_DIFFS.set(e, transformed)\n    }\n\n    const pendingSelection = EDITOR_TO_PENDING_SELECTION.get(e)\n    if (pendingSelection) {\n      EDITOR_TO_PENDING_SELECTION.set(\n        e,\n        transformPendingRange(e, pendingSelection, op)\n      )\n    }\n\n    const pendingAction = EDITOR_TO_PENDING_ACTION.get(e)\n    if (pendingAction?.at) {\n      const at = Point.isPoint(pendingAction?.at)\n        ? transformPendingPoint(e, pendingAction.at, op)\n        : transformPendingRange(e, pendingAction.at, op)\n\n      EDITOR_TO_PENDING_ACTION.set(e, at ? { ...pendingAction, at } : null)\n    }\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n      case 'split_node': {\n        matches.push(...getMatches(e, op.path))\n        break\n      }\n\n      case 'set_selection': {\n        // Selection was manually set, don't restore the user selection after the change.\n        EDITOR_TO_USER_SELECTION.get(e)?.unref()\n        EDITOR_TO_USER_SELECTION.delete(e)\n        break\n      }\n\n      case 'insert_node':\n      case 'remove_node': {\n        matches.push(...getMatches(e, Path.parent(op.path)))\n        break\n      }\n\n      case 'merge_node': {\n        const prevPath = Path.previous(op.path)\n        matches.push(...getMatches(e, prevPath))\n        break\n      }\n\n      case 'move_node': {\n        const commonPath = Path.common(\n          Path.parent(op.path),\n          Path.parent(op.newPath)\n        )\n        matches.push(...getMatches(e, commonPath))\n        break\n      }\n    }\n\n    apply(op)\n\n    for (const [path, key] of matches) {\n      const [node] = Editor.node(e, path)\n      NODE_TO_KEY.set(node, key)\n    }\n  }\n\n  e.setFragmentData = (data: Pick<DataTransfer, 'getData' | 'setData'>) => {\n    const { selection } = e\n\n    if (!selection) {\n      return\n    }\n\n    const [start, end] = Range.edges(selection)\n    const startVoid = Editor.void(e, { at: start.path })\n    const endVoid = Editor.void(e, { at: end.path })\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const domRange = ReactEditor.toDOMRange(e, selection)\n    let contents = domRange.cloneContents()\n    let attach = contents.childNodes[0] as HTMLElement\n\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node as HTMLElement\n      }\n    })\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      const [voidNode] = endVoid\n      const r = domRange.cloneRange()\n      const domNode = ReactEditor.toDOMNode(e, voidNode)\n      r.setEndAfter(domNode)\n      contents = r.cloneContents()\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]')! as HTMLElement\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(\n      zw => {\n        const isNewline = zw.getAttribute('data-slate-zero-width') === 'n'\n        zw.textContent = isNewline ? '\\n' : ''\n      }\n    )\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      const span = attach.ownerDocument.createElement('span')\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre'\n      span.appendChild(attach)\n      contents.appendChild(span)\n      attach = span\n    }\n\n    const fragment = e.getFragment()\n    const string = JSON.stringify(fragment)\n    const encoded = window.btoa(encodeURIComponent(string))\n    attach.setAttribute('data-slate-fragment', encoded)\n    data.setData('application/x-slate-fragment', encoded)\n\n    // Add the content to a <div> so that we can get its inner HTML.\n    const div = contents.ownerDocument.createElement('div')\n    div.appendChild(contents)\n    div.setAttribute('hidden', 'true')\n    contents.ownerDocument.body.appendChild(div)\n    data.setData('text/html', div.innerHTML)\n    data.setData('text/plain', getPlainText(div))\n    contents.ownerDocument.body.removeChild(div)\n    return data\n  }\n\n  e.insertData = (data: DataTransfer) => {\n    if (!e.insertFragmentData(data)) {\n      e.insertTextData(data)\n    }\n  }\n\n  e.insertFragmentData = (data: DataTransfer): boolean => {\n    /**\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\n     */\n    const fragment =\n      data.getData('application/x-slate-fragment') ||\n      getSlateFragmentAttribute(data)\n\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment))\n      const parsed = JSON.parse(decoded) as Node[]\n      e.insertFragment(parsed)\n      return true\n    }\n    return false\n  }\n\n  e.insertTextData = (data: DataTransfer): boolean => {\n    const text = data.getData('text/plain')\n\n    if (text) {\n      const lines = text.split(/\\r\\n|\\r|\\n/)\n      let split = false\n\n      for (const line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, { always: true })\n        }\n\n        e.insertText(line)\n        split = true\n      }\n      return true\n    }\n    return false\n  }\n\n  e.onChange = () => {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    ReactDOM.unstable_batchedUpdates(() => {\n      const onContextChange = EDITOR_TO_ON_CHANGE.get(e)\n\n      if (onContextChange) {\n        onContextChange()\n      }\n\n      onChange()\n    })\n  }\n\n  return e\n}\n\nconst getMatches = (e: Editor, path: Path) => {\n  const matches: [Path, Key][] = []\n  for (const [n, p] of Editor.levels(e, { at: path })) {\n    const key = ReactEditor.findKey(e, n)\n    matches.push([p, key])\n  }\n  return matches\n}\n","/**\n * @typedef {import('mdast').Root|import('mdast').Content} Node\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [includeImageAlt=true]\n *   Whether to use `alt` for `image`s.\n * @property {boolean | null | undefined} [includeHtml=true]\n *   Whether to use `value` of HTML.\n */\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Get the text content of a node or list of nodes.\n *\n * Prefers the nodes plain-text fields, otherwise serializes its children,\n * and if the given value is an array, serialize the nodes in it.\n *\n * @param {unknown} value\n *   Thing to serialize, typically `Node`.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized `value`.\n */\nexport function toString(value, options) {\n  const settings = options || emptyOptions\n  const includeImageAlt =\n    typeof settings.includeImageAlt === 'boolean'\n      ? settings.includeImageAlt\n      : true\n  const includeHtml =\n    typeof settings.includeHtml === 'boolean' ? settings.includeHtml : true\n\n  return one(value, includeImageAlt, includeHtml)\n}\n\n/**\n * One node or several nodes.\n *\n * @param {unknown} value\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if ('value' in value) {\n      return value.type === 'html' && !includeHtml ? '' : value.value\n    }\n\n    if (includeImageAlt && 'alt' in value && value.alt) {\n      return value.alt\n    }\n\n    if ('children' in value) {\n      return all(value.children, includeImageAlt, includeHtml)\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml)\n  }\n\n  return ''\n}\n\n/**\n * Serialize a list of nodes.\n *\n * @param {Array<unknown>} values\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized nodes.\n */\nfunction all(values, includeImageAlt, includeHtml) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n\n  while (++index < values.length) {\n    result[index] = one(values[index], includeImageAlt, includeHtml)\n  }\n\n  return result.join('')\n}\n\n/**\n * Check if `value` looks like a node.\n *\n * @param {unknown} value\n *   Thing.\n * @returns {value is Node}\n *   Whether `value` is a node.\n */\nfunction node(value) {\n  return Boolean(value && typeof value === 'object')\n}\n","/**\n * Like `Array#splice`, but smarter for giant arrays.\n *\n * `Array#splice` takes all items to be inserted as individual argument which\n * causes a stack overflow in V8 when trying to insert 100k items for instance.\n *\n * Otherwise, this does not return the removed items, and takes `items` as an\n * array instead of rest parameters.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {number} start\n *   Index to remove/insert at (can be negative).\n * @param {number} remove\n *   Number of items to remove.\n * @param {Array<T>} items\n *   Items to inject into `list`.\n * @returns {void}\n *   Nothing.\n */\nexport function splice(list, start, remove, items) {\n  const end = list.length\n  let chunkStart = 0\n  /** @type {Array<unknown>} */\n  let parameters\n\n  // Make start between zero and `end` (included).\n  if (start < 0) {\n    start = -start > end ? 0 : end + start\n  } else {\n    start = start > end ? end : start\n  }\n  remove = remove > 0 ? remove : 0\n\n  // No need to chunk the items if theres only a couple (10k) items.\n  if (items.length < 10000) {\n    parameters = Array.from(items)\n    parameters.unshift(start, remove)\n    // @ts-expect-error Hush, its fine.\n    list.splice(...parameters)\n  } else {\n    // Delete `remove` items starting from `start`\n    if (remove) list.splice(start, remove)\n\n    // Insert the items in chunks to not cause stack overflows.\n    while (chunkStart < items.length) {\n      parameters = items.slice(chunkStart, chunkStart + 10000)\n      parameters.unshift(start, 0)\n      // @ts-expect-error Hush, its fine.\n      list.splice(...parameters)\n      chunkStart += 10000\n      start += 10000\n    }\n  }\n}\n\n/**\n * Append `items` (an array) at the end of `list` (another array).\n * When `list` was empty, returns `items` instead.\n *\n * This prevents a potentially expensive operation when `list` is empty,\n * and adds items in batches to prevent V8 from hanging.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {Array<T>} items\n *   Items to add to `list`.\n * @returns {Array<T>}\n *   Either `list` or `items`.\n */\nexport function push(list, items) {\n  if (list.length > 0) {\n    splice(list, list.length, 0, items)\n    return list\n  }\n  return items\n}\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').Handles} Handles\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n * @typedef {import('micromark-util-types').NormalizedExtension} NormalizedExtension\n */\n\nimport {splice} from 'micromark-util-chunked'\n\nconst hasOwnProperty = {}.hasOwnProperty\n\n/**\n * Combine multiple syntax extensions into one.\n *\n * @param {Array<Extension>} extensions\n *   List of syntax extensions.\n * @returns {NormalizedExtension}\n *   A single combined extension.\n */\nexport function combineExtensions(extensions) {\n  /** @type {NormalizedExtension} */\n  const all = {}\n  let index = -1\n\n  while (++index < extensions.length) {\n    syntaxExtension(all, extensions[index])\n  }\n\n  return all\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {NormalizedExtension} all\n *   Extension to merge into.\n * @param {Extension} extension\n *   Extension to merge.\n * @returns {void}\n */\nfunction syntaxExtension(all, extension) {\n  /** @type {keyof Extension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    /** @type {Record<string, unknown>} */\n    const left = maybe || (all[hook] = {})\n    /** @type {Record<string, unknown> | undefined} */\n    const right = extension[hook]\n    /** @type {string} */\n    let code\n\n    if (right) {\n      for (code in right) {\n        if (!hasOwnProperty.call(left, code)) left[code] = []\n        const value = right[code]\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code],\n          Array.isArray(value) ? value : value ? [value] : []\n        )\n      }\n    }\n  }\n}\n\n/**\n * Merge `list` into `existing` (both lists of constructs).\n * Mutates `existing`.\n *\n * @param {Array<unknown>} existing\n * @param {Array<unknown>} list\n * @returns {void}\n */\nfunction constructs(existing, list) {\n  let index = -1\n  /** @type {Array<unknown>} */\n  const before = []\n\n  while (++index < list.length) {\n    // @ts-expect-error Looks like an object.\n    ;(list[index].add === 'after' ? existing : before).push(list[index])\n  }\n\n  splice(existing, 0, 0, before)\n}\n\n/**\n * Combine multiple HTML extensions into one.\n *\n * @param {Array<HtmlExtension>} htmlExtensions\n *   List of HTML extensions.\n * @returns {HtmlExtension}\n *   A single combined HTML extension.\n */\nexport function combineHtmlExtensions(htmlExtensions) {\n  /** @type {HtmlExtension} */\n  const handlers = {}\n  let index = -1\n\n  while (++index < htmlExtensions.length) {\n    htmlExtension(handlers, htmlExtensions[index])\n  }\n\n  return handlers\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {HtmlExtension} all\n *   Extension to merge into.\n * @param {HtmlExtension} extension\n *   Extension to merge.\n * @returns {void}\n */\nfunction htmlExtension(all, extension) {\n  /** @type {keyof HtmlExtension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    const left = maybe || (all[hook] = {})\n    const right = extension[hook]\n    /** @type {keyof Handles} */\n    let type\n\n    if (right) {\n      for (type in right) {\n        // @ts-expect-error assume document vs regular handler are managed correctly.\n        left[type] = right[type]\n      }\n    }\n  }\n}\n","// This module is generated by `script/`.\n//\n// CommonMark handles attention (emphasis, strong) markers based on what comes\n// before or after them.\n// One such difference is if those characters are Unicode punctuation.\n// This script is generated from the Unicode data.\n\n/**\n * Regular expression that matches a unicode punctuation character.\n */\nexport const unicodePunctuationRegex =\n  /[!-\\/:-@\\[-`\\{-~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061D-\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1B7D\\u1B7E\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52-\\u2E5D\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nimport {unicodePunctuationRegex} from './lib/unicode-punctuation-regex.js'\n\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAlpha = regexCheck(/[A-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/)\n\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/)\n\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < 32 || code === 127)\n  )\n}\n\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiDigit = regexCheck(/\\d/)\n\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/)\n\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/)\n\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEnding(code) {\n  return code !== null && code < -2\n}\n\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < 0 || code === 32)\n}\n\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownSpace(code) {\n  return code === -2 || code === -1 || code === 32\n}\n\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodePunctuation = regexCheck(unicodePunctuationRegex)\n\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodeWhitespace = regexCheck(/\\s/)\n\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n * @returns {(code: Code) => boolean}\n */\nfunction regexCheck(regex) {\n  return check\n\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code\n   *   Character code.\n   * @returns {boolean}\n   *   Whether the character code matches the bound regex.\n   */\n  function check(code) {\n    return code !== null && regex.test(String.fromCharCode(code))\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownSpace} from 'micromark-util-character'\n\n// To do: implement `spaceOrTab`, `spaceOrTabMinMax`, `spaceOrTabWithOptions`.\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   spaces in markdown are often optional, in which case this factory can be\n *     used and `ok` will be switched to whether spaces were found or not\n * *   one line ending or space can be detected with `markdownSpace(code)` right\n *     before using `factorySpace`\n *\n * ###### Examples\n *\n * Where `` represents a tab (plus how much it expands) and `` represents a\n * single space.\n *\n * ```markdown\n * \n * \n * \n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {TokenType} type\n *   Type (`' \\t'`).\n * @param {number | undefined} [max=Infinity]\n *   Max (exclusive).\n * @returns\n *   Start state.\n */\nexport function factorySpace(effects, ok, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY\n  let size = 0\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownSpace(code)) {\n      effects.enter(type)\n      return prefix(code)\n    }\n    return ok(code)\n  }\n\n  /** @type {State} */\n  function prefix(code) {\n    if (markdownSpace(code) && size++ < limit) {\n      effects.consume(code)\n      return prefix\n    }\n    effects.exit(type)\n    return ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {InitialConstruct} */\nexport const content = {\n  tokenize: initializeContent\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeContent(effects) {\n  const contentStart = effects.attempt(\n    this.parser.constructs.contentInitial,\n    afterContentStartConstruct,\n    paragraphInitial\n  )\n  /** @type {Token} */\n  let previous\n  return contentStart\n\n  /** @type {State} */\n  function afterContentStartConstruct(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, contentStart, 'linePrefix')\n  }\n\n  /** @type {State} */\n  function paragraphInitial(code) {\n    effects.enter('paragraph')\n    return lineStart(code)\n  }\n\n  /** @type {State} */\n  function lineStart(code) {\n    const token = effects.enter('chunkText', {\n      contentType: 'text',\n      previous\n    })\n    if (previous) {\n      previous.next = token\n    }\n    previous = token\n    return data(code)\n  }\n\n  /** @type {State} */\n  function data(code) {\n    if (code === null) {\n      effects.exit('chunkText')\n      effects.exit('paragraph')\n      effects.consume(code)\n      return\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      effects.exit('chunkText')\n      return lineStart\n    }\n\n    // Data.\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\n/**\n * @typedef {[Construct, ContainerState]} StackItem\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\n/** @type {InitialConstruct} */\nexport const document = {\n  tokenize: initializeDocument\n}\n\n/** @type {Construct} */\nconst containerConstruct = {\n  tokenize: tokenizeContainer\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeDocument(effects) {\n  const self = this\n  /** @type {Array<StackItem>} */\n  const stack = []\n  let continued = 0\n  /** @type {TokenizeContext | undefined} */\n  let childFlow\n  /** @type {Token | undefined} */\n  let childToken\n  /** @type {number} */\n  let lineStartOffset\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    // First we iterate through the open blocks, starting with the root\n    // document, and descending through last children down to the last open\n    // block.\n    // Each block imposes a condition that the line must satisfy if the block is\n    // to remain open.\n    // For example, a block quote requires a `>` character.\n    // A paragraph requires a non-blank line.\n    // In this phase we may match all or just some of the open blocks.\n    // But we cannot close unmatched blocks yet, because we may have a lazy\n    // continuation line.\n    if (continued < stack.length) {\n      const item = stack[continued]\n      self.containerState = item[1]\n      return effects.attempt(\n        item[0].continuation,\n        documentContinue,\n        checkNewContainers\n      )(code)\n    }\n\n    // Done.\n    return checkNewContainers(code)\n  }\n\n  /** @type {State} */\n  function documentContinue(code) {\n    continued++\n\n    // Note: this field is called `_closeFlow` but it also closes containers.\n    // Perhaps a good idea to rename it but its already used in the wild by\n    // extensions.\n    if (self.containerState._closeFlow) {\n      self.containerState._closeFlow = undefined\n      if (childFlow) {\n        closeFlow()\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when dealing with lazy lines in `writeToChild`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the flow chunk.\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === 'chunkFlow'\n        ) {\n          point = self.events[indexBeforeFlow][1].end\n          break\n        }\n      }\n      exitContainers(continued)\n\n      // Fix positions.\n      let index = indexBeforeExits\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (theyre still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n      return checkNewContainers(code)\n    }\n    return start(code)\n  }\n\n  /** @type {State} */\n  function checkNewContainers(code) {\n    // Next, after consuming the continuation markers for existing blocks, we\n    // look for new block starts (e.g. `>` for a block quote).\n    // If we encounter a new block start, we close any blocks unmatched in\n    // step 1 before creating the new block as a child of the last matched\n    // block.\n    if (continued === stack.length) {\n      // No need to `check` whether theres a container, of `exitContainers`\n      // would be moot.\n      // We can instead immediately `attempt` to parse one.\n      if (!childFlow) {\n        return documentContinued(code)\n      }\n\n      // If we have concrete content, such as block HTML or fenced code,\n      // we cant have containers pierce into them, so we can immediately\n      // start.\n      if (childFlow.currentConstruct && childFlow.currentConstruct.concrete) {\n        return flowStart(code)\n      }\n\n      // If we do have flow, it could still be a blank line,\n      // but wed be interrupting it w/ a new container if theres a current\n      // construct.\n      // To do: next major: remove `_gfmTableDynamicInterruptHack` (no longer\n      // needed in micromark-extension-gfm-table@1.0.6).\n      self.interrupt = Boolean(\n        childFlow.currentConstruct && !childFlow._gfmTableDynamicInterruptHack\n      )\n    }\n\n    // Check if there is a new container.\n    self.containerState = {}\n    return effects.check(\n      containerConstruct,\n      thereIsANewContainer,\n      thereIsNoNewContainer\n    )(code)\n  }\n\n  /** @type {State} */\n  function thereIsANewContainer(code) {\n    if (childFlow) closeFlow()\n    exitContainers(continued)\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function thereIsNoNewContainer(code) {\n    self.parser.lazy[self.now().line] = continued !== stack.length\n    lineStartOffset = self.now().offset\n    return flowStart(code)\n  }\n\n  /** @type {State} */\n  function documentContinued(code) {\n    // Try new containers.\n    self.containerState = {}\n    return effects.attempt(\n      containerConstruct,\n      containerContinue,\n      flowStart\n    )(code)\n  }\n\n  /** @type {State} */\n  function containerContinue(code) {\n    continued++\n    stack.push([self.currentConstruct, self.containerState])\n    // Try another.\n    return documentContinued(code)\n  }\n\n  /** @type {State} */\n  function flowStart(code) {\n    if (code === null) {\n      if (childFlow) closeFlow()\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n    childFlow = childFlow || self.parser.flow(self.now())\n    effects.enter('chunkFlow', {\n      contentType: 'flow',\n      previous: childToken,\n      _tokenizer: childFlow\n    })\n    return flowContinue(code)\n  }\n\n  /** @type {State} */\n  function flowContinue(code) {\n    if (code === null) {\n      writeToChild(effects.exit('chunkFlow'), true)\n      exitContainers(0)\n      effects.consume(code)\n      return\n    }\n    if (markdownLineEnding(code)) {\n      effects.consume(code)\n      writeToChild(effects.exit('chunkFlow'))\n      // Get ready for the next line.\n      continued = 0\n      self.interrupt = undefined\n      return start\n    }\n    effects.consume(code)\n    return flowContinue\n  }\n\n  /**\n   * @param {Token} token\n   * @param {boolean | undefined} [eof]\n   * @returns {void}\n   */\n  function writeToChild(token, eof) {\n    const stream = self.sliceStream(token)\n    if (eof) stream.push(null)\n    token.previous = childToken\n    if (childToken) childToken.next = token\n    childToken = token\n    childFlow.defineSkip(token.start)\n    childFlow.write(stream)\n\n    // Alright, so we just added a lazy line:\n    //\n    // ```markdown\n    // > a\n    // b.\n    //\n    // Or:\n    //\n    // > ~~~c\n    // d\n    //\n    // Or:\n    //\n    // > | e |\n    // f\n    // ```\n    //\n    // The construct in the second example (fenced code) does not accept lazy\n    // lines, so it marked itself as done at the end of its first line, and\n    // then the content construct parses `d`.\n    // Most constructs in markdown match on the first line: if the first line\n    // forms a construct, a non-lazy line cant unmake it.\n    //\n    // The construct in the third example is potentially a GFM table, and\n    // those are *weird*.\n    // It *could* be a table, from the first line, if the following line\n    // matches a condition.\n    // In this case, that second line is lazy, which unmakes the first line\n    // and turns the whole into one content block.\n    //\n    // Weve now parsed the non-lazy and the lazy line, and can figure out\n    // whether the lazy line started a new flow block.\n    // If it did, we exit the current containers between the two flow blocks.\n    if (self.parser.lazy[token.start.line]) {\n      let index = childFlow.events.length\n      while (index--) {\n        if (\n          // The token starts before the line ending\n          childFlow.events[index][1].start.offset < lineStartOffset &&\n          // and either is not ended yet\n          (!childFlow.events[index][1].end ||\n            // or ends after it.\n            childFlow.events[index][1].end.offset > lineStartOffset)\n        ) {\n          // Exit: theres still something open, which means its a lazy line\n          // part of something.\n          return\n        }\n      }\n\n      // Note: this algorithm for moving events around is similar to the\n      // algorithm when closing flow in `documentContinue`.\n      const indexBeforeExits = self.events.length\n      let indexBeforeFlow = indexBeforeExits\n      /** @type {boolean | undefined} */\n      let seen\n      /** @type {Point | undefined} */\n      let point\n\n      // Find the previous chunk (the one before the lazy line).\n      while (indexBeforeFlow--) {\n        if (\n          self.events[indexBeforeFlow][0] === 'exit' &&\n          self.events[indexBeforeFlow][1].type === 'chunkFlow'\n        ) {\n          if (seen) {\n            point = self.events[indexBeforeFlow][1].end\n            break\n          }\n          seen = true\n        }\n      }\n      exitContainers(continued)\n\n      // Fix positions.\n      index = indexBeforeExits\n      while (index < self.events.length) {\n        self.events[index][1].end = Object.assign({}, point)\n        index++\n      }\n\n      // Inject the exits earlier (theyre still also at the end).\n      splice(\n        self.events,\n        indexBeforeFlow + 1,\n        0,\n        self.events.slice(indexBeforeExits)\n      )\n\n      // Discard the duplicate exits.\n      self.events.length = index\n    }\n  }\n\n  /**\n   * @param {number} size\n   * @returns {void}\n   */\n  function exitContainers(size) {\n    let index = stack.length\n\n    // Exit open containers.\n    while (index-- > size) {\n      const entry = stack[index]\n      self.containerState = entry[1]\n      entry[0].exit.call(self, effects)\n    }\n    stack.length = size\n  }\n  function closeFlow() {\n    childFlow.write([null])\n    childToken = undefined\n    childFlow = undefined\n    self.containerState._closeFlow = undefined\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContainer(effects, ok, nok) {\n  // Always populated by defaults.\n\n  return factorySpace(\n    effects,\n    effects.attempt(this.parser.constructs.document, ok, nok),\n    'linePrefix',\n    this.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n */\n\nimport {\n  markdownLineEndingOrSpace,\n  unicodePunctuation,\n  unicodeWhitespace\n} from 'micromark-util-character'\n/**\n * Classify whether a code represents whitespace, punctuation, or something\n * else.\n *\n * Used for attention (emphasis, strong), whose sequences can open or close\n * based on the class of surrounding characters.\n *\n * >  **Note**: eof (`null`) is seen as whitespace.\n *\n * @param {Code} code\n *   Code.\n * @returns {typeof constants.characterGroupWhitespace | typeof constants.characterGroupPunctuation | undefined}\n *   Group.\n */\nexport function classifyCharacter(code) {\n  if (\n    code === null ||\n    markdownLineEndingOrSpace(code) ||\n    unicodeWhitespace(code)\n  ) {\n    return 1\n  }\n  if (unicodePunctuation(code)) {\n    return 2\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * Call all `resolveAll`s.\n *\n * @param {Array<{resolveAll?: Resolver | undefined}>} constructs\n *   List of constructs, optionally with `resolveAll`s.\n * @param {Array<Event>} events\n *   List of events.\n * @param {TokenizeContext} context\n *   Context used by `tokenize`.\n * @returns {Array<Event>}\n *   Changed events.\n */\nexport function resolveAll(constructs, events, context) {\n  /** @type {Array<Resolver>} */\n  const called = []\n  let index = -1\n\n  while (++index < constructs.length) {\n    const resolve = constructs[index].resolveAll\n\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context)\n      called.push(resolve)\n    }\n  }\n\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {push, splice} from 'micromark-util-chunked'\nimport {classifyCharacter} from 'micromark-util-classify-character'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/** @type {Construct} */\nexport const attention = {\n  name: 'attention',\n  tokenize: tokenizeAttention,\n  resolveAll: resolveAllAttention\n}\n\n/**\n * Take all events and resolve attention to emphasis or strong.\n *\n * @type {Resolver}\n */\nfunction resolveAllAttention(events, context) {\n  let index = -1\n  /** @type {number} */\n  let open\n  /** @type {Token} */\n  let group\n  /** @type {Token} */\n  let text\n  /** @type {Token} */\n  let openingSequence\n  /** @type {Token} */\n  let closingSequence\n  /** @type {number} */\n  let use\n  /** @type {Array<Event>} */\n  let nextEvents\n  /** @type {number} */\n  let offset\n\n  // Walk through all events.\n  //\n  // Note: performance of this is fine on an mb of normal markdown, but its\n  // a bottleneck for malicious stuff.\n  while (++index < events.length) {\n    // Find a token that can close.\n    if (\n      events[index][0] === 'enter' &&\n      events[index][1].type === 'attentionSequence' &&\n      events[index][1]._close\n    ) {\n      open = index\n\n      // Now walk back to find an opener.\n      while (open--) {\n        // Find a token that can open the closer.\n        if (\n          events[open][0] === 'exit' &&\n          events[open][1].type === 'attentionSequence' &&\n          events[open][1]._open &&\n          // If the markers are the same:\n          context.sliceSerialize(events[open][1]).charCodeAt(0) ===\n            context.sliceSerialize(events[index][1]).charCodeAt(0)\n        ) {\n          // If the opening can close or the closing can open,\n          // and the close size *is not* a multiple of three,\n          // but the sum of the opening and closing size *is* multiple of three,\n          // then dont match.\n          if (\n            (events[open][1]._close || events[index][1]._open) &&\n            (events[index][1].end.offset - events[index][1].start.offset) % 3 &&\n            !(\n              (events[open][1].end.offset -\n                events[open][1].start.offset +\n                events[index][1].end.offset -\n                events[index][1].start.offset) %\n              3\n            )\n          ) {\n            continue\n          }\n\n          // Number of markers to use from the sequence.\n          use =\n            events[open][1].end.offset - events[open][1].start.offset > 1 &&\n            events[index][1].end.offset - events[index][1].start.offset > 1\n              ? 2\n              : 1\n          const start = Object.assign({}, events[open][1].end)\n          const end = Object.assign({}, events[index][1].start)\n          movePoint(start, -use)\n          movePoint(end, use)\n          openingSequence = {\n            type: use > 1 ? 'strongSequence' : 'emphasisSequence',\n            start,\n            end: Object.assign({}, events[open][1].end)\n          }\n          closingSequence = {\n            type: use > 1 ? 'strongSequence' : 'emphasisSequence',\n            start: Object.assign({}, events[index][1].start),\n            end\n          }\n          text = {\n            type: use > 1 ? 'strongText' : 'emphasisText',\n            start: Object.assign({}, events[open][1].end),\n            end: Object.assign({}, events[index][1].start)\n          }\n          group = {\n            type: use > 1 ? 'strong' : 'emphasis',\n            start: Object.assign({}, openingSequence.start),\n            end: Object.assign({}, closingSequence.end)\n          }\n          events[open][1].end = Object.assign({}, openingSequence.start)\n          events[index][1].start = Object.assign({}, closingSequence.end)\n          nextEvents = []\n\n          // If there are more markers in the opening, add them before.\n          if (events[open][1].end.offset - events[open][1].start.offset) {\n            nextEvents = push(nextEvents, [\n              ['enter', events[open][1], context],\n              ['exit', events[open][1], context]\n            ])\n          }\n\n          // Opening.\n          nextEvents = push(nextEvents, [\n            ['enter', group, context],\n            ['enter', openingSequence, context],\n            ['exit', openingSequence, context],\n            ['enter', text, context]\n          ])\n\n          // Always populated by defaults.\n\n          // Between.\n          nextEvents = push(\n            nextEvents,\n            resolveAll(\n              context.parser.constructs.insideSpan.null,\n              events.slice(open + 1, index),\n              context\n            )\n          )\n\n          // Closing.\n          nextEvents = push(nextEvents, [\n            ['exit', text, context],\n            ['enter', closingSequence, context],\n            ['exit', closingSequence, context],\n            ['exit', group, context]\n          ])\n\n          // If there are more markers in the closing, add them after.\n          if (events[index][1].end.offset - events[index][1].start.offset) {\n            offset = 2\n            nextEvents = push(nextEvents, [\n              ['enter', events[index][1], context],\n              ['exit', events[index][1], context]\n            ])\n          } else {\n            offset = 0\n          }\n          splice(events, open - 1, index - open + 3, nextEvents)\n          index = open + nextEvents.length - offset - 2\n          break\n        }\n      }\n    }\n  }\n\n  // Remove remaining sequences.\n  index = -1\n  while (++index < events.length) {\n    if (events[index][1].type === 'attentionSequence') {\n      events[index][1].type = 'data'\n    }\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAttention(effects, ok) {\n  const attentionMarkers = this.parser.constructs.attentionMarkers.null\n  const previous = this.previous\n  const before = classifyCharacter(previous)\n\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Before a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    marker = code\n    effects.enter('attentionSequence')\n    return inside(code)\n  }\n\n  /**\n   * In a sequence.\n   *\n   * ```markdown\n   * > | **\n   *     ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n    const token = effects.exit('attentionSequence')\n\n    // To do: next major: move this to resolver, just like `markdown-rs`.\n    const after = classifyCharacter(code)\n\n    // Always populated by defaults.\n\n    const open =\n      !after || (after === 2 && before) || attentionMarkers.includes(code)\n    const close =\n      !before || (before === 2 && after) || attentionMarkers.includes(previous)\n    token._open = Boolean(marker === 42 ? open : open && (before || !close))\n    token._close = Boolean(marker === 42 ? close : close && (after || !open))\n    return ok(code)\n  }\n}\n\n/**\n * Move a point a bit.\n *\n * Note: `move` only works inside lines! Its not possible to move past other\n * chunks (replacement characters, tabs, or line endings).\n *\n * @param {Point} point\n * @param {number} offset\n * @returns {void}\n */\nfunction movePoint(point, offset) {\n  point.column += offset\n  point.offset += offset\n  point._bufferIndex += offset\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  asciiAtext,\n  asciiControl\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const autolink = {\n  name: 'autolink',\n  tokenize: tokenizeAutolink\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeAutolink(effects, ok, nok) {\n  let size = 0\n  return start\n\n  /**\n   * Start of an autolink.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *      ^\n   * > | a<user@example.com>b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('autolink')\n    effects.enter('autolinkMarker')\n    effects.consume(code)\n    effects.exit('autolinkMarker')\n    effects.enter('autolinkProtocol')\n    return open\n  }\n\n  /**\n   * After `<`, at protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *       ^\n   * > | a<user@example.com>b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return schemeOrEmailAtext\n    }\n    return emailAtext(code)\n  }\n\n  /**\n   * At second byte of protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeOrEmailAtext(code) {\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) {\n      // Count the previous alphabetical from `open` too.\n      size = 1\n      return schemeInsideOrEmailAtext(code)\n    }\n    return emailAtext(code)\n  }\n\n  /**\n   * In ambiguous protocol or atext.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *        ^\n   * > | a<user@example.com>b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function schemeInsideOrEmailAtext(code) {\n    if (code === 58) {\n      effects.consume(code)\n      size = 0\n      return urlInside\n    }\n\n    // ASCII alphanumeric and `+`, `-`, and `.`.\n    if (\n      (code === 43 || code === 45 || code === 46 || asciiAlphanumeric(code)) &&\n      size++ < 32\n    ) {\n      effects.consume(code)\n      return schemeInsideOrEmailAtext\n    }\n    size = 0\n    return emailAtext(code)\n  }\n\n  /**\n   * After protocol, in URL.\n   *\n   * ```markdown\n   * > | a<https://example.com>b\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function urlInside(code) {\n    if (code === 62) {\n      effects.exit('autolinkProtocol')\n      effects.enter('autolinkMarker')\n      effects.consume(code)\n      effects.exit('autolinkMarker')\n      effects.exit('autolink')\n      return ok\n    }\n\n    // ASCII control, space, or `<`.\n    if (code === null || code === 32 || code === 60 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return urlInside\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtext(code) {\n    if (code === 64) {\n      effects.consume(code)\n      return emailAtSignOrDot\n    }\n    if (asciiAtext(code)) {\n      effects.consume(code)\n      return emailAtext\n    }\n    return nok(code)\n  }\n\n  /**\n   * In label, after at-sign or dot.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                 ^       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailAtSignOrDot(code) {\n    return asciiAlphanumeric(code) ? emailLabel(code) : nok(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are allowed.\n   *\n   * ```markdown\n   * > | a<user.name@example.com>b\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailLabel(code) {\n    if (code === 46) {\n      effects.consume(code)\n      size = 0\n      return emailAtSignOrDot\n    }\n    if (code === 62) {\n      // Exit, then change the token type.\n      effects.exit('autolinkProtocol').type = 'autolinkEmail'\n      effects.enter('autolinkMarker')\n      effects.consume(code)\n      effects.exit('autolinkMarker')\n      effects.exit('autolink')\n      return ok\n    }\n    return emailValue(code)\n  }\n\n  /**\n   * In label, where `.` and `>` are *not* allowed.\n   *\n   * Though, this is also used in `emailLabel` to parse other values.\n   *\n   * ```markdown\n   * > | a<user.name@ex-ample.com>b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailValue(code) {\n    // ASCII alphanumeric or `-`.\n    if ((code === 45 || asciiAlphanumeric(code)) && size++ < 63) {\n      const next = code === 45 ? emailValue : emailLabel\n      effects.consume(code)\n      return next\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const blankLine = {\n  tokenize: tokenizeBlankLine,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLine(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of blank line.\n   *\n   * >  **Note**: `` represents a space character.\n   *\n   * ```markdown\n   * > | \n   *     ^\n   * > | \n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, after, 'linePrefix')(code)\n      : after(code)\n  }\n\n  /**\n   * At eof/eol, after optional whitespace.\n   *\n   * >  **Note**: `` represents a space character.\n   *\n   * ```markdown\n   * > | \n   *       ^\n   * > | \n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const blockQuote = {\n  name: 'blockQuote',\n  tokenize: tokenizeBlockQuoteStart,\n  continuation: {\n    tokenize: tokenizeBlockQuoteContinuation\n  },\n  exit\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteStart(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of block quote.\n   *\n   * ```markdown\n   * > | > a\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 62) {\n      const state = self.containerState\n      if (!state.open) {\n        effects.enter('blockQuote', {\n          _container: true\n        })\n        state.open = true\n      }\n      effects.enter('blockQuotePrefix')\n      effects.enter('blockQuoteMarker')\n      effects.consume(code)\n      effects.exit('blockQuoteMarker')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `>`, before optional whitespace.\n   *\n   * ```markdown\n   * > | > a\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (markdownSpace(code)) {\n      effects.enter('blockQuotePrefixWhitespace')\n      effects.consume(code)\n      effects.exit('blockQuotePrefixWhitespace')\n      effects.exit('blockQuotePrefix')\n      return ok\n    }\n    effects.exit('blockQuotePrefix')\n    return ok(code)\n  }\n}\n\n/**\n * Start of block quote continuation.\n *\n * ```markdown\n *   | > a\n * > | > b\n *     ^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlockQuoteContinuation(effects, ok, nok) {\n  const self = this\n  return contStart\n\n  /**\n   * Start of block quote continuation.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contStart(code) {\n    if (markdownSpace(code)) {\n      // Always populated by defaults.\n\n      return factorySpace(\n        effects,\n        contBefore,\n        'linePrefix',\n        self.parser.constructs.disable.null.includes('codeIndented')\n          ? undefined\n          : 4\n      )(code)\n    }\n    return contBefore(code)\n  }\n\n  /**\n   * At `>`, after optional whitespace.\n   *\n   * Also used to parse the first block quote opening.\n   *\n   * ```markdown\n   *   | > a\n   * > | > b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function contBefore(code) {\n    return effects.attempt(blockQuote, ok, nok)(code)\n  }\n}\n\n/** @type {Exiter} */\nfunction exit(effects) {\n  effects.exit('blockQuote')\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {asciiPunctuation} from 'micromark-util-character'\n/** @type {Construct} */\nexport const characterEscape = {\n  name: 'characterEscape',\n  tokenize: tokenizeCharacterEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of character escape.\n   *\n   * ```markdown\n   * > | a\\*b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('characterEscape')\n    effects.enter('escapeMarker')\n    effects.consume(code)\n    effects.exit('escapeMarker')\n    return inside\n  }\n\n  /**\n   * After `\\`, at punctuation.\n   *\n   * ```markdown\n   * > | a\\*b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // ASCII punctuation.\n    if (asciiPunctuation(code)) {\n      effects.enter('characterEscapeValue')\n      effects.consume(code)\n      effects.exit('characterEscapeValue')\n      effects.exit('characterEscape')\n      return ok\n    }\n    return nok(code)\n  }\n}\n","/// <reference lib=\"dom\" />\n\n/* eslint-env browser */\n\nconst element = document.createElement('i')\n\n/**\n * @param {string} value\n * @returns {string|false}\n */\nexport function decodeNamedCharacterReference(value) {\n  const characterReference = '&' + value + ';'\n  element.innerHTML = characterReference\n  const char = element.textContent\n\n  // Some named character references do not require the closing semicolon\n  // (`&not`, for instance), which leads to situations where parsing the assumed\n  // named reference of `&notit;` will result in the string `it;`.\n  // When we encounter a trailing semicolon after parsing, and the character\n  // reference to decode was not a semicolon (`&semi;`), we can assume that the\n  // matching was not complete.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  if (char.charCodeAt(char.length - 1) === 59 /* `;` */ && value !== 'semi') {\n    return false\n  }\n\n  // If the decoded string is equal to the input, the character reference was\n  // not valid.\n  // @ts-expect-error: TypeScript is wrong that `textContent` on elements can\n  // yield `null`.\n  return char === characterReference ? false : char\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {\n  asciiAlphanumeric,\n  asciiDigit,\n  asciiHexDigit\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const characterReference = {\n  name: 'characterReference',\n  tokenize: tokenizeCharacterReference\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCharacterReference(effects, ok, nok) {\n  const self = this\n  let size = 0\n  /** @type {number} */\n  let max\n  /** @type {(code: Code) => boolean} */\n  let test\n  return start\n\n  /**\n   * Start of character reference.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *      ^\n   * > | a&#123;b\n   *      ^\n   * > | a&#x9;b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('characterReference')\n    effects.enter('characterReferenceMarker')\n    effects.consume(code)\n    effects.exit('characterReferenceMarker')\n    return open\n  }\n\n  /**\n   * After `&`, at `#` for numeric references or alphanumeric for named\n   * references.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^\n   * > | a&#123;b\n   *       ^\n   * > | a&#x9;b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 35) {\n      effects.enter('characterReferenceMarkerNumeric')\n      effects.consume(code)\n      effects.exit('characterReferenceMarkerNumeric')\n      return numeric\n    }\n    effects.enter('characterReferenceValue')\n    max = 31\n    test = asciiAlphanumeric\n    return value(code)\n  }\n\n  /**\n   * After `#`, at `x` for hexadecimals or digit for decimals.\n   *\n   * ```markdown\n   * > | a&#123;b\n   *        ^\n   * > | a&#x9;b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function numeric(code) {\n    if (code === 88 || code === 120) {\n      effects.enter('characterReferenceMarkerHexadecimal')\n      effects.consume(code)\n      effects.exit('characterReferenceMarkerHexadecimal')\n      effects.enter('characterReferenceValue')\n      max = 6\n      test = asciiHexDigit\n      return value\n    }\n    effects.enter('characterReferenceValue')\n    max = 7\n    test = asciiDigit\n    return value(code)\n  }\n\n  /**\n   * After markers (`&#x`, `&#`, or `&`), in value, before `;`.\n   *\n   * The character reference kind defines what and how many characters are\n   * allowed.\n   *\n   * ```markdown\n   * > | a&amp;b\n   *       ^^^\n   * > | a&#123;b\n   *        ^^^\n   * > | a&#x9;b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function value(code) {\n    if (code === 59 && size) {\n      const token = effects.exit('characterReferenceValue')\n      if (\n        test === asciiAlphanumeric &&\n        !decodeNamedCharacterReference(self.sliceSerialize(token))\n      ) {\n        return nok(code)\n      }\n\n      // To do: `markdown-rs` uses a different name:\n      // `CharacterReferenceMarkerSemi`.\n      effects.enter('characterReferenceMarker')\n      effects.consume(code)\n      effects.exit('characterReferenceMarker')\n      effects.exit('characterReference')\n      return ok\n    }\n    if (test(code) && size++ < max) {\n      effects.consume(code)\n      return value\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nconst nonLazyContinuation = {\n  tokenize: tokenizeNonLazyContinuation,\n  partial: true\n}\n\n/** @type {Construct} */\nexport const codeFenced = {\n  name: 'codeFenced',\n  tokenize: tokenizeCodeFenced,\n  concrete: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeFenced(effects, ok, nok) {\n  const self = this\n  /** @type {Construct} */\n  const closeStart = {\n    tokenize: tokenizeCloseStart,\n    partial: true\n  }\n  let initialPrefix = 0\n  let sizeOpen = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of code.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse whitespace like `markdown-rs`.\n    return beforeSequenceOpen(code)\n  }\n\n  /**\n   * In opening fence, after prefix, at sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *     ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeSequenceOpen(code) {\n    const tail = self.events[self.events.length - 1]\n    initialPrefix =\n      tail && tail[1].type === 'linePrefix'\n        ? tail[2].sliceSerialize(tail[1], true).length\n        : 0\n    marker = code\n    effects.enter('codeFenced')\n    effects.enter('codeFencedFence')\n    effects.enter('codeFencedFenceSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening fence sequence.\n   *\n   * ```markdown\n   * > | ~~~js\n   *      ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === marker) {\n      sizeOpen++\n      effects.consume(code)\n      return sequenceOpen\n    }\n    if (sizeOpen < 3) {\n      return nok(code)\n    }\n    effects.exit('codeFencedFenceSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, infoBefore, 'whitespace')(code)\n      : infoBefore(code)\n  }\n\n  /**\n   * In opening fence, after the sequence (and optional whitespace), before info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function infoBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFencedFence')\n      return self.interrupt\n        ? ok(code)\n        : effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n    effects.enter('codeFencedFenceInfo')\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return info(code)\n  }\n\n  /**\n   * In info.\n   *\n   * ```markdown\n   * > | ~~~js\n   *        ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function info(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceInfo')\n      return infoBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceInfo')\n      return factorySpace(effects, metaBefore, 'whitespace')(code)\n    }\n    if (code === 96 && code === marker) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return info\n  }\n\n  /**\n   * In opening fence, after info and whitespace, before meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function metaBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return infoBefore(code)\n    }\n    effects.enter('codeFencedFenceMeta')\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return meta(code)\n  }\n\n  /**\n   * In meta.\n   *\n   * ```markdown\n   * > | ~~~js eval\n   *           ^\n   *   | alert(1)\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function meta(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      effects.exit('codeFencedFenceMeta')\n      return infoBefore(code)\n    }\n    if (code === 96 && code === marker) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return meta\n  }\n\n  /**\n   * At eol/eof in code, before a non-lazy closing fence or content.\n   *\n   * ```markdown\n   * > | ~~~js\n   *          ^\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function atNonLazyBreak(code) {\n    return effects.attempt(closeStart, after, contentBefore)(code)\n  }\n\n  /**\n   * Before code content, not a closing fence, at eol.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *             ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentBefore(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return contentStart\n  }\n\n  /**\n   * Before code content, not a closing fence.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentStart(code) {\n    return initialPrefix > 0 && markdownSpace(code)\n      ? factorySpace(\n          effects,\n          beforeContentChunk,\n          'linePrefix',\n          initialPrefix + 1\n        )(code)\n      : beforeContentChunk(code)\n  }\n\n  /**\n   * Before code content, after optional prefix.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeContentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return effects.check(nonLazyContinuation, atNonLazyBreak, after)(code)\n    }\n    effects.enter('codeFlowValue')\n    return contentChunk(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   *   | ~~~js\n   * > | alert(1)\n   *     ^^^^^^^^\n   *   | ~~~\n   * ```\n   *\n   * @type {State}\n   */\n  function contentChunk(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFlowValue')\n      return beforeContentChunk(code)\n    }\n    effects.consume(code)\n    return contentChunk\n  }\n\n  /**\n   * After code.\n   *\n   * ```markdown\n   *   | ~~~js\n   *   | alert(1)\n   * > | ~~~\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    effects.exit('codeFenced')\n    return ok(code)\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Tokenizer}\n   */\n  function tokenizeCloseStart(effects, ok, nok) {\n    let size = 0\n    return startBefore\n\n    /**\n     *\n     *\n     * @type {State}\n     */\n    function startBefore(code) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return start\n    }\n\n    /**\n     * Before closing fence, at optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function start(code) {\n      // Always populated by defaults.\n\n      // To do: `enter` here or in next state?\n      effects.enter('codeFencedFence')\n      return markdownSpace(code)\n        ? factorySpace(\n            effects,\n            beforeSequenceClose,\n            'linePrefix',\n            self.parser.constructs.disable.null.includes('codeIndented')\n              ? undefined\n              : 4\n          )(code)\n        : beforeSequenceClose(code)\n    }\n\n    /**\n     * In closing fence, after optional whitespace, at sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function beforeSequenceClose(code) {\n      if (code === marker) {\n        effects.enter('codeFencedFenceSequence')\n        return sequenceClose(code)\n      }\n      return nok(code)\n    }\n\n    /**\n     * In closing fence sequence.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *     ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceClose(code) {\n      if (code === marker) {\n        size++\n        effects.consume(code)\n        return sequenceClose\n      }\n      if (size >= sizeOpen) {\n        effects.exit('codeFencedFenceSequence')\n        return markdownSpace(code)\n          ? factorySpace(effects, sequenceCloseAfter, 'whitespace')(code)\n          : sequenceCloseAfter(code)\n      }\n      return nok(code)\n    }\n\n    /**\n     * After closing fence sequence, after optional whitespace.\n     *\n     * ```markdown\n     *   | ~~~js\n     *   | alert(1)\n     * > | ~~~\n     *        ^\n     * ```\n     *\n     * @type {State}\n     */\n    function sequenceCloseAfter(code) {\n      if (code === null || markdownLineEnding(code)) {\n        effects.exit('codeFencedFence')\n        return ok(code)\n      }\n      return nok(code)\n    }\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuation(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return lineStart\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function lineStart(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const codeIndented = {\n  name: 'codeIndented',\n  tokenize: tokenizeCodeIndented\n}\n\n/** @type {Construct} */\nconst furtherStart = {\n  tokenize: tokenizeFurtherStart,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeIndented(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of code (indented).\n   *\n   * > **Parsing note**: it is not needed to check if this first line is a\n   * > filled line (that it has a non-whitespace character), because blank lines\n   * > are parsed already, so we never run into that.\n   *\n   * ```markdown\n   * > |     aaa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: manually check if interrupting like `markdown-rs`.\n\n    effects.enter('codeIndented')\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, 'linePrefix', 4 + 1)(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n      ? atBreak(code)\n      : nok(code)\n  }\n\n  /**\n   * At a break.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === null) {\n      return after(code)\n    }\n    if (markdownLineEnding(code)) {\n      return effects.attempt(furtherStart, atBreak, after)(code)\n    }\n    effects.enter('codeFlowValue')\n    return inside(code)\n  }\n\n  /**\n   * In code content.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('codeFlowValue')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return inside\n  }\n\n  /** @type {State} */\n  function after(code) {\n    effects.exit('codeIndented')\n    // To do: allow interrupting like `markdown-rs`.\n    // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeFurtherStart(effects, ok, nok) {\n  const self = this\n  return furtherStart\n\n  /**\n   * At eol, trying to parse another indent.\n   *\n   * ```markdown\n   * > |     aaa\n   *            ^\n   *   |     bbb\n   * ```\n   *\n   * @type {State}\n   */\n  function furtherStart(code) {\n    // To do: improve `lazy` / `pierce` handling.\n    // If this is a lazy line, it cant be code.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code)\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return furtherStart\n    }\n\n    // To do: the code here in `micromark-js` is a bit different from\n    // `markdown-rs` because there it can attempt spaces.\n    // We cant yet.\n    //\n    // To do: use an improved `space_or_tab` function like `markdown-rs`,\n    // so that we can drop the next state.\n    return factorySpace(effects, afterPrefix, 'linePrefix', 4 + 1)(code)\n  }\n\n  /**\n   * At start, after 1 or 4 spaces.\n   *\n   * ```markdown\n   * > |     aaa\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n      ? ok(code)\n      : markdownLineEnding(code)\n      ? furtherStart(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Previous} Previous\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const codeText = {\n  name: 'codeText',\n  tokenize: tokenizeCodeText,\n  resolve: resolveCodeText,\n  previous\n}\n\n// To do: next major: dont resolve, like `markdown-rs`.\n/** @type {Resolver} */\nfunction resolveCodeText(events) {\n  let tailExitIndex = events.length - 4\n  let headEnterIndex = 3\n  /** @type {number} */\n  let index\n  /** @type {number | undefined} */\n  let enter\n\n  // If we start and end with an EOL or a space.\n  if (\n    (events[headEnterIndex][1].type === 'lineEnding' ||\n      events[headEnterIndex][1].type === 'space') &&\n    (events[tailExitIndex][1].type === 'lineEnding' ||\n      events[tailExitIndex][1].type === 'space')\n  ) {\n    index = headEnterIndex\n\n    // And we have data.\n    while (++index < tailExitIndex) {\n      if (events[index][1].type === 'codeTextData') {\n        // Then we have padding.\n        events[headEnterIndex][1].type = 'codeTextPadding'\n        events[tailExitIndex][1].type = 'codeTextPadding'\n        headEnterIndex += 2\n        tailExitIndex -= 2\n        break\n      }\n    }\n  }\n\n  // Merge adjacent spaces and data.\n  index = headEnterIndex - 1\n  tailExitIndex++\n  while (++index <= tailExitIndex) {\n    if (enter === undefined) {\n      if (index !== tailExitIndex && events[index][1].type !== 'lineEnding') {\n        enter = index\n      }\n    } else if (\n      index === tailExitIndex ||\n      events[index][1].type === 'lineEnding'\n    ) {\n      events[enter][1].type = 'codeTextData'\n      if (index !== enter + 2) {\n        events[enter][1].end = events[index - 1][1].end\n        events.splice(enter + 2, index - enter - 2)\n        tailExitIndex -= index - enter - 2\n        index = enter + 2\n      }\n      enter = undefined\n    }\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Previous}\n */\nfunction previous(code) {\n  // If there is a previous code, there will always be a tail.\n  return (\n    code !== 96 ||\n    this.events[this.events.length - 1][1].type === 'characterEscape'\n  )\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeCodeText(effects, ok, nok) {\n  const self = this\n  let sizeOpen = 0\n  /** @type {number} */\n  let size\n  /** @type {Token} */\n  let token\n  return start\n\n  /**\n   * Start of code (text).\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * > | \\`a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('codeText')\n    effects.enter('codeTextSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 96) {\n      effects.consume(code)\n      sizeOpen++\n      return sequenceOpen\n    }\n    effects.exit('codeTextSequence')\n    return between(code)\n  }\n\n  /**\n   * Between something and something else.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function between(code) {\n    // EOF.\n    if (code === null) {\n      return nok(code)\n    }\n\n    // To do: next major: dont do spaces in resolve, but when compiling,\n    // like `markdown-rs`.\n    // Tabs dont work, and virtual spaces dont make sense.\n    if (code === 32) {\n      effects.enter('space')\n      effects.consume(code)\n      effects.exit('space')\n      return between\n    }\n\n    // Closing fence? Could also be data.\n    if (code === 96) {\n      token = effects.enter('codeTextSequence')\n      size = 0\n      return sequenceClose(code)\n    }\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return between\n    }\n\n    // Data.\n    effects.enter('codeTextData')\n    return data(code)\n  }\n\n  /**\n   * In data.\n   *\n   * ```markdown\n   * > | `a`\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (\n      code === null ||\n      code === 32 ||\n      code === 96 ||\n      markdownLineEnding(code)\n    ) {\n      effects.exit('codeTextData')\n      return between(code)\n    }\n    effects.consume(code)\n    return data\n  }\n\n  /**\n   * In closing sequence.\n   *\n   * ```markdown\n   * > | `a`\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceClose(code) {\n    // More.\n    if (code === 96) {\n      effects.consume(code)\n      size++\n      return sequenceClose\n    }\n\n    // Done!\n    if (size === sizeOpen) {\n      effects.exit('codeTextSequence')\n      effects.exit('codeText')\n      return ok(code)\n    }\n\n    // More or less accents: mark as data.\n    token.type = 'codeTextData'\n    return data(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Token} Token\n */\n\nimport {splice} from 'micromark-util-chunked'\n/**\n * Tokenize subcontent.\n *\n * @param {Array<Event>} events\n *   List of events.\n * @returns {boolean}\n *   Whether subtokens were found.\n */\nexport function subtokenize(events) {\n  /** @type {Record<string, number>} */\n  const jumps = {}\n  let index = -1\n  /** @type {Event} */\n  let event\n  /** @type {number | undefined} */\n  let lineIndex\n  /** @type {number} */\n  let otherIndex\n  /** @type {Event} */\n  let otherEvent\n  /** @type {Array<Event>} */\n  let parameters\n  /** @type {Array<Event>} */\n  let subevents\n  /** @type {boolean | undefined} */\n  let more\n  while (++index < events.length) {\n    while (index in jumps) {\n      index = jumps[index]\n    }\n    event = events[index]\n\n    // Add a hook for the GFM tasklist extension, which needs to know if text\n    // is in the first content of a list item.\n    if (\n      index &&\n      event[1].type === 'chunkFlow' &&\n      events[index - 1][1].type === 'listItemPrefix'\n    ) {\n      subevents = event[1]._tokenizer.events\n      otherIndex = 0\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === 'lineEndingBlank'\n      ) {\n        otherIndex += 2\n      }\n      if (\n        otherIndex < subevents.length &&\n        subevents[otherIndex][1].type === 'content'\n      ) {\n        while (++otherIndex < subevents.length) {\n          if (subevents[otherIndex][1].type === 'content') {\n            break\n          }\n          if (subevents[otherIndex][1].type === 'chunkText') {\n            subevents[otherIndex][1]._isInFirstContentOfListItem = true\n            otherIndex++\n          }\n        }\n      }\n    }\n\n    // Enter.\n    if (event[0] === 'enter') {\n      if (event[1].contentType) {\n        Object.assign(jumps, subcontent(events, index))\n        index = jumps[index]\n        more = true\n      }\n    }\n    // Exit.\n    else if (event[1]._container) {\n      otherIndex = index\n      lineIndex = undefined\n      while (otherIndex--) {\n        otherEvent = events[otherIndex]\n        if (\n          otherEvent[1].type === 'lineEnding' ||\n          otherEvent[1].type === 'lineEndingBlank'\n        ) {\n          if (otherEvent[0] === 'enter') {\n            if (lineIndex) {\n              events[lineIndex][1].type = 'lineEndingBlank'\n            }\n            otherEvent[1].type = 'lineEnding'\n            lineIndex = otherIndex\n          }\n        } else {\n          break\n        }\n      }\n      if (lineIndex) {\n        // Fix position.\n        event[1].end = Object.assign({}, events[lineIndex][1].start)\n\n        // Switch container exit w/ line endings.\n        parameters = events.slice(lineIndex, index)\n        parameters.unshift(event)\n        splice(events, lineIndex, index - lineIndex + 1, parameters)\n      }\n    }\n  }\n  return !more\n}\n\n/**\n * Tokenize embedded tokens.\n *\n * @param {Array<Event>} events\n * @param {number} eventIndex\n * @returns {Record<string, number>}\n */\nfunction subcontent(events, eventIndex) {\n  const token = events[eventIndex][1]\n  const context = events[eventIndex][2]\n  let startPosition = eventIndex - 1\n  /** @type {Array<number>} */\n  const startPositions = []\n  const tokenizer =\n    token._tokenizer || context.parser[token.contentType](token.start)\n  const childEvents = tokenizer.events\n  /** @type {Array<[number, number]>} */\n  const jumps = []\n  /** @type {Record<string, number>} */\n  const gaps = {}\n  /** @type {Array<Chunk>} */\n  let stream\n  /** @type {Token | undefined} */\n  let previous\n  let index = -1\n  /** @type {Token | undefined} */\n  let current = token\n  let adjust = 0\n  let start = 0\n  const breaks = [start]\n\n  // Loop forward through the linked tokens to pass them in order to the\n  // subtokenizer.\n  while (current) {\n    // Find the position of the event for this token.\n    while (events[++startPosition][1] !== current) {\n      // Empty.\n    }\n    startPositions.push(startPosition)\n    if (!current._tokenizer) {\n      stream = context.sliceStream(current)\n      if (!current.next) {\n        stream.push(null)\n      }\n      if (previous) {\n        tokenizer.defineSkip(current.start)\n      }\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = true\n      }\n      tokenizer.write(stream)\n      if (current._isInFirstContentOfListItem) {\n        tokenizer._gfmTasklistFirstContentOfListItem = undefined\n      }\n    }\n\n    // Unravel the next token.\n    previous = current\n    current = current.next\n  }\n\n  // Now, loop back through all events (and linked tokens), to figure out which\n  // parts belong where.\n  current = token\n  while (++index < childEvents.length) {\n    if (\n      // Find a void token that includes a break.\n      childEvents[index][0] === 'exit' &&\n      childEvents[index - 1][0] === 'enter' &&\n      childEvents[index][1].type === childEvents[index - 1][1].type &&\n      childEvents[index][1].start.line !== childEvents[index][1].end.line\n    ) {\n      start = index + 1\n      breaks.push(start)\n      // Help GC.\n      current._tokenizer = undefined\n      current.previous = undefined\n      current = current.next\n    }\n  }\n\n  // Help GC.\n  tokenizer.events = []\n\n  // If theres one more token (which is the cases for lines that end in an\n  // EOF), thats perfect: the last point we found starts it.\n  // If there isnt then make sure any remaining content is added to it.\n  if (current) {\n    // Help GC.\n    current._tokenizer = undefined\n    current.previous = undefined\n  } else {\n    breaks.pop()\n  }\n\n  // Now splice the events from the subtokenizer into the current events,\n  // moving back to front so that splice indices arent affected.\n  index = breaks.length\n  while (index--) {\n    const slice = childEvents.slice(breaks[index], breaks[index + 1])\n    const start = startPositions.pop()\n    jumps.unshift([start, start + slice.length - 1])\n    splice(events, start, 2, slice)\n  }\n  index = -1\n  while (++index < jumps.length) {\n    gaps[adjust + jumps[index][0]] = adjust + jumps[index][1]\n    adjust += jumps[index][1] - jumps[index][0] - 1\n  }\n  return gaps\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {subtokenize} from 'micromark-util-subtokenize'\n/**\n * No name because it must not be turned off.\n * @type {Construct}\n */\nexport const content = {\n  tokenize: tokenizeContent,\n  resolve: resolveContent\n}\n\n/** @type {Construct} */\nconst continuationConstruct = {\n  tokenize: tokenizeContinuation,\n  partial: true\n}\n\n/**\n * Content is transparent: its parsed right now. That way, definitions are also\n * parsed right now: before text in paragraphs (specifically, media) are parsed.\n *\n * @type {Resolver}\n */\nfunction resolveContent(events) {\n  subtokenize(events)\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContent(effects, ok) {\n  /** @type {Token | undefined} */\n  let previous\n  return chunkStart\n\n  /**\n   * Before a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkStart(code) {\n    effects.enter('content')\n    previous = effects.enter('chunkContent', {\n      contentType: 'content'\n    })\n    return chunkInside(code)\n  }\n\n  /**\n   * In a content chunk.\n   *\n   * ```markdown\n   * > | abc\n   *     ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function chunkInside(code) {\n    if (code === null) {\n      return contentEnd(code)\n    }\n\n    // To do: in `markdown-rs`, each line is parsed on its own, and everything\n    // is stitched together resolving.\n    if (markdownLineEnding(code)) {\n      return effects.check(\n        continuationConstruct,\n        contentContinue,\n        contentEnd\n      )(code)\n    }\n\n    // Data.\n    effects.consume(code)\n    return chunkInside\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentEnd(code) {\n    effects.exit('chunkContent')\n    effects.exit('content')\n    return ok(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function contentContinue(code) {\n    effects.consume(code)\n    effects.exit('chunkContent')\n    previous.next = effects.enter('chunkContent', {\n      contentType: 'content',\n      previous\n    })\n    previous = previous.next\n    return chunkInside\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeContinuation(effects, ok, nok) {\n  const self = this\n  return startLookahead\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function startLookahead(code) {\n    effects.exit('chunkContent')\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, prefixed, 'linePrefix')\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function prefixed(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code)\n    }\n\n    // Always populated by defaults.\n\n    const tail = self.events[self.events.length - 1]\n    if (\n      !self.parser.constructs.disable.null.includes('codeIndented') &&\n      tail &&\n      tail[1].type === 'linePrefix' &&\n      tail[2].sliceSerialize(tail[1], true).length >= 4\n    ) {\n      return ok(code)\n    }\n    return effects.interrupt(self.parser.constructs.flow, nok, ok)(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {\n  asciiControl,\n  markdownLineEndingOrSpace,\n  markdownLineEnding\n} from 'micromark-util-character'\n/**\n * Parse destinations.\n *\n * ###### Examples\n *\n * ```markdown\n * <a>\n * <a\\>b>\n * <a b>\n * <a)>\n * a\n * a\\)b\n * a(b)c\n * a(b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type for whole (`<a>` or `b`).\n * @param {TokenType} literalType\n *   Type when enclosed (`<a>`).\n * @param {TokenType} literalMarkerType\n *   Type for enclosing (`<` and `>`).\n * @param {TokenType} rawType\n *   Type when not enclosed (`b`).\n * @param {TokenType} stringType\n *   Type for the value (`a` or `b`).\n * @param {number | undefined} [max=Infinity]\n *   Depth of nested parens (inclusive).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryDestination(\n  effects,\n  ok,\n  nok,\n  type,\n  literalType,\n  literalMarkerType,\n  rawType,\n  stringType,\n  max\n) {\n  const limit = max || Number.POSITIVE_INFINITY\n  let balance = 0\n  return start\n\n  /**\n   * Start of destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *     ^\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 60) {\n      effects.enter(type)\n      effects.enter(literalType)\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      return enclosedBefore\n    }\n\n    // ASCII control, space, closing paren.\n    if (code === null || code === 32 || code === 41 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.enter(type)\n    effects.enter(rawType)\n    effects.enter(stringType)\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return raw(code)\n  }\n\n  /**\n   * After `<`, at an enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedBefore(code) {\n    if (code === 62) {\n      effects.enter(literalMarkerType)\n      effects.consume(code)\n      effects.exit(literalMarkerType)\n      effects.exit(literalType)\n      effects.exit(type)\n      return ok\n    }\n    effects.enter(stringType)\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return enclosed(code)\n  }\n\n  /**\n   * In enclosed destination.\n   *\n   * ```markdown\n   * > | <aa>\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosed(code) {\n    if (code === 62) {\n      effects.exit('chunkString')\n      effects.exit(stringType)\n      return enclosedBefore(code)\n    }\n    if (code === null || code === 60 || markdownLineEnding(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return code === 92 ? enclosedEscape : enclosed\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | <a\\*a>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function enclosedEscape(code) {\n    if (code === 60 || code === 62 || code === 92) {\n      effects.consume(code)\n      return enclosed\n    }\n    return enclosed(code)\n  }\n\n  /**\n   * In raw destination.\n   *\n   * ```markdown\n   * > | aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function raw(code) {\n    if (\n      !balance &&\n      (code === null || code === 41 || markdownLineEndingOrSpace(code))\n    ) {\n      effects.exit('chunkString')\n      effects.exit(stringType)\n      effects.exit(rawType)\n      effects.exit(type)\n      return ok(code)\n    }\n    if (balance < limit && code === 40) {\n      effects.consume(code)\n      balance++\n      return raw\n    }\n    if (code === 41) {\n      effects.consume(code)\n      balance--\n      return raw\n    }\n\n    // ASCII control (but *not* `\\0`) and space and `(`.\n    // Note: in `markdown-rs`, `\\0` exists in codes, in `micromark-js` it\n    // doesnt.\n    if (code === null || code === 32 || code === 40 || asciiControl(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return code === 92 ? rawEscape : raw\n  }\n\n  /**\n   * After `\\`, at special character.\n   *\n   * ```markdown\n   * > | a\\*a\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function rawEscape(code) {\n    if (code === 40 || code === 41 || code === 92) {\n      effects.consume(code)\n      return raw\n    }\n    return raw(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/**\n * Parse labels.\n *\n * >  **Note**: labels in markdown are capped at 999 characters in the string.\n *\n * ###### Examples\n *\n * ```markdown\n * [a]\n * [a\n * b]\n * [a\\]b]\n * ```\n *\n * @this {TokenizeContext}\n *   Tokenize context.\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole label (`[a]`).\n * @param {TokenType} markerType\n *   Type for the markers (`[` and `]`).\n * @param {TokenType} stringType\n *   Type for the identifier (`a`).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryLabel(effects, ok, nok, type, markerType, stringType) {\n  const self = this\n  let size = 0\n  /** @type {boolean} */\n  let seen\n  return start\n\n  /**\n   * Start of label.\n   *\n   * ```markdown\n   * > | [a]\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter(type)\n    effects.enter(markerType)\n    effects.consume(code)\n    effects.exit(markerType)\n    effects.enter(stringType)\n    return atBreak\n  }\n\n  /**\n   * In label, at something, before something else.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (\n      size > 999 ||\n      code === null ||\n      code === 91 ||\n      (code === 93 && !seen) ||\n      // To do: remove in the future once weve switched from\n      // `micromark-extension-footnote` to `micromark-extension-gfm-footnote`,\n      // which doesnt need this.\n      // Hidden footnotes hook.\n      /* c8 ignore next 3 */\n      (code === 94 &&\n        !size &&\n        '_hiddenFootnoteSupport' in self.parser.constructs)\n    ) {\n      return nok(code)\n    }\n    if (code === 93) {\n      effects.exit(stringType)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n\n    // To do: indent? Link chunks and EOLs together?\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return atBreak\n    }\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return labelInside(code)\n  }\n\n  /**\n   * In label, in text.\n   *\n   * ```markdown\n   * > | [a]\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (\n      code === null ||\n      code === 91 ||\n      code === 93 ||\n      markdownLineEnding(code) ||\n      size++ > 999\n    ) {\n      effects.exit('chunkString')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    if (!seen) seen = !markdownSpace(code)\n    return code === 92 ? labelEscape : labelInside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | [a\\*a]\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code)\n      size++\n      return labelInside\n    }\n    return labelInside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenType} TokenType\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/**\n * Parse titles.\n *\n * ###### Examples\n *\n * ```markdown\n * \"a\"\n * 'b'\n * (c)\n * \"a\n * b\"\n * 'a\n *     b'\n * (a\\)b)\n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {State} nok\n *   State switched to when unsuccessful.\n * @param {TokenType} type\n *   Type of the whole title (`\"a\"`, `'b'`, `(c)`).\n * @param {TokenType} markerType\n *   Type for the markers (`\"`, `'`, `(`, and `)`).\n * @param {TokenType} stringType\n *   Type for the value (`a`).\n * @returns {State}\n *   Start state.\n */ // eslint-disable-next-line max-params\nexport function factoryTitle(effects, ok, nok, type, markerType, stringType) {\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of title.\n   *\n   * ```markdown\n   * > | \"a\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      effects.enter(type)\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      marker = code === 40 ? 41 : code\n      return begin\n    }\n    return nok(code)\n  }\n\n  /**\n   * After opening marker.\n   *\n   * This is also used at the closing marker.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function begin(code) {\n    if (code === marker) {\n      effects.enter(markerType)\n      effects.consume(code)\n      effects.exit(markerType)\n      effects.exit(type)\n      return ok\n    }\n    effects.enter(stringType)\n    return atBreak(code)\n  }\n\n  /**\n   * At something, before something else.\n   *\n   * ```markdown\n   * > | \"a\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.exit(stringType)\n      return begin(marker)\n    }\n    if (code === null) {\n      return nok(code)\n    }\n\n    // Note: blank lines cant exist in content.\n    if (markdownLineEnding(code)) {\n      // To do: use `space_or_tab_eol_with_options`, connect.\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return factorySpace(effects, atBreak, 'linePrefix')\n    }\n    effects.enter('chunkString', {\n      contentType: 'string'\n    })\n    return inside(code)\n  }\n\n  /**\n   *\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker || code === null || markdownLineEnding(code)) {\n      effects.exit('chunkString')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return code === 92 ? escape : inside\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * ```markdown\n   * > | \"a\\*b\"\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function escape(code) {\n    if (code === marker || code === 92) {\n      effects.consume(code)\n      return inside\n    }\n    return inside(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').State} State\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   line endings or spaces in markdown are often optional, in which case this\n *     factory can be used and `ok` will be switched to whether spaces were found\n *     or not\n * *   one line ending or space can be detected with\n *     `markdownLineEndingOrSpace(code)` right before using `factoryWhitespace`\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @returns\n *   Start state.\n */\nexport function factoryWhitespace(effects, ok) {\n  /** @type {boolean} */\n  let seen\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      seen = true\n      return start\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(\n        effects,\n        start,\n        seen ? 'linePrefix' : 'lineSuffix'\n      )(code)\n    }\n    return ok(code)\n  }\n}\n","/**\n * Normalize an identifier (as found in references, definitions).\n *\n * Collapses markdown whitespace, trim, and then lower- and uppercase.\n *\n * Some characters are considered uppercase, such as U+03F4 (``), but if their\n * lowercase counterpart (U+03B8 (``)) is uppercased will result in a different\n * uppercase character (U+0398 (``)).\n * So, to get a canonical form, we perform both lower- and uppercase.\n *\n * Using uppercase last makes sure keys will never interact with default\n * prototypal values (such as `constructor`): nothing in the prototype of\n * `Object` is uppercase.\n *\n * @param {string} value\n *   Identifier to normalize.\n * @returns {string}\n *   Normalized identifier.\n */\nexport function normalizeIdentifier(value) {\n  return (\n    value\n      // Collapse markdown whitespace.\n      .replace(/[\\t\\n\\r ]+/g, ' ')\n      // Trim.\n      .replace(/^ | $/g, '')\n      // Some characters are considered uppercase, but if their lowercase\n      // counterpart is uppercased will result in a different uppercase\n      // character.\n      // Hence, to get that form, we perform both lower- and uppercase.\n      // Upper case makes sure keys will not interact with default prototypal\n      // methods: no method is uppercase.\n      .toLowerCase()\n      .toUpperCase()\n  )\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factorySpace} from 'micromark-factory-space'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\n/** @type {Construct} */\nexport const definition = {\n  name: 'definition',\n  tokenize: tokenizeDefinition\n}\n\n/** @type {Construct} */\nconst titleBefore = {\n  tokenize: tokenizeTitleBefore,\n  partial: true\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinition(effects, ok, nok) {\n  const self = this\n  /** @type {string} */\n  let identifier\n  return start\n\n  /**\n   * At start of a definition.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Do not interrupt paragraphs (but do follow definitions).\n    // To do: do `interrupt` the way `markdown-rs` does.\n    // To do: parse whitespace the way `markdown-rs` does.\n    effects.enter('definition')\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `[`.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    // To do: parse whitespace the way `markdown-rs` does.\n\n    return factoryLabel.call(\n      self,\n      effects,\n      labelAfter,\n      // Note: we dont need to reset the way `markdown-rs` does.\n      nok,\n      'definitionLabel',\n      'definitionLabelMarker',\n      'definitionLabelString'\n    )(code)\n  }\n\n  /**\n   * After label.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    identifier = normalizeIdentifier(\n      self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n    )\n    if (code === 58) {\n      effects.enter('definitionMarker')\n      effects.consume(code)\n      effects.exit('definitionMarker')\n      return markerAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * After marker.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function markerAfter(code) {\n    // Note: whitespace is optional.\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, destinationBefore)(code)\n      : destinationBefore(code)\n  }\n\n  /**\n   * Before destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationBefore(code) {\n    return factoryDestination(\n      effects,\n      destinationAfter,\n      // Note: we dont need to reset the way `markdown-rs` does.\n      nok,\n      'definitionDestination',\n      'definitionDestinationLiteral',\n      'definitionDestinationLiteralMarker',\n      'definitionDestinationRaw',\n      'definitionDestinationString'\n    )(code)\n  }\n\n  /**\n   * After destination.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function destinationAfter(code) {\n    return effects.attempt(titleBefore, after, after)(code)\n  }\n\n  /**\n   * After definition.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, afterWhitespace, 'whitespace')(code)\n      : afterWhitespace(code)\n  }\n\n  /**\n   * After definition, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterWhitespace(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('definition')\n\n      // Note: we dont care about uniqueness.\n      // Its likely that that doesnt happen very frequently.\n      // It is more likely that it wastes precious time.\n      self.parser.defined.push(identifier)\n\n      // To do: `markdown-rs` interrupt.\n      // // Youd be interrupting.\n      // tokenizer.interrupt = true\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTitleBefore(effects, ok, nok) {\n  return titleBefore\n\n  /**\n   * After destination, at whitespace.\n   *\n   * ```markdown\n   * > | [a]: b\n   *           ^\n   * > | [a]: b \"c\"\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, beforeMarker)(code)\n      : nok(code)\n  }\n\n  /**\n   * At title.\n   *\n   * ```markdown\n   *   | [a]: b\n   * > | \"c\"\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function beforeMarker(code) {\n    return factoryTitle(\n      effects,\n      titleAfter,\n      nok,\n      'definitionTitle',\n      'definitionTitleMarker',\n      'definitionTitleString'\n    )(code)\n  }\n\n  /**\n   * After title.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfter(code) {\n    return markdownSpace(code)\n      ? factorySpace(effects, titleAfterOptionalWhitespace, 'whitespace')(code)\n      : titleAfterOptionalWhitespace(code)\n  }\n\n  /**\n   * After title, after optional whitespace.\n   *\n   * ```markdown\n   * > | [a]: b \"c\"\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function titleAfterOptionalWhitespace(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const hardBreakEscape = {\n  name: 'hardBreakEscape',\n  tokenize: tokenizeHardBreakEscape\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHardBreakEscape(effects, ok, nok) {\n  return start\n\n  /**\n   * Start of a hard break (escape).\n   *\n   * ```markdown\n   * > | a\\\n   *      ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('hardBreakEscape')\n    effects.consume(code)\n    return after\n  }\n\n  /**\n   * After `\\`, at eol.\n   *\n   * ```markdown\n   * > | a\\\n   *       ^\n   *   | b\n   * ```\n   *\n   *  @type {State}\n   */\n  function after(code) {\n    if (markdownLineEnding(code)) {\n      effects.exit('hardBreakEscape')\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {splice} from 'micromark-util-chunked'\n/** @type {Construct} */\nexport const headingAtx = {\n  name: 'headingAtx',\n  tokenize: tokenizeHeadingAtx,\n  resolve: resolveHeadingAtx\n}\n\n/** @type {Resolver} */\nfunction resolveHeadingAtx(events, context) {\n  let contentEnd = events.length - 2\n  let contentStart = 3\n  /** @type {Token} */\n  let content\n  /** @type {Token} */\n  let text\n\n  // Prefix whitespace, part of the opening.\n  if (events[contentStart][1].type === 'whitespace') {\n    contentStart += 2\n  }\n\n  // Suffix whitespace, part of the closing.\n  if (\n    contentEnd - 2 > contentStart &&\n    events[contentEnd][1].type === 'whitespace'\n  ) {\n    contentEnd -= 2\n  }\n  if (\n    events[contentEnd][1].type === 'atxHeadingSequence' &&\n    (contentStart === contentEnd - 1 ||\n      (contentEnd - 4 > contentStart &&\n        events[contentEnd - 2][1].type === 'whitespace'))\n  ) {\n    contentEnd -= contentStart + 1 === contentEnd ? 2 : 4\n  }\n  if (contentEnd > contentStart) {\n    content = {\n      type: 'atxHeadingText',\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end\n    }\n    text = {\n      type: 'chunkText',\n      start: events[contentStart][1].start,\n      end: events[contentEnd][1].end,\n      contentType: 'text'\n    }\n    splice(events, contentStart, contentEnd - contentStart + 1, [\n      ['enter', content, context],\n      ['enter', text, context],\n      ['exit', text, context],\n      ['exit', content, context]\n    ])\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHeadingAtx(effects, ok, nok) {\n  let size = 0\n  return start\n\n  /**\n   * Start of a heading (atx).\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    effects.enter('atxHeading')\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at `#`.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('atxHeadingSequence')\n    return sequenceOpen(code)\n  }\n\n  /**\n   * In opening sequence.\n   *\n   * ```markdown\n   * > | ## aa\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceOpen(code) {\n    if (code === 35 && size++ < 6) {\n      effects.consume(code)\n      return sequenceOpen\n    }\n\n    // Always at least one `#`.\n    if (code === null || markdownLineEndingOrSpace(code)) {\n      effects.exit('atxHeadingSequence')\n      return atBreak(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ## aa\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === 35) {\n      effects.enter('atxHeadingSequence')\n      return sequenceFurther(code)\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('atxHeading')\n      // To do: interrupt like `markdown-rs`.\n      // // Feel free to interrupt.\n      // tokenizer.interrupt = false\n      return ok(code)\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, atBreak, 'whitespace')(code)\n    }\n\n    // To do: generate `data` tokens, add the `text` token later.\n    // Needs edit map, see: `markdown.rs`.\n    effects.enter('atxHeadingText')\n    return data(code)\n  }\n\n  /**\n   * In further sequence (after whitespace).\n   *\n   * Could be normal visible hashes in the heading or a final sequence.\n   *\n   * ```markdown\n   * > | ## aa ##\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequenceFurther(code) {\n    if (code === 35) {\n      effects.consume(code)\n      return sequenceFurther\n    }\n    effects.exit('atxHeadingSequence')\n    return atBreak(code)\n  }\n\n  /**\n   * In text.\n   *\n   * ```markdown\n   * > | ## aa\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function data(code) {\n    if (code === null || code === 35 || markdownLineEndingOrSpace(code)) {\n      effects.exit('atxHeadingText')\n      return atBreak(code)\n    }\n    effects.consume(code)\n    return data\n  }\n}\n","/**\n * List of lowercase HTML block tag names.\n *\n * The list, when parsing HTML (flow), results in more relaxed rules (condition\n * 6).\n * Because they are known blocks, the HTML-like syntax doesnt have to be\n * strictly parsed.\n * For tag names not in this list, a more strict algorithm (condition 7) is used\n * to detect whether the HTML-like syntax is seen as HTML (flow) or not.\n *\n * This is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * >  **Note**: `search` was added in `CommonMark@0.31`.\n */\nexport const htmlBlockNames = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'search',\n  'section',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n]\n\n/**\n * List of lowercase HTML raw tag names.\n *\n * The list, when parsing HTML (flow), results in HTML that can include lines\n * without exiting, until a closing tag also in this list is found (condition\n * 1).\n *\n * This module is copied from:\n * <https://spec.commonmark.org/0.30/#html-blocks>.\n *\n * >  **Note**: `textarea` was added in `CommonMark@0.30`.\n */\nexport const htmlRawNames = ['pre', 'script', 'style', 'textarea']\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\nimport {htmlBlockNames, htmlRawNames} from 'micromark-util-html-tag-name'\nimport {blankLine} from './blank-line.js'\n\n/** @type {Construct} */\nexport const htmlFlow = {\n  name: 'htmlFlow',\n  tokenize: tokenizeHtmlFlow,\n  resolveTo: resolveToHtmlFlow,\n  concrete: true\n}\n\n/** @type {Construct} */\nconst blankLineBefore = {\n  tokenize: tokenizeBlankLineBefore,\n  partial: true\n}\nconst nonLazyContinuationStart = {\n  tokenize: tokenizeNonLazyContinuationStart,\n  partial: true\n}\n\n/** @type {Resolver} */\nfunction resolveToHtmlFlow(events) {\n  let index = events.length\n  while (index--) {\n    if (events[index][0] === 'enter' && events[index][1].type === 'htmlFlow') {\n      break\n    }\n  }\n  if (index > 1 && events[index - 2][1].type === 'linePrefix') {\n    // Add the prefix start to the HTML token.\n    events[index][1].start = events[index - 2][1].start\n    // Add the prefix start to the HTML line token.\n    events[index + 1][1].start = events[index - 2][1].start\n    // Remove the line prefix.\n    events.splice(index - 2, 2)\n  }\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlFlow(effects, ok, nok) {\n  const self = this\n  /** @type {number} */\n  let marker\n  /** @type {boolean} */\n  let closingTag\n  /** @type {string} */\n  let buffer\n  /** @type {number} */\n  let index\n  /** @type {Code} */\n  let markerB\n  return start\n\n  /**\n   * Start of HTML (flow).\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * At `<`, after optional whitespace.\n   *\n   * ```markdown\n   * > | <x />\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('htmlFlow')\n    effects.enter('htmlFlowData')\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | <x />\n   *      ^\n   * > | <!doctype>\n   *      ^\n   * > | <!--xxx-->\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code)\n      return declarationOpen\n    }\n    if (code === 47) {\n      effects.consume(code)\n      closingTag = true\n      return tagCloseStart\n    }\n    if (code === 63) {\n      effects.consume(code)\n      marker = 3\n      // To do:\n      // tokenizer.concrete = true\n      // To do: use `markdown-rs` style interrupt.\n      // While were in an instruction instead of a declaration, were on a `?`\n      // right now, so we do need to search for `>`, similar to declarations.\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *       ^\n   * > | <!--xxx-->\n   *       ^\n   * > | <![CDATA[>&<]]>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code)\n      marker = 2\n      return commentOpenInside\n    }\n    if (code === 91) {\n      effects.consume(code)\n      marker = 5\n      index = 0\n      return cdataOpenInside\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      marker = 4\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!-`, inside a comment, at another `-`.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuationDeclarationInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<![`, inside CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *        ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = 'CDATA['\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n      if (index === value.length) {\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok : continuation\n      }\n      return cdataOpenInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | </x>\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer = String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * In tag name.\n   *\n   * ```markdown\n   * > | <ab>\n   *      ^^\n   * > | </ab>\n   *       ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagName(code) {\n    if (\n      code === null ||\n      code === 47 ||\n      code === 62 ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      const slash = code === 47\n      const name = buffer.toLowerCase()\n      if (!slash && !closingTag && htmlRawNames.includes(name)) {\n        marker = 1\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n      if (htmlBlockNames.includes(buffer.toLowerCase())) {\n        marker = 6\n        if (slash) {\n          effects.consume(code)\n          return basicSelfClosing\n        }\n\n        // // Do not form containers.\n        // tokenizer.concrete = true\n        return self.interrupt ? ok(code) : continuation(code)\n      }\n      marker = 7\n      // Do not support complete HTML when interrupting.\n      return self.interrupt && !self.parser.lazy[self.now().line]\n        ? nok(code)\n        : closingTag\n        ? completeClosingTagAfter(code)\n        : completeAttributeNameBefore(code)\n    }\n\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      buffer += String.fromCharCode(code)\n      return tagName\n    }\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a basic tag name.\n   *\n   * ```markdown\n   * > | <div/>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function basicSelfClosing(code) {\n    if (code === 62) {\n      effects.consume(code)\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return self.interrupt ? ok : continuation\n    }\n    return nok(code)\n  }\n\n  /**\n   * After closing slash of a complete tag name.\n   *\n   * ```markdown\n   * > | <x/>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeClosingTagAfter(code) {\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeClosingTagAfter\n    }\n    return completeEnd(code)\n  }\n\n  /**\n   * At an attribute name.\n   *\n   * At first, this state is used after a complete tag name, after whitespace,\n   * where it expects optional attributes or the end of the tag.\n   * It is also reused after attributes, when expecting more optional\n   * attributes.\n   *\n   * ```markdown\n   * > | <a />\n   *        ^\n   * > | <a :b>\n   *        ^\n   * > | <a _b>\n   *        ^\n   * > | <a b>\n   *        ^\n   * > | <a >\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameBefore(code) {\n    if (code === 47) {\n      effects.consume(code)\n      return completeEnd\n    }\n\n    // ASCII alphanumerical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameBefore\n    }\n    return completeEnd(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | <a :b>\n   *         ^\n   * > | <a _b>\n   *         ^\n   * > | <a b>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeName(code) {\n    // ASCII alphanumerical and `-`, `.`, `:`, and `_`.\n    if (\n      code === 45 ||\n      code === 46 ||\n      code === 58 ||\n      code === 95 ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return completeAttributeName\n    }\n    return completeAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, at an optional initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b>\n   *         ^\n   * > | <a b=c>\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeNameAfter\n    }\n    return completeAttributeNameBefore(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * > | <a b=\"c\">\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueBefore(code) {\n    if (\n      code === null ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code)\n      markerB = code\n      return completeAttributeValueQuoted\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAttributeValueBefore\n    }\n    return completeAttributeValueUnquoted(code)\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *           ^\n   * > | <a b='c'>\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuoted(code) {\n    if (code === markerB) {\n      effects.consume(code)\n      markerB = null\n      return completeAttributeValueQuotedAfter\n    }\n    if (code === null || markdownLineEnding(code)) {\n      return nok(code)\n    }\n    effects.consume(code)\n    return completeAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | <a b=c>\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueUnquoted(code) {\n    if (\n      code === null ||\n      code === 34 ||\n      code === 39 ||\n      code === 47 ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96 ||\n      markdownLineEndingOrSpace(code)\n    ) {\n      return completeAttributeNameAfter(code)\n    }\n    effects.consume(code)\n    return completeAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the\n   * end of the tag.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownSpace(code)) {\n      return completeAttributeNameBefore(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a complete tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | <a b=\"c\">\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeEnd(code) {\n    if (code === 62) {\n      effects.consume(code)\n      return completeAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `>` in a complete tag.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function completeAfter(code) {\n    if (code === null || markdownLineEnding(code)) {\n      // // Do not form containers.\n      // tokenizer.concrete = true\n      return continuation(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return completeAfter\n    }\n    return nok(code)\n  }\n\n  /**\n   * In continuation of any HTML kind.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuation(code) {\n    if (code === 45 && marker === 2) {\n      effects.consume(code)\n      return continuationCommentInside\n    }\n    if (code === 60 && marker === 1) {\n      effects.consume(code)\n      return continuationRawTagOpen\n    }\n    if (code === 62 && marker === 4) {\n      effects.consume(code)\n      return continuationClose\n    }\n    if (code === 63 && marker === 3) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    if (code === 93 && marker === 5) {\n      effects.consume(code)\n      return continuationCdataInside\n    }\n    if (markdownLineEnding(code) && (marker === 6 || marker === 7)) {\n      effects.exit('htmlFlowData')\n      return effects.check(\n        blankLineBefore,\n        continuationAfter,\n        continuationStart\n      )(code)\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('htmlFlowData')\n      return continuationStart(code)\n    }\n    effects.consume(code)\n    return continuation\n  }\n\n  /**\n   * In continuation, at eol.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStart(code) {\n    return effects.check(\n      nonLazyContinuationStart,\n      continuationStartNonLazy,\n      continuationAfter\n    )(code)\n  }\n\n  /**\n   * In continuation, at eol, before non-lazy content.\n   *\n   * ```markdown\n   * > | <x>\n   *        ^\n   *   | asd\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationStartNonLazy(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return continuationBefore\n  }\n\n  /**\n   * In continuation, before non-lazy content.\n   *\n   * ```markdown\n   *   | <x>\n   * > | asd\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationBefore(code) {\n    if (code === null || markdownLineEnding(code)) {\n      return continuationStart(code)\n    }\n    effects.enter('htmlFlowData')\n    return continuation(code)\n  }\n\n  /**\n   * In comment continuation, after one `-`, expecting another.\n   *\n   * ```markdown\n   * > | <!--xxx-->\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCommentInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `<`, at `/`.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawTagOpen(code) {\n    if (code === 47) {\n      effects.consume(code)\n      buffer = ''\n      return continuationRawEndTag\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In raw continuation, after `</`, in a raw tag name.\n   *\n   * ```markdown\n   * > | <script>console.log(1)</script>\n   *                             ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationRawEndTag(code) {\n    if (code === 62) {\n      const name = buffer.toLowerCase()\n      if (htmlRawNames.includes(name)) {\n        effects.consume(code)\n        return continuationClose\n      }\n      return continuation(code)\n    }\n    if (asciiAlpha(code) && buffer.length < 8) {\n      effects.consume(code)\n      // @ts-expect-error: not null.\n      buffer += String.fromCharCode(code)\n      return continuationRawEndTag\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In cdata continuation, after `]`, expecting `]>`.\n   *\n   * ```markdown\n   * > | <![CDATA[>&<]]>\n   *                  ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationCdataInside(code) {\n    if (code === 93) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In declaration or instruction continuation, at `>`.\n   *\n   * ```markdown\n   * > | <!-->\n   *         ^\n   * > | <?>\n   *       ^\n   * > | <!q>\n   *        ^\n   * > | <!--ab-->\n   *             ^\n   * > | <![CDATA[>&<]]>\n   *                   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationDeclarationInside(code) {\n    if (code === 62) {\n      effects.consume(code)\n      return continuationClose\n    }\n\n    // More dashes.\n    if (code === 45 && marker === 2) {\n      effects.consume(code)\n      return continuationDeclarationInside\n    }\n    return continuation(code)\n  }\n\n  /**\n   * In closed continuation: everything we get until the eol/eof is part of it.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationClose(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('htmlFlowData')\n      return continuationAfter(code)\n    }\n    effects.consume(code)\n    return continuationClose\n  }\n\n  /**\n   * Done.\n   *\n   * ```markdown\n   * > | <!doctype>\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function continuationAfter(code) {\n    effects.exit('htmlFlow')\n    // // Feel free to interrupt.\n    // tokenizer.interrupt = false\n    // // No longer concrete.\n    // tokenizer.concrete = false\n    return ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeNonLazyContinuationStart(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * At eol, before continuation.\n   *\n   * ```markdown\n   * > | * ```js\n   *            ^\n   *   | b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (markdownLineEnding(code)) {\n      effects.enter('lineEnding')\n      effects.consume(code)\n      effects.exit('lineEnding')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * A continuation.\n   *\n   * ```markdown\n   *   | * ```js\n   * > | b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return self.parser.lazy[self.now().line] ? nok(code) : ok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLineBefore(effects, ok, nok) {\n  return start\n\n  /**\n   * Before eol, expecting blank line.\n   *\n   * ```markdown\n   * > | <div>\n   *          ^\n   *   |\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return effects.attempt(blankLine, ok, nok)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {\n  asciiAlpha,\n  asciiAlphanumeric,\n  markdownLineEnding,\n  markdownLineEndingOrSpace,\n  markdownSpace\n} from 'micromark-util-character'\n/** @type {Construct} */\nexport const htmlText = {\n  name: 'htmlText',\n  tokenize: tokenizeHtmlText\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeHtmlText(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code> | undefined} */\n  let marker\n  /** @type {number} */\n  let index\n  /** @type {State} */\n  let returnState\n  return start\n\n  /**\n   * Start of HTML (text).\n   *\n   * ```markdown\n   * > | a <b> c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('htmlText')\n    effects.enter('htmlTextData')\n    effects.consume(code)\n    return open\n  }\n\n  /**\n   * After `<`, at tag name or other stuff.\n   *\n   * ```markdown\n   * > | a <b> c\n   *        ^\n   * > | a <!doctype> c\n   *        ^\n   * > | a <!--b--> c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 33) {\n      effects.consume(code)\n      return declarationOpen\n    }\n    if (code === 47) {\n      effects.consume(code)\n      return tagCloseStart\n    }\n    if (code === 63) {\n      effects.consume(code)\n      return instruction\n    }\n\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `<!`, at declaration, comment, or CDATA.\n   *\n   * ```markdown\n   * > | a <!doctype> c\n   *         ^\n   * > | a <!--b--> c\n   *         ^\n   * > | a <![CDATA[>&<]]> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declarationOpen(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentOpenInside\n    }\n    if (code === 91) {\n      effects.consume(code)\n      index = 0\n      return cdataOpenInside\n    }\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return declaration\n    }\n    return nok(code)\n  }\n\n  /**\n   * In a comment, after `<!-`, at another `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentOpenInside(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentEnd\n    }\n    return nok(code)\n  }\n\n  /**\n   * In comment.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function comment(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 45) {\n      effects.consume(code)\n      return commentClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = comment\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return comment\n  }\n\n  /**\n   * In comment, after `-`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentClose(code) {\n    if (code === 45) {\n      effects.consume(code)\n      return commentEnd\n    }\n    return comment(code)\n  }\n\n  /**\n   * In comment, after `--`.\n   *\n   * ```markdown\n   * > | a <!--b--> c\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function commentEnd(code) {\n    return code === 62\n      ? end(code)\n      : code === 45\n      ? commentClose(code)\n      : comment(code)\n  }\n\n  /**\n   * After `<![`, in CDATA, expecting `CDATA[`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *          ^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataOpenInside(code) {\n    const value = 'CDATA['\n    if (code === value.charCodeAt(index++)) {\n      effects.consume(code)\n      return index === value.length ? cdata : cdataOpenInside\n    }\n    return nok(code)\n  }\n\n  /**\n   * In CDATA.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                ^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdata(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 93) {\n      effects.consume(code)\n      return cdataClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = cdata\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return cdata\n  }\n\n  /**\n   * In CDATA, after `]`, at another `]`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataClose(code) {\n    if (code === 93) {\n      effects.consume(code)\n      return cdataEnd\n    }\n    return cdata(code)\n  }\n\n  /**\n   * In CDATA, after `]]`, at `>`.\n   *\n   * ```markdown\n   * > | a <![CDATA[>&<]]> b\n   *                     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function cdataEnd(code) {\n    if (code === 62) {\n      return end(code)\n    }\n    if (code === 93) {\n      effects.consume(code)\n      return cdataEnd\n    }\n    return cdata(code)\n  }\n\n  /**\n   * In declaration.\n   *\n   * ```markdown\n   * > | a <!b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function declaration(code) {\n    if (code === null || code === 62) {\n      return end(code)\n    }\n    if (markdownLineEnding(code)) {\n      returnState = declaration\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return declaration\n  }\n\n  /**\n   * In instruction.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instruction(code) {\n    if (code === null) {\n      return nok(code)\n    }\n    if (code === 63) {\n      effects.consume(code)\n      return instructionClose\n    }\n    if (markdownLineEnding(code)) {\n      returnState = instruction\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return instruction\n  }\n\n  /**\n   * In instruction, after `?`, at `>`.\n   *\n   * ```markdown\n   * > | a <?b?> c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function instructionClose(code) {\n    return code === 62 ? end(code) : instruction(code)\n  }\n\n  /**\n   * After `</`, in closing tag, at tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseStart(code) {\n    // ASCII alphabetical.\n    if (asciiAlpha(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `</x`, in a tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagClose(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagClose\n    }\n    return tagCloseBetween(code)\n  }\n\n  /**\n   * In closing tag, after tag name.\n   *\n   * ```markdown\n   * > | a </b> c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagCloseBetween(code) {\n    if (markdownLineEnding(code)) {\n      returnState = tagCloseBetween\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagCloseBetween\n    }\n    return end(code)\n  }\n\n  /**\n   * After `<x`, in opening tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpen(code) {\n    // ASCII alphanumerical and `-`.\n    if (code === 45 || asciiAlphanumeric(code)) {\n      effects.consume(code)\n      return tagOpen\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In opening tag, after tag name.\n   *\n   * ```markdown\n   * > | a <b> c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenBetween(code) {\n    if (code === 47) {\n      effects.consume(code)\n      return end\n    }\n\n    // ASCII alphabetical and `:` and `_`.\n    if (code === 58 || code === 95 || asciiAlpha(code)) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenBetween\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenBetween\n    }\n    return end(code)\n  }\n\n  /**\n   * In attribute name.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeName(code) {\n    // ASCII alphabetical and `-`, `.`, `:`, and `_`.\n    if (\n      code === 45 ||\n      code === 46 ||\n      code === 58 ||\n      code === 95 ||\n      asciiAlphanumeric(code)\n    ) {\n      effects.consume(code)\n      return tagOpenAttributeName\n    }\n    return tagOpenAttributeNameAfter(code)\n  }\n\n  /**\n   * After attribute name, before initializer, the end of the tag, or\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c> d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeNameAfter(code) {\n    if (code === 61) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeNameAfter\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeNameAfter\n    }\n    return tagOpenBetween(code)\n  }\n\n  /**\n   * Before unquoted, double quoted, or single quoted attribute value, allowing\n   * whitespace.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueBefore(code) {\n    if (\n      code === null ||\n      code === 60 ||\n      code === 61 ||\n      code === 62 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 34 || code === 39) {\n      effects.consume(code)\n      marker = code\n      return tagOpenAttributeValueQuoted\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueBefore\n      return lineEndingBefore(code)\n    }\n    if (markdownSpace(code)) {\n      effects.consume(code)\n      return tagOpenAttributeValueBefore\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * In double or single quoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuoted(code) {\n    if (code === marker) {\n      effects.consume(code)\n      marker = undefined\n      return tagOpenAttributeValueQuotedAfter\n    }\n    if (code === null) {\n      return nok(code)\n    }\n    if (markdownLineEnding(code)) {\n      returnState = tagOpenAttributeValueQuoted\n      return lineEndingBefore(code)\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueQuoted\n  }\n\n  /**\n   * In unquoted attribute value.\n   *\n   * ```markdown\n   * > | a <b c=d> e\n   *            ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueUnquoted(code) {\n    if (\n      code === null ||\n      code === 34 ||\n      code === 39 ||\n      code === 60 ||\n      code === 61 ||\n      code === 96\n    ) {\n      return nok(code)\n    }\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    effects.consume(code)\n    return tagOpenAttributeValueUnquoted\n  }\n\n  /**\n   * After double or single quoted attribute value, before whitespace or the end\n   * of the tag.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function tagOpenAttributeValueQuotedAfter(code) {\n    if (code === 47 || code === 62 || markdownLineEndingOrSpace(code)) {\n      return tagOpenBetween(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In certain circumstances of a tag where only an `>` is allowed.\n   *\n   * ```markdown\n   * > | a <b c=\"d\"> e\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function end(code) {\n    if (code === 62) {\n      effects.consume(code)\n      effects.exit('htmlTextData')\n      effects.exit('htmlText')\n      return ok\n    }\n    return nok(code)\n  }\n\n  /**\n   * At eol.\n   *\n   * >  **Note**: we cant have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   * > | a <!--a\n   *            ^\n   *   | b-->\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingBefore(code) {\n    effects.exit('htmlTextData')\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return lineEndingAfter\n  }\n\n  /**\n   * After eol, at optional whitespace.\n   *\n   * >  **Note**: we cant have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfter(code) {\n    // Always populated by defaults.\n\n    return markdownSpace(code)\n      ? factorySpace(\n          effects,\n          lineEndingAfterPrefix,\n          'linePrefix',\n          self.parser.constructs.disable.null.includes('codeIndented')\n            ? undefined\n            : 4\n        )(code)\n      : lineEndingAfterPrefix(code)\n  }\n\n  /**\n   * After eol, after optional whitespace.\n   *\n   * >  **Note**: we cant have blank lines in text, so no need to worry about\n   * > empty tokens.\n   *\n   * ```markdown\n   *   | a <!--a\n   * > | b-->\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function lineEndingAfterPrefix(code) {\n    effects.enter('htmlTextData')\n    return returnState(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factoryDestination} from 'micromark-factory-destination'\nimport {factoryLabel} from 'micromark-factory-label'\nimport {factoryTitle} from 'micromark-factory-title'\nimport {factoryWhitespace} from 'micromark-factory-whitespace'\nimport {markdownLineEndingOrSpace} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/** @type {Construct} */\nexport const labelEnd = {\n  name: 'labelEnd',\n  tokenize: tokenizeLabelEnd,\n  resolveTo: resolveToLabelEnd,\n  resolveAll: resolveAllLabelEnd\n}\n\n/** @type {Construct} */\nconst resourceConstruct = {\n  tokenize: tokenizeResource\n}\n/** @type {Construct} */\nconst referenceFullConstruct = {\n  tokenize: tokenizeReferenceFull\n}\n/** @type {Construct} */\nconst referenceCollapsedConstruct = {\n  tokenize: tokenizeReferenceCollapsed\n}\n\n/** @type {Resolver} */\nfunction resolveAllLabelEnd(events) {\n  let index = -1\n  while (++index < events.length) {\n    const token = events[index][1]\n    if (\n      token.type === 'labelImage' ||\n      token.type === 'labelLink' ||\n      token.type === 'labelEnd'\n    ) {\n      // Remove the marker.\n      events.splice(index + 1, token.type === 'labelImage' ? 4 : 2)\n      token.type = 'data'\n      index++\n    }\n  }\n  return events\n}\n\n/** @type {Resolver} */\nfunction resolveToLabelEnd(events, context) {\n  let index = events.length\n  let offset = 0\n  /** @type {Token} */\n  let token\n  /** @type {number | undefined} */\n  let open\n  /** @type {number | undefined} */\n  let close\n  /** @type {Array<Event>} */\n  let media\n\n  // Find an opening.\n  while (index--) {\n    token = events[index][1]\n    if (open) {\n      // If we see another link, or inactive link label, weve been here before.\n      if (\n        token.type === 'link' ||\n        (token.type === 'labelLink' && token._inactive)\n      ) {\n        break\n      }\n\n      // Mark other link openings as inactive, as we cant have links in\n      // links.\n      if (events[index][0] === 'enter' && token.type === 'labelLink') {\n        token._inactive = true\n      }\n    } else if (close) {\n      if (\n        events[index][0] === 'enter' &&\n        (token.type === 'labelImage' || token.type === 'labelLink') &&\n        !token._balanced\n      ) {\n        open = index\n        if (token.type !== 'labelLink') {\n          offset = 2\n          break\n        }\n      }\n    } else if (token.type === 'labelEnd') {\n      close = index\n    }\n  }\n  const group = {\n    type: events[open][1].type === 'labelLink' ? 'link' : 'image',\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n  const label = {\n    type: 'label',\n    start: Object.assign({}, events[open][1].start),\n    end: Object.assign({}, events[close][1].end)\n  }\n  const text = {\n    type: 'labelText',\n    start: Object.assign({}, events[open + offset + 2][1].end),\n    end: Object.assign({}, events[close - 2][1].start)\n  }\n  media = [\n    ['enter', group, context],\n    ['enter', label, context]\n  ]\n\n  // Opening marker.\n  media = push(media, events.slice(open + 1, open + offset + 3))\n\n  // Text open.\n  media = push(media, [['enter', text, context]])\n\n  // Always populated by defaults.\n\n  // Between.\n  media = push(\n    media,\n    resolveAll(\n      context.parser.constructs.insideSpan.null,\n      events.slice(open + offset + 4, close - 3),\n      context\n    )\n  )\n\n  // Text close, marker close, label close.\n  media = push(media, [\n    ['exit', text, context],\n    events[close - 2],\n    events[close - 1],\n    ['exit', label, context]\n  ])\n\n  // Reference, resource, or so.\n  media = push(media, events.slice(close + 1))\n\n  // Media close.\n  media = push(media, [['exit', group, context]])\n  splice(events, open, events.length, media)\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelEnd(effects, ok, nok) {\n  const self = this\n  let index = self.events.length\n  /** @type {Token} */\n  let labelStart\n  /** @type {boolean} */\n  let defined\n\n  // Find an opening.\n  while (index--) {\n    if (\n      (self.events[index][1].type === 'labelImage' ||\n        self.events[index][1].type === 'labelLink') &&\n      !self.events[index][1]._balanced\n    ) {\n      labelStart = self.events[index][1]\n      break\n    }\n  }\n  return start\n\n  /**\n   * Start of label end.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // If there is not an okay opening.\n    if (!labelStart) {\n      return nok(code)\n    }\n\n    // If the corresponding label (link) start is marked as inactive,\n    // it means wed be wrapping a link, like this:\n    //\n    // ```markdown\n    // > | a [b [c](d) e](f) g.\n    //                  ^\n    // ```\n    //\n    // We cant have that, so its just balanced brackets.\n    if (labelStart._inactive) {\n      return labelEndNok(code)\n    }\n    defined = self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize({\n          start: labelStart.end,\n          end: self.now()\n        })\n      )\n    )\n    effects.enter('labelEnd')\n    effects.enter('labelMarker')\n    effects.consume(code)\n    effects.exit('labelMarker')\n    effects.exit('labelEnd')\n    return after\n  }\n\n  /**\n   * After `]`.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *       ^\n   * > | [a][b] c\n   *       ^\n   * > | [a][] b\n   *       ^\n   * > | [a] b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Note: `markdown-rs` also parses GFM footnotes here, which for us is in\n    // an extension.\n\n    // Resource (`[asd](fgh)`)?\n    if (code === 40) {\n      return effects.attempt(\n        resourceConstruct,\n        labelEndOk,\n        defined ? labelEndOk : labelEndNok\n      )(code)\n    }\n\n    // Full (`[asd][fgh]`) or collapsed (`[asd][]`) reference?\n    if (code === 91) {\n      return effects.attempt(\n        referenceFullConstruct,\n        labelEndOk,\n        defined ? referenceNotFull : labelEndNok\n      )(code)\n    }\n\n    // Shortcut (`[asd]`) reference?\n    return defined ? labelEndOk(code) : labelEndNok(code)\n  }\n\n  /**\n   * After `]`, at `[`, but not at a full reference.\n   *\n   * >  **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] b\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceNotFull(code) {\n    return effects.attempt(\n      referenceCollapsedConstruct,\n      labelEndOk,\n      labelEndNok\n    )(code)\n  }\n\n  /**\n   * Done, we found something.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *           ^\n   * > | [a][b] c\n   *           ^\n   * > | [a][] b\n   *          ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndOk(code) {\n    // Note: `markdown-rs` does a bunch of stuff here.\n    return ok(code)\n  }\n\n  /**\n   * Done, its nothing.\n   *\n   * There was an okay opening, but we didnt match anything.\n   *\n   * ```markdown\n   * > | [a](b c\n   *        ^\n   * > | [a][b c\n   *        ^\n   * > | [a] b\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEndNok(code) {\n    labelStart._balanced = true\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeResource(effects, ok, nok) {\n  return resourceStart\n\n  /**\n   * At a resource.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceStart(code) {\n    effects.enter('resource')\n    effects.enter('resourceMarker')\n    effects.consume(code)\n    effects.exit('resourceMarker')\n    return resourceBefore\n  }\n\n  /**\n   * In resource, after `(`, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBefore(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceOpen)(code)\n      : resourceOpen(code)\n  }\n\n  /**\n   * In resource, after optional whitespace, at `)` or a destination.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceOpen(code) {\n    if (code === 41) {\n      return resourceEnd(code)\n    }\n    return factoryDestination(\n      effects,\n      resourceDestinationAfter,\n      resourceDestinationMissing,\n      'resourceDestination',\n      'resourceDestinationLiteral',\n      'resourceDestinationLiteralMarker',\n      'resourceDestinationRaw',\n      'resourceDestinationString',\n      32\n    )(code)\n  }\n\n  /**\n   * In resource, after destination, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b) c\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceBetween)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * At invalid destination.\n   *\n   * ```markdown\n   * > | [a](<<) b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceDestinationMissing(code) {\n    return nok(code)\n  }\n\n  /**\n   * In resource, after destination and whitespace, at `(` or title.\n   *\n   * ```markdown\n   * > | [a](b ) c\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceBetween(code) {\n    if (code === 34 || code === 39 || code === 40) {\n      return factoryTitle(\n        effects,\n        resourceTitleAfter,\n        nok,\n        'resourceTitle',\n        'resourceTitleMarker',\n        'resourceTitleString'\n      )(code)\n    }\n    return resourceEnd(code)\n  }\n\n  /**\n   * In resource, after title, at optional whitespace.\n   *\n   * ```markdown\n   * > | [a](b \"c\") d\n   *              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceTitleAfter(code) {\n    return markdownLineEndingOrSpace(code)\n      ? factoryWhitespace(effects, resourceEnd)(code)\n      : resourceEnd(code)\n  }\n\n  /**\n   * In resource, at `)`.\n   *\n   * ```markdown\n   * > | [a](b) d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function resourceEnd(code) {\n    if (code === 41) {\n      effects.enter('resourceMarker')\n      effects.consume(code)\n      effects.exit('resourceMarker')\n      effects.exit('resource')\n      return ok\n    }\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceFull(effects, ok, nok) {\n  const self = this\n  return referenceFull\n\n  /**\n   * In a reference (full), at the `[`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFull(code) {\n    return factoryLabel.call(\n      self,\n      effects,\n      referenceFullAfter,\n      referenceFullMissing,\n      'reference',\n      'referenceMarker',\n      'referenceString'\n    )(code)\n  }\n\n  /**\n   * In a reference (full), after `]`.\n   *\n   * ```markdown\n   * > | [a][b] d\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullAfter(code) {\n    return self.parser.defined.includes(\n      normalizeIdentifier(\n        self.sliceSerialize(self.events[self.events.length - 1][1]).slice(1, -1)\n      )\n    )\n      ? ok(code)\n      : nok(code)\n  }\n\n  /**\n   * In reference (full) that was missing.\n   *\n   * ```markdown\n   * > | [a][b d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceFullMissing(code) {\n    return nok(code)\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeReferenceCollapsed(effects, ok, nok) {\n  return referenceCollapsedStart\n\n  /**\n   * In reference (collapsed), at `[`.\n   *\n   * >  **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function referenceCollapsedStart(code) {\n    // We only attempt a collapsed label if theres a `[`.\n\n    effects.enter('reference')\n    effects.enter('referenceMarker')\n    effects.consume(code)\n    effects.exit('referenceMarker')\n    return referenceCollapsedOpen\n  }\n\n  /**\n   * In reference (collapsed), at `]`.\n   *\n   * >  **Note**: we only get here if the label is defined.\n   *\n   * ```markdown\n   * > | [a][] d\n   *         ^\n   * ```\n   *\n   *  @type {State}\n   */\n  function referenceCollapsedOpen(code) {\n    if (code === 93) {\n      effects.enter('referenceMarker')\n      effects.consume(code)\n      effects.exit('referenceMarker')\n      effects.exit('reference')\n      return ok\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartImage = {\n  name: 'labelStartImage',\n  tokenize: tokenizeLabelStartImage,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartImage(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of label (image) start.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('labelImage')\n    effects.enter('labelImageMarker')\n    effects.consume(code)\n    effects.exit('labelImageMarker')\n    return open\n  }\n\n  /**\n   * After `!`, at `[`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (code === 91) {\n      effects.enter('labelMarker')\n      effects.consume(code)\n      effects.exit('labelMarker')\n      effects.exit('labelImage')\n      return after\n    }\n    return nok(code)\n  }\n\n  /**\n   * After `![`.\n   *\n   * ```markdown\n   * > | a ![b] c\n   *         ^\n   * ```\n   *\n   * This is needed in because, when GFM footnotes are enabled, images never\n   * form when started with a `^`.\n   * Instead, links form:\n   *\n   * ```markdown\n   * ![^a](b)\n   *\n   * ![^a][b]\n   *\n   * [b]: c\n   * ```\n   *\n   * ```html\n   * <p>!<a href=\\\"b\\\">^a</a></p>\n   * <p>!<a href=\\\"c\\\">^a</a></p>\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // To do: use a new field to do this, this is still needed for\n    // `micromark-extension-gfm-footnote`, but the `label-start-link`\n    // behavior isnt.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {labelEnd} from './label-end.js'\n\n/** @type {Construct} */\nexport const labelStartLink = {\n  name: 'labelStartLink',\n  tokenize: tokenizeLabelStartLink,\n  resolveAll: labelEnd.resolveAll\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLabelStartLink(effects, ok, nok) {\n  const self = this\n  return start\n\n  /**\n   * Start of label (link) start.\n   *\n   * ```markdown\n   * > | a [b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('labelLink')\n    effects.enter('labelMarker')\n    effects.consume(code)\n    effects.exit('labelMarker')\n    effects.exit('labelLink')\n    return after\n  }\n\n  /** @type {State} */\n  function after(code) {\n    // To do: this isnt needed in `micromark-extension-gfm-footnote`,\n    // remove.\n    // Hidden footnotes hook.\n    /* c8 ignore next 3 */\n    return code === 94 && '_hiddenFootnoteSupport' in self.parser.constructs\n      ? nok(code)\n      : ok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {Construct} */\nexport const lineEnding = {\n  name: 'lineEnding',\n  tokenize: tokenizeLineEnding\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeLineEnding(effects, ok) {\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    return factorySpace(effects, ok, 'linePrefix')\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const thematicBreak = {\n  name: 'thematicBreak',\n  tokenize: tokenizeThematicBreak\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeThematicBreak(effects, ok, nok) {\n  let size = 0\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * Start of thematic break.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('thematicBreak')\n    // To do: parse indent like `markdown-rs`.\n    return before(code)\n  }\n\n  /**\n   * After optional whitespace, at marker.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    marker = code\n    return atBreak(code)\n  }\n\n  /**\n   * After something, before something else.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atBreak(code) {\n    if (code === marker) {\n      effects.enter('thematicBreakSequence')\n      return sequence(code)\n    }\n    if (size >= 3 && (code === null || markdownLineEnding(code))) {\n      effects.exit('thematicBreak')\n      return ok(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   * > | ***\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function sequence(code) {\n    if (code === marker) {\n      effects.consume(code)\n      size++\n      return sequence\n    }\n    effects.exit('thematicBreakSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, atBreak, 'whitespace')(code)\n      : atBreak(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ContainerState} ContainerState\n * @typedef {import('micromark-util-types').Exiter} Exiter\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {asciiDigit, markdownSpace} from 'micromark-util-character'\nimport {blankLine} from './blank-line.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/** @type {Construct} */\nexport const list = {\n  name: 'list',\n  tokenize: tokenizeListStart,\n  continuation: {\n    tokenize: tokenizeListContinuation\n  },\n  exit: tokenizeListEnd\n}\n\n/** @type {Construct} */\nconst listItemPrefixWhitespaceConstruct = {\n  tokenize: tokenizeListItemPrefixWhitespace,\n  partial: true\n}\n\n/** @type {Construct} */\nconst indentConstruct = {\n  tokenize: tokenizeIndent,\n  partial: true\n}\n\n// To do: `markdown-rs` parses list items on their own and later stitches them\n// together.\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListStart(effects, ok, nok) {\n  const self = this\n  const tail = self.events[self.events.length - 1]\n  let initialSize =\n    tail && tail[1].type === 'linePrefix'\n      ? tail[2].sliceSerialize(tail[1], true).length\n      : 0\n  let size = 0\n  return start\n\n  /** @type {State} */\n  function start(code) {\n    const kind =\n      self.containerState.type ||\n      (code === 42 || code === 43 || code === 45\n        ? 'listUnordered'\n        : 'listOrdered')\n    if (\n      kind === 'listUnordered'\n        ? !self.containerState.marker || code === self.containerState.marker\n        : asciiDigit(code)\n    ) {\n      if (!self.containerState.type) {\n        self.containerState.type = kind\n        effects.enter(kind, {\n          _container: true\n        })\n      }\n      if (kind === 'listUnordered') {\n        effects.enter('listItemPrefix')\n        return code === 42 || code === 45\n          ? effects.check(thematicBreak, nok, atMarker)(code)\n          : atMarker(code)\n      }\n      if (!self.interrupt || code === 49) {\n        effects.enter('listItemPrefix')\n        effects.enter('listItemValue')\n        return inside(code)\n      }\n    }\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function inside(code) {\n    if (asciiDigit(code) && ++size < 10) {\n      effects.consume(code)\n      return inside\n    }\n    if (\n      (!self.interrupt || size < 2) &&\n      (self.containerState.marker\n        ? code === self.containerState.marker\n        : code === 41 || code === 46)\n    ) {\n      effects.exit('listItemValue')\n      return atMarker(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * @type {State}\n   **/\n  function atMarker(code) {\n    effects.enter('listItemMarker')\n    effects.consume(code)\n    effects.exit('listItemMarker')\n    self.containerState.marker = self.containerState.marker || code\n    return effects.check(\n      blankLine,\n      // Cant be empty when interrupting.\n      self.interrupt ? nok : onBlank,\n      effects.attempt(\n        listItemPrefixWhitespaceConstruct,\n        endOfPrefix,\n        otherPrefix\n      )\n    )\n  }\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.initialBlankLine = true\n    initialSize++\n    return endOfPrefix(code)\n  }\n\n  /** @type {State} */\n  function otherPrefix(code) {\n    if (markdownSpace(code)) {\n      effects.enter('listItemPrefixWhitespace')\n      effects.consume(code)\n      effects.exit('listItemPrefixWhitespace')\n      return endOfPrefix\n    }\n    return nok(code)\n  }\n\n  /** @type {State} */\n  function endOfPrefix(code) {\n    self.containerState.size =\n      initialSize +\n      self.sliceSerialize(effects.exit('listItemPrefix'), true).length\n    return ok(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListContinuation(effects, ok, nok) {\n  const self = this\n  self.containerState._closeFlow = undefined\n  return effects.check(blankLine, onBlank, notBlank)\n\n  /** @type {State} */\n  function onBlank(code) {\n    self.containerState.furtherBlankLines =\n      self.containerState.furtherBlankLines ||\n      self.containerState.initialBlankLine\n\n    // We have a blank line.\n    // Still, try to consume at most the items size.\n    return factorySpace(\n      effects,\n      ok,\n      'listItemIndent',\n      self.containerState.size + 1\n    )(code)\n  }\n\n  /** @type {State} */\n  function notBlank(code) {\n    if (self.containerState.furtherBlankLines || !markdownSpace(code)) {\n      self.containerState.furtherBlankLines = undefined\n      self.containerState.initialBlankLine = undefined\n      return notInCurrentItem(code)\n    }\n    self.containerState.furtherBlankLines = undefined\n    self.containerState.initialBlankLine = undefined\n    return effects.attempt(indentConstruct, ok, notInCurrentItem)(code)\n  }\n\n  /** @type {State} */\n  function notInCurrentItem(code) {\n    // While we do continue, we signal that the flow should be closed.\n    self.containerState._closeFlow = true\n    // As were closing flow, were no longer interrupting.\n    self.interrupt = undefined\n    // Always populated by defaults.\n\n    return factorySpace(\n      effects,\n      effects.attempt(list, ok, nok),\n      'linePrefix',\n      self.parser.constructs.disable.null.includes('codeIndented')\n        ? undefined\n        : 4\n    )(code)\n  }\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this\n  return factorySpace(\n    effects,\n    afterPrefix,\n    'listItemIndent',\n    self.containerState.size + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return tail &&\n      tail[1].type === 'listItemIndent' &&\n      tail[2].sliceSerialize(tail[1], true).length === self.containerState.size\n      ? ok(code)\n      : nok(code)\n  }\n}\n\n/**\n * @type {Exiter}\n * @this {TokenizeContext}\n */\nfunction tokenizeListEnd(effects) {\n  effects.exit(this.containerState.type)\n}\n\n/**\n * @type {Tokenizer}\n * @this {TokenizeContext}\n */\nfunction tokenizeListItemPrefixWhitespace(effects, ok, nok) {\n  const self = this\n\n  // Always populated by defaults.\n\n  return factorySpace(\n    effects,\n    afterPrefix,\n    'listItemPrefixWhitespace',\n    self.parser.constructs.disable.null.includes('codeIndented')\n      ? undefined\n      : 4 + 1\n  )\n\n  /** @type {State} */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1]\n    return !markdownSpace(code) &&\n      tail &&\n      tail[1].type === 'listItemPrefixWhitespace'\n      ? ok(code)\n      : nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Tokenizer} Tokenizer\n */\n\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding, markdownSpace} from 'micromark-util-character'\n/** @type {Construct} */\nexport const setextUnderline = {\n  name: 'setextUnderline',\n  tokenize: tokenizeSetextUnderline,\n  resolveTo: resolveToSetextUnderline\n}\n\n/** @type {Resolver} */\nfunction resolveToSetextUnderline(events, context) {\n  // To do: resolve like `markdown-rs`.\n  let index = events.length\n  /** @type {number | undefined} */\n  let content\n  /** @type {number | undefined} */\n  let text\n  /** @type {number | undefined} */\n  let definition\n\n  // Find the opening of the content.\n  // Itll always exist: we dont tokenize if it isnt there.\n  while (index--) {\n    if (events[index][0] === 'enter') {\n      if (events[index][1].type === 'content') {\n        content = index\n        break\n      }\n      if (events[index][1].type === 'paragraph') {\n        text = index\n      }\n    }\n    // Exit\n    else {\n      if (events[index][1].type === 'content') {\n        // Remove the content end (if needed well add it later)\n        events.splice(index, 1)\n      }\n      if (!definition && events[index][1].type === 'definition') {\n        definition = index\n      }\n    }\n  }\n  const heading = {\n    type: 'setextHeading',\n    start: Object.assign({}, events[text][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  }\n\n  // Change the paragraph to setext heading text.\n  events[text][1].type = 'setextHeadingText'\n\n  // If we have definitions in the content, well keep on having content,\n  // but we need move it.\n  if (definition) {\n    events.splice(text, 0, ['enter', heading, context])\n    events.splice(definition + 1, 0, ['exit', events[content][1], context])\n    events[content][1].end = Object.assign({}, events[definition][1].end)\n  } else {\n    events[content][1] = heading\n  }\n\n  // Add the heading exit at the end.\n  events.push(['exit', heading, context])\n  return events\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeSetextUnderline(effects, ok, nok) {\n  const self = this\n  /** @type {NonNullable<Code>} */\n  let marker\n  return start\n\n  /**\n   * At start of heading (setext) underline.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length\n    /** @type {boolean | undefined} */\n    let paragraph\n    // Find an opening.\n    while (index--) {\n      // Skip enter/exit of line ending, line prefix, and content.\n      // We can now either have a definition or a paragraph.\n      if (\n        self.events[index][1].type !== 'lineEnding' &&\n        self.events[index][1].type !== 'linePrefix' &&\n        self.events[index][1].type !== 'content'\n      ) {\n        paragraph = self.events[index][1].type === 'paragraph'\n        break\n      }\n    }\n\n    // To do: handle lazy/pierce like `markdown-rs`.\n    // To do: parse indent like `markdown-rs`.\n    if (!self.parser.lazy[self.now().line] && (self.interrupt || paragraph)) {\n      effects.enter('setextHeadingLine')\n      marker = code\n      return before(code)\n    }\n    return nok(code)\n  }\n\n  /**\n   * After optional whitespace, at `-` or `=`.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function before(code) {\n    effects.enter('setextHeadingLineSequence')\n    return inside(code)\n  }\n\n  /**\n   * In sequence.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    if (code === marker) {\n      effects.consume(code)\n      return inside\n    }\n    effects.exit('setextHeadingLineSequence')\n    return markdownSpace(code)\n      ? factorySpace(effects, after, 'lineSuffix')(code)\n      : after(code)\n  }\n\n  /**\n   * After sequence, after optional whitespace.\n   *\n   * ```markdown\n   *   | aa\n   * > | ==\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('setextHeadingLine')\n      return ok(code)\n    }\n    return nok(code)\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nimport {blankLine, content} from 'micromark-core-commonmark'\nimport {factorySpace} from 'micromark-factory-space'\nimport {markdownLineEnding} from 'micromark-util-character'\n/** @type {InitialConstruct} */\nexport const flow = {\n  tokenize: initializeFlow\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Initializer}\n */\nfunction initializeFlow(effects) {\n  const self = this\n  const initial = effects.attempt(\n    // Try to parse a blank line.\n    blankLine,\n    atBlankEnding,\n    // Try to parse initial flow (essentially, only code).\n    effects.attempt(\n      this.parser.constructs.flowInitial,\n      afterConstruct,\n      factorySpace(\n        effects,\n        effects.attempt(\n          this.parser.constructs.flow,\n          afterConstruct,\n          effects.attempt(content, afterConstruct)\n        ),\n        'linePrefix'\n      )\n    )\n  )\n  return initial\n\n  /** @type {State} */\n  function atBlankEnding(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEndingBlank')\n    effects.consume(code)\n    effects.exit('lineEndingBlank')\n    self.currentConstruct = undefined\n    return initial\n  }\n\n  /** @type {State} */\n  function afterConstruct(code) {\n    if (code === null) {\n      effects.consume(code)\n      return\n    }\n    effects.enter('lineEnding')\n    effects.consume(code)\n    effects.exit('lineEnding')\n    self.currentConstruct = undefined\n    return initial\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').Initializer} Initializer\n * @typedef {import('micromark-util-types').Resolver} Resolver\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\nexport const resolver = {\n  resolveAll: createResolver()\n}\nexport const string = initializeFactory('string')\nexport const text = initializeFactory('text')\n\n/**\n * @param {'string' | 'text'} field\n * @returns {InitialConstruct}\n */\nfunction initializeFactory(field) {\n  return {\n    tokenize: initializeText,\n    resolveAll: createResolver(\n      field === 'text' ? resolveAllLineSuffixes : undefined\n    )\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Initializer}\n   */\n  function initializeText(effects) {\n    const self = this\n    const constructs = this.parser.constructs[field]\n    const text = effects.attempt(constructs, start, notText)\n    return start\n\n    /** @type {State} */\n    function start(code) {\n      return atBreak(code) ? text(code) : notText(code)\n    }\n\n    /** @type {State} */\n    function notText(code) {\n      if (code === null) {\n        effects.consume(code)\n        return\n      }\n      effects.enter('data')\n      effects.consume(code)\n      return data\n    }\n\n    /** @type {State} */\n    function data(code) {\n      if (atBreak(code)) {\n        effects.exit('data')\n        return text(code)\n      }\n\n      // Data.\n      effects.consume(code)\n      return data\n    }\n\n    /**\n     * @param {Code} code\n     * @returns {boolean}\n     */\n    function atBreak(code) {\n      if (code === null) {\n        return true\n      }\n      const list = constructs[code]\n      let index = -1\n      if (list) {\n        // Always populated by defaults.\n\n        while (++index < list.length) {\n          const item = list[index]\n          if (!item.previous || item.previous.call(self, self.previous)) {\n            return true\n          }\n        }\n      }\n      return false\n    }\n  }\n}\n\n/**\n * @param {Resolver | undefined} [extraResolver]\n * @returns {Resolver}\n */\nfunction createResolver(extraResolver) {\n  return resolveAllText\n\n  /** @type {Resolver} */\n  function resolveAllText(events, context) {\n    let index = -1\n    /** @type {number | undefined} */\n    let enter\n\n    // A rather boring computation (to merge adjacent `data` events) which\n    // improves mm performance by 29%.\n    while (++index <= events.length) {\n      if (enter === undefined) {\n        if (events[index] && events[index][1].type === 'data') {\n          enter = index\n          index++\n        }\n      } else if (!events[index] || events[index][1].type !== 'data') {\n        // Dont do anything if there is one data token.\n        if (index !== enter + 2) {\n          events[enter][1].end = events[index - 1][1].end\n          events.splice(enter + 2, index - enter - 2)\n          index = enter + 2\n        }\n        enter = undefined\n      }\n    }\n    return extraResolver ? extraResolver(events, context) : events\n  }\n}\n\n/**\n * A rather ugly set of instructions which again looks at chunks in the input\n * stream.\n * The reason to do this here is that it is *much* faster to parse in reverse.\n * And that we cant hook into `null` to split the line suffix before an EOF.\n * To do: figure out if we can make this into a clean utility, or even in core.\n * As it will be useful for GFMs literal autolink extension (and maybe even\n * tables?)\n *\n * @type {Resolver}\n */\nfunction resolveAllLineSuffixes(events, context) {\n  let eventIndex = 0 // Skip first.\n\n  while (++eventIndex <= events.length) {\n    if (\n      (eventIndex === events.length ||\n        events[eventIndex][1].type === 'lineEnding') &&\n      events[eventIndex - 1][1].type === 'data'\n    ) {\n      const data = events[eventIndex - 1][1]\n      const chunks = context.sliceStream(data)\n      let index = chunks.length\n      let bufferIndex = -1\n      let size = 0\n      /** @type {boolean | undefined} */\n      let tabs\n      while (index--) {\n        const chunk = chunks[index]\n        if (typeof chunk === 'string') {\n          bufferIndex = chunk.length\n          while (chunk.charCodeAt(bufferIndex - 1) === 32) {\n            size++\n            bufferIndex--\n          }\n          if (bufferIndex) break\n          bufferIndex = -1\n        }\n        // Number\n        else if (chunk === -2) {\n          tabs = true\n          size++\n        } else if (chunk === -1) {\n          // Empty\n        } else {\n          // Replacement character, exit.\n          index++\n          break\n        }\n      }\n      if (size) {\n        const token = {\n          type:\n            eventIndex === events.length || tabs || size < 2\n              ? 'lineSuffix'\n              : 'hardBreakTrailing',\n          start: {\n            line: data.end.line,\n            column: data.end.column - size,\n            offset: data.end.offset - size,\n            _index: data.start._index + index,\n            _bufferIndex: index\n              ? bufferIndex\n              : data.start._bufferIndex + bufferIndex\n          },\n          end: Object.assign({}, data.end)\n        }\n        data.end = Object.assign({}, token.start)\n        if (data.start.offset === data.end.offset) {\n          Object.assign(data, token)\n        } else {\n          events.splice(\n            eventIndex,\n            0,\n            ['enter', token, context],\n            ['exit', token, context]\n          )\n          eventIndex += 2\n        }\n      }\n      eventIndex++\n    }\n  }\n  return events\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Construct} Construct\n * @typedef {import('micromark-util-types').ConstructRecord} ConstructRecord\n * @typedef {import('micromark-util-types').Effects} Effects\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').Point} Point\n * @typedef {import('micromark-util-types').State} State\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenType} TokenType\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n */\n\n/**\n * @callback Restore\n * @returns {void}\n *\n * @typedef Info\n * @property {Restore} restore\n * @property {number} from\n *\n * @callback ReturnHandle\n *   Handle a successful run.\n * @param {Construct} construct\n * @param {Info} info\n * @returns {void}\n */\n\nimport {markdownLineEnding} from 'micromark-util-character'\nimport {push, splice} from 'micromark-util-chunked'\nimport {resolveAll} from 'micromark-util-resolve-all'\n/**\n * Create a tokenizer.\n * Tokenizers deal with one type of data (e.g., containers, flow, text).\n * The parser is the object dealing with it all.\n * `initialize` works like other constructs, except that only its `tokenize`\n * function is used, in which case it doesnt receive an `ok` or `nok`.\n * `from` can be given to set the point before the first character, although\n * when further lines are indented, they must be set with `defineSkip`.\n *\n * @param {ParseContext} parser\n * @param {InitialConstruct} initialize\n * @param {Omit<Point, '_bufferIndex' | '_index'> | undefined} [from]\n * @returns {TokenizeContext}\n */\nexport function createTokenizer(parser, initialize, from) {\n  /** @type {Point} */\n  let point = Object.assign(\n    from\n      ? Object.assign({}, from)\n      : {\n          line: 1,\n          column: 1,\n          offset: 0\n        },\n    {\n      _index: 0,\n      _bufferIndex: -1\n    }\n  )\n  /** @type {Record<string, number>} */\n  const columnStart = {}\n  /** @type {Array<Construct>} */\n  const resolveAllConstructs = []\n  /** @type {Array<Chunk>} */\n  let chunks = []\n  /** @type {Array<Token>} */\n  let stack = []\n  /** @type {boolean | undefined} */\n  let consumed = true\n\n  /**\n   * Tools used for tokenizing.\n   *\n   * @type {Effects}\n   */\n  const effects = {\n    consume,\n    enter,\n    exit,\n    attempt: constructFactory(onsuccessfulconstruct),\n    check: constructFactory(onsuccessfulcheck),\n    interrupt: constructFactory(onsuccessfulcheck, {\n      interrupt: true\n    })\n  }\n\n  /**\n   * State and tools for resolving and serializing.\n   *\n   * @type {TokenizeContext}\n   */\n  const context = {\n    previous: null,\n    code: null,\n    containerState: {},\n    events: [],\n    parser,\n    sliceStream,\n    sliceSerialize,\n    now,\n    defineSkip,\n    write\n  }\n\n  /**\n   * The state function.\n   *\n   * @type {State | void}\n   */\n  let state = initialize.tokenize.call(context, effects)\n\n  /**\n   * Track which character we expect to be consumed, to catch bugs.\n   *\n   * @type {Code}\n   */\n  let expectedCode\n  if (initialize.resolveAll) {\n    resolveAllConstructs.push(initialize)\n  }\n  return context\n\n  /** @type {TokenizeContext['write']} */\n  function write(slice) {\n    chunks = push(chunks, slice)\n    main()\n\n    // Exit if were not done, resolve might change stuff.\n    if (chunks[chunks.length - 1] !== null) {\n      return []\n    }\n    addResult(initialize, 0)\n\n    // Otherwise, resolve, and exit.\n    context.events = resolveAll(resolveAllConstructs, context.events, context)\n    return context.events\n  }\n\n  //\n  // Tools.\n  //\n\n  /** @type {TokenizeContext['sliceSerialize']} */\n  function sliceSerialize(token, expandTabs) {\n    return serializeChunks(sliceStream(token), expandTabs)\n  }\n\n  /** @type {TokenizeContext['sliceStream']} */\n  function sliceStream(token) {\n    return sliceChunks(chunks, token)\n  }\n\n  /** @type {TokenizeContext['now']} */\n  function now() {\n    // This is a hot path, so we clone manually instead of `Object.assign({}, point)`\n    const {line, column, offset, _index, _bufferIndex} = point\n    return {\n      line,\n      column,\n      offset,\n      _index,\n      _bufferIndex\n    }\n  }\n\n  /** @type {TokenizeContext['defineSkip']} */\n  function defineSkip(value) {\n    columnStart[value.line] = value.column\n    accountForPotentialSkip()\n  }\n\n  //\n  // State management.\n  //\n\n  /**\n   * Main loop (note that `_index` and `_bufferIndex` in `point` are modified by\n   * `consume`).\n   * Here is where we walk through the chunks, which either include strings of\n   * several characters, or numerical character codes.\n   * The reason to do this in a loop instead of a call is so the stack can\n   * drain.\n   *\n   * @returns {void}\n   */\n  function main() {\n    /** @type {number} */\n    let chunkIndex\n    while (point._index < chunks.length) {\n      const chunk = chunks[point._index]\n\n      // If were in a buffer chunk, loop through it.\n      if (typeof chunk === 'string') {\n        chunkIndex = point._index\n        if (point._bufferIndex < 0) {\n          point._bufferIndex = 0\n        }\n        while (\n          point._index === chunkIndex &&\n          point._bufferIndex < chunk.length\n        ) {\n          go(chunk.charCodeAt(point._bufferIndex))\n        }\n      } else {\n        go(chunk)\n      }\n    }\n  }\n\n  /**\n   * Deal with one code.\n   *\n   * @param {Code} code\n   * @returns {void}\n   */\n  function go(code) {\n    consumed = undefined\n    expectedCode = code\n    state = state(code)\n  }\n\n  /** @type {Effects['consume']} */\n  function consume(code) {\n    if (markdownLineEnding(code)) {\n      point.line++\n      point.column = 1\n      point.offset += code === -3 ? 2 : 1\n      accountForPotentialSkip()\n    } else if (code !== -1) {\n      point.column++\n      point.offset++\n    }\n\n    // Not in a string chunk.\n    if (point._bufferIndex < 0) {\n      point._index++\n    } else {\n      point._bufferIndex++\n\n      // At end of string chunk.\n      // @ts-expect-error Points w/ non-negative `_bufferIndex` reference\n      // strings.\n      if (point._bufferIndex === chunks[point._index].length) {\n        point._bufferIndex = -1\n        point._index++\n      }\n    }\n\n    // Expose the previous character.\n    context.previous = code\n\n    // Mark as consumed.\n    consumed = true\n  }\n\n  /** @type {Effects['enter']} */\n  function enter(type, fields) {\n    /** @type {Token} */\n    // @ts-expect-error Patch instead of assign required fields to help GC.\n    const token = fields || {}\n    token.type = type\n    token.start = now()\n    context.events.push(['enter', token, context])\n    stack.push(token)\n    return token\n  }\n\n  /** @type {Effects['exit']} */\n  function exit(type) {\n    const token = stack.pop()\n    token.end = now()\n    context.events.push(['exit', token, context])\n    return token\n  }\n\n  /**\n   * Use results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulconstruct(construct, info) {\n    addResult(construct, info.from)\n  }\n\n  /**\n   * Discard results.\n   *\n   * @type {ReturnHandle}\n   */\n  function onsuccessfulcheck(_, info) {\n    info.restore()\n  }\n\n  /**\n   * Factory to attempt/check/interrupt.\n   *\n   * @param {ReturnHandle} onreturn\n   * @param {{interrupt?: boolean | undefined} | undefined} [fields]\n   */\n  function constructFactory(onreturn, fields) {\n    return hook\n\n    /**\n     * Handle either an object mapping codes to constructs, a list of\n     * constructs, or a single construct.\n     *\n     * @param {Array<Construct> | Construct | ConstructRecord} constructs\n     * @param {State} returnState\n     * @param {State | undefined} [bogusState]\n     * @returns {State}\n     */\n    function hook(constructs, returnState, bogusState) {\n      /** @type {Array<Construct>} */\n      let listOfConstructs\n      /** @type {number} */\n      let constructIndex\n      /** @type {Construct} */\n      let currentConstruct\n      /** @type {Info} */\n      let info\n      return Array.isArray(constructs) /* c8 ignore next 1 */\n        ? handleListOfConstructs(constructs)\n        : 'tokenize' in constructs\n        ? // @ts-expect-error Looks like a construct.\n          handleListOfConstructs([constructs])\n        : handleMapOfConstructs(constructs)\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {ConstructRecord} map\n       * @returns {State}\n       */\n      function handleMapOfConstructs(map) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          const def = code !== null && map[code]\n          const all = code !== null && map.null\n          const list = [\n            // To do: add more extension tests.\n            /* c8 ignore next 2 */\n            ...(Array.isArray(def) ? def : def ? [def] : []),\n            ...(Array.isArray(all) ? all : all ? [all] : [])\n          ]\n          return handleListOfConstructs(list)(code)\n        }\n      }\n\n      /**\n       * Handle a list of construct.\n       *\n       * @param {Array<Construct>} list\n       * @returns {State}\n       */\n      function handleListOfConstructs(list) {\n        listOfConstructs = list\n        constructIndex = 0\n        if (list.length === 0) {\n          return bogusState\n        }\n        return handleConstruct(list[constructIndex])\n      }\n\n      /**\n       * Handle a single construct.\n       *\n       * @param {Construct} construct\n       * @returns {State}\n       */\n      function handleConstruct(construct) {\n        return start\n\n        /** @type {State} */\n        function start(code) {\n          // To do: not needed to store if there is no bogus state, probably?\n          // Currently doesnt work because `inspect` in document does a check\n          // w/o a bogus, which doesnt make sense. But it does seem to help perf\n          // by not storing.\n          info = store()\n          currentConstruct = construct\n          if (!construct.partial) {\n            context.currentConstruct = construct\n          }\n\n          // Always populated by defaults.\n\n          if (\n            construct.name &&\n            context.parser.constructs.disable.null.includes(construct.name)\n          ) {\n            return nok(code)\n          }\n          return construct.tokenize.call(\n            // If we do have fields, create an object w/ `context` as its\n            // prototype.\n            // This allows a live binding, which is needed for `interrupt`.\n            fields ? Object.assign(Object.create(context), fields) : context,\n            effects,\n            ok,\n            nok\n          )(code)\n        }\n      }\n\n      /** @type {State} */\n      function ok(code) {\n        consumed = true\n        onreturn(currentConstruct, info)\n        return returnState\n      }\n\n      /** @type {State} */\n      function nok(code) {\n        consumed = true\n        info.restore()\n        if (++constructIndex < listOfConstructs.length) {\n          return handleConstruct(listOfConstructs[constructIndex])\n        }\n        return bogusState\n      }\n    }\n  }\n\n  /**\n   * @param {Construct} construct\n   * @param {number} from\n   * @returns {void}\n   */\n  function addResult(construct, from) {\n    if (construct.resolveAll && !resolveAllConstructs.includes(construct)) {\n      resolveAllConstructs.push(construct)\n    }\n    if (construct.resolve) {\n      splice(\n        context.events,\n        from,\n        context.events.length - from,\n        construct.resolve(context.events.slice(from), context)\n      )\n    }\n    if (construct.resolveTo) {\n      context.events = construct.resolveTo(context.events, context)\n    }\n  }\n\n  /**\n   * Store state.\n   *\n   * @returns {Info}\n   */\n  function store() {\n    const startPoint = now()\n    const startPrevious = context.previous\n    const startCurrentConstruct = context.currentConstruct\n    const startEventsIndex = context.events.length\n    const startStack = Array.from(stack)\n    return {\n      restore,\n      from: startEventsIndex\n    }\n\n    /**\n     * Restore state.\n     *\n     * @returns {void}\n     */\n    function restore() {\n      point = startPoint\n      context.previous = startPrevious\n      context.currentConstruct = startCurrentConstruct\n      context.events.length = startEventsIndex\n      stack = startStack\n      accountForPotentialSkip()\n    }\n  }\n\n  /**\n   * Move the current point a bit forward in the line when its on a column\n   * skip.\n   *\n   * @returns {void}\n   */\n  function accountForPotentialSkip() {\n    if (point.line in columnStart && point.column < 2) {\n      point.column = columnStart[point.line]\n      point.offset += columnStart[point.line] - 1\n    }\n  }\n}\n\n/**\n * Get the chunks from a slice of chunks in the range of a token.\n *\n * @param {Array<Chunk>} chunks\n * @param {Pick<Token, 'end' | 'start'>} token\n * @returns {Array<Chunk>}\n */\nfunction sliceChunks(chunks, token) {\n  const startIndex = token.start._index\n  const startBufferIndex = token.start._bufferIndex\n  const endIndex = token.end._index\n  const endBufferIndex = token.end._bufferIndex\n  /** @type {Array<Chunk>} */\n  let view\n  if (startIndex === endIndex) {\n    // @ts-expect-error `_bufferIndex` is used on string chunks.\n    view = [chunks[startIndex].slice(startBufferIndex, endBufferIndex)]\n  } else {\n    view = chunks.slice(startIndex, endIndex)\n    if (startBufferIndex > -1) {\n      const head = view[0]\n      if (typeof head === 'string') {\n        view[0] = head.slice(startBufferIndex)\n      } else {\n        view.shift()\n      }\n    }\n    if (endBufferIndex > 0) {\n      // @ts-expect-error `_bufferIndex` is used on string chunks.\n      view.push(chunks[endIndex].slice(0, endBufferIndex))\n    }\n  }\n  return view\n}\n\n/**\n * Get the string value of a slice of chunks.\n *\n * @param {Array<Chunk>} chunks\n * @param {boolean | undefined} [expandTabs=false]\n * @returns {string}\n */\nfunction serializeChunks(chunks, expandTabs) {\n  let index = -1\n  /** @type {Array<string>} */\n  const result = []\n  /** @type {boolean | undefined} */\n  let atTab\n  while (++index < chunks.length) {\n    const chunk = chunks[index]\n    /** @type {string} */\n    let value\n    if (typeof chunk === 'string') {\n      value = chunk\n    } else\n      switch (chunk) {\n        case -5: {\n          value = '\\r'\n          break\n        }\n        case -4: {\n          value = '\\n'\n          break\n        }\n        case -3: {\n          value = '\\r' + '\\n'\n          break\n        }\n        case -2: {\n          value = expandTabs ? ' ' : '\\t'\n          break\n        }\n        case -1: {\n          if (!expandTabs && atTab) continue\n          value = ' '\n          break\n        }\n        default: {\n          // Currently only replacement character.\n          value = String.fromCharCode(chunk)\n        }\n      }\n    atTab = chunk === -2\n    result.push(value)\n  }\n  return result.join('')\n}\n","/**\n * @typedef {import('micromark-util-types').Extension} Extension\n */\n\nimport {\n  attention,\n  autolink,\n  blockQuote,\n  characterEscape,\n  characterReference,\n  codeFenced,\n  codeIndented,\n  codeText,\n  definition,\n  hardBreakEscape,\n  headingAtx,\n  htmlFlow,\n  htmlText,\n  labelEnd,\n  labelStartImage,\n  labelStartLink,\n  lineEnding,\n  list,\n  setextUnderline,\n  thematicBreak\n} from 'micromark-core-commonmark'\nimport {resolver as resolveText} from './initialize/text.js'\n\n/** @satisfies {Extension['document']} */\nexport const document = {\n  [42]: list,\n  [43]: list,\n  [45]: list,\n  [48]: list,\n  [49]: list,\n  [50]: list,\n  [51]: list,\n  [52]: list,\n  [53]: list,\n  [54]: list,\n  [55]: list,\n  [56]: list,\n  [57]: list,\n  [62]: blockQuote\n}\n\n/** @satisfies {Extension['contentInitial']} */\nexport const contentInitial = {\n  [91]: definition\n}\n\n/** @satisfies {Extension['flowInitial']} */\nexport const flowInitial = {\n  [-2]: codeIndented,\n  [-1]: codeIndented,\n  [32]: codeIndented\n}\n\n/** @satisfies {Extension['flow']} */\nexport const flow = {\n  [35]: headingAtx,\n  [42]: thematicBreak,\n  [45]: [setextUnderline, thematicBreak],\n  [60]: htmlFlow,\n  [61]: setextUnderline,\n  [95]: thematicBreak,\n  [96]: codeFenced,\n  [126]: codeFenced\n}\n\n/** @satisfies {Extension['string']} */\nexport const string = {\n  [38]: characterReference,\n  [92]: characterEscape\n}\n\n/** @satisfies {Extension['text']} */\nexport const text = {\n  [-5]: lineEnding,\n  [-4]: lineEnding,\n  [-3]: lineEnding,\n  [33]: labelStartImage,\n  [38]: characterReference,\n  [42]: attention,\n  [60]: [autolink, htmlText],\n  [91]: labelStartLink,\n  [92]: [hardBreakEscape, characterEscape],\n  [93]: labelEnd,\n  [95]: attention,\n  [96]: codeText\n}\n\n/** @satisfies {Extension['insideSpan']} */\nexport const insideSpan = {\n  null: [attention, resolveText]\n}\n\n/** @satisfies {Extension['attentionMarkers']} */\nexport const attentionMarkers = {\n  null: [42, 95]\n}\n\n/** @satisfies {Extension['disable']} */\nexport const disable = {\n  null: []\n}\n","/**\n * @typedef {import('micromark-util-types').Create} Create\n * @typedef {import('micromark-util-types').FullNormalizedExtension} FullNormalizedExtension\n * @typedef {import('micromark-util-types').InitialConstruct} InitialConstruct\n * @typedef {import('micromark-util-types').ParseContext} ParseContext\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n */\n\nimport {combineExtensions} from 'micromark-util-combine-extensions'\nimport {content} from './initialize/content.js'\nimport {document} from './initialize/document.js'\nimport {flow} from './initialize/flow.js'\nimport {text, string} from './initialize/text.js'\nimport {createTokenizer} from './create-tokenizer.js'\nimport * as defaultConstructs from './constructs.js'\n\n/**\n * @param {ParseOptions | null | undefined} [options]\n * @returns {ParseContext}\n */\nexport function parse(options) {\n  const settings = options || {}\n  const constructs =\n    /** @type {FullNormalizedExtension} */\n    combineExtensions([defaultConstructs, ...(settings.extensions || [])])\n\n  /** @type {ParseContext} */\n  const parser = {\n    defined: [],\n    lazy: {},\n    constructs,\n    content: create(content),\n    document: create(document),\n    flow: create(flow),\n    string: create(string),\n    text: create(text)\n  }\n  return parser\n\n  /**\n   * @param {InitialConstruct} initial\n   */\n  function create(initial) {\n    return creator\n    /** @type {Create} */\n    function creator(from) {\n      return createTokenizer(parser, initial, from)\n    }\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Chunk} Chunk\n * @typedef {import('micromark-util-types').Code} Code\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Value} Value\n */\n\n/**\n * @callback Preprocessor\n * @param {Value} value\n * @param {Encoding | null | undefined} [encoding]\n * @param {boolean | null | undefined} [end=false]\n * @returns {Array<Chunk>}\n */\n\nconst search = /[\\0\\t\\n\\r]/g\n\n/**\n * @returns {Preprocessor}\n */\nexport function preprocess() {\n  let column = 1\n  let buffer = ''\n  /** @type {boolean | undefined} */\n  let start = true\n  /** @type {boolean | undefined} */\n  let atCarriageReturn\n  return preprocessor\n\n  /** @type {Preprocessor} */\n  function preprocessor(value, encoding, end) {\n    /** @type {Array<Chunk>} */\n    const chunks = []\n    /** @type {RegExpMatchArray | null} */\n    let match\n    /** @type {number} */\n    let next\n    /** @type {number} */\n    let startPosition\n    /** @type {number} */\n    let endPosition\n    /** @type {Code} */\n    let code\n\n    // @ts-expect-error `Buffer` does allow an encoding.\n    value = buffer + value.toString(encoding)\n    startPosition = 0\n    buffer = ''\n    if (start) {\n      // To do: `markdown-rs` actually parses BOMs (byte order mark).\n      if (value.charCodeAt(0) === 65279) {\n        startPosition++\n      }\n      start = undefined\n    }\n    while (startPosition < value.length) {\n      search.lastIndex = startPosition\n      match = search.exec(value)\n      endPosition =\n        match && match.index !== undefined ? match.index : value.length\n      code = value.charCodeAt(endPosition)\n      if (!match) {\n        buffer = value.slice(startPosition)\n        break\n      }\n      if (code === 10 && startPosition === endPosition && atCarriageReturn) {\n        chunks.push(-3)\n        atCarriageReturn = undefined\n      } else {\n        if (atCarriageReturn) {\n          chunks.push(-5)\n          atCarriageReturn = undefined\n        }\n        if (startPosition < endPosition) {\n          chunks.push(value.slice(startPosition, endPosition))\n          column += endPosition - startPosition\n        }\n        switch (code) {\n          case 0: {\n            chunks.push(65533)\n            column++\n            break\n          }\n          case 9: {\n            next = Math.ceil(column / 4) * 4\n            chunks.push(-2)\n            while (column++ < next) chunks.push(-1)\n            break\n          }\n          case 10: {\n            chunks.push(-4)\n            column = 1\n            break\n          }\n          default: {\n            atCarriageReturn = true\n            column = 1\n          }\n        }\n      }\n      startPosition = endPosition + 1\n    }\n    if (end) {\n      if (atCarriageReturn) chunks.push(-5)\n      if (buffer) chunks.push(buffer)\n      chunks.push(null)\n    }\n    return chunks\n  }\n}\n","/**\n * @typedef {import('micromark-util-types').Event} Event\n */\n\nimport {subtokenize} from 'micromark-util-subtokenize'\n\n/**\n * @param {Array<Event>} events\n * @returns {Array<Event>}\n */\nexport function postprocess(events) {\n  while (!subtokenize(events)) {\n    // Empty\n  }\n  return events\n}\n","/**\n * Turn the number (in string form as either hexa- or plain decimal) coming from\n * a numeric character reference into a character.\n *\n * Sort of like `String.fromCharCode(Number.parseInt(value, base))`, but makes\n * non-characters and control characters safe.\n *\n * @param {string} value\n *   Value to decode.\n * @param {number} base\n *   Numeric base.\n * @returns {string}\n *   Character.\n */\nexport function decodeNumericCharacterReference(value, base) {\n  const code = Number.parseInt(value, base)\n  if (\n    // C0 except for HT, LF, FF, CR, space.\n    code < 9 ||\n    code === 11 ||\n    (code > 13 && code < 32) ||\n    // Control character (DEL) of C0, and C1 controls.\n    (code > 126 && code < 160) ||\n    // Lone high surrogates and low surrogates.\n    (code > 55295 && code < 57344) ||\n    // Noncharacters.\n    (code > 64975 && code < 65008) /* eslint-disable no-bitwise */ ||\n    (code & 65535) === 65535 ||\n    (code & 65535) === 65534 /* eslint-enable no-bitwise */ ||\n    // Out of range\n    code > 1114111\n  ) {\n    return '\\uFFFD'\n  }\n  return String.fromCharCode(code)\n}\n","import {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nconst characterEscapeOrReference =\n  /\\\\([!-/:-@[-`{-~])|&(#(?:\\d{1,7}|x[\\da-f]{1,6})|[\\da-z]{1,31});/gi\n\n/**\n * Decode markdown strings (which occur in places such as fenced code info\n * strings, destinations, labels, and titles).\n *\n * The string content type allows character escapes and -references.\n * This decodes those.\n *\n * @param {string} value\n *   Value to decode.\n * @returns {string}\n *   Decoded value.\n */\nexport function decodeString(value) {\n  return value.replace(characterEscapeOrReference, decode)\n}\n\n/**\n * @param {string} $0\n * @param {string} $1\n * @param {string} $2\n * @returns {string}\n */\nfunction decode($0, $1, $2) {\n  if ($1) {\n    // Escape.\n    return $1\n  }\n\n  // Reference.\n  const head = $2.charCodeAt(0)\n  if (head === 35) {\n    const head = $2.charCodeAt(1)\n    const hex = head === 120 || head === 88\n    return decodeNumericCharacterReference($2.slice(hex ? 2 : 1), hex ? 16 : 10)\n  }\n  return decodeNamedCharacterReference($2) || $0\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n */\n\n/**\n * Serialize the positional info of a point, position (start and end points),\n * or node.\n *\n * @param {Node | NodeLike | Position | PositionLike | Point | PointLike | null | undefined} [value]\n *   Node, position, or point.\n * @returns {string}\n *   Pretty printed positional info of a node (`string`).\n *\n *   In the format of a range `ls:cs-le:ce` (when given `node` or `position`)\n *   or a point `l:c` (when given `point`), where `l` stands for line, `c` for\n *   column, `s` for `start`, and `e` for end.\n *   An empty string (`''`) is returned if the given value is neither `node`,\n *   `position`, nor `point`.\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point | PointLike | null | undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position | PositionLike | null | undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number | null | undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @typedef {import('micromark-util-types').Encoding} Encoding\n * @typedef {import('micromark-util-types').Event} Event\n * @typedef {import('micromark-util-types').ParseOptions} ParseOptions\n * @typedef {import('micromark-util-types').Token} Token\n * @typedef {import('micromark-util-types').TokenizeContext} TokenizeContext\n * @typedef {import('micromark-util-types').Value} Value\n *\n * @typedef {import('unist').Parent} UnistParent\n * @typedef {import('unist').Point} Point\n *\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n * @typedef {import('mdast').StaticPhrasingContent} StaticPhrasingContent\n * @typedef {import('mdast').Content} Content\n * @typedef {import('mdast').Break} Break\n * @typedef {import('mdast').Blockquote} Blockquote\n * @typedef {import('mdast').Code} Code\n * @typedef {import('mdast').Definition} Definition\n * @typedef {import('mdast').Emphasis} Emphasis\n * @typedef {import('mdast').Heading} Heading\n * @typedef {import('mdast').HTML} HTML\n * @typedef {import('mdast').Image} Image\n * @typedef {import('mdast').ImageReference} ImageReference\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('mdast').Link} Link\n * @typedef {import('mdast').LinkReference} LinkReference\n * @typedef {import('mdast').List} List\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast').Strong} Strong\n * @typedef {import('mdast').Text} Text\n * @typedef {import('mdast').ThematicBreak} ThematicBreak\n * @typedef {import('mdast').ReferenceType} ReferenceType\n * @typedef {import('../index.js').CompileData} CompileData\n */\n\n/**\n * @typedef {Root | Content} Node\n * @typedef {Extract<Node, UnistParent>} Parent\n *\n * @typedef {Omit<UnistParent, 'type' | 'children'> & {type: 'fragment', children: Array<PhrasingContent>}} Fragment\n */\n\n/**\n * @callback Transform\n *   Extra transform, to change the AST afterwards.\n * @param {Root} tree\n *   Tree to transform.\n * @returns {Root | undefined | null | void}\n *   New tree or nothing (in which case the current tree is used).\n *\n * @callback Handle\n *   Handle a token.\n * @param {CompileContext} this\n *   Context.\n * @param {Token} token\n *   Current token.\n * @returns {void}\n *   Nothing.\n *\n * @typedef {Record<string, Handle>} Handles\n *   Token types mapping to handles\n *\n * @callback OnEnterError\n *   Handle the case where the `right` token is open, but it is closed (by the\n *   `left` token) or because we reached the end of the document.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token | undefined} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {void}\n *   Nothing.\n *\n * @callback OnExitError\n *   Handle the case where the `right` token is open but it is closed by\n *   exiting the `left` token.\n * @param {Omit<CompileContext, 'sliceSerialize'>} this\n *   Context.\n * @param {Token} left\n *   Left token.\n * @param {Token} right\n *   Right token.\n * @returns {void}\n *   Nothing.\n *\n * @typedef {[Token, OnEnterError | undefined]} TokenTuple\n *   Open token on the stack, with an optional error handler for when\n *   that token isnt closed properly.\n */\n\n/**\n * @typedef Config\n *   Configuration.\n *\n *   We have our defaults, but extensions will add more.\n * @property {Array<string>} canContainEols\n *   Token types where line endings are used.\n * @property {Handles} enter\n *   Opening handles.\n * @property {Handles} exit\n *   Closing handles.\n * @property {Array<Transform>} transforms\n *   Tree transforms.\n *\n * @typedef {Partial<Config>} Extension\n *   Change how markdown tokens from micromark are turned into mdast.\n *\n * @typedef CompileContext\n *   mdast compiler context.\n * @property {Array<Node | Fragment>} stack\n *   Stack of nodes.\n * @property {Array<TokenTuple>} tokenStack\n *   Stack of tokens.\n * @property {<Key extends keyof CompileData>(key: Key) => CompileData[Key]} getData\n *   Get data from the key/value store.\n * @property {<Key extends keyof CompileData>(key: Key, value?: CompileData[Key]) => void} setData\n *   Set data into the key/value store.\n * @property {(this: CompileContext) => void} buffer\n *   Capture some of the output data.\n * @property {(this: CompileContext) => string} resume\n *   Stop capturing and access the output data.\n * @property {<Kind extends Node>(this: CompileContext, node: Kind, token: Token, onError?: OnEnterError) => Kind} enter\n *   Enter a token.\n * @property {(this: CompileContext, token: Token, onError?: OnExitError) => Node} exit\n *   Exit a token.\n * @property {TokenizeContext['sliceSerialize']} sliceSerialize\n *   Get the string value of a token.\n * @property {Config} config\n *   Configuration.\n *\n * @typedef FromMarkdownOptions\n *   Configuration for how to build mdast.\n * @property {Array<Extension | Array<Extension>> | null | undefined} [mdastExtensions]\n *   Extensions for this utility to change how tokens are turned into a tree.\n *\n * @typedef {ParseOptions & FromMarkdownOptions} Options\n *   Configuration.\n */\n\n// To do: micromark: create a registry of tokens?\n// To do: next major: dont return given `Node` from `enter`.\n// To do: next major: remove setter/getter.\n\nimport {toString} from 'mdast-util-to-string'\nimport {parse} from 'micromark/lib/parse.js'\nimport {preprocess} from 'micromark/lib/preprocess.js'\nimport {postprocess} from 'micromark/lib/postprocess.js'\nimport {decodeNumericCharacterReference} from 'micromark-util-decode-numeric-character-reference'\nimport {decodeString} from 'micromark-util-decode-string'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\nimport {decodeNamedCharacterReference} from 'decode-named-character-reference'\nimport {stringifyPosition} from 'unist-util-stringify-position'\nconst own = {}.hasOwnProperty\n\n/**\n * @param value\n *   Markdown to parse.\n * @param encoding\n *   Character encoding for when `value` is `Buffer`.\n * @param options\n *   Configuration.\n * @returns\n *   mdast tree.\n */\nexport const fromMarkdown =\n  /**\n   * @type {(\n   *   ((value: Value, encoding: Encoding, options?: Options | null | undefined) => Root) &\n   *   ((value: Value, options?: Options | null | undefined) => Root)\n   * )}\n   */\n\n  /**\n   * @param {Value} value\n   * @param {Encoding | Options | null | undefined} [encoding]\n   * @param {Options | null | undefined} [options]\n   * @returns {Root}\n   */\n  function (value, encoding, options) {\n    if (typeof encoding !== 'string') {\n      options = encoding\n      encoding = undefined\n    }\n    return compiler(options)(\n      postprocess(\n        parse(options).document().write(preprocess()(value, encoding, true))\n      )\n    )\n  }\n\n/**\n * Note this compiler only understand complete buffering, not streaming.\n *\n * @param {Options | null | undefined} [options]\n */\nfunction compiler(options) {\n  /** @type {Config} */\n  const config = {\n    transforms: [],\n    canContainEols: ['emphasis', 'fragment', 'heading', 'paragraph', 'strong'],\n    enter: {\n      autolink: opener(link),\n      autolinkProtocol: onenterdata,\n      autolinkEmail: onenterdata,\n      atxHeading: opener(heading),\n      blockQuote: opener(blockQuote),\n      characterEscape: onenterdata,\n      characterReference: onenterdata,\n      codeFenced: opener(codeFlow),\n      codeFencedFenceInfo: buffer,\n      codeFencedFenceMeta: buffer,\n      codeIndented: opener(codeFlow, buffer),\n      codeText: opener(codeText, buffer),\n      codeTextData: onenterdata,\n      data: onenterdata,\n      codeFlowValue: onenterdata,\n      definition: opener(definition),\n      definitionDestinationString: buffer,\n      definitionLabelString: buffer,\n      definitionTitleString: buffer,\n      emphasis: opener(emphasis),\n      hardBreakEscape: opener(hardBreak),\n      hardBreakTrailing: opener(hardBreak),\n      htmlFlow: opener(html, buffer),\n      htmlFlowData: onenterdata,\n      htmlText: opener(html, buffer),\n      htmlTextData: onenterdata,\n      image: opener(image),\n      label: buffer,\n      link: opener(link),\n      listItem: opener(listItem),\n      listItemValue: onenterlistitemvalue,\n      listOrdered: opener(list, onenterlistordered),\n      listUnordered: opener(list),\n      paragraph: opener(paragraph),\n      reference: onenterreference,\n      referenceString: buffer,\n      resourceDestinationString: buffer,\n      resourceTitleString: buffer,\n      setextHeading: opener(heading),\n      strong: opener(strong),\n      thematicBreak: opener(thematicBreak)\n    },\n    exit: {\n      atxHeading: closer(),\n      atxHeadingSequence: onexitatxheadingsequence,\n      autolink: closer(),\n      autolinkEmail: onexitautolinkemail,\n      autolinkProtocol: onexitautolinkprotocol,\n      blockQuote: closer(),\n      characterEscapeValue: onexitdata,\n      characterReferenceMarkerHexadecimal: onexitcharacterreferencemarker,\n      characterReferenceMarkerNumeric: onexitcharacterreferencemarker,\n      characterReferenceValue: onexitcharacterreferencevalue,\n      codeFenced: closer(onexitcodefenced),\n      codeFencedFence: onexitcodefencedfence,\n      codeFencedFenceInfo: onexitcodefencedfenceinfo,\n      codeFencedFenceMeta: onexitcodefencedfencemeta,\n      codeFlowValue: onexitdata,\n      codeIndented: closer(onexitcodeindented),\n      codeText: closer(onexitcodetext),\n      codeTextData: onexitdata,\n      data: onexitdata,\n      definition: closer(),\n      definitionDestinationString: onexitdefinitiondestinationstring,\n      definitionLabelString: onexitdefinitionlabelstring,\n      definitionTitleString: onexitdefinitiontitlestring,\n      emphasis: closer(),\n      hardBreakEscape: closer(onexithardbreak),\n      hardBreakTrailing: closer(onexithardbreak),\n      htmlFlow: closer(onexithtmlflow),\n      htmlFlowData: onexitdata,\n      htmlText: closer(onexithtmltext),\n      htmlTextData: onexitdata,\n      image: closer(onexitimage),\n      label: onexitlabel,\n      labelText: onexitlabeltext,\n      lineEnding: onexitlineending,\n      link: closer(onexitlink),\n      listItem: closer(),\n      listOrdered: closer(),\n      listUnordered: closer(),\n      paragraph: closer(),\n      referenceString: onexitreferencestring,\n      resourceDestinationString: onexitresourcedestinationstring,\n      resourceTitleString: onexitresourcetitlestring,\n      resource: onexitresource,\n      setextHeading: closer(onexitsetextheading),\n      setextHeadingLineSequence: onexitsetextheadinglinesequence,\n      setextHeadingText: onexitsetextheadingtext,\n      strong: closer(),\n      thematicBreak: closer()\n    }\n  }\n  configure(config, (options || {}).mdastExtensions || [])\n\n  /** @type {CompileData} */\n  const data = {}\n  return compile\n\n  /**\n   * Turn micromark events into an mdast tree.\n   *\n   * @param {Array<Event>} events\n   *   Events.\n   * @returns {Root}\n   *   mdast tree.\n   */\n  function compile(events) {\n    /** @type {Root} */\n    let tree = {\n      type: 'root',\n      children: []\n    }\n    /** @type {Omit<CompileContext, 'sliceSerialize'>} */\n    const context = {\n      stack: [tree],\n      tokenStack: [],\n      config,\n      enter,\n      exit,\n      buffer,\n      resume,\n      setData,\n      getData\n    }\n    /** @type {Array<number>} */\n    const listStack = []\n    let index = -1\n    while (++index < events.length) {\n      // We preprocess lists to add `listItem` tokens, and to infer whether\n      // items the list itself are spread out.\n      if (\n        events[index][1].type === 'listOrdered' ||\n        events[index][1].type === 'listUnordered'\n      ) {\n        if (events[index][0] === 'enter') {\n          listStack.push(index)\n        } else {\n          const tail = listStack.pop()\n          index = prepareList(events, tail, index)\n        }\n      }\n    }\n    index = -1\n    while (++index < events.length) {\n      const handler = config[events[index][0]]\n      if (own.call(handler, events[index][1].type)) {\n        handler[events[index][1].type].call(\n          Object.assign(\n            {\n              sliceSerialize: events[index][2].sliceSerialize\n            },\n            context\n          ),\n          events[index][1]\n        )\n      }\n    }\n\n    // Handle tokens still being open.\n    if (context.tokenStack.length > 0) {\n      const tail = context.tokenStack[context.tokenStack.length - 1]\n      const handler = tail[1] || defaultOnError\n      handler.call(context, undefined, tail[0])\n    }\n\n    // Figure out `root` position.\n    tree.position = {\n      start: point(\n        events.length > 0\n          ? events[0][1].start\n          : {\n              line: 1,\n              column: 1,\n              offset: 0\n            }\n      ),\n      end: point(\n        events.length > 0\n          ? events[events.length - 2][1].end\n          : {\n              line: 1,\n              column: 1,\n              offset: 0\n            }\n      )\n    }\n\n    // Call transforms.\n    index = -1\n    while (++index < config.transforms.length) {\n      tree = config.transforms[index](tree) || tree\n    }\n    return tree\n  }\n\n  /**\n   * @param {Array<Event>} events\n   * @param {number} start\n   * @param {number} length\n   * @returns {number}\n   */\n  function prepareList(events, start, length) {\n    let index = start - 1\n    let containerBalance = -1\n    let listSpread = false\n    /** @type {Token | undefined} */\n    let listItem\n    /** @type {number | undefined} */\n    let lineIndex\n    /** @type {number | undefined} */\n    let firstBlankLineIndex\n    /** @type {boolean | undefined} */\n    let atMarker\n    while (++index <= length) {\n      const event = events[index]\n      if (\n        event[1].type === 'listUnordered' ||\n        event[1].type === 'listOrdered' ||\n        event[1].type === 'blockQuote'\n      ) {\n        if (event[0] === 'enter') {\n          containerBalance++\n        } else {\n          containerBalance--\n        }\n        atMarker = undefined\n      } else if (event[1].type === 'lineEndingBlank') {\n        if (event[0] === 'enter') {\n          if (\n            listItem &&\n            !atMarker &&\n            !containerBalance &&\n            !firstBlankLineIndex\n          ) {\n            firstBlankLineIndex = index\n          }\n          atMarker = undefined\n        }\n      } else if (\n        event[1].type === 'linePrefix' ||\n        event[1].type === 'listItemValue' ||\n        event[1].type === 'listItemMarker' ||\n        event[1].type === 'listItemPrefix' ||\n        event[1].type === 'listItemPrefixWhitespace'\n      ) {\n        // Empty.\n      } else {\n        atMarker = undefined\n      }\n      if (\n        (!containerBalance &&\n          event[0] === 'enter' &&\n          event[1].type === 'listItemPrefix') ||\n        (containerBalance === -1 &&\n          event[0] === 'exit' &&\n          (event[1].type === 'listUnordered' ||\n            event[1].type === 'listOrdered'))\n      ) {\n        if (listItem) {\n          let tailIndex = index\n          lineIndex = undefined\n          while (tailIndex--) {\n            const tailEvent = events[tailIndex]\n            if (\n              tailEvent[1].type === 'lineEnding' ||\n              tailEvent[1].type === 'lineEndingBlank'\n            ) {\n              if (tailEvent[0] === 'exit') continue\n              if (lineIndex) {\n                events[lineIndex][1].type = 'lineEndingBlank'\n                listSpread = true\n              }\n              tailEvent[1].type = 'lineEnding'\n              lineIndex = tailIndex\n            } else if (\n              tailEvent[1].type === 'linePrefix' ||\n              tailEvent[1].type === 'blockQuotePrefix' ||\n              tailEvent[1].type === 'blockQuotePrefixWhitespace' ||\n              tailEvent[1].type === 'blockQuoteMarker' ||\n              tailEvent[1].type === 'listItemIndent'\n            ) {\n              // Empty\n            } else {\n              break\n            }\n          }\n          if (\n            firstBlankLineIndex &&\n            (!lineIndex || firstBlankLineIndex < lineIndex)\n          ) {\n            listItem._spread = true\n          }\n\n          // Fix position.\n          listItem.end = Object.assign(\n            {},\n            lineIndex ? events[lineIndex][1].start : event[1].end\n          )\n          events.splice(lineIndex || index, 0, ['exit', listItem, event[2]])\n          index++\n          length++\n        }\n\n        // Create a new list item.\n        if (event[1].type === 'listItemPrefix') {\n          listItem = {\n            type: 'listItem',\n            _spread: false,\n            start: Object.assign({}, event[1].start),\n            // @ts-expect-error: well add `end` in a second.\n            end: undefined\n          }\n          // @ts-expect-error: `listItem` is most definitely defined, TS...\n          events.splice(index, 0, ['enter', listItem, event[2]])\n          index++\n          length++\n          firstBlankLineIndex = undefined\n          atMarker = true\n        }\n      }\n    }\n    events[start][1]._spread = listSpread\n    return length\n  }\n\n  /**\n   * Set data.\n   *\n   * @template {keyof CompileData} Key\n   *   Field type.\n   * @param {Key} key\n   *   Key of field.\n   * @param {CompileData[Key]} [value]\n   *   New value.\n   * @returns {void}\n   *   Nothing.\n   */\n  function setData(key, value) {\n    data[key] = value\n  }\n\n  /**\n   * Get data.\n   *\n   * @template {keyof CompileData} Key\n   *   Field type.\n   * @param {Key} key\n   *   Key of field.\n   * @returns {CompileData[Key]}\n   *   Value.\n   */\n  function getData(key) {\n    return data[key]\n  }\n\n  /**\n   * Create an opener handle.\n   *\n   * @param {(token: Token) => Node} create\n   *   Create a node.\n   * @param {Handle} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function opener(create, and) {\n    return open\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {void}\n     */\n    function open(token) {\n      enter.call(this, create(token), token)\n      if (and) and.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {void}\n   */\n  function buffer() {\n    this.stack.push({\n      type: 'fragment',\n      children: []\n    })\n  }\n\n  /**\n   * @template {Node} Kind\n   *   Node type.\n   * @this {CompileContext}\n   *   Context.\n   * @param {Kind} node\n   *   Node to enter.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnEnterError | undefined} [errorHandler]\n   *   Handle the case where this token is open, but it is closed by something else.\n   * @returns {Kind}\n   *   The given node.\n   */\n  function enter(node, token, errorHandler) {\n    const parent = this.stack[this.stack.length - 1]\n    // @ts-expect-error: Assume `Node` can exist as a child of `parent`.\n    parent.children.push(node)\n    this.stack.push(node)\n    this.tokenStack.push([token, errorHandler])\n    // @ts-expect-error: `end` will be patched later.\n    node.position = {\n      start: point(token.start)\n    }\n    return node\n  }\n\n  /**\n   * Create a closer handle.\n   *\n   * @param {Handle} [and]\n   *   Optional function to also run.\n   * @returns {Handle}\n   *   Handle.\n   */\n  function closer(and) {\n    return close\n\n    /**\n     * @this {CompileContext}\n     * @param {Token} token\n     * @returns {void}\n     */\n    function close(token) {\n      if (and) and.call(this, token)\n      exit.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   *   Context.\n   * @param {Token} token\n   *   Corresponding token.\n   * @param {OnExitError | undefined} [onExitError]\n   *   Handle the case where another token is open.\n   * @returns {Node}\n   *   The closed node.\n   */\n  function exit(token, onExitError) {\n    const node = this.stack.pop()\n    const open = this.tokenStack.pop()\n    if (!open) {\n      throw new Error(\n        'Cannot close `' +\n          token.type +\n          '` (' +\n          stringifyPosition({\n            start: token.start,\n            end: token.end\n          }) +\n          '): its not open'\n      )\n    } else if (open[0].type !== token.type) {\n      if (onExitError) {\n        onExitError.call(this, token, open[0])\n      } else {\n        const handler = open[1] || defaultOnError\n        handler.call(this, token, open[0])\n      }\n    }\n    node.position.end = point(token.end)\n    return node\n  }\n\n  /**\n   * @this {CompileContext}\n   * @returns {string}\n   */\n  function resume() {\n    return toString(this.stack.pop())\n  }\n\n  //\n  // Handlers.\n  //\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistordered() {\n    setData('expectingFirstListItemValue', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onenterlistitemvalue(token) {\n    if (getData('expectingFirstListItemValue')) {\n      const ancestor = this.stack[this.stack.length - 2]\n      ancestor.start = Number.parseInt(this.sliceSerialize(token), 10)\n      setData('expectingFirstListItemValue')\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfenceinfo() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.lang = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfencemeta() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.meta = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefencedfence() {\n    // Exit if this is the closing fence.\n    if (getData('flowCodeInside')) return\n    this.buffer()\n    setData('flowCodeInside', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodefenced() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data.replace(/^(\\r?\\n|\\r)|(\\r?\\n|\\r)$/g, '')\n    setData('flowCodeInside')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcodeindented() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data.replace(/(\\r?\\n|\\r)$/g, '')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitionlabelstring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.label = label\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiontitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitdefinitiondestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitatxheadingsequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    if (!node.depth) {\n      const depth = this.sliceSerialize(token).length\n      node.depth = depth\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadingtext() {\n    setData('setextHeadingSlurpLineEnding', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheadinglinesequence(token) {\n    const node = this.stack[this.stack.length - 1]\n    node.depth = this.sliceSerialize(token).charCodeAt(0) === 61 ? 1 : 2\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitsetextheading() {\n    setData('setextHeadingSlurpLineEnding')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterdata(token) {\n    const node = this.stack[this.stack.length - 1]\n    let tail = node.children[node.children.length - 1]\n    if (!tail || tail.type !== 'text') {\n      // Add a new text node.\n      tail = text()\n      // @ts-expect-error: well add `end` later.\n      tail.position = {\n        start: point(token.start)\n      }\n      // @ts-expect-error: Assume `parent` accepts `text`.\n      node.children.push(tail)\n    }\n    this.stack.push(tail)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitdata(token) {\n    const tail = this.stack.pop()\n    tail.value += this.sliceSerialize(token)\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlineending(token) {\n    const context = this.stack[this.stack.length - 1]\n    // If were at a hard break, include the line ending in there.\n    if (getData('atHardBreak')) {\n      const tail = context.children[context.children.length - 1]\n      tail.position.end = point(token.end)\n      setData('atHardBreak')\n      return\n    }\n    if (\n      !getData('setextHeadingSlurpLineEnding') &&\n      config.canContainEols.includes(context.type)\n    ) {\n      onenterdata.call(this, token)\n      onexitdata.call(this, token)\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithardbreak() {\n    setData('atHardBreak', true)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmlflow() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexithtmltext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcodetext() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.value = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlink() {\n    const node = this.stack[this.stack.length - 1]\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n    // To do: clean.\n    if (getData('inReference')) {\n      /** @type {ReferenceType} */\n      const referenceType = getData('referenceType') || 'shortcut'\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n    setData('referenceType')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitimage() {\n    const node = this.stack[this.stack.length - 1]\n    // Note: there are also `identifier` and `label` fields on this link node!\n    // These are used / cleaned here.\n    // To do: clean.\n    if (getData('inReference')) {\n      /** @type {ReferenceType} */\n      const referenceType = getData('referenceType') || 'shortcut'\n      node.type += 'Reference'\n      // @ts-expect-error: mutate.\n      node.referenceType = referenceType\n      // @ts-expect-error: mutate.\n      delete node.url\n      delete node.title\n    } else {\n      // @ts-expect-error: mutate.\n      delete node.identifier\n      // @ts-expect-error: mutate.\n      delete node.label\n    }\n    setData('referenceType')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabeltext(token) {\n    const string = this.sliceSerialize(token)\n    const ancestor = this.stack[this.stack.length - 2]\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    ancestor.label = decodeString(string)\n    // @ts-expect-error: same as above.\n    ancestor.identifier = normalizeIdentifier(string).toLowerCase()\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitlabel() {\n    const fragment = this.stack[this.stack.length - 1]\n    const value = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    // Assume a reference.\n    setData('inReference', true)\n    if (node.type === 'link') {\n      /** @type {Array<StaticPhrasingContent>} */\n      // @ts-expect-error: Assume static phrasing content.\n      const children = fragment.children\n      node.children = children\n    } else {\n      node.alt = value\n    }\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcedestinationstring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.url = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresourcetitlestring() {\n    const data = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    node.title = data\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitresource() {\n    setData('inReference')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onenterreference() {\n    setData('referenceType', 'collapsed')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitreferencestring(token) {\n    const label = this.resume()\n    const node = this.stack[this.stack.length - 1]\n    // @ts-expect-error: stash this on the node, as it might become a reference\n    // later.\n    node.label = label\n    // @ts-expect-error: same as above.\n    node.identifier = normalizeIdentifier(\n      this.sliceSerialize(token)\n    ).toLowerCase()\n    setData('referenceType', 'full')\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n\n  function onexitcharacterreferencemarker(token) {\n    setData('characterReferenceType', token.type)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitcharacterreferencevalue(token) {\n    const data = this.sliceSerialize(token)\n    const type = getData('characterReferenceType')\n    /** @type {string} */\n    let value\n    if (type) {\n      value = decodeNumericCharacterReference(\n        data,\n        type === 'characterReferenceMarkerNumeric' ? 10 : 16\n      )\n      setData('characterReferenceType')\n    } else {\n      const result = decodeNamedCharacterReference(data)\n      value = result\n    }\n    const tail = this.stack.pop()\n    tail.value += value\n    tail.position.end = point(token.end)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkprotocol(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    node.url = this.sliceSerialize(token)\n  }\n\n  /**\n   * @this {CompileContext}\n   * @type {Handle}\n   */\n  function onexitautolinkemail(token) {\n    onexitdata.call(this, token)\n    const node = this.stack[this.stack.length - 1]\n    node.url = 'mailto:' + this.sliceSerialize(token)\n  }\n\n  //\n  // Creaters.\n  //\n\n  /** @returns {Blockquote} */\n  function blockQuote() {\n    return {\n      type: 'blockquote',\n      children: []\n    }\n  }\n\n  /** @returns {Code} */\n  function codeFlow() {\n    return {\n      type: 'code',\n      lang: null,\n      meta: null,\n      value: ''\n    }\n  }\n\n  /** @returns {InlineCode} */\n  function codeText() {\n    return {\n      type: 'inlineCode',\n      value: ''\n    }\n  }\n\n  /** @returns {Definition} */\n  function definition() {\n    return {\n      type: 'definition',\n      identifier: '',\n      label: null,\n      title: null,\n      url: ''\n    }\n  }\n\n  /** @returns {Emphasis} */\n  function emphasis() {\n    return {\n      type: 'emphasis',\n      children: []\n    }\n  }\n\n  /** @returns {Heading} */\n  function heading() {\n    // @ts-expect-error `depth` will be set later.\n    return {\n      type: 'heading',\n      depth: undefined,\n      children: []\n    }\n  }\n\n  /** @returns {Break} */\n  function hardBreak() {\n    return {\n      type: 'break'\n    }\n  }\n\n  /** @returns {HTML} */\n  function html() {\n    return {\n      type: 'html',\n      value: ''\n    }\n  }\n\n  /** @returns {Image} */\n  function image() {\n    return {\n      type: 'image',\n      title: null,\n      url: '',\n      alt: null\n    }\n  }\n\n  /** @returns {Link} */\n  function link() {\n    return {\n      type: 'link',\n      title: null,\n      url: '',\n      children: []\n    }\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {List}\n   */\n  function list(token) {\n    return {\n      type: 'list',\n      ordered: token.type === 'listOrdered',\n      start: null,\n      spread: token._spread,\n      children: []\n    }\n  }\n\n  /**\n   * @param {Token} token\n   * @returns {ListItem}\n   */\n  function listItem(token) {\n    return {\n      type: 'listItem',\n      spread: token._spread,\n      checked: null,\n      children: []\n    }\n  }\n\n  /** @returns {Paragraph} */\n  function paragraph() {\n    return {\n      type: 'paragraph',\n      children: []\n    }\n  }\n\n  /** @returns {Strong} */\n  function strong() {\n    return {\n      type: 'strong',\n      children: []\n    }\n  }\n\n  /** @returns {Text} */\n  function text() {\n    return {\n      type: 'text',\n      value: ''\n    }\n  }\n\n  /** @returns {ThematicBreak} */\n  function thematicBreak() {\n    return {\n      type: 'thematicBreak'\n    }\n  }\n}\n\n/**\n * Copy a point-like value.\n *\n * @param {Point} d\n *   Point-like value.\n * @returns {Point}\n *   unist point.\n */\nfunction point(d) {\n  return {\n    line: d.line,\n    column: d.column,\n    offset: d.offset\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Array<Extension | Array<Extension>>} extensions\n * @returns {void}\n */\nfunction configure(combined, extensions) {\n  let index = -1\n  while (++index < extensions.length) {\n    const value = extensions[index]\n    if (Array.isArray(value)) {\n      configure(combined, value)\n    } else {\n      extension(combined, value)\n    }\n  }\n}\n\n/**\n * @param {Config} combined\n * @param {Extension} extension\n * @returns {void}\n */\nfunction extension(combined, extension) {\n  /** @type {keyof Extension} */\n  let key\n  for (key in extension) {\n    if (own.call(extension, key)) {\n      if (key === 'canContainEols') {\n        const right = extension[key]\n        if (right) {\n          combined[key].push(...right)\n        }\n      } else if (key === 'transforms') {\n        const right = extension[key]\n        if (right) {\n          combined[key].push(...right)\n        }\n      } else if (key === 'enter' || key === 'exit') {\n        const right = extension[key]\n        if (right) {\n          Object.assign(combined[key], right)\n        }\n      }\n    }\n  }\n}\n\n/** @type {OnEnterError} */\nfunction defaultOnError(left, right) {\n  if (left) {\n    throw new Error(\n      'Cannot close `' +\n        left.type +\n        '` (' +\n        stringifyPosition({\n          start: left.start,\n          end: left.end\n        }) +\n        '): a different token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({\n          start: right.start,\n          end: right.end\n        }) +\n        ') is open'\n    )\n  } else {\n    throw new Error(\n      'Cannot close document, a token (`' +\n        right.type +\n        '`, ' +\n        stringifyPosition({\n          start: right.start,\n          end: right.end\n        }) +\n        ') is still open'\n    )\n  }\n}\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast-util-from-markdown').Options} Options\n */\n\nimport {fromMarkdown} from 'mdast-util-from-markdown'\n\n/**\n * @this {import('unified').Processor}\n * @type {import('unified').Plugin<[Options?] | void[], string, Root>}\n */\nexport default function remarkParse(options) {\n  /** @type {import('unified').ParserFunction<Root>} */\n  const parser = (doc) => {\n    // Assume options.\n    const settings = /** @type {Options} */ (this.data('settings'))\n\n    return fromMarkdown(\n      doc,\n      Object.assign({}, settings, options, {\n        // Note: these options are not in the readme.\n        // The goal is for them to be set by plugins on `data` instead of being\n        // passed by users.\n        extensions: this.data('micromarkExtensions') || [],\n        mdastExtensions: this.data('fromMarkdownExtensions') || []\n      })\n    )\n  }\n\n  Object.assign(this, {Parser: parser})\n}\n","/**\n * Throw a given error.\n *\n * @param {Error|null|undefined} [error]\n *   Maybe error.\n * @returns {asserts error is null|undefined}\n */\nexport function bail(error) {\n  if (error) {\n    throw error\n  }\n}\n","/**\n * @typedef {import('trough').Pipeline} Pipeline\n *\n * @typedef {import('unist').Node} Node\n *\n * @typedef {import('vfile').Compatible} Compatible\n * @typedef {import('vfile').Value} Value\n *\n * @typedef {import('../index.js').CompileResultMap} CompileResultMap\n * @typedef {import('../index.js').Data} Data\n * @typedef {import('../index.js').Settings} Settings\n */\n\n/**\n * @typedef {CompileResultMap[keyof CompileResultMap]} CompileResults\n *   Acceptable results from compilers.\n *\n *   To register custom results, add them to\n *   {@linkcode CompileResultMap}.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the compiler receives (default: `Node`).\n * @template {CompileResults} [Result=CompileResults]\n *   The thing that the compiler yields (default: `CompileResults`).\n * @callback Compiler\n *   A **compiler** handles the compiling of a syntax tree to something else\n *   (in most cases, text) (TypeScript type).\n *\n *   It is used in the stringify phase and called with a {@linkcode Node}\n *   and {@linkcode VFile} representation of the document to compile.\n *   It should return the textual representation of the given tree (typically\n *   `string`).\n *\n *   > **Note**: unified typically compiles by serializing: most compilers\n *   > return `string` (or `Uint8Array`).\n *   > Some compilers, such as the one configured with\n *   > [`rehype-react`][rehype-react], return other values (in this case, a\n *   > React tree).\n *   > If youre using a compiler that doesnt serialize, expect different\n *   > result values.\n *   >\n *   > To register custom results in TypeScript, add them to\n *   > {@linkcode CompileResultMap}.\n *\n *   [rehype-react]: https://github.com/rehypejs/rehype-react\n * @param {Tree} tree\n *   Tree to compile.\n * @param {VFile} file\n *   File associated with `tree`.\n * @returns {Result}\n *   New content: compiled text (`string` or `Uint8Array`, for `file.value`) or\n *   something else (for `file.result`).\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The node that the parser yields (default: `Node`)\n * @callback Parser\n *   A **parser** handles the parsing of text to a syntax tree.\n *\n *   It is used in the parse phase and is called with a `string` and\n *   {@linkcode VFile} of the document to parse.\n *   It must return the syntax tree representation of the given file\n *   ({@linkcode Node}).\n * @param {string} document\n *   Document to parse.\n * @param {VFile} file\n *   File associated with `document`.\n * @returns {Tree}\n *   Node representing the given file.\n */\n\n/**\n * @typedef {(\n *   Plugin<Array<any>, any, any> |\n *   PluginTuple<Array<any>, any, any> |\n *   Preset\n * )} Pluggable\n *   Union of the different ways to add plugins and settings.\n */\n\n/**\n * @typedef {Array<Pluggable>} PluggableList\n *   List of plugins and presets.\n */\n\n// Note: we cant use `callback` yet as it messes up `this`:\n//  <https://github.com/microsoft/TypeScript/issues/55197>.\n/**\n * @template {Array<unknown>} [PluginParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=Node]\n *   Value that is expected as input (default: `Node`).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@linkcode Parser}, this should be\n *       `string`.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be the\n *       node it expects.\n * @template [Output=Input]\n *   Value that is yielded as output (default: `Input`).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@linkcode Parser}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be\n *       result it yields.\n * @typedef {(\n *   (this: Processor, ...parameters: PluginParameters) =>\n *     Input extends string ? // Parser.\n *        Output extends Node | undefined ? undefined | void : never :\n *     Output extends CompileResults ? // Compiler.\n *        Input extends Node | undefined ? undefined | void : never :\n *     Transformer<\n *       Input extends Node ? Input : Node,\n *       Output extends Node ? Output : Node\n *     > | undefined | void\n * )} Plugin\n *   Single plugin.\n *\n *   Plugins configure the processors they are applied on in the following\n *   ways:\n *\n *   *   they change the processor, such as the parser, the compiler, or by\n *       configuring data\n *   *   they specify how to handle trees and files\n *\n *   In practice, they are functions that can receive options and configure the\n *   processor (`this`).\n *\n *   > **Note**: plugins are called when the processor is *frozen*, not when\n *   > they are applied.\n */\n\n/**\n * Tuple of a plugin and its configuration.\n *\n * The first item is a plugin, the rest are its parameters.\n *\n * @template {Array<unknown>} [TupleParameters=[]]\n *   Arguments passed to the plugin (default: `[]`, the empty tuple).\n * @template {Node | string | undefined} [Input=undefined]\n *   Value that is expected as input (optional).\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node it expects.\n *   *   If the plugin sets a {@linkcode Parser}, this should be\n *       `string`.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be the\n *       node it expects.\n * @template [Output=undefined] (optional).\n *   Value that is yielded as output.\n *\n *   *   If the plugin returns a {@linkcode Transformer}, this\n *       should be the node that that yields.\n *   *   If the plugin sets a {@linkcode Parser}, this should be the\n *       node that it yields.\n *   *   If the plugin sets a {@linkcode Compiler}, this should be\n *       result it yields.\n * @typedef {(\n *   [\n *     plugin: Plugin<TupleParameters, Input, Output>,\n *     ...parameters: TupleParameters\n *   ]\n * )} PluginTuple\n */\n\n/**\n * @typedef Preset\n *   Sharable configuration.\n *\n *   They can contain plugins and settings.\n * @property {PluggableList | undefined} [plugins]\n *   List of plugins and presets (optional).\n * @property {Settings | undefined} [settings]\n *   Shared settings for parsers and compilers (optional).\n */\n\n/**\n * @template {VFile} [File=VFile]\n *   The file that the callback receives (default: `VFile`).\n * @callback ProcessCallback\n *   Callback called when the process is done.\n *\n *   Called with either an error or a result.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {File | undefined} [file]\n *   Processed file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   The tree that the callback receives (default: `Node`).\n * @callback RunCallback\n *   Callback called when transformers are done.\n *\n *   Called with either an error or results.\n * @param {Error | undefined} [error]\n *   Fatal error (optional).\n * @param {Tree | undefined} [tree]\n *   Transformed tree (optional).\n * @param {VFile | undefined} [file]\n *   File (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Output=Node]\n *   Node type that the transformer yields (default: `Node`).\n * @callback TransformCallback\n *   Callback passed to transforms.\n *\n *   If the signature of a `transformer` accepts a third argument, the\n *   transformer may perform asynchronous operations, and must call it.\n * @param {Error | undefined} [error]\n *   Fatal error to stop the process (optional).\n * @param {Output | undefined} [tree]\n *   New, changed, tree (optional).\n * @param {VFile | undefined} [file]\n *   New, changed, file (optional).\n * @returns {undefined}\n *   Nothing.\n */\n\n/**\n * @template {Node} [Input=Node]\n *   Node type that the transformer expects (default: `Node`).\n * @template {Node} [Output=Input]\n *   Node type that the transformer yields (default: `Input`).\n * @callback Transformer\n *   Transformers handle syntax trees and files.\n *\n *   They are functions that are called each time a syntax tree and file are\n *   passed through the run phase.\n *   When an error occurs in them (either because its thrown, returned,\n *   rejected, or passed to `next`), the process stops.\n *\n *   The run phase is handled by [`trough`][trough], see its documentation for\n *   the exact semantics of these functions.\n *\n *   > **Note**: you should likely ignore `next`: dont accept it.\n *   > it supports callback-style async work.\n *   > But promises are likely easier to reason about.\n *\n *   [trough]: https://github.com/wooorm/trough#function-fninput-next\n * @param {Input} tree\n *   Tree to handle.\n * @param {VFile} file\n *   File to handle.\n * @param {TransformCallback<Output>} next\n *   Callback.\n * @returns {(\n *   Promise<Output | undefined | void> |\n *   Promise<never> | // For some reason this is needed separately.\n *   Output |\n *   Error |\n *   undefined |\n *   void\n * )}\n *   If you accept `next`, nothing.\n *   Otherwise:\n *\n *   *   `Error`  fatal error to stop the process\n *   *   `Promise<undefined>` or `undefined`  the next transformer keeps using\n *       same tree\n *   *   `Promise<Node>` or `Node`  new, changed, tree\n */\n\n/**\n * @template {Node | undefined} ParseTree\n *   Output of `parse`.\n * @template {Node | undefined} HeadTree\n *   Input for `run`.\n * @template {Node | undefined} TailTree\n *   Output for `run`.\n * @template {Node | undefined} CompileTree\n *   Input of `stringify`.\n * @template {CompileResults | undefined} CompileResult\n *   Output of `stringify`.\n * @template {Node | string | undefined} Input\n *   Input of plugin.\n * @template Output\n *   Output of plugin (optional).\n * @typedef {(\n *   Input extends string\n *     ? Output extends Node | undefined\n *       ? // Parser.\n *         Processor<\n *           Output extends undefined ? ParseTree : Output,\n *           HeadTree,\n *           TailTree,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Output extends CompileResults\n *     ? Input extends Node | undefined\n *       ? // Compiler.\n *         Processor<\n *           ParseTree,\n *           HeadTree,\n *           TailTree,\n *           Input extends undefined ? CompileTree : Input,\n *           Output extends undefined ? CompileResult : Output\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : Input extends Node | undefined\n *     ? Output extends Node | undefined\n *       ? // Transform.\n *         Processor<\n *           ParseTree,\n *           HeadTree extends undefined ? Input : HeadTree,\n *           Output extends undefined ? TailTree : Output,\n *           CompileTree,\n *           CompileResult\n *         >\n *       : // Unknown.\n *         Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n *     : // Unknown.\n *       Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>\n * )} UsePlugin\n *   Create a processor based on the input/output of a {@link Plugin plugin}.\n */\n\n/**\n * @template {CompileResults | undefined} Result\n *   Node type that the transformer yields.\n * @typedef {(\n *   Result extends Value | undefined ?\n *     VFile :\n *     VFile & {result: Result}\n *   )} VFileWithOutput\n *   Type to generate a {@linkcode VFile} corresponding to a compiler result.\n *\n *   If a result that is not acceptable on a `VFile` is used, that will\n *   be stored on the `result` field of {@linkcode VFile}.\n */\n\nimport {bail} from 'bail'\nimport extend from 'extend'\nimport {ok as assert} from 'devlop'\nimport isPlainObj from 'is-plain-obj'\nimport {trough} from 'trough'\nimport {VFile} from 'vfile'\nimport {CallableInstance} from './callable-instance.js'\n\n// To do: next major: drop `Compiler`, `Parser`: prefer lowercase.\n\n// To do: we could start yielding `never` in TS when a parser is missing and\n// `parse` is called.\n// Currently, we allow directly setting `processor.parser`, which is untyped.\n\nconst own = {}.hasOwnProperty\n\n/**\n * @template {Node | undefined} [ParseTree=undefined]\n *   Output of `parse` (optional).\n * @template {Node | undefined} [HeadTree=undefined]\n *   Input for `run` (optional).\n * @template {Node | undefined} [TailTree=undefined]\n *   Output for `run` (optional).\n * @template {Node | undefined} [CompileTree=undefined]\n *   Input of `stringify` (optional).\n * @template {CompileResults | undefined} [CompileResult=undefined]\n *   Output of `stringify` (optional).\n * @extends {CallableInstance<[], Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>>}\n */\nexport class Processor extends CallableInstance {\n  /**\n   * Create a processor.\n   */\n  constructor() {\n    // If `Processor()` is called (w/o new), `copy` is called instead.\n    super('copy')\n\n    /**\n     * Compiler to use (deprecated).\n     *\n     * @deprecated\n     *   Use `compiler` instead.\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.Compiler = undefined\n\n    /**\n     * Parser to use (deprecated).\n     *\n     * @deprecated\n     *   Use `parser` instead.\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.Parser = undefined\n\n    // Note: the following fields are considered private.\n    // However, they are needed for tests, and TSC generates an untyped\n    // `private freezeIndex` field for, which trips `type-coverage` up.\n    // Instead, we use `@deprecated` to visualize that they shouldnt be used.\n    /**\n     * Internal list of configured plugins.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Array<PluginTuple<Array<unknown>>>}\n     */\n    this.attachers = []\n\n    /**\n     * Compiler to use.\n     *\n     * @type {(\n     *   Compiler<\n     *     CompileTree extends undefined ? Node : CompileTree,\n     *     CompileResult extends undefined ? CompileResults : CompileResult\n     *   > |\n     *   undefined\n     * )}\n     */\n    this.compiler = undefined\n\n    /**\n     * Internal state to track where we are while freezing.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {number}\n     */\n    this.freezeIndex = -1\n\n    /**\n     * Internal state to track whether were frozen.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {boolean | undefined}\n     */\n    this.frozen = undefined\n\n    /**\n     * Internal state.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Data}\n     */\n    this.namespace = {}\n\n    /**\n     * Parser to use.\n     *\n     * @type {(\n     *   Parser<ParseTree extends undefined ? Node : ParseTree> |\n     *   undefined\n     * )}\n     */\n    this.parser = undefined\n\n    /**\n     * Internal list of configured transformers.\n     *\n     * @deprecated\n     *   This is a private internal property and should not be used.\n     * @type {Pipeline}\n     */\n    this.transformers = trough()\n  }\n\n  /**\n   * Copy a processor.\n   *\n   * @deprecated\n   *   This is a private internal method and should not be used.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   New *unfrozen* processor ({@linkcode Processor}) that is\n   *   configured to work the same as its ancestor.\n   *   When the descendant processor is configured in the future it does not\n   *   affect the ancestral processor.\n   */\n  copy() {\n    // Cast as the type parameters will be the same after attaching.\n    const destination =\n      /** @type {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>} */ (\n        new Processor()\n      )\n    let index = -1\n\n    while (++index < this.attachers.length) {\n      const attacher = this.attachers[index]\n      destination.use(...attacher)\n    }\n\n    destination.data(extend(true, {}, this.namespace))\n\n    return destination\n  }\n\n  /**\n   * Configure the processor with info available to all plugins.\n   * Information is stored in an object.\n   *\n   * Typically, options can be given to a specific plugin, but sometimes it\n   * makes sense to have information shared with several plugins.\n   * For example, a list of HTML elements that are self-closing, which is\n   * needed during all phases.\n   *\n   * > **Note**: setting information cannot occur on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * > **Note**: to register custom data in TypeScript, augment the\n   * > {@linkcode Data} interface.\n   *\n   * @example\n   *   This example show how to get and set info:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   const processor = unified().data('alpha', 'bravo')\n   *\n   *   processor.data('alpha') // => 'bravo'\n   *\n   *   processor.data() // => {alpha: 'bravo'}\n   *\n   *   processor.data({charlie: 'delta'})\n   *\n   *   processor.data() // => {charlie: 'delta'}\n   *   ```\n   *\n   * @template {keyof Data} Key\n   *\n   * @overload\n   * @returns {Data}\n   *\n   * @overload\n   * @param {Data} dataset\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Key} key\n   * @returns {Data[Key]}\n   *\n   * @overload\n   * @param {Key} key\n   * @param {Data[Key]} value\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @param {Data | Key} [key]\n   *   Key to get or set, or entire dataset to set, or nothing to get the\n   *   entire dataset (optional).\n   * @param {Data[Key]} [value]\n   *   Value to set (optional).\n   * @returns {unknown}\n   *   The current processor when setting, the value at `key` when getting, or\n   *   the entire dataset when getting without key.\n   */\n  data(key, value) {\n    if (typeof key === 'string') {\n      // Set `key`.\n      if (arguments.length === 2) {\n        assertUnfrozen('data', this.frozen)\n        this.namespace[key] = value\n        return this\n      }\n\n      // Get `key`.\n      return (own.call(this.namespace, key) && this.namespace[key]) || undefined\n    }\n\n    // Set space.\n    if (key) {\n      assertUnfrozen('data', this.frozen)\n      this.namespace = key\n      return this\n    }\n\n    // Get space.\n    return this.namespace\n  }\n\n  /**\n   * Freeze a processor.\n   *\n   * Frozen processors are meant to be extended and not to be configured\n   * directly.\n   *\n   * When a processor is frozen it cannot be unfrozen.\n   * New processors working the same way can be created by calling the\n   * processor.\n   *\n   * Its possible to freeze processors explicitly by calling `.freeze()`.\n   * Processors freeze automatically when `.parse()`, `.run()`, `.runSync()`,\n   * `.stringify()`, `.process()`, or `.processSync()` are called.\n   *\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   The current processor.\n   */\n  freeze() {\n    if (this.frozen) {\n      return this\n    }\n\n    // Cast so that we can type plugins easier.\n    // Plugins are supposed to be usable on different processors, not just on\n    // this exact processor.\n    const self = /** @type {Processor} */ (/** @type {unknown} */ (this))\n\n    while (++this.freezeIndex < this.attachers.length) {\n      const [attacher, ...options] = this.attachers[this.freezeIndex]\n\n      if (options[0] === false) {\n        continue\n      }\n\n      if (options[0] === true) {\n        options[0] = undefined\n      }\n\n      const transformer = attacher.call(self, ...options)\n\n      if (typeof transformer === 'function') {\n        this.transformers.use(transformer)\n      }\n    }\n\n    this.frozen = true\n    this.freezeIndex = Number.POSITIVE_INFINITY\n\n    return this\n  }\n\n  /**\n   * Parse text to a syntax tree.\n   *\n   * > **Note**: `parse` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `parse` performs the parse phase, not the run phase or other\n   * > phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   file to parse (optional); typically `string` or `VFile`; any value\n   *   accepted as `x` in `new VFile(x)`.\n   * @returns {ParseTree extends undefined ? Node : ParseTree}\n   *   Syntax tree representing `file`.\n   */\n  parse(file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const parser = this.parser || this.Parser\n    assertParser('parse', parser)\n    return parser(String(realFile), realFile)\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * > **Note**: `process` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `process` performs the parse, run, and stringify phases.\n   *\n   * @overload\n   * @param {Compatible | undefined} file\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<VFileWithOutput<CompileResult>>}\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`]; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @param {ProcessCallback<VFileWithOutput<CompileResult>> | undefined} [done]\n   *   Callback (optional).\n   * @returns {Promise<VFile> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise a promise, rejected with a fatal error or resolved with the\n   *   processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  process(file, done) {\n    const self = this\n\n    this.freeze()\n    assertParser('process', this.parser || this.Parser)\n    assertCompiler('process', this.compiler || this.Compiler)\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {((file: VFileWithOutput<CompileResult>) => undefined | void) | undefined} resolve\n     * @param {(error: Error | undefined) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      const realFile = vfile(file)\n      // Assume `ParseTree` (the result of the parser) matches `HeadTree` (the\n      // input of the first transform).\n      const parseTree =\n        /** @type {HeadTree extends undefined ? Node : HeadTree} */ (\n          /** @type {unknown} */ (self.parse(realFile))\n        )\n\n      self.run(parseTree, realFile, function (error, tree, file) {\n        if (error || !tree || !file) {\n          return realDone(error)\n        }\n\n        // Assume `TailTree` (the output of the last transform) matches\n        // `CompileTree` (the input of the compiler).\n        const compileTree =\n          /** @type {CompileTree extends undefined ? Node : CompileTree} */ (\n            /** @type {unknown} */ (tree)\n          )\n\n        const compileResult = self.stringify(compileTree, file)\n\n        if (looksLikeAValue(compileResult)) {\n          file.value = compileResult\n        } else {\n          file.result = compileResult\n        }\n\n        realDone(error, /** @type {VFileWithOutput<CompileResult>} */ (file))\n      })\n\n      /**\n       * @param {Error | undefined} error\n       * @param {VFileWithOutput<CompileResult> | undefined} [file]\n       * @returns {undefined}\n       */\n      function realDone(error, file) {\n        if (error || !file) {\n          reject(error)\n        } else if (resolve) {\n          resolve(file)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Process the given file as configured on the processor.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `processSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `processSync` performs the parse, run, and stringify phases.\n   *\n   * @param {Compatible | undefined} [file]\n   *   File (optional); typically `string` or `VFile`; any value accepted as\n   *   `x` in `new VFile(x)`.\n   * @returns {VFileWithOutput<CompileResult>}\n   *   The processed file.\n   *\n   *   The parsed, transformed, and compiled value is available at\n   *   `file.value` (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most\n   *   > compilers return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  processSync(file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {VFileWithOutput<CompileResult> | undefined} */\n    let result\n\n    this.freeze()\n    assertParser('processSync', this.parser || this.Parser)\n    assertCompiler('processSync', this.compiler || this.Compiler)\n\n    this.process(file, realDone)\n    assertDone('processSync', 'process', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n\n    return result\n\n    /**\n     * @type {ProcessCallback<VFileWithOutput<CompileResult>>}\n     */\n    function realDone(error, file) {\n      complete = true\n      bail(error)\n      result = file\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * > **Note**: `run` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `run` performs the run phase, not other phases.\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} file\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} done\n   * @returns {undefined}\n   *\n   * @overload\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   * @param {Compatible | undefined} [file]\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree>}\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {(\n   *   RunCallback<TailTree extends undefined ? Node : TailTree> |\n   *   Compatible\n   * )} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @param {RunCallback<TailTree extends undefined ? Node : TailTree>} [done]\n   *   Callback (optional).\n   * @returns {Promise<TailTree extends undefined ? Node : TailTree> | undefined}\n   *   Nothing if `done` is given.\n   *   Otherwise, a promise rejected with a fatal error or resolved with the\n   *   transformed tree.\n   */\n  run(tree, file, done) {\n    assertNode(tree)\n    this.freeze()\n\n    const transformers = this.transformers\n\n    if (!done && typeof file === 'function') {\n      done = file\n      file = undefined\n    }\n\n    return done ? executor(undefined, done) : new Promise(executor)\n\n    // Note: `void`s needed for TS.\n    /**\n     * @param {(\n     *   ((tree: TailTree extends undefined ? Node : TailTree) => undefined | void) |\n     *   undefined\n     * )} resolve\n     * @param {(error: Error) => undefined | void} reject\n     * @returns {undefined}\n     */\n    function executor(resolve, reject) {\n      assert(\n        typeof file !== 'function',\n        '`file` cant be a `done` anymore, we checked'\n      )\n      const realFile = vfile(file)\n      transformers.run(tree, realFile, realDone)\n\n      /**\n       * @param {Error | undefined} error\n       * @param {Node} outputTree\n       * @param {VFile} file\n       * @returns {undefined}\n       */\n      function realDone(error, outputTree, file) {\n        const resultingTree =\n          /** @type {TailTree extends undefined ? Node : TailTree} */ (\n            outputTree || tree\n          )\n\n        if (error) {\n          reject(error)\n        } else if (resolve) {\n          resolve(resultingTree)\n        } else {\n          assert(done, '`done` is defined if `resolve` is not')\n          done(undefined, resultingTree, file)\n        }\n      }\n    }\n  }\n\n  /**\n   * Run *transformers* on a syntax tree.\n   *\n   * An error is thrown if asynchronous transforms are configured.\n   *\n   * > **Note**: `runSync` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `runSync` performs the run phase, not other phases.\n   *\n   * @param {HeadTree extends undefined ? Node : HeadTree} tree\n   *   Tree to transform and inspect.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {TailTree extends undefined ? Node : TailTree}\n   *   Transformed tree.\n   */\n  runSync(tree, file) {\n    /** @type {boolean} */\n    let complete = false\n    /** @type {(TailTree extends undefined ? Node : TailTree) | undefined} */\n    let result\n\n    this.run(tree, file, realDone)\n\n    assertDone('runSync', 'run', complete)\n    assert(result, 'we either bailed on an error or have a tree')\n    return result\n\n    /**\n     * @type {RunCallback<TailTree extends undefined ? Node : TailTree>}\n     */\n    function realDone(error, tree) {\n      bail(error)\n      result = tree\n      complete = true\n    }\n  }\n\n  /**\n   * Compile a syntax tree.\n   *\n   * > **Note**: `stringify` freezes the processor if not already *frozen*.\n   *\n   * > **Note**: `stringify` performs the stringify phase, not the run phase\n   * > or other phases.\n   *\n   * @param {CompileTree extends undefined ? Node : CompileTree} tree\n   *   Tree to compile.\n   * @param {Compatible | undefined} [file]\n   *   File associated with `node` (optional); any value accepted as `x` in\n   *   `new VFile(x)`.\n   * @returns {CompileResult extends undefined ? Value : CompileResult}\n   *   Textual representation of the tree (see note).\n   *\n   *   > **Note**: unified typically compiles by serializing: most compilers\n   *   > return `string` (or `Uint8Array`).\n   *   > Some compilers, such as the one configured with\n   *   > [`rehype-react`][rehype-react], return other values (in this case, a\n   *   > React tree).\n   *   > If youre using a compiler that doesnt serialize, expect different\n   *   > result values.\n   *   >\n   *   > To register custom results in TypeScript, add them to\n   *   > {@linkcode CompileResultMap}.\n   *\n   *   [rehype-react]: https://github.com/rehypejs/rehype-react\n   */\n  stringify(tree, file) {\n    this.freeze()\n    const realFile = vfile(file)\n    const compiler = this.compiler || this.Compiler\n    assertCompiler('stringify', compiler)\n    assertNode(tree)\n\n    return compiler(tree, realFile)\n  }\n\n  /**\n   * Configure the processor to use a plugin, a list of usable values, or a\n   * preset.\n   *\n   * If the processor is already using a plugin, the previous plugin\n   * configuration is changed based on the options that are passed in.\n   * In other words, the plugin is not added a second time.\n   *\n   * > **Note**: `use` cannot be called on *frozen* processors.\n   * > Call the processor first to create a new unfrozen processor.\n   *\n   * @example\n   *   There are many ways to pass plugins to `.use()`.\n   *   This example gives an overview:\n   *\n   *   ```js\n   *   import {unified} from 'unified'\n   *\n   *   unified()\n   *     // Plugin with options:\n   *     .use(pluginA, {x: true, y: true})\n   *     // Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):\n   *     .use(pluginA, {y: false, z: true})\n   *     // Plugins:\n   *     .use([pluginB, pluginC])\n   *     // Two plugins, the second with options:\n   *     .use([pluginD, [pluginE, {}]])\n   *     // Preset with plugins and settings:\n   *     .use({plugins: [pluginF, [pluginG, {}]], settings: {position: false}})\n   *     // Settings only:\n   *     .use({settings: {position: false}})\n   *   ```\n   *\n   * @template {Array<unknown>} [Parameters=[]]\n   * @template {Node | string | undefined} [Input=undefined]\n   * @template [Output=Input]\n   *\n   * @overload\n   * @param {Preset | null | undefined} [preset]\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {PluggableList} list\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *\n   * @overload\n   * @param {Plugin<Parameters, Input, Output>} plugin\n   * @param {...(Parameters | [boolean])} parameters\n   * @returns {UsePlugin<ParseTree, HeadTree, TailTree, CompileTree, CompileResult, Input, Output>}\n   *\n   * @param {PluggableList | Plugin | Preset | null | undefined} value\n   *   Usable value.\n   * @param {...unknown} parameters\n   *   Parameters, when a plugin is given as a usable value.\n   * @returns {Processor<ParseTree, HeadTree, TailTree, CompileTree, CompileResult>}\n   *   Current processor.\n   */\n  use(value, ...parameters) {\n    const attachers = this.attachers\n    const namespace = this.namespace\n\n    assertUnfrozen('use', this.frozen)\n\n    if (value === null || value === undefined) {\n      // Empty.\n    } else if (typeof value === 'function') {\n      addPlugin(value, parameters)\n    } else if (typeof value === 'object') {\n      if (Array.isArray(value)) {\n        addList(value)\n      } else {\n        addPreset(value)\n      }\n    } else {\n      throw new TypeError('Expected usable value, not `' + value + '`')\n    }\n\n    return this\n\n    /**\n     * @param {Pluggable} value\n     * @returns {undefined}\n     */\n    function add(value) {\n      if (typeof value === 'function') {\n        addPlugin(value, [])\n      } else if (typeof value === 'object') {\n        if (Array.isArray(value)) {\n          const [plugin, ...parameters] =\n            /** @type {PluginTuple<Array<unknown>>} */ (value)\n          addPlugin(plugin, parameters)\n        } else {\n          addPreset(value)\n        }\n      } else {\n        throw new TypeError('Expected usable value, not `' + value + '`')\n      }\n    }\n\n    /**\n     * @param {Preset} result\n     * @returns {undefined}\n     */\n    function addPreset(result) {\n      if (!('plugins' in result) && !('settings' in result)) {\n        throw new Error(\n          'Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither'\n        )\n      }\n\n      addList(result.plugins)\n\n      if (result.settings) {\n        namespace.settings = extend(true, namespace.settings, result.settings)\n      }\n    }\n\n    /**\n     * @param {PluggableList | null | undefined} plugins\n     * @returns {undefined}\n     */\n    function addList(plugins) {\n      let index = -1\n\n      if (plugins === null || plugins === undefined) {\n        // Empty.\n      } else if (Array.isArray(plugins)) {\n        while (++index < plugins.length) {\n          const thing = plugins[index]\n          add(thing)\n        }\n      } else {\n        throw new TypeError('Expected a list of plugins, not `' + plugins + '`')\n      }\n    }\n\n    /**\n     * @param {Plugin} plugin\n     * @param {Array<unknown>} parameters\n     * @returns {undefined}\n     */\n    function addPlugin(plugin, parameters) {\n      let index = -1\n      let entryIndex = -1\n\n      while (++index < attachers.length) {\n        if (attachers[index][0] === plugin) {\n          entryIndex = index\n          break\n        }\n      }\n\n      if (entryIndex === -1) {\n        attachers.push([plugin, ...parameters])\n      }\n      // Only set if there was at least a `primary` value, otherwise wed change\n      // `arguments.length`.\n      else if (parameters.length > 0) {\n        let [primary, ...rest] = parameters\n        const currentPrimary = attachers[entryIndex][1]\n        if (isPlainObj(currentPrimary) && isPlainObj(primary)) {\n          primary = extend(true, currentPrimary, primary)\n        }\n\n        attachers[entryIndex] = [plugin, primary, ...rest]\n      }\n    }\n  }\n}\n\n// Note: this returns a *callable* instance.\n// Thats why its documented as a function.\n/**\n * Create a new processor.\n *\n * @example\n *   This example shows how a new processor can be created (from `remark`) and linked\n *   to **stdin**(4) and **stdout**(4).\n *\n *   ```js\n *   import process from 'node:process'\n *   import concatStream from 'concat-stream'\n *   import {remark} from 'remark'\n *\n *   process.stdin.pipe(\n *     concatStream(function (buf) {\n *       process.stdout.write(String(remark().processSync(buf)))\n *     })\n *   )\n *   ```\n *\n * @returns\n *   New *unfrozen* processor (`processor`).\n *\n *   This processor is configured to work the same as its ancestor.\n *   When the descendant processor is configured in the future it does not\n *   affect the ancestral processor.\n */\nexport const unified = new Processor().freeze()\n\n/**\n * Assert a parser is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Parser}\n */\nfunction assertParser(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `parser`')\n  }\n}\n\n/**\n * Assert a compiler is available.\n *\n * @param {string} name\n * @param {unknown} value\n * @returns {asserts value is Compiler}\n */\nfunction assertCompiler(name, value) {\n  if (typeof value !== 'function') {\n    throw new TypeError('Cannot `' + name + '` without `compiler`')\n  }\n}\n\n/**\n * Assert the processor is not frozen.\n *\n * @param {string} name\n * @param {unknown} frozen\n * @returns {asserts frozen is false}\n */\nfunction assertUnfrozen(name, frozen) {\n  if (frozen) {\n    throw new Error(\n      'Cannot call `' +\n        name +\n        '` on a frozen processor.\\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.'\n    )\n  }\n}\n\n/**\n * Assert `node` is a unist node.\n *\n * @param {unknown} node\n * @returns {asserts node is Node}\n */\nfunction assertNode(node) {\n  // `isPlainObj` unfortunately uses `any` instead of `unknown`.\n  // type-coverage:ignore-next-line\n  if (!isPlainObj(node) || typeof node.type !== 'string') {\n    throw new TypeError('Expected node, got `' + node + '`')\n    // Fine.\n  }\n}\n\n/**\n * Assert that `complete` is `true`.\n *\n * @param {string} name\n * @param {string} asyncName\n * @param {unknown} complete\n * @returns {asserts complete is true}\n */\nfunction assertDone(name, asyncName, complete) {\n  if (!complete) {\n    throw new Error(\n      '`' + name + '` finished async. Use `' + asyncName + '` instead'\n    )\n  }\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {VFile}\n */\nfunction vfile(value) {\n  return looksLikeAVFile(value) ? value : new VFile(value)\n}\n\n/**\n * @param {Compatible | undefined} [value]\n * @returns {value is VFile}\n */\nfunction looksLikeAVFile(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'message' in value &&\n      'messages' in value\n  )\n}\n\n/**\n * @param {unknown} [value]\n * @returns {value is Value}\n */\nfunction looksLikeAValue(value) {\n  return typeof value === 'string' || isUint8Array(value)\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","export default function isPlainObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\tconst prototype = Object.getPrototypeOf(value);\n\treturn (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n}\n","// To do: remove `void`s\n// To do: remove `null` from output of our APIs, allow it as user APIs.\n\n/**\n * @typedef {(error?: Error | null | undefined, ...output: Array<any>) => void} Callback\n *   Callback.\n *\n * @typedef {(...input: Array<any>) => any} Middleware\n *   Ware.\n *\n * @typedef Pipeline\n *   Pipeline.\n * @property {Run} run\n *   Run the pipeline.\n * @property {Use} use\n *   Add middleware.\n *\n * @typedef {(...input: Array<any>) => void} Run\n *   Call all middleware.\n *\n *   Calls `done` on completion with either an error or the output of the\n *   last middleware.\n *\n *   >  **Note**: as the length of input defines whether async functions get a\n *   > `next` function,\n *   > its recommended to keep `input` at one value normally.\n\n *\n * @typedef {(fn: Middleware) => Pipeline} Use\n *   Add middleware.\n */\n\n/**\n * Create new middleware.\n *\n * @returns {Pipeline}\n *   Pipeline.\n */\nexport function trough() {\n  /** @type {Array<Middleware>} */\n  const fns = []\n  /** @type {Pipeline} */\n  const pipeline = {run, use}\n\n  return pipeline\n\n  /** @type {Run} */\n  function run(...values) {\n    let middlewareIndex = -1\n    /** @type {Callback} */\n    const callback = values.pop()\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Expected function as last argument, not ' + callback)\n    }\n\n    next(null, ...values)\n\n    /**\n     * Run the next `fn`, or were done.\n     *\n     * @param {Error | null | undefined} error\n     * @param {Array<any>} output\n     */\n    function next(error, ...output) {\n      const fn = fns[++middlewareIndex]\n      let index = -1\n\n      if (error) {\n        callback(error)\n        return\n      }\n\n      // Copy non-nullish input into values.\n      while (++index < values.length) {\n        if (output[index] === null || output[index] === undefined) {\n          output[index] = values[index]\n        }\n      }\n\n      // Save the newly created `output` for the next call.\n      values = output\n\n      // Next or done.\n      if (fn) {\n        wrap(fn, next)(...output)\n      } else {\n        callback(null, ...output)\n      }\n    }\n  }\n\n  /** @type {Use} */\n  function use(middelware) {\n    if (typeof middelware !== 'function') {\n      throw new TypeError(\n        'Expected `middelware` to be a function, not ' + middelware\n      )\n    }\n\n    fns.push(middelware)\n    return pipeline\n  }\n}\n\n/**\n * Wrap `middleware` into a uniform interface.\n *\n * You can pass all input to the resulting function.\n * `callback` is then called with the output of `middleware`.\n *\n * If `middleware` accepts more arguments than the later given in input,\n * an extra `done` function is passed to it after that input,\n * which must be called by `middleware`.\n *\n * The first value in `input` is the main input value.\n * All other input values are the rest input values.\n * The values given to `callback` are the input values,\n * merged with every non-nullish output value.\n *\n * * if `middleware` throws an error,\n *   returns a promise that is rejected,\n *   or calls the given `done` function with an error,\n *   `callback` is called with that error\n * * if `middleware` returns a value or returns a promise that is resolved,\n *   that value is the main output value\n * * if `middleware` calls `done`,\n *   all non-nullish values except for the first one (the error) overwrite the\n *   output values\n *\n * @param {Middleware} middleware\n *   Function to wrap.\n * @param {Callback} callback\n *   Callback called with the output of `middleware`.\n * @returns {Run}\n *   Wrapped middleware.\n */\nexport function wrap(middleware, callback) {\n  /** @type {boolean} */\n  let called\n\n  return wrapped\n\n  /**\n   * Call `middleware`.\n   * @this {any}\n   * @param {Array<any>} parameters\n   * @returns {void}\n   */\n  function wrapped(...parameters) {\n    const fnExpectsCallback = middleware.length > parameters.length\n    /** @type {any} */\n    let result\n\n    if (fnExpectsCallback) {\n      parameters.push(done)\n    }\n\n    try {\n      result = middleware.apply(this, parameters)\n    } catch (error) {\n      const exception = /** @type {Error} */ (error)\n\n      // Well, this is quite the pickle.\n      // `middleware` received a callback and called it synchronously, but that\n      // threw an error.\n      // The only thing left to do is to throw the thing instead.\n      if (fnExpectsCallback && called) {\n        throw exception\n      }\n\n      return done(exception)\n    }\n\n    if (!fnExpectsCallback) {\n      if (result && result.then && typeof result.then === 'function') {\n        result.then(then, done)\n      } else if (result instanceof Error) {\n        done(result)\n      } else {\n        then(result)\n      }\n    }\n  }\n\n  /**\n   * Call `callback`, only once.\n   *\n   * @type {Callback}\n   */\n  function done(error, ...output) {\n    if (!called) {\n      called = true\n      callback(error, ...output)\n    }\n  }\n\n  /**\n   * Call `done` with one value.\n   *\n   * @param {any} [value]\n   */\n  function then(value) {\n    done(null, value)\n  }\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef NodeLike\n * @property {string} type\n * @property {PositionLike | null | undefined} [position]\n *\n * @typedef PointLike\n * @property {number | null | undefined} [line]\n * @property {number | null | undefined} [column]\n * @property {number | null | undefined} [offset]\n *\n * @typedef PositionLike\n * @property {PointLike | null | undefined} [start]\n * @property {PointLike | null | undefined} [end]\n */\n\n/**\n * Serialize the positional info of a point, position (start and end points),\n * or node.\n *\n * @param {Node | NodeLike | Point | PointLike | Position | PositionLike | null | undefined} [value]\n *   Node, position, or point.\n * @returns {string}\n *   Pretty printed positional info of a node (`string`).\n *\n *   In the format of a range `ls:cs-le:ce` (when given `node` or `position`)\n *   or a point `l:c` (when given `point`), where `l` stands for line, `c` for\n *   column, `s` for `start`, and `e` for end.\n *   An empty string (`''`) is returned if the given value is neither `node`,\n *   `position`, nor `point`.\n */\nexport function stringifyPosition(value) {\n  // Nothing.\n  if (!value || typeof value !== 'object') {\n    return ''\n  }\n\n  // Node.\n  if ('position' in value || 'type' in value) {\n    return position(value.position)\n  }\n\n  // Position.\n  if ('start' in value || 'end' in value) {\n    return position(value)\n  }\n\n  // Point.\n  if ('line' in value || 'column' in value) {\n    return point(value)\n  }\n\n  // ?\n  return ''\n}\n\n/**\n * @param {Point | PointLike | null | undefined} point\n * @returns {string}\n */\nfunction point(point) {\n  return index(point && point.line) + ':' + index(point && point.column)\n}\n\n/**\n * @param {Position | PositionLike | null | undefined} pos\n * @returns {string}\n */\nfunction position(pos) {\n  return point(pos && pos.start) + '-' + point(pos && pos.end)\n}\n\n/**\n * @param {number | null | undefined} value\n * @returns {number}\n */\nfunction index(value) {\n  return value && typeof value === 'number' ? value : 1\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Point} Point\n * @typedef {import('unist').Position} Position\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n *\n * @typedef Options\n *   Configuration.\n * @property {Array<Node> | null | undefined} [ancestors]\n *   Stack of (inclusive) ancestor nodes surrounding the message (optional).\n * @property {Error | null | undefined} [cause]\n *   Original error cause of the message (optional).\n * @property {Point | Position | null | undefined} [place]\n *   Place of message (optional).\n * @property {string | null | undefined} [ruleId]\n *   Category of message (optional, example: `'my-rule'`).\n * @property {string | null | undefined} [source]\n *   Namespace of who sent the message (optional, example: `'my-package'`).\n */\n\nimport {stringifyPosition} from 'unist-util-stringify-position'\n\n/**\n * Message.\n */\nexport class VFileMessage extends Error {\n  /**\n   * Create a message for `reason`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Options | null | undefined} [options]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | Options | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns\n   *   Instance of `VFileMessage`.\n   */\n  // eslint-disable-next-line complexity\n  constructor(causeOrReason, optionsOrParentOrPlace, origin) {\n    super()\n\n    if (typeof optionsOrParentOrPlace === 'string') {\n      origin = optionsOrParentOrPlace\n      optionsOrParentOrPlace = undefined\n    }\n\n    /** @type {string} */\n    let reason = ''\n    /** @type {Options} */\n    let options = {}\n    let legacyCause = false\n\n    if (optionsOrParentOrPlace) {\n      // Point.\n      if (\n        'line' in optionsOrParentOrPlace &&\n        'column' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Position.\n      else if (\n        'start' in optionsOrParentOrPlace &&\n        'end' in optionsOrParentOrPlace\n      ) {\n        options = {place: optionsOrParentOrPlace}\n      }\n      // Node.\n      else if ('type' in optionsOrParentOrPlace) {\n        options = {\n          ancestors: [optionsOrParentOrPlace],\n          place: optionsOrParentOrPlace.position\n        }\n      }\n      // Options.\n      else {\n        options = {...optionsOrParentOrPlace}\n      }\n    }\n\n    if (typeof causeOrReason === 'string') {\n      reason = causeOrReason\n    }\n    // Error.\n    else if (!options.cause && causeOrReason) {\n      legacyCause = true\n      reason = causeOrReason.message\n      options.cause = causeOrReason\n    }\n\n    if (!options.ruleId && !options.source && typeof origin === 'string') {\n      const index = origin.indexOf(':')\n\n      if (index === -1) {\n        options.ruleId = origin\n      } else {\n        options.source = origin.slice(0, index)\n        options.ruleId = origin.slice(index + 1)\n      }\n    }\n\n    if (!options.place && options.ancestors && options.ancestors) {\n      const parent = options.ancestors[options.ancestors.length - 1]\n\n      if (parent) {\n        options.place = parent.position\n      }\n    }\n\n    const start =\n      options.place && 'start' in options.place\n        ? options.place.start\n        : options.place\n\n    /* eslint-disable no-unused-expressions */\n    /**\n     * Stack of ancestor nodes surrounding the message.\n     *\n     * @type {Array<Node> | undefined}\n     */\n    this.ancestors = options.ancestors || undefined\n\n    /**\n     * Original error cause of the message.\n     *\n     * @type {Error | undefined}\n     */\n    this.cause = options.cause || undefined\n\n    /**\n     * Starting column of message.\n     *\n     * @type {number | undefined}\n     */\n    this.column = start ? start.column : undefined\n\n    /**\n     * State of problem.\n     *\n     * * `true`  error, file not usable\n     * * `false`  warning, change may be needed\n     * * `undefined`  change likely not needed\n     *\n     * @type {boolean | null | undefined}\n     */\n    this.fatal = undefined\n\n    /**\n     * Path of a file (used throughout the `VFile` ecosystem).\n     *\n     * @type {string | undefined}\n     */\n    this.file\n\n    // Field from `Error`.\n    /**\n     * Reason for message.\n     *\n     * @type {string}\n     */\n    this.message = reason\n\n    /**\n     * Starting line of error.\n     *\n     * @type {number | undefined}\n     */\n    this.line = start ? start.line : undefined\n\n    // Field from `Error`.\n    /**\n     * Serialized positional info of message.\n     *\n     * On normal errors, this would be something like `ParseError`, buit in\n     * `VFile` messages we use this space to show where an error happened.\n     */\n    this.name = stringifyPosition(options.place) || '1:1'\n\n    /**\n     * Place of message.\n     *\n     * @type {Point | Position | undefined}\n     */\n    this.place = options.place || undefined\n\n    /**\n     * Reason for message, should use markdown.\n     *\n     * @type {string}\n     */\n    this.reason = this.message\n\n    /**\n     * Category of message (example: `'my-rule'`).\n     *\n     * @type {string | undefined}\n     */\n    this.ruleId = options.ruleId || undefined\n\n    /**\n     * Namespace of message (example: `'my-package'`).\n     *\n     * @type {string | undefined}\n     */\n    this.source = options.source || undefined\n\n    // Field from `Error`.\n    /**\n     * Stack of message.\n     *\n     * This is used by normal errors to show where something happened in\n     * programming code, irrelevant for `VFile` messages,\n     *\n     * @type {string}\n     */\n    this.stack =\n      legacyCause && options.cause && typeof options.cause.stack === 'string'\n        ? options.cause.stack\n        : ''\n\n    // The following fields are well known.\n    // Not standard.\n    // Feel free to add other non-standard fields to your messages.\n\n    /**\n     * Specify the source value thats being reported, which is deemed\n     * incorrect.\n     *\n     * @type {string | undefined}\n     */\n    this.actual\n\n    /**\n     * Suggest acceptable values that can be used instead of `actual`.\n     *\n     * @type {Array<string> | undefined}\n     */\n    this.expected\n\n    /**\n     * Long form description of the message (you should use markdown).\n     *\n     * @type {string | undefined}\n     */\n    this.note\n\n    /**\n     * Link to docs for the message.\n     *\n     * >  **Note**: this must be an absolute URL that can be passed as `x`\n     * > to `new URL(x)`.\n     *\n     * @type {string | undefined}\n     */\n    this.url\n    /* eslint-enable no-unused-expressions */\n  }\n}\n\nVFileMessage.prototype.file = ''\nVFileMessage.prototype.name = ''\nVFileMessage.prototype.reason = ''\nVFileMessage.prototype.message = ''\nVFileMessage.prototype.stack = ''\nVFileMessage.prototype.column = undefined\nVFileMessage.prototype.line = undefined\nVFileMessage.prototype.ancestors = undefined\nVFileMessage.prototype.cause = undefined\nVFileMessage.prototype.fatal = undefined\nVFileMessage.prototype.place = undefined\nVFileMessage.prototype.ruleId = undefined\nVFileMessage.prototype.source = undefined\n","// A derivative work based on:\n// <https://github.com/browserify/path-browserify>.\n// Which is licensed:\n//\n// MIT License\n//\n// Copyright (c) 2013 James Halliday\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n// the Software, and to permit persons to whom the Software is furnished to do so,\n// subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A derivative work based on:\n//\n// Parts of that are extracted from Nodes internal `path` module:\n// <https://github.com/nodejs/node/blob/master/lib/path.js>.\n// Which is licensed:\n//\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nexport const minpath = {basename, dirname, extname, join, sep: '/'}\n\n/* eslint-disable max-depth, complexity */\n\n/**\n * Get the basename from a path.\n *\n * @param {string} path\n *   File path.\n * @param {string | null | undefined} [extname]\n *   Extension to strip.\n * @returns {string}\n *   Stem or basename.\n */\nfunction basename(path, extname) {\n  if (extname !== undefined && typeof extname !== 'string') {\n    throw new TypeError('\"ext\" argument must be a string')\n  }\n\n  assertPath(path)\n  let start = 0\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let seenNonSlash\n\n  if (\n    extname === undefined ||\n    extname.length === 0 ||\n    extname.length > path.length\n  ) {\n    while (index--) {\n      if (path.codePointAt(index) === 47 /* `/` */) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now.\n        if (seenNonSlash) {\n          start = index + 1\n          break\n        }\n      } else if (end < 0) {\n        // We saw the first non-path separator, mark this as the end of our\n        // path component.\n        seenNonSlash = true\n        end = index + 1\n      }\n    }\n\n    return end < 0 ? '' : path.slice(start, end)\n  }\n\n  if (extname === path) {\n    return ''\n  }\n\n  let firstNonSlashEnd = -1\n  let extnameIndex = extname.length - 1\n\n  while (index--) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (seenNonSlash) {\n        start = index + 1\n        break\n      }\n    } else {\n      if (firstNonSlashEnd < 0) {\n        // We saw the first non-path separator, remember this index in case\n        // we need it if the extension ends up not matching.\n        seenNonSlash = true\n        firstNonSlashEnd = index + 1\n      }\n\n      if (extnameIndex > -1) {\n        // Try to match the explicit extension.\n        if (path.codePointAt(index) === extname.codePointAt(extnameIndex--)) {\n          if (extnameIndex < 0) {\n            // We matched the extension, so mark this as the end of our path\n            // component\n            end = index\n          }\n        } else {\n          // Extension does not match, so our result is the entire path\n          // component\n          extnameIndex = -1\n          end = firstNonSlashEnd\n        }\n      }\n    }\n  }\n\n  if (start === end) {\n    end = firstNonSlashEnd\n  } else if (end < 0) {\n    end = path.length\n  }\n\n  return path.slice(start, end)\n}\n\n/**\n * Get the dirname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\nfunction dirname(path) {\n  assertPath(path)\n\n  if (path.length === 0) {\n    return '.'\n  }\n\n  let end = -1\n  let index = path.length\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  // Prefix `--` is important to not run on `0`.\n  while (--index) {\n    if (path.codePointAt(index) === 47 /* `/` */) {\n      if (unmatchedSlash) {\n        end = index\n        break\n      }\n    } else if (!unmatchedSlash) {\n      // We saw the first non-path separator\n      unmatchedSlash = true\n    }\n  }\n\n  return end < 0\n    ? path.codePointAt(0) === 47 /* `/` */\n      ? '/'\n      : '.'\n    : end === 1 && path.codePointAt(0) === 47 /* `/` */\n      ? '//'\n      : path.slice(0, end)\n}\n\n/**\n * Get an extname from a path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   Extname.\n */\nfunction extname(path) {\n  assertPath(path)\n\n  let index = path.length\n\n  let end = -1\n  let startPart = 0\n  let startDot = -1\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find.\n  let preDotState = 0\n  /** @type {boolean | undefined} */\n  let unmatchedSlash\n\n  while (index--) {\n    const code = path.codePointAt(index)\n\n    if (code === 47 /* `/` */) {\n      // If we reached a path separator that was not part of a set of path\n      // separators at the end of the string, stop now.\n      if (unmatchedSlash) {\n        startPart = index + 1\n        break\n      }\n\n      continue\n    }\n\n    if (end < 0) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension.\n      unmatchedSlash = true\n      end = index + 1\n    }\n\n    if (code === 46 /* `.` */) {\n      // If this is our first dot, mark it as the start of our extension.\n      if (startDot < 0) {\n        startDot = index\n      } else if (preDotState !== 1) {\n        preDotState = 1\n      }\n    } else if (startDot > -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension.\n      preDotState = -1\n    }\n  }\n\n  if (\n    startDot < 0 ||\n    end < 0 ||\n    // We saw a non-dot character immediately before the dot.\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly `..`.\n    (preDotState === 1 && startDot === end - 1 && startDot === startPart + 1)\n  ) {\n    return ''\n  }\n\n  return path.slice(startDot, end)\n}\n\n/**\n * Join segments from a path.\n *\n * @param {Array<string>} segments\n *   Path segments.\n * @returns {string}\n *   File path.\n */\nfunction join(...segments) {\n  let index = -1\n  /** @type {string | undefined} */\n  let joined\n\n  while (++index < segments.length) {\n    assertPath(segments[index])\n\n    if (segments[index]) {\n      joined =\n        joined === undefined ? segments[index] : joined + '/' + segments[index]\n    }\n  }\n\n  return joined === undefined ? '.' : normalize(joined)\n}\n\n/**\n * Normalize a basic file path.\n *\n * @param {string} path\n *   File path.\n * @returns {string}\n *   File path.\n */\n// Note: `normalize` is not exposed as `path.normalize`, so some code is\n// manually removed from it.\nfunction normalize(path) {\n  assertPath(path)\n\n  const absolute = path.codePointAt(0) === 47 /* `/` */\n\n  // Normalize the path according to POSIX rules.\n  let value = normalizeString(path, !absolute)\n\n  if (value.length === 0 && !absolute) {\n    value = '.'\n  }\n\n  if (value.length > 0 && path.codePointAt(path.length - 1) === 47 /* / */) {\n    value += '/'\n  }\n\n  return absolute ? '/' + value : value\n}\n\n/**\n * Resolve `.` and `..` elements in a path with directory names.\n *\n * @param {string} path\n *   File path.\n * @param {boolean} allowAboveRoot\n *   Whether `..` can move above root.\n * @returns {string}\n *   File path.\n */\nfunction normalizeString(path, allowAboveRoot) {\n  let result = ''\n  let lastSegmentLength = 0\n  let lastSlash = -1\n  let dots = 0\n  let index = -1\n  /** @type {number | undefined} */\n  let code\n  /** @type {number} */\n  let lastSlashIndex\n\n  while (++index <= path.length) {\n    if (index < path.length) {\n      code = path.codePointAt(index)\n    } else if (code === 47 /* `/` */) {\n      break\n    } else {\n      code = 47 /* `/` */\n    }\n\n    if (code === 47 /* `/` */) {\n      if (lastSlash === index - 1 || dots === 1) {\n        // Empty.\n      } else if (lastSlash !== index - 1 && dots === 2) {\n        if (\n          result.length < 2 ||\n          lastSegmentLength !== 2 ||\n          result.codePointAt(result.length - 1) !== 46 /* `.` */ ||\n          result.codePointAt(result.length - 2) !== 46 /* `.` */\n        ) {\n          if (result.length > 2) {\n            lastSlashIndex = result.lastIndexOf('/')\n\n            if (lastSlashIndex !== result.length - 1) {\n              if (lastSlashIndex < 0) {\n                result = ''\n                lastSegmentLength = 0\n              } else {\n                result = result.slice(0, lastSlashIndex)\n                lastSegmentLength = result.length - 1 - result.lastIndexOf('/')\n              }\n\n              lastSlash = index\n              dots = 0\n              continue\n            }\n          } else if (result.length > 0) {\n            result = ''\n            lastSegmentLength = 0\n            lastSlash = index\n            dots = 0\n            continue\n          }\n        }\n\n        if (allowAboveRoot) {\n          result = result.length > 0 ? result + '/..' : '..'\n          lastSegmentLength = 2\n        }\n      } else {\n        if (result.length > 0) {\n          result += '/' + path.slice(lastSlash + 1, index)\n        } else {\n          result = path.slice(lastSlash + 1, index)\n        }\n\n        lastSegmentLength = index - lastSlash - 1\n      }\n\n      lastSlash = index\n      dots = 0\n    } else if (code === 46 /* `.` */ && dots > -1) {\n      dots++\n    } else {\n      dots = -1\n    }\n  }\n\n  return result\n}\n\n/**\n * Make sure `path` is a string.\n *\n * @param {string} path\n *   File path.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError(\n      'Path must be a string. Received ' + JSON.stringify(path)\n    )\n  }\n}\n\n/* eslint-enable max-depth, complexity */\n","// Somewhat based on:\n// <https://github.com/defunctzombie/node-process/blob/master/browser.js>.\n// But I dont think one tiny line of code can be copyrighted. \nexport const minproc = {cwd}\n\nfunction cwd() {\n  return '/'\n}\n","/**\n * Checks if a value has the shape of a WHATWG URL object.\n *\n * Using a symbol or instanceof would not be able to recognize URL objects\n * coming from other implementations (e.g. in Electron), so instead we are\n * checking some well known properties for a lack of a better test.\n *\n * We use `href` and `protocol` as they are the only properties that are\n * easy to retrieve and calculate due to the lazy nature of the getters.\n *\n * We check for auth attribute to distinguish legacy url instance with\n * WHATWG URL instance.\n *\n * @param {unknown} fileUrlOrPath\n *   File path or URL.\n * @returns {fileUrlOrPath is URL}\n *   Whether its a URL.\n */\n// From: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js#L720>\nexport function isUrl(fileUrlOrPath) {\n  return Boolean(\n    fileUrlOrPath !== null &&\n      typeof fileUrlOrPath === 'object' &&\n      'href' in fileUrlOrPath &&\n      fileUrlOrPath.href &&\n      'protocol' in fileUrlOrPath &&\n      fileUrlOrPath.protocol &&\n      // @ts-expect-error: indexing is fine.\n      fileUrlOrPath.auth === undefined\n  )\n}\n","import {isUrl} from './minurl.shared.js'\n\nexport {isUrl} from './minurl.shared.js'\n\n// See: <https://github.com/nodejs/node/blob/6a3403c/lib/internal/url.js>\n\n/**\n * @param {URL | string} path\n *   File URL.\n * @returns {string}\n *   File URL.\n */\nexport function urlToPath(path) {\n  if (typeof path === 'string') {\n    path = new URL(path)\n  } else if (!isUrl(path)) {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'The \"path\" argument must be of type string or an instance of URL. Received `' +\n        path +\n        '`'\n    )\n    error.code = 'ERR_INVALID_ARG_TYPE'\n    throw error\n  }\n\n  if (path.protocol !== 'file:') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError('The URL must be of scheme file')\n    error.code = 'ERR_INVALID_URL_SCHEME'\n    throw error\n  }\n\n  return getPathFromURLPosix(path)\n}\n\n/**\n * Get a path from a POSIX URL.\n *\n * @param {URL} url\n *   URL.\n * @returns {string}\n *   File path.\n */\nfunction getPathFromURLPosix(url) {\n  if (url.hostname !== '') {\n    /** @type {NodeJS.ErrnoException} */\n    const error = new TypeError(\n      'File URL host must be \"localhost\" or empty on darwin'\n    )\n    error.code = 'ERR_INVALID_FILE_URL_HOST'\n    throw error\n  }\n\n  const pathname = url.pathname\n  let index = -1\n\n  while (++index < pathname.length) {\n    if (\n      pathname.codePointAt(index) === 37 /* `%` */ &&\n      pathname.codePointAt(index + 1) === 50 /* `2` */\n    ) {\n      const third = pathname.codePointAt(index + 2)\n      if (third === 70 /* `F` */ || third === 102 /* `f` */) {\n        /** @type {NodeJS.ErrnoException} */\n        const error = new TypeError(\n          'File URL path must not include encoded / characters'\n        )\n        error.code = 'ERR_INVALID_FILE_URL_PATH'\n        throw error\n      }\n    }\n  }\n\n  return decodeURIComponent(pathname)\n}\n","/**\n * @import {Node, Point, Position} from 'unist'\n * @import {Options as MessageOptions} from 'vfile-message'\n * @import {Compatible, Data, Map, Options, Value} from 'vfile'\n */\n\n/**\n * @typedef {object & {type: string, position?: Position | undefined}} NodeLike\n */\n\nimport {VFileMessage} from 'vfile-message'\nimport {minpath} from '#minpath'\nimport {minproc} from '#minproc'\nimport {urlToPath, isUrl} from '#minurl'\n\n/**\n * Order of setting (least specific to most), we need this because otherwise\n * `{stem: 'a', path: '~/b.js'}` would throw, as a path is needed before a\n * stem can be set.\n */\nconst order = /** @type {const} */ ([\n  'history',\n  'path',\n  'basename',\n  'stem',\n  'extname',\n  'dirname'\n])\n\nexport class VFile {\n  /**\n   * Create a new virtual file.\n   *\n   * `options` is treated as:\n   *\n   * *   `string` or `Uint8Array`  `{value: options}`\n   * *   `URL`  `{path: options}`\n   * *   `VFile`  shallow copies its data over to the new file\n   * *   `object`  all fields are shallow copied over to the new file\n   *\n   * Path related fields are set in the following order (least specific to\n   * most specific): `history`, `path`, `basename`, `stem`, `extname`,\n   * `dirname`.\n   *\n   * You cannot set `dirname` or `extname` without setting either `history`,\n   * `path`, `basename`, or `stem` too.\n   *\n   * @param {Compatible | null | undefined} [value]\n   *   File value.\n   * @returns\n   *   New instance.\n   */\n  constructor(value) {\n    /** @type {Options | VFile} */\n    let options\n\n    if (!value) {\n      options = {}\n    } else if (isUrl(value)) {\n      options = {path: value}\n    } else if (typeof value === 'string' || isUint8Array(value)) {\n      options = {value}\n    } else {\n      options = value\n    }\n\n    /* eslint-disable no-unused-expressions */\n\n    /**\n     * Base of `path` (default: `process.cwd()` or `'/'` in browsers).\n     *\n     * @type {string}\n     */\n    // Prevent calling `cwd` (which could be expensive) if its not needed;\n    // the empty string will be overridden in the next block.\n    this.cwd = 'cwd' in options ? '' : minproc.cwd()\n\n    /**\n     * Place to store custom info (default: `{}`).\n     *\n     * Its OK to store custom data directly on the file but moving it to\n     * `data` is recommended.\n     *\n     * @type {Data}\n     */\n    this.data = {}\n\n    /**\n     * List of file paths the file moved between.\n     *\n     * The first is the original path and the last is the current path.\n     *\n     * @type {Array<string>}\n     */\n    this.history = []\n\n    /**\n     * List of messages associated with the file.\n     *\n     * @type {Array<VFileMessage>}\n     */\n    this.messages = []\n\n    /**\n     * Raw value.\n     *\n     * @type {Value}\n     */\n    this.value\n\n    // The below are non-standard, they are well-known.\n    // As in, used in several tools.\n    /**\n     * Source map.\n     *\n     * This type is equivalent to the `RawSourceMap` type from the `source-map`\n     * module.\n     *\n     * @type {Map | null | undefined}\n     */\n    this.map\n\n    /**\n     * Custom, non-string, compiled, representation.\n     *\n     * This is used by unified to store non-string results.\n     * One example is when turning markdown into React nodes.\n     *\n     * @type {unknown}\n     */\n    this.result\n\n    /**\n     * Whether a file was saved to disk.\n     *\n     * This is used by vfile reporters.\n     *\n     * @type {boolean}\n     */\n    this.stored\n    /* eslint-enable no-unused-expressions */\n\n    // Set path related properties in the correct order.\n    let index = -1\n\n    while (++index < order.length) {\n      const field = order[index]\n\n      // Note: we specifically use `in` instead of `hasOwnProperty` to accept\n      // `vfile`s too.\n      if (\n        field in options &&\n        options[field] !== undefined &&\n        options[field] !== null\n      ) {\n        // @ts-expect-error: TS doesnt understand basic reality.\n        this[field] = field === 'history' ? [...options[field]] : options[field]\n      }\n    }\n\n    /** @type {string} */\n    let field\n\n    // Set non-path related properties.\n    for (field in options) {\n      // @ts-expect-error: fine to set other things.\n      if (!order.includes(field)) {\n        // @ts-expect-error: fine to set other things.\n        this[field] = options[field]\n      }\n    }\n  }\n\n  /**\n   * Get the basename (including extname) (example: `'index.min.js'`).\n   *\n   * @returns {string | undefined}\n   *   Basename.\n   */\n  get basename() {\n    return typeof this.path === 'string'\n      ? minpath.basename(this.path)\n      : undefined\n  }\n\n  /**\n   * Set basename (including extname) (`'index.min.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} basename\n   *   Basename.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set basename(basename) {\n    assertNonEmpty(basename, 'basename')\n    assertPart(basename, 'basename')\n    this.path = minpath.join(this.dirname || '', basename)\n  }\n\n  /**\n   * Get the parent path (example: `'~'`).\n   *\n   * @returns {string | undefined}\n   *   Dirname.\n   */\n  get dirname() {\n    return typeof this.path === 'string'\n      ? minpath.dirname(this.path)\n      : undefined\n  }\n\n  /**\n   * Set the parent path (example: `'~'`).\n   *\n   * Cannot be set if theres no `path` yet.\n   *\n   * @param {string | undefined} dirname\n   *   Dirname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set dirname(dirname) {\n    assertPath(this.basename, 'dirname')\n    this.path = minpath.join(dirname || '', this.basename)\n  }\n\n  /**\n   * Get the extname (including dot) (example: `'.js'`).\n   *\n   * @returns {string | undefined}\n   *   Extname.\n   */\n  get extname() {\n    return typeof this.path === 'string'\n      ? minpath.extname(this.path)\n      : undefined\n  }\n\n  /**\n   * Set the extname (including dot) (example: `'.js'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be set if theres no `path` yet.\n   *\n   * @param {string | undefined} extname\n   *   Extname.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set extname(extname) {\n    assertPart(extname, 'extname')\n    assertPath(this.dirname, 'extname')\n\n    if (extname) {\n      if (extname.codePointAt(0) !== 46 /* `.` */) {\n        throw new Error('`extname` must start with `.`')\n      }\n\n      if (extname.includes('.', 1)) {\n        throw new Error('`extname` cannot contain multiple dots')\n      }\n    }\n\n    this.path = minpath.join(this.dirname, this.stem + (extname || ''))\n  }\n\n  /**\n   * Get the full path (example: `'~/index.min.js'`).\n   *\n   * @returns {string}\n   *   Path.\n   */\n  get path() {\n    return this.history[this.history.length - 1]\n  }\n\n  /**\n   * Set the full path (example: `'~/index.min.js'`).\n   *\n   * Cannot be nullified.\n   * You can set a file URL (a `URL` object with a `file:` protocol) which will\n   * be turned into a path with `url.fileURLToPath`.\n   *\n   * @param {URL | string} path\n   *   Path.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set path(path) {\n    if (isUrl(path)) {\n      path = urlToPath(path)\n    }\n\n    assertNonEmpty(path, 'path')\n\n    if (this.path !== path) {\n      this.history.push(path)\n    }\n  }\n\n  /**\n   * Get the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * @returns {string | undefined}\n   *   Stem.\n   */\n  get stem() {\n    return typeof this.path === 'string'\n      ? minpath.basename(this.path, this.extname)\n      : undefined\n  }\n\n  /**\n   * Set the stem (basename w/o extname) (example: `'index.min'`).\n   *\n   * Cannot contain path separators (`'/'` on unix, macOS, and browsers, `'\\'`\n   * on windows).\n   * Cannot be nullified (use `file.path = file.dirname` instead).\n   *\n   * @param {string} stem\n   *   Stem.\n   * @returns {undefined}\n   *   Nothing.\n   */\n  set stem(stem) {\n    assertNonEmpty(stem, 'stem')\n    assertPart(stem, 'stem')\n    this.path = minpath.join(this.dirname || '', stem + (this.extname || ''))\n  }\n\n  // Normal prototypal methods.\n  /**\n   * Create a fatal message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `true` (error; file not usable)\n   * and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {never}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {never}\n   *   Never.\n   * @throws {VFileMessage}\n   *   Message.\n   */\n  fail(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = true\n\n    throw message\n  }\n\n  /**\n   * Create an info message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `undefined` (info; change\n   * likely not needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  info(causeOrReason, optionsOrParentOrPlace, origin) {\n    // @ts-expect-error: the overloads are fine.\n    const message = this.message(causeOrReason, optionsOrParentOrPlace, origin)\n\n    message.fatal = undefined\n\n    return message\n  }\n\n  /**\n   * Create a message for `reason` associated with the file.\n   *\n   * The `fatal` field of the message is set to `false` (warning; change may be\n   * needed) and the `file` field is set to the current file path.\n   * The message is added to the `messages` field on `file`.\n   *\n   * >  **Note**: also has obsolete signatures.\n   *\n   * @overload\n   * @param {string} reason\n   * @param {MessageOptions | null | undefined} [options]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {string} reason\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Node | NodeLike | null | undefined} parent\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {Point | Position | null | undefined} place\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @overload\n   * @param {Error | VFileMessage} cause\n   * @param {string | null | undefined} [origin]\n   * @returns {VFileMessage}\n   *\n   * @param {Error | VFileMessage | string} causeOrReason\n   *   Reason for message, should use markdown.\n   * @param {Node | NodeLike | MessageOptions | Point | Position | string | null | undefined} [optionsOrParentOrPlace]\n   *   Configuration (optional).\n   * @param {string | null | undefined} [origin]\n   *   Place in code where the message originates (example:\n   *   `'my-package:my-rule'` or `'my-rule'`).\n   * @returns {VFileMessage}\n   *   Message.\n   */\n  message(causeOrReason, optionsOrParentOrPlace, origin) {\n    const message = new VFileMessage(\n      // @ts-expect-error: the overloads are fine.\n      causeOrReason,\n      optionsOrParentOrPlace,\n      origin\n    )\n\n    if (this.path) {\n      message.name = this.path + ':' + message.name\n      message.file = this.path\n    }\n\n    message.fatal = false\n\n    this.messages.push(message)\n\n    return message\n  }\n\n  /**\n   * Serialize the file.\n   *\n   * > **Note**: which encodings are supported depends on the engine.\n   * > For info on Node.js, see:\n   * > <https://nodejs.org/api/util.html#whatwg-supported-encodings>.\n   *\n   * @param {string | null | undefined} [encoding='utf8']\n   *   Character encoding to understand `value` as when its a `Uint8Array`\n   *   (default: `'utf-8'`).\n   * @returns {string}\n   *   Serialized file.\n   */\n  toString(encoding) {\n    if (this.value === undefined) {\n      return ''\n    }\n\n    if (typeof this.value === 'string') {\n      return this.value\n    }\n\n    const decoder = new TextDecoder(encoding || undefined)\n    return decoder.decode(this.value)\n  }\n}\n\n/**\n * Assert that `part` is not a path (as in, does not contain `path.sep`).\n *\n * @param {string | null | undefined} part\n *   File path part.\n * @param {string} name\n *   Part name.\n * @returns {undefined}\n *   Nothing.\n */\nfunction assertPart(part, name) {\n  if (part && part.includes(minpath.sep)) {\n    throw new Error(\n      '`' + name + '` cannot be a path: did not expect `' + minpath.sep + '`'\n    )\n  }\n}\n\n/**\n * Assert that `part` is not empty.\n *\n * @param {string | undefined} part\n *   Thing.\n * @param {string} name\n *   Part name.\n * @returns {asserts part is string}\n *   Nothing.\n */\nfunction assertNonEmpty(part, name) {\n  if (!part) {\n    throw new Error('`' + name + '` cannot be empty')\n  }\n}\n\n/**\n * Assert `path` exists.\n *\n * @param {string | undefined} path\n *   Path.\n * @param {string} name\n *   Dependency name.\n * @returns {asserts path is string}\n *   Nothing.\n */\nfunction assertPath(path, name) {\n  if (!path) {\n    throw new Error('Setting `' + name + '` requires `path` to be set too')\n  }\n}\n\n/**\n * Assert `value` is an `Uint8Array`.\n *\n * @param {unknown} value\n *   thing.\n * @returns {value is Uint8Array}\n *   Whether `value` is an `Uint8Array`.\n */\nfunction isUint8Array(value) {\n  return Boolean(\n    value &&\n      typeof value === 'object' &&\n      'byteLength' in value &&\n      'byteOffset' in value\n  )\n}\n","export const CallableInstance =\n  /**\n   * @type {new <Parameters extends Array<unknown>, Result>(property: string | symbol) => (...parameters: Parameters) => Result}\n   */\n  (\n    /** @type {unknown} */\n    (\n      /**\n       * @this {Function}\n       * @param {string | symbol} property\n       * @returns {(...parameters: Array<unknown>) => unknown}\n       */\n      function (property) {\n        const self = this\n        const constr = self.constructor\n        const proto = /** @type {Record<string | symbol, Function>} */ (\n          // Prototypes do exist.\n          // type-coverage:ignore-next-line\n          constr.prototype\n        )\n        const value = proto[property]\n        /** @type {(...parameters: Array<unknown>) => unknown} */\n        const apply = function () {\n          return value.apply(apply, arguments)\n        }\n\n        Object.setPrototypeOf(apply, proto)\n\n        // Not needed for us in `unified`: we only call this on the `copy`\n        // function,\n        // and we don't need to add its fields (`length`, `name`)\n        // over.\n        // See also: GH-246.\n        // const names = Object.getOwnPropertyNames(value)\n        //\n        // for (const p of names) {\n        //   const descriptor = Object.getOwnPropertyDescriptor(value, p)\n        //   if (descriptor) Object.defineProperty(apply, p, descriptor)\n        // }\n\n        return apply\n      }\n    )\n  )\n","// To do: next major: remove.\n/**\n * @typedef {Options} MarkdownTableOptions\n *   Configuration.\n */\n\n/**\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [alignDelimiters=true]\n *   Whether to align the delimiters (default: `true`);\n *   they are aligned by default:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   Pass `false` to make them staggered:\n *\n *   ```markdown\n *   | Alpha | B |\n *   | - | - |\n *   | C | Delta |\n *   ```\n * @property {ReadonlyArray<string | null | undefined> | string | null | undefined} [align]\n *   How to align columns (default: `''`);\n *   one style for all columns or styles for their respective columns;\n *   each style is either `'l'` (left), `'r'` (right), or `'c'` (center);\n *   other values are treated as `''`, which doesnt place the colon in the\n *   alignment row but does align left;\n *   *only the lowercased first character is used, so `Right` is fine.*\n * @property {boolean | null | undefined} [delimiterEnd=true]\n *   Whether to end each row with the delimiter (default: `true`).\n *\n *   >  **Note**: please dont use this: it could create fragile structures\n *   > that arent understandable to some markdown parsers.\n *\n *   When `true`, there are ending delimiters:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there are no ending delimiters:\n *\n *   ```markdown\n *   | Alpha | B\n *   | ----- | -----\n *   | C     | Delta\n *   ```\n * @property {boolean | null | undefined} [delimiterStart=true]\n *   Whether to begin each row with the delimiter (default: `true`).\n *\n *   >  **Note**: please dont use this: it could create fragile structures\n *   > that arent understandable to some markdown parsers.\n *\n *   When `true`, there are starting delimiters:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there are no starting delimiters:\n *\n *   ```markdown\n *   Alpha | B     |\n *   ----- | ----- |\n *   C     | Delta |\n *   ```\n * @property {boolean | null | undefined} [padding=true]\n *   Whether to add a space of padding between delimiters and cells\n *   (default: `true`).\n *\n *   When `true`, there is padding:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there is no padding:\n *\n *   ```markdown\n *   |Alpha|B    |\n *   |-----|-----|\n *   |C    |Delta|\n *   ```\n * @property {((value: string) => number) | null | undefined} [stringLength]\n *   Function to detect the length of table cell content (optional);\n *   this is used when aligning the delimiters (`|`) between table cells;\n *   full-width characters and emoji mess up delimiter alignment when viewing\n *   the markdown source;\n *   to fix this, you can pass this function,\n *   which receives the cell content and returns its visible size;\n *   note that what is and isnt visible depends on where the text is displayed.\n *\n *   Without such a function, the following:\n *\n *   ```js\n *   markdownTable([\n *     ['Alpha', 'Bravo'],\n *     ['', 'Charlie'],\n *     ['', 'Delta']\n *   ])\n *   ```\n *\n *   Yields:\n *\n *   ```markdown\n *   | Alpha | Bravo |\n *   | - | - |\n *   |  | Charlie |\n *   |  | Delta |\n *   ```\n *\n *   With [`string-width`](https://github.com/sindresorhus/string-width):\n *\n *   ```js\n *   import stringWidth from 'string-width'\n *\n *   markdownTable(\n *     [\n *       ['Alpha', 'Bravo'],\n *       ['', 'Charlie'],\n *       ['', 'Delta']\n *     ],\n *     {stringLength: stringWidth}\n *   )\n *   ```\n *\n *   Yields:\n *\n *   ```markdown\n *   | Alpha | Bravo   |\n *   | ----- | ------- |\n *   |   | Charlie |\n *   |     | Delta   |\n *   ```\n */\n\n/**\n * @param {string} value\n *   Cell value.\n * @returns {number}\n *   Cell size.\n */\nfunction defaultStringLength(value) {\n  return value.length\n}\n\n/**\n * Generate a markdown\n * ([GFM](https://docs.github.com/en/github/writing-on-github/working-with-advanced-formatting/organizing-information-with-tables))\n * table.\n *\n * @param {ReadonlyArray<ReadonlyArray<string | null | undefined>>} table\n *   Table data (matrix of strings).\n * @param {Readonly<Options> | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Result.\n */\nexport function markdownTable(table, options) {\n  const settings = options || {}\n  // To do: next major: change to spread.\n  const align = (settings.align || []).concat()\n  const stringLength = settings.stringLength || defaultStringLength\n  /** @type {Array<number>} Character codes as symbols for alignment per column. */\n  const alignments = []\n  /** @type {Array<Array<string>>} Cells per row. */\n  const cellMatrix = []\n  /** @type {Array<Array<number>>} Sizes of each cell per row. */\n  const sizeMatrix = []\n  /** @type {Array<number>} */\n  const longestCellByColumn = []\n  let mostCellsPerRow = 0\n  let rowIndex = -1\n\n  // This is a superfluous loop if we dont align delimiters, but otherwise wed\n  // do superfluous work when aligning, so optimize for aligning.\n  while (++rowIndex < table.length) {\n    /** @type {Array<string>} */\n    const row = []\n    /** @type {Array<number>} */\n    const sizes = []\n    let columnIndex = -1\n\n    if (table[rowIndex].length > mostCellsPerRow) {\n      mostCellsPerRow = table[rowIndex].length\n    }\n\n    while (++columnIndex < table[rowIndex].length) {\n      const cell = serialize(table[rowIndex][columnIndex])\n\n      if (settings.alignDelimiters !== false) {\n        const size = stringLength(cell)\n        sizes[columnIndex] = size\n\n        if (\n          longestCellByColumn[columnIndex] === undefined ||\n          size > longestCellByColumn[columnIndex]\n        ) {\n          longestCellByColumn[columnIndex] = size\n        }\n      }\n\n      row.push(cell)\n    }\n\n    cellMatrix[rowIndex] = row\n    sizeMatrix[rowIndex] = sizes\n  }\n\n  // Figure out which alignments to use.\n  let columnIndex = -1\n\n  if (typeof align === 'object' && 'length' in align) {\n    while (++columnIndex < mostCellsPerRow) {\n      alignments[columnIndex] = toAlignment(align[columnIndex])\n    }\n  } else {\n    const code = toAlignment(align)\n\n    while (++columnIndex < mostCellsPerRow) {\n      alignments[columnIndex] = code\n    }\n  }\n\n  // Inject the alignment row.\n  columnIndex = -1\n  /** @type {Array<string>} */\n  const row = []\n  /** @type {Array<number>} */\n  const sizes = []\n\n  while (++columnIndex < mostCellsPerRow) {\n    const code = alignments[columnIndex]\n    let before = ''\n    let after = ''\n\n    if (code === 99 /* `c` */) {\n      before = ':'\n      after = ':'\n    } else if (code === 108 /* `l` */) {\n      before = ':'\n    } else if (code === 114 /* `r` */) {\n      after = ':'\n    }\n\n    // There *must* be at least one hyphen-minus in each alignment cell.\n    let size =\n      settings.alignDelimiters === false\n        ? 1\n        : Math.max(\n            1,\n            longestCellByColumn[columnIndex] - before.length - after.length\n          )\n\n    const cell = before + '-'.repeat(size) + after\n\n    if (settings.alignDelimiters !== false) {\n      size = before.length + size + after.length\n\n      if (size > longestCellByColumn[columnIndex]) {\n        longestCellByColumn[columnIndex] = size\n      }\n\n      sizes[columnIndex] = size\n    }\n\n    row[columnIndex] = cell\n  }\n\n  // Inject the alignment row.\n  cellMatrix.splice(1, 0, row)\n  sizeMatrix.splice(1, 0, sizes)\n\n  rowIndex = -1\n  /** @type {Array<string>} */\n  const lines = []\n\n  while (++rowIndex < cellMatrix.length) {\n    const row = cellMatrix[rowIndex]\n    const sizes = sizeMatrix[rowIndex]\n    columnIndex = -1\n    /** @type {Array<string>} */\n    const line = []\n\n    while (++columnIndex < mostCellsPerRow) {\n      const cell = row[columnIndex] || ''\n      let before = ''\n      let after = ''\n\n      if (settings.alignDelimiters !== false) {\n        const size =\n          longestCellByColumn[columnIndex] - (sizes[columnIndex] || 0)\n        const code = alignments[columnIndex]\n\n        if (code === 114 /* `r` */) {\n          before = ' '.repeat(size)\n        } else if (code === 99 /* `c` */) {\n          if (size % 2) {\n            before = ' '.repeat(size / 2 + 0.5)\n            after = ' '.repeat(size / 2 - 0.5)\n          } else {\n            before = ' '.repeat(size / 2)\n            after = before\n          }\n        } else {\n          after = ' '.repeat(size)\n        }\n      }\n\n      if (settings.delimiterStart !== false && !columnIndex) {\n        line.push('|')\n      }\n\n      if (\n        settings.padding !== false &&\n        // Dont add the opening space if were not aligning and the cell is\n        // empty: there will be a closing space.\n        !(settings.alignDelimiters === false && cell === '') &&\n        (settings.delimiterStart !== false || columnIndex)\n      ) {\n        line.push(' ')\n      }\n\n      if (settings.alignDelimiters !== false) {\n        line.push(before)\n      }\n\n      line.push(cell)\n\n      if (settings.alignDelimiters !== false) {\n        line.push(after)\n      }\n\n      if (settings.padding !== false) {\n        line.push(' ')\n      }\n\n      if (\n        settings.delimiterEnd !== false ||\n        columnIndex !== mostCellsPerRow - 1\n      ) {\n        line.push('|')\n      }\n    }\n\n    lines.push(\n      settings.delimiterEnd === false\n        ? line.join('').replace(/ +$/, '')\n        : line.join('')\n    )\n  }\n\n  return lines.join('\\n')\n}\n\n/**\n * @param {string | null | undefined} [value]\n *   Value to serialize.\n * @returns {string}\n *   Result.\n */\nfunction serialize(value) {\n  return value === null || value === undefined ? '' : String(value)\n}\n\n/**\n * @param {string | null | undefined} value\n *   Value.\n * @returns {number}\n *   Alignment.\n */\nfunction toAlignment(value) {\n  const code = typeof value === 'string' ? value.codePointAt(0) : 0\n\n  return code === 67 /* `C` */ || code === 99 /* `c` */\n    ? 99 /* `c` */\n    : code === 76 /* `L` */ || code === 108 /* `l` */\n      ? 108 /* `l` */\n      : code === 82 /* `R` */ || code === 114 /* `r` */\n        ? 114 /* `r` */\n        : 0\n}\n","/**\n * @import {Blockquote, Parents} from 'mdast'\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {Blockquote} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function blockquote(node, _, state, info) {\n  const exit = state.enter('blockquote')\n  const tracker = state.createTracker(info)\n  tracker.move('> ')\n  tracker.shift(2)\n  const value = state.indentLines(\n    state.containerFlow(node, tracker.current()),\n    map\n  )\n  exit()\n  return value\n}\n\n/** @type {Map} */\nfunction map(line, _, blank) {\n  return '>' + (blank ? '' : ' ') + line\n}\n","/**\n * @import {ConstructName, Unsafe} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {Array<ConstructName>} stack\n * @param {Unsafe} pattern\n * @returns {boolean}\n */\nexport function patternInScope(stack, pattern) {\n  return (\n    listInScope(stack, pattern.inConstruct, true) &&\n    !listInScope(stack, pattern.notInConstruct, false)\n  )\n}\n\n/**\n * @param {Array<ConstructName>} stack\n * @param {Unsafe['inConstruct']} list\n * @param {boolean} none\n * @returns {boolean}\n */\nfunction listInScope(stack, list, none) {\n  if (typeof list === 'string') {\n    list = [list]\n  }\n\n  if (!list || list.length === 0) {\n    return none\n  }\n\n  let index = -1\n\n  while (++index < list.length) {\n    if (stack.includes(list[index])) {\n      return true\n    }\n  }\n\n  return false\n}\n","/**\n * @import {Break, Parents} from 'mdast'\n * @import {Info, State} from 'mdast-util-to-markdown'\n */\n\nimport {patternInScope} from '../util/pattern-in-scope.js'\n\n/**\n * @param {Break} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function hardBreak(_, _1, state, info) {\n  let index = -1\n\n  while (++index < state.unsafe.length) {\n    // If we cant put eols in this construct (setext headings, tables), use a\n    // space instead.\n    if (\n      state.unsafe[index].character === '\\n' &&\n      patternInScope(state.stack, state.unsafe[index])\n    ) {\n      return /[ \\t]/.test(info.before) ? '' : ' '\n    }\n  }\n\n  return '\\\\\\n'\n}\n","/**\n * Get the count of the longest repeating streak of `substring` in `value`.\n *\n * @param {string} value\n *   Content to search in.\n * @param {string} substring\n *   Substring to look for, typically one character.\n * @returns {number}\n *   Count of most frequent adjacent `substring`s in `value`.\n */\nexport function longestStreak(value, substring) {\n  const source = String(value)\n  let index = source.indexOf(substring)\n  let expected = index\n  let count = 0\n  let max = 0\n\n  if (typeof substring !== 'string') {\n    throw new TypeError('Expected substring')\n  }\n\n  while (index !== -1) {\n    if (index === expected) {\n      if (++count > max) {\n        max = count\n      }\n    } else {\n      count = 1\n    }\n\n    expected = index + substring.length\n    index = source.indexOf(substring, expected)\n  }\n\n  return max\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Code} from 'mdast'\n */\n\n/**\n * @param {Code} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatCodeAsIndented(node, state) {\n  return Boolean(\n    state.options.fences === false &&\n      node.value &&\n      // If theres no info\n      !node.lang &&\n      // And theres a non-whitespace character\n      /[^ \\r\\n]/.test(node.value) &&\n      // And the value doesnt start or end in a blank\n      !/^[\\t ]*(?:[\\r\\n]|$)|(?:^|[\\r\\n])[\\t ]*$/.test(node.value)\n  )\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['fence'], null | undefined>}\n */\nexport function checkFence(state) {\n  const marker = state.options.fence || '`'\n\n  if (marker !== '`' && marker !== '~') {\n    throw new Error(\n      'Cannot serialize code with `' +\n        marker +\n        '` for `options.fence`, expected `` ` `` or `~`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n * @import {Code, Parents} from 'mdast'\n */\n\nimport {longestStreak} from 'longest-streak'\nimport {formatCodeAsIndented} from '../util/format-code-as-indented.js'\nimport {checkFence} from '../util/check-fence.js'\n\n/**\n * @param {Code} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function code(node, _, state, info) {\n  const marker = checkFence(state)\n  const raw = node.value || ''\n  const suffix = marker === '`' ? 'GraveAccent' : 'Tilde'\n\n  if (formatCodeAsIndented(node, state)) {\n    const exit = state.enter('codeIndented')\n    const value = state.indentLines(raw, map)\n    exit()\n    return value\n  }\n\n  const tracker = state.createTracker(info)\n  const sequence = marker.repeat(Math.max(longestStreak(raw, marker) + 1, 3))\n  const exit = state.enter('codeFenced')\n  let value = tracker.move(sequence)\n\n  if (node.lang) {\n    const subexit = state.enter(`codeFencedLang${suffix}`)\n    value += tracker.move(\n      state.safe(node.lang, {\n        before: value,\n        after: ' ',\n        encode: ['`'],\n        ...tracker.current()\n      })\n    )\n    subexit()\n  }\n\n  if (node.lang && node.meta) {\n    const subexit = state.enter(`codeFencedMeta${suffix}`)\n    value += tracker.move(' ')\n    value += tracker.move(\n      state.safe(node.meta, {\n        before: value,\n        after: '\\n',\n        encode: ['`'],\n        ...tracker.current()\n      })\n    )\n    subexit()\n  }\n\n  value += tracker.move('\\n')\n\n  if (raw) {\n    value += tracker.move(raw + '\\n')\n  }\n\n  value += tracker.move(sequence)\n  exit()\n  return value\n}\n\n/** @type {Map} */\nfunction map(line, _, blank) {\n  return (blank ? '' : '    ') + line\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['quote'], null | undefined>}\n */\nexport function checkQuote(state) {\n  const marker = state.options.quote || '\"'\n\n  if (marker !== '\"' && marker !== \"'\") {\n    throw new Error(\n      'Cannot serialize title with `' +\n        marker +\n        '` for `options.quote`, expected `\"`, or `\\'`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Definition, Parents} from 'mdast'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\n\n/**\n * @param {Definition} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function definition(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = state.enter('definition')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  value += tracker.move(\n    state.safe(state.associationId(node), {\n      before: value,\n      after: ']',\n      ...tracker.current()\n    })\n  )\n  value += tracker.move(']: ')\n\n  subexit()\n\n  if (\n    // If theres no url, or\n    !node.url ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : '\\n',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  exit()\n\n  return value\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['emphasis'], null | undefined>}\n */\nexport function checkEmphasis(state) {\n  const marker = state.options.emphasis || '*'\n\n  if (marker !== '*' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize emphasis with `' +\n        marker +\n        '` for `options.emphasis`, expected `*`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * Encode a code point as a character reference.\n *\n * @param {number} code\n *   Code point to encode.\n * @returns {string}\n *   Encoded character reference.\n */\nexport function encodeCharacterReference(code) {\n  return '&#x' + code.toString(16).toUpperCase() + ';'\n}\n","/**\n * @import {Code} from 'micromark-util-types'\n */\n\n/**\n * Check whether the character code represents an ASCII alpha (`a` through `z`,\n * case insensitive).\n *\n * An **ASCII alpha** is an ASCII upper alpha or ASCII lower alpha.\n *\n * An **ASCII upper alpha** is a character in the inclusive range U+0041 (`A`)\n * to U+005A (`Z`).\n *\n * An **ASCII lower alpha** is a character in the inclusive range U+0061 (`a`)\n * to U+007A (`z`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlpha = regexCheck(/[A-Za-z]/);\n\n/**\n * Check whether the character code represents an ASCII alphanumeric (`a`\n * through `z`, case insensitive, or `0` through `9`).\n *\n * An **ASCII alphanumeric** is an ASCII digit (see `asciiDigit`) or ASCII alpha\n * (see `asciiAlpha`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAlphanumeric = regexCheck(/[\\dA-Za-z]/);\n\n/**\n * Check whether the character code represents an ASCII atext.\n *\n * atext is an ASCII alphanumeric (see `asciiAlphanumeric`), or a character in\n * the inclusive ranges U+0023 NUMBER SIGN (`#`) to U+0027 APOSTROPHE (`'`),\n * U+002A ASTERISK (`*`), U+002B PLUS SIGN (`+`), U+002D DASH (`-`), U+002F\n * SLASH (`/`), U+003D EQUALS TO (`=`), U+003F QUESTION MARK (`?`), U+005E\n * CARET (`^`) to U+0060 GRAVE ACCENT (`` ` ``), or U+007B LEFT CURLY BRACE\n * (`{`) to U+007E TILDE (`~`).\n *\n * See:\n * **\\[RFC5322]**:\n * [Internet Message Format](https://tools.ietf.org/html/rfc5322).\n * P. Resnick.\n * IETF.\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiAtext = regexCheck(/[#-'*+\\--9=?A-Z^-~]/);\n\n/**\n * Check whether a character code is an ASCII control character.\n *\n * An **ASCII control** is a character in the inclusive range U+0000 NULL (NUL)\n * to U+001F (US), or U+007F (DEL).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function asciiControl(code) {\n  return (\n    // Special whitespace codes (which have negative values), C0 and Control\n    // character DEL\n    code !== null && (code < 32 || code === 127)\n  );\n}\n\n/**\n * Check whether the character code represents an ASCII digit (`0` through `9`).\n *\n * An **ASCII digit** is a character in the inclusive range U+0030 (`0`) to\n * U+0039 (`9`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiDigit = regexCheck(/\\d/);\n\n/**\n * Check whether the character code represents an ASCII hex digit (`a` through\n * `f`, case insensitive, or `0` through `9`).\n *\n * An **ASCII hex digit** is an ASCII digit (see `asciiDigit`), ASCII upper hex\n * digit, or an ASCII lower hex digit.\n *\n * An **ASCII upper hex digit** is a character in the inclusive range U+0041\n * (`A`) to U+0046 (`F`).\n *\n * An **ASCII lower hex digit** is a character in the inclusive range U+0061\n * (`a`) to U+0066 (`f`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiHexDigit = regexCheck(/[\\dA-Fa-f]/);\n\n/**\n * Check whether the character code represents ASCII punctuation.\n *\n * An **ASCII punctuation** is a character in the inclusive ranges U+0021\n * EXCLAMATION MARK (`!`) to U+002F SLASH (`/`), U+003A COLON (`:`) to U+0040 AT\n * SIGN (`@`), U+005B LEFT SQUARE BRACKET (`[`) to U+0060 GRAVE ACCENT\n * (`` ` ``), or U+007B LEFT CURLY BRACE (`{`) to U+007E TILDE (`~`).\n *\n * @param code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport const asciiPunctuation = regexCheck(/[!-/:-@[-`{-~]/);\n\n/**\n * Check whether a character code is a markdown line ending.\n *\n * A **markdown line ending** is the virtual characters M-0003 CARRIAGE RETURN\n * LINE FEED (CRLF), M-0004 LINE FEED (LF) and M-0005 CARRIAGE RETURN (CR).\n *\n * In micromark, the actual character U+000A LINE FEED (LF) and U+000D CARRIAGE\n * RETURN (CR) are replaced by these virtual characters depending on whether\n * they occurred together.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEnding(code) {\n  return code !== null && code < -2;\n}\n\n/**\n * Check whether a character code is a markdown line ending (see\n * `markdownLineEnding`) or markdown space (see `markdownSpace`).\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownLineEndingOrSpace(code) {\n  return code !== null && (code < 0 || code === 32);\n}\n\n/**\n * Check whether a character code is a markdown space.\n *\n * A **markdown space** is the concrete character U+0020 SPACE (SP) and the\n * virtual characters M-0001 VIRTUAL SPACE (VS) and M-0002 HORIZONTAL TAB (HT).\n *\n * In micromark, the actual character U+0009 CHARACTER TABULATION (HT) is\n * replaced by one M-0002 HORIZONTAL TAB (HT) and between 0 and 3 M-0001 VIRTUAL\n * SPACE (VS) characters, depending on the column at which the tab occurred.\n *\n * @param {Code} code\n *   Code.\n * @returns {boolean}\n *   Whether it matches.\n */\nexport function markdownSpace(code) {\n  return code === -2 || code === -1 || code === 32;\n}\n\n// Size note: removing ASCII from the regex and using `asciiPunctuation` here\n// In fact adds to the bundle size.\n/**\n * Check whether the character code represents Unicode punctuation.\n *\n * A **Unicode punctuation** is a character in the Unicode `Pc` (Punctuation,\n * Connector), `Pd` (Punctuation, Dash), `Pe` (Punctuation, Close), `Pf`\n * (Punctuation, Final quote), `Pi` (Punctuation, Initial quote), `Po`\n * (Punctuation, Other), or `Ps` (Punctuation, Open) categories, or an ASCII\n * punctuation (see `asciiPunctuation`).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodePunctuation = regexCheck(/\\p{P}|\\p{S}/u);\n\n/**\n * Check whether the character code represents Unicode whitespace.\n *\n * Note that this does handle micromark specific markdown whitespace characters.\n * See `markdownLineEndingOrSpace` to check that.\n *\n * A **Unicode whitespace** is a character in the Unicode `Zs` (Separator,\n * Space) category, or U+0009 CHARACTER TABULATION (HT), U+000A LINE FEED (LF),\n * U+000C (FF), or U+000D CARRIAGE RETURN (CR) (**\\[UNICODE]**).\n *\n * See:\n * **\\[UNICODE]**:\n * [The Unicode Standard](https://www.unicode.org/versions/).\n * Unicode Consortium.\n *\n * @param code\n *   Code.\n * @returns\n *   Whether it matches.\n */\nexport const unicodeWhitespace = regexCheck(/\\s/);\n\n/**\n * Create a code check from a regex.\n *\n * @param {RegExp} regex\n *   Expression.\n * @returns {(code: Code) => boolean}\n *   Check.\n */\nfunction regexCheck(regex) {\n  return check;\n\n  /**\n   * Check whether a code matches the bound regex.\n   *\n   * @param {Code} code\n   *   Character code.\n   * @returns {boolean}\n   *   Whether the character code matches the bound regex.\n   */\n  function check(code) {\n    return code !== null && code > -1 && regex.test(String.fromCharCode(code));\n  }\n}","/**\n * @import {Code} from 'micromark-util-types'\n */\n\nimport { markdownLineEndingOrSpace, unicodePunctuation, unicodeWhitespace } from 'micromark-util-character';\n/**\n * Classify whether a code represents whitespace, punctuation, or something\n * else.\n *\n * Used for attention (emphasis, strong), whose sequences can open or close\n * based on the class of surrounding characters.\n *\n * >  **Note**: eof (`null`) is seen as whitespace.\n *\n * @param {Code} code\n *   Code.\n * @returns {typeof constants.characterGroupWhitespace | typeof constants.characterGroupPunctuation | undefined}\n *   Group.\n */\nexport function classifyCharacter(code) {\n  if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n    return 1;\n  }\n  if (unicodePunctuation(code)) {\n    return 2;\n  }\n}","/**\n * @import {EncodeSides} from '../types.js'\n */\n\nimport {classifyCharacter} from 'micromark-util-classify-character'\n\n/**\n * Check whether to encode (as a character reference) the characters\n * surrounding an attention run.\n *\n * Which characters are around an attention run influence whether it works or\n * not.\n *\n * See <https://github.com/orgs/syntax-tree/discussions/60> for more info.\n * See this markdown in a particular renderer to see what works:\n *\n * ```markdown\n * |                         | A (letter inside) | B (punctuation inside) | C (whitespace inside) | D (nothing inside) |\n * | ----------------------- | ----------------- | ---------------------- | --------------------- | ------------------ |\n * | 1 (letter outside)      | x*y*z             | x*.*z                  | x* *z                 | x**z               |\n * | 2 (punctuation outside) | .*y*.             | .*.*.                  | .* *.                 | .**.               |\n * | 3 (whitespace outside)  | x *y* z           | x *.* z                | x * * z               | x ** z             |\n * | 4 (nothing outside)     | *x*               | *.*                    | * *                   | **                 |\n * ```\n *\n * @param {number} outside\n *   Code point on the outer side of the run.\n * @param {number} inside\n *   Code point on the inner side of the run.\n * @param {'*' | '_'} marker\n *   Marker of the run.\n *   Underscores are handled more strictly (they form less often) than\n *   asterisks.\n * @returns {EncodeSides}\n *   Whether to encode characters.\n */\n// Important: punctuation must never be encoded.\n// Punctuation is solely used by markdown constructs.\n// And by encoding itself.\n// Encoding them will break constructs or double encode things.\nexport function encodeInfo(outside, inside, marker) {\n  const outsideKind = classifyCharacter(outside)\n  const insideKind = classifyCharacter(inside)\n\n  // Letter outside:\n  if (outsideKind === undefined) {\n    return insideKind === undefined\n      ? // Letter inside:\n        // we have to encode *both* letters for `_` as it is looser.\n        // it already forms for `*` (and GFMs `~`).\n        marker === '_'\n        ? {inside: true, outside: true}\n        : {inside: false, outside: false}\n      : insideKind === 1\n        ? // Whitespace inside: encode both (letter, whitespace).\n          {inside: true, outside: true}\n        : // Punctuation inside: encode outer (letter)\n          {inside: false, outside: true}\n  }\n\n  // Whitespace outside:\n  if (outsideKind === 1) {\n    return insideKind === undefined\n      ? // Letter inside: already forms.\n        {inside: false, outside: false}\n      : insideKind === 1\n        ? // Whitespace inside: encode both (whitespace).\n          {inside: true, outside: true}\n        : // Punctuation inside: already forms.\n          {inside: false, outside: false}\n  }\n\n  // Punctuation outside:\n  return insideKind === undefined\n    ? // Letter inside: already forms.\n      {inside: false, outside: false}\n    : insideKind === 1\n      ? // Whitespace inside: encode inner (whitespace).\n        {inside: true, outside: false}\n      : // Punctuation inside: already forms.\n        {inside: false, outside: false}\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Emphasis, Parents} from 'mdast'\n */\n\nimport {checkEmphasis} from '../util/check-emphasis.js'\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {encodeInfo} from '../util/encode-info.js'\n\nemphasis.peek = emphasisPeek\n\n/**\n * @param {Emphasis} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function emphasis(node, _, state, info) {\n  const marker = checkEmphasis(state)\n  const exit = state.enter('emphasis')\n  const tracker = state.createTracker(info)\n  const before = tracker.move(marker)\n\n  let between = tracker.move(\n    state.containerPhrasing(node, {\n      after: marker,\n      before,\n      ...tracker.current()\n    })\n  )\n  const betweenHead = between.charCodeAt(0)\n  const open = encodeInfo(\n    info.before.charCodeAt(info.before.length - 1),\n    betweenHead,\n    marker\n  )\n\n  if (open.inside) {\n    between = encodeCharacterReference(betweenHead) + between.slice(1)\n  }\n\n  const betweenTail = between.charCodeAt(between.length - 1)\n  const close = encodeInfo(info.after.charCodeAt(0), betweenTail, marker)\n\n  if (close.inside) {\n    between = between.slice(0, -1) + encodeCharacterReference(betweenTail)\n  }\n\n  const after = tracker.move(marker)\n\n  exit()\n\n  state.attentionEncodeSurroundingInfo = {\n    after: close.outside,\n    before: open.outside\n  }\n  return before + between + after\n}\n\n/**\n * @param {Emphasis} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nfunction emphasisPeek(_, _1, state) {\n  return state.options.emphasis || '*'\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n */\n\n/**\n * @template Fn\n * @template Fallback\n * @typedef {Fn extends (value: any) => value is infer Thing ? Thing : Fallback} Predicate\n */\n\n/**\n * @callback Check\n *   Check that an arbitrary value is a node.\n * @param {unknown} this\n *   The given context.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The nodes parent.\n * @returns {boolean}\n *   Whether this is a node and passes a test.\n *\n * @typedef {Record<string, unknown> | Node} Props\n *   Object to check for equivalence.\n *\n *   Note: `Node` is included as it is common but is not indexable.\n *\n * @typedef {Array<Props | TestFunction | string> | Props | TestFunction | string | null | undefined} Test\n *   Check for an arbitrary node.\n *\n * @callback TestFunction\n *   Check if a node passes a test.\n * @param {unknown} this\n *   The given context.\n * @param {Node} node\n *   A node.\n * @param {number | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | undefined} [parent]\n *   The nodes parent.\n * @returns {boolean | undefined | void}\n *   Whether this node passes the test.\n *\n *   Note: `void` is included until TS sees no return as `undefined`.\n */\n\n/**\n * Check if `node` is a `Node` and whether it passes the given test.\n *\n * @param {unknown} node\n *   Thing to check, typically `Node`.\n * @param {Test} test\n *   A check for a specific node.\n * @param {number | null | undefined} index\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} parent\n *   The nodes parent.\n * @param {unknown} context\n *   Context object (`this`) to pass to `test` functions.\n * @returns {boolean}\n *   Whether `node` is a node and passes a test.\n */\nexport const is =\n  // Note: overloads in JSDoc cant yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(node: unknown, test: Condition, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((node?: null | undefined) => false) &\n   *   ((node: unknown, test?: null | undefined, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((node: unknown, test?: Test, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => boolean)\n   * )}\n   */\n  (\n    /**\n     * @param {unknown} [node]\n     * @param {Test} [test]\n     * @param {number | null | undefined} [index]\n     * @param {Parent | null | undefined} [parent]\n     * @param {unknown} [context]\n     * @returns {boolean}\n     */\n    // eslint-disable-next-line max-params\n    function (node, test, index, parent, context) {\n      const check = convert(test)\n\n      if (\n        index !== undefined &&\n        index !== null &&\n        (typeof index !== 'number' ||\n          index < 0 ||\n          index === Number.POSITIVE_INFINITY)\n      ) {\n        throw new Error('Expected positive finite index')\n      }\n\n      if (\n        parent !== undefined &&\n        parent !== null &&\n        (!is(parent) || !parent.children)\n      ) {\n        throw new Error('Expected parent node')\n      }\n\n      if (\n        (parent === undefined || parent === null) !==\n        (index === undefined || index === null)\n      ) {\n        throw new Error('Expected both parent and index')\n      }\n\n      return looksLikeANode(node)\n        ? check.call(context, node, index, parent)\n        : false\n    }\n  )\n\n/**\n * Generate an assertion from a test.\n *\n * Useful if youre going to test many nodes, for example when creating a\n * utility where something else passes a compatible test.\n *\n * The created function is a bit faster because it expects valid input only:\n * a `node`, `index`, and `parent`.\n *\n * @param {Test} test\n *   *   when nullish, checks if `node` is a `Node`.\n *   *   when `string`, works like passing `(node) => node.type === test`.\n *   *   when `function` checks if function passed the node is true.\n *   *   when `object`, checks that all keys in test are in node, and that they have (strictly) equal values.\n *   *   when `array`, checks if any one of the subtests pass.\n * @returns {Check}\n *   An assertion.\n */\nexport const convert =\n  // Note: overloads in JSDoc cant yet use different `@template`s.\n  /**\n   * @type {(\n   *   (<Condition extends string>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & {type: Condition}) &\n   *   (<Condition extends Props>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Condition) &\n   *   (<Condition extends TestFunction>(test: Condition) => (node: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node & Predicate<Condition, Node>) &\n   *   ((test?: null | undefined) => (node?: unknown, index?: number | null | undefined, parent?: Parent | null | undefined, context?: unknown) => node is Node) &\n   *   ((test?: Test) => Check)\n   * )}\n   */\n  (\n    /**\n     * @param {Test} [test]\n     * @returns {Check}\n     */\n    function (test) {\n      if (test === null || test === undefined) {\n        return ok\n      }\n\n      if (typeof test === 'function') {\n        return castFactory(test)\n      }\n\n      if (typeof test === 'object') {\n        return Array.isArray(test) ? anyFactory(test) : propsFactory(test)\n      }\n\n      if (typeof test === 'string') {\n        return typeFactory(test)\n      }\n\n      throw new Error('Expected function, string, or object as test')\n    }\n  )\n\n/**\n * @param {Array<Props | TestFunction | string>} tests\n * @returns {Check}\n */\nfunction anyFactory(tests) {\n  /** @type {Array<Check>} */\n  const checks = []\n  let index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return castFactory(any)\n\n  /**\n   * @this {unknown}\n   * @type {TestFunction}\n   */\n  function any(...parameters) {\n    let index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].apply(this, parameters)) return true\n    }\n\n    return false\n  }\n}\n\n/**\n * Turn an object into a test for a node with a certain fields.\n *\n * @param {Props} check\n * @returns {Check}\n */\nfunction propsFactory(check) {\n  const checkAsRecord = /** @type {Record<string, unknown>} */ (check)\n\n  return castFactory(all)\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function all(node) {\n    const nodeAsRecord = /** @type {Record<string, unknown>} */ (\n      /** @type {unknown} */ (node)\n    )\n\n    /** @type {string} */\n    let key\n\n    for (key in check) {\n      if (nodeAsRecord[key] !== checkAsRecord[key]) return false\n    }\n\n    return true\n  }\n}\n\n/**\n * Turn a string into a test for a node with a certain type.\n *\n * @param {string} check\n * @returns {Check}\n */\nfunction typeFactory(check) {\n  return castFactory(type)\n\n  /**\n   * @param {Node} node\n   */\n  function type(node) {\n    return node && node.type === check\n  }\n}\n\n/**\n * Turn a custom test into a test for a node that passes that test.\n *\n * @param {TestFunction} testFunction\n * @returns {Check}\n */\nfunction castFactory(testFunction) {\n  return check\n\n  /**\n   * @this {unknown}\n   * @type {Check}\n   */\n  function check(value, index, parent) {\n    return Boolean(\n      looksLikeANode(value) &&\n        testFunction.call(\n          this,\n          value,\n          typeof index === 'number' ? index : undefined,\n          parent || undefined\n        )\n    )\n  }\n}\n\nfunction ok() {\n  return true\n}\n\n/**\n * @param {unknown} value\n * @returns {value is Node}\n */\nfunction looksLikeANode(value) {\n  return value !== null && typeof value === 'object' && 'type' in value\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesnt work when publishing on npm.\n */\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {InternalAncestor<InclusiveDescendant<Tree>, Child>} Ancestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   >  **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesnt improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesnt hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {'skip' | boolean} Action\n *   Union of the action types.\n *\n * @typedef {number} Index\n *   Move to the sibling at `index` next (after node itself is completely\n *   traversed).\n *\n *   Useful if mutating the tree, such as removing the node the visitor is\n *   currently on, or any of its previous siblings.\n *   Results less than 0 or greater than or equal to `children.length` stop\n *   traversing the parent.\n *\n * @typedef {[(Action | null | undefined | void)?, (Index | null | undefined)?]} ActionTuple\n *   List with one or two values, the first an action, the second an index.\n *\n * @typedef {Action | ActionTuple | Index | null | undefined | void} VisitorResult\n *   Any value that can be returned from a visitor.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform the parent of node (the last of `ancestors`).\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of an ancestor still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Array<VisitedParents>} ancestors\n *   Ancestors of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [VisitedParents=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Matches<InclusiveDescendant<Tree>, Check>, Ancestor<Tree, Matches<InclusiveDescendant<Tree>, Check>>>} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parents`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Tree type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {convert} from 'unist-util-is'\nimport {color} from 'unist-util-visit-parents/do-not-use-color'\n\n/** @type {Readonly<ActionTuple>} */\nconst empty = []\n\n/**\n * Continue traversing as normal.\n */\nexport const CONTINUE = true\n\n/**\n * Stop traversing immediately.\n */\nexport const EXIT = false\n\n/**\n * Do not traverse this nodes children.\n */\nexport const SKIP = 'skip'\n\n/**\n * Visit nodes, with ancestral information.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} test\n *   `unist-util-is`-compatible test\n * @param {Visitor | boolean | null | undefined} [visitor]\n *   Handle each node.\n * @param {boolean | null | undefined} [reverse]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visitParents(tree, test, visitor, reverse) {\n  /** @type {Test} */\n  let check\n\n  if (typeof test === 'function' && typeof visitor !== 'function') {\n    reverse = visitor\n    // @ts-expect-error no visitor given, so `visitor` is test.\n    visitor = test\n  } else {\n    // @ts-expect-error visitor given, so `test` isnt a visitor.\n    check = test\n  }\n\n  const is = convert(check)\n  const step = reverse ? -1 : 1\n\n  factory(tree, undefined, [])()\n\n  /**\n   * @param {UnistNode} node\n   * @param {number | undefined} index\n   * @param {Array<UnistParent>} parents\n   */\n  function factory(node, index, parents) {\n    const value = /** @type {Record<string, unknown>} */ (\n      node && typeof node === 'object' ? node : {}\n    )\n\n    if (typeof value.type === 'string') {\n      const name =\n        // `hast`\n        typeof value.tagName === 'string'\n          ? value.tagName\n          : // `xast`\n          typeof value.name === 'string'\n          ? value.name\n          : undefined\n\n      Object.defineProperty(visit, 'name', {\n        value:\n          'node (' + color(node.type + (name ? '<' + name + '>' : '')) + ')'\n      })\n    }\n\n    return visit\n\n    function visit() {\n      /** @type {Readonly<ActionTuple>} */\n      let result = empty\n      /** @type {Readonly<ActionTuple>} */\n      let subresult\n      /** @type {number} */\n      let offset\n      /** @type {Array<UnistParent>} */\n      let grandparents\n\n      if (!test || is(node, index, parents[parents.length - 1] || undefined)) {\n        // @ts-expect-error: `visitor` is now a visitor.\n        result = toResult(visitor(node, parents))\n\n        if (result[0] === EXIT) {\n          return result\n        }\n      }\n\n      if ('children' in node && node.children) {\n        const nodeAsParent = /** @type {UnistParent} */ (node)\n\n        if (nodeAsParent.children && result[0] !== SKIP) {\n          offset = (reverse ? nodeAsParent.children.length : -1) + step\n          grandparents = parents.concat(nodeAsParent)\n\n          while (offset > -1 && offset < nodeAsParent.children.length) {\n            const child = nodeAsParent.children[offset]\n\n            subresult = factory(child, offset, grandparents)()\n\n            if (subresult[0] === EXIT) {\n              return subresult\n            }\n\n            offset =\n              typeof subresult[1] === 'number' ? subresult[1] : offset + step\n          }\n        }\n      }\n\n      return result\n    }\n  }\n}\n\n/**\n * Turn a return value into a clean result.\n *\n * @param {VisitorResult} value\n *   Valid return values from visitors.\n * @returns {Readonly<ActionTuple>}\n *   Clean result.\n */\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return value === null || value === undefined ? empty : [value]\n}\n","/**\n * @typedef {import('unist').Node} UnistNode\n * @typedef {import('unist').Parent} UnistParent\n * @typedef {import('unist-util-visit-parents').VisitorResult} VisitorResult\n */\n\n/**\n * @typedef {Exclude<import('unist-util-is').Test, undefined> | undefined} Test\n *   Test from `unist-util-is`.\n *\n *   Note: we have remove and add `undefined`, because otherwise when generating\n *   automatic `.d.ts` files, TS tries to flatten paths from a local perspective,\n *   which doesnt work when publishing on npm.\n */\n\n// To do: use types from `unist-util-visit-parents` when its released.\n\n/**\n * @typedef {(\n *   Fn extends (value: any) => value is infer Thing\n *   ? Thing\n *   : Fallback\n * )} Predicate\n *   Get the value of a type guard `Fn`.\n * @template Fn\n *   Value; typically function that is a type guard (such as `(x): x is Y`).\n * @template Fallback\n *   Value to yield if `Fn` is not a type guard.\n */\n\n/**\n * @typedef {(\n *   Check extends null | undefined // No test.\n *   ? Value\n *   : Value extends {type: Check} // String (type) test.\n *   ? Value\n *   : Value extends Check // Partial test.\n *   ? Value\n *   : Check extends Function // Function test.\n *   ? Predicate<Check, Value> extends Value\n *     ? Predicate<Check, Value>\n *     : never\n *   : never // Some other test?\n * )} MatchesOne\n *   Check whether a node matches a primitive check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test, but not arrays.\n */\n\n/**\n * @typedef {(\n *   Check extends Array<any>\n *   ? MatchesOne<Value, Check[keyof Check]>\n *   : MatchesOne<Value, Check>\n * )} Matches\n *   Check whether a node matches a check in the type system.\n * @template Value\n *   Value; typically unist `Node`.\n * @template Check\n *   Value; typically `unist-util-is`-compatible test.\n */\n\n/**\n * @typedef {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10} Uint\n *   Number; capped reasonably.\n */\n\n/**\n * @typedef {I extends 0 ? 1 : I extends 1 ? 2 : I extends 2 ? 3 : I extends 3 ? 4 : I extends 4 ? 5 : I extends 5 ? 6 : I extends 6 ? 7 : I extends 7 ? 8 : I extends 8 ? 9 : 10} Increment\n *   Increment a number in the type system.\n * @template {Uint} [I=0]\n *   Index.\n */\n\n/**\n * @typedef {(\n *   Node extends UnistParent\n *   ? Node extends {children: Array<infer Children>}\n *     ? Child extends Children ? Node : never\n *     : never\n *   : never\n * )} InternalParent\n *   Collect nodes that can be parents of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {InternalParent<InclusiveDescendant<Tree>, Child>} Parent\n *   Collect nodes in `Tree` that can be parents of `Child`.\n * @template {UnistNode} Tree\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n */\n\n/**\n * @typedef {(\n *   Depth extends Max\n *   ? never\n *   :\n *     | InternalParent<Node, Child>\n *     | InternalAncestor<Node, InternalParent<Node, Child>, Max, Increment<Depth>>\n * )} InternalAncestor\n *   Collect nodes in `Tree` that can be ancestors of `Child`.\n * @template {UnistNode} Node\n *   All node types in a tree.\n * @template {UnistNode} Child\n *   Node to search for.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @typedef {(\n *   Tree extends UnistParent\n *     ? Depth extends Max\n *       ? Tree\n *       : Tree | InclusiveDescendant<Tree['children'][number], Max, Increment<Depth>>\n *     : Tree\n * )} InclusiveDescendant\n *   Collect all (inclusive) descendants of `Tree`.\n *\n *   >  **Note**: for performance reasons, this seems to be the fastest way to\n *   > recurse without actually running into an infinite loop, which the\n *   > previous version did.\n *   >\n *   > Practically, a max of `2` is typically enough assuming a `Root` is\n *   > passed, but it doesnt improve performance.\n *   > It gets higher with `List > ListItem > Table > TableRow > TableCell`.\n *   > Using up to `10` doesnt hurt or help either.\n * @template {UnistNode} Tree\n *   Tree type.\n * @template {Uint} [Max=10]\n *   Max; searches up to this depth.\n * @template {Uint} [Depth=0]\n *   Current depth.\n */\n\n/**\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform `parent`.\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of `parent` still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Visited extends UnistNode ? number | undefined : never} index\n *   Index of `node` in `parent`.\n * @param {Ancestor extends UnistParent ? Ancestor | undefined : never} parent\n *   Parent of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n * @template {UnistNode} [Visited=UnistNode]\n *   Visited node type.\n * @template {UnistParent} [Ancestor=UnistParent]\n *   Ancestor type.\n */\n\n/**\n * @typedef {Visitor<Visited, Parent<Ancestor, Visited>>} BuildVisitorFromMatch\n *   Build a typed `Visitor` function from a node and all possible parents.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Visited\n *   Node type.\n * @template {UnistParent} Ancestor\n *   Parent type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromMatch<\n *     Matches<Descendant, Check>,\n *     Extract<Descendant, UnistParent>\n *   >\n * )} BuildVisitorFromDescendants\n *   Build a typed `Visitor` function from a list of descendants and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} Descendant\n *   Node type.\n * @template {Test} Check\n *   Test type.\n */\n\n/**\n * @typedef {(\n *   BuildVisitorFromDescendants<\n *     InclusiveDescendant<Tree>,\n *     Check\n *   >\n * )} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parent`.\n * @template {UnistNode} [Tree=UnistNode]\n *   Node type.\n * @template {Test} [Check=Test]\n *   Test type.\n */\n\nimport {visitParents} from 'unist-util-visit-parents'\n\nexport {CONTINUE, EXIT, SKIP} from 'unist-util-visit-parents'\n\n/**\n * Visit nodes.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @overload\n * @param {Tree} tree\n * @param {Check} check\n * @param {BuildVisitor<Tree, Check>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @overload\n * @param {Tree} tree\n * @param {BuildVisitor<Tree>} visitor\n * @param {boolean | null | undefined} [reverse]\n * @returns {undefined}\n *\n * @param {UnistNode} tree\n *   Tree to traverse.\n * @param {Visitor | Test} testOrVisitor\n *   `unist-util-is`-compatible test (optional, omit to pass a visitor).\n * @param {Visitor | boolean | null | undefined} [visitorOrReverse]\n *   Handle each node (when test is omitted, pass `reverse`).\n * @param {boolean | null | undefined} [maybeReverse=false]\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns {undefined}\n *   Nothing.\n *\n * @template {UnistNode} Tree\n *   Node type.\n * @template {Test} Check\n *   `unist-util-is`-compatible test.\n */\nexport function visit(tree, testOrVisitor, visitorOrReverse, maybeReverse) {\n  /** @type {boolean | null | undefined} */\n  let reverse\n  /** @type {Test} */\n  let test\n  /** @type {Visitor} */\n  let visitor\n\n  if (\n    typeof testOrVisitor === 'function' &&\n    typeof visitorOrReverse !== 'function'\n  ) {\n    test = undefined\n    visitor = testOrVisitor\n    reverse = visitorOrReverse\n  } else {\n    // @ts-expect-error: assume the overload with test was given.\n    test = testOrVisitor\n    // @ts-expect-error: assume the overload with test was given.\n    visitor = visitorOrReverse\n    reverse = maybeReverse\n  }\n\n  visitParents(tree, test, overload, reverse)\n\n  /**\n   * @param {UnistNode} node\n   * @param {Array<UnistParent>} parents\n   */\n  function overload(node, parents) {\n    const parent = parents[parents.length - 1]\n    const index = parent ? parent.children.indexOf(node) : undefined\n    return visitor(node, index, parent)\n  }\n}\n","/**\n * @typedef {import('mdast').Nodes} Nodes\n *\n * @typedef Options\n *   Configuration (optional).\n * @property {boolean | null | undefined} [includeImageAlt=true]\n *   Whether to use `alt` for `image`s (default: `true`).\n * @property {boolean | null | undefined} [includeHtml=true]\n *   Whether to use `value` of HTML (default: `true`).\n */\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Get the text content of a node or list of nodes.\n *\n * Prefers the nodes plain-text fields, otherwise serializes its children,\n * and if the given value is an array, serialize the nodes in it.\n *\n * @param {unknown} [value]\n *   Thing to serialize, typically `Node`.\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Serialized `value`.\n */\nexport function toString(value, options) {\n  const settings = options || emptyOptions\n  const includeImageAlt =\n    typeof settings.includeImageAlt === 'boolean'\n      ? settings.includeImageAlt\n      : true\n  const includeHtml =\n    typeof settings.includeHtml === 'boolean' ? settings.includeHtml : true\n\n  return one(value, includeImageAlt, includeHtml)\n}\n\n/**\n * One node or several nodes.\n *\n * @param {unknown} value\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized node.\n */\nfunction one(value, includeImageAlt, includeHtml) {\n  if (node(value)) {\n    if ('value' in value) {\n      return value.type === 'html' && !includeHtml ? '' : value.value\n    }\n\n    if (includeImageAlt && 'alt' in value && value.alt) {\n      return value.alt\n    }\n\n    if ('children' in value) {\n      return all(value.children, includeImageAlt, includeHtml)\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return all(value, includeImageAlt, includeHtml)\n  }\n\n  return ''\n}\n\n/**\n * Serialize a list of nodes.\n *\n * @param {Array<unknown>} values\n *   Thing to serialize.\n * @param {boolean} includeImageAlt\n *   Include image `alt`s.\n * @param {boolean} includeHtml\n *   Include HTML.\n * @returns {string}\n *   Serialized nodes.\n */\nfunction all(values, includeImageAlt, includeHtml) {\n  /** @type {Array<string>} */\n  const result = []\n  let index = -1\n\n  while (++index < values.length) {\n    result[index] = one(values[index], includeImageAlt, includeHtml)\n  }\n\n  return result.join('')\n}\n\n/**\n * Check if `value` looks like a node.\n *\n * @param {unknown} value\n *   Thing.\n * @returns {value is Nodes}\n *   Whether `value` is a node.\n */\nfunction node(value) {\n  return Boolean(value && typeof value === 'object')\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Heading} from 'mdast'\n */\n\nimport {EXIT, visit} from 'unist-util-visit'\nimport {toString} from 'mdast-util-to-string'\n\n/**\n * @param {Heading} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatHeadingAsSetext(node, state) {\n  let literalWithBreak = false\n\n  // Look for literals with a line break.\n  // Note that this also\n  visit(node, function (node) {\n    if (\n      ('value' in node && /\\r?\\n|\\r/.test(node.value)) ||\n      node.type === 'break'\n    ) {\n      literalWithBreak = true\n      return EXIT\n    }\n  })\n\n  return Boolean(\n    (!node.depth || node.depth < 3) &&\n      toString(node) &&\n      (state.options.setext || literalWithBreak)\n  )\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Heading, Parents} from 'mdast'\n */\n\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {formatHeadingAsSetext} from '../util/format-heading-as-setext.js'\n\n/**\n * @param {Heading} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function heading(node, _, state, info) {\n  const rank = Math.max(Math.min(6, node.depth || 1), 1)\n  const tracker = state.createTracker(info)\n\n  if (formatHeadingAsSetext(node, state)) {\n    const exit = state.enter('headingSetext')\n    const subexit = state.enter('phrasing')\n    const value = state.containerPhrasing(node, {\n      ...tracker.current(),\n      before: '\\n',\n      after: '\\n'\n    })\n    subexit()\n    exit()\n\n    return (\n      value +\n      '\\n' +\n      (rank === 1 ? '=' : '-').repeat(\n        // The whole size\n        value.length -\n          // Minus the position of the character after the last EOL (or\n          // 0 if there is none)\n          (Math.max(value.lastIndexOf('\\r'), value.lastIndexOf('\\n')) + 1)\n      )\n    )\n  }\n\n  const sequence = '#'.repeat(rank)\n  const exit = state.enter('headingAtx')\n  const subexit = state.enter('phrasing')\n\n  // Note: for proper tracking, we should reset the output positions when there\n  // is no content returned, because then the space is not output.\n  // Practically, in that case, there is no content, so it doesnt matter that\n  // weve tracked one too many characters.\n  tracker.move(sequence + ' ')\n\n  let value = state.containerPhrasing(node, {\n    before: '# ',\n    after: '\\n',\n    ...tracker.current()\n  })\n\n  if (/^[\\t ]/.test(value)) {\n    // To do: what effect has the character reference on tracking?\n    value = encodeCharacterReference(value.charCodeAt(0)) + value.slice(1)\n  }\n\n  value = value ? sequence + ' ' + value : sequence\n\n  if (state.options.closeAtx) {\n    value += ' ' + sequence\n  }\n\n  subexit()\n  exit()\n\n  return value\n}\n","/**\n * @import {Html} from 'mdast'\n */\n\nhtml.peek = htmlPeek\n\n/**\n * @param {Html} node\n * @returns {string}\n */\nexport function html(node) {\n  return node.value || ''\n}\n\n/**\n * @returns {string}\n */\nfunction htmlPeek() {\n  return '<'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Image, Parents} from 'mdast'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\n\nimage.peek = imagePeek\n\n/**\n * @param {Image} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function image(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = state.enter('image')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('![')\n  value += tracker.move(\n    state.safe(node.alt, {before: value, after: ']', ...tracker.current()})\n  )\n  value += tracker.move('](')\n\n  subexit()\n\n  if (\n    // If theres no url but there is a title\n    (!node.url && node.title) ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : ')',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  value += tracker.move(')')\n  exit()\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction imagePeek() {\n  return '!'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {ImageReference, Parents} from 'mdast'\n */\n\nimageReference.peek = imageReferencePeek\n\n/**\n * @param {ImageReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function imageReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('imageReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('![')\n  const alt = state.safe(node.alt, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(alt + '][')\n\n  subexit()\n  // Hide the fact that were in phrasing, because escapes dont work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesnt matter that\n  // weve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !alt || alt !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction imageReferencePeek() {\n  return '!'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {InlineCode, Parents} from 'mdast'\n */\n\ninlineCode.peek = inlineCodePeek\n\n/**\n * @param {InlineCode} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @returns {string}\n */\nexport function inlineCode(node, _, state) {\n  let value = node.value || ''\n  let sequence = '`'\n  let index = -1\n\n  // If there is a single grave accent on its own in the code, use a fence of\n  // two.\n  // If there are two in a row, use one.\n  while (new RegExp('(^|[^`])' + sequence + '([^`]|$)').test(value)) {\n    sequence += '`'\n  }\n\n  // If this is not just spaces or eols (tabs dont count), and either the\n  // first or last character are a space, eol, or tick, then pad with spaces.\n  if (\n    /[^ \\r\\n]/.test(value) &&\n    ((/^[ \\r\\n]/.test(value) && /[ \\r\\n]$/.test(value)) || /^`|`$/.test(value))\n  ) {\n    value = ' ' + value + ' '\n  }\n\n  // We have a potential problem: certain characters after eols could result in\n  // blocks being seen.\n  // For example, if someone injected the string `'\\n# b'`, then that would\n  // result in an ATX heading.\n  // We cant escape characters in `inlineCode`, but because eols are\n  // transformed to spaces when going from markdown to HTML anyway, we can swap\n  // them out.\n  while (++index < state.unsafe.length) {\n    const pattern = state.unsafe[index]\n    const expression = state.compilePattern(pattern)\n    /** @type {RegExpExecArray | null} */\n    let match\n\n    // Only look for `atBreak`s.\n    // Btw: note that `atBreak` patterns will always start the regex at LF or\n    // CR.\n    if (!pattern.atBreak) continue\n\n    while ((match = expression.exec(value))) {\n      let position = match.index\n\n      // Support CRLF (patterns only look for one of the characters).\n      if (\n        value.charCodeAt(position) === 10 /* `\\n` */ &&\n        value.charCodeAt(position - 1) === 13 /* `\\r` */\n      ) {\n        position--\n      }\n\n      value = value.slice(0, position) + ' ' + value.slice(match.index + 1)\n    }\n  }\n\n  return sequence + value + sequence\n}\n\n/**\n * @returns {string}\n */\nfunction inlineCodePeek() {\n  return '`'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Link} from 'mdast'\n */\n\nimport {toString} from 'mdast-util-to-string'\n\n/**\n * @param {Link} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatLinkAsAutolink(node, state) {\n  const raw = toString(node)\n\n  return Boolean(\n    !state.options.resourceLink &&\n      // If theres a url\n      node.url &&\n      // And theres a no title\n      !node.title &&\n      // And the content of `node` is a single text node\n      node.children &&\n      node.children.length === 1 &&\n      node.children[0].type === 'text' &&\n      // And if the url is the same as the content\n      (raw === node.url || 'mailto:' + raw === node.url) &&\n      // And that starts w/ a protocol\n      /^[a-z][a-z+.-]+:/i.test(node.url) &&\n      // And that doesnt contain ASCII control codes (character escapes and\n      // references dont work), space, or angle brackets\n      !/[\\0- <>\\u007F]/.test(node.url)\n  )\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Link, Parents} from 'mdast'\n * @import {Exit} from '../types.js'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\nimport {formatLinkAsAutolink} from '../util/format-link-as-autolink.js'\n\nlink.peek = linkPeek\n\n/**\n * @param {Link} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function link(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const tracker = state.createTracker(info)\n  /** @type {Exit} */\n  let exit\n  /** @type {Exit} */\n  let subexit\n\n  if (formatLinkAsAutolink(node, state)) {\n    // Hide the fact that were in phrasing, because escapes dont work.\n    const stack = state.stack\n    state.stack = []\n    exit = state.enter('autolink')\n    let value = tracker.move('<')\n    value += tracker.move(\n      state.containerPhrasing(node, {\n        before: value,\n        after: '>',\n        ...tracker.current()\n      })\n    )\n    value += tracker.move('>')\n    exit()\n    state.stack = stack\n    return value\n  }\n\n  exit = state.enter('link')\n  subexit = state.enter('label')\n  let value = tracker.move('[')\n  value += tracker.move(\n    state.containerPhrasing(node, {\n      before: value,\n      after: '](',\n      ...tracker.current()\n    })\n  )\n  value += tracker.move('](')\n  subexit()\n\n  if (\n    // If theres no url but there is a title\n    (!node.url && node.title) ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : ')',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  value += tracker.move(')')\n\n  exit()\n  return value\n}\n\n/**\n * @param {Link} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @returns {string}\n */\nfunction linkPeek(node, _, state) {\n  return formatLinkAsAutolink(node, state) ? '<' : '['\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {LinkReference, Parents} from 'mdast'\n */\n\nlinkReference.peek = linkReferencePeek\n\n/**\n * @param {LinkReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function linkReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('linkReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  const text = state.containerPhrasing(node, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(text + '][')\n\n  subexit()\n  // Hide the fact that were in phrasing, because escapes dont work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesnt matter that\n  // weve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !text || text !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction linkReferencePeek() {\n  return '['\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bullet'], null | undefined>}\n */\nexport function checkBullet(state) {\n  const marker = state.options.bullet || '*'\n\n  if (marker !== '*' && marker !== '+' && marker !== '-') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        marker +\n        '` for `options.bullet`, expected `*`, `+`, or `-`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\nimport {checkBullet} from './check-bullet.js'\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bullet'], null | undefined>}\n */\nexport function checkBulletOther(state) {\n  const bullet = checkBullet(state)\n  const bulletOther = state.options.bulletOther\n\n  if (!bulletOther) {\n    return bullet === '*' ? '-' : '*'\n  }\n\n  if (bulletOther !== '*' && bulletOther !== '+' && bulletOther !== '-') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        bulletOther +\n        '` for `options.bulletOther`, expected `*`, `+`, or `-`'\n    )\n  }\n\n  if (bulletOther === bullet) {\n    throw new Error(\n      'Expected `bullet` (`' +\n        bullet +\n        '`) and `bulletOther` (`' +\n        bulletOther +\n        '`) to be different'\n    )\n  }\n\n  return bulletOther\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bulletOrdered'], null | undefined>}\n */\nexport function checkBulletOrdered(state) {\n  const marker = state.options.bulletOrdered || '.'\n\n  if (marker !== '.' && marker !== ')') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        marker +\n        '` for `options.bulletOrdered`, expected `.` or `)`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['rule'], null | undefined>}\n */\nexport function checkRule(state) {\n  const marker = state.options.rule || '*'\n\n  if (marker !== '*' && marker !== '-' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize rules with `' +\n        marker +\n        '` for `options.rule`, expected `*`, `-`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {List, Parents} from 'mdast'\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkBulletOther} from '../util/check-bullet-other.js'\nimport {checkBulletOrdered} from '../util/check-bullet-ordered.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @param {List} node\n * @param {Parents | undefined} parent\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function list(node, parent, state, info) {\n  const exit = state.enter('list')\n  const bulletCurrent = state.bulletCurrent\n  /** @type {string} */\n  let bullet = node.ordered ? checkBulletOrdered(state) : checkBullet(state)\n  /** @type {string} */\n  const bulletOther = node.ordered\n    ? bullet === '.'\n      ? ')'\n      : '.'\n    : checkBulletOther(state)\n  let useDifferentMarker =\n    parent && state.bulletLastUsed ? bullet === state.bulletLastUsed : false\n\n  if (!node.ordered) {\n    const firstListItem = node.children ? node.children[0] : undefined\n\n    // If theres an empty first list item directly in two list items,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * - *\n    // ```\n    //\n    // because otherwise it would become one big thematic break.\n    if (\n      // Bullet could be used as a thematic break marker:\n      (bullet === '*' || bullet === '-') &&\n      // Empty first list item:\n      firstListItem &&\n      (!firstListItem.children || !firstListItem.children[0]) &&\n      // Directly in two other list items:\n      state.stack[state.stack.length - 1] === 'list' &&\n      state.stack[state.stack.length - 2] === 'listItem' &&\n      state.stack[state.stack.length - 3] === 'list' &&\n      state.stack[state.stack.length - 4] === 'listItem' &&\n      // That are each the first child.\n      state.indexStack[state.indexStack.length - 1] === 0 &&\n      state.indexStack[state.indexStack.length - 2] === 0 &&\n      state.indexStack[state.indexStack.length - 3] === 0\n    ) {\n      useDifferentMarker = true\n    }\n\n    // If theres a thematic break at the start of the first list item,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * ---\n    // ```\n    //\n    // because otherwise it would become one big thematic break.\n    if (checkRule(state) === bullet && firstListItem) {\n      let index = -1\n\n      while (++index < node.children.length) {\n        const item = node.children[index]\n\n        if (\n          item &&\n          item.type === 'listItem' &&\n          item.children &&\n          item.children[0] &&\n          item.children[0].type === 'thematicBreak'\n        ) {\n          useDifferentMarker = true\n          break\n        }\n      }\n    }\n  }\n\n  if (useDifferentMarker) {\n    bullet = bulletOther\n  }\n\n  state.bulletCurrent = bullet\n  const value = state.containerFlow(node, info)\n  state.bulletLastUsed = bullet\n  state.bulletCurrent = bulletCurrent\n  exit()\n  return value\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['listItemIndent'], null | undefined>}\n */\nexport function checkListItemIndent(state) {\n  const style = state.options.listItemIndent || 'one'\n\n  if (style !== 'tab' && style !== 'one' && style !== 'mixed') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        style +\n        '` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`'\n    )\n  }\n\n  return style\n}\n","/**\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n * @import {ListItem, Parents} from 'mdast'\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkListItemIndent} from '../util/check-list-item-indent.js'\n\n/**\n * @param {ListItem} node\n * @param {Parents | undefined} parent\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function listItem(node, parent, state, info) {\n  const listItemIndent = checkListItemIndent(state)\n  let bullet = state.bulletCurrent || checkBullet(state)\n\n  // Add the marker value for ordered lists.\n  if (parent && parent.type === 'list' && parent.ordered) {\n    bullet =\n      (typeof parent.start === 'number' && parent.start > -1\n        ? parent.start\n        : 1) +\n      (state.options.incrementListMarker === false\n        ? 0\n        : parent.children.indexOf(node)) +\n      bullet\n  }\n\n  let size = bullet.length + 1\n\n  if (\n    listItemIndent === 'tab' ||\n    (listItemIndent === 'mixed' &&\n      ((parent && parent.type === 'list' && parent.spread) || node.spread))\n  ) {\n    size = Math.ceil(size / 4) * 4\n  }\n\n  const tracker = state.createTracker(info)\n  tracker.move(bullet + ' '.repeat(size - bullet.length))\n  tracker.shift(size)\n  const exit = state.enter('listItem')\n  const value = state.indentLines(\n    state.containerFlow(node, tracker.current()),\n    map\n  )\n  exit()\n\n  return value\n\n  /** @type {Map} */\n  function map(line, index, blank) {\n    if (index) {\n      return (blank ? '' : ' '.repeat(size)) + line\n    }\n\n    return (blank ? bullet : bullet + ' '.repeat(size - bullet.length)) + line\n  }\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Paragraph, Parents} from 'mdast'\n */\n\n/**\n * @param {Paragraph} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function paragraph(node, _, state, info) {\n  const exit = state.enter('paragraph')\n  const subexit = state.enter('phrasing')\n  const value = state.containerPhrasing(node, info)\n  subexit()\n  exit()\n  return value\n}\n","/**\n * @typedef {import('mdast').Html} Html\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n */\n\nimport {convert} from 'unist-util-is'\n\n/**\n * Check if the given value is *phrasing content*.\n *\n * >  **Note**: Excludes `html`, which can be both phrasing or flow.\n *\n * @param node\n *   Thing to check, typically `Node`.\n * @returns\n *   Whether `value` is phrasing content.\n */\n\nexport const phrasing =\n  /** @type {(node?: unknown) => node is Exclude<PhrasingContent, Html>} */\n  (\n    convert([\n      'break',\n      'delete',\n      'emphasis',\n      // To do: next major: removed since footnotes were added to GFM.\n      'footnote',\n      'footnoteReference',\n      'image',\n      'imageReference',\n      'inlineCode',\n      // Enabled by `mdast-util-math`:\n      'inlineMath',\n      'link',\n      'linkReference',\n      // Enabled by `mdast-util-mdx`:\n      'mdxJsxTextElement',\n      // Enabled by `mdast-util-mdx`:\n      'mdxTextExpression',\n      'strong',\n      'text',\n      // Enabled by `mdast-util-directive`:\n      'textDirective'\n    ])\n  )\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Root} from 'mdast'\n */\n\nimport {phrasing} from 'mdast-util-phrasing'\n\n/**\n * @param {Root} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function root(node, _, state, info) {\n  // Note: `html` nodes are ambiguous.\n  const hasPhrasing = node.children.some(function (d) {\n    return phrasing(d)\n  })\n\n  const container = hasPhrasing ? state.containerPhrasing : state.containerFlow\n  return container.call(state, node, info)\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['strong'], null | undefined>}\n */\nexport function checkStrong(state) {\n  const marker = state.options.strong || '*'\n\n  if (marker !== '*' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize strong with `' +\n        marker +\n        '` for `options.strong`, expected `*`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Strong} from 'mdast'\n */\n\nimport {checkStrong} from '../util/check-strong.js'\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {encodeInfo} from '../util/encode-info.js'\n\nstrong.peek = strongPeek\n\n/**\n * @param {Strong} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function strong(node, _, state, info) {\n  const marker = checkStrong(state)\n  const exit = state.enter('strong')\n  const tracker = state.createTracker(info)\n  const before = tracker.move(marker + marker)\n\n  let between = tracker.move(\n    state.containerPhrasing(node, {\n      after: marker,\n      before,\n      ...tracker.current()\n    })\n  )\n  const betweenHead = between.charCodeAt(0)\n  const open = encodeInfo(\n    info.before.charCodeAt(info.before.length - 1),\n    betweenHead,\n    marker\n  )\n\n  if (open.inside) {\n    between = encodeCharacterReference(betweenHead) + between.slice(1)\n  }\n\n  const betweenTail = between.charCodeAt(between.length - 1)\n  const close = encodeInfo(info.after.charCodeAt(0), betweenTail, marker)\n\n  if (close.inside) {\n    between = between.slice(0, -1) + encodeCharacterReference(betweenTail)\n  }\n\n  const after = tracker.move(marker + marker)\n\n  exit()\n\n  state.attentionEncodeSurroundingInfo = {\n    after: close.outside,\n    before: open.outside\n  }\n  return before + between + after\n}\n\n/**\n * @param {Strong} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nfunction strongPeek(_, _1, state) {\n  return state.options.strong || '*'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Text} from 'mdast'\n */\n\n/**\n * @param {Text} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function text(node, _, state, info) {\n  return state.safe(node.value, info)\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['ruleRepetition'], null | undefined>}\n */\nexport function checkRuleRepetition(state) {\n  const repetition = state.options.ruleRepetition || 3\n\n  if (repetition < 3) {\n    throw new Error(\n      'Cannot serialize rules with repetition `' +\n        repetition +\n        '` for `options.ruleRepetition`, expected `3` or more'\n    )\n  }\n\n  return repetition\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Parents, ThematicBreak} from 'mdast'\n */\n\nimport {checkRuleRepetition} from '../util/check-rule-repetition.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @param {ThematicBreak} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nexport function thematicBreak(_, _1, state) {\n  const value = (\n    checkRule(state) + (state.options.ruleSpaces ? ' ' : '')\n  ).repeat(checkRuleRepetition(state))\n\n  return state.options.ruleSpaces ? value.slice(0, -1) : value\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {definition} from './definition.js'\nimport {emphasis} from './emphasis.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {image} from './image.js'\nimport {imageReference} from './image-reference.js'\nimport {inlineCode} from './inline-code.js'\nimport {link} from './link.js'\nimport {linkReference} from './link-reference.js'\nimport {list} from './list.js'\nimport {listItem} from './list-item.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/**\n * Default (CommonMark) handlers.\n */\nexport const handle = {\n  blockquote,\n  break: hardBreak,\n  code,\n  definition,\n  emphasis,\n  hardBreak,\n  heading,\n  html,\n  image,\n  imageReference,\n  inlineCode,\n  link,\n  linkReference,\n  list,\n  listItem,\n  paragraph,\n  root,\n  strong,\n  text,\n  thematicBreak\n}\n","/**\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('mdast').Table} Table\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('mdast').TableRow} TableRow\n *\n * @typedef {import('markdown-table').Options} MarkdownTableOptions\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n *\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').State} State\n * @typedef {import('mdast-util-to-markdown').Info} Info\n */\n\n/**\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [tableCellPadding=true]\n *   Whether to add a space of padding between delimiters and cells (default:\n *   `true`).\n * @property {boolean | null | undefined} [tablePipeAlign=true]\n *   Whether to align the delimiters (default: `true`).\n * @property {MarkdownTableOptions['stringLength'] | null | undefined} [stringLength]\n *   Function to detect the length of table cell content, used when aligning\n *   the delimiters between cells (optional).\n */\n\nimport {ok as assert} from 'devlop'\nimport {markdownTable} from 'markdown-table'\nimport {defaultHandlers} from 'mdast-util-to-markdown'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM tables in\n * markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM tables.\n */\nexport function gfmTableFromMarkdown() {\n  return {\n    enter: {\n      table: enterTable,\n      tableData: enterCell,\n      tableHeader: enterCell,\n      tableRow: enterRow\n    },\n    exit: {\n      codeText: exitCodeText,\n      table: exitTable,\n      tableData: exit,\n      tableHeader: exit,\n      tableRow: exit\n    }\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterTable(token) {\n  const align = token._align\n  assert(align, 'expected `_align` on table')\n  this.enter(\n    {\n      type: 'table',\n      align: align.map(function (d) {\n        return d === 'none' ? null : d\n      }),\n      children: []\n    },\n    token\n  )\n  this.data.inTable = true\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitTable(token) {\n  this.exit(token)\n  this.data.inTable = undefined\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterRow(token) {\n  this.enter({type: 'tableRow', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exit(token) {\n  this.exit(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterCell(token) {\n  this.enter({type: 'tableCell', children: []}, token)\n}\n\n// Overwrite the default code text data handler to unescape escaped pipes when\n// they are in tables.\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitCodeText(token) {\n  let value = this.resume()\n\n  if (this.data.inTable) {\n    value = value.replace(/\\\\([\\\\|])/g, replace)\n  }\n\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'inlineCode')\n  node.value = value\n  this.exit(token)\n}\n\n/**\n * @param {string} $0\n * @param {string} $1\n * @returns {string}\n */\nfunction replace($0, $1) {\n  // Pipes work, backslashes dont (but cant escape pipes).\n  return $1 === '|' ? $1 : $0\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM tables in\n * markdown.\n *\n * @param {Options | null | undefined} [options]\n *   Configuration.\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM tables.\n */\nexport function gfmTableToMarkdown(options) {\n  const settings = options || {}\n  const padding = settings.tableCellPadding\n  const alignDelimiters = settings.tablePipeAlign\n  const stringLength = settings.stringLength\n  const around = padding ? ' ' : '|'\n\n  return {\n    unsafe: [\n      {character: '\\r', inConstruct: 'tableCell'},\n      {character: '\\n', inConstruct: 'tableCell'},\n      // A pipe, when followed by a tab or space (padding), or a dash or colon\n      // (unpadded delimiter row), could result in a table.\n      {atBreak: true, character: '|', after: '[\\t :-]'},\n      // A pipe in a cell must be encoded.\n      {character: '|', inConstruct: 'tableCell'},\n      // A colon must be followed by a dash, in which case it could start a\n      // delimiter row.\n      {atBreak: true, character: ':', after: '-'},\n      // A delimiter row can also start with a dash, when followed by more\n      // dashes, a colon, or a pipe.\n      // This is a stricter version than the built in check for lists, thematic\n      // breaks, and setex heading underlines though:\n      // <https://github.com/syntax-tree/mdast-util-to-markdown/blob/51a2038/lib/unsafe.js#L57>\n      {atBreak: true, character: '-', after: '[:|-]'}\n    ],\n    handlers: {\n      inlineCode: inlineCodeWithTable,\n      table: handleTable,\n      tableCell: handleTableCell,\n      tableRow: handleTableRow\n    }\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {Table} node\n   */\n  function handleTable(node, _, state, info) {\n    return serializeData(handleTableAsData(node, state, info), node.align)\n  }\n\n  /**\n   * This function isnt really used normally, because we handle rows at the\n   * table level.\n   * But, if someone passes in a table row, this ensures we make somewhat sense.\n   *\n   * @type {ToMarkdownHandle}\n   * @param {TableRow} node\n   */\n  function handleTableRow(node, _, state, info) {\n    const row = handleTableRowAsData(node, state, info)\n    const value = serializeData([row])\n    // `markdown-table` will always add an align row\n    return value.slice(0, value.indexOf('\\n'))\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {TableCell} node\n   */\n  function handleTableCell(node, _, state, info) {\n    const exit = state.enter('tableCell')\n    const subexit = state.enter('phrasing')\n    const value = state.containerPhrasing(node, {\n      ...info,\n      before: around,\n      after: around\n    })\n    subexit()\n    exit()\n    return value\n  }\n\n  /**\n   * @param {Array<Array<string>>} matrix\n   * @param {Array<string | null | undefined> | null | undefined} [align]\n   */\n  function serializeData(matrix, align) {\n    return markdownTable(matrix, {\n      align,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      alignDelimiters,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      padding,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      stringLength\n    })\n  }\n\n  /**\n   * @param {Table} node\n   * @param {State} state\n   * @param {Info} info\n   */\n  function handleTableAsData(node, state, info) {\n    const children = node.children\n    let index = -1\n    /** @type {Array<Array<string>>} */\n    const result = []\n    const subexit = state.enter('table')\n\n    while (++index < children.length) {\n      result[index] = handleTableRowAsData(children[index], state, info)\n    }\n\n    subexit()\n\n    return result\n  }\n\n  /**\n   * @param {TableRow} node\n   * @param {State} state\n   * @param {Info} info\n   */\n  function handleTableRowAsData(node, state, info) {\n    const children = node.children\n    let index = -1\n    /** @type {Array<string>} */\n    const result = []\n    const subexit = state.enter('tableRow')\n\n    while (++index < children.length) {\n      // Note: the positional info as used here is incorrect.\n      // Making it correct would be impossible due to aligning cells?\n      // And it would need copy/pasting `markdown-table` into this project.\n      result[index] = handleTableCell(children[index], node, state, info)\n    }\n\n    subexit()\n\n    return result\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {InlineCode} node\n   */\n  function inlineCodeWithTable(node, parent, state) {\n    let value = defaultHandlers.inlineCode(node, parent, state)\n\n    if (state.stack.includes('tableCell')) {\n      value = value.replace(/\\|/g, '\\\\$&')\n    }\n\n    return value\n  }\n}\n","/**\n * Like `Array#splice`, but smarter for giant arrays.\n *\n * `Array#splice` takes all items to be inserted as individual argument which\n * causes a stack overflow in V8 when trying to insert 100k items for instance.\n *\n * Otherwise, this does not return the removed items, and takes `items` as an\n * array instead of rest parameters.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {number} start\n *   Index to remove/insert at (can be negative).\n * @param {number} remove\n *   Number of items to remove.\n * @param {Array<T>} items\n *   Items to inject into `list`.\n * @returns {undefined}\n *   Nothing.\n */\nexport function splice(list, start, remove, items) {\n  const end = list.length;\n  let chunkStart = 0;\n  /** @type {Array<unknown>} */\n  let parameters;\n\n  // Make start between zero and `end` (included).\n  if (start < 0) {\n    start = -start > end ? 0 : end + start;\n  } else {\n    start = start > end ? end : start;\n  }\n  remove = remove > 0 ? remove : 0;\n\n  // No need to chunk the items if theres only a couple (10k) items.\n  if (items.length < 10000) {\n    parameters = Array.from(items);\n    parameters.unshift(start, remove);\n    // @ts-expect-error Hush, its fine.\n    list.splice(...parameters);\n  } else {\n    // Delete `remove` items starting from `start`\n    if (remove) list.splice(start, remove);\n\n    // Insert the items in chunks to not cause stack overflows.\n    while (chunkStart < items.length) {\n      parameters = items.slice(chunkStart, chunkStart + 10000);\n      parameters.unshift(start, 0);\n      // @ts-expect-error Hush, its fine.\n      list.splice(...parameters);\n      chunkStart += 10000;\n      start += 10000;\n    }\n  }\n}\n\n/**\n * Append `items` (an array) at the end of `list` (another array).\n * When `list` was empty, returns `items` instead.\n *\n * This prevents a potentially expensive operation when `list` is empty,\n * and adds items in batches to prevent V8 from hanging.\n *\n * @template {unknown} T\n *   Item type.\n * @param {Array<T>} list\n *   List to operate on.\n * @param {Array<T>} items\n *   Items to add to `list`.\n * @returns {Array<T>}\n *   Either `list` or `items`.\n */\nexport function push(list, items) {\n  if (list.length > 0) {\n    splice(list, list.length, 0, items);\n    return list;\n  }\n  return items;\n}","/**\n * @import {\n *   Extension,\n *   Handles,\n *   HtmlExtension,\n *   NormalizedExtension\n * } from 'micromark-util-types'\n */\n\nimport {splice} from 'micromark-util-chunked'\n\nconst hasOwnProperty = {}.hasOwnProperty\n\n/**\n * Combine multiple syntax extensions into one.\n *\n * @param {ReadonlyArray<Extension>} extensions\n *   List of syntax extensions.\n * @returns {NormalizedExtension}\n *   A single combined extension.\n */\nexport function combineExtensions(extensions) {\n  /** @type {NormalizedExtension} */\n  const all = {}\n  let index = -1\n\n  while (++index < extensions.length) {\n    syntaxExtension(all, extensions[index])\n  }\n\n  return all\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {NormalizedExtension} all\n *   Extension to merge into.\n * @param {Extension} extension\n *   Extension to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction syntaxExtension(all, extension) {\n  /** @type {keyof Extension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    /** @type {Record<string, unknown>} */\n    const left = maybe || (all[hook] = {})\n    /** @type {Record<string, unknown> | undefined} */\n    const right = extension[hook]\n    /** @type {string} */\n    let code\n\n    if (right) {\n      for (code in right) {\n        if (!hasOwnProperty.call(left, code)) left[code] = []\n        const value = right[code]\n        constructs(\n          // @ts-expect-error Looks like a list.\n          left[code],\n          Array.isArray(value) ? value : value ? [value] : []\n        )\n      }\n    }\n  }\n}\n\n/**\n * Merge `list` into `existing` (both lists of constructs).\n * Mutates `existing`.\n *\n * @param {Array<unknown>} existing\n *   List of constructs to merge into.\n * @param {Array<unknown>} list\n *   List of constructs to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction constructs(existing, list) {\n  let index = -1\n  /** @type {Array<unknown>} */\n  const before = []\n\n  while (++index < list.length) {\n    // @ts-expect-error Looks like an object.\n    ;(list[index].add === 'after' ? existing : before).push(list[index])\n  }\n\n  splice(existing, 0, 0, before)\n}\n\n/**\n * Combine multiple HTML extensions into one.\n *\n * @param {ReadonlyArray<HtmlExtension>} htmlExtensions\n *   List of HTML extensions.\n * @returns {HtmlExtension}\n *   Single combined HTML extension.\n */\nexport function combineHtmlExtensions(htmlExtensions) {\n  /** @type {HtmlExtension} */\n  const handlers = {}\n  let index = -1\n\n  while (++index < htmlExtensions.length) {\n    htmlExtension(handlers, htmlExtensions[index])\n  }\n\n  return handlers\n}\n\n/**\n * Merge `extension` into `all`.\n *\n * @param {HtmlExtension} all\n *   Extension to merge into.\n * @param {HtmlExtension} extension\n *   Extension to merge.\n * @returns {undefined}\n *   Nothing.\n */\nfunction htmlExtension(all, extension) {\n  /** @type {keyof HtmlExtension} */\n  let hook\n\n  for (hook in extension) {\n    const maybe = hasOwnProperty.call(all, hook) ? all[hook] : undefined\n    const left = maybe || (all[hook] = {})\n    const right = extension[hook]\n    /** @type {keyof Handles} */\n    let type\n\n    if (right) {\n      for (type in right) {\n        // @ts-expect-error assume document vs regular handler are managed correctly.\n        left[type] = right[type]\n      }\n    }\n  }\n}\n","/**\n * @import {Code, ConstructRecord, Event, Extension, Previous, State, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { asciiAlpha, asciiAlphanumeric, asciiControl, markdownLineEndingOrSpace, unicodePunctuation, unicodeWhitespace } from 'micromark-util-character';\nconst wwwPrefix = {\n  tokenize: tokenizeWwwPrefix,\n  partial: true\n};\nconst domain = {\n  tokenize: tokenizeDomain,\n  partial: true\n};\nconst path = {\n  tokenize: tokenizePath,\n  partial: true\n};\nconst trail = {\n  tokenize: tokenizeTrail,\n  partial: true\n};\nconst emailDomainDotTrail = {\n  tokenize: tokenizeEmailDomainDotTrail,\n  partial: true\n};\nconst wwwAutolink = {\n  name: 'wwwAutolink',\n  tokenize: tokenizeWwwAutolink,\n  previous: previousWww\n};\nconst protocolAutolink = {\n  name: 'protocolAutolink',\n  tokenize: tokenizeProtocolAutolink,\n  previous: previousProtocol\n};\nconst emailAutolink = {\n  name: 'emailAutolink',\n  tokenize: tokenizeEmailAutolink,\n  previous: previousEmail\n};\n\n/** @type {ConstructRecord} */\nconst text = {};\n\n/**\n * Create an extension for `micromark` to support GitHub autolink literal\n * syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   autolink literal syntax.\n */\nexport function gfmAutolinkLiteral() {\n  return {\n    text\n  };\n}\n\n/** @type {Code} */\nlet code = 48;\n\n// Add alphanumerics.\nwhile (code < 123) {\n  text[code] = emailAutolink;\n  code++;\n  if (code === 58) code = 65;else if (code === 91) code = 97;\n}\ntext[43] = emailAutolink;\ntext[45] = emailAutolink;\ntext[46] = emailAutolink;\ntext[95] = emailAutolink;\ntext[72] = [emailAutolink, protocolAutolink];\ntext[104] = [emailAutolink, protocolAutolink];\ntext[87] = [emailAutolink, wwwAutolink];\ntext[119] = [emailAutolink, wwwAutolink];\n\n// To do: perform email autolink literals on events, afterwards.\n// Thats where `markdown-rs` and `cmark-gfm` perform it.\n// It should look for `@`, then for atext backwards, and then for a label\n// forwards.\n// To do: `mailto:`, `xmpp:` protocol as prefix.\n\n/**\n * Email autolink literal.\n *\n * ```markdown\n * > | a contact@example.org b\n *       ^^^^^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeEmailAutolink(effects, ok, nok) {\n  const self = this;\n  /** @type {boolean | undefined} */\n  let dot;\n  /** @type {boolean} */\n  let data;\n  return start;\n\n  /**\n   * Start of email autolink literal.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (!gfmAtext(code) || !previousEmail.call(self, self.previous) || previousUnbalanced(self.events)) {\n      return nok(code);\n    }\n    effects.enter('literalAutolink');\n    effects.enter('literalAutolinkEmail');\n    return atext(code);\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atext(code) {\n    if (gfmAtext(code)) {\n      effects.consume(code);\n      return atext;\n    }\n    if (code === 64) {\n      effects.consume(code);\n      return emailDomain;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In email domain.\n   *\n   * The reference code is a bit overly complex as it handles the `@`, of which\n   * there may be just one.\n   * Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L318>\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomain(code) {\n    // Dot followed by alphanumerical (not `-` or `_`).\n    if (code === 46) {\n      return effects.check(emailDomainDotTrail, emailDomainAfter, emailDomainDot)(code);\n    }\n\n    // Alphanumerical, `-`, and `_`.\n    if (code === 45 || code === 95 || asciiAlphanumeric(code)) {\n      data = true;\n      effects.consume(code);\n      return emailDomain;\n    }\n\n    // To do: `/` if xmpp.\n\n    // Note: normally wed truncate trailing punctuation from the link.\n    // However, email autolink literals cannot contain any of those markers,\n    // except for `.`, but that can only occur if it isnt trailing.\n    // So we can ignore truncating!\n    return emailDomainAfter(code);\n  }\n\n  /**\n   * In email domain, on dot that is not a trail.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *                      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomainDot(code) {\n    effects.consume(code);\n    dot = true;\n    return emailDomain;\n  }\n\n  /**\n   * After email domain.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomainAfter(code) {\n    // Domain must not be empty, must include a dot, and must end in alphabetical.\n    // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L332>.\n    if (data && dot && asciiAlpha(self.previous)) {\n      effects.exit('literalAutolinkEmail');\n      effects.exit('literalAutolink');\n      return ok(code);\n    }\n    return nok(code);\n  }\n}\n\n/**\n * `www` autolink literal.\n *\n * ```markdown\n * > | a www.example.org b\n *       ^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeWwwAutolink(effects, ok, nok) {\n  const self = this;\n  return wwwStart;\n\n  /**\n   * Start of www autolink literal.\n   *\n   * ```markdown\n   * > | www.example.com/a?b#c\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwStart(code) {\n    if (code !== 87 && code !== 119 || !previousWww.call(self, self.previous) || previousUnbalanced(self.events)) {\n      return nok(code);\n    }\n    effects.enter('literalAutolink');\n    effects.enter('literalAutolinkWww');\n    // Note: we *check*, so we can discard the `www.` we parsed.\n    // If it worked, we consider it as a part of the domain.\n    return effects.check(wwwPrefix, effects.attempt(domain, effects.attempt(path, wwwAfter), nok), nok)(code);\n  }\n\n  /**\n   * After a www autolink literal.\n   *\n   * ```markdown\n   * > | www.example.com/a?b#c\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwAfter(code) {\n    effects.exit('literalAutolinkWww');\n    effects.exit('literalAutolink');\n    return ok(code);\n  }\n}\n\n/**\n * Protocol autolink literal.\n *\n * ```markdown\n * > | a https://example.org b\n *       ^^^^^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeProtocolAutolink(effects, ok, nok) {\n  const self = this;\n  let buffer = '';\n  let seen = false;\n  return protocolStart;\n\n  /**\n   * Start of protocol autolink literal.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolStart(code) {\n    if ((code === 72 || code === 104) && previousProtocol.call(self, self.previous) && !previousUnbalanced(self.events)) {\n      effects.enter('literalAutolink');\n      effects.enter('literalAutolinkHttp');\n      buffer += String.fromCodePoint(code);\n      effects.consume(code);\n      return protocolPrefixInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In protocol.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *     ^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolPrefixInside(code) {\n    // `5` is size of `https`\n    if (asciiAlpha(code) && buffer.length < 5) {\n      // @ts-expect-error: definitely number.\n      buffer += String.fromCodePoint(code);\n      effects.consume(code);\n      return protocolPrefixInside;\n    }\n    if (code === 58) {\n      const protocol = buffer.toLowerCase();\n      if (protocol === 'http' || protocol === 'https') {\n        effects.consume(code);\n        return protocolSlashesInside;\n      }\n    }\n    return nok(code);\n  }\n\n  /**\n   * In slashes.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *           ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolSlashesInside(code) {\n    if (code === 47) {\n      effects.consume(code);\n      if (seen) {\n        return afterProtocol;\n      }\n      seen = true;\n      return protocolSlashesInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After protocol, before domain.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterProtocol(code) {\n    // To do: this is different from `markdown-rs`:\n    // https://github.com/wooorm/markdown-rs/blob/b3a921c761309ae00a51fe348d8a43adbc54b518/src/construct/gfm_autolink_literal.rs#L172-L182\n    return code === null || asciiControl(code) || markdownLineEndingOrSpace(code) || unicodeWhitespace(code) || unicodePunctuation(code) ? nok(code) : effects.attempt(domain, effects.attempt(path, protocolAfter), nok)(code);\n  }\n\n  /**\n   * After a protocol autolink literal.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *                              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolAfter(code) {\n    effects.exit('literalAutolinkHttp');\n    effects.exit('literalAutolink');\n    return ok(code);\n  }\n}\n\n/**\n * `www` prefix.\n *\n * ```markdown\n * > | a www.example.org b\n *       ^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeWwwPrefix(effects, ok, nok) {\n  let size = 0;\n  return wwwPrefixInside;\n\n  /**\n   * In www prefix.\n   *\n   * ```markdown\n   * > | www.example.com\n   *     ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwPrefixInside(code) {\n    if ((code === 87 || code === 119) && size < 3) {\n      size++;\n      effects.consume(code);\n      return wwwPrefixInside;\n    }\n    if (code === 46 && size === 3) {\n      effects.consume(code);\n      return wwwPrefixAfter;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After www prefix.\n   *\n   * ```markdown\n   * > | www.example.com\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwPrefixAfter(code) {\n    // If there is *anything*, we can link.\n    return code === null ? nok(code) : ok(code);\n  }\n}\n\n/**\n * Domain.\n *\n * ```markdown\n * > | a https://example.org b\n *               ^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDomain(effects, ok, nok) {\n  /** @type {boolean | undefined} */\n  let underscoreInLastSegment;\n  /** @type {boolean | undefined} */\n  let underscoreInLastLastSegment;\n  /** @type {boolean | undefined} */\n  let seen;\n  return domainInside;\n\n  /**\n   * In domain.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *             ^^^^^^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function domainInside(code) {\n    // Check whether this marker, which is a trailing punctuation\n    // marker, optionally followed by more trailing markers, and then\n    // followed by an end.\n    if (code === 46 || code === 95) {\n      return effects.check(trail, domainAfter, domainAtPunctuation)(code);\n    }\n\n    // GH documents that only alphanumerics (other than `-`, `.`, and `_`) can\n    // occur, which sounds like ASCII only, but they also support `www..com`,\n    // so thats Unicode.\n    // Instead of some new production for Unicode alphanumerics, markdown\n    // already has that for Unicode punctuation and whitespace, so use those.\n    // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L12>.\n    if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code) || code !== 45 && unicodePunctuation(code)) {\n      return domainAfter(code);\n    }\n    seen = true;\n    effects.consume(code);\n    return domainInside;\n  }\n\n  /**\n   * In domain, at potential trailing punctuation, that was not trailing.\n   *\n   * ```markdown\n   * > | https://example.com\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function domainAtPunctuation(code) {\n    // There is an underscore in the last segment of the domain\n    if (code === 95) {\n      underscoreInLastSegment = true;\n    }\n    // Otherwise, its a `.`: save the last segment underscore in the\n    // penultimate segment slot.\n    else {\n      underscoreInLastLastSegment = underscoreInLastSegment;\n      underscoreInLastSegment = undefined;\n    }\n    effects.consume(code);\n    return domainInside;\n  }\n\n  /**\n   * After domain.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *                        ^\n   * ```\n   *\n   * @type {State} */\n  function domainAfter(code) {\n    // Note: thats GH says a dot is needed, but its not true:\n    // <https://github.com/github/cmark-gfm/issues/279>\n    if (underscoreInLastLastSegment || underscoreInLastSegment || !seen) {\n      return nok(code);\n    }\n    return ok(code);\n  }\n}\n\n/**\n * Path.\n *\n * ```markdown\n * > | a https://example.org/stuff b\n *                          ^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizePath(effects, ok) {\n  let sizeOpen = 0;\n  let sizeClose = 0;\n  return pathInside;\n\n  /**\n   * In path.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *                        ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function pathInside(code) {\n    if (code === 40) {\n      sizeOpen++;\n      effects.consume(code);\n      return pathInside;\n    }\n\n    // To do: `markdown-rs` also needs this.\n    // If this is a paren, and there are less closings than openings,\n    // we dont check for a trail.\n    if (code === 41 && sizeClose < sizeOpen) {\n      return pathAtPunctuation(code);\n    }\n\n    // Check whether this trailing punctuation marker is optionally\n    // followed by more trailing markers, and then followed\n    // by an end.\n    if (code === 33 || code === 34 || code === 38 || code === 39 || code === 41 || code === 42 || code === 44 || code === 46 || code === 58 || code === 59 || code === 60 || code === 63 || code === 93 || code === 95 || code === 126) {\n      return effects.check(trail, ok, pathAtPunctuation)(code);\n    }\n    if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    effects.consume(code);\n    return pathInside;\n  }\n\n  /**\n   * In path, at potential trailing punctuation, that was not trailing.\n   *\n   * ```markdown\n   * > | https://example.com/a\"b\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function pathAtPunctuation(code) {\n    // Count closing parens.\n    if (code === 41) {\n      sizeClose++;\n    }\n    effects.consume(code);\n    return pathInside;\n  }\n}\n\n/**\n * Trail.\n *\n * This calls `ok` if this *is* the trail, followed by an end, which means\n * the entire trail is not part of the link.\n * It calls `nok` if this *is* part of the link.\n *\n * ```markdown\n * > | https://example.com\").\n *                        ^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTrail(effects, ok, nok) {\n  return trail;\n\n  /**\n   * In trail of domain or path.\n   *\n   * ```markdown\n   * > | https://example.com\").\n   *                        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trail(code) {\n    // Regular trailing punctuation.\n    if (code === 33 || code === 34 || code === 39 || code === 41 || code === 42 || code === 44 || code === 46 || code === 58 || code === 59 || code === 63 || code === 95 || code === 126) {\n      effects.consume(code);\n      return trail;\n    }\n\n    // `&` followed by one or more alphabeticals and then a `;`, is\n    // as a whole considered as trailing punctuation.\n    // In all other cases, it is considered as continuation of the URL.\n    if (code === 38) {\n      effects.consume(code);\n      return trailCharacterReferenceStart;\n    }\n\n    // Needed because we allow literals after `[`, as we fix:\n    // <https://github.com/github/cmark-gfm/issues/278>.\n    // Check that it is not followed by `(` or `[`.\n    if (code === 93) {\n      effects.consume(code);\n      return trailBracketAfter;\n    }\n    if (\n    // `<` is an end.\n    code === 60 ||\n    // So is whitespace.\n    code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In trail, after `]`.\n   *\n   * >  **Note**: this deviates from `cmark-gfm` to fix a bug.\n   * > See end of <https://github.com/github/cmark-gfm/issues/278> for more.\n   *\n   * ```markdown\n   * > | https://example.com](\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailBracketAfter(code) {\n    // Whitespace or something that could start a resource or reference is the end.\n    // Switch back to trail otherwise.\n    if (code === null || code === 40 || code === 91 || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    return trail(code);\n  }\n\n  /**\n   * In character-reference like trail, after `&`.\n   *\n   * ```markdown\n   * > | https://example.com&amp;).\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailCharacterReferenceStart(code) {\n    // When non-alpha, its not a trail.\n    return asciiAlpha(code) ? trailCharacterReferenceInside(code) : nok(code);\n  }\n\n  /**\n   * In character-reference like trail.\n   *\n   * ```markdown\n   * > | https://example.com&amp;).\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailCharacterReferenceInside(code) {\n    // Switch back to trail if this is well-formed.\n    if (code === 59) {\n      effects.consume(code);\n      return trail;\n    }\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return trailCharacterReferenceInside;\n    }\n\n    // Its not a trail.\n    return nok(code);\n  }\n}\n\n/**\n * Dot in email domain trail.\n *\n * This calls `ok` if this *is* the trail, followed by an end, which means\n * the trail is not part of the link.\n * It calls `nok` if this *is* part of the link.\n *\n * ```markdown\n * > | contact@example.org.\n *                        ^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeEmailDomainDotTrail(effects, ok, nok) {\n  return start;\n\n  /**\n   * Dot.\n   *\n   * ```markdown\n   * > | contact@example.org.\n   *                    ^   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Must be dot.\n    effects.consume(code);\n    return after;\n  }\n\n  /**\n   * After dot.\n   *\n   * ```markdown\n   * > | contact@example.org.\n   *                     ^   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Not a trail if alphanumeric.\n    return asciiAlphanumeric(code) ? nok(code) : ok(code);\n  }\n}\n\n/**\n * See:\n * <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L156>.\n *\n * @type {Previous}\n */\nfunction previousWww(code) {\n  return code === null || code === 40 || code === 42 || code === 95 || code === 91 || code === 93 || code === 126 || markdownLineEndingOrSpace(code);\n}\n\n/**\n * See:\n * <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L214>.\n *\n * @type {Previous}\n */\nfunction previousProtocol(code) {\n  return !asciiAlpha(code);\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Previous}\n */\nfunction previousEmail(code) {\n  // Do not allow a slash inside atext.\n  // The reference code is a bit weird, but thats what it results in.\n  // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L307>.\n  // Other than slash, every preceding character is allowed.\n  return !(code === 47 || gfmAtext(code));\n}\n\n/**\n * @param {Code} code\n * @returns {boolean}\n */\nfunction gfmAtext(code) {\n  return code === 43 || code === 45 || code === 46 || code === 95 || asciiAlphanumeric(code);\n}\n\n/**\n * @param {Array<Event>} events\n * @returns {boolean}\n */\nfunction previousUnbalanced(events) {\n  let index = events.length;\n  let result = false;\n  while (index--) {\n    const token = events[index][1];\n    if ((token.type === 'labelLink' || token.type === 'labelImage') && !token._balanced) {\n      result = true;\n      break;\n    }\n\n    // If weve seen this token, and it was marked as not having any unbalanced\n    // bracket before it, we can exit.\n    if (token._gfmAutolinkLiteralWalkedInto) {\n      result = false;\n      break;\n    }\n  }\n  if (events.length > 0 && !result) {\n    // Mark the last token as walked into w/o finding\n    // anything.\n    events[events.length - 1][1]._gfmAutolinkLiteralWalkedInto = true;\n  }\n  return result;\n}","/**\n * @import {Event, Resolver, TokenizeContext} from 'micromark-util-types'\n */\n\n/**\n * Call all `resolveAll`s.\n *\n * @param {ReadonlyArray<{resolveAll?: Resolver | undefined}>} constructs\n *   List of constructs, optionally with `resolveAll`s.\n * @param {Array<Event>} events\n *   List of events.\n * @param {TokenizeContext} context\n *   Context used by `tokenize`.\n * @returns {Array<Event>}\n *   Changed events.\n */\nexport function resolveAll(constructs, events, context) {\n  /** @type {Array<Resolver>} */\n  const called = []\n  let index = -1\n\n  while (++index < constructs.length) {\n    const resolve = constructs[index].resolveAll\n\n    if (resolve && !called.includes(resolve)) {\n      events = resolve(events, context)\n      called.push(resolve)\n    }\n  }\n\n  return events\n}\n","/**\n * @import {Effects, State, TokenType} from 'micromark-util-types'\n */\n\nimport { markdownSpace } from 'micromark-util-character';\n\n// To do: implement `spaceOrTab`, `spaceOrTabMinMax`, `spaceOrTabWithOptions`.\n\n/**\n * Parse spaces and tabs.\n *\n * There is no `nok` parameter:\n *\n * *   spaces in markdown are often optional, in which case this factory can be\n *     used and `ok` will be switched to whether spaces were found or not\n * *   one line ending or space can be detected with `markdownSpace(code)` right\n *     before using `factorySpace`\n *\n * ###### Examples\n *\n * Where `` represents a tab (plus how much it expands) and `` represents a\n * single space.\n *\n * ```markdown\n * \n * \n * \n * ```\n *\n * @param {Effects} effects\n *   Context.\n * @param {State} ok\n *   State switched to when successful.\n * @param {TokenType} type\n *   Type (`' \\t'`).\n * @param {number | undefined} [max=Infinity]\n *   Max (exclusive).\n * @returns {State}\n *   Start state.\n */\nexport function factorySpace(effects, ok, type, max) {\n  const limit = max ? max - 1 : Number.POSITIVE_INFINITY;\n  let size = 0;\n  return start;\n\n  /** @type {State} */\n  function start(code) {\n    if (markdownSpace(code)) {\n      effects.enter(type);\n      return prefix(code);\n    }\n    return ok(code);\n  }\n\n  /** @type {State} */\n  function prefix(code) {\n    if (markdownSpace(code) && size++ < limit) {\n      effects.consume(code);\n      return prefix;\n    }\n    effects.exit(type);\n    return ok(code);\n  }\n}","/**\n * @import {\n *   Construct,\n *   State,\n *   TokenizeContext,\n *   Tokenizer\n * } from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownSpace } from 'micromark-util-character';\n/** @type {Construct} */\nexport const blankLine = {\n  partial: true,\n  tokenize: tokenizeBlankLine\n};\n\n/**\n * @this {TokenizeContext}\n *   Context.\n * @type {Tokenizer}\n */\nfunction tokenizeBlankLine(effects, ok, nok) {\n  return start;\n\n  /**\n   * Start of blank line.\n   *\n   * >  **Note**: `` represents a space character.\n   *\n   * ```markdown\n   * > | \n   *     ^\n   * > | \n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    return markdownSpace(code) ? factorySpace(effects, after, \"linePrefix\")(code) : after(code);\n  }\n\n  /**\n   * At eof/eol, after optional whitespace.\n   *\n   * >  **Note**: `` represents a space character.\n   *\n   * ```markdown\n   * > | \n   *       ^\n   * > | \n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    return code === null || markdownLineEnding(code) ? ok(code) : nok(code);\n  }\n}","/**\n * Normalize an identifier (as found in references, definitions).\n *\n * Collapses markdown whitespace, trim, and then lower- and uppercase.\n *\n * Some characters are considered uppercase, such as U+03F4 (``), but if their\n * lowercase counterpart (U+03B8 (``)) is uppercased will result in a different\n * uppercase character (U+0398 (``)).\n * So, to get a canonical form, we perform both lower- and uppercase.\n *\n * Using uppercase last makes sure keys will never interact with default\n * prototypal values (such as `constructor`): nothing in the prototype of\n * `Object` is uppercase.\n *\n * @param {string} value\n *   Identifier to normalize.\n * @returns {string}\n *   Normalized identifier.\n */\nexport function normalizeIdentifier(value) {\n  return value\n  // Collapse markdown whitespace.\n  .replace(/[\\t\\n\\r ]+/g, \" \")\n  // Trim.\n  .replace(/^ | $/g, '')\n  // Some characters are considered uppercase, but if their lowercase\n  // counterpart is uppercased will result in a different uppercase\n  // character.\n  // Hence, to get that form, we perform both lower- and uppercase.\n  // Upper case makes sure keys will not interact with default prototypal\n  // methods: no method is uppercase.\n  .toLowerCase().toUpperCase();\n}","/**\n * @import {Event, Exiter, Extension, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { blankLine } from 'micromark-core-commonmark';\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEndingOrSpace } from 'micromark-util-character';\nimport { normalizeIdentifier } from 'micromark-util-normalize-identifier';\nconst indent = {\n  tokenize: tokenizeIndent,\n  partial: true\n};\n\n// To do: micromark should support a `_hiddenGfmFootnoteSupport`, which only\n// affects label start (image).\n// That will let us drop `tokenizePotentialGfmFootnote*`.\n// It currently has a `_hiddenFootnoteSupport`, which affects that and more.\n// That can be removed when `micromark-extension-footnote` is archived.\n\n/**\n * Create an extension for `micromark` to enable GFM footnote syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to\n *   enable GFM footnote syntax.\n */\nexport function gfmFootnote() {\n  /** @type {Extension} */\n  return {\n    document: {\n      [91]: {\n        name: 'gfmFootnoteDefinition',\n        tokenize: tokenizeDefinitionStart,\n        continuation: {\n          tokenize: tokenizeDefinitionContinuation\n        },\n        exit: gfmFootnoteDefinitionEnd\n      }\n    },\n    text: {\n      [91]: {\n        name: 'gfmFootnoteCall',\n        tokenize: tokenizeGfmFootnoteCall\n      },\n      [93]: {\n        name: 'gfmPotentialFootnoteCall',\n        add: 'after',\n        tokenize: tokenizePotentialGfmFootnoteCall,\n        resolveTo: resolveToPotentialGfmFootnoteCall\n      }\n    }\n  };\n}\n\n// To do: remove after micromark update.\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizePotentialGfmFootnoteCall(effects, ok, nok) {\n  const self = this;\n  let index = self.events.length;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  /** @type {Token} */\n  let labelStart;\n\n  // Find an opening.\n  while (index--) {\n    const token = self.events[index][1];\n    if (token.type === \"labelImage\") {\n      labelStart = token;\n      break;\n    }\n\n    // Exit if weve walked far enough.\n    if (token.type === 'gfmFootnoteCall' || token.type === \"labelLink\" || token.type === \"label\" || token.type === \"image\" || token.type === \"link\") {\n      break;\n    }\n  }\n  return start;\n\n  /**\n   * @type {State}\n   */\n  function start(code) {\n    if (!labelStart || !labelStart._balanced) {\n      return nok(code);\n    }\n    const id = normalizeIdentifier(self.sliceSerialize({\n      start: labelStart.end,\n      end: self.now()\n    }));\n    if (id.codePointAt(0) !== 94 || !defined.includes(id.slice(1))) {\n      return nok(code);\n    }\n    effects.enter('gfmFootnoteCallLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallLabelMarker');\n    return ok(code);\n  }\n}\n\n// To do: remove after micromark update.\n/** @type {Resolver} */\nfunction resolveToPotentialGfmFootnoteCall(events, context) {\n  let index = events.length;\n  /** @type {Token | undefined} */\n  let labelStart;\n\n  // Find an opening.\n  while (index--) {\n    if (events[index][1].type === \"labelImage\" && events[index][0] === 'enter') {\n      labelStart = events[index][1];\n      break;\n    }\n  }\n  // Change the `labelImageMarker` to a `data`.\n  events[index + 1][1].type = \"data\";\n  events[index + 3][1].type = 'gfmFootnoteCallLabelMarker';\n\n  // The whole (without `!`):\n  /** @type {Token} */\n  const call = {\n    type: 'gfmFootnoteCall',\n    start: Object.assign({}, events[index + 3][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  };\n  // The `^` marker\n  /** @type {Token} */\n  const marker = {\n    type: 'gfmFootnoteCallMarker',\n    start: Object.assign({}, events[index + 3][1].end),\n    end: Object.assign({}, events[index + 3][1].end)\n  };\n  // Increment the end 1 character.\n  marker.end.column++;\n  marker.end.offset++;\n  marker.end._bufferIndex++;\n  /** @type {Token} */\n  const string = {\n    type: 'gfmFootnoteCallString',\n    start: Object.assign({}, marker.end),\n    end: Object.assign({}, events[events.length - 1][1].start)\n  };\n  /** @type {Token} */\n  const chunk = {\n    type: \"chunkString\",\n    contentType: 'string',\n    start: Object.assign({}, string.start),\n    end: Object.assign({}, string.end)\n  };\n\n  /** @type {Array<Event>} */\n  const replacement = [\n  // Take the `labelImageMarker` (now `data`, the `!`)\n  events[index + 1], events[index + 2], ['enter', call, context],\n  // The `[`\n  events[index + 3], events[index + 4],\n  // The `^`.\n  ['enter', marker, context], ['exit', marker, context],\n  // Everything in between.\n  ['enter', string, context], ['enter', chunk, context], ['exit', chunk, context], ['exit', string, context],\n  // The ending (`]`, properly parsed and labelled).\n  events[events.length - 2], events[events.length - 1], ['exit', call, context]];\n  events.splice(index, events.length - index + 1, ...replacement);\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeGfmFootnoteCall(effects, ok, nok) {\n  const self = this;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  let size = 0;\n  /** @type {boolean} */\n  let data;\n\n  // Note: the implementation of `markdown-rs` is different, because it houses\n  // core *and* extensions in one project.\n  // Therefore, it can include footnote logic inside `label-end`.\n  // We cant do that, but luckily, we can parse footnotes in a simpler way than\n  // needed for labels.\n  return start;\n\n  /**\n   * Start of footnote label.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('gfmFootnoteCall');\n    effects.enter('gfmFootnoteCallLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallLabelMarker');\n    return callStart;\n  }\n\n  /**\n   * After `[`, at `^`.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callStart(code) {\n    if (code !== 94) return nok(code);\n    effects.enter('gfmFootnoteCallMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallMarker');\n    effects.enter('gfmFootnoteCallString');\n    effects.enter('chunkString').contentType = 'string';\n    return callData;\n  }\n\n  /**\n   * In label.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callData(code) {\n    if (\n    // Too long.\n    size > 999 ||\n    // Closing brace with nothing.\n    code === 93 && !data ||\n    // Space or tab is not supported by GFM for some reason.\n    // `\\n` and `[` not being supported makes sense.\n    code === null || code === 91 || markdownLineEndingOrSpace(code)) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.exit('chunkString');\n      const token = effects.exit('gfmFootnoteCallString');\n      if (!defined.includes(normalizeIdentifier(self.sliceSerialize(token)))) {\n        return nok(code);\n      }\n      effects.enter('gfmFootnoteCallLabelMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteCallLabelMarker');\n      effects.exit('gfmFootnoteCall');\n      return ok;\n    }\n    if (!markdownLineEndingOrSpace(code)) {\n      data = true;\n    }\n    size++;\n    effects.consume(code);\n    return code === 92 ? callEscape : callData;\n  }\n\n  /**\n   * On character after escape.\n   *\n   * ```markdown\n   * > | a [^b\\c] d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code);\n      size++;\n      return callData;\n    }\n    return callData(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinitionStart(effects, ok, nok) {\n  const self = this;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  /** @type {string} */\n  let identifier;\n  let size = 0;\n  /** @type {boolean | undefined} */\n  let data;\n  return start;\n\n  /**\n   * Start of GFM footnote definition.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('gfmFootnoteDefinition')._container = true;\n    effects.enter('gfmFootnoteDefinitionLabel');\n    effects.enter('gfmFootnoteDefinitionLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteDefinitionLabelMarker');\n    return labelAtMarker;\n  }\n\n  /**\n   * In label, at caret.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAtMarker(code) {\n    if (code === 94) {\n      effects.enter('gfmFootnoteDefinitionMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteDefinitionMarker');\n      effects.enter('gfmFootnoteDefinitionLabelString');\n      effects.enter('chunkString').contentType = 'string';\n      return labelInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In label.\n   *\n   * >  **Note**: `cmark-gfm` prevents whitespace from occurring in footnote\n   * > definition labels.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (\n    // Too long.\n    size > 999 ||\n    // Closing brace with nothing.\n    code === 93 && !data ||\n    // Space or tab is not supported by GFM for some reason.\n    // `\\n` and `[` not being supported makes sense.\n    code === null || code === 91 || markdownLineEndingOrSpace(code)) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.exit('chunkString');\n      const token = effects.exit('gfmFootnoteDefinitionLabelString');\n      identifier = normalizeIdentifier(self.sliceSerialize(token));\n      effects.enter('gfmFootnoteDefinitionLabelMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteDefinitionLabelMarker');\n      effects.exit('gfmFootnoteDefinitionLabel');\n      return labelAfter;\n    }\n    if (!markdownLineEndingOrSpace(code)) {\n      data = true;\n    }\n    size++;\n    effects.consume(code);\n    return code === 92 ? labelEscape : labelInside;\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * >  **Note**: `cmark-gfm` currently does not support escaped brackets:\n   * > <https://github.com/github/cmark-gfm/issues/240>\n   *\n   * ```markdown\n   * > | [^a\\*b]: c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code);\n      size++;\n      return labelInside;\n    }\n    return labelInside(code);\n  }\n\n  /**\n   * After definition label.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    if (code === 58) {\n      effects.enter('definitionMarker');\n      effects.consume(code);\n      effects.exit('definitionMarker');\n      if (!defined.includes(identifier)) {\n        defined.push(identifier);\n      }\n\n      // Any whitespace after the marker is eaten, forming indented code\n      // is not possible.\n      // No space is also fine, just like a block quote marker.\n      return factorySpace(effects, whitespaceAfter, 'gfmFootnoteDefinitionWhitespace');\n    }\n    return nok(code);\n  }\n\n  /**\n   * After definition prefix.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function whitespaceAfter(code) {\n    // `markdown-rs` has a wrapping token for the prefix that is closed here.\n    return ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinitionContinuation(effects, ok, nok) {\n  /// Start of footnote definition continuation.\n  ///\n  /// ```markdown\n  ///   | [^a]: b\n  /// > |     c\n  ///     ^\n  /// ```\n  //\n  // Either a blank line, which is okay, or an indented thing.\n  return effects.check(blankLine, ok, effects.attempt(indent, ok, nok));\n}\n\n/** @type {Exiter} */\nfunction gfmFootnoteDefinitionEnd(effects) {\n  effects.exit('gfmFootnoteDefinition');\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this;\n  return factorySpace(effects, afterPrefix, 'gfmFootnoteDefinitionIndent', 4 + 1);\n\n  /**\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return tail && tail[1].type === 'gfmFootnoteDefinitionIndent' && tail[2].sliceSerialize(tail[1], true).length === 4 ? ok(code) : nok(code);\n  }\n}","/**\n * @import {Options} from 'micromark-extension-gfm-strikethrough'\n * @import {Event, Extension, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { splice } from 'micromark-util-chunked';\nimport { classifyCharacter } from 'micromark-util-classify-character';\nimport { resolveAll } from 'micromark-util-resolve-all';\n/**\n * Create an extension for `micromark` to enable GFM strikethrough syntax.\n *\n * @param {Options | null | undefined} [options={}]\n *   Configuration.\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions`, to\n *   enable GFM strikethrough syntax.\n */\nexport function gfmStrikethrough(options) {\n  const options_ = options || {};\n  let single = options_.singleTilde;\n  const tokenizer = {\n    name: 'strikethrough',\n    tokenize: tokenizeStrikethrough,\n    resolveAll: resolveAllStrikethrough\n  };\n  if (single === null || single === undefined) {\n    single = true;\n  }\n  return {\n    text: {\n      [126]: tokenizer\n    },\n    insideSpan: {\n      null: [tokenizer]\n    },\n    attentionMarkers: {\n      null: [126]\n    }\n  };\n\n  /**\n   * Take events and resolve strikethrough.\n   *\n   * @type {Resolver}\n   */\n  function resolveAllStrikethrough(events, context) {\n    let index = -1;\n\n    // Walk through all events.\n    while (++index < events.length) {\n      // Find a token that can close.\n      if (events[index][0] === 'enter' && events[index][1].type === 'strikethroughSequenceTemporary' && events[index][1]._close) {\n        let open = index;\n\n        // Now walk back to find an opener.\n        while (open--) {\n          // Find a token that can open the closer.\n          if (events[open][0] === 'exit' && events[open][1].type === 'strikethroughSequenceTemporary' && events[open][1]._open &&\n          // If the sizes are the same:\n          events[index][1].end.offset - events[index][1].start.offset === events[open][1].end.offset - events[open][1].start.offset) {\n            events[index][1].type = 'strikethroughSequence';\n            events[open][1].type = 'strikethroughSequence';\n\n            /** @type {Token} */\n            const strikethrough = {\n              type: 'strikethrough',\n              start: Object.assign({}, events[open][1].start),\n              end: Object.assign({}, events[index][1].end)\n            };\n\n            /** @type {Token} */\n            const text = {\n              type: 'strikethroughText',\n              start: Object.assign({}, events[open][1].end),\n              end: Object.assign({}, events[index][1].start)\n            };\n\n            // Opening.\n            /** @type {Array<Event>} */\n            const nextEvents = [['enter', strikethrough, context], ['enter', events[open][1], context], ['exit', events[open][1], context], ['enter', text, context]];\n            const insideSpan = context.parser.constructs.insideSpan.null;\n            if (insideSpan) {\n              // Between.\n              splice(nextEvents, nextEvents.length, 0, resolveAll(insideSpan, events.slice(open + 1, index), context));\n            }\n\n            // Closing.\n            splice(nextEvents, nextEvents.length, 0, [['exit', text, context], ['enter', events[index][1], context], ['exit', events[index][1], context], ['exit', strikethrough, context]]);\n            splice(events, open - 1, index - open + 3, nextEvents);\n            index = open + nextEvents.length - 2;\n            break;\n          }\n        }\n      }\n    }\n    index = -1;\n    while (++index < events.length) {\n      if (events[index][1].type === 'strikethroughSequenceTemporary') {\n        events[index][1].type = \"data\";\n      }\n    }\n    return events;\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Tokenizer}\n   */\n  function tokenizeStrikethrough(effects, ok, nok) {\n    const previous = this.previous;\n    const events = this.events;\n    let size = 0;\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      if (previous === 126 && events[events.length - 1][1].type !== \"characterEscape\") {\n        return nok(code);\n      }\n      effects.enter('strikethroughSequenceTemporary');\n      return more(code);\n    }\n\n    /** @type {State} */\n    function more(code) {\n      const before = classifyCharacter(previous);\n      if (code === 126) {\n        // If this is the third marker, exit.\n        if (size > 1) return nok(code);\n        effects.consume(code);\n        size++;\n        return more;\n      }\n      if (size < 2 && !single) return nok(code);\n      const token = effects.exit('strikethroughSequenceTemporary');\n      const after = classifyCharacter(code);\n      token._open = !after || after === 2 && Boolean(before);\n      token._close = !before || before === 2 && Boolean(after);\n      return ok(code);\n    }\n  }\n}","/**\n * @import {Event} from 'micromark-util-types'\n */\n\n// Port of `edit_map.rs` from `markdown-rs`.\n// This should move to `markdown-js` later.\n\n// Deal with several changes in events, batching them together.\n//\n// Preferably, changes should be kept to a minimum.\n// Sometimes, its needed to change the list of events, because parsing can be\n// messy, and it helps to expose a cleaner interface of events to the compiler\n// and other users.\n// It can also help to merge many adjacent similar events.\n// And, in other cases, its needed to parse subcontent: pass some events\n// through another tokenizer and inject the result.\n\n/**\n * @typedef {[number, number, Array<Event>]} Change\n * @typedef {[number, number, number]} Jump\n */\n\n/**\n * Tracks a bunch of edits.\n */\nexport class EditMap {\n  /**\n   * Create a new edit map.\n   */\n  constructor() {\n    /**\n     * Record of changes.\n     *\n     * @type {Array<Change>}\n     */\n    this.map = [];\n  }\n\n  /**\n   * Create an edit: a remove and/or add at a certain place.\n   *\n   * @param {number} index\n   * @param {number} remove\n   * @param {Array<Event>} add\n   * @returns {undefined}\n   */\n  add(index, remove, add) {\n    addImplementation(this, index, remove, add);\n  }\n\n  // To do: add this when moving to `micromark`.\n  // /**\n  //  * Create an edit: but insert `add` before existing additions.\n  //  *\n  //  * @param {number} index\n  //  * @param {number} remove\n  //  * @param {Array<Event>} add\n  //  * @returns {undefined}\n  //  */\n  // addBefore(index, remove, add) {\n  //   addImplementation(this, index, remove, add, true)\n  // }\n\n  /**\n   * Done, change the events.\n   *\n   * @param {Array<Event>} events\n   * @returns {undefined}\n   */\n  consume(events) {\n    this.map.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n\n    /* c8 ignore next 3 -- `resolve` is never called without tables, so without edits. */\n    if (this.map.length === 0) {\n      return;\n    }\n\n    // To do: if links are added in events, like they are in `markdown-rs`,\n    // this is needed.\n    // // Calculate jumps: where items in the current list move to.\n    // /** @type {Array<Jump>} */\n    // const jumps = []\n    // let index = 0\n    // let addAcc = 0\n    // let removeAcc = 0\n    // while (index < this.map.length) {\n    //   const [at, remove, add] = this.map[index]\n    //   removeAcc += remove\n    //   addAcc += add.length\n    //   jumps.push([at, removeAcc, addAcc])\n    //   index += 1\n    // }\n    //\n    // . shiftLinks(events, jumps)\n\n    let index = this.map.length;\n    /** @type {Array<Array<Event>>} */\n    const vecs = [];\n    while (index > 0) {\n      index -= 1;\n      vecs.push(events.slice(this.map[index][0] + this.map[index][1]), this.map[index][2]);\n\n      // Truncate rest.\n      events.length = this.map[index][0];\n    }\n    vecs.push(events.slice());\n    events.length = 0;\n    let slice = vecs.pop();\n    while (slice) {\n      for (const element of slice) {\n        events.push(element);\n      }\n      slice = vecs.pop();\n    }\n\n    // Truncate everything.\n    this.map.length = 0;\n  }\n}\n\n/**\n * Create an edit.\n *\n * @param {EditMap} editMap\n * @param {number} at\n * @param {number} remove\n * @param {Array<Event>} add\n * @returns {undefined}\n */\nfunction addImplementation(editMap, at, remove, add) {\n  let index = 0;\n\n  /* c8 ignore next 3 -- `resolve` is never called without tables, so without edits. */\n  if (remove === 0 && add.length === 0) {\n    return;\n  }\n  while (index < editMap.map.length) {\n    if (editMap.map[index][0] === at) {\n      editMap.map[index][1] += remove;\n\n      // To do: before not used by tables, use when moving to micromark.\n      // if (before) {\n      //   add.push(...editMap.map[index][2])\n      //   editMap.map[index][2] = add\n      // } else {\n      editMap.map[index][2].push(...add);\n      // }\n\n      return;\n    }\n    index += 1;\n  }\n  editMap.map.push([at, remove, add]);\n}\n\n// /**\n//  * Shift `previous` and `next` links according to `jumps`.\n//  *\n//  * This fixes links in case there are events removed or added between them.\n//  *\n//  * @param {Array<Event>} events\n//  * @param {Array<Jump>} jumps\n//  */\n// function shiftLinks(events, jumps) {\n//   let jumpIndex = 0\n//   let index = 0\n//   let add = 0\n//   let rm = 0\n\n//   while (index < events.length) {\n//     const rmCurr = rm\n\n//     while (jumpIndex < jumps.length && jumps[jumpIndex][0] <= index) {\n//       add = jumps[jumpIndex][2]\n//       rm = jumps[jumpIndex][1]\n//       jumpIndex += 1\n//     }\n\n//     // Ignore items that will be removed.\n//     if (rm > rmCurr) {\n//       index += rm - rmCurr\n//     } else {\n//       // ?\n//       // if let Some(link) = &events[index].link {\n//       //     if let Some(next) = link.next {\n//       //         events[next].link.as_mut().unwrap().previous = Some(index + add - rm);\n//       //         while jumpIndex < jumps.len() && jumps[jumpIndex].0 <= next {\n//       //             add = jumps[jumpIndex].2;\n//       //             rm = jumps[jumpIndex].1;\n//       //             jumpIndex += 1;\n//       //         }\n//       //         events[index].link.as_mut().unwrap().next = Some(next + add - rm);\n//       //         index = next;\n//       //         continue;\n//       //     }\n//       // }\n//       index += 1\n//     }\n//   }\n// }","/**\n * @import {Event} from 'micromark-util-types'\n */\n\n/**\n * @typedef {'center' | 'left' | 'none' | 'right'} Align\n */\n\n/**\n * Figure out the alignment of a GFM table.\n *\n * @param {Readonly<Array<Event>>} events\n *   List of events.\n * @param {number} index\n *   Table enter event.\n * @returns {Array<Align>}\n *   List of aligns.\n */\nexport function gfmTableAlign(events, index) {\n  let inDelimiterRow = false;\n  /** @type {Array<Align>} */\n  const align = [];\n  while (index < events.length) {\n    const event = events[index];\n    if (inDelimiterRow) {\n      if (event[0] === 'enter') {\n        // Start of alignment value: set a new column.\n        // To do: `markdown-rs` uses `tableDelimiterCellValue`.\n        if (event[1].type === 'tableContent') {\n          align.push(events[index + 1][1].type === 'tableDelimiterMarker' ? 'left' : 'none');\n        }\n      }\n      // Exits:\n      // End of alignment value: change the column.\n      // To do: `markdown-rs` uses `tableDelimiterCellValue`.\n      else if (event[1].type === 'tableContent') {\n        if (events[index - 1][1].type === 'tableDelimiterMarker') {\n          const alignIndex = align.length - 1;\n          align[alignIndex] = align[alignIndex] === 'left' ? 'center' : 'right';\n        }\n      }\n      // Done!\n      else if (event[1].type === 'tableDelimiterRow') {\n        break;\n      }\n    } else if (event[0] === 'enter' && event[1].type === 'tableDelimiterRow') {\n      inDelimiterRow = true;\n    }\n    index += 1;\n  }\n  return align;\n}","/**\n * @import {Event, Extension, Point, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\n/**\n * @typedef {[number, number, number, number]} Range\n *   Cell info.\n *\n * @typedef {0 | 1 | 2 | 3} RowKind\n *   Where we are: `1` for head row, `2` for delimiter row, `3` for body row.\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownLineEndingOrSpace, markdownSpace } from 'micromark-util-character';\nimport { EditMap } from './edit-map.js';\nimport { gfmTableAlign } from './infer.js';\n\n/**\n * Create an HTML extension for `micromark` to support GitHub tables syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   table syntax.\n */\nexport function gfmTable() {\n  return {\n    flow: {\n      null: {\n        name: 'table',\n        tokenize: tokenizeTable,\n        resolveAll: resolveTable\n      }\n    }\n  };\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTable(effects, ok, nok) {\n  const self = this;\n  let size = 0;\n  let sizeB = 0;\n  /** @type {boolean | undefined} */\n  let seen;\n  return start;\n\n  /**\n   * Start of a GFM table.\n   *\n   * If there is a valid table row or table head before, then we try to parse\n   * another row.\n   * Otherwise, we try to parse a head.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   * > | | b |\n   *     ^\n   * ```\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length - 1;\n    while (index > -1) {\n      const type = self.events[index][1].type;\n      if (type === \"lineEnding\" ||\n      // Note: markdown-rs uses `whitespace` instead of `linePrefix`\n      type === \"linePrefix\") index--;else break;\n    }\n    const tail = index > -1 ? self.events[index][1].type : null;\n    const next = tail === 'tableHead' || tail === 'tableRow' ? bodyRowStart : headRowBefore;\n\n    // Dont allow lazy body rows.\n    if (next === bodyRowStart && self.parser.lazy[self.now().line]) {\n      return nok(code);\n    }\n    return next(code);\n  }\n\n  /**\n   * Before table head row.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowBefore(code) {\n    effects.enter('tableHead');\n    effects.enter('tableRow');\n    return headRowStart(code);\n  }\n\n  /**\n   * Before table head row, after whitespace.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowStart(code) {\n    if (code === 124) {\n      return headRowBreak(code);\n    }\n\n    // To do: micromark-js should let us parse our own whitespace in extensions,\n    // like `markdown-rs`:\n    //\n    // ```js\n    // // 4+ spaces.\n    // if (markdownSpace(code)) {\n    //   return nok(code)\n    // }\n    // ```\n\n    seen = true;\n    // Count the first character, that isnt a pipe, double.\n    sizeB += 1;\n    return headRowBreak(code);\n  }\n\n  /**\n   * At break in table head row.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *       ^\n   *         ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowBreak(code) {\n    if (code === null) {\n      // Note: in `markdown-rs`, we need to reset, in `micromark-js` we dont.\n      return nok(code);\n    }\n    if (markdownLineEnding(code)) {\n      // If anything other than one pipe (ignoring whitespace) was used, its fine.\n      if (sizeB > 1) {\n        sizeB = 0;\n        // To do: check if this works.\n        // Feel free to interrupt:\n        self.interrupt = true;\n        effects.exit('tableRow');\n        effects.enter(\"lineEnding\");\n        effects.consume(code);\n        effects.exit(\"lineEnding\");\n        return headDelimiterStart;\n      }\n\n      // Note: in `markdown-rs`, we need to reset, in `micromark-js` we dont.\n      return nok(code);\n    }\n    if (markdownSpace(code)) {\n      // To do: check if this is fine.\n      // effects.attempt(State::Next(StateName::GfmTableHeadRowBreak), State::Nok)\n      // State::Retry(space_or_tab(tokenizer))\n      return factorySpace(effects, headRowBreak, \"whitespace\")(code);\n    }\n    sizeB += 1;\n    if (seen) {\n      seen = false;\n      // Header cell count.\n      size += 1;\n    }\n    if (code === 124) {\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      // Whether a delimiter was seen.\n      seen = true;\n      return headRowBreak;\n    }\n\n    // Anything else is cell data.\n    effects.enter(\"data\");\n    return headRowData(code);\n  }\n\n  /**\n   * In table head row data.\n   *\n   * ```markdown\n   * > | | a |\n   *       ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowData(code) {\n    if (code === null || code === 124 || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"data\");\n      return headRowBreak(code);\n    }\n    effects.consume(code);\n    return code === 92 ? headRowEscape : headRowData;\n  }\n\n  /**\n   * In table head row escape.\n   *\n   * ```markdown\n   * > | | a\\-b |\n   *         ^\n   *   | | ---- |\n   *   | | c    |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowEscape(code) {\n    if (code === 92 || code === 124) {\n      effects.consume(code);\n      return headRowData;\n    }\n    return headRowData(code);\n  }\n\n  /**\n   * Before delimiter row.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *     ^\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterStart(code) {\n    // Reset `interrupt`.\n    self.interrupt = false;\n\n    // Note: in `markdown-rs`, we need to handle piercing here too.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code);\n    }\n    effects.enter('tableDelimiterRow');\n    // Track if weve seen a `:` or `|`.\n    seen = false;\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterBefore, \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code);\n    }\n    return headDelimiterBefore(code);\n  }\n\n  /**\n   * Before delimiter row, after optional whitespace.\n   *\n   * Reused when a `|` is found later, to parse another cell.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *     ^\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterBefore(code) {\n    if (code === 45 || code === 58) {\n      return headDelimiterValueBefore(code);\n    }\n    if (code === 124) {\n      seen = true;\n      // If we start with a pipe, we open a cell marker.\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      return headDelimiterCellBefore;\n    }\n\n    // More whitespace / empty row not allowed at start.\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * After `|`, before delimiter cell.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterCellBefore(code) {\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterValueBefore, \"whitespace\")(code);\n    }\n    return headDelimiterValueBefore(code);\n  }\n\n  /**\n   * Before delimiter cell value.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterValueBefore(code) {\n    // Align: left.\n    if (code === 58) {\n      sizeB += 1;\n      seen = true;\n      effects.enter('tableDelimiterMarker');\n      effects.consume(code);\n      effects.exit('tableDelimiterMarker');\n      return headDelimiterLeftAlignmentAfter;\n    }\n\n    // Align: none.\n    if (code === 45) {\n      sizeB += 1;\n      // To do: seems weird that this *isnt* left aligned, but that state is used?\n      return headDelimiterLeftAlignmentAfter(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      return headDelimiterCellAfter(code);\n    }\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * After delimiter cell left alignment marker.\n   *\n   * ```markdown\n   *   | | a  |\n   * > | | :- |\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterLeftAlignmentAfter(code) {\n    if (code === 45) {\n      effects.enter('tableDelimiterFiller');\n      return headDelimiterFiller(code);\n    }\n\n    // Anything else is not ok after the left-align colon.\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * In delimiter cell filler.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterFiller(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return headDelimiterFiller;\n    }\n\n    // Align is `center` if it was `left`, `right` otherwise.\n    if (code === 58) {\n      seen = true;\n      effects.exit('tableDelimiterFiller');\n      effects.enter('tableDelimiterMarker');\n      effects.consume(code);\n      effects.exit('tableDelimiterMarker');\n      return headDelimiterRightAlignmentAfter;\n    }\n    effects.exit('tableDelimiterFiller');\n    return headDelimiterRightAlignmentAfter(code);\n  }\n\n  /**\n   * After delimiter cell right alignment marker.\n   *\n   * ```markdown\n   *   | |  a |\n   * > | | -: |\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterRightAlignmentAfter(code) {\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterCellAfter, \"whitespace\")(code);\n    }\n    return headDelimiterCellAfter(code);\n  }\n\n  /**\n   * After delimiter cell.\n   *\n   * ```markdown\n   *   | |  a |\n   * > | | -: |\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterCellAfter(code) {\n    if (code === 124) {\n      return headDelimiterBefore(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      // Exit when:\n      // * there was no `:` or `|` at all (its a thematic break or setext\n      //   underline instead)\n      // * the header cell count is not the delimiter cell count\n      if (!seen || size !== sizeB) {\n        return headDelimiterNok(code);\n      }\n\n      // Note: in markdown-rs`, a reset is needed here.\n      effects.exit('tableDelimiterRow');\n      effects.exit('tableHead');\n      // To do: in `markdown-rs`, resolvers need to be registered manually.\n      // effects.register_resolver(ResolveName::GfmTable)\n      return ok(code);\n    }\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * In delimiter row, at a disallowed byte.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | x |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterNok(code) {\n    // Note: in `markdown-rs`, we need to reset, in `micromark-js` we dont.\n    return nok(code);\n  }\n\n  /**\n   * Before table body row.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowStart(code) {\n    // Note: in `markdown-rs` we need to manually take care of a prefix,\n    // but in `micromark-js` that is done for us, so if were here, were\n    // never at whitespace.\n    effects.enter('tableRow');\n    return bodyRowBreak(code);\n  }\n\n  /**\n   * At break in table body row.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *     ^\n   *       ^\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowBreak(code) {\n    if (code === 124) {\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      return bodyRowBreak;\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('tableRow');\n      return ok(code);\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, bodyRowBreak, \"whitespace\")(code);\n    }\n\n    // Anything else is cell content.\n    effects.enter(\"data\");\n    return bodyRowData(code);\n  }\n\n  /**\n   * In table body row data.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowData(code) {\n    if (code === null || code === 124 || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"data\");\n      return bodyRowBreak(code);\n    }\n    effects.consume(code);\n    return code === 92 ? bodyRowEscape : bodyRowData;\n  }\n\n  /**\n   * In table body row escape.\n   *\n   * ```markdown\n   *   | | a    |\n   *   | | ---- |\n   * > | | b\\-c |\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowEscape(code) {\n    if (code === 92 || code === 124) {\n      effects.consume(code);\n      return bodyRowData;\n    }\n    return bodyRowData(code);\n  }\n}\n\n/** @type {Resolver} */\n\nfunction resolveTable(events, context) {\n  let index = -1;\n  let inFirstCellAwaitingPipe = true;\n  /** @type {RowKind} */\n  let rowKind = 0;\n  /** @type {Range} */\n  let lastCell = [0, 0, 0, 0];\n  /** @type {Range} */\n  let cell = [0, 0, 0, 0];\n  let afterHeadAwaitingFirstBodyRow = false;\n  let lastTableEnd = 0;\n  /** @type {Token | undefined} */\n  let currentTable;\n  /** @type {Token | undefined} */\n  let currentBody;\n  /** @type {Token | undefined} */\n  let currentCell;\n  const map = new EditMap();\n  while (++index < events.length) {\n    const event = events[index];\n    const token = event[1];\n    if (event[0] === 'enter') {\n      // Start of head.\n      if (token.type === 'tableHead') {\n        afterHeadAwaitingFirstBodyRow = false;\n\n        // Inject previous (body end and) table end.\n        if (lastTableEnd !== 0) {\n          flushTableEnd(map, context, lastTableEnd, currentTable, currentBody);\n          currentBody = undefined;\n          lastTableEnd = 0;\n        }\n\n        // Inject table start.\n        currentTable = {\n          type: 'table',\n          start: Object.assign({}, token.start),\n          // Note: correct end is set later.\n          end: Object.assign({}, token.end)\n        };\n        map.add(index, 0, [['enter', currentTable, context]]);\n      } else if (token.type === 'tableRow' || token.type === 'tableDelimiterRow') {\n        inFirstCellAwaitingPipe = true;\n        currentCell = undefined;\n        lastCell = [0, 0, 0, 0];\n        cell = [0, index + 1, 0, 0];\n\n        // Inject table body start.\n        if (afterHeadAwaitingFirstBodyRow) {\n          afterHeadAwaitingFirstBodyRow = false;\n          currentBody = {\n            type: 'tableBody',\n            start: Object.assign({}, token.start),\n            // Note: correct end is set later.\n            end: Object.assign({}, token.end)\n          };\n          map.add(index, 0, [['enter', currentBody, context]]);\n        }\n        rowKind = token.type === 'tableDelimiterRow' ? 2 : currentBody ? 3 : 1;\n      }\n      // Cell data.\n      else if (rowKind && (token.type === \"data\" || token.type === 'tableDelimiterMarker' || token.type === 'tableDelimiterFiller')) {\n        inFirstCellAwaitingPipe = false;\n\n        // First value in cell.\n        if (cell[2] === 0) {\n          if (lastCell[1] !== 0) {\n            cell[0] = cell[1];\n            currentCell = flushCell(map, context, lastCell, rowKind, undefined, currentCell);\n            lastCell = [0, 0, 0, 0];\n          }\n          cell[2] = index;\n        }\n      } else if (token.type === 'tableCellDivider') {\n        if (inFirstCellAwaitingPipe) {\n          inFirstCellAwaitingPipe = false;\n        } else {\n          if (lastCell[1] !== 0) {\n            cell[0] = cell[1];\n            currentCell = flushCell(map, context, lastCell, rowKind, undefined, currentCell);\n          }\n          lastCell = cell;\n          cell = [lastCell[1], index, 0, 0];\n        }\n      }\n    }\n    // Exit events.\n    else if (token.type === 'tableHead') {\n      afterHeadAwaitingFirstBodyRow = true;\n      lastTableEnd = index;\n    } else if (token.type === 'tableRow' || token.type === 'tableDelimiterRow') {\n      lastTableEnd = index;\n      if (lastCell[1] !== 0) {\n        cell[0] = cell[1];\n        currentCell = flushCell(map, context, lastCell, rowKind, index, currentCell);\n      } else if (cell[1] !== 0) {\n        currentCell = flushCell(map, context, cell, rowKind, index, currentCell);\n      }\n      rowKind = 0;\n    } else if (rowKind && (token.type === \"data\" || token.type === 'tableDelimiterMarker' || token.type === 'tableDelimiterFiller')) {\n      cell[3] = index;\n    }\n  }\n  if (lastTableEnd !== 0) {\n    flushTableEnd(map, context, lastTableEnd, currentTable, currentBody);\n  }\n  map.consume(context.events);\n\n  // To do: move this into `html`, when events are exposed there.\n  // Thats what `markdown-rs` does.\n  // That needs updates to `mdast-util-gfm-table`.\n  index = -1;\n  while (++index < context.events.length) {\n    const event = context.events[index];\n    if (event[0] === 'enter' && event[1].type === 'table') {\n      event[1]._align = gfmTableAlign(context.events, index);\n    }\n  }\n  return events;\n}\n\n/**\n * Generate a cell.\n *\n * @param {EditMap} map\n * @param {Readonly<TokenizeContext>} context\n * @param {Readonly<Range>} range\n * @param {RowKind} rowKind\n * @param {number | undefined} rowEnd\n * @param {Token | undefined} previousCell\n * @returns {Token | undefined}\n */\n// eslint-disable-next-line max-params\nfunction flushCell(map, context, range, rowKind, rowEnd, previousCell) {\n  // `markdown-rs` uses:\n  // rowKind === 2 ? 'tableDelimiterCell' : 'tableCell'\n  const groupName = rowKind === 1 ? 'tableHeader' : rowKind === 2 ? 'tableDelimiter' : 'tableData';\n  // `markdown-rs` uses:\n  // rowKind === 2 ? 'tableDelimiterCellValue' : 'tableCellText'\n  const valueName = 'tableContent';\n\n  // Insert an exit for the previous cell, if there is one.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //          ^-- exit\n  //           ^^^^-- this cell\n  // ```\n  if (range[0] !== 0) {\n    previousCell.end = Object.assign({}, getPoint(context.events, range[0]));\n    map.add(range[0], 0, [['exit', previousCell, context]]);\n  }\n\n  // Insert enter of this cell.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //           ^-- enter\n  //           ^^^^-- this cell\n  // ```\n  const now = getPoint(context.events, range[1]);\n  previousCell = {\n    type: groupName,\n    start: Object.assign({}, now),\n    // Note: correct end is set later.\n    end: Object.assign({}, now)\n  };\n  map.add(range[1], 0, [['enter', previousCell, context]]);\n\n  // Insert text start at first data start and end at last data end, and\n  // remove events between.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //            ^-- enter\n  //             ^-- exit\n  //           ^^^^-- this cell\n  // ```\n  if (range[2] !== 0) {\n    const relatedStart = getPoint(context.events, range[2]);\n    const relatedEnd = getPoint(context.events, range[3]);\n    /** @type {Token} */\n    const valueToken = {\n      type: valueName,\n      start: Object.assign({}, relatedStart),\n      end: Object.assign({}, relatedEnd)\n    };\n    map.add(range[2], 0, [['enter', valueToken, context]]);\n    if (rowKind !== 2) {\n      // Fix positional info on remaining events\n      const start = context.events[range[2]];\n      const end = context.events[range[3]];\n      start[1].end = Object.assign({}, end[1].end);\n      start[1].type = \"chunkText\";\n      start[1].contentType = \"text\";\n\n      // Remove if needed.\n      if (range[3] > range[2] + 1) {\n        const a = range[2] + 1;\n        const b = range[3] - range[2] - 1;\n        map.add(a, b, []);\n      }\n    }\n    map.add(range[3] + 1, 0, [['exit', valueToken, context]]);\n  }\n\n  // Insert an exit for the last cell, if at the row end.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //                    ^-- exit\n  //               ^^^^^^-- this cell (the last one contains two between parts)\n  // ```\n  if (rowEnd !== undefined) {\n    previousCell.end = Object.assign({}, getPoint(context.events, rowEnd));\n    map.add(rowEnd, 0, [['exit', previousCell, context]]);\n    previousCell = undefined;\n  }\n  return previousCell;\n}\n\n/**\n * Generate table end (and table body end).\n *\n * @param {Readonly<EditMap>} map\n * @param {Readonly<TokenizeContext>} context\n * @param {number} index\n * @param {Token} table\n * @param {Token | undefined} tableBody\n */\n// eslint-disable-next-line max-params\nfunction flushTableEnd(map, context, index, table, tableBody) {\n  /** @type {Array<Event>} */\n  const exits = [];\n  const related = getPoint(context.events, index);\n  if (tableBody) {\n    tableBody.end = Object.assign({}, related);\n    exits.push(['exit', tableBody, context]);\n  }\n  table.end = Object.assign({}, related);\n  exits.push(['exit', table, context]);\n  map.add(index + 1, 0, exits);\n}\n\n/**\n * @param {Readonly<Array<Event>>} events\n * @param {number} index\n * @returns {Readonly<Point>}\n */\nfunction getPoint(events, index) {\n  const event = events[index];\n  const side = event[0] === 'enter' ? 'start' : 'end';\n  return event[1][side];\n}","/**\n * @import {Extension, State, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownLineEndingOrSpace, markdownSpace } from 'micromark-util-character';\nconst tasklistCheck = {\n  name: 'tasklistCheck',\n  tokenize: tokenizeTasklistCheck\n};\n\n/**\n * Create an HTML extension for `micromark` to support GFM task list items\n * syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `htmlExtensions` to\n *   support GFM task list items when serializing to HTML.\n */\nexport function gfmTaskListItem() {\n  return {\n    text: {\n      [91]: tasklistCheck\n    }\n  };\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTasklistCheck(effects, ok, nok) {\n  const self = this;\n  return open;\n\n  /**\n   * At start of task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (\n    // Exit if theres stuff before.\n    self.previous !== null ||\n    // Exit if not in the first content that is the first child of a list\n    // item.\n    !self._gfmTasklistFirstContentOfListItem) {\n      return nok(code);\n    }\n    effects.enter('taskListCheck');\n    effects.enter('taskListCheckMarker');\n    effects.consume(code);\n    effects.exit('taskListCheckMarker');\n    return inside;\n  }\n\n  /**\n   * In task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // Currently we match how GH works in files.\n    // To match how GH works in comments, use `markdownSpace` (`[\\t ]`) instead\n    // of `markdownLineEndingOrSpace` (`[\\t\\n\\r ]`).\n    if (markdownLineEndingOrSpace(code)) {\n      effects.enter('taskListCheckValueUnchecked');\n      effects.consume(code);\n      effects.exit('taskListCheckValueUnchecked');\n      return close;\n    }\n    if (code === 88 || code === 120) {\n      effects.enter('taskListCheckValueChecked');\n      effects.consume(code);\n      effects.exit('taskListCheckValueChecked');\n      return close;\n    }\n    return nok(code);\n  }\n\n  /**\n   * At close of task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function close(code) {\n    if (code === 93) {\n      effects.enter('taskListCheckMarker');\n      effects.consume(code);\n      effects.exit('taskListCheckMarker');\n      effects.exit('taskListCheck');\n      return after;\n    }\n    return nok(code);\n  }\n\n  /**\n   * @type {State}\n   */\n  function after(code) {\n    // EOL in paragraph means there must be something else after it.\n    if (markdownLineEnding(code)) {\n      return ok(code);\n    }\n\n    // Space or tab?\n    // Check what comes after.\n    if (markdownSpace(code)) {\n      return effects.check({\n        tokenize: spaceThenNonSpace\n      }, ok, nok)(code);\n    }\n\n    // EOF, or non-whitespace, both wrong.\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction spaceThenNonSpace(effects, ok, nok) {\n  return factorySpace(effects, after, \"whitespace\");\n\n  /**\n   * After whitespace, after task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // EOF means there was nothing, so bad.\n    // EOL means theres content after it, so good.\n    // Impossible to have more spaces.\n    // Anything else is good.\n    return code === null ? nok(code) : ok(code);\n  }\n}","/**\n * @typedef {import('micromark-extension-gfm-footnote').HtmlOptions} HtmlOptions\n * @typedef {import('micromark-extension-gfm-strikethrough').Options} Options\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n */\n\nimport {\n  combineExtensions,\n  combineHtmlExtensions\n} from 'micromark-util-combine-extensions'\nimport {\n  gfmAutolinkLiteral,\n  gfmAutolinkLiteralHtml\n} from 'micromark-extension-gfm-autolink-literal'\nimport {gfmFootnote, gfmFootnoteHtml} from 'micromark-extension-gfm-footnote'\nimport {\n  gfmStrikethrough,\n  gfmStrikethroughHtml\n} from 'micromark-extension-gfm-strikethrough'\nimport {gfmTable, gfmTableHtml} from 'micromark-extension-gfm-table'\nimport {gfmTagfilterHtml} from 'micromark-extension-gfm-tagfilter'\nimport {\n  gfmTaskListItem,\n  gfmTaskListItemHtml\n} from 'micromark-extension-gfm-task-list-item'\n\n/**\n * Create an extension for `micromark` to enable GFM syntax.\n *\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n *\n *   Passed to `micromark-extens-gfm-strikethrough`.\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   syntax.\n */\nexport function gfm(options) {\n  return combineExtensions([\n    gfmAutolinkLiteral(),\n    gfmFootnote(),\n    gfmStrikethrough(options),\n    gfmTable(),\n    gfmTaskListItem()\n  ])\n}\n\n/**\n * Create an extension for `micromark` to support GFM when serializing to HTML.\n *\n * @param {HtmlOptions | null | undefined} [options]\n *   Configuration (optional).\n *\n *   Passed to `micromark-extens-gfm-footnote`.\n * @returns {HtmlExtension}\n *   Extension for `micromark` that can be passed in `htmlExtensions` to\n *   support GFM when serializing to HTML.\n */\nexport function gfmHtml(options) {\n  return combineHtmlExtensions([\n    gfmAutolinkLiteralHtml(),\n    gfmFootnoteHtml(options),\n    gfmStrikethroughHtml(),\n    gfmTableHtml(),\n    gfmTagfilterHtml(),\n    gfmTaskListItemHtml()\n  ])\n}\n","/**\n * @import {RegExpMatchObject, ReplaceFunction} from 'mdast-util-find-and-replace'\n * @import {CompileContext, Extension as FromMarkdownExtension, Handle as FromMarkdownHandle, Transform as FromMarkdownTransform} from 'mdast-util-from-markdown'\n * @import {ConstructName, Options as ToMarkdownExtension} from 'mdast-util-to-markdown'\n * @import {Link, PhrasingContent} from 'mdast'\n */\n\nimport {ccount} from 'ccount'\nimport {ok as assert} from 'devlop'\nimport {unicodePunctuation, unicodeWhitespace} from 'micromark-util-character'\nimport {findAndReplace} from 'mdast-util-find-and-replace'\n\n/** @type {ConstructName} */\nconst inConstruct = 'phrasing'\n/** @type {Array<ConstructName>} */\nconst notInConstruct = ['autolink', 'link', 'image', 'label']\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM autolink\n * literals in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n */\nexport function gfmAutolinkLiteralFromMarkdown() {\n  return {\n    transforms: [transformGfmAutolinkLiterals],\n    enter: {\n      literalAutolink: enterLiteralAutolink,\n      literalAutolinkEmail: enterLiteralAutolinkValue,\n      literalAutolinkHttp: enterLiteralAutolinkValue,\n      literalAutolinkWww: enterLiteralAutolinkValue\n    },\n    exit: {\n      literalAutolink: exitLiteralAutolink,\n      literalAutolinkEmail: exitLiteralAutolinkEmail,\n      literalAutolinkHttp: exitLiteralAutolinkHttp,\n      literalAutolinkWww: exitLiteralAutolinkWww\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM autolink\n * literals in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n */\nexport function gfmAutolinkLiteralToMarkdown() {\n  return {\n    unsafe: [\n      {\n        character: '@',\n        before: '[+\\\\-.\\\\w]',\n        after: '[\\\\-.\\\\w]',\n        inConstruct,\n        notInConstruct\n      },\n      {\n        character: '.',\n        before: '[Ww]',\n        after: '[\\\\-.\\\\w]',\n        inConstruct,\n        notInConstruct\n      },\n      {\n        character: ':',\n        before: '[ps]',\n        after: '\\\\/',\n        inConstruct,\n        notInConstruct\n      }\n    ]\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolink(token) {\n  this.enter({type: 'link', title: null, url: '', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolinkValue(token) {\n  this.config.enter.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkHttp(token) {\n  this.config.exit.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkWww(token) {\n  this.config.exit.data.call(this, token)\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'link')\n  node.url = 'http://' + this.sliceSerialize(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkEmail(token) {\n  this.config.exit.autolinkEmail.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolink(token) {\n  this.exit(token)\n}\n\n/** @type {FromMarkdownTransform} */\nfunction transformGfmAutolinkLiterals(tree) {\n  findAndReplace(\n    tree,\n    [\n      [/(https?:\\/\\/|www(?=\\.))([-.\\w]+)([^ \\t\\r\\n]*)/gi, findUrl],\n      [/(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)/gu, findEmail]\n    ],\n    {ignore: ['link', 'linkReference']}\n  )\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} protocol\n * @param {string} domain\n * @param {string} path\n * @param {RegExpMatchObject} match\n * @returns {Array<PhrasingContent> | Link | false}\n */\n// eslint-disable-next-line max-params\nfunction findUrl(_, protocol, domain, path, match) {\n  let prefix = ''\n\n  // Not an expected previous character.\n  if (!previous(match)) {\n    return false\n  }\n\n  // Treat `www` as part of the domain.\n  if (/^w/i.test(protocol)) {\n    domain = protocol + domain\n    protocol = ''\n    prefix = 'http://'\n  }\n\n  if (!isCorrectDomain(domain)) {\n    return false\n  }\n\n  const parts = splitUrl(domain + path)\n\n  if (!parts[0]) return false\n\n  /** @type {Link} */\n  const result = {\n    type: 'link',\n    title: null,\n    url: prefix + protocol + parts[0],\n    children: [{type: 'text', value: protocol + parts[0]}]\n  }\n\n  if (parts[1]) {\n    return [result, {type: 'text', value: parts[1]}]\n  }\n\n  return result\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} atext\n * @param {string} label\n * @param {RegExpMatchObject} match\n * @returns {Link | false}\n */\nfunction findEmail(_, atext, label, match) {\n  if (\n    // Not an expected previous character.\n    !previous(match, true) ||\n    // Label ends in not allowed character.\n    /[-\\d_]$/.test(label)\n  ) {\n    return false\n  }\n\n  return {\n    type: 'link',\n    title: null,\n    url: 'mailto:' + atext + '@' + label,\n    children: [{type: 'text', value: atext + '@' + label}]\n  }\n}\n\n/**\n * @param {string} domain\n * @returns {boolean}\n */\nfunction isCorrectDomain(domain) {\n  const parts = domain.split('.')\n\n  if (\n    parts.length < 2 ||\n    (parts[parts.length - 1] &&\n      (/_/.test(parts[parts.length - 1]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 1]))) ||\n    (parts[parts.length - 2] &&\n      (/_/.test(parts[parts.length - 2]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 2])))\n  ) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * @param {string} url\n * @returns {[string, string | undefined]}\n */\nfunction splitUrl(url) {\n  const trailExec = /[!\"&'),.:;<>?\\]}]+$/.exec(url)\n\n  if (!trailExec) {\n    return [url, undefined]\n  }\n\n  url = url.slice(0, trailExec.index)\n\n  let trail = trailExec[0]\n  let closingParenIndex = trail.indexOf(')')\n  const openingParens = ccount(url, '(')\n  let closingParens = ccount(url, ')')\n\n  while (closingParenIndex !== -1 && openingParens > closingParens) {\n    url += trail.slice(0, closingParenIndex + 1)\n    trail = trail.slice(closingParenIndex + 1)\n    closingParenIndex = trail.indexOf(')')\n    closingParens++\n  }\n\n  return [url, trail]\n}\n\n/**\n * @param {RegExpMatchObject} match\n * @param {boolean | null | undefined} [email=false]\n * @returns {boolean}\n */\nfunction previous(match, email) {\n  const code = match.input.charCodeAt(match.index - 1)\n\n  return (\n    (match.index === 0 ||\n      unicodeWhitespace(code) ||\n      unicodePunctuation(code)) &&\n    // If its an email, the previous character should not be a slash.\n    (!email || code !== 47)\n  )\n}\n","/**\n * @import {\n *   CompileContext,\n *   Extension as FromMarkdownExtension,\n *   Handle as FromMarkdownHandle\n * } from 'mdast-util-from-markdown'\n * @import {ToMarkdownOptions} from 'mdast-util-gfm-footnote'\n * @import {\n *   Handle as ToMarkdownHandle,\n *   Map,\n *   Options as ToMarkdownExtension\n * } from 'mdast-util-to-markdown'\n * @import {FootnoteDefinition, FootnoteReference} from 'mdast'\n */\n\nimport {ok as assert} from 'devlop'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\n\nfootnoteReference.peek = footnoteReferencePeek\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteCallString() {\n  this.buffer()\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteCall(token) {\n  this.enter({type: 'footnoteReference', identifier: '', label: ''}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteDefinitionLabelString() {\n  this.buffer()\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteDefinition(token) {\n  this.enter(\n    {type: 'footnoteDefinition', identifier: '', label: '', children: []},\n    token\n  )\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteCallString(token) {\n  const label = this.resume()\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'footnoteReference')\n  node.identifier = normalizeIdentifier(\n    this.sliceSerialize(token)\n  ).toLowerCase()\n  node.label = label\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteCall(token) {\n  this.exit(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteDefinitionLabelString(token) {\n  const label = this.resume()\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'footnoteDefinition')\n  node.identifier = normalizeIdentifier(\n    this.sliceSerialize(token)\n  ).toLowerCase()\n  node.label = label\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteDefinition(token) {\n  this.exit(token)\n}\n\n/** @type {ToMarkdownHandle} */\nfunction footnoteReferencePeek() {\n  return '['\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {FootnoteReference} node\n */\nfunction footnoteReference(node, _, state, info) {\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[^')\n  const exit = state.enter('footnoteReference')\n  const subexit = state.enter('reference')\n  value += tracker.move(\n    state.safe(state.associationId(node), {after: ']', before: value})\n  )\n  subexit()\n  exit()\n  value += tracker.move(']')\n  return value\n}\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM footnotes\n * in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown`.\n */\nexport function gfmFootnoteFromMarkdown() {\n  return {\n    enter: {\n      gfmFootnoteCallString: enterFootnoteCallString,\n      gfmFootnoteCall: enterFootnoteCall,\n      gfmFootnoteDefinitionLabelString: enterFootnoteDefinitionLabelString,\n      gfmFootnoteDefinition: enterFootnoteDefinition\n    },\n    exit: {\n      gfmFootnoteCallString: exitFootnoteCallString,\n      gfmFootnoteCall: exitFootnoteCall,\n      gfmFootnoteDefinitionLabelString: exitFootnoteDefinitionLabelString,\n      gfmFootnoteDefinition: exitFootnoteDefinition\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM footnotes\n * in markdown.\n *\n * @param {ToMarkdownOptions | null | undefined} [options]\n *   Configuration (optional).\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown`.\n */\nexport function gfmFootnoteToMarkdown(options) {\n  // To do: next major: change default.\n  let firstLineBlank = false\n\n  if (options && options.firstLineBlank) {\n    firstLineBlank = true\n  }\n\n  return {\n    handlers: {footnoteDefinition, footnoteReference},\n    // This is on by default already.\n    unsafe: [{character: '[', inConstruct: ['label', 'phrasing', 'reference']}]\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {FootnoteDefinition} node\n   */\n  function footnoteDefinition(node, _, state, info) {\n    const tracker = state.createTracker(info)\n    let value = tracker.move('[^')\n    const exit = state.enter('footnoteDefinition')\n    const subexit = state.enter('label')\n    value += tracker.move(\n      state.safe(state.associationId(node), {before: value, after: ']'})\n    )\n    subexit()\n\n    value += tracker.move(']:')\n\n    if (node.children && node.children.length > 0) {\n      tracker.shift(4)\n\n      value += tracker.move(\n        (firstLineBlank ? '\\n' : ' ') +\n          state.indentLines(\n            state.containerFlow(node, tracker.current()),\n            firstLineBlank ? mapAll : mapExceptFirst\n          )\n      )\n    }\n\n    exit()\n\n    return value\n  }\n}\n\n/** @type {Map} */\nfunction mapExceptFirst(line, index, blank) {\n  return index === 0 ? line : mapAll(line, index, blank)\n}\n\n/** @type {Map} */\nfunction mapAll(line, index, blank) {\n  return (blank ? '' : '    ') + line\n}\n","/**\n * @typedef {import('mdast').Delete} Delete\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n *\n * @typedef {import('mdast-util-to-markdown').ConstructName} ConstructName\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n */\n\n/**\n * List of constructs that occur in phrasing (paragraphs, headings), but cannot\n * contain strikethrough.\n * So they sort of cancel each other out.\n * Note: could use a better name.\n *\n * Note: keep in sync with: <https://github.com/syntax-tree/mdast-util-to-markdown/blob/8ce8dbf/lib/unsafe.js#L14>\n *\n * @type {Array<ConstructName>}\n */\nconst constructsWithoutStrikethrough = [\n  'autolink',\n  'destinationLiteral',\n  'destinationRaw',\n  'reference',\n  'titleQuote',\n  'titleApostrophe'\n]\n\nhandleDelete.peek = peekDelete\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughFromMarkdown() {\n  return {\n    canContainEols: ['delete'],\n    enter: {strikethrough: enterStrikethrough},\n    exit: {strikethrough: exitStrikethrough}\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughToMarkdown() {\n  return {\n    unsafe: [\n      {\n        character: '~',\n        inConstruct: 'phrasing',\n        notInConstruct: constructsWithoutStrikethrough\n      }\n    ],\n    handlers: {delete: handleDelete}\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterStrikethrough(token) {\n  this.enter({type: 'delete', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitStrikethrough(token) {\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {Delete} node\n */\nfunction handleDelete(node, _, state, info) {\n  const tracker = state.createTracker(info)\n  const exit = state.enter('strikethrough')\n  let value = tracker.move('~~')\n  value += state.containerPhrasing(node, {\n    ...tracker.current(),\n    before: value,\n    after: '~'\n  })\n  value += tracker.move('~~')\n  exit()\n  return value\n}\n\n/** @type {ToMarkdownHandle} */\nfunction peekDelete() {\n  return '~'\n}\n","/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n */\n\nimport {ok as assert} from 'devlop'\nimport {defaultHandlers} from 'mdast-util-to-markdown'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM task\n * list items in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM task list items.\n */\nexport function gfmTaskListItemFromMarkdown() {\n  return {\n    exit: {\n      taskListCheckValueChecked: exitCheck,\n      taskListCheckValueUnchecked: exitCheck,\n      paragraph: exitParagraphWithTaskListItem\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM task list\n * items in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM task list items.\n */\nexport function gfmTaskListItemToMarkdown() {\n  return {\n    unsafe: [{atBreak: true, character: '-', after: '[:|-]'}],\n    handlers: {listItem: listItemWithTaskListItem}\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitCheck(token) {\n  // Were always in a paragraph, in a list item.\n  const node = this.stack[this.stack.length - 2]\n  assert(node.type === 'listItem')\n  node.checked = token.type === 'taskListCheckValueChecked'\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitParagraphWithTaskListItem(token) {\n  const parent = this.stack[this.stack.length - 2]\n\n  if (\n    parent &&\n    parent.type === 'listItem' &&\n    typeof parent.checked === 'boolean'\n  ) {\n    const node = this.stack[this.stack.length - 1]\n    assert(node.type === 'paragraph')\n    const head = node.children[0]\n\n    if (head && head.type === 'text') {\n      const siblings = parent.children\n      let index = -1\n      /** @type {Paragraph | undefined} */\n      let firstParaghraph\n\n      while (++index < siblings.length) {\n        const sibling = siblings[index]\n        if (sibling.type === 'paragraph') {\n          firstParaghraph = sibling\n          break\n        }\n      }\n\n      if (firstParaghraph === node) {\n        // Must start with a space or a tab.\n        head.value = head.value.slice(1)\n\n        if (head.value.length === 0) {\n          node.children.shift()\n        } else if (\n          node.position &&\n          head.position &&\n          typeof head.position.start.offset === 'number'\n        ) {\n          head.position.start.column++\n          head.position.start.offset++\n          node.position.start = Object.assign({}, head.position.start)\n        }\n      }\n    }\n  }\n\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {ListItem} node\n */\nfunction listItemWithTaskListItem(node, parent, state, info) {\n  const head = node.children[0]\n  const checkable =\n    typeof node.checked === 'boolean' && head && head.type === 'paragraph'\n  const checkbox = '[' + (node.checked ? 'x' : ' ') + '] '\n  const tracker = state.createTracker(info)\n\n  if (checkable) {\n    tracker.move(checkbox)\n  }\n\n  let value = defaultHandlers.listItem(node, parent, state, {\n    ...info,\n    ...tracker.current()\n  })\n\n  if (checkable) {\n    value = value.replace(/^(?:[*+-]|\\d+\\.)([\\r\\n]| {1,3})/, check)\n  }\n\n  return value\n\n  /**\n   * @param {string} $0\n   * @returns {string}\n   */\n  function check($0) {\n    return $0 + checkbox\n  }\n}\n","/**\n * @import {Extension as FromMarkdownExtension} from 'mdast-util-from-markdown'\n * @import {Options} from 'mdast-util-gfm'\n * @import {Options as ToMarkdownExtension} from 'mdast-util-to-markdown'\n */\n\nimport {\n  gfmAutolinkLiteralFromMarkdown,\n  gfmAutolinkLiteralToMarkdown\n} from 'mdast-util-gfm-autolink-literal'\nimport {\n  gfmFootnoteFromMarkdown,\n  gfmFootnoteToMarkdown\n} from 'mdast-util-gfm-footnote'\nimport {\n  gfmStrikethroughFromMarkdown,\n  gfmStrikethroughToMarkdown\n} from 'mdast-util-gfm-strikethrough'\nimport {gfmTableFromMarkdown, gfmTableToMarkdown} from 'mdast-util-gfm-table'\nimport {\n  gfmTaskListItemFromMarkdown,\n  gfmTaskListItemToMarkdown\n} from 'mdast-util-gfm-task-list-item'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM (autolink\n * literals, footnotes, strikethrough, tables, tasklists).\n *\n * @returns {Array<FromMarkdownExtension>}\n *   Extension for `mdast-util-from-markdown` to enable GFM (autolink literals,\n *   footnotes, strikethrough, tables, tasklists).\n */\nexport function gfmFromMarkdown() {\n  return [\n    gfmAutolinkLiteralFromMarkdown(),\n    gfmFootnoteFromMarkdown(),\n    gfmStrikethroughFromMarkdown(),\n    gfmTableFromMarkdown(),\n    gfmTaskListItemFromMarkdown()\n  ]\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM (autolink\n * literals, footnotes, strikethrough, tables, tasklists).\n *\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM (autolink literals,\n *   footnotes, strikethrough, tables, tasklists).\n */\nexport function gfmToMarkdown(options) {\n  return {\n    extensions: [\n      gfmAutolinkLiteralToMarkdown(),\n      gfmFootnoteToMarkdown(options),\n      gfmStrikethroughToMarkdown(),\n      gfmTableToMarkdown(options),\n      gfmTaskListItemToMarkdown()\n    ]\n  }\n}\n","import type { Plugin } from 'unified'\nimport { gfmTableFromMarkdown } from 'mdast-util-gfm-table'\nimport { gfm } from 'micromark-extension-gfm'\nimport { gfmToMarkdown } from 'mdast-util-gfm'\n\n/**\n * Custom wrapper around remark-gfm that ensures the data object is initialized\n * This fixes the \"Cannot set properties of undefined (setting 'inTable')\" error\n * that occurs when pasting tables\n */\nexport function customRemarkGfm(): Plugin {\n  // Return a plugin function that initializes the data object\n  return function(this: any) {\n    // Make sure 'this' exists\n    if (!this) {\n      return;\n    }\n    \n    // Initialize the data object on the processor\n    // @ts-ignore - We're accessing internal properties to fix the issue\n    if (!this.data) {\n      // @ts-ignore\n      this.data = {};\n    } else if (typeof this.data === 'function') {\n      // Call data() to ensure the data object is initialized\n      this.data();\n    }\n    \n    // Create a direct implementation of the remarkGfm plugin\n    // This avoids calling the original plugin which might have issues\n    \n    // @ts-ignore - We're accessing internal properties\n    const data = typeof this.data === 'function' ? this.data() : this.data;\n    \n    // Initialize the extensions arrays if they don't exist\n    const micromarkExtensions = data.micromarkExtensions || (data.micromarkExtensions = []);\n    const fromMarkdownExtensions = data.fromMarkdownExtensions || (data.fromMarkdownExtensions = []);\n    const toMarkdownExtensions = data.toMarkdownExtensions || (data.toMarkdownExtensions = []);\n    \n    // Add the GFM extensions\n    // We're using the original extensions from remark-gfm\n    // @ts-ignore - We're accessing internal properties\n    micromarkExtensions.push(gfm());\n    \n    // Create a patched version of gfmTableFromMarkdown\n    const patchedFromMarkdown = function() {\n      const extension = gfmTableFromMarkdown();\n      \n      // Make sure enter exists\n      if (extension.enter) {\n        // Patch the enterTable function\n        const originalEnterTable = extension.enter.table;\n        if (originalEnterTable) {\n          extension.enter.table = function(token) {\n            // Make sure this.data exists before the original function is called\n            if (!this.data) {\n              this.data = {};\n            }\n            \n            // Call the original function\n            originalEnterTable.call(this, token);\n            \n            // Make sure inTable is set\n            this.data.inTable = true;\n          };\n        }\n      }\n      \n      // Make sure exit exists and patch the exitTable function\n      if (extension.exit) {\n        const originalExitTable = extension.exit.table;\n        if (originalExitTable) {\n          extension.exit.table = function(token) {\n            // Make sure this.data exists before the original function is called\n            if (!this.data) {\n              this.data = {};\n            }\n            \n            // Call the original function\n            originalExitTable.call(this, token);\n            \n            // Make sure inTable is safely unset\n            if (this.data) {\n              this.data.inTable = undefined;\n            }\n          };\n        }\n      }\n      \n      return extension;\n    };\n    \n    // Add our patched extensions\n    fromMarkdownExtensions.push(patchedFromMarkdown());\n    // @ts-ignore - We're accessing internal properties\n    toMarkdownExtensions.push(gfmToMarkdown());\n    \n    return undefined; // Return undefined as the plugin doesn't need to return anything\n  }\n}\n","import { Element } from \"./types\"\n\n/**\n * Function to escape forward slashes in URLs, but only for plain text URLs (not in markdown links)\n * This is necessary because the markdown parser doesn't handle unescaped forward slashes in URLs correctly\n */\nexport function escapeUrlSlashes(text: string): string {\n  // First, we need to identify markdown links to exclude them\n  const markdownLinkPattern = /\\[([^\\]]+)\\]\\(([^)]+)\\)/g;\n\n  // Store the markdown links to restore them later\n  const links: string[] = [];\n  let linkIndex = 0;\n\n  // Replace markdown links with placeholders\n  const textWithoutLinks = text.replace(markdownLinkPattern, (match) => {\n    links.push(match);\n    return `__MARKDOWN_LINK_${linkIndex++}__`;\n  });\n\n  // URL regex pattern to identify plain text URLs\n  const urlPattern = /(https?:\\/\\/[^\\s]+)/g;\n\n  // Escape forward slashes in plain text URLs\n  const textWithEscapedUrls = textWithoutLinks.replace(urlPattern, (url) => {\n    return url.replace(/\\//g, '\\\\/');\n  });\n\n  // Restore the markdown links\n  let result = textWithEscapedUrls;\n  for (let i = 0; i < links.length; i++) {\n    result = result.replace(`__MARKDOWN_LINK_${i}__`, links[i]);\n  }\n\n  return result;\n}\n\n/**\n * Function to unescape forward slashes in URLs that were previously escaped\n * This is used when switching to raw mode to display the unescaped markdown\n */\nexport function unescapeUrlSlashes(text: string): string {\n  // Unescape all escaped characters in the text\n  return text.replace(/\\\\(.)/g, (match, char) => {\n    return char;\n  });\n}\n\nexport function assert(pass: boolean, message: string) {\n  if (!pass) throw new Error(`${message}`)\n}\n\nexport function assertElementType(element: Element, type: Element[\"type\"]) {\n  if (element.type !== type)\n    throw new Error(\n      `Expected element to be of type ${JSON.stringify(\n        element\n      )} but is ${JSON.stringify(element, null, 2)}`\n    )\n}\n\nexport function assertUnreachable(x: never): never {\n  throw new Error(\n    `Didn't expect to get here with value ${JSON.stringify(x, null, 2)}`\n  )\n}\n","import type { Blockquote } from \"mdast\"\n\nimport { Element } from \"../types\"\nimport { parseContents } from \"./parse-content\"\n\nexport function parseBlockquote(content: Blockquote): Element[] {\n  return [{ type: \"block-quote\", children: parseContents(content.children) }]\n}\n","import type { Code } from \"mdast\"\n\nimport { Element } from \"../types\"\n\nexport function parseCodeBlock(content: Code): Element[] {\n  const codeLines = content.value.split(\"\\n\")\n  return [\n    {\n      type: \"code-block\",\n      language: content.lang || \"text\",\n      children: codeLines.map((codeLine) => ({\n        type: \"code-block-line\",\n        children: [{ text: codeLine }],\n      })),\n    },\n  ]\n}\n","import type { FootnoteDefinition } from \"mdast\"\n\nimport { Element } from \"../types\"\nimport { parseContents } from \"./parse-content\"\n\n/**\n * GitHub Flavored Markdown does not support footnotes and therefore, at the\n * moment, Wysimark does not support footnotes.\n *\n * However, we do provide some compatibility. Remarks, by default, parses\n * Footnote Definitions and we convert them into a blockquote. We insert an\n * extra paragraph at the top that contains the footnote identifier in square\n * brackets like `[1]`\n */\nexport function parseFootnoteDefinition(\n  footnote: FootnoteDefinition\n): Element[] {\n  return [\n    {\n      type: \"block-quote\",\n      children: [\n        /**\n         * Insert an initial paragraph with the footnote identifier in square\n         * brackets.\n         */\n        { type: \"paragraph\", children: [{ text: `[${footnote.identifier}]` }] },\n        /**\n         * The rest of the children are parsed as is and supports the full range\n         * of element types like headings, lists and nested block quotes.\n         */\n        ...parseContents(footnote.children),\n      ],\n    },\n  ]\n}\n","import * as Slate from \"slate\"\n\nimport { AnchorElement } from \"~/src/anchor-plugin\"\n\nimport { Segment, Text } from \"../../../types\"\nimport { LineElement, Node } from \"../normalize-line/types\"\n\n/**\n * Is this a Text Node\n */\nexport function isText(segment: Node | undefined): segment is Text {\n  return Slate.Text.isText(segment)\n}\n\n/**\n * Is this an Element Node\n *\n * In the context of our normalizers, passing `isElement` means that it is\n * a `LineElement` or `AnchorElement`\n *\n * TODO:\n *\n * We should also add the following in the future:\n *\n * - `ImageInlineElement`\n * - `AttachmentElement`\n */\nexport function isElement(\n  segment: Node\n): segment is LineElement | AnchorElement {\n  return Slate.Element.isElement(segment)\n}\n\n/**\n * Identify this as a plain, non-code Text space. This is fairly specific\n * because we only want to manipulate non-code Text spaces. If the Text is\n * `code` then we can apply our marks next to it.\n *\n * - Does the passed in `Text` node made up of only one or more spaces\n * - The `Text` node must not be `code`\n */\nexport function isPlainSpace(segment: Segment): boolean {\n  return (\n    Slate.Text.isText(segment) && !!segment.text.match(/^\\s+$/) && !segment.code\n  )\n}\n","import { MarkKey } from \"../../../../types\"\n\nexport const MARK_KEY_TO_TOKEN = {\n  bold: \"**\",\n  italic: \"_\",\n  // ins: \"++\",\n  strike: \"~~\",\n  /**\n   * IMPORTANT!\n   *\n   * We noop `code` here.\n   *\n   * We accept the `code` mark so as not to throw an error if it is found. We do\n   * this because we handle `code` text specially because of the way it needs to\n   * be escaped.\n   *\n   * This is handled in the `serializeLine` code.\n   */\n  code: \"\",\n} as Record<MarkKey, string>\n\n/**\n * Convert a single mark to a string\n */\nfunction convertMarkToSymbol(mark: MarkKey): string {\n  if (mark in MARK_KEY_TO_TOKEN) return MARK_KEY_TO_TOKEN[mark]\n  throw new Error(\n    `Could not find mark ${JSON.stringify(mark)} in MARK_KEY_TO_TOKEN lookup`\n  )\n}\n\n/**\n * Convert an array of marks to a string\n */\nexport function convertMarksToSymbolsExceptCode(marks: MarkKey[]) {\n  return marks.map(convertMarkToSymbol).join(\"\")\n}\n","import { Text as SlateText } from \"slate\"\n\nimport { MarkKey, Segment, Text } from \"../../../../types\"\nimport { isPlainSpace, isText } from \"../is-utils\"\n\n/**\n * Gets all the marks in current `Text`\n */\nexport function getMarksFromText(text: Text): MarkKey[] {\n  /**\n   * disable esling to eat the `_` without throwing an error\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { text: _, ...marks } = text\n  return Object.keys(marks) as MarkKey[]\n}\n\n/**\n * Gets all the marks from the current segment\n */\nexport function getMarksFromSegment(segment: Segment): MarkKey[] {\n  if (SlateText.isText(segment)) {\n    if (isPlainSpace(segment)) {\n      throw new Error(\n        `You probably didn't mean to do this. We should only be getting marks from segments that are not plain space segments.`\n      )\n    }\n    return getMarksFromText(segment)\n  } else if (segment.type === \"anchor\") {\n    return getCommonAnchorMarks(segment.children as Segment[])\n  } else {\n    /**\n     * TODO: Need to handle images still.\n     */\n    throw new Error(`Unhandled type ${segment.type}`)\n  }\n}\n\nexport function getCommonAnchorMarks(segments: Segment[]): MarkKey[] {\n  let commonMarks: MarkKey[] | undefined\n  for (const segment of segments) {\n    if (!isText(segment)) {\n      /**\n       * Use this to test for images in anchors\n       *\n       * [![Semantic description](https://roneo.org/img/ok.png \"Your title\")](http://jamstack.club)\n       */\n      if (segment.type === \"image-inline\") continue\n      /**\n       * TODO: This is not actually true. It can be an inline image which we\n       * still need to add.\n       */\n      throw new Error(\n        `Expected every segment in an anchor to be a Text segment`\n      )\n    }\n    if (isPlainSpace(segment)) continue\n    const currentMarks = getMarksFromText(segment)\n    if (commonMarks === undefined) {\n      commonMarks = currentMarks\n      continue\n    }\n    commonMarks = commonMarks.filter((commonMark) =>\n      currentMarks.includes(commonMark)\n    )\n  }\n  if (commonMarks === undefined)\n    throw new Error(\n      `No text segments were found as children in this anchor which should not be possible`\n    )\n  return commonMarks\n}\n","import { MarkKey } from \"../../../../types\"\n\n/**\n * When adding back marks, this is the order in which we add them back.\n *\n * The order is determined by an educated guess about which marks are more\n * likely to be chaging inside other marks. For example, this is probably pretty\n * common:\n *\n * **This is x^2^**\n *\n * Having a superscript inside of a bold. But it's probably rare to have bold\n * switched on/off inside a superscript.\n */\nconst ORDERED_MARK_KEYS: MarkKey[] = [\n  \"bold\",\n  \"italic\",\n  \"underline\",\n  \"strike\",\n  \"code\",\n]\n\n/**\n * Sort Algorithm\n *\n * https://stackoverflow.com/a/44063445\n */\nexport function sortMarks(marks: MarkKey[]): MarkKey[] {\n  return marks\n    .slice()\n    .sort((a, b) => ORDERED_MARK_KEYS.indexOf(a) - ORDERED_MARK_KEYS.indexOf(b))\n}\n","const ESCAPES = [\n  \"\\\\\", // escape\n  \"`\", // code\n  \"*\", // bold/italic/hr\n  \"_\", // bold/italic/hr\n  \"[\", // link/list\n  \"]\", // link/list\n  \"(\", // link\n  \")\", // link\n  \"#\", // headings\n  \"+\", // list\n  \"-\", // hr/list\n  \".\", // numbered list\n  \"!\", // image\n  \"|\", // table\n  \"^\", // sup\n  \"~\", // sub/strikethrough\n  \"<\", // link/html\n  \">\", // link/html\n  /**\n   * Includes all the characters in the list of Backslash escapes in the example\n   * for GitHub Flavored Markdown.\n   *\n   * https://github.github.com/gfm/#backslash-escapes\n   */\n  \"{\",\n  \"}\",\n  \"=\",\n  \":\",\n  \";\",\n  \"$\",\n  \"%\",\n  \"&\",\n  \"?\",\n  '\"',\n  \"'\",\n  \",\",\n  \"\\\\\",\n  \"/\",\n  \"@\",\n]\n\nconst ESCAPES_REGEXP = new RegExp(\n  `(${ESCAPES.map((symbol) => `\\\\${symbol}`).join(\"|\")})`,\n  \"g\"\n)\n\n/**\n * Escape text that could have an ambiguous meaning in markdown\n */\nexport function escapeText(s: string) {\n  return s.replace(ESCAPES_REGEXP, (s: string) => `\\\\${s}`)\n  // .replace(/\\n/g, \"<br>\")\n}\n","import { Text as SlateText } from \"slate\"\n\nimport { getMarksFromText } from \"../../serialize/serialize-line/utils\"\nimport { Segment, Text } from \"../../types\"\n\n/**\n * This is algorithm checks for equality of marks.\n */\nexport function areMarksEqual(a: Text, b: Text): boolean {\n  const marksA = getMarksFromText(a)\n  const marksB = getMarksFromText(b)\n  /**\n   *\n   * WARNING:\n   *\n   * This algorithm is specific to our use case. a, b contain non-repeated\n   * items. It will fail in other scenarios.\n   *\n   * > If you want to check if both arrays are equals, containing the same\n   * > unsorted items (but not used multiple times)\n   *\n   * https://stackoverflow.com/questions/7837456/how-to-compare-arrays-in-javascript#comment68674302_19746771\n   */\n  return (\n    marksA.length == marksB.length && marksA.every((v) => marksB.includes(v))\n  )\n}\n\n/**\n * Enforces Rule 2\n *\n * Two adjacent texts with the same custom properties will be merged.\n * https://docs.slatejs.org/concepts/11-normalizing\n *\n * normalizeSegment does most of the work for merging two segments with the same\n * marks together.\n *\n * Normally, this method emits the current `segment`; however, if the current\n * segment and the previous segment have the same marks, it instead emits an\n * empty array indicating not to add the current segment. Instead, it merges the\n * current segment text into the text of the previous segment.\n *\n * Enforce Rule 4 (part 3)\n *\n * \"Inline nodes cannot be the first or last child of a parent block, nor can it\n * be next to another inline node in the children array.\"\n *\n * Mainly, it's enforcing the part about the fact that there must be a Text node\n * between two inline Element nodes.\n */\nexport function normalizeSegment(\n  segment: Segment,\n  /**\n   * Let's be explicit that we are doing something unusual here in that we are\n   * mutating the previous segment by naming it as such.\n   */\n  mutablePrevSegment?: Segment\n): Segment[] {\n  const segmentIsText = SlateText.isText(segment)\n  const prevSegmentIsText = SlateText.isText(mutablePrevSegment)\n\n  /**\n   * Rule 4 (part 3):\n   *\n   * If there is a previous segment and the previous segment and the current\n   * segment are both inline elements, we want to insert a space between them\n   * which this does.\n   *\n   * It stops checking for merging two texts with each other since if they are\n   * two inline elements, it doesn't need to check for text anymore.\n   */\n  if (mutablePrevSegment && !prevSegmentIsText && !segmentIsText) {\n    return [{ text: \"\" }, segment]\n  }\n\n  /**\n   * If the current segment is an Inline Element, then we can't merge it so we\n   * return it as is\n   */\n  if (!segmentIsText) return [segment]\n  /**\n   * If the previous segment is an Inline Element or it's node defined, then we\n   * can't merge into it so we return it as is\n   */\n  if (mutablePrevSegment === undefined || !prevSegmentIsText) return [segment]\n\n  /**\n   * If the two Text segments have the same marks, then merge them\n   */\n  const marksEqual = areMarksEqual(mutablePrevSegment, segment)\n  if (marksEqual) {\n    mutablePrevSegment.text = [mutablePrevSegment.text, segment.text].join(\"\")\n    return []\n  }\n\n  return [segment]\n}\n","import { Text as SlateText } from \"slate\"\n\nimport { Segment } from \"../../types\"\nimport { normalizeSegment } from \"./normalize-segment\"\n\n/**\n * After generating segments by just pushing them onto an Array, we want to get\n * them into proper form for use in Slate.\n *\n * Slate expects its data structure to follow [certain\n * rules](https://docs.slatejs.org/concepts/11-normalizing) and we make sure\n * they are followed.\n *\n * These are the rules for segments (text/inline) that we enforce:\n *\n * - Rule 1: All Element nodes must contain at least one Text descendant\n * - Rule 2: Two adjacent texts with the same custom properties will be merged.\n * - Rule 4: Inline nodes cannot be the first or last child of a parent block,\n *   nor can it be next to another inline node in the children array.\n *\n */\nexport function normalizeSegments(segments: Segment[]): Segment[] {\n  const nextSegments: Segment[] = []\n\n  /**\n   * Rule 2:\n   *\n   * Build up the nextSegments. The `normalizeSegment` function called inside\n   * does the work of checking to see if the segment before is a Text with the\n   * exact same marks. If it is, then instead of pushing on another Text\n   * segment, it merges the current segment Text into the previous Segment.\n   *\n   * Rule 4 (part 3):\n   *\n   * It also checks for two inline elements and inserts an empty Text node\n   * between them by emitting a `{text: ''}` before the inline Element segment.\n   */\n  for (let i = 0; i < segments.length; i++) {\n    /**\n     * When we provide the `prevSegment` notice that is is actually the\n     * `prevSegment` from our `nextSegments` and not `segments[i-1]`.\n     *\n     * This is important because `normalizeSegment` will mutate `prevSegment`\n     */\n\n    const mutablePrevSegment: Segment | undefined =\n      nextSegments[nextSegments.length - 1]\n    nextSegments.push(...normalizeSegment(segments[i], mutablePrevSegment))\n  }\n\n  /**\n   * Rule 1:\n   *\n   * If there are no segments, we ensure there is at least one by inserting an\n   * empty Text\n   */\n  if (nextSegments.length === 0) nextSegments.push({ text: \"\" })\n  /**\n   * Rule 4 (part 1 & part 2):\n   *\n   * If the first segment isn't Text, insert a Text\n   */\n  if (!SlateText.isText(nextSegments[0])) nextSegments.unshift({ text: \"\" })\n  /**\n   * Rule 4:\n   *\n   * If the last segment isn't Text, insert a Text\n   */\n  if (!SlateText.isText(nextSegments[nextSegments.length - 1]))\n    nextSegments.push({ text: \"\" })\n  return nextSegments\n}\n","import type { Image } from \"mdast\"\n\nimport { ImageData } from \"./index\"\n\n/**\n * As a fallback, we don't\n */\nexport function parseGenericImage(image: Image): ImageData {\n  return {\n    url: image.url,\n    title: image.title || undefined,\n    alt: image.alt || undefined,\n  }\n}\n","type ParsedUrl = {\n  origin: string\n  hostname: string\n  pathname: string\n  searchParams: URLSearchParams\n  hash: string\n}\n\n/**\n * NOTE: As per the URL spec:\n *\n * - searchParams part does not include the \"?\"\n * - hash part includes the \"#\"\n */\nconst URL_REGEX = /^(\\/[^?#]*)(?:\\?([^#]*))?(#.*)?$/\n\nexport function parseUrl(url: string): ParsedUrl {\n  try {\n    const urlData = new URL(url)\n    return {\n      origin: urlData.origin,\n      hostname: urlData.hostname,\n      pathname: urlData.pathname,\n      searchParams: urlData.searchParams,\n      hash: urlData.hash,\n    }\n  } catch (error) {\n    const matchdata = url.match(URL_REGEX)\n    if (matchdata === null)\n      throw new Error(`Invalid format should not happen: ${url}`)\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const [_, pathname, searchParams, hash] = [...matchdata]\n    return {\n      origin: \"\",\n      hostname: \"\",\n      pathname: pathname || \"\",\n      searchParams: new URLSearchParams(searchParams),\n      hash: hash || \"\",\n    }\n  }\n}\n","/**\n * Takes a `string` in the form `640x480` (i.e. number x number) and return an\n * ImageSize object with `width` and `height`.\n */\nexport function parseSize(\n  s: string | null\n): { width: number; height: number } | null {\n  if (typeof s !== \"string\") return null\n  const sizeMatch = s.match(/^(\\d+)x(\\d+)$/)\n  if (sizeMatch === null) return null\n  return {\n    width: parseInt(sizeMatch[1]),\n    height: parseInt(sizeMatch[2]),\n  }\n}\n","import type { Image } from \"mdast\"\n\nimport { parseUrl } from \"../../../parseUrl\"\nimport { ImageData } from \"./index\"\nimport { parseSize } from \"./parse-utils\"\n\nexport function parsePortiveImage(image: Image): ImageData | undefined {\n  // const url = new URL(image.url)\n  const url = parseUrl(image.url)\n  /**\n   * Only parse portive URL if it is a portive recognized domain\n   */\n  if (!url.hostname.match(/[.]portive[.]com$/i)) return\n  /**\n   * Should have a size param as part of the query string\n   */\n  const sizeParam = url.searchParams.get(\"size\")\n  if (sizeParam === null) return\n  /**\n   * And the query string should parse properly as an ImageSize\n   */\n  const size = parseSize(sizeParam)\n  if (size === null) return\n  /**\n   * The Portive image URL should end in something like `--640x480.jpg` which\n   * identifies its width/height.\n   */\n  const srcSizeMatch = url.pathname.match(/[-][-](\\d+)x(\\d+)[.][a-zA-Z]+$/)\n  if (srcSizeMatch === null) return\n  /**\n   * Return the `ImageData`\n   */\n  return {\n    url: `${url.origin}${url.pathname}`,\n    title: image.title || undefined,\n    alt: image.alt || undefined,\n    width: size.width,\n    height: size.height,\n    srcWidth: parseInt(srcSizeMatch[1]),\n    srcHeight: parseInt(srcSizeMatch[2]),\n  }\n}\n","import type { Image } from \"mdast\"\n\nimport { parseUrl } from \"../../../parseUrl\"\nimport { ImageData } from \"./index\"\nimport { parseSize } from \"./parse-utils\"\n\n/**\n * UncommonMark images are just regular images with some additional encoding in\n * the URL hash which allows us to embed extra information without affecting the\n * image that is rendered nor does it affect the `title` or `alt` attributes.\n */\nexport function parseUncommonMarkImage(image: Image): ImageData | undefined {\n  const url = parseUrl(image.url)\n  /**\n   * If there's no hash, it's not UncommonMark\n   */\n  if (url.hash.length === 0) return\n  /**\n   * We use `URLSearchParams` to decode the size data after the `#` because it's\n   * free (embedded in every browser without more code) and available (including\n   * Node)!\n   */\n  const params = new URLSearchParams(url.hash.slice(1))\n  const size = parseSize(params.get(\"size\"))\n  const srcSize = parseSize(params.get(\"srcSize\"))\n  if (!size || !srcSize) return\n  /**\n   * If we successfully parsed all the ImageSize info, then return the\n   * `ImageData`\n   */\n  return {\n    url: `${url.origin}${url.pathname}`,\n    title: image.title || undefined,\n    alt: image.alt || undefined,\n    width: size.width,\n    height: size.height,\n    srcWidth: srcSize.width,\n    srcHeight: srcSize.height,\n  }\n}\n","import { parseGenericImage } from \"./parse-generic-image\"\nimport { parsePortiveImage } from \"./parse-portive-image\"\nimport { parseUncommonMarkImage } from \"./parse-uncommon-mark-image\"\n\nexport const imageParsers = [\n  parsePortiveImage,\n  parseUncommonMarkImage,\n  parseGenericImage,\n]\n","import type { Image } from \"mdast\"\n\nimport { ImageSharedElement } from \"~/src/image-plugin/types\"\n\nimport { Segment } from \"../../../types\"\nimport { imageParsers } from \"./image-parsers\"\n\nexport type ImageData = Omit<ImageSharedElement, \"children\">\n\n/**\n * Iterate through all the image parsers utnil we find one that returns\n * `ImageData`. Combine that `ImageData` with the `type` and `children` and\n * return it as the `ImageInlineElement`\n */\nexport function parseInlineImage(image: Image): Segment[] {\n  for (const imageParser of imageParsers) {\n    const imageData = imageParser(image)\n    if (!imageData) continue\n    return [\n      {\n        type: \"image-inline\",\n        ...imageData,\n        children: [{ text: \"\" }],\n      },\n    ]\n  }\n  throw new Error(`Shouldn't get here because last parser always returns data`)\n}\n","import type { PhrasingContent } from \"mdast\"\n\nimport { MarkProps, Segment } from \"../../types\"\nimport { assertUnreachable } from \"../../utils\"\nimport { normalizeSegments } from \"./normalize-segments\"\nimport { parseInlineImage } from \"./parse-inline-image\"\nimport { Descendant } from \"slate\"\n\nexport function parsePhrasingContents(\n  phrasingContents: PhrasingContent[],\n  marks: MarkProps = {}\n): Segment[] {\n  const segments: Segment[] = []\n  for (const phrasingContent of phrasingContents) {\n    segments.push(...parsePhrasingContent(phrasingContent, marks))\n  }\n  const nextInlines = normalizeSegments(segments)\n  return nextInlines\n}\n\nfunction parsePhrasingContent(\n  phrasingContent: PhrasingContent,\n  marks: MarkProps = {}\n): Segment[] {\n  switch (phrasingContent.type) {\n    case \"delete\":\n      return parsePhrasingContents(phrasingContent.children, {\n        ...marks,\n        strike: true,\n      })\n    case \"emphasis\":\n      return parsePhrasingContents(phrasingContent.children, {\n        ...marks,\n        italic: true,\n      })\n    case \"footnoteReference\":\n      return [{ text: `[${phrasingContent.identifier}]` }]\n    case \"html\":\n      return [{ text: phrasingContent.value, code: true }]\n    case \"image\":\n      return parseInlineImage(phrasingContent)\n    case \"inlineCode\": {\n      return [{ text: phrasingContent.value, ...marks, code: true }]\n    }\n    case \"link\":\n      return [\n        {\n          type: \"anchor\",\n          href: phrasingContent.url,\n          title:\n            /**\n             * Ensure that `title` is undefined if it's null.\n             */\n            phrasingContent.title == null ? undefined : phrasingContent.title,\n          children: parsePhrasingContents(phrasingContent.children, marks) as Descendant[],\n        },\n      ]\n    case \"strong\":\n      return parsePhrasingContents(phrasingContent.children, {\n        ...marks,\n        bold: true,\n      })\n    case \"text\":\n      return [{ text: phrasingContent.value, ...marks }]\n    case \"linkReference\":\n    case \"imageReference\":\n      throw new Error(\n        `linkReference and imageReference should be converted to link and image through our transformInlineLinks function`\n      )\n    case \"break\":\n      /**\n       * NOTE:\n       *\n       * I don't think this is doing anything at the moment as a \"\\n\" is being\n       * read without being turned into a break. We can test this by doing a\n       * console.log before the return below.\n       */\n      return [{ text: \"\\n\" }]\n    case \"footnote\":\n      /**\n       * TODO: Support footnotes\n       *\n       * This is a footnote, and should be converte to a suitable alternative or\n       * for us to explicitly support a Footnote type in the future. At the\n       * moment, we don't explicitly support a footnote as it's (a) not part of\n       * GFM and (b) not really that useful while (c) adding complexity to the\n       * UI for something that's not used.\n       */\n      throw new Error(\"footnote is not supported yet\")\n  }\n  assertUnreachable(phrasingContent)\n}\n","import type { Heading } from \"mdast\"\n\nimport { Element } from \"../types\"\nimport { parsePhrasingContents } from \"./parse-phrasing-content/parse-phrasing-content\"\n\nexport function parseHeading(content: Heading): Element[] {\n  return [\n    {\n      type: \"heading\",\n      level: content.depth,\n      children: parsePhrasingContents(content.children),\n    },\n  ]\n}\n","import type { HTML } from \"mdast\"\n\nimport { Element } from \"../types\"\n\nexport function parseHTML(content: HTML): Element[] {\n  return [\n    {\n      type: \"code-block\",\n      language: \"html\",\n      children: content.value.split(\"\\n\").map((line) => ({\n        type: \"code-block-line\",\n        children: [{ text: line }],\n      })),\n    },\n  ]\n}\n","import type { ListItem } from \"mdast\"\n\nimport { Element } from \"../../types\"\nimport { parseContent } from \"../parse-content\"\nimport { parsePhrasingContents } from \"../parse-phrasing-content/parse-phrasing-content\"\nimport { parseList } from \"./parse-list\"\n\nexport function parseListItemChild(\n  child: ListItem[\"children\"][number],\n  {\n    depth,\n    ordered,\n    checked,\n  }: { depth: number; ordered: boolean; checked: boolean | null | undefined }\n): Element[] {\n  switch (child.type) {\n    case \"paragraph\":\n      if (checked === true || checked === false) {\n        return [\n          {\n            type: \"task-list-item\",\n            depth,\n            checked,\n            children: parsePhrasingContents(child.children),\n          },\n        ]\n      } else if (ordered) {\n        return [\n          {\n            type: \"ordered-list-item\",\n            depth,\n            children: parsePhrasingContents(child.children),\n          },\n        ]\n      } else {\n        return [\n          {\n            type: \"unordered-list-item\",\n            depth,\n            children: parsePhrasingContents(child.children),\n          },\n        ]\n      }\n    case \"list\":\n      return parseList(child, depth + 1)\n    default:\n      /**\n       * NOTE:\n       *\n       * We break out of a list when the children of a list item are not more\n       * lists/list items.\n       *\n       * This is one area where we don't strictly adhere to the Markdown\n       * specification and it is intentional because adhering strictly to the\n       * Markdown specification would create a harmful user experience.\n       *\n       * It appears that Markdown allows nesting other block types in lists\n       * other than list items. For example, one can place a table, block\n       * quote, heading or something else in a list item.\n       *\n       * There are a few problems with this from a user perspective:\n       *\n       * - It's unexpected. No other editors provide such a feature.\n       * - If we were to adopt this as a feature, the user experience would be\n       *   terrible, namely because it would be unpredictable what commands do\n       *   toggle headings or list items should do if they were nested.\n       *\n       */\n      return parseContent(child)\n  }\n}\n","import type { ListItem } from \"mdast\"\n\nimport { Element } from \"../../types\"\nimport { parseListItemChild } from \"./parse-list-item-child\"\n\nexport function parseListItem(\n  listItem: ListItem,\n  options: { depth: number; ordered: boolean }\n): Element[] {\n  const elements: Element[] = []\n  for (const child of listItem.children) {\n    elements.push(\n      ...parseListItemChild(child, { ...options, checked: listItem.checked })\n    )\n  }\n  return elements\n}\n","import type { List } from \"mdast\"\n\nimport { Element } from \"../../types\"\nimport { parseListItem } from \"./parse-list-item\"\n\nexport function parseList(list: List, depth = 0): Element[] {\n  // console.log(JSON.stringify(list, null, 2))\n  const elements: Element[] = []\n  for (const listItem of list.children) {\n    elements.push(\n      ...parseListItem(listItem, { depth, ordered: !!list.ordered })\n    )\n  }\n  return elements\n}\n","import type { Paragraph } from \"mdast\"\n\nimport { ImageBlockElement, ImageInlineElement } from \"~/src/image-plugin/types\"\n\nimport { Element, Segment } from \"../types\"\nimport { parsePhrasingContents } from \"./parse-phrasing-content/parse-phrasing-content\"\n\nfunction isImageBlock(segments: Segment[]): boolean {\n  if (segments.length !== 3) return false\n  if (!(\"text\" in segments[0]) || segments[0].text !== \"\") return false\n  if (!(\"text\" in segments[2]) || segments[2].text !== \"\") return false\n  if (!(\"type\" in segments[1]) || segments[1].type !== \"image-inline\")\n    return false\n  return true\n}\n\nconst NBSP = \"\\u00A0\"\n\nfunction isSingleNBSP(segments: Segment[]): boolean {\n  if (segments.length !== 1) return false\n  if (!(\"text\" in segments[0]) || segments[0].text !== NBSP) return false\n  return true\n}\n\n/**\n * Parses to a Paragraph or an ImageBlock element.\n *\n * We need to do it this way because an ImageBlock is a Paragraph that happens\n * to have exactly one ImageInline child.\n */\nexport function parseParagraph(content: Paragraph): Element[] {\n  const segments = parsePhrasingContents(content.children)\n  if (isImageBlock(segments)) {\n    const imageSegment = segments[1] as ImageInlineElement\n    const imageBlockElement: ImageBlockElement = {\n      ...imageSegment,\n      type: \"image-block\",\n    }\n    return [imageBlockElement]\n  }\n  if (isSingleNBSP(segments)) {\n    return [\n      {\n        type: \"paragraph\",\n        children: [{ text: \"\" }],\n      },\n    ]\n  }\n\n  return [\n    {\n      type: \"paragraph\",\n      children: segments,\n    },\n  ]\n}\n","import type { Table, TableCell, TableRow } from \"mdast\"\n\nimport {\n  TableCellElement,\n  TableElement,\n  TableRowElement,\n} from \"~/src/table-plugin\"\n\nimport { parsePhrasingContents } from \"./parse-phrasing-content/parse-phrasing-content\"\n\nexport function parseTable(table: Table): [TableElement] {\n  if (table.align == null)\n    throw new Error(`Expected an array of AlignType for table.align`)\n  return [\n    {\n      type: \"table\",\n      columns: table.align.map((align) => ({\n        align: align || \"left\",\n      })),\n      children: table.children.map(parseTableRow),\n    },\n  ]\n}\n\nfunction parseTableRow(row: TableRow): TableRowElement {\n  if (row.type !== \"tableRow\") throw new Error(`Expected a tableRow`)\n  return { type: \"table-row\", children: row.children.map(parseTableCell) }\n}\n\nfunction parseTableCell(cell: TableCell): TableCellElement {\n  if (cell.type !== \"tableCell\") throw new Error(`Expected a tableCell`)\n  return {\n    type: \"table-cell\",\n    children: [\n      {\n        type: \"table-content\",\n        children: parsePhrasingContents(cell.children),\n      },\n    ],\n  }\n}\n","import { Element } from \"../types\"\n\nexport function parseThematicBreak(): Element[] {\n  return [\n    {\n      type: \"horizontal-rule\",\n      children: [{ text: \"\" }],\n    },\n  ]\n}\n","import type { TopLevelContent } from \"mdast\"\n\nimport { Element } from \"../types\"\nimport { assertUnreachable } from \"../utils\"\nimport { parseBlockquote } from \"./parse-blockquote\"\nimport { parseCodeBlock } from \"./parse-code-block\"\nimport { parseFootnoteDefinition } from \"./parse-footnote-definition\"\nimport { parseHeading } from \"./parse-heading\"\nimport { parseHTML } from \"./parse-html\"\nimport { parseList } from \"./parse-list\"\nimport { parseParagraph } from \"./parse-paragraph\"\nimport { parseTable } from \"./parse-table\"\nimport { parseThematicBreak } from \"./parse-thematic-break\"\n\nexport function parseContents(contents: TopLevelContent[]): Element[] {\n  const elements: Element[] = []\n  for (const content of contents) {\n    elements.push(...parseContent(content))\n  }\n  return elements\n}\n\nexport function parseContent(content: TopLevelContent): Element[] {\n  switch (content.type) {\n    case \"blockquote\":\n      return parseBlockquote(content)\n    case \"code\":\n      return parseCodeBlock(content)\n    case \"definition\":\n      /**\n       * A `definition` is used by a `linkRef` or `imageRef`; however, we inline\n       * these with our `./remark-inline-links`\n       */\n      throw new Error(`The type \"definition\" should not exist. See comments`)\n    case \"footnoteDefinition\":\n      return parseFootnoteDefinition(content)\n    case \"heading\":\n      return parseHeading(content)\n    case \"html\":\n      return parseHTML(content)\n    case \"list\":\n      return parseList(content)\n    case \"paragraph\":\n      /**\n       * Returns a `paragraph` or an `image-block` Element.\n       */\n      return parseParagraph(content)\n    case \"table\":\n      return parseTable(content)\n    case \"thematicBreak\":\n      return parseThematicBreak()\n    case \"yaml\":\n      /**\n       * YAML FrontMatter is not used in Wysimark.\n       */\n      return []\n  }\n  assertUnreachable(content)\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n */\n\n/**\n * @typedef {Record<string, unknown>} Props\n * @typedef {null | undefined | string | Props | TestFunctionAnything | Array<string | Props | TestFunctionAnything>} Test\n *   Check for an arbitrary node, unaware of TypeScript inferral.\n *\n * @callback TestFunctionAnything\n *   Check if a node passes a test, unaware of TypeScript inferral.\n * @param {unknown} this\n *   The given context.\n * @param {Node} node\n *   A node.\n * @param {number | null | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The nodes parent.\n * @returns {boolean | void}\n *   Whether this node passes the test.\n */\n\n/**\n * @template {Node} Kind\n *   Node type.\n * @typedef {Kind['type'] | Partial<Kind> | TestFunctionPredicate<Kind> | Array<Kind['type'] | Partial<Kind> | TestFunctionPredicate<Kind>>} PredicateTest\n *   Check for a node that can be inferred by TypeScript.\n */\n\n/**\n * Check if a node passes a certain test.\n *\n * @template {Node} Kind\n *   Node type.\n * @callback TestFunctionPredicate\n *   Complex test function for a node that can be inferred by TypeScript.\n * @param {Node} node\n *   A node.\n * @param {number | null | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The nodes parent.\n * @returns {node is Kind}\n *   Whether this node passes the test.\n */\n\n/**\n * @callback AssertAnything\n *   Check that an arbitrary value is a node, unaware of TypeScript inferral.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The nodes parent.\n * @returns {boolean}\n *   Whether this is a node and passes a test.\n */\n\n/**\n * Check if a node is a node and passes a certain node test.\n *\n * @template {Node} Kind\n *   Node type.\n * @callback AssertPredicate\n *   Check that an arbitrary value is a specific node, aware of TypeScript.\n * @param {unknown} [node]\n *   Anything (typically a node).\n * @param {number | null | undefined} [index]\n *   The nodes position in its parent.\n * @param {Parent | null | undefined} [parent]\n *   The nodes parent.\n * @returns {node is Kind}\n *   Whether this is a node and passes a test.\n */\n\n/**\n * Check if `node` is a `Node` and whether it passes the given test.\n *\n * @param node\n *   Thing to check, typically `Node`.\n * @param test\n *   A check for a specific node.\n * @param index\n *   The nodes position in its parent.\n * @param parent\n *   The nodes parent.\n * @returns\n *   Whether `node` is a node and passes a test.\n */\nexport const is =\n  /**\n   * @type {(\n   *   (() => false) &\n   *   (<Kind extends Node = Node>(node: unknown, test: PredicateTest<Kind>, index: number, parent: Parent, context?: unknown) => node is Kind) &\n   *   (<Kind extends Node = Node>(node: unknown, test: PredicateTest<Kind>, index?: null | undefined, parent?: null | undefined, context?: unknown) => node is Kind) &\n   *   ((node: unknown, test: Test, index: number, parent: Parent, context?: unknown) => boolean) &\n   *   ((node: unknown, test?: Test, index?: null | undefined, parent?: null | undefined, context?: unknown) => boolean)\n   * )}\n   */\n  (\n    /**\n     * @param {unknown} [node]\n     * @param {Test} [test]\n     * @param {number | null | undefined} [index]\n     * @param {Parent | null | undefined} [parent]\n     * @param {unknown} [context]\n     * @returns {boolean}\n     */\n    // eslint-disable-next-line max-params\n    function is(node, test, index, parent, context) {\n      const check = convert(test)\n\n      if (\n        index !== undefined &&\n        index !== null &&\n        (typeof index !== 'number' ||\n          index < 0 ||\n          index === Number.POSITIVE_INFINITY)\n      ) {\n        throw new Error('Expected positive finite index')\n      }\n\n      if (\n        parent !== undefined &&\n        parent !== null &&\n        (!is(parent) || !parent.children)\n      ) {\n        throw new Error('Expected parent node')\n      }\n\n      if (\n        (parent === undefined || parent === null) !==\n        (index === undefined || index === null)\n      ) {\n        throw new Error('Expected both parent and index')\n      }\n\n      // @ts-expect-error Looks like a node.\n      return node && node.type && typeof node.type === 'string'\n        ? Boolean(check.call(context, node, index, parent))\n        : false\n    }\n  )\n\n/**\n * Generate an assertion from a test.\n *\n * Useful if youre going to test many nodes, for example when creating a\n * utility where something else passes a compatible test.\n *\n * The created function is a bit faster because it expects valid input only:\n * a `node`, `index`, and `parent`.\n *\n * @param test\n *   *   when nullish, checks if `node` is a `Node`.\n *   *   when `string`, works like passing `(node) => node.type === test`.\n *   *   when `function` checks if function passed the node is true.\n *   *   when `object`, checks that all keys in test are in node, and that they have (strictly) equal values.\n *   *   when `array`, checks if any one of the subtests pass.\n * @returns\n *   An assertion.\n */\nexport const convert =\n  /**\n   * @type {(\n   *   (<Kind extends Node>(test: PredicateTest<Kind>) => AssertPredicate<Kind>) &\n   *   ((test?: Test) => AssertAnything)\n   * )}\n   */\n  (\n    /**\n     * @param {Test} [test]\n     * @returns {AssertAnything}\n     */\n    function (test) {\n      if (test === undefined || test === null) {\n        return ok\n      }\n\n      if (typeof test === 'string') {\n        return typeFactory(test)\n      }\n\n      if (typeof test === 'object') {\n        return Array.isArray(test) ? anyFactory(test) : propsFactory(test)\n      }\n\n      if (typeof test === 'function') {\n        return castFactory(test)\n      }\n\n      throw new Error('Expected function, string, or object as test')\n    }\n  )\n\n/**\n * @param {Array<string | Props | TestFunctionAnything>} tests\n * @returns {AssertAnything}\n */\nfunction anyFactory(tests) {\n  /** @type {Array<AssertAnything>} */\n  const checks = []\n  let index = -1\n\n  while (++index < tests.length) {\n    checks[index] = convert(tests[index])\n  }\n\n  return castFactory(any)\n\n  /**\n   * @this {unknown}\n   * @param {Array<unknown>} parameters\n   * @returns {boolean}\n   */\n  function any(...parameters) {\n    let index = -1\n\n    while (++index < checks.length) {\n      if (checks[index].call(this, ...parameters)) return true\n    }\n\n    return false\n  }\n}\n\n/**\n * Turn an object into a test for a node with a certain fields.\n *\n * @param {Props} check\n * @returns {AssertAnything}\n */\nfunction propsFactory(check) {\n  return castFactory(all)\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function all(node) {\n    /** @type {string} */\n    let key\n\n    for (key in check) {\n      // @ts-expect-error: hush, it sure works as an index.\n      if (node[key] !== check[key]) return false\n    }\n\n    return true\n  }\n}\n\n/**\n * Turn a string into a test for a node with a certain type.\n *\n * @param {string} check\n * @returns {AssertAnything}\n */\nfunction typeFactory(check) {\n  return castFactory(type)\n\n  /**\n   * @param {Node} node\n   */\n  function type(node) {\n    return node && node.type === check\n  }\n}\n\n/**\n * Turn a custom test into a test for a node that passes that test.\n *\n * @param {TestFunctionAnything} check\n * @returns {AssertAnything}\n */\nfunction castFactory(check) {\n  return assertion\n\n  /**\n   * @this {unknown}\n   * @param {unknown} node\n   * @param {Array<unknown>} parameters\n   * @returns {boolean}\n   */\n  function assertion(node, ...parameters) {\n    return Boolean(\n      node &&\n        typeof node === 'object' &&\n        'type' in node &&\n        // @ts-expect-error: fine.\n        Boolean(check.call(this, node, ...parameters))\n    )\n  }\n}\n\nfunction ok() {\n  return true\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n * @typedef {import('unist-util-is').Test} Test\n */\n\n/**\n * @typedef {boolean | 'skip'} Action\n *   Union of the action types.\n *\n * @typedef {number} Index\n *   Move to the sibling at `index` next (after node itself is completely\n *   traversed).\n *\n *   Useful if mutating the tree, such as removing the node the visitor is\n *   currently on, or any of its previous siblings.\n *   Results less than 0 or greater than or equal to `children.length` stop\n *   traversing the parent.\n *\n * @typedef {[(Action | null | undefined | void)?, (Index | null | undefined)?]} ActionTuple\n *   List with one or two values, the first an action, the second an index.\n *\n * @typedef {Action | ActionTuple | Index | null | undefined | void} VisitorResult\n *   Any value that can be returned from a visitor.\n */\n\n/**\n * @template {Node} [Visited=Node]\n *   Visited node type.\n * @template {Parent} [Ancestor=Parent]\n *   Ancestor type.\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform the parent of node (the last of `ancestors`).\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of an ancestor still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Array<Ancestor>} ancestors\n *   Ancestors of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n */\n\n/**\n * @template {Node} [Tree=Node]\n *   Tree type.\n * @template {Test} [Check=string]\n *   Test type.\n * @typedef {Visitor<import('./complex-types.js').Matches<import('./complex-types.js').InclusiveDescendant<Tree>, Check>, Extract<import('./complex-types.js').InclusiveDescendant<Tree>, Parent>>} BuildVisitor\n *   Build a typed `Visitor` function from a tree and a test.\n *\n *   It will infer which values are passed as `node` and which as `parents`.\n */\n\nimport {convert} from 'unist-util-is'\nimport {color} from './color.js'\n\n/**\n * Continue traversing as normal.\n */\nexport const CONTINUE = true\n\n/**\n * Stop traversing immediately.\n */\nexport const EXIT = false\n\n/**\n * Do not traverse this nodes children.\n */\nexport const SKIP = 'skip'\n\n/**\n * Visit nodes, with ancestral information.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @param tree\n *   Tree to traverse.\n * @param test\n *   `unist-util-is`-compatible test\n * @param visitor\n *   Handle each node.\n * @param reverse\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns\n *   Nothing.\n */\nexport const visitParents =\n  /**\n   * @type {(\n   *   (<Tree extends Node, Check extends Test>(tree: Tree, test: Check, visitor: BuildVisitor<Tree, Check>, reverse?: boolean | null | undefined) => void) &\n   *   (<Tree extends Node>(tree: Tree, visitor: BuildVisitor<Tree>, reverse?: boolean | null | undefined) => void)\n   * )}\n   */\n  (\n    /**\n     * @param {Node} tree\n     * @param {Test} test\n     * @param {Visitor<Node>} visitor\n     * @param {boolean | null | undefined} [reverse]\n     * @returns {void}\n     */\n    function (tree, test, visitor, reverse) {\n      if (typeof test === 'function' && typeof visitor !== 'function') {\n        reverse = visitor\n        // @ts-expect-error no visitor given, so `visitor` is test.\n        visitor = test\n        test = null\n      }\n\n      const is = convert(test)\n      const step = reverse ? -1 : 1\n\n      factory(tree, undefined, [])()\n\n      /**\n       * @param {Node} node\n       * @param {number | undefined} index\n       * @param {Array<Parent>} parents\n       */\n      function factory(node, index, parents) {\n        /** @type {Record<string, unknown>} */\n        // @ts-expect-error: hush\n        const value = node && typeof node === 'object' ? node : {}\n\n        if (typeof value.type === 'string') {\n          const name =\n            // `hast`\n            typeof value.tagName === 'string'\n              ? value.tagName\n              : // `xast`\n              typeof value.name === 'string'\n              ? value.name\n              : undefined\n\n          Object.defineProperty(visit, 'name', {\n            value:\n              'node (' + color(node.type + (name ? '<' + name + '>' : '')) + ')'\n          })\n        }\n\n        return visit\n\n        function visit() {\n          /** @type {ActionTuple} */\n          let result = []\n          /** @type {ActionTuple} */\n          let subresult\n          /** @type {number} */\n          let offset\n          /** @type {Array<Parent>} */\n          let grandparents\n\n          if (!test || is(node, index, parents[parents.length - 1] || null)) {\n            result = toResult(visitor(node, parents))\n\n            if (result[0] === EXIT) {\n              return result\n            }\n          }\n\n          // @ts-expect-error looks like a parent.\n          if (node.children && result[0] !== SKIP) {\n            // @ts-expect-error looks like a parent.\n            offset = (reverse ? node.children.length : -1) + step\n            // @ts-expect-error looks like a parent.\n            grandparents = parents.concat(node)\n\n            // @ts-expect-error looks like a parent.\n            while (offset > -1 && offset < node.children.length) {\n              // @ts-expect-error looks like a parent.\n              subresult = factory(node.children[offset], offset, grandparents)()\n\n              if (subresult[0] === EXIT) {\n                return subresult\n              }\n\n              offset =\n                typeof subresult[1] === 'number' ? subresult[1] : offset + step\n            }\n          }\n\n          return result\n        }\n      }\n    }\n  )\n\n/**\n * Turn a return value into a clean result.\n *\n * @param {VisitorResult} value\n *   Valid return values from visitors.\n * @returns {ActionTuple}\n *   Clean result.\n */\nfunction toResult(value) {\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  if (typeof value === 'number') {\n    return [CONTINUE, value]\n  }\n\n  return [value]\n}\n","/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('unist').Parent} Parent\n * @typedef {import('unist-util-is').Test} Test\n * @typedef {import('unist-util-visit-parents').VisitorResult} VisitorResult\n */\n\n/**\n * Check if `Child` can be a child of `Ancestor`.\n *\n * Returns the ancestor when `Child` can be a child of `Ancestor`, or returns\n * `never`.\n *\n * @template {Node} Ancestor\n *   Node type.\n * @template {Node} Child\n *   Node type.\n * @typedef {(\n *   Ancestor extends Parent\n *     ? Child extends Ancestor['children'][number]\n *       ? Ancestor\n *       : never\n *     : never\n * )} ParentsOf\n */\n\n/**\n * @template {Node} [Visited=Node]\n *   Visited node type.\n * @template {Parent} [Ancestor=Parent]\n *   Ancestor type.\n * @callback Visitor\n *   Handle a node (matching `test`, if given).\n *\n *   Visitors are free to transform `node`.\n *   They can also transform `parent`.\n *\n *   Replacing `node` itself, if `SKIP` is not returned, still causes its\n *   descendants to be walked (which is a bug).\n *\n *   When adding or removing previous siblings of `node` (or next siblings, in\n *   case of reverse), the `Visitor` should return a new `Index` to specify the\n *   sibling to traverse after `node` is traversed.\n *   Adding or removing next siblings of `node` (or previous siblings, in case\n *   of reverse) is handled as expected without needing to return a new `Index`.\n *\n *   Removing the children property of `parent` still results in them being\n *   traversed.\n * @param {Visited} node\n *   Found node.\n * @param {Visited extends Node ? number | null : never} index\n *   Index of `node` in `parent`.\n * @param {Ancestor extends Node ? Ancestor | null : never} parent\n *   Parent of `node`.\n * @returns {VisitorResult}\n *   What to do next.\n *\n *   An `Index` is treated as a tuple of `[CONTINUE, Index]`.\n *   An `Action` is treated as a tuple of `[Action]`.\n *\n *   Passing a tuple back only makes sense if the `Action` is `SKIP`.\n *   When the `Action` is `EXIT`, that action can be returned.\n *   When the `Action` is `CONTINUE`, `Index` can be returned.\n */\n\n/**\n * Build a typed `Visitor` function from a node and all possible parents.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} Visited\n *   Node type.\n * @template {Parent} Ancestor\n *   Parent type.\n * @typedef {Visitor<Visited, ParentsOf<Ancestor, Visited>>} BuildVisitorFromMatch\n */\n\n/**\n * Build a typed `Visitor` function from a list of descendants and a test.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} Descendant\n *   Node type.\n * @template {Test} Check\n *   Test type.\n * @typedef {(\n *   BuildVisitorFromMatch<\n *     import('unist-util-visit-parents/complex-types.js').Matches<Descendant, Check>,\n *     Extract<Descendant, Parent>\n *   >\n * )} BuildVisitorFromDescendants\n */\n\n/**\n * Build a typed `Visitor` function from a tree and a test.\n *\n * It will infer which values are passed as `node` and which as `parent`.\n *\n * @template {Node} [Tree=Node]\n *   Node type.\n * @template {Test} [Check=string]\n *   Test type.\n * @typedef {(\n *   BuildVisitorFromDescendants<\n *     import('unist-util-visit-parents/complex-types.js').InclusiveDescendant<Tree>,\n *     Check\n *   >\n * )} BuildVisitor\n */\n\nimport {visitParents} from 'unist-util-visit-parents'\n\n/**\n * Visit nodes.\n *\n * This algorithm performs *depth-first* *tree traversal* in *preorder*\n * (**NLR**) or if `reverse` is given, in *reverse preorder* (**NRL**).\n *\n * You can choose for which nodes `visitor` is called by passing a `test`.\n * For complex tests, you should test yourself in `visitor`, as it will be\n * faster and will have improved type information.\n *\n * Walking the tree is an intensive task.\n * Make use of the return values of the visitor when possible.\n * Instead of walking a tree multiple times, walk it once, use `unist-util-is`\n * to check if a node matches, and then perform different operations.\n *\n * You can change the tree.\n * See `Visitor` for more info.\n *\n * @param tree\n *   Tree to traverse.\n * @param test\n *   `unist-util-is`-compatible test\n * @param visitor\n *   Handle each node.\n * @param reverse\n *   Traverse in reverse preorder (NRL) instead of the default preorder (NLR).\n * @returns\n *   Nothing.\n */\nexport const visit =\n  /**\n   * @type {(\n   *   (<Tree extends Node, Check extends Test>(tree: Tree, test: Check, visitor: BuildVisitor<Tree, Check>, reverse?: boolean | null | undefined) => void) &\n   *   (<Tree extends Node>(tree: Tree, visitor: BuildVisitor<Tree>, reverse?: boolean | null | undefined) => void)\n   * )}\n   */\n  (\n    /**\n     * @param {Node} tree\n     * @param {Test} test\n     * @param {Visitor} visitor\n     * @param {boolean | null | undefined} [reverse]\n     * @returns {void}\n     */\n    function (tree, test, visitor, reverse) {\n      if (typeof test === 'function' && typeof visitor !== 'function') {\n        reverse = visitor\n        visitor = test\n        test = null\n      }\n\n      visitParents(tree, test, overload, reverse)\n\n      /**\n       * @param {Node} node\n       * @param {Array<Parent>} parents\n       */\n      function overload(node, parents) {\n        const parent = parents[parents.length - 1]\n        return visitor(\n          node,\n          parent ? parent.children.indexOf(node) : null,\n          parent\n        )\n      }\n    }\n  )\n\nexport {CONTINUE, EXIT, SKIP} from 'unist-util-visit-parents'\n","/**\n * @typedef {import('mdast').Root} Root\n * @typedef {import('mdast').Content} Content\n * @typedef {import('mdast').Definition} Definition\n */\n\n/**\n * @typedef {Root | Content} Node\n *\n * @callback GetDefinition\n *   Get a definition by identifier.\n * @param {string | null | undefined} [identifier]\n *   Identifier of definition.\n * @returns {Definition | null}\n *   Definition corresponding to `identifier` or `null`.\n */\n\nimport {visit} from 'unist-util-visit'\n\nconst own = {}.hasOwnProperty\n\n/**\n * Find definitions in `tree`.\n *\n * Uses CommonMark precedence, which means that earlier definitions are\n * preferred over duplicate later definitions.\n *\n * @param {Node} tree\n *   Tree to check.\n * @returns {GetDefinition}\n *   Getter.\n */\nexport function definitions(tree) {\n  /** @type {Record<string, Definition>} */\n  const cache = Object.create(null)\n\n  if (!tree || !tree.type) {\n    throw new Error('mdast-util-definitions expected node')\n  }\n\n  visit(tree, 'definition', (definition) => {\n    const id = clean(definition.identifier)\n    if (id && !own.call(cache, id)) {\n      cache[id] = definition\n    }\n  })\n\n  return definition\n\n  /** @type {GetDefinition} */\n  function definition(identifier) {\n    const id = clean(identifier)\n    // To do: next major: return `undefined` when not found.\n    return id && own.call(cache, id) ? cache[id] : null\n  }\n}\n\n/**\n * @param {string | null | undefined} [value]\n * @returns {string}\n */\nfunction clean(value) {\n  return String(value || '').toUpperCase()\n}\n","import type { Content, Image, Link, Parent, Root } from \"mdast\"\nimport { definitions } from \"mdast-util-definitions\"\nimport type { Node } from \"unist\"\nimport { SKIP, visit } from \"unist-util-visit\"\n\n/**\n * Based on the code from `remark-inline-links` but rewritten here because, for\n * reasons unknown to me, the plugin doesn't seem to execute at all despite not\n * throwing an error. Looks like the function that `remarkInlineLinks` returns\n * is never executed. Not sure if this is due to a change in `unified` but I\n * can't seem to find any mention anywhere of this no longer working including\n * in discussion or issues and the list of plugins show that\n * `remark-inline-links` is currently working and compatible with the lateste\n * version.\n *\n * Never-the-less, pulling it out and working on the ast directly (this function\n * modifies the AST in place) seems to work.\n *\n * https://github.com/remarkjs/remark-inline-links\n */\nexport function transformInlineLinks(tree: Root): void {\n  const definition = definitions(tree)\n\n  visit<Node>(tree as Node, (n, index, p) => {\n    const node = n as unknown as Content\n    const parent = p as unknown as Parent | null\n    if (\n      node.type === \"definition\" &&\n      parent !== null &&\n      typeof index === \"number\"\n    ) {\n      parent.children.splice(index, 1)\n      return [SKIP, index]\n    }\n\n    if (node.type === \"imageReference\" || node.type === \"linkReference\") {\n      const identifier =\n        \"identifier\" in node && typeof node.identifier === \"string\"\n          ? node.identifier\n          : \"\"\n      const def = definition(identifier)\n\n      if (def && parent !== null && typeof index === \"number\") {\n        const replacement: Image | Link =\n          node.type === \"imageReference\"\n            ? { type: \"image\", url: def.url, title: def.title, alt: node.alt }\n            : {\n                type: \"link\",\n                url: def.url,\n                title: def.title,\n                children: node.children,\n              }\n\n        parent.children[index] = replacement\n        return [SKIP, index]\n      }\n    }\n  })\n}\n","import type { Root, TopLevelContent } from \"mdast\"\nimport remarkParse from \"remark-parse\"\nimport { unified } from \"unified\"\n\nimport { Element } from \"../types\"\nimport { customRemarkGfm } from \"./custom-gfm\"\nimport { parseContents } from \"./parse-content\"\nimport { transformInlineLinks } from \"./transform-inline-links\"\n\n// @ts-ignore - Ignore TypeScript errors for the unified plugin system\nconst parser = unified().use(remarkParse).use(customRemarkGfm())\n\nexport function parseToAst(markdown: string) {\n  const ast = parser.parse(markdown) as Root\n  /**\n   * Takes linkReference and imageReference and turns them into link and image.\n   */\n  transformInlineLinks(ast)\n  return ast\n}\n\n/**\n * Takes a Markdown string as input and returns a remarkParse AST\n */\nexport function parse(markdown: string): Element[] {\n  const ast = parseToAst(markdown)\n  /**\n   * If there is no content, remark returns a root ast with no children (i.e.\n   * no paragraphs) but for Slate, we need it to return an empty paragraph.\n   *\n   * So when this happens, we just generate an empty paragraph and return that\n   * s he result.\n   */\n  if (ast.children.length === 0) {\n    return [{ type: \"paragraph\", children: [{ text: \"\" }] }] as Element[]\n  }\n\n  return parseContents(ast.children as TopLevelContent[])\n}\n","import { ListItemElement } from \"~/src/list-plugin/types\"\n\nimport { Element } from \"../../types\"\n\n/**\n * Provides a type guard for `ListItemElement`.\n */\nfunction isListItemElement(element: Element): element is ListItemElement {\n  return (\n    element.type === \"ordered-list-item\" ||\n    element.type === \"unordered-list-item\" ||\n    element.type === \"task-list-item\"\n  )\n}\n\nexport function normalizeElementListDepths(elements: Element[]) {\n  const normalizedElements: Element[] = []\n\n  /**\n   * previousDepth of -1 indicates that the previous element was not a list\n   * item.\n   */\n  let previousDepth = -1\n\n  for (const element of elements) {\n    /**\n     * If it's not a list item, just reset previousDepth and add the element\n     * to `normalizedElements`.\n     */\n    if (!isListItemElement(element)) {\n      normalizedElements.push(element)\n      previousDepth = -1\n      continue\n    }\n\n    /**\n     * If it is a list item, we need to make sure the depth never increases by\n     * more than 1. This is important because if we skip the first depth (i.e.\n     * we start at depth of 2) then we get the first list indented which makes\n     * Markdown think it's a code block. After the first list item, we don't\n     * want to indent by more than one depth level because Markdown will assume\n     * that's still a single depth level. When we outdent a level, Markdown\n     * could get confused.\n     *\n     * WARNING:\n     *\n     * This does create a situation where the list in Wysimark is not saved and\n     * loaded to return the same document; however, the alternative is that we\n     * prevent the editor from creating a list which skips a depth. This could\n     * be perceived as broken UI by the user. This appraoch feels less obtrusive\n     * to the user.\n     */\n    const nextDepth =\n      element.depth > previousDepth + 1 ? previousDepth + 1 : element.depth\n    normalizedElements.push({ ...element, depth: nextDepth })\n    previousDepth = nextDepth\n  }\n\n  return normalizedElements\n}\n","import { CodeBlockLineElement } from \"~/src/code-block-plugin\"\n\n/**\n * Serializing a code line is simple under the assumption that the normalizers\n * in Wysimark are working correctly. Technically, a code-line should have\n * exactly one child with one `Text` node with no marks in it.\n */\nexport function serializeCodeLine(codeLine: CodeBlockLineElement): string {\n  /**\n   * As a safety measure, we make sure that we are receiving a `codeLine`\n   */\n  if (codeLine.type !== \"code-block-line\")\n    throw new Error(\n      `Expected all children of code-block to be a codeline but is ${JSON.stringify(\n        codeLine,\n        null,\n        2\n      )}`\n    )\n  /**\n   * We are converting all segments under the assumption that they are text\n   * segments.\n   */\n  return codeLine.children.map((segment) => segment.text).join(\"\")\n}\n","import { CodeBlockElement } from \"~/src/code-block-plugin\"\n\nimport { serializeCodeLine } from \"./serialize-code-line\"\n\n/**\n * Serializing a code block is usually three backticks folloed by the language,\n * then the code is raw verbatim and then three backticks to close.\n *\n * However, we have to account for if any line in the code starts with three\n * backticks. In that case, we need to start our code block with 4 backticks.\n * And if there are 4 backticks in the code, then we need to start it with 5.\n *\n * We always need to start our code block with one more backtick than can be\n * found starting any line in the code block.\n */\nexport function serializeCodeBlock(codeBlock: CodeBlockElement): string {\n  const lines: string[] = []\n  /**\n   * Start with the default number of backticks\n   */\n  let backticks = 3\n  for (const codeLine of codeBlock.children) {\n    /**\n     * Grab a raw code line from it\n     */\n    const lineOfCode = serializeCodeLine(codeLine)\n    /**\n     * Check if it starts with any backticks and if it does, make our backticks\n     * one larger than the largest one.\n     */\n    const match = lineOfCode.match(/^([`]+)/)\n    if (match) backticks = Math.max(backticks, match[1].length + 1)\n    /**\n     * Add it to our lines\n     */\n    lines.push(lineOfCode)\n  }\n  /**\n   * At the very end, when we know how many backticks we need, add our backticks\n   * and language at the start and the closing backticks at the end.\n   */\n  lines.unshift(`${\"`\".repeat(backticks)}${codeBlock.language}`)\n  lines.push(`${\"`\".repeat(backticks)}`)\n  return `${lines.join(\"\\n\")}\\n\\n`\n}\n","import { ImageSharedElement } from \"~/src/image-plugin/types\"\n\n/**\n * As a fallback, if there is no width/height or srcWidth/srcHeight info then\n * just save the image url and do not save with uncommonMark hints.\n */\nexport function serializeGenericImageUrl(image: ImageSharedElement): string {\n  return image.url\n}\n","import { ImageSharedElement } from \"~/src/image-plugin/types\"\n\nimport { parseUrl } from \"../../parseUrl\"\n\n/**\n * When an image is in the `.portive.com` subdomain like `files.portive.com` or\n * `staging.files.portive.com` and if the image has a `width` and `height` then\n * we encode the `width` and `height in the `url` as part of the query string.\n *\n * https://files.portive.com/f/abcdef--640x480.jpg?size=320x240\n *\n * Indicates a src image of 640x480 that will be resized and sent to the browser\n * at 320x240\n *\n * This does these things:\n *\n * - When parsing the image URL, we are able to pull the width/height out of the\n *   URL and use it to populate those values in the editor.\n *\n * - The query string will also physically resize the image before delivering it\n *   from Portive. This means that in regular Markdown that doesn't have any\n *   special understanding of Portive's special querystring encodings, the image\n *   is still returned in the correct size.\n */\nexport function serializePortiveImageUrl(\n  image: ImageSharedElement\n): string | undefined {\n  if (image.url.startsWith(\"$\")) return \"\"\n  const { hostname } = parseUrl(image.url)\n  /**\n   * Only parse portive URL if it is a portive recognized domain\n   */\n  if (hostname.match(/[.]portive[.]com$/i) && image.width && image.height)\n    return `${image.url}?size=${image.width}x${image.height}`\n}\n","import { ImageSharedElement } from \"~/src/image-plugin/types\"\n\n/**\n * In UncommonMark, we provide hints after the hash `#` portion of the URL that\n * does not affect the URL of the image being delivered. It is usually used to\n * tell the browser to scroll to the given section in a linked document.\n *\n * https://imageservice.com/abcdefg.jpg#srcSize=1024x768&size=640x480\n */\nexport function serializeUncommonmarkImageUrl(\n  image: ImageSharedElement\n): string | undefined {\n  if (image.width && image.height && image.srcWidth && image.srcHeight)\n    return `${image.url}#srcSize=${image.srcWidth}x${image.srcHeight}&size=${image.width}x${image.height}`\n}\n","import { ImageSharedElement } from \"~/src/image-plugin/types\"\n\nimport { serializeGenericImageUrl } from \"./serialize-generic-image-url\"\nimport { serializePortiveImageUrl } from \"./serialize-portive-image-url\"\nimport { serializeUncommonmarkImageUrl } from \"./serialize-uncommonmark-image-url\"\n\nconst urlSerializers = [\n  serializePortiveImageUrl,\n  serializeUncommonmarkImageUrl,\n  serializeGenericImageUrl,\n]\n\nexport function serializeImageShared(image: ImageSharedElement): string {\n  for (const urlSerializer of urlSerializers) {\n    const url = urlSerializer(image)\n    if (typeof url === \"string\") {\n      /**\n       * Sometimes the serialized URL will return \"\" which means that the URL\n       * hasn't returned yet. When this happens, we don't want the markdown for\n       * the image to be added to the final value because the image would be\n       * invalid. This happens when the image is uploading.\n       */\n      if (url === \"\") return \"\"\n      return `![${image.alt}](${url}${\n        typeof image.title === \"string\" ? ` \"${image.title}\"` : \"\"\n      })`\n    }\n  }\n  /**\n   * Shouldn't get here because the last url seializer `serializeGenericUrl`\n   * always returns a value.\n   */\n  throw new Error(`Shouldn't get here`)\n}\n","import { ImageBlockElement } from \"~/src/image-plugin/types\"\n\nimport { serializeImageShared } from \"../serialize-image-shared\"\n\nexport function serializeImageBlock(element: ImageBlockElement): string {\n  return serializeImageShared(element)\n}\n","import { MarkKey } from \"../../../types\"\nimport { sortMarks } from \"../utils\"\n\n/**\n * Find the marks to add in ordere to get our orderedMarks to match the\n * `targetMarks`.\n *\n * We do this in a smart, but perhaps, imperfect way.\n *\n * When we need to add marks, we add them in an order that is more likely to\n * reduce the number of marks we add. See the comments under `MARK_KEY_ORDER` to\n * find out how.\n *\n * That said, we could probably choose a more complex algorithm that looks at\n * all the text to find out how to most efficiently place which marks as outer\n * or inner marks; however, there will still be situations in which the choice\n * will be arbitrary and this would likely greatly increase the complexity of\n * the code.\n *\n * This feels like a good trade-off and is likely to cause an unreadable\n * markdown representation. I suppose if for some reason a user had a bunch of\n * superscripted text which was intermittently styled with bold and italic, then\n * we'd have less than ideal markdown.\n */\nexport function findMarksToAdd(\n  orderedMarks: MarkKey[],\n  targetMarks: MarkKey[]\n) {\n  const marksWeNeedToAdd = targetMarks.filter(\n    (mark) => !orderedMarks.includes(mark)\n  )\n  const orderedMarksToAdd = sortMarks(marksWeNeedToAdd)\n  return { orderedMarksToAdd }\n}\n","import { MarkKey } from \"../../../types\"\n\n/**\n * Takes a list of our current `orderedMarks` (i.e. what marks have been applied\n * to our text and in which order) and then gives us a list of `targetMarks`\n * which, for clarity, the order doesn't matter.\n *\n * We then create a list of `orderedMarksToRemove` which is a list of marks we\n * need to remove in the correct order, in order to satisfy that there aren't\n * any marks left that aren't also in the `targetMarks`.\n */\nexport function findMarksToRemove(\n  orderedMarks: MarkKey[],\n  targetMarks: MarkKey[]\n): { orderedMarksToRemove: MarkKey[]; nextOrderedMarks: MarkKey[] } {\n  /**\n   * As a good practice, don't manipulate the incoming argument (even though\n   * technically it doesn't matter here)\n   */\n  const nextOrderedMarks = [...orderedMarks]\n\n  /**\n   * Find the marks that we need to remove.\n   */\n  const marksWeNeedToRemove = orderedMarks.filter(\n    (mark) => !targetMarks.includes(mark)\n  )\n\n  /**\n   * An ordered array of marks to remove\n   */\n  const orderedMarksToRemove: MarkKey[] = []\n\n  /**\n   * We iterate a maximum number of times with an upper limit of\n   * `nextOrderedMarks.length` to prevent infinite loops.\n   *\n   * If we meet our condition of removing all the `marksWeNeedToRemove` we are\n   * going to break out of this loop early which is common. Used a for loop\n   * instead of counting the number of loops and throwing an error.\n   */\n  for (let i = 0; i < orderedMarks.length; i++) {\n    /**\n     * If we don't have any more marks we need to remove, we are done so leave\n     * the loop.\n     */\n    if (marksWeNeedToRemove.length === 0) break\n    /**\n     * Remove the last mark\n     */\n    const markToRemove = nextOrderedMarks.pop()\n    if (markToRemove === undefined) {\n      throw new Error(\n        `This shouldn't happen unless we made a mistake in the algorithm`\n      )\n    }\n    /**\n     * Add to our `orderedMarkToRemove` which is done in the correct order\n     * because we are popping them off from the right.\n     */\n    orderedMarksToRemove.push(markToRemove)\n\n    /**\n     * Whatever we added to our list of `orderedMarksToRemove` we can now take\n     * off our list of `marksWeNeedToRemove`. Sometimes we will be removed marks\n     * that don't take anything off our list of `marksWeNeedToRemove` because of\n     * the order in which we need to remove marks.\n     *\n     * For this reason, the check to see if the `mark` was in our list of\n     * `marksWeNeedToRemove` is important.\n     */\n    const index = marksWeNeedToRemove.indexOf(markToRemove)\n    if (index !== -1) {\n      marksWeNeedToRemove.splice(index, 1)\n    }\n  }\n\n  return { orderedMarksToRemove, nextOrderedMarks }\n}\n","import { MarkKey } from \"../../../types\"\nimport { findMarksToAdd } from \"./find-marks-to-add\"\nimport { findMarksToRemove } from \"./find-marks-to-remove\"\n\n/**\n * Takes a set of incoming marks and a set of target markets and returns what\n * marks need to be removed including the order in which they need to be removed\n * and what marks need to be added including the order in which they needed to\n * be added.\n *\n * The algorithm, collectively, is a little complex because we must always\n * remove an inner set of mark symbols before we can remove an outer set. This\n * means that sometimes when we want to remove a mark, we end up actually having\n * to add one. Like in this scenario:\n *\n * **_bold italic_** _italic_\n *\n * In order to go from bold and italic to just italic, we need to first remove\n * the inner italic, then remove the outer bold, and because the italic was\n * removed we need to add back the italic.\n *\n * Note that the algorithm is asymmetrical. It's just the way it has to be.\n */\nexport function diffMarks(orderedMarks: MarkKey[], targetMarks: MarkKey[]) {\n  /**\n   * First we remove the marks in order to arrive at our target marks.\n   *\n   * The algorithm basically just takes off the inner-most (right-most) marks\n   * and adds them to `marsToRemove` until we don't have any marks that aren't\n   * also in the `targetMarks`.\n   *\n   * Because we may be over-removing the marks, the method returns a\n   * `nextOrderedMarks` or basically the `orderedMarks` after the remove has\n   * happened. We then use this as the basis to add any marks we need back to\n   * arrive at our `targetMarks`.\n   */\n  const { orderedMarksToRemove, nextOrderedMarks } = findMarksToRemove(\n    orderedMarks,\n    targetMarks\n  )\n  /**\n   * We call out to a method that adds the necessary marks back in. The\n   * algorithm here is pretty straightforward. Just add back the marks we need\n   * and to achieve some level of consistency, add them back in a specific order\n   * that feels nice and makes sense. For example, superscript/subscript is more\n   * nested than bold because they are more likely to be toggled.\n   */\n  const { orderedMarksToAdd } = findMarksToAdd(nextOrderedMarks, targetMarks)\n  return {\n    remove: orderedMarksToRemove,\n    add: orderedMarksToAdd,\n    nextOrderedMarks: [...nextOrderedMarks, ...orderedMarksToAdd],\n  }\n}\n","import { isPlainSpace, isText } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\n/**\n * If we ever find two spaces next to each other, merge them together.\n *\n * This can happen, for example, if there were spaces next to each other but\n * with different marks. It can also happen from other normalizers. For example,\n * there is a normalizer that moves spaces at the outer edges of an anchor\n * outside of the anchor.\n */\nexport function mergeAdjacentSpaces({\n  node,\n  nextNode,\n  nodes: nodes,\n  index,\n}: NormalizeOptions): boolean {\n  if (!isText(node) || !isPlainSpace(node) || node.code) return false\n  if (!isText(nextNode) || !isPlainSpace(nextNode) || node.code) return false\n  nodes.splice(index, 2, { text: `${node.text}${nextNode.text}` })\n  return true\n}\n","import { Segment } from \"../../../../types\"\nimport { isElement, isPlainSpace, isText } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\nexport function moveSpacesAtStartOfAnchor({\n  node,\n  nodes,\n  prevNode,\n  index,\n}: NormalizeOptions): boolean {\n  if (!isElement(node)) return false\n  if (node.type !== \"anchor\") return false\n  node\n  const firstChild = node.children[0] as Segment\n  if (isText(firstChild) && isPlainSpace(firstChild)) {\n    // remove the first child from the anchor\n    node.children.splice(0, 1)\n    // add the first child\n    if (isText(prevNode) && isPlainSpace(prevNode)) {\n      prevNode.text = `${prevNode.text}${firstChild.text}`\n    } else {\n      nodes.splice(index, 0, { text: firstChild.text })\n    }\n    return true\n  }\n  return false\n}\n\nexport function moveSpacesAtEndOfAnchor({\n  node,\n  nodes,\n  nextNode,\n  index,\n}: NormalizeOptions): boolean {\n  if (!isElement(node)) return false\n  if (node.type !== \"anchor\") return false\n  node\n  const lastChild = node.children[node.children.length - 1] as Segment\n  if (isText(lastChild) && isPlainSpace(lastChild)) {\n    // remove the first child from the anchor\n    node.children.splice(node.children.length - 1, 1)\n    // add the first child\n    if (isText(nextNode) && isPlainSpace(nextNode)) {\n      nextNode.text = `${lastChild.text}${nextNode.text}`\n    } else {\n      nodes.splice(index + 1, 0, { text: lastChild.text })\n    }\n    return true\n  }\n  return false\n}\n","import { isElement } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\nexport function mustHaveOneTextChild({ node }: NormalizeOptions): boolean {\n  if (!isElement(node)) return false\n  if (node.type !== \"line\") return false\n  if (node.children.length > 0) return false\n  node.children.push({ text: \"\" })\n  return true\n}\n","import { Text } from \"../../../../types\"\nimport { isPlainSpace, isText } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\n/**\n * If a Text Node has spaces at the very start, or at the very end, we slice\n * those spaces into their own nodes.\n *\n * This is to help us later with the serialize process because we need spaces\n * to be isolated so that when we apple tokens like `**bold**` we are able\n * to place the tokens so that they are always against the non-space characters.\n *\n * For example, `** bold**` would not bold the text because the `**` is not\n * touching the word `bold` on the left.\n *\n * The algorithm here works by looking for a RegExp match on spaces on the\n * left or the right. If either are found, then it splits it into three parts\n * (left space, middle and right space) and then filteres out any zero length\n * spaces at the end. In this way, we handle left and right spaces in one\n * pass.\n */\nexport function sliceSpacesAtNodeBoundaries({\n  node,\n  nodes,\n  index,\n}: NormalizeOptions): boolean {\n  if (!isText(node)) return false\n  if (isPlainSpace(node)) return false\n  /**\n   * The content of Inline Code is literal so don't move the spaces out of it.\n   */\n  if (node.code) return false\n  const match = node.text.match(/^(\\s*)(.*?)(\\s*)$/)\n  if (!match) return false\n  if (match[1].length === 0 && match[3].length === 0) return false\n  const nextSegments: Text[] = [\n    { text: match[1] },\n    { ...node, text: match[2] },\n    { text: match[3] },\n  ].filter((text) => text.text !== \"\")\n  nodes.splice(index, 1, ...nextSegments)\n  return true\n}\n","import { isElement, isPlainSpace, isText } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\nexport function trimSpaceAtEndOfLine({\n  index,\n  nodes,\n  node,\n  parent,\n}: NormalizeOptions): boolean {\n  if (index !== nodes.length - 1) return false\n  if (nodes.length <= 1) return false\n  if (!isText(node)) return false\n  if (!isPlainSpace(node)) return false\n  if (parent && isElement(parent) && parent.type === \"line\") {\n    nodes.splice(nodes.length - 1, 1)\n    return true\n  }\n  return false\n}\n","import { isElement, isPlainSpace, isText } from \"../../utils\"\nimport { NormalizeOptions } from \"../types\"\n\nexport function trimSpaceAtStartOfLine({\n  index,\n  nodes,\n  node,\n  parent,\n}: NormalizeOptions): boolean {\n  if (index !== 0) return false\n  if (nodes.length === 0) return false\n  if (!isText(node)) return false\n  if (!isPlainSpace(node)) return false\n  if (parent && isElement(parent) && parent.type === \"line\") {\n    nodes.splice(0, 1)\n    return true\n  }\n  return false\n}\n","import { NormalizeOptions } from \"../types\"\nimport { mergeAdjacentSpaces } from \"./merge-adjacent-spaces\"\nimport {\n  moveSpacesAtEndOfAnchor,\n  moveSpacesAtStartOfAnchor,\n} from \"./move-spaces-out-of-anchors\"\nimport { mustHaveOneTextChild } from \"./must-have-one-text-child\"\nimport { sliceSpacesAtNodeBoundaries } from \"./slice-spaces-at-node-boundaries\"\nimport { trimSpaceAtEndOfLine } from \"./trim-spaces-at-end-of-line\"\nimport { trimSpaceAtStartOfLine } from \"./trim-spaces-at-start-of-line\"\n\nexport const normalizers: Array<(options: NormalizeOptions) => boolean> = [\n  sliceSpacesAtNodeBoundaries,\n  moveSpacesAtStartOfAnchor,\n  moveSpacesAtEndOfAnchor,\n  mergeAdjacentSpaces,\n  trimSpaceAtStartOfLine,\n  trimSpaceAtEndOfLine,\n  mustHaveOneTextChild,\n]\n","import { normalizers } from \"./normalizers\"\nimport { NormalizeOptions } from \"./types\"\n\n/**\n * Attempts to run all normalizers on the given Node one by one.\n *\n * If any normalizer makes an update, this function exits immediately and\n * returns a `true` value indicating that a normalizer has made an update.\n *\n * Because we don't know how that update modified the data structure, another\n * pass will be made at running all the normalizers.\n *\n * This is not the most efficient route, but there isn't a lot of processing\n * we need to do and this reduces the likelihood of bugs. Normalization is\n * similar to how it works in Slate but we don't keep track of dirty paths\n * and simply rerun the normalizations at the given level until it is clean.\n */\nexport function runNormalizersOnNode(normalizeOptions: NormalizeOptions) {\n  for (const normalizer of normalizers) {\n    const isHandled = normalizer(normalizeOptions)\n    if (isHandled) {\n      return true\n    }\n  }\n  return false\n}\n","import { AnchorElement } from \"~/src/anchor-plugin\"\n\nimport { isElement } from \"../utils\"\nimport { runNormalizersOnNode } from \"./run-normalizers-on-node\"\nimport { LineElement, Node, NormalizeOptions } from \"./types\"\n\nconst MAX_RERUNS = 72\n\nexport function normalizeNodes(\n  nodes: Node[],\n  parent?: AnchorElement | LineElement\n): boolean {\n  let isAnyUpdated = false\n  let isUpdated\n  let runs = 0\n  const maxReruns = (nodes.length + 1) * MAX_RERUNS\n  do {\n    isUpdated = false\n    runs = runs + 1\n    if (runs > maxReruns)\n      throw new Error(\n        `There have been ${runs} normalization passes (72x the number of nodes at this level). This likely indicates a bug in the code.`\n      )\n    segmentLoop: for (let i = 0; i < nodes.length; i++) {\n      const node: Node = nodes[i]\n      /**\n       * Normalize the children of the current Node before normalizing the\n       * Node itself.\n       */\n      if (isElement(node)) {\n        const isChildrenUpdated = normalizeNodes(\n          node.children as Array<AnchorElement | LineElement>,\n          node\n        )\n        if (isChildrenUpdated) {\n          isUpdated = true\n          isAnyUpdated = true\n          break segmentLoop\n        }\n      }\n      /**\n       * Create the normalizeOptions\n       */\n      const prevNode: Node | undefined = nodes[i - 1]\n      const nextNode: Node | undefined = nodes[i + 1]\n      const options: NormalizeOptions = {\n        parent,\n        node,\n        prevNode,\n        nextNode,\n        index: i,\n        nodes,\n      }\n\n      /**\n       * Run the normalizers on this node.\n       */\n      if (runNormalizersOnNode(options)) {\n        isUpdated = true\n        isAnyUpdated = true\n        break segmentLoop\n      }\n    }\n  } while (isUpdated)\n  return isAnyUpdated\n}\n","import { Element } from \"slate\"\n\nimport { Segment } from \"../../../types\"\nimport { normalizeNodes } from \"./normalize-nodes\"\nimport { LineElement } from \"./types\"\n\n/**\n * A very focused duplicate function that only duplicates the `children` of\n * `anchor` elements.\n *\n * It's designed this way to be fast and to avoid duplicating the entire tree\n * as only anchors have children that will be manipulated.\n */\nconst duplicateSegments = (segments: Segment[]): Segment[] => {\n  return segments.map((segment) => {\n    if (Element.isElement(segment) && segment.type === \"anchor\") {\n      return {\n        ...segment,\n        children: duplicateSegments(segment.children as Segment[]),\n      }\n    } else {\n      return segment\n    }\n  })\n}\n\n/**\n * Entry Point for normalizing\n */\nexport function normalizeLine(segments: Segment[]) {\n  /**\n   * We need to duplicate `segments` because `normalizeNodes` will manipulate the\n   * array but the original array coming from Slate will be readOnly.\n   */\n  const line: LineElement = {\n    type: \"line\",\n    children: duplicateSegments(segments),\n  }\n  normalizeNodes([line], undefined)\n  return line.children\n}\n","import { Text } from \"../../../types\"\n\nexport function serializeCodeText(text: Text): string {\n  let max = 0\n  for (const match of text.text.matchAll(/[`]+/g)) {\n    max = Math.max(max, match[0].length)\n  }\n  if (max === 0) return `\\`${text.text.replace(/[`]/g, \"\\\\`\")}\\``\n  return `${\"`\".repeat(max + 1)} ${text.text} ${\"`\".repeat(max + 1)}`\n}\n","import { AnchorElement } from \"~/src/anchor-plugin\"\n\nimport { Segment } from \"../../../types\"\nimport { serializeLine } from \"../serialize-line\"\nimport { getCommonAnchorMarks } from \"../utils\"\n\nfunction escapeTitle(title: string): string {\n  return title.replace(/\"/g, '\\\\\"')\n}\n\nexport function serializeAnchor(anchor: AnchorElement): string {\n  const commonAnchorMarks = getCommonAnchorMarks(anchor.children as Segment[])\n  if (anchor.href.startsWith(\"$\"))\n    return serializeLine(\n      anchor.children as Segment[],\n      commonAnchorMarks,\n      commonAnchorMarks\n    )\n  if (typeof anchor.title === \"string\" && anchor.title.length > 0) {\n    return (\n      /**\n       * TODO: Handle anchor children more elegantly in serializeAnchor.\n       *\n       * We type cast `children` as `Segment` here because the children of an\n       * `anchor` is limited to be Inline types. There are two things to do\n       * related to this though:\n       *\n       * - [ ] consider fixing the `anchor` type to actually limit the\n       *   children as expected.\n       * - [ ] consider expanding the definition of `Segment` to include\n       *   inline images as that is an acceptable inline value which is\n       *   currently not defined as part of Segment.\n       */\n      `[${serializeLine(\n        anchor.children as Segment[],\n        commonAnchorMarks,\n        commonAnchorMarks\n      )}](${anchor.href} \"${escapeTitle(anchor.title)}\")`\n    )\n  } else {\n    return (\n      /**\n       * TODO: Handle anchor children more elegantly in serializeAnchor.\n       *\n       * We type cast `children` as `Segment` here because the children of an\n       * `anchor` is limited to be Inline types. There are two things to do\n       * related to this though:\n       *\n       * - [ ] consider fixing the `anchor` type to actually limit the\n       *   children as expected.\n       * - [ ] consider expanding the definition of `Segment` to include\n       *   inline images as that is an acceptable inline value which is\n       *   currently not defined as part of Segment.\n       */\n      `[${serializeLine(\n        anchor.children as Segment[],\n        commonAnchorMarks,\n        commonAnchorMarks\n      )}](${anchor.href})`\n    )\n  }\n}\n","import { Text } from \"../../../types\"\nimport { escapeText } from \"../utils\"\n\nexport function serializeNonCodeText(text: Text): string {\n  return escapeText(text.text)\n}\n","import { Text as SlateText } from \"slate\"\n\nimport { Segment } from \"../../../types\"\nimport { assertUnreachable } from \"../../../utils\"\nimport { serializeImageShared } from \"../../serialize-image-shared\"\nimport { serializeCodeText } from \"../segment/serialize-code-text\"\nimport { serializeAnchor } from \"./serialize-anchor\"\nimport { serializeNonCodeText } from \"./serialize-non-code-text\"\n\nexport function serializeSegment(segment: Segment): string {\n  if (SlateText.isText(segment)) {\n    /**\n     * If the segment is a `code` segment, we need to use a different strategy\n     * for escaping the `code` segment. This is why it needs a separate\n     * serializing function.\n     */\n    if (segment.code) return serializeCodeText(segment)\n    /**\n     * Otherwise, we use the standard text escaping code.\n     */\n    return serializeNonCodeText(segment)\n  }\n  switch (segment.type) {\n    case \"anchor\": {\n      return serializeAnchor(segment)\n    }\n    case \"image-inline\":\n      return serializeImageShared(segment)\n    default:\n      assertUnreachable(segment)\n  }\n}\n","import { Element as SlateElement, Text as SlateText } from \"slate\"\n\nimport { MarkKey, Segment } from \"../../types\"\nimport { diffMarks } from \"./diff-marks\"\nimport { normalizeLine } from \"./normalize-line\"\nimport { serializeSegment } from \"./segment/serialize-segment\"\nimport {\n  convertMarksToSymbolsExceptCode,\n  getMarksFromSegment,\n  isPlainSpace,\n} from \"./utils\"\n\n/**\n * Takes a line (an array of Segment) and turns it into markdown.\n *\n * The majority of this code deals with how we convert marks like `bold` and\n * `italic` into symbols and where to place them. There are several complicated\n * cases we need to handle like:\n *\n * - Symbols must always be placed on the inside of spaces next to the word like\n *   \" **bold** \" and not \"** bold **\". We need to be aware of our placement of\n *   symbols around spaces but spaces themselves can safely and actually must\n *   ignore the actual marks on them. A bold space and a not-bold space are\n *   considered the same in Markdown.\n * - Anchors must have common marks moved out of them\n * - Anchors must have not common marks set inside of them\n */\nexport function serializeLine(\n  inputSegments: Segment[],\n  leadingMarks: MarkKey[] = [],\n  trailingMarks: MarkKey[] = []\n): string {\n  /**\n   * Normalize line does a lot of the work here to take any spaces that can be\n   * found around the edges of segments and turns them into their own segments.\n   * We don't need to do this in spaces on the inside of segments though.\n   *\n   * This is important because at the boundaries of segments, that's when marks\n   * change (e.g. bold/italic) and it is at these points, we need to put spaces\n   * into separate segments so that we can place the symbols for the marks\n   * around them.\n   */\n  const segments = normalizeLine(inputSegments)\n  const substrings: string[] = []\n\n  /**\n   * In order to seed the loop, we start by creating a `leadingDiff` going from\n   * the `leadingMarks` provided to this method and the marks in the first\n   * segment.\n   *\n   * The `leadingMarks` will always be `[]` at the beginning. When we get into a\n   * nested `anchor` though, there may be some marks that had been previously\n   * set outside of the anchor that need to be considered.\n   */\n  let leadingDiff = diffMarks(leadingMarks, getMarksFromSegment(segments[0]))\n\n  /**\n   * In each iteration, we want to serialize the following:\n   *\n   * - Symbols that represent all the marks to add to this segment\n   * - The markdown for the segment itself (text, inline code, anchor, inline\n   *   image)\n   * - Symbols that represent all the marks to remove from this segment\n   */\n  for (let i = 0; i < segments.length; i++) {\n    /**\n     * This is the current segment that we are looking at.\n     */\n    const segment = segments[i]\n\n    /**\n     * If it's plain space, add it to markdown and start at the top of the loop\n     * again\n     *\n     * Basically, ignore the symbols we need to add when it's a space.\n     *\n     * The symbols get handled by the non-space segments.\n     *\n     * When we continue, we end up with the same `leadingDiff` from the last\n     * segment which is what we want. This is because the `leadingDiff` actually\n     * applies to the next Segment which should be either a not space Text or an\n     * Element.\n     */\n    if (SlateText.isText(segment) && isPlainSpace(segment)) {\n      substrings.push(segment.text)\n      continue\n    }\n\n    /**\n     * Here is where we add the serialization of the segment.\n     *\n     * First we start by adding the symbols needed to add the marks to this\n     * segment.\n     */\n    substrings.push(convertMarksToSymbolsExceptCode(leadingDiff.add))\n\n    /**\n     * Then we add the Text or the Anchor for the segment\n     */\n    substrings.push(serializeSegment(segment))\n\n    /**\n     * Now we are searching for the next segment which we want to grab the marks\n     * from. Basically, any segment that isn't a space. For clarity, in this\n     * algorithm, we should never have two `isPlainSpace` segments in a row\n     * because this would have been normalized to one `isPlainSpace` segment in\n     * the call to `normalizeLine`\n     */\n    const nextMarks = getNextMarks(segments, i, trailingMarks)\n    const trailingDiff = diffMarks(leadingDiff.nextOrderedMarks, nextMarks)\n    substrings.push(convertMarksToSymbolsExceptCode(trailingDiff.remove))\n\n    /**\n     * The `trailingDiff` becomes the new `leadingDiff`\n     */\n    leadingDiff = trailingDiff\n  }\n  return substrings.join(\"\")\n}\n\n/**\n * Looks for the next set of valid marks by\n *\n * This method is local to `serialize-line` as it's intimiately tied with the\n * call to `getNextMarks` in `serializeLine`\n */\nfunction getNextMarks(\n  segments: Segment[],\n  index: number,\n  trailingMarks: MarkKey[]\n): MarkKey[] {\n  /**\n   * Starting at the index `i` following the current index `index`\n   *\n   * If it's a plain space, skip it.\n   *\n   * If it isn't, get the marks for the segment.\n   *\n   * NOTE:\n   *\n   * If the segment is an `anchor` we the common marks for all the segments in\n   * the anchor not including the plain spaces.\n   */\n  for (let i = index + 1; i < segments.length; i++) {\n    const segment = segments[i]\n    if (isPlainSpace(segment)) continue\n    if (SlateElement.isElement(segment)) {\n      const element = segment as { type?: string }\n      if (element.type === \"image-inline\") continue\n    }\n    return getMarksFromSegment(segment)\n  }\n  return trailingMarks\n}\n","import {\n  TableCellElement,\n  TableColumnAlign,\n  TableContentElement,\n  TableElement,\n  TableRowElement,\n} from \"~/src/table-plugin\"\n\nimport { Segment } from \"../../types\"\nimport { assert, assertElementType } from \"../../utils\"\nimport { serializeLine } from \"../serialize-line\"\n\nexport function serializeTable(element: TableElement): string {\n  const lines: string[] = []\n  lines.push(serializeTableRow(element.children[0]))\n  lines.push(serializeColumns(element.columns))\n  element.children.slice(1).forEach((row) => {\n    lines.push(serializeTableRow(row))\n  })\n  return `${lines.join(\"\\n\")}\\n\\n`\n}\n\nfunction serializeColumns(columns: TableElement[\"columns\"]): string {\n  const isAllLeft = columns.every((column) => column.align === \"left\")\n  /**\n   * If all of the columns are to the left, it looks nicer if we don't specify\n   * column alignment in the markdown at all. Just use the default `---` to\n   * specify each column.\n   */\n  if (isAllLeft) {\n    return `|${columns.map(() => \"---\").join(\"|\")}|`\n  }\n  /**\n   * If one or more of the columns is not aligned left, let's add some clarity\n   * and specify the alignment of all the columns including the `left` aligned\n   * ones.\n   */\n  return `|${columns.map((column) => serializeAlign(column.align)).join(\"|\")}|`\n}\n\nfunction serializeAlign(align: TableColumnAlign) {\n  switch (align) {\n    case \"left\":\n      return \":---\"\n    case \"center\":\n      return \":---:\"\n    case \"right\":\n      return \"---:\"\n  }\n}\n\nfunction serializeTableRow(element: TableRowElement): string {\n  assertElementType(element, \"table-row\")\n  return `|${element.children.map(serializeTableCell).join(\"|\")}|`\n}\n\nfunction serializeTableCell(element: TableCellElement): string {\n  assertElementType(element, \"table-cell\")\n  assert(\n    element.children.length === 1,\n    `Expected table-cell to have one child but is ${JSON.stringify(\n      element.children\n    )}`\n  )\n  return element.children.map(serializeTableContent).join()\n}\n\nfunction serializeTableContent(element: TableContentElement): string {\n  assertElementType(element, \"table-content\")\n  return serializeLine(element.children as Segment[])\n}\n","import { Element, Segment } from \"../types\"\nimport { assertUnreachable } from \"../utils\"\nimport { serializeElements } from \"./serialize-elements\"\nimport { serializeCodeBlock } from \"./serialize-code-block\"\nimport { serializeImageBlock } from \"./serialize-image-block\"\nimport { serializeLine } from \"./serialize-line\"\nimport { serializeTable } from \"./serialize-table\"\n\nconst LIST_INDENT_SIZE = 4\n\nexport function serializeElement(element: Element, orders: number[]): string {\n  switch (element.type) {\n    case \"anchor\":\n      return `[${serializeLine(element.children as Segment[])}](${element.href\n        })`\n    case \"block-quote\": {\n      const lines = serializeElements(element.children as Element[])\n      return `${lines\n        .split(\"\\n\")\n        .map((line) => `> ${line}`.trim())\n        .join(\"\\n\")}\\n\\n`\n    }\n    case \"heading\":\n      return `${\"#\".repeat(element.level)} ${serializeLine(\n        element.children as Segment[]\n      )}\\n\\n`\n    case \"horizontal-rule\":\n      return \"---\\n\\n\"\n    case \"paragraph\":\n      return `${serializeLine(element.children as Segment[])}\\n\\n`\n    /**\n     * Table\n     */\n    case \"table\":\n      return serializeTable(element)\n    case \"table-row\":\n    case \"table-cell\":\n    case \"table-content\":\n      throw new Error(\n        `Table elements should only be present as children of table which should be handled by serializeTable. Got ${element.type} may indicate an error in normalization.`\n      )\n    /**\n     * List\n     */\n    case \"unordered-list-item\": {\n      const indent = \" \".repeat(element.depth * LIST_INDENT_SIZE)\n      return `${indent}- ${serializeLine(element.children as Segment[])}\\n`\n    }\n    case \"ordered-list-item\": {\n      const indent = \" \".repeat(element.depth * LIST_INDENT_SIZE)\n      return `${indent}${orders[element.depth]}. ${serializeLine(\n        element.children as Segment[]\n      )}\\n`\n    }\n    case \"task-list-item\": {\n      const indent = \" \".repeat(element.depth * LIST_INDENT_SIZE)\n      let line = serializeLine(element.children as Segment[])\n      if (line.trim() === \"\") {\n        line = \"&#32;\"\n      }\n      return `${indent}- [${element.checked ? \"x\" : \" \"}] ${line}\\n`\n    }\n    case \"image-block\":\n      return serializeImageBlock(element)\n    case \"code-block\":\n      return serializeCodeBlock(element)\n    case \"code-block-line\":\n      throw new Error(\n        `Code block line elements should only be present as children of code-block which should be handled by serializeCodeBlock. Got code-block-line may indicate an error in normalization.`\n      )\n  }\n  assertUnreachable(element)\n}\n","import { Element } from \"../types\"\nimport { serializeElement } from \"./serialize-element\"\n\nexport function serializeElements(elements: Element[]): string {\n  const segments: string[] = []\n\n  /**\n   * The orders array keeps track of the number of ordered list items at each\n   * depth. This is used to generate the number for each ordered list item.\n   */\n  let orders: number[] = []\n\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const nextElement = i < elements.length - 1 ? elements[i + 1] : null;\n\n    if (element.type === \"ordered-list-item\") {\n      /**\n       * When we're at an ordered list item, we increment the order at the\n       * current depth level and we remove any orders at a deeper depth level.\n       */\n      orders[element.depth] = (orders[element.depth] || 0) + 1\n      orders = orders.slice(0, element.depth + 1)\n    } else if (\n      element.type === \"unordered-list-item\" ||\n      element.type === \"task-list-item\"\n    ) {\n      /**\n       * When we're at an unordered list item, we slice the orders array to\n       * remove any orders at a deeper depth level.\n       */\n      orders = orders.slice(0, element.depth)\n    } else {\n      /**\n       * When we're at any other element, we reset the orders array because\n       * we're no longer in a list.\n       */\n      orders = []\n    }\n\n    // Get the serialized element\n    let serialized = serializeElement(element, orders);\n\n    // If this is a list item and the next element is not a list item,\n    // add an extra newline to create proper spacing between list and paragraph\n    if ((element.type === \"ordered-list-item\" ||\n      element.type === \"unordered-list-item\" ||\n      element.type === \"task-list-item\") &&\n      (!nextElement ||\n        (nextElement.type !== \"ordered-list-item\" &&\n          nextElement.type !== \"unordered-list-item\" &&\n          nextElement.type !== \"task-list-item\"))) {\n      serialized = serialized.replace(/\\n$/, \"\\n\\n\");\n    }\n\n    segments.push(serialized);\n  }\n  /**\n   * NOTE:\n   *\n   * We remove trailing whitespace because we want minimum viable markdown.\n   * It also makes it easier to test.\n   */\n  const joined = segments.join(\"\") //.trim()\n\n  /**\n   * If there is no content return an empty string for the Markdown.\n   */\n  if (joined.trim() === \"\") return \"\"\n\n  /**\n   * The following code replaces consecutive newlines with a single newline\n   * with a bit of additional logic to handle newlines at the beginning.\n   */\n  return replaceConsecutiveNewlines(replaceLeadingNewlines(joined)).trim()\n}\n\n/**\n * Replace two leading newlines with a non-breaking space to indicate a\n * paragraph that won't be collapsed.\n */\nfunction replaceLeadingNewlines(input: string): string {\n  return input.replace(/^\\n\\n/g, \"&nbsp;\\n\\n\")\n}\n\n/**\n * In the rest of the Markdown, replace four or more consecutive newlines with\n * non-breaking spaces and newlines to indicate a paragraph that won't be\n * collapsed.\n */\nfunction replaceConsecutiveNewlines(input: string): string {\n  return input.replace(/(\\n{4,})/g, (match) => {\n    const newlineCount = match.length\n    const count = Math.floor((newlineCount - 2) / 2)\n    return \"\\n\\n\" + Array(count).fill(\"&nbsp;\").join(\"\\n\\n\") + \"\\n\\n\"\n  })\n}\n","import { Element } from \"../types\"\nimport { normalizeElementListDepths } from \"./normalize/normalizeElementListDepths\"\nimport { serializeElements } from \"./serialize-elements\"\n\nexport function serialize(elements: Element[]): string {\n  const normalizedElements = normalizeElementListDepths(elements)\n  return serializeElements(normalizedElements)\n}\n","interface Translations {\n  [key: string]: {\n    bold: string;\n    italic: string;\n    strike: string;\n    inlineCode: string;\n    underline: string;\n    increaseDepth: string;\n    decreaseDepth: string;\n    heading1: string;\n    heading2: string;\n    heading3: string;\n    normal: string;\n    paragraph: string;\n    paragraphStyle: string;\n    bulletList: string;\n    numberedList: string;\n    checkList: string;\n    list: string;\n    linkUrl: string;\n    tooltipText: string;\n    tooltipHint: string;\n    apply: string;\n    cancel: string;\n    insertLink: string;\n    quote: string;\n    insertTable: string;\n    insertImage: string;\n    insertImageFromUrl: string;\n    insert: string;\n    format: string;\n    imageUrlRequired: string;\n    altText: string;\n    title: string;\n    imageDescription: string;\n    imageTitle: string;\n    switchToVisualEditor: string;\n    switchToRawMarkdown: string;\n    codeBlock: string;\n    increaseQuoteDepth: string;\n  };\n}\n\nexport const translations: Translations = {\n  ja: {\n    bold: \"\",\n    italic: \"\",\n    strike: \"\",\n    inlineCode: \"\",\n    underline: \"\",\n    increaseDepth: \"\",\n    decreaseDepth: \"\",\n    heading1: \"1\",\n    heading2: \"2\",\n    heading3: \"3\",\n    normal: \"\",\n    paragraph: \"\",\n    paragraphStyle: \"\",\n    bulletList: \"\",\n    numberedList: \"\",\n    checkList: \"\",\n    list: \"\",\n    linkUrl: \"URL\",\n    tooltipText: \"\",\n    tooltipHint: \"\",\n    apply: \"\",\n    cancel: \"\",\n    insertLink: \"\",\n    quote: \"\",\n    insertTable: \"\",\n    insertImage: \"\",\n    insertImageFromUrl: \"\",\n    insert: \"\",\n    format: \"\",\n    imageUrlRequired: \"URL\",\n    altText: \"\",\n    title: \"\",\n    imageDescription: \"\",\n    imageTitle: \"\",\n    switchToVisualEditor: \"\",\n    switchToRawMarkdown: \"\",\n    codeBlock: \"\",\n    increaseQuoteDepth: \"\",\n  },\n  en: {\n    bold: \"Bold\",\n    italic: \"Italic\",\n    strike: \"Strikethrough\",\n    inlineCode: \"Inline Code\",\n    underline: \"Underline\",\n    increaseDepth: \"Increase Depth\",\n    decreaseDepth: \"Decrease Depth\",\n    heading1: \"Heading 1\",\n    heading2: \"Heading 2\",\n    heading3: \"Heading 3\",\n    normal: \"Normal\",\n    paragraph: \"Paragraph\",\n    paragraphStyle: \"Paragraph Style\",\n    bulletList: \"Bullet List\",\n    numberedList: \"Numbered List\",\n    checkList: \"Check List\",\n    list: \"List\",\n    linkUrl: \"Link URL\",\n    tooltipText: \"Tooltip Text\",\n    tooltipHint: \"Tooltip shown on mouse hover\",\n    apply: \"Apply\",\n    cancel: \"Cancel\",\n    insertLink: \"Link\",\n    quote: \"Quote\",\n    insertTable: \"Table\",\n    insertImage: \"Image\",\n    insertImageFromUrl: \"Image\",\n    insert: \"Insert\",\n    format: \"Format\",\n    imageUrlRequired: \"Image URL (required):\",\n    altText: \"Alt Text:\",\n    title: \"tooltip:\",\n    imageDescription: \"Description of the image\",\n    imageTitle: \"tooltip\",\n    switchToVisualEditor: \"Switch to visual editor\",\n    switchToRawMarkdown: \"Switch to raw markdown\",\n    codeBlock: \"Code Block\",\n    increaseQuoteDepth: \"Increase Quote Depth\",\n  },\n};\n\nexport type TranslationKey = keyof Translations[\"en\"];\n\nconst getLanguage = (): string => {\n  try {\n    // Check if we're in a browser environment\n    if (typeof window !== 'undefined' && window.navigator) {\n      return window.navigator.language.split(\"-\")[0];\n    }\n  } catch (e) {\n    // Ignore any errors\n  }\n  // Default to 'en' in server environment\n  return 'en';\n};\n\nexport const t = (key: TranslationKey): string => {\n  const lang = getLanguage();\n  return translations[lang === \"ja\" ? \"ja\" : \"en\"][key];\n};\n\nexport const r = (value: string): string => {\n  const lang = getLanguage();\n  // value\n  const key = Object.keys(translations[lang === \"ja\" ? \"ja\" : \"en\"]).find(\n    (k) => translations[lang === \"ja\" ? \"ja\" : \"en\"][k as TranslationKey] === value\n  ) as TranslationKey;\n  return key || \"\";\n};\n","import { InputPluginSchema, TypedPluginFunction } from \"../types\"\nimport { BasePlugin } from \"../types/plugin/plugin\"\n\n/**\n * The `createPlugin` method here takes a function and returns the same\n * function.\n *\n * From a JavaScript point of view, it does nothing itself return itself.\n *\n * From a typing point of view, it takes these two arguments...\n *\n * - The CustomTypes used by the plugin as a Generic\n * - A function that when executed with an `Editor` object, returns a\n *   PluginObject as a function argument\n *\n * ...and ensure that the function argument adheres to the limits of the\n * Generic Argument.\n *\n * For example, if the CustomTypes defines an `Element`, then the function\n * argument will have its element related methods constrained to the Element\n * given in CustomTypes.\n *\n * The benefit of this is that it helps the Plugin only see what is relevant\n * to this plugin. In fact, it insists on it. This will prevent accidental\n * dependency on another plugin.\n *\n * You can add dependencies between plugins, but when we do that, it insists\n * on having that done explicitly.\n */\nexport const createPlugin = <T extends InputPluginSchema>(\n  fn: TypedPluginFunction<T>\n) => {\n  return { fn } as BasePlugin\n}\n","import { useEffect, useMemo } from \"react\"\nimport { Editor } from \"slate\"\nimport { useSlateStatic } from \"slate-react\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { SinkEditor } from \"../types\"\nimport { createDecorate } from \"./create-decorate\"\nimport { createEditable } from \"./create-editable\"\nimport {\n  createOnDrop,\n  createOnKeyDown,\n  createOnKeyUp,\n  createOnPaste,\n} from \"./create-handler\"\nimport { createRenderElement } from \"./create-render-element\"\nimport { createRenderLeaf } from \"./create-render-leaf\"\nimport { createRenderPlaceholder } from \"./create-render-placeholder\"\nexport { SinkReset } from \"./styles\"\n\n/**\n * In Editable, we use the Slate context to grab the right things from\n * the editor.\n */\nexport function SinkEditable(originalProps: EditableProps): React.ReactElement {\n  const editor = useSlateStatic() as unknown as Editor & SinkEditor\n\n  /**\n   * We ask Slate to normalize the editor once at the very start.\n   *\n   * This is helpful for plugins that need to store some useful state in the\n   * document and to add or fix certain parts of the document. Not all of\n   * these values are stored in the saved documents.\n   *\n   * Some examples:\n   *\n   * - inserting collapsible paragraphs between void components. These should\n   *   not be saved.\n   *\n   * - Add column and row indexes to help with rendering which should not\n   *   be saved.\n   *\n   * Ideally, we wouldn't have to do any of this but pragmatically, it is\n   * the most performant route.\n   *\n   * Once we normalize the document once, the document is kept up to date\n   * through regular normalizing steps that are more performance because\n   * they only check changed nodes.\n   */\n  useEffect(() => {\n    Editor.normalize(editor, { force: true })\n  }, [])\n\n  const { plugins } = editor.sink\n\n  const nextProps: EditableProps = useMemo(\n    () => ({\n      ...originalProps,\n      decorate: createDecorate(originalProps.decorate, plugins),\n      renderElement: createRenderElement(originalProps.renderElement, plugins),\n      renderLeaf: createRenderLeaf(originalProps.renderLeaf, plugins),\n      renderPlaceholder: createRenderPlaceholder(\n        originalProps.renderPlaceholder,\n        plugins\n      ),\n      /**\n       * NOTE: We skip `onKeyUp` as it is deprecated. If somebody needs it in new\n       * code, we can add it back in.\n       *\n       * https://developer.mozilla.org/en-US/docs/Web/API/Element/keypress_event\n       */\n      onKeyDown: createOnKeyDown(originalProps.onKeyDown, plugins),\n      onKeyUp: createOnKeyUp(originalProps.onKeyUp, plugins),\n      onPaste: createOnPaste(originalProps.onPaste, plugins),\n      onDrop: createOnDrop(originalProps.onDrop, plugins),\n    }),\n    Object.values(originalProps)\n  )\n\n  const NextEditable = useMemo(() => createEditable(plugins), [plugins])\n\n  /**\n   * NOTE:\n   *\n   * The following code is used to see if we are getting unnecessary re-renders.\n   *\n   * Comment it out when we are happy.\n   *\n   * - We SHOULD see `SinkeEditable render` whenever the markdown is updated\n   * - We SHOULD NOT see `SinkEditable mount` or unmount at each update\n   */\n  // console.log(\"SinkEditable render\")\n\n  // console.log(Object.values(nextProps))\n\n  // useEffect(() => {\n  //   console.log(\"SinkEditable mount\")\n  //   return () => {\n  //     console.log(\"SinkEditable unmount\")\n  //   }\n  // }, [NextEditable, nextProps])\n\n  return <NextEditable {...nextProps} />\n}\n","export function defined<T>(value: T | undefined): value is T {\n  return !!value\n}\n","import { NodeEntry, Range } from \"slate\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\nimport { defined } from \"./utils\"\n\n/**\n * Create the substituted `decorate` method.\n *\n * With decorate, we are taking all the ranges from all the decorators and\n * combining them together, including the ranges created from the `decorate`\n * attribute on `SinkEditable`.\n */\nexport function createDecorate(\n  originalFn: EditableProps[\"decorate\"],\n  plugins: BasePluginPolicy[]\n): NonNullable<EditableProps[\"decorate\"]> {\n  const fns = plugins\n    .map((plugin) => plugin.editableProps?.decorate)\n    .filter(defined)\n  return function (entry: NodeEntry): Range[] {\n    const ranges: Range[] = []\n    for (const fn of fns) {\n      const resultRanges = fn(entry)\n      ranges.push(...resultRanges)\n    }\n    if (originalFn) ranges.push(...originalFn(entry))\n    return ranges\n  }\n}\n","import { Editable } from \"slate-react\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\nimport { defined } from \"./utils\"\n\ntype EditableType = (editableProps: EditableProps) => React.ReactElement\n\n/**\n * create a new Editable component that takes all the `renderEditable` functions\n * which are components and have them wrap around the original Editable component.\n */\nexport function createEditable(\n  plugins: BasePluginPolicy[]\n): NonNullable<EditableType> {\n  const fns = plugins.map((plugin) => plugin.renderEditable).filter(defined)\n\n  /**\n   * This creates the inner-most RenderEditable.\n   */\n  let CurrentRenderEditable = (props: EditableProps) => <Editable {...props} />\n  /**\n   * We iterate through all the `renderEditable` functions and wrap them\n   * around the next inner-most `renderEditable`.\n   */\n  for (const fn of fns) {\n    /**\n     * Assigns the CurrentRenderEditable as the previous one so that we can\n     * have it available to call in the NextRenderEditable\n     */\n    const PrevRenderEditable = CurrentRenderEditable\n\n    CurrentRenderEditable = (props: EditableProps) => {\n      /**\n       * TODO:\n       *\n       * This should probably be fixed in the actual types; however, we\n       * know at this point that `renderEditable` is defined because we\n       * filtered it in an earlier step.\n       */\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      return fn({\n        attributes: props,\n        Editable: PrevRenderEditable,\n      })\n    }\n  }\n\n  return CurrentRenderEditable\n\n  // return function SinkEditable(props) {\n  // /**\n  //  * This creates the inner-most RenderEditable.\n  //  */\n  // let CurrentRenderEditable = (props: EditableProps) => (\n  //   <Editable {...props} />\n  // )\n  // /**\n  //  * We iterate through all the `renderEditable` functions and wrap them\n  //  * around the next inner-most `renderEditable`.\n  //  */\n  // for (const fn of fns) {\n  //   /**\n  //    * Assigns the CurrentRenderEditable as the previous one so that we can\n  //    * have it available to call in the NextRenderEditable\n  //    */\n  //   const PrevRenderEditable = CurrentRenderEditable\n  //   CurrentRenderEditable = (props: EditableProps) => {\n  //     /**\n  //      * TODO:\n  //      *\n  //      * This should probably be fixed in the actual types; however, we\n  //      * know at this point that `renderEditable` is defined because we\n  //      * filtered it in an earlier step.\n  //      */\n  //     // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  //     return fn({\n  //       attributes: props,\n  //       Editable: PrevRenderEditable,\n  //     })\n  //   }\n  // }\n  // return <CurrentRenderEditable {...props} />\n  // }\n}\n","import { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\n\n/**\n * Create the substituted event handler method.\n *\n * Generally, we are looking for the first result from any plugin or on\n * SinkEditable and return the first one that returns a value only.\n *\n * Iterate over all the plugin handlers. If one handler returns `false`\n * then we go to the next one until we get one that returns `true`. If we don't\n * fine on that returns `true`, then we go to the handler passed to the\n * `SinkEditable` component.\n */\n\n/**\n * TODO:\n *\n * It's probably not THAT important, but the holy grail as a programmer here is\n * to:\n *\n * 1. Have these functions created without the boilerplate. It really feels\n *    like it could be one function that takes `plugins` and a `key` and all\n *    the typing and stuff would work.\n *\n * 2. Build it in a way that's easy to reason about. There is probably a way\n *    to do this that works, but nobody will ever be able to work on it if there\n *    is a problem, and probably a way to do it where it's somewhat\n *    comprehensible.\n */\n\n/**\n * Here we define strictly the type for a method that creates an Event Handler\n * on Editable. We define this separately because (a) it is easier to do it and\n * give clarity to it as a separate type and (b) we want to check the actual\n * method that we created against this type as an early warning signal if we\n * did something wrong.\n *\n * A method that creates a method, that pulls from a plugin a function that is\n * similar to, but not exactly, like the function that it is going to be\n * returning, is a bit of a nightmare and this helps make sure we don't make\n * mistakes.\n *\n * In other words, don't remove this and use the automatic typing as it's a\n * good way to make sure that this method is typed correctly.\n */\ntype CreateHandler<K extends keyof EditableProps> = (\n  originalFn: EditableProps[K],\n  plugins: BasePluginPolicy[]\n) => NonNullable<EditableProps[K]>\n\n/**\n * Takes an array of Plugin objects and extracts all of the specified\n * `editableProps` handler functions from it. If it's not defined, we skip it\n * so that we end up with an Array that is populated with the functions only\n * and no `undefined` in it.\n */\nfunction extractEditableFns<\n  K extends keyof Required<BasePluginPolicy>[\"editableProps\"]\n>(\n  plugins: BasePluginPolicy[],\n  key: K\n): NonNullable<Required<BasePluginPolicy>[\"editableProps\"][K]>[] {\n  const fns: NonNullable<Required<BasePluginPolicy>[\"editableProps\"][K]>[] = []\n  for (const plugin of plugins) {\n    const maybeFn = plugin.editableProps?.[key]\n    if (maybeFn) fns.push(maybeFn)\n  }\n  return fns\n}\n\n/**\n * Takes an array of handler functions that will return a boolean which\n * indicates that an event was handled. If the function was handled, then we\n * return and stop execution immediately.\n *\n * We keep going through all the handlers until something handles it.\n *\n * If none of the plugin fns handle it, then we check to see if there was an\n * original function defined and execute that if there is.\n */\nfunction createHandlerFn<A>(\n  fns: ((arg: A) => boolean)[],\n  originalFn: ((arg: A) => void) | undefined\n) {\n  return function (event: A) {\n    for (const fn of fns) {\n      if (fn(event)) return\n    }\n    originalFn?.(event)\n  }\n}\n\n/**\n * keyDown handler\n */\nexport const createOnKeyDown: CreateHandler<\"onKeyDown\"> = (\n  originalFn,\n  plugins\n) => {\n  const fns = extractEditableFns(plugins, \"onKeyDown\")\n  return createHandlerFn(fns, originalFn)\n}\n\n/**\n * keyUp handler\n */\nexport const createOnKeyUp: CreateHandler<\"onKeyUp\"> = (\n  originalFn,\n  plugins\n) => {\n  const fns = extractEditableFns(plugins, \"onKeyUp\")\n  return createHandlerFn(fns, originalFn)\n}\n\n/**\n * onPaste handler\n */\nexport const createOnPaste: CreateHandler<\"onPaste\"> = (\n  originalFn,\n  plugins\n) => {\n  const fns = extractEditableFns(plugins, \"onPaste\")\n  return createHandlerFn(fns, originalFn)\n}\n\n/**\n * onDrop handler\n */\nexport const createOnDrop: CreateHandler<\"onDrop\"> = (originalFn, plugins) => {\n  const fns = extractEditableFns(plugins, \"onDrop\")\n  return createHandlerFn(fns, originalFn)\n}\n","import { RenderElementProps } from \"slate-react\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\nimport { defined } from \"./utils\"\n\n/**\n * Create the substituted `renderElement` method.\n *\n * Generally, we are looking for the first result from any plugin or on\n * SinkEditable and return the first one that returns a value only.\n *\n * Iterate over all the plugin `renderElement`. If they return nothing\n * then we go to the next one until we hit a result. If we don't hit a\n * result, then we go to the `renderElement` passed to the `SinkEditable`\n * component.\n */\n\nexport function createRenderElement(\n  originalFn: EditableProps[\"renderElement\"],\n  plugins: BasePluginPolicy[]\n): NonNullable<EditableProps[\"renderElement\"]> {\n  const fns = plugins\n    .map((plugin) => plugin.editableProps?.renderElement)\n    .filter(defined)\n  return function renderElement(\n    renderElementProps: RenderElementProps\n  ): JSX.Element {\n    for (const fn of fns) {\n      const result = fn(renderElementProps)\n      if (result) return result\n    }\n    if (originalFn === undefined) {\n      throw new Error(\n        `Element with type ${renderElementProps.element.type} not handled. Note that renderElement is not defined on SinkEditable so this is only the result of checking the Sink Plugins.`\n      )\n    }\n    return originalFn(renderElementProps)\n  }\n}\n","import { cloneElement } from \"react\"\nimport { RenderLeafProps } from \"slate-react\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\nimport { defined } from \"./utils\"\n\n/**\n * Create the substituted `renderLeaf` method.\n *\n * Generally, we are looking for all the results from all the plugins and\n * SinkEditable and merge the results together by nesting the responses\n * starting from the first plugin on the outside to the `renderLeaf` method\n * on `SinkEditable` on the inside.\n */\n\nexport function createRenderLeaf(\n  originalFn: EditableProps[\"renderLeaf\"],\n  plugins: BasePluginPolicy[]\n): NonNullable<EditableProps[\"renderLeaf\"]> {\n  if (originalFn === undefined) {\n    throw new Error(`renderLeaf was not defined on SinkEditable`)\n  }\n\n  /**\n   * These get handled in reverse order. We wrap the last one around the\n   * actual `Text` and the earlier ones wrap around those. This\n   * feels more natural because the first plugin handles the outermost\n   * and we work our way inward.\n   */\n  const fns = plugins\n    .map((plugin) => plugin.editableProps?.renderLeaf)\n    .filter(defined)\n    .reverse()\n\n  return function (renderLeafProps) {\n    let value = originalFn({\n      ...renderLeafProps,\n      /**\n       * We override this because `attributes` should only appear on the\n       * uppermost leaf element if there are several nested ones and it's\n       * possible that this won't be the uppermost leaf.\n       *\n       * We add attributes back on at the very end so no need to worry if\n       * we omit it here.\n       */\n      attributes: {} as RenderLeafProps[\"attributes\"],\n    })\n    for (const fn of fns) {\n      const possibleValue = fn({\n        ...renderLeafProps,\n        children: value,\n      })\n      if (possibleValue) {\n        value = possibleValue\n      }\n    }\n    value = cloneElement(value, renderLeafProps.attributes) //{ key: 'your-unique-key-here' })\n    return value\n  }\n}\n","import { RenderPlaceholderProps } from \"slate-react\"\nimport { EditableProps } from \"slate-react/dist/components/editable\"\n\nimport { BasePluginPolicy } from \"../types\"\nimport { defined } from \"./utils\"\n\n/**\n * Create the substituted `renderElement` method.\n *\n * Generally, we are looking for the first result from any plugin or on\n * SinkEditable and return the first one that returns a value only.\n *\n * Iterate over all the plugin `renderElement`. If they return nothing\n * then we go to the next one until we hit a result. If we don't hit a\n * result, then we go to the `renderElement` passed to the `SinkEditable`\n * component.\n */\n\nexport function createRenderPlaceholder(\n  originalFn: EditableProps[\"renderPlaceholder\"],\n  plugins: BasePluginPolicy[]\n): NonNullable<EditableProps[\"renderPlaceholder\"]> | undefined {\n  if (originalFn) return originalFn\n  const fns = plugins\n    .map((plugin) => plugin.editableProps?.renderPlaceholder)\n    .filter(defined)\n  if (fns.length === 0) return undefined\n  return function (\n    renderPlaceholderProps: RenderPlaceholderProps\n  ): JSX.Element {\n    if (fns.length > 1) {\n      throw new Error(\n        `Only one plugin can define renderPlaceholder but there are ${fns.length}`\n      )\n    }\n    const fn = fns[0]\n    if (fn == null) throw new Error(`Expected fn to be defined`)\n    return fn(renderPlaceholderProps)\n  }\n}\n","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import * as React from 'react';\nimport { useContext, forwardRef } from 'react';\nimport createCache from '@emotion/cache';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport weakMemoize from '@emotion/weak-memoize';\nimport hoistNonReactStatics from '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport { getRegisteredStyles, registerStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\nimport { useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\n\nvar isDevelopment = false;\n\nvar EmotionCacheContext = /* #__PURE__ */React.createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? /* #__PURE__ */createCache({\n  key: 'css'\n}) : null);\n\nvar CacheProvider = EmotionCacheContext.Provider;\nvar __unsafe_useEmotionCache = function useEmotionCache() {\n  return useContext(EmotionCacheContext);\n};\n\nvar withEmotionCache = function withEmotionCache(func) {\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    // the cache will never be null in the browser\n    var cache = useContext(EmotionCacheContext);\n    return func(props, cache, ref);\n  });\n};\n\nvar ThemeContext = /* #__PURE__ */React.createContext({});\n\nvar useTheme = function useTheme() {\n  return React.useContext(ThemeContext);\n};\n\nvar getTheme = function getTheme(outerTheme, theme) {\n  if (typeof theme === 'function') {\n    var mergedTheme = theme(outerTheme);\n\n    return mergedTheme;\n  }\n\n  return _extends({}, outerTheme, theme);\n};\n\nvar createCacheWithTheme = /* #__PURE__ */weakMemoize(function (outerTheme) {\n  return weakMemoize(function (theme) {\n    return getTheme(outerTheme, theme);\n  });\n});\nvar ThemeProvider = function ThemeProvider(props) {\n  var theme = React.useContext(ThemeContext);\n\n  if (props.theme !== theme) {\n    theme = createCacheWithTheme(theme)(props.theme);\n  }\n\n  return /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n    value: theme\n  }, props.children);\n};\nfunction withTheme(Component) {\n  var componentName = Component.displayName || Component.name || 'Component';\n  var WithTheme = /*#__PURE__*/React.forwardRef(function render(props, ref) {\n    var theme = React.useContext(ThemeContext);\n    return /*#__PURE__*/React.createElement(Component, _extends({\n      theme: theme,\n      ref: ref\n    }, props));\n  });\n  WithTheme.displayName = \"WithTheme(\" + componentName + \")\";\n  return hoistNonReactStatics(WithTheme, Component);\n}\n\nvar hasOwn = {}.hasOwnProperty;\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n\n  var newProps = {};\n\n  for (var _key in props) {\n    if (hasOwn.call(props, _key)) {\n      newProps[_key] = props[_key];\n    }\n  }\n\n  newProps[typePropName] = type; // Runtime labeling is an opt-in feature because:\n\n  return newProps;\n};\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serialized = _ref.serialized,\n      isStringTag = _ref.isStringTag;\n  registerStyles(cache, serialized, isStringTag);\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n    return insertStyles(cache, serialized, isStringTag);\n  });\n\n  return null;\n};\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  var cssProp = props.css; // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var WrappedComponent = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles, undefined, React.useContext(ThemeContext));\n\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var _key2 in props) {\n    if (hasOwn.call(props, _key2) && _key2 !== 'css' && _key2 !== typePropName && (!isDevelopment )) {\n      newProps[_key2] = props[_key2];\n    }\n  }\n\n  newProps.className = className;\n\n  if (ref) {\n    newProps.ref = ref;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n    cache: cache,\n    serialized: serialized,\n    isStringTag: typeof WrappedComponent === 'string'\n  }), /*#__PURE__*/React.createElement(WrappedComponent, newProps));\n});\n\nvar Emotion$1 = Emotion;\n\nexport { CacheProvider as C, Emotion$1 as E, ThemeContext as T, __unsafe_useEmotionCache as _, ThemeProvider as a, withTheme as b, createEmotionProps as c, hasOwn as h, isDevelopment as i, useTheme as u, withEmotionCache as w };\n","var isDevelopment = false;\n\n/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  } // this function should always return with a value\n  // TS can't understand it though so we make it stop complaining here\n\n\n  return undefined;\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? !isDevelopment : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    this.tags.forEach(function (tag) {\n      var _tag$parentNode;\n\n      return (_tag$parentNode = tag.parentNode) == null ? void 0 : _tag$parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\nexport var LAYER = '@layer'\n","/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n","import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n","import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, charat, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset: if (ampersand == -1) characters = replace(characters, /\\f/g, '')\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d l m s\n\t\t\t\t\t\t\t\t\tcase 100: case 108: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n","import {IMPORT, LAYER, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase LAYER: if (element.children.length) break\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n","import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, RULESET, combine, match, serialize, copy, replace, WEBKIT, MOZ, MS, KEYFRAMES, DECLARATION, hash, charat, strlen, indexof, stringify, rulesheet, middleware, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value;\n  var parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' ');\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport { createCache as default };\n","var isBrowser = true;\n\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else if (className) {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  scale: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar isDevelopment = false;\n\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  var componentSelector = interpolation;\n\n  if (componentSelector.__emotion_styles !== undefined) {\n\n    return componentSelector;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        var keyframes = interpolation;\n\n        if (keyframes.anim === 1) {\n          cursor = {\n            name: keyframes.name,\n            styles: keyframes.styles,\n            next: cursor\n          };\n          return keyframes.name;\n        }\n\n        var serializedStyles = interpolation;\n\n        if (serializedStyles.styles !== undefined) {\n          var next = serializedStyles.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = serializedStyles.styles + \";\";\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        }\n\n        break;\n      }\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  var asString = interpolation;\n\n  if (registered == null) {\n    return asString;\n  }\n\n  var cached = registered[asString];\n  return cached !== undefined ? cached : asString;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var key in obj) {\n      var value = obj[key];\n\n      if (typeof value !== 'object') {\n        var asString = value;\n\n        if (registered != null && registered[asString] !== undefined) {\n          string += key + \"{\" + registered[asString] + \"}\";\n        } else if (isProcessableValue(asString)) {\n          string += processStyleName(key) + \":\" + processStyleValue(key, asString) + \";\";\n        }\n      } else {\n        if (key === 'NO_COMPONENT_SELECTOR' && isDevelopment) {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(key) + \":\" + processStyleValue(key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n\n                string += key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;{]+)\\s*(;|$)/g; // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\nvar cursor;\nfunction serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    var asTemplateStringsArr = strings;\n\n    styles += asTemplateStringsArr[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      var templateStringsArr = strings;\n\n      styles += templateStringsArr[i];\n    }\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n}\n\nexport { serializeStyles };\n","import * as React from 'react';\n\nvar syncFallback = function syncFallback(create) {\n  return create();\n};\n\nvar useInsertionEffect = React['useInsertion' + 'Effect'] ? React['useInsertion' + 'Effect'] : false;\nvar useInsertionEffectAlwaysWithSyncFallback = useInsertionEffect || syncFallback;\nvar useInsertionEffectWithLayoutFallback = useInsertionEffect || React.useLayoutEffect;\n\nexport { useInsertionEffectAlwaysWithSyncFallback, useInsertionEffectWithLayoutFallback };\n","import { h as hasOwn, E as Emotion, c as createEmotionProps, w as withEmotionCache, T as ThemeContext, i as isDevelopment } from './emotion-element-f0de968e.browser.esm.js';\nexport { C as CacheProvider, T as ThemeContext, a as ThemeProvider, _ as __unsafe_useEmotionCache, u as useTheme, w as withEmotionCache, b as withTheme } from './emotion-element-f0de968e.browser.esm.js';\nimport * as React from 'react';\nimport { insertStyles, registerStyles, getRegisteredStyles } from '@emotion/utils';\nimport { useInsertionEffectWithLayoutFallback, useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\nimport { serializeStyles } from '@emotion/serialize';\nimport '@emotion/cache';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/weak-memoize';\nimport '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport 'hoist-non-react-statics';\n\nvar jsx = function jsx(type, props) {\n  // eslint-disable-next-line prefer-rest-params\n  var args = arguments;\n\n  if (props == null || !hasOwn.call(props, 'css')) {\n    return React.createElement.apply(undefined, args);\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = Emotion;\n  createElementArgArray[1] = createEmotionProps(type, props);\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  }\n\n  return React.createElement.apply(null, createElementArgArray);\n};\n\n(function (_jsx) {\n  var JSX;\n\n  (function (_JSX) {})(JSX || (JSX = _jsx.JSX || (_jsx.JSX = {})));\n})(jsx || (jsx = {}));\n\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\n\nvar Global = /* #__PURE__ */withEmotionCache(function (props, cache) {\n\n  var styles = props.styles;\n  var serialized = serializeStyles([styles], undefined, React.useContext(ThemeContext));\n  // but it is based on a constant that will never change at runtime\n  // it's effectively like having two implementations and switching them out\n  // so it's not actually breaking anything\n\n\n  var sheetRef = React.useRef();\n  useInsertionEffectWithLayoutFallback(function () {\n    var key = cache.key + \"-global\"; // use case of https://github.com/emotion-js/emotion/issues/2675\n\n    var sheet = new cache.sheet.constructor({\n      key: key,\n      nonce: cache.sheet.nonce,\n      container: cache.sheet.container,\n      speedy: cache.sheet.isSpeedy\n    });\n    var rehydrating = false;\n    var node = document.querySelector(\"style[data-emotion=\\\"\" + key + \" \" + serialized.name + \"\\\"]\");\n\n    if (cache.sheet.tags.length) {\n      sheet.before = cache.sheet.tags[0];\n    }\n\n    if (node !== null) {\n      rehydrating = true; // clear the hash so this node won't be recognizable as rehydratable by other <Global/>s\n\n      node.setAttribute('data-emotion', key);\n      sheet.hydrate([node]);\n    }\n\n    sheetRef.current = [sheet, rehydrating];\n    return function () {\n      sheet.flush();\n    };\n  }, [cache]);\n  useInsertionEffectWithLayoutFallback(function () {\n    var sheetRefCurrent = sheetRef.current;\n    var sheet = sheetRefCurrent[0],\n        rehydrating = sheetRefCurrent[1];\n\n    if (rehydrating) {\n      sheetRefCurrent[1] = false;\n      return;\n    }\n\n    if (serialized.next !== undefined) {\n      // insert keyframes\n      insertStyles(cache, serialized.next, true);\n    }\n\n    if (sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = sheet.tags[sheet.tags.length - 1].nextElementSibling;\n      sheet.before = element;\n      sheet.flush();\n    }\n\n    cache.insert(\"\", serialized, sheet, false);\n  }, [cache, serialized.name]);\n  return null;\n});\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serializeStyles(args);\n}\n\nfunction keyframes() {\n  var insertable = css.apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name;\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n}\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serializedArr = _ref.serializedArr;\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n\n    for (var i = 0; i < serializedArr.length; i++) {\n      insertStyles(cache, serializedArr[i], false);\n    }\n  });\n\n  return null;\n};\n\nvar ClassNames = /* #__PURE__ */withEmotionCache(function (props, cache) {\n  var hasRendered = false;\n  var serializedArr = [];\n\n  var css = function css() {\n    if (hasRendered && isDevelopment) {\n      throw new Error('css can only be used during render');\n    }\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    serializedArr.push(serialized); // registration has to happen here as the result of this might get consumed by `cx`\n\n    registerStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var cx = function cx() {\n    if (hasRendered && isDevelopment) {\n      throw new Error('cx can only be used during render');\n    }\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  var content = {\n    css: css,\n    cx: cx,\n    theme: React.useContext(ThemeContext)\n  };\n  var ele = props.children(content);\n  hasRendered = true;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n    cache: cache,\n    serializedArr: serializedArr\n  }), ele);\n});\n\nexport { ClassNames, Global, jsx as createElement, css, jsx, keyframes };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { withEmotionCache, ThemeContext } from '@emotion/react';\nimport { serializeStyles } from '@emotion/serialize';\nimport { useInsertionEffectAlwaysWithSyncFallback } from '@emotion/use-insertion-effect-with-fallbacks';\nimport { getRegisteredStyles, registerStyles, insertStyles } from '@emotion/utils';\nimport * as React from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\n\nvar isDevelopment = false;\n\nvar testOmitPropsOnStringTag = isPropValid;\n\nvar testOmitPropsOnComponent = function testOmitPropsOnComponent(key) {\n  return key !== 'theme';\n};\n\nvar getDefaultShouldForwardProp = function getDefaultShouldForwardProp(tag) {\n  return typeof tag === 'string' && // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96 ? testOmitPropsOnStringTag : testOmitPropsOnComponent;\n};\nvar composeShouldForwardProps = function composeShouldForwardProps(tag, options, isReal) {\n  var shouldForwardProp;\n\n  if (options) {\n    var optionsShouldForwardProp = options.shouldForwardProp;\n    shouldForwardProp = tag.__emotion_forwardProp && optionsShouldForwardProp ? function (propName) {\n      return tag.__emotion_forwardProp(propName) && optionsShouldForwardProp(propName);\n    } : optionsShouldForwardProp;\n  }\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp;\n  }\n\n  return shouldForwardProp;\n};\n\nvar Insertion = function Insertion(_ref) {\n  var cache = _ref.cache,\n      serialized = _ref.serialized,\n      isStringTag = _ref.isStringTag;\n  registerStyles(cache, serialized, isStringTag);\n  useInsertionEffectAlwaysWithSyncFallback(function () {\n    return insertStyles(cache, serialized, isStringTag);\n  });\n\n  return null;\n};\n\nvar createStyled = function createStyled(tag, options) {\n\n  var isReal = tag.__emotion_real === tag;\n  var baseTag = isReal && tag.__emotion_base || tag;\n  var identifierName;\n  var targetClassName;\n\n  if (options !== undefined) {\n    identifierName = options.label;\n    targetClassName = options.target;\n  }\n\n  var shouldForwardProp = composeShouldForwardProps(tag, options, isReal);\n  var defaultShouldForwardProp = shouldForwardProp || getDefaultShouldForwardProp(baseTag);\n  var shouldUseAs = !defaultShouldForwardProp('as');\n  return function () {\n    // eslint-disable-next-line prefer-rest-params\n    var args = arguments;\n    var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n    if (identifierName !== undefined) {\n      styles.push(\"label:\" + identifierName + \";\");\n    }\n\n    if (args[0] == null || args[0].raw === undefined) {\n      // eslint-disable-next-line prefer-spread\n      styles.push.apply(styles, args);\n    } else {\n      var templateStringsArr = args[0];\n\n      styles.push(templateStringsArr[0]);\n      var len = args.length;\n      var i = 1;\n\n      for (; i < len; i++) {\n\n        styles.push(args[i], templateStringsArr[i]);\n      }\n    }\n\n    var Styled = withEmotionCache(function (props, cache, ref) {\n      var FinalTag = shouldUseAs && props.as || baseTag;\n      var className = '';\n      var classInterpolations = [];\n      var mergedProps = props;\n\n      if (props.theme == null) {\n        mergedProps = {};\n\n        for (var key in props) {\n          mergedProps[key] = props[key];\n        }\n\n        mergedProps.theme = React.useContext(ThemeContext);\n      }\n\n      if (typeof props.className === 'string') {\n        className = getRegisteredStyles(cache.registered, classInterpolations, props.className);\n      } else if (props.className != null) {\n        className = props.className + \" \";\n      }\n\n      var serialized = serializeStyles(styles.concat(classInterpolations), cache.registered, mergedProps);\n      className += cache.key + \"-\" + serialized.name;\n\n      if (targetClassName !== undefined) {\n        className += \" \" + targetClassName;\n      }\n\n      var finalShouldForwardProp = shouldUseAs && shouldForwardProp === undefined ? getDefaultShouldForwardProp(FinalTag) : defaultShouldForwardProp;\n      var newProps = {};\n\n      for (var _key in props) {\n        if (shouldUseAs && _key === 'as') continue;\n\n        if (finalShouldForwardProp(_key)) {\n          newProps[_key] = props[_key];\n        }\n      }\n\n      newProps.className = className;\n\n      if (ref) {\n        newProps.ref = ref;\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Insertion, {\n        cache: cache,\n        serialized: serialized,\n        isStringTag: typeof FinalTag === 'string'\n      }), /*#__PURE__*/React.createElement(FinalTag, newProps));\n    });\n    Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n    Styled.defaultProps = tag.defaultProps;\n    Styled.__emotion_real = Styled;\n    Styled.__emotion_base = baseTag;\n    Styled.__emotion_styles = styles;\n    Styled.__emotion_forwardProp = shouldForwardProp;\n    Object.defineProperty(Styled, 'toString', {\n      value: function value() {\n        if (targetClassName === undefined && isDevelopment) {\n          return 'NO_COMPONENT_SELECTOR';\n        }\n\n        return \".\" + targetClassName;\n      }\n    });\n\n    Styled.withComponent = function (nextTag, nextOptions) {\n      var newStyled = createStyled(nextTag, _extends({}, options, nextOptions, {\n        shouldForwardProp: composeShouldForwardProps(Styled, nextOptions, true)\n      }));\n      return newStyled.apply(void 0, styles);\n    };\n\n    return Styled;\n  };\n};\n\nexport { createStyled as default };\n","import memoize from '@emotion/memoize';\n\n// eslint-disable-next-line no-undef\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar isPropValid = /* #__PURE__ */memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport { isPropValid as default };\n","import createStyled from '../base/dist/emotion-styled-base.browser.esm.js';\nimport '@babel/runtime/helpers/extends';\nimport '@emotion/react';\nimport '@emotion/serialize';\nimport '@emotion/use-insertion-effect-with-fallbacks';\nimport '@emotion/utils';\nimport 'react';\nimport '@emotion/is-prop-valid';\n\nvar tags = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', // SVG\n'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\n// bind it to avoid mutating the original function\nvar newStyled = createStyled.bind(null);\ntags.forEach(function (tagName) {\n  newStyled[tagName] = newStyled(tagName);\n});\n\nexport { newStyled as default };\n","import styled from \"@emotion/styled\"\n\nexport const SinkReset = styled(\"div\")`\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-size: 16px;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n  box-sizing: border-box;\n`\n","import { Element, Node } from \"slate\"\n\nimport { BasePluginPolicy, FullSinkEditor } from \"../types\"\n\n/**\n * Creates an overrideable editor action that takes a `Node` and returns a\n * `boolean` and creates a new version of the action that incorporates the\n * plugins.\n *\n * If the plugin returns a boolean, it takes the result and returns it.\n *\n * If the plugin returns undefined, it tries the next one.\n *\n * If no plugin handles the result, it returns the result of the original action.\n */\nexport function createBooleanAction<\n  K extends \"isVoid\" | \"isInline\" | \"isMaster\" | \"isSlave\" | \"isStandalone\"\n>(\n  editor: FullSinkEditor,\n  actionKey: K,\n  plugins: BasePluginPolicy[]\n): (node: Element) => boolean {\n  const originalAction = editor[actionKey]\n  const actionPlugins = plugins.filter((plugin) => plugin.editor?.[actionKey])\n  return function nextBooleanAction(node: Node): boolean {\n    for (const plugin of actionPlugins) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      const result = plugin.editor?.[actionKey]?.(node)\n      if (typeof result === \"boolean\") return result\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return originalAction(node)\n  }\n}\n","import { BaseEditor } from \"slate\"\n\nimport { BasePluginPolicy } from \"../types\"\n\n/**\n * Creates an overrideable editor action like `insertBreak` or `deleteBackward`\n * that usually returns `void` and creates a new version of the action that\n * adds the action from the plugin.\n *\n * If the plugin returns `true` it takes the result and returns it.\n *\n * If the plugin returns `false`, it tries the next one.\n *\n * If no plugin handles the result, it executed the original action.\n */\nexport function createVoidAction<\n  K extends\n    | \"normalizeNode\"\n    | \"deleteBackward\"\n    | \"deleteForward\"\n    | \"deleteFragment\"\n    | \"insertBreak\"\n    | \"insertFragment\"\n    | \"insertNode\"\n    | \"insertText\"\n>(editor: BaseEditor, actionKey: K, plugins: BasePluginPolicy[]) {\n  const originalAction = editor[actionKey]\n  const actionPlugins = plugins.filter((plugin) => plugin.editor?.[actionKey])\n  return function nextVoidAction(...args: Parameters<BaseEditor[K]>[]): void {\n    let isHandled = false\n    const afterHandledCallbacks: (() => void)[] = []\n    for (const plugin of actionPlugins) {\n      // @ts-ignore\n      const response = plugin.editor?.[actionKey]?.(...args)\n      if (typeof response === \"function\") {\n        afterHandledCallbacks.push(response)\n      } else if (response === true) {\n        isHandled = true\n        break\n      }\n    }\n    if (!isHandled) {\n      // @ts-ignore\n      originalAction(...args)\n    }\n    afterHandledCallbacks.forEach((callback) => callback())\n  }\n}\n","import { BaseEditor } from \"slate\"\n\nimport { BasePluginFn, ExtractedPluginSchema, FullSinkEditor } from \"../types\"\nimport { createBooleanAction } from \"./create-boolean-action\"\nimport { createVoidAction } from \"./create-void-action\"\n\nexport function createWithSink<T extends ExtractedPluginSchema>(\n  pluginFns: BasePluginFn[]\n) {\n  /**\n   * The `editor` in the props can be a `BaseEditor` but we transform it\n   * into a `SinkEditor` before returning it.\n   */\n  return <E extends BaseEditor>(\n    originalEditor: E,\n    options: T[\"Options\"]\n  ): E & FullSinkEditor => {\n    const editor = originalEditor as E & FullSinkEditor\n\n    /**\n     * Executes the plugin on the `editor` with every one of the\n     * `pluginFunctions` to get the `pluginObject`\n     */\n    const plugins = pluginFns.map((plugin) =>\n      plugin(editor, options, { createPolicy: (x) => x })\n    )\n    editor.sink = { plugins }\n\n    /**\n     * Create the default for SinkEditor methods if they don't already exist.\n     */\n    editor.isMaster = \"isMaster\" in editor ? editor.isMaster : () => false\n    editor.isSlave = \"isSlave\" in editor ? editor.isSlave : () => false\n    editor.isStandalone =\n      \"isStandalone\" in editor ? editor.isStandalone : () => false\n\n    Object.assign(editor, {\n      /**\n       * void\n       */\n      normalizeNode: createVoidAction(editor, \"normalizeNode\", plugins),\n      deleteBackward: createVoidAction(editor, \"deleteBackward\", plugins),\n      deleteForward: createVoidAction(editor, \"deleteForward\", plugins),\n      deleteFragment: createVoidAction(editor, \"deleteFragment\", plugins),\n      insertBreak: createVoidAction(editor, \"insertBreak\", plugins),\n      insertFragment: createVoidAction(editor, \"insertFragment\", plugins),\n      insertNode: createVoidAction(editor, \"insertNode\", plugins),\n      insertText: createVoidAction(editor, \"insertText\", plugins),\n      /**\n       * boolean\n       */\n      isInline: createBooleanAction(editor, \"isInline\", plugins),\n      isVoid: createBooleanAction(editor, \"isVoid\", plugins),\n      isMaster: createBooleanAction(editor, \"isMaster\", plugins),\n      isSlave: createBooleanAction(editor, \"isSlave\", plugins),\n      isStandalone: createBooleanAction(editor, \"isStandalone\", plugins),\n    })\n\n    return editor\n  }\n}\n","import { SinkEditable } from \"../editable\"\nimport { createWithSink } from \"../editor\"\nimport { BasePlugin, ExtractedPluginSchema } from \"../types\"\n\n/**\n * A sink is just a function\n */\nexport const createSink = <T extends ExtractedPluginSchema>(\n  pluginFunctions: BasePlugin[]\n) => {\n  const fns = pluginFunctions.map((plugin) => plugin.fn)\n  const withSink = createWithSink<T>(fns)\n\n  const returnValue = { withSink, SinkEditable }\n  return returnValue\n}\n","import { Editor, Element, Location } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\n/**\n * Defines a value you'd find in a function's parameters as a replacement for\n * `at`. The benefit of using `BetterAt` is that it allows you to search\n * using an `Element`.\n */\nexport type BetterAt = Location | Element | null\n\n/**\n * Takes a `BetterAt` type which can include an `Element` and returns a\n * Location.\n */\nexport function betterAt(editor: Editor, at: Location | Element): Location {\n  if (!Element.isElement(at)) return at\n  return ReactEditor.findPath(editor, at)\n}\n","/**\n * Takes a function and returns a new function with the first X arguments of\n * that function pre-filled with the provided values.\n *\n * NOTE:\n *\n * This is not a full implementation of a curry but gives us what we want in a\n * lightweight manner, with low complexity and good typing. Namely, we need to\n * specify how many arguments to curry.\n *\n * This can probably be done in a way where the argument number doesn't have to\n * be specified ahead of time; however, these are the reasons I've kept it this\n * way for now.\n *\n * - It's easier to understand. We don't need to create a recursive TypeScript\n *   type.\n * - We only ever need currying a little anyways\n * - It's probably a little more performant this way\n *\n * WARNING FOR GENERICS:\n *\n * If the function you are currying has a generic, you will need to write a\n * generic manually for it then apply it manually using `as`. For example:\n *\n * const curriedToggleElements = curry(toggleElements, editor) as\n *   CurriedToggleElements\n */\n\n/**\n * Curry one argument from the left\n */\nexport function curryOne<CurriedArg, RestArgs extends unknown[], R>(\n  fn: (curriedArg: CurriedArg, ...restArgs: RestArgs) => R,\n  curriedArg: CurriedArg\n): (...args: RestArgs) => R {\n  return fn.bind(null, curriedArg)\n}\n\n/**\n * Curry two arguments from the left\n */\nexport function curryTwo<Arg1, Arg2, RestArgs extends unknown[], R>(\n  fn: (arg1: Arg1, arg2: Arg2, ...restArgs: RestArgs) => R,\n  arg1: Arg1,\n  arg2: Arg2\n): (...args: RestArgs) => R {\n  return fn.bind(null, arg1, arg2)\n}\n","const IS_MAC_REGEX = /mac os x/i\n\nlet isMacValue: boolean | undefined = undefined\n\n/**\n * `isMac` is a function and not a const because `window.navigator` only exists\n * on the browser and will throw an Error on the server.\n */\nexport function isMac() {\n  /**\n   * Memoized for performance\n   */\n  if (isMacValue !== undefined) return isMacValue\n  const { userAgent } = window.navigator\n  isMacValue = IS_MAC_REGEX.test(userAgent)\n  return isMacValue\n}\n","/**\n * Tiny helper to call `e.preventDefault()` and `e.stopPropagation()` as the\n * same time.\n */\nexport function stopEvent(e: Event | React.SyntheticEvent) {\n  e.preventDefault()\n  e.stopPropagation()\n}\n","import { Element, Node } from \"slate\"\n\nexport type NodeMatcher = string | string[] | ((node: Node) => boolean)\n\n/**\n * Takes a string or a function that matches a Node and in both cases,\n * returns a function that matches a Node.\n *\n * The `matchNode` argument can either be a function that takes a `Node` and\n * returns a boolean or it can be a string representing the `type` property of\n * an `Element`\n */\n\nexport function standardizeNodeMatcher(\n  matchNode: NodeMatcher\n): (node: Node) => boolean {\n  if (typeof matchNode === \"function\") return matchNode\n  if (typeof matchNode === \"string\")\n    return (node: Node) => Element.isElement(node) && node.type === matchNode\n  if (Array.isArray(matchNode))\n    return (node: Node) =>\n      Element.isElement(node) && matchNode.includes(node.type)\n  throw new Error(\n    `Expected matchNode to be a function, string or array but is ${matchNode}`\n  )\n}\n","import { Ancestor, Editor, Element, NodeEntry, Path } from \"slate\"\n\nimport { BetterAt, betterAt } from \"../core-utils/better-at\"\nimport {\n  NodeMatcher,\n  standardizeNodeMatcher,\n} from \"../standardize-utils/standardize-node-matcher\"\n\n/**\n * Checks to see if the current selection is inside of a Node that matches\n * `matchNode`.\n */\nexport function findElementUp<T extends Ancestor & Element = Element>(\n  editor: Editor,\n  matchNode: NodeMatcher,\n  { at = editor.selection }: { at?: BetterAt } = {}\n): NodeEntry<T> | undefined {\n  // if no selection, there will be no match\n  if (at === null) return\n  const nextAt = betterAt(editor, at)\n  const match = standardizeNodeMatcher(matchNode)\n  /**\n   * Normally, we are looking up from a range or a point, but if the `at`\n   * `Location` is a `Path`, then we need to check for an exact match at the\n   * `at` `Location` in addition to looking `Editor.above` the current\n   * `at` `Location`\n   */\n  if (Path.isPath(nextAt)) {\n    const nodeEntryExactlyAt = Editor.node(editor, nextAt)\n    if (nodeEntryExactlyAt && match(nodeEntryExactlyAt[0])) {\n      return nodeEntryExactlyAt as NodeEntry<T>\n    }\n  }\n  // look for a matching element\n  return Editor.above(editor, { at: nextAt, match })\n}\n\nexport function findElementUpPath(...args: Parameters<typeof findElementUp>) {\n  const entry = findElementUp(...args)\n  return entry?.[1]\n}\n","import { SVGProps } from \"react\"\n\n/**\n * A shortcut type to SVGProps<SVGSVGElement> but also more explicit in its\n * intent and allows for changing the props in the future without another\n * refactor.\n */\nexport type TablerIconProps = SVGProps<SVGSVGElement>\n\n/**\n * Efficient way to create a Tabler Icon.\n *\n * https://tabler-icons.io/\n *\n * - Grab the SVG from the Tabler Icon.\n * - Run it through https://react-svgr.com/playground/?icon=true&typescript=true\n * - Grab everything EXCEPT the first `path` which is unnecessary\n * - Place it as the children of this `<Icon>`\n */\nexport const TablerIcon = ({\n  strokeWidth = 1.5,\n  ...props\n}: TablerIconProps) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"1em\"\n    height=\"1em\"\n    strokeWidth={strokeWidth}\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  />\n)\n","import { Range } from \"slate\"\n\nexport function isCollapsed(\n  selection: Range | null | undefined\n): selection is Range {\n  if (selection == null) return false\n  return Range.isCollapsed(selection)\n}\n","import { Element, Node } from \"slate\"\n\nexport function isElementType<T extends Element>(\n  node: Node,\n  type: T[\"type\"] | Array<T[\"type\"]>\n): node is T {\n  if (Array.isArray(type)) {\n    return Element.isElement(node) && type.includes(node.type)\n  }\n  if (typeof type === \"string\") {\n    return Element.isElement(node) && node.type === type\n  }\n  throw new Error(\n    `Expected elementType to be string or array of string but is ${type}`\n  )\n}\n\nexport function createIsElementType<T extends Element>(\n  type: T[\"type\"] | Array<T[\"type\"]>\n): (node: Node) => node is T {\n  if (Array.isArray(type)) {\n    return (node: Node): node is T =>\n      Element.isElement(node) && type.includes(node.type)\n  } else {\n    return (node: Node): node is T =>\n      Element.isElement(node) && type == node.type\n  }\n}\n","import { Editor } from \"slate\"\n\nimport { findElementUp } from \"../find-utils/find-element-up\"\nimport { NodeMatcher } from \"../standardize-utils/standardize-node-matcher\"\nimport { isCollapsed } from \"./is-collapsed\"\n\n/**\n * Checks to see if the current selection is at the end of line for a node\n * that matches the `matchNode` argument.\n *\n * The `matchNode` argument can either be a function that takes a `Node` and\n * returns a boolean or it can be a string representing the `type` property of\n * an `Element`\n */\n\nexport function isEndOfElement(\n  editor: Editor,\n  matchNode: NodeMatcher\n): boolean {\n  const { selection } = editor\n  if (!isCollapsed(selection)) return false\n  const entry = findElementUp(editor, matchNode, { at: selection })\n  return !!entry && Editor.isEnd(editor, selection.anchor, entry[1])\n}\n","import { Editor } from \"slate\"\n\nimport { findElementUp } from \"../find-utils/find-element-up\"\nimport { NodeMatcher } from \"../standardize-utils/standardize-node-matcher\"\nimport { isCollapsed } from \"./is-collapsed\"\n\n/**\n * Checks to see if the current selection is at the end of line for a node\n * that matches the `matchNode` argument.\n *\n * The `matchNode` argument can either be a function that takes a `Node` and\n * returns a boolean or it can be a string representing the `type` property of\n * an `Element`\n */\n\nexport function isStartOfElement(\n  editor: Editor,\n  matchNode: NodeMatcher\n): boolean {\n  const { selection } = editor\n  if (!isCollapsed(selection)) return false\n  const entry = findElementUp(editor, matchNode, { at: selection })\n  return !!entry && Editor.isStart(editor, selection.anchor, entry[1])\n}\n","import { isHotkey } from \"is-hotkey\"\nimport { Editor, Element as SlateElement, Range, Transforms } from \"slate\"\n\nimport { findElementUp, stopEvent } from \"~/src/sink\"\n\nexport const isSpace = isHotkey(\" \")\nexport const isShiftSpace = isHotkey(\"SHIFT+SPACE\")\n\nexport function createAutocompleteSpaceHandler(\n  editor: Editor,\n  methods: Record<string, undefined | (() => void)>\n) {\n  return (e: React.SyntheticEvent<Element, KeyboardEvent>): boolean => {\n    /**\n     * We support `shift+space` as well because when we are typing something\n     * like `## ` sometimes the finger hasn't left the shift key yet. In normal\n     * usage, we still get a space and so the feature feels intermittently\n     * broken if we don't support `shift+space`.\n     */\n    if (!isSpace(e.nativeEvent) && !isShiftSpace(e.nativeEvent)) return false\n\n    /**\n     * Make sure theere is a selection and it's collapsed\n     */\n    const { selection } = editor\n    if (selection === null) return false\n    if (Range.isExpanded(selection)) return false\n\n    /**\n     * Find a convertible block and if we can't find one, exit.\n     */\n    const convertibleBlockEntry = findElementUp(\n      editor,\n      (node) =>\n        /**\n         * NOTE: We alias to SlateElement because this page needs acces to both\n         * the global Eleent and the Slate Element.\n         */\n        SlateElement.isElement(node) &&\n        editor.convertElement.isConvertibleElement(node)\n    )\n    if (!convertibleBlockEntry) return false\n\n    /**\n     * Find a matching method. Note that the keys in `methods` are the `string`\n     * prefixes we are looking for like `##` for heading level 2.\n     *\n     * If no match, exit.\n     */\n    const range = {\n      anchor: Editor.start(editor, convertibleBlockEntry[1]),\n      focus: selection.focus,\n    }\n    const text = Editor.string(editor, range)\n    const method = methods[text]\n    if (!method) return false\n\n    /**\n     * We have a match. Stop other event handlers.\n     */\n    stopEvent(e)\n\n    /**\n     * Delete the autocomplete text that came before the space bar was pressed.\n     */\n    const deleteRange = {\n      anchor: Editor.start(editor, convertibleBlockEntry[1]),\n      focus: selection.focus,\n    }\n    Transforms.delete(editor, { at: deleteRange })\n\n    /**\n     * Execute the matching method.\n     */\n    method()\n    return true\n  }\n}\n","import { isHotkey } from \"is-hotkey\"\n\nimport { isMac } from \"../core-utils/is-mac\"\n\nexport function isBetterHotkey(hotkey: string) {\n  const modifiedHotkey = hotkey.replace(\n    /\\bsuper\\b/g,\n    isMac() ? \"cmd+alt\" : \"ctrl+shift\"\n  )\n  return isHotkey(modifiedHotkey)\n}\n","import { isBetterHotkey } from \"./is-better-hotkey\"\n\n/**\n * The function that is executed when the hotkey is pressed.\n *\n * If it returns `void` (undefined) we assume the Action was executed.\n * If we return a `boolean`, the Action is considered executed if it returns\n * `true` or not handled if it returns `false`.\n */\ntype Action = () => boolean | void\n\ntype IsKeyboardShortcut = (event: KeyboardEvent) => boolean\n\ntype ShortcutTuple = [IsKeyboardShortcut, Action]\n\n/**\n * Creates a `keyDown` handler from an object where the keys are the shortcut\n * and the values are the `Action` function to execute. If the\n * function returns `true`, the event is considered handled and the event\n * is stopped.\n *\n * In some situations, we don't want the event to be stopped.\n *\n * For example, hitting `up` or `down` in a table, starts a `setTimeout` but\n * we want the original keyboard event to be handled by the browser.\n */\n\nexport function createHotkeyHandler(shortcutsObject: Record<string, Action>) {\n  /**\n   * Don't populate the shortcuts at this point because it will run on the\n   * server. We can't run it on the server because we need to determine if we\n   * are on Mac or Windows and checking `window.navigate.userAgent` will cause\n   * a failure.\n   */\n  let shortcuts: ShortcutTuple[] | null = null\n\n  return function handleShortcuts(\n    event: React.SyntheticEvent<Element, KeyboardEvent>\n  ) {\n    /**\n     * We initialize shortcuts once on first usage.\n     */\n    if (shortcuts == null) {\n      shortcuts = Object.entries(shortcutsObject).map(([shortcut, fn]) => [\n        isBetterHotkey(shortcut),\n        fn,\n      ])\n    }\n    for (const [isShortcut, action] of shortcuts) {\n      if (isShortcut(event.nativeEvent)) {\n        /**\n         * If the keyboardAction returns true then the event has been handled.\n         * We can stop the event at this point and exit the loop.\n         */\n        const response = action()\n        if (response === true || response === undefined) {\n          event.preventDefault()\n          event.stopPropagation()\n          return true\n        }\n      }\n    }\n    return false\n  }\n}\n","import { Editor, Path, Transforms } from \"slate\"\n\n/**\n * Takes a given and makes that specific path dirty with respect to\n * normalization and executes a normalization path (unless in a\n * `withoutNormalizing` block in which case it will wait until it is completed).\n *\n * A few things you should know:\n *\n * - It doesn't dirty the ancestors. So if you are targeting an Element to be\n *   dirtied, make sure you aren't dirtying the Text node as that won't cause\n *   the parent Element to be dirtied.\n *\n * - It works by setting a key that doesn't make sense to a value and then\n *   unsetting it. This adds some unnecessary noise to the list of operations.\n *\n * The ideal method to implement this would be to modify the DIRTY_PATHS and\n * DIRTY_PATH_KEYS directly; however, these are presently not being exported.\n * This should probably be fixed in the future by an exported function called\n * something like `addDirtyPaths`.\n */\nexport function forceNormalizePath(editor: Editor, path: Path) {\n  Editor.withoutNormalizing(editor, () => {\n    Transforms.setNodes(\n      editor,\n      // @ts-ignore\n      { __DOESNT_MATTER_JUST_TO_START_NORMALIZING__: \"123\" },\n      { at: path }\n    )\n    Transforms.setNodes(\n      editor,\n      // @ts-ignore\n      { __DOESNT_MATTER_JUST_TO_START_NORMALIZING__: null },\n      { at: path }\n    )\n  })\n}\n","import { Descendant, Editor, NodeEntry } from \"slate\"\n\n/**\n * This normalization utility is useful when you need to adjust an Element\n * depending on the Element before or after it.\n *\n * For example, if two of the same nodes are next to each other, they can be\n * merged together.\n *\n * Or in the case of a numbered list, we want to reset the counter only if\n * the list is deeper than the previous one.\n *\n * The thing that makes these method efficient is that it can often replace\n * having to search through all children of the parent of the current element.\n * Normally, to compare siblings, you'd have to look at the parent in order\n * to make sure you normalize siblings propertly; however, this method will\n * look both at the pair before/current and current/after to make sure that\n * neighbor siblings do the right thing.\n *\n * When used through a full normalization, it can solve bigger problems. For\n * example, if you have 5 elements that are all the same and they need to\n * all be merged, one by one, they will merged into a single Element.\n *\n * HINT:\n *\n * If there is a bug related to not being able to find a Path, remember to\n * return `true` in the `transform` function when a `transform` is executed.\n *\n * After a `transform` is run, the state of the document is changed and\n * running the second `transform` may result in accessing an invalid path.\n */\nexport function normalizeSiblings<T extends Descendant>(\n  editor: Editor,\n  entry: NodeEntry<T>,\n  transform: (a: NodeEntry<T>, b: NodeEntry<T>) => boolean\n): boolean {\n  const [, path] = entry\n\n  const prevEntry = Editor.previous<T>(editor, { at: path })\n  if (prevEntry && transform(prevEntry, entry)) return true\n\n  const nextEntry = Editor.next<T>(editor, { at: path })\n  if (nextEntry && transform(entry, nextEntry)) return true\n\n  return false\n}\n","import { Editor, Path, Transforms } from \"slate\"\n\n/**\n * Puts the selection at the start of a Node at the given path.\n */\nexport function selectStartOfElement(editor: Editor, path: Path) {\n  Transforms.select(editor, Editor.start(editor, path))\n}\n\n/**\n * Puts the selection at the start of a Node at the given path.\n */\nexport function selectEndOfElement(editor: Editor, path: Path) {\n  Transforms.select(editor, Editor.end(editor, path))\n}\n","import { Element } from \"slate\"\n\n/**\n * The TargetElement can be specified either as the actual value or as a\n * function that takes a srcElement and returns the targetElement.\n */\nexport type TargetElement<T extends Element = Element> =\n  | Omit<T, \"children\">\n  | ((srcElement: Element) => Omit<T, \"children\">)\n\n/**\n * TODO:\n *\n * This should probably just be moved into the `rewrapElement` function page\n * since it is not used outside of it. Originally, this may have served a\n * dual purpose but currently it seems like it only exists for the use of\n * `rewrapElement`.\n */\n\n/**\n * This function takes a `srcElement` and the idea is that we convert it into\n * some other type of element, which is the `targetElement`.\n *\n * The `TargetElement` can be specified either as:\n *\n * - an actual `Element` but without the `children`. This is because we are\n *   converting the `srcElement` to the `targetElement` and the `targetElement`\n *   will take on the `children` of the `srcElement`\n *\n * - A function that takes the `srcElement` and returns the `targetElement`\n *   without the `children`. This form of `TargetElement` can be useful in\n *   cases where we want to retain some of the properties of the `srcElement`.\n *   An example of this is a list item where we convert from a bullet to a\n *   numbered item. We would like to keep the `depth` information if it exists\n *   in this scenario.\n */\nexport function createTargetElement<T extends Element>(\n  srcElement: Element,\n  targetElement: TargetElement<T>\n) {\n  if (typeof targetElement !== \"function\") return targetElement\n  return targetElement(srcElement)\n}\n","import { Editor, Element, Location, Path, Transforms } from \"slate\"\n\nimport { findElementUp } from \"~/src/sink\"\n\n/**\n * Inserts an Element into the document such that if it is in a `isMaster`\n * element (i.e. an Element that has a number of dependants like a table or\n * code block) then then inserted Element will appear after the `isMaster`\n * element.\n *\n * This prevents invalid states from happening like inserting a table inside\n * a table, or a code block in a table, or a table in a code block.\n */\nexport function insertRootElement(\n  editor: Editor,\n  element: Element,\n  { at = editor.selection }: { at?: Location | null } = {}\n): boolean {\n  /**\n   * If there's no `at` then insertion does not happen\n   */\n  if (at == null) return false\n  /**\n   * Look for a parent that `isMaster`\n   */\n  const entry = findElementUp(\n    editor,\n    (node) => Element.isElement(node) && editor.isMaster(node)\n  )\n  if (entry == null) {\n    /**\n     * If not `isMaster` then do a regular insert, select the original\n     * insertion point and move forward to select the first position inside\n     * the newly inserted element.\n     */\n    const selection = editor.selection\n    Editor.withoutNormalizing(editor, () => {\n      Transforms.insertNodes(editor, element, { at })\n      if (selection) {\n        Transforms.select(editor, selection)\n        Transforms.move(editor)\n      }\n    })\n  } else {\n    /**\n     * If it `isMaster` then find the next adjacent path to the master, insert\n     * there, and then select at the start of the insertion point.\n     */\n    const nextPath = Path.next(entry[1])\n    Editor.withoutNormalizing(editor, () => {\n      Transforms.insertNodes(editor, element, { at: nextPath })\n      Transforms.select(editor, Editor.start(editor, nextPath))\n    })\n  }\n  return true\n}\n","import { Editor, Element, NodeEntry, Path, Transforms } from \"slate\"\n\nimport {\n  createTargetElement,\n  TargetElement,\n} from \"../standardize-utils/target-element\"\n\n/**\n * Takes an existing Element at path `at` and swaps out that Element with a\n * new Element. It does this by unwrapping the Element and rewrapping it with\n * the new Element.\n *\n * This is useful because if we do it this way, we can preserve the selection.\n */\nexport function rewrapElement<T extends Element = Element>(\n  editor: Editor,\n  targetElement: TargetElement<T>,\n  at: Path\n) {\n  Editor.withoutNormalizing(editor, () => {\n    const originalEntry = Editor.node(editor, at) as NodeEntry<Element>\n    const nextElement = createTargetElement(originalEntry[0], targetElement)\n    /**\n     * Technicall, it's Omit<Element, 'children'> but `wrapNodes` actually\n     * accepts that just fine so we override the type.\n     */\n    Transforms.wrapNodes(editor, nextElement as T, { at })\n    Transforms.unwrapNodes(editor, { at: [...at, 0] })\n  })\n}\n","import { Editor, EditorNodesOptions, Node, Transforms } from \"slate\"\n\n/**\n * An improved version of `setNodes` that takes a `convert` option.\n *\n * In existing `setNodes` we can specify how we want to setNodes statically.\n * That is, before we execute `setNodes` we need to know which properties\n * we want to set.\n *\n * This version of `setNodes` allows us to dynamically setNodes by allowing\n * us to specify a function argument. The function takes the original value of\n * an Element and returns the match.\n */\nexport function setNodesDynamic<T extends Node>(\n  editor: Editor,\n  convert: (node: T) => Partial<T>,\n  options: EditorNodesOptions<T>\n) {\n  const entries = Array.from(Editor.nodes<T>(editor, options))\n  if (entries.length === 0) return false\n  for (const entry of entries) {\n    const [node] = entry\n    Transforms.setNodes(editor, convert(node), { at: entry[1] })\n  }\n  return true\n}\n","import { Editor } from \"slate\"\n\nexport function onPaste(\n  editor: Editor,\n  e: React.ClipboardEvent<HTMLDivElement>\n) {\n  const clipboardData = e.clipboardData\n  const { types } = clipboardData\n\n  // Remove debug console log\n  // console.log(clipboardData.getData(\"text/html\"))\n\n  /**\n   * We don't want to handle it if it's not just plain text. If it is\n   * plain text, it will have only one type and it will be \"text/plain\".\n   * HTML, for example, also has \"text/plain\" but also \"text/html\"\n   */\n  if (types.length > 1) return false\n  if (types[0] !== \"text/plain\") return false\n\n  /**\n   * Check to make sure the text is a URL\n   */\n  const text = clipboardData.getData(\"text/plain\")\n  if (!isUrl(text)) return false\n\n  /**\n   * If it is a URL, then insert the link\n   */\n  e.preventDefault()\n  e.stopPropagation()\n  editor.anchor.insertLink(text)\n  return true\n}\nfunction isUrl(s: string): boolean {\n  let url\n  try {\n    url = new URL(s)\n  } catch (_) {\n    return false\n  }\n  return (\n    url.protocol === \"http:\" ||\n    url.protocol === \"https:\" ||\n    url.protocol === \"mailto:\"\n  )\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt, findElementUp } from \"../../sink\"\nimport { AnchorElement } from \"..\"\n\nexport function editLink(\n  editor: Editor,\n  { href, title }: { href: string; title?: string },\n  { at }: { at?: BetterAt }\n) {\n  const link = findElementUp(editor, \"anchor\", { at })\n  if (!link) return false\n  Transforms.setNodes<AnchorElement>(editor, { href, title }, { at: link[1] })\n  return true\n}\n","import { Editor, Range, Text, Transforms } from \"slate\"\n\nexport function insertLink(\n  editor: Editor,\n  href: string,\n  text: string = href,\n  { select = true }: { select?: boolean } = {}\n) {\n  /**\n   * If there is no selection, we default by inserting at the start of document.\n   */\n  const selection = editor.selection || {\n    anchor: Editor.start(editor, [0]),\n    focus: Editor.start(editor, [0]),\n  }\n  if (Range.isCollapsed(selection)) {\n    /**\n     * Insert the node and select it if select is true\n     */\n    Transforms.insertNodes(\n      editor,\n      {\n        type: \"anchor\",\n        href,\n        children: [{ text }],\n      },\n      { select, at: selection }\n    )\n    /**\n     * If select is true then select the inserted link\n     */\n    if (select && editor.selection) {\n      const entry = Editor.node(editor, editor.selection)\n      Transforms.select(editor, entry[1])\n    }\n  } else {\n    /**\n     * If there is a selection, we wrap the selection with our anchor.\n     */\n    Transforms.wrapNodes(\n      editor,\n      { type: \"anchor\", href, children: [] },\n      {\n        split: true,\n        match: (node) => Text.isText(node) || Editor.isInline(editor, node),\n      }\n    )\n  }\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt, findElementUp } from \"../../sink\"\n\nexport function removeLink(editor: Editor, { at }: { at?: BetterAt }) {\n  const link = findElementUp(editor, \"anchor\", { at })\n  if (!link) return false\n  Transforms.unwrapNodes(editor, { at: link[1] })\n  return true\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { editLink } from \"./editLink\"\nimport { insertLink } from \"./insertLink\"\nimport { removeLink } from \"./removeLink\"\n\nexport function createAnchorMethods(editor: Editor) {\n  return {\n    insertLink: curryOne(insertLink, editor),\n    removeLink: curryOne(removeLink, editor),\n    editLink: curryOne(editLink, editor),\n  }\n}\n","import { Editor, Element, Node, NodeEntry, Transforms } from \"slate\"\n\n/**\n * If there is an anchor node inside an anchor node, unwrap the inner anchor\n * node as that is not allowed.\n *\n * Another approach would be to lift the nodes but I think unwrapping the\n * inner one makes more sense. Consider these two scenarios (keeping in mind\n * that they will likely be rare):\n *\n * - User selects text that includes a link. Then user links it. The user would\n *   have a strong expectation that the link just applied would override the\n *   link on the inside.\n *\n * - The opposite: User select text inside an existing link then tries to link\n *   it. That's unusual and while the user may expect that inner selection to\n *   get linked, I think this is a rare enough case whereas the prior one seems\n *   like a slightly more natural one.\n *\n * We could, of course, solve both of these by adding more code paths at the\n * time the link is inserted. That won't change this normalization code and\n * not sure if it is worth the extra complexity.\n */\nexport function normalizeNode(editor: Editor, entry: NodeEntry<Node>): boolean {\n  if (!Element.isElement(entry[0])) return false\n  if (entry[0].type !== \"anchor\") return false\n  const children = entry[0].children\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i]\n    if (!Element.isElement(child) || child.type !== \"anchor\") continue\n    Transforms.unwrapNodes(editor, { at: [...entry[1], i] })\n    return true\n  }\n  return false\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { clsx } from \"clsx\"\nimport React from \"react\"\nimport { useEffect, useRef } from \"react\"\nimport { useSelected, useSlate } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { useLayer } from \"../../use-layer\"\nimport { AnchorElement } from \"../index\"\nimport { $Anchor, $Edge } from \"../styles\"\nimport { AnchorDialog } from \"./AnchorDialog\"\n\nexport function Anchor({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<AnchorElement>) {\n  const startEdgeRef = useRef<HTMLSpanElement>(null)\n  const anchorRef = useRef<HTMLAnchorElement>(null)\n  const selected = useSelected()\n  const editor = useSlate()\n  const dialog = useLayer(\"dialog\")\n\n  /**\n   * TODO:\n   *\n   * Finish implementing the anchor dialog.\n   *\n   * Stopped partway through because the entire document is being re-rendered\n   * on every keypress.\n   */\n\n  useEffect(() => {\n    const anchor = anchorRef.current\n    const startEdge = startEdgeRef.current\n    if (!anchor || !startEdge) return\n    /**\n     * NOTE: Do not use `focused && selected` here because when we click or\n     * focus on the pop up dialogs themselves, this will cause the dialogs to\n     * close.\n     *\n     * TODO: Figure out how to make the dialogs not close when clicking on them.\n     *\n     * It has to support these use cases:\n     *\n     * - Closes when user clicks somewhere in the document outside the link\n     * - Stays open when user clicks on the dialog\n     * - Stays open when user is in an input in the dialog\n     * - Closes when the editor loses focus but stays open when the editor loses\n     *   focus to the anchor dialog or the anchor edit dialog\n     */\n    // Only show dialog when the link is precisely selected (not part of a larger selection)\n    const hasSelection = editor.selection &&\n      editor.selection.anchor.offset !== editor.selection.focus.offset;\n\n    if (selected && !hasSelection) {\n      /**\n       * The setTimeout delay is necessary when first clicking into the browser\n       * and when switching from one link to another. Without it, the dialog\n       * will not open.\n       */\n      setTimeout(() => {\n        dialog.open(() => (\n          <AnchorDialog\n            destAnchor={anchor}\n            destStartEdge={startEdge}\n            element={element}\n          />\n        ))\n      })\n    } else {\n      dialog.close()\n    }\n  }, [selected, element])\n\n  return (\n    <$Anchor\n      className={clsx({ \"--selected\": selected })}\n      href={element.href}\n      target={element.target}\n      {...attributes}\n      ref={anchorRef}\n    >\n      {/* Edge allow Chrome to differentiate in/out of the link */}\n      <$Edge ref={startEdgeRef} contentEditable={false} />\n      <span>{children}</span>\n      {/* Edge allow Chrome to differentiate in/out of the link */}\n      <$Edge contentEditable={false} />\n    </$Anchor>\n  )\n}\n","import { createContext, useState } from \"react\"\n\nimport { Portal } from \"./portal\"\nimport { Layer, LayersContextValue, LayersRecord } from \"./types\"\n\n/**\n * Wrap this around the Component in which you want to have the ability to\n * display one or more layers at once.\n */\nexport const LayersContext = createContext<LayersContextValue>(\n  /**\n   * This is set to an invalid value and then typecast as the correct type.\n   *\n   * This is okay though because in `LayersProvider` we set the value to the\n   * proper type before they are used for the first time.\n   */\n  {} as LayersContextValue\n)\n\nexport const LayerContext = createContext<Layer>({} as Layer)\n\n/**\n * The `Layers` Component should be wrapped around the Component or Components\n * which you want to have layer support.\n *\n * The `useLayer` hook must be called inside a `Layers` Component.\n *\n * It provides these necessary functions:\n *\n * - Makes available the resources necessary to open and close layers.\n *\n * - Renders the currently open layers to the DOM at the top level of the\n *   DOM. We do this to simplify positioning as we can position everything\n *   relative to the full window which is what is returned by\n *   `getBoundingClientRect`\n *\n * NOTE:\n *\n * As a design decision, we wrap many components with the Layer instead of\n * having a Layer per component. This design decision is important because\n * we may want to open multiple layers of the same type and if we open another\n * layer of the same type, we want any other layers to close.\n *\n * For example, consider a Dialog. If we open a differnet Dialog, we want the\n * first one to close. This can only be done when a single component knows\n * about the existence of both.\n */\nexport function Layers({ children }: { children: React.ReactNode }) {\n  const [layers, setLayers] = useState<LayersRecord>({})\n\n  /**\n   * Open a layer of the given type\n   */\n  function openLayer(layer: Layer) {\n    setLayers((layers) => {\n      return {\n        ...layers,\n        [layer.type]: layer,\n      }\n    })\n  }\n\n  /**\n   * Close a layer of the given type\n   */\n  function closeLayer(layerType: string) {\n    setLayers((layers) => {\n      const nextLayers = { ...layers }\n      delete nextLayers[layerType]\n      return nextLayers\n    })\n  }\n\n  /**\n   * - provide the layers context\n   * - render the layers at the top of the DOM using a Portal\n   */\n  return (\n    <LayersContext.Provider\n      value={{ layers, setLayers, openLayer, closeLayer }}\n    >\n      {children}\n      {Object.entries(layers).map(([, layer]) => {\n        return (\n          <Portal key={layer.type}>\n            <LayerContext.Provider value={layer}>\n              <layer.Component />\n            </LayerContext.Provider>\n          </Portal>\n        )\n      })}\n    </LayersContext.Provider>\n  )\n}\n","import { createPortal } from \"react-dom\"\n\n/**\n * Portal to `document.body`\n *\n * NOTE:\n * Consider creating a version of Portal with a Reset in it.\n *\n * The reason is that when showing a portal, it will carry the baggage of\n * any styling from `<html>` and `<body>` element.\n */\nexport function Portal({ children }: { children: React.ReactNode }) {\n  return createPortal(children, document.body)\n}\n","import { FunctionComponent, useContext } from \"react\"\n\nimport { LayersContext } from \"./layers\"\nimport { Layer } from \"./types\"\n\n/**\n * `useLayer` may only be called when it is inside a Component that is itself\n * nested under the `Layers` component. This is necessary because `useLayer`\n * uses a React Context which is set up in the `Layers` component.\n *\n * Using the `useLayer` hook returns a layer object that has an `open` and\n * `close` method. You can use it something like this:\n *\n * ```typescript\n * function MyComponent() {\n *\n *   const tooltip = useLayer('tooltip')\n *\n *   const openTootlip = () => {\n *     tooltip.open(() => <Tooltip title=\"Hey Dudes\" />)\n *   }\n *\n *   return <div\n *     onMouseEnter={openTooltip}\n *     onMouseLeave={tooltip.close}\n *   >Thing that needs a tooltip</div>\n * }\n * ```\n *\n * In this scenario, it opens a `Tooltip` component when the mouse enters the\n * div and closes it when the mouse leave it.\n *\n * This library is simple but flexible enough to be used to handle different\n * kinds of components that pop up in the DOM.\n *\n * - tooltips\n * - dialog boxes positioned where a button is clicked\n * - dialog boxes positioned in the center of a viewport\n * - notifications\n *\n * `useLayer` is designed to handle just the opening and closing of the layers\n * that overlays on top of all the other components at the top of the DOM.\n *\n * It also ensures only one of each kind of layer is open at a time. So when\n * a second tooltip is opened, the first is closed.\n *\n * The positioning of the tooltips, dialogs and notifications, especially when\n * the position is relative to another element like a button that was clicked\n * it the domain of the `useReposition` micro library.\n *\n * These libraries are not tied together in any way (there is nothing\n * opinionated that ties them toegher); however they were designed and built\n * at the same time and work together well to solve all the issues related to\n * popup windows/dialogs/tooltips of any kind.\n */\nexport function useLayer(type: string) {\n  const { openLayer, closeLayer, layers } = useContext(LayersContext)\n\n  /**\n   * Call this method to open a layer that contains the Component at the given\n   * layer type.\n   *\n   * Opening a layer of this type will close any other layers of this type.\n   * For example, if a `tooltip` layer was currently open, opening a new\n   * tooltip would close the previously open one.\n   *\n   * When opening a layer, we pass in a function (that takes no arguments) and\n   * returns our rendered Component something like:\n   *\n   * ```ts\n   * const dialog = useLayer('dialog')\n   *\n   * const openDialog = () => {\n   *   dialog.open(() => <MyDialog title=\"My Title\" />)\n   * }\n   * ```\n   *\n   * If you are getting TypeScript issues, especially when passing props as\n   * properties of some other object, the easiest way to fix these issues are\n   * to assign those values to a `const` first. This can happen when the\n   * values on the object could potentially be `undefined` or change during\n   * a re-render.\n   *\n   * For example, this could give typing issues:\n   *\n   * ```ts\n   * type Item = {\n   *   title?: string\n   * }\n   *\n   * const dialog = useLayer('dialog')\n   *\n   * const openDialog = () => {\n   *   if (item.title === undefined) return\n   *   dialog.open(() => <MyDialog title={item.title} />)\n   * }\n   * ```\n   *\n   * It's a little non-obvious because it looks like we did a check to make\n   * sure that `item.title` is defined. But remember that it could change\n   * during a re-render.\n   *\n   * Here's how to fix this.\n   *\n   * ```ts\n   * type Item = {\n   *   title?: string\n   * }\n   *\n   * const dialog = useLayer('dialog')\n   *\n   * const openDialog = () => {\n   *   if (item.title === undefined) return\n   *   const title = item.title\n   *   dialog.open(() => <MyDialog title={title} />)\n   * }\n   * ```\n   *\n   * Now `title` is of type `string` because we already asserted that\n   * `item.title` was a string. We assigned it to a `const` meaning that it\n   * won't change, even if re-rendered later.\n   */\n  function open(Component: FunctionComponent<Record<string, never>>) {\n    const layer: Layer = { type, Component }\n    openLayer(layer)\n  }\n\n  /**\n   * Call this method to close the current layer of the given layer type.\n   */\n  function close() {\n    closeLayer(type)\n  }\n\n  return {\n    open,\n    close,\n    layer: layers[type],\n    type,\n  }\n}\n","import styled from \"@emotion/styled\"\n\nexport const $Anchor = styled(\"a\")`\n  /**\n   * Link colors\n   */\n  color: var(--link-color, blue);\n  &:hover {\n    color: var(--link-hover-color, blue);\n  }\n  /**\n   * When the cursor is in the anchor and not outside the anchor, we style the\n   * anchor with a very light shade. This is enough to subtly intuit to the user\n   * that when they type, it will appear inside the link. When the shade is\n   * not present, they intuit they are just outside the link.\n   */\n  border-radius: 0.125em;\n  transition: background-color 250ms;\n  &.--selected {\n    background: var(--blue-50);\n  }\n`\n/**\n * This edge piece that are at the edge of the inside of the anchor are visibly\n * designed to be 1px wide. A <span> can't be given a width so we fake this by\n * creating an empty span with 1px of width.\n */\nexport const $Edge = styled(\"span\")`\n  display: inline;\n  padding: 0 1px 0 0;\n`\n\n/**\n * Shows progress bar of an uploading attachment. This part is the outline.\n */\nexport const $ProgressBar = styled(\"span\")`\n  position: fixed;\n  width: 100px;\n  background: var(--shade-50);\n  height: 8px;\n  border-radius: 7px;\n  border: 1px solid var(--shade-400);\n  overflow: hidden;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n`\n\n/**\n * Show the fill part of the progress bar.\n */\nexport const $ProgressBarFill = styled(\"span\")`\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 14px;\n  background: var(--blue-400);\n  transition: width 100ms linear;\n`\n","import styled from \"@emotion/styled\"\nimport { useCallback } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\nimport { Editor } from \"slate\"\n\nimport { $Panel } from \"../../shared-overlays\"\nimport { useLayer } from \"../../use-layer\"\nimport { useAbsoluteReposition } from \"../../use-reposition\"\nimport { useTooltip } from \"../../use-tooltip\"\nimport { AnchorElement } from \"../index\"\nimport { AnchorEditDialog } from \"./AnchorEditDialog\"\nimport { ExternalLinkIcon, LinkOffIcon, PencilIcon } from \"./icons\"\n\nconst $AnchorDialog = styled($Panel)`\n  position: absolute;\n  display: flex;\n  width: 20em;\n  z-index: 10;\n  padding: 1em;\n  color: var(--shade-400);\n\n  .--icons {\n    display: flex;\n    overflow: hidden;\n    flex: 0 0 6em;\n  }\n\n  .--link {\n    text-decoration: none;\n    display: flex;\n    flex: 0 0 14em;\n    overflow: hidden;\n    color: var(--shade-400);\n    &:hover {\n      color: var(--blue-600);\n    }\n    transition: all 200ms;\n  }\n\n  .--url {\n    margin-left: 0.5em;\n    .--hostname {\n      font-size: 0.875em;\n      width: 14em;\n      line-height: 1.5em;\n      color: var(--blue-600);\n      overflow-wrap: break-word;\n      /* width: 13.5em;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; */\n    }\n    .--pathname {\n      margin-top: 0.125em;\n      font-size: 0.75em;\n      width: 16.25em;\n      line-height: 1.5em;\n      overflow-wrap: break-word;\n    }\n    .--tooltip {\n      box-sizing: border-box;\n      position: relative;\n      margin-top: 1em;\n      font-size: 0.875em;\n      width: 14em;\n      line-height: 1.5em;\n      background: var(--shade-200);\n      border-radius: 0.5em;\n      padding: 0.5em 0.75em;\n      color: var(--shade-600);\n      overflow-wrap: break-word;\n    }\n    .--tooltip::before {\n      content: \"\";\n      position: absolute;\n      top: -0.5em; /* Height of the triangle */\n      left: 0.5em; /* Position it on the left side */\n      border-left: 0.5em solid transparent; /* Half the width of the triangle */\n      border-right: 0.5em solid transparent; /* Half the width of the triangle */\n      border-bottom: 0.5em solid var(--shade-200); /* Height and color of the triangle */\n    }\n  }\n\n  .--icon {\n    cursor: pointer;\n    margin-left: 0.5em;\n    &:hover {\n      color: var(--blue-600);\n    }\n  }\n\n  svg {\n    flex: 0 0 auto;\n    width: 1.25em;\n    height: 1.25em;\n    stroke-width: 1.5;\n  }\n`\n\nfunction parseUrl(s: string): { hostname: string; pathname: string } {\n  try {\n    const url = new URL(s)\n    return { hostname: url.hostname, pathname: url.pathname }\n  } catch (e) {\n    return { hostname: \"\", pathname: \"\" }\n  }\n}\n\nexport function AnchorDialog({\n  destAnchor,\n  destStartEdge,\n  element,\n}: {\n  destAnchor: HTMLAnchorElement\n  destStartEdge: HTMLSpanElement\n  element: AnchorElement\n}) {\n  const dialog = useLayer(\"dialog\")\n  const editor = useSlateStatic()\n  const url = parseUrl(element.href)\n  const style = useAbsoluteReposition(\n    { destAnchor, destStartEdge },\n    ({ destAnchor, destStartEdge }) => {\n      return {\n        left: destStartEdge.left,\n        top: destAnchor.top + destAnchor.height,\n      }\n    }\n  )\n\n  const removeTooltip = useTooltip({ title: \"\" })\n  const editTooltip = useTooltip({ title: \"\" })\n\n  const removeLink = useCallback(() => {\n    editor.anchor.removeLink({ at: element })\n    // Close the dialog after removing the link\n    dialog.close()\n  }, [editor, dialog])\n\n  const openEditDialog = useCallback(() => {\n    /**\n     * Force close the tooltip otherwise it will stay open because the\n     * `onMouseLeave` never gets called. Technically, the mouse never leaves\n     * the icon through a mouse movement. The edit icon simply disappears.\n     */\n    editTooltip.onMouseLeave()\n    dialog.open(() => {\n      return (\n        <AnchorEditDialog\n          destAnchor={destAnchor}\n          destStartEdge={destStartEdge}\n          element={element}\n        />\n      )\n    })\n  }, [destAnchor, destStartEdge, element])\n\n  return (\n    <$AnchorDialog contentEditable={false} style={style}>\n      <a\n        className=\"--link\"\n        href={element.href}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        <ExternalLinkIcon />\n        <div className=\"--url\">\n          <div className=\"--hostname\">{url.hostname}</div>\n          {url.pathname === \"\" || url.pathname === \"/\" ? null : (\n            <div className=\"--pathname\">{url.pathname}</div>\n          )}\n          {element.title == null || element.title === \"\" ? null : (\n            <div className=\"--tooltip\">{element.title}</div>\n          )}\n        </div>\n      </a>\n      <span className=\"--icons\">\n        <span\n          className=\"--icon\"\n          onClick={removeLink}\n          onMouseEnter={removeTooltip.onMouseEnter}\n          onMouseLeave={removeTooltip.onMouseLeave}\n        >\n          <LinkOffIcon />\n        </span>\n        <span\n          className=\"--icon\"\n          onMouseEnter={editTooltip.onMouseEnter}\n          onMouseLeave={editTooltip.onMouseLeave}\n          onClick={openEditDialog}\n        >\n          <PencilIcon />\n        </span>\n      </span>\n    </$AnchorDialog>\n  )\n}\n","import React, { useRef } from \"react\"\n\nimport { $CloseMask } from \"../../styles/$CloseMask\"\n\n/**\n * Add this `CloseMask` before the Component you want this `CloseMask` to be\n * the background for.\n *\n * When users click on the `CloseMask`, it will close the layer.\n */\nexport function CloseMask({ close }: { close: () => void }) {\n  const ref = useRef<HTMLDivElement>(null)\n  return <$CloseMask ref={ref} onClick={close} />\n}\n","import styled from \"@emotion/styled\"\n\nexport const $CloseMask = styled(\"div\")`\n  position: fixed;\n  user-select: none;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow-y: auto;\n  background: rgba(0, 0, 0, 0.01);\n`\n","import { isMac } from \"~/src/sink\"\n\n/**\n * Character Reference\n *\n * Ctrl+P Ctrl+Shift+P Ctrl+Alt+P\n * P P P\n */\n\nexport const key = {\n  cmd: \"\\u2318\",\n  ctrl: \"\\u2303\",\n  shift: \"\",\n  opt: \"\",\n  enter: \"\",\n}\n\nconst MAC_KEYS = {\n  shift: key.shift,\n  opt: key.opt,\n  alt: key.opt,\n  ctrl: key.ctrl,\n  mod: key.cmd,\n  cmd: key.cmd,\n  enter: key.enter,\n  super: `${key.opt}${key.cmd}`,\n}\n\nconst PC_KEYS = {\n  alt: \"ALT\",\n  ctrl: \"CTRL\",\n  opt: \"ALT\",\n  shift: \"SHIFT\",\n  mod: \"CTRL\",\n  cmd: \"CTRL\",\n  enter: key.enter,\n  super: \"CTRL+SHIFT\",\n}\n\nfunction pull<T>(arr: T[], value: T): void {\n  const index: number = arr.findIndex((el: T) => el === value)\n  if (index !== -1) {\n    arr.splice(index, 1)\n  }\n}\n\nfunction formatMac(segments: string[]) {\n  const result = []\n  Object.entries(MAC_KEYS).forEach(([key, symbol]) => {\n    if (segments.includes(key)) {\n      result.push(symbol)\n      pull(segments, key)\n    }\n  })\n  result.push(...segments.map((s) => s.toUpperCase()))\n  return result.join(\"\")\n}\n\nfunction formatPC(segments: string[]) {\n  const result = []\n  Object.entries(PC_KEYS).forEach(([key, symbol]) => {\n    if (segments.includes(key)) {\n      result.push(symbol)\n      pull(segments, key)\n    }\n  })\n  result.push(...segments.map((s) => s.toUpperCase()))\n  return result.join(\"+\")\n}\n\nexport function formatHotkey(shortcut: string) {\n  const segments = shortcut.toLowerCase().split(\"+\")\n  if (isMac()) {\n    return formatMac(segments)\n  } else {\n    return formatPC(segments)\n  }\n}\n","import { useRef } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { useAbsoluteReposition } from \"~/src/use-reposition\"\n\nimport { $Menu, $MenuDivider } from \"../../../toolbar-plugin/styles\"\nimport { MenuItemData } from \"../../types\"\nimport { CloseMask } from \"../CloseMask\"\nimport { MenuItem } from \"./MenuItem\"\n\nexport function Menu({\n  dest,\n  items,\n  close,\n}: {\n  dest: HTMLElement\n  close: () => void\n  items: MenuItemData[]\n}) {\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLDivElement>(null)\n  const style = useAbsoluteReposition({ src: ref, dest }, ({ dest }) => {\n    return { left: dest.left - 8, top: dest.top + dest.height }\n  })\n\n  return (\n    <>\n      <CloseMask close={close} />\n      <$Menu ref={ref} style={style}>\n        {items.map((item, index) => {\n          if (item === \"divider\") {\n            return <$MenuDivider key={index} />\n          } else if (item.show && !item.show(editor)) {\n            return null\n          } else {\n            return (\n              <MenuItem\n                key={index}\n                editor={editor}\n                item={item}\n                close={close}\n                dest={dest}\n              />\n            )\n          }\n        })}\n      </$Menu>\n    </>\n  )\n}\n","import { Rect } from \"../types\"\n\n/**\n * Returns a `Rect` representing the `fixed` positioning coordinates of\n * the `HTMLElement`\n */\nexport function getFixedRect(domElement: HTMLElement): Rect {\n  const bounds = domElement.getBoundingClientRect()\n  return {\n    top: bounds.top,\n    right: bounds.right,\n    bottom: bounds.bottom,\n    left: bounds.left,\n    width: bounds.width,\n    height: bounds.height,\n  }\n}\n","import { Rect } from \"../types\"\nimport { getFixedRect } from \"./get-fixed-rect\"\n\n/**\n * Returns a `Rect` representing the `absolute` positioning coordinates of\n * the `HTMLElement`\n *\n * NOTE: we add `window.scrollY` to get the `absolute` position.\n */\nexport function getAbsoluteRect(domElement: HTMLElement): Rect {\n  const rect = getFixedRect(domElement)\n  const { scrollY } = window\n  return Object.assign(rect, {\n    top: rect.top + scrollY,\n    bottom: rect.bottom + scrollY,\n  })\n}\n","import { Rect } from \"../types\"\n\n/**\n * Returns a `Rect` representing the `fixed` positioning coordinates of\n * the window viewport.\n */\nexport function getFixedViewport(): Rect {\n  /**\n   * Get the width of the viewport not including the scrollbar\n   *\n   * https://stackoverflow.com/a/25298418\n   */\n  const width =\n    document.documentElement.clientWidth || document.body.clientWidth\n  return {\n    top: 0,\n    right: width,\n    bottom: window.innerHeight,\n    left: 0,\n    width: width,\n    height: window.innerHeight,\n  }\n}\n","import { Rect } from \"../types\"\nimport { getFixedViewport } from \"./get-fixed-viewport\"\n\n/**\n * Returns a `Rect` representing the `absolute` positioning coordinates of\n * the window viewport.\n *\n * NOTE: we add `window.scrollY` to get the `absolute` position.\n */\nexport function getAbsoluteViewport(): Rect {\n  const rect = getFixedViewport()\n  return Object.assign(rect, {\n    top: window.scrollY,\n    bottom: window.scrollY + rect.height,\n  })\n}\n","var objectMapValues = map;\n\n/*\n  // returns a new object with the predicate applied to each value\n  // like just-map-object, but (value, key, object) are passed to the predicate\n  map({a: 3, b: 5, c: 9}, (value) => value + 1); // {a: 4, b: 6, c: 10}\n  map({a: 3, b: 5, c: 9}, (value, key) => value + key); // {a: 3a, b: 5b, c: 9c}\n  map({a: 3, b: 5, c: 9}, (value, key, object) => object.b); // {a: 5, b: 5, c: 5}\n*/\n\nfunction map(obj, predicate) {\n  var result = {};\n  var keys = Object.keys(obj);\n  var len = keys.length;\n  for (var i = 0; i < len; i++) {\n    var key = keys[i];\n    result[key] = predicate(obj[key], key, obj);\n  }\n  return result;\n}\n\nexport {objectMapValues as default};\n","import mapValues from \"just-map-values\"\nimport { RefObject } from \"react\"\n\nimport { MapHTMLElementLikeRecordToRectRecord, Rect } from \"./types\"\n\n/**\n * Tries to convert an `HTMLElement` to a `Rect` using the supplied\n * `convertElementToRect` method.\n *\n * The input Record can have as its values either an `HTMLElement` or a\n * `RefObject<HTMLElement>`. When it is a `RefObject` then it may or may not\n * refer to an `HTMLElement` so...\n *\n * - If the value is an `HTMLElement` we convert it to a `Rect`\n * - If the value is a `RefObject<HTMLElement>` we convert it to a\n *   `Rect | null` depending on whether the `RefObject` contains the\n *   `HTMLElement`.\n */\nexport function mapHTMLElementLikeRecordToRectRecord<\n  T extends Record<string, HTMLElement | RefObject<HTMLElement>>\n>(\n  elementLikeRecord: T,\n  converElementToRect: (element: HTMLElement) => Rect\n): MapHTMLElementLikeRecordToRectRecord<T> {\n  const rectRecord = mapValues(elementLikeRecord, (value) => {\n    const maybeHTMLElement =\n      value instanceof HTMLElement ? value : value.current\n    const nextValue = maybeHTMLElement\n      ? converElementToRect(maybeHTMLElement)\n      : null\n    return nextValue\n  }) as MapHTMLElementLikeRecordToRectRecord<T>\n  return rectRecord\n}\n","import { useEffect } from \"react\"\n\nimport {\n  useThrottledRefresh,\n  UseThrottledRefreshReturnType,\n} from \"./use-throttled-refresh\"\n\n/**\n * Refreshes the Component whenever the page is resized or the window is\n * scrolled. This is because these are usually the only two events that cause\n * the elements on a page to be repositioned.\n *\n * If there are yet other events that can cause the elements to be repositioned\n * or resized, you can also call the returned `refresh` method. This will\n * update the components while still respected the fact that the updates will\n * be throttled so as not to overload the browser.\n */\nexport function useReposition(): UseThrottledRefreshReturnType {\n  /**\n   * Create a throttled `refresh` method.\n   */\n  const refresh = useThrottledRefresh()\n\n  /**\n   * refresh on page resize or scroll (throttled)\n   */\n  useEffect(() => {\n    refresh()\n    window.addEventListener(\"resize\", refresh)\n    window.addEventListener(\"scroll\", refresh)\n    return () => {\n      window.removeEventListener(\"resize\", refresh)\n      window.removeEventListener(\"scroll\", refresh)\n    }\n  }, [])\n\n  return refresh\n}\n","/**\n * NOTE:\n *\n * We have a preference for `just` packages like `just-throttle` since they\n * tend to be micro, but `just-throttle` has a bug. It does not execute\n * on the trailing edge even when told to do so.\n *\n * We ran a test where we logged the call to `refresh` and when the refresh was\n * executed and there were leftover `refresh` calls without a trailing\n * execution.\n */\nimport throttle from \"lodash.throttle\"\nimport { useState } from \"react\"\n\nexport type UseThrottledRefreshReturnType = ReturnType<typeof throttle> & {\n  counter: number\n}\n\n/**\n * Creates a hook that rerenders a component when the returned `refresh`\n * method is called; however, it throttles the refresh based on the\n * `intervalInMs` argument passed in.\n *\n * This is a useful component used when throttling reposition updates.\n */\nexport function useThrottledRefresh(\n  intervalInMs = 100\n): UseThrottledRefreshReturnType {\n  const [counter, setState] = useState(0)\n\n  const refresh = throttle(\n    () => {\n      setState((counter) => counter + 1)\n    },\n    intervalInMs,\n    { trailing: true }\n  )\n\n  return Object.assign(refresh, { counter })\n}\n","import { RefObject } from \"react\"\n\nimport { getAbsoluteRect } from \"../get-methods/get-absolute-rect\"\nimport { getAbsoluteViewport } from \"../get-methods/get-absolute-viewport\"\nimport { MapHTMLElementLikeRecordToRectRecord, Rect } from \"../types\"\nimport { mapHTMLElementLikeRecordToRectRecord } from \"../utils\"\nimport { useReposition } from \"./use-reposition\"\n\n/**\n * For `absolute` positioning.\n *\n * For `fixed` positioning see `useFixedReposition`\n *\n * An all-in-one hook that helps you position elements relative to other\n * elements and to the viewport.\n *\n * It automatically refreshes when the user scrolls or the window is resized.\n *\n * The method takes as its first argument an object where the values can be\n * either an `HTMLElement` or a ref to an `HTMLElement` created using\n * `useRef(null)`.\n *\n * As the second argument, it takes a function that you use to process\n * everything and return a value you can use to position the element. It's\n * typical to return this in the form of a `style` Object but it doesn't have\n * to be.\n *\n * That function you pass in can take these arguments:\n *\n * - The first argument is in the same shape as the object of `HTMLElement` or\n *   `ref` to `HTMLElement`; however, instead, its values are `Rect` or\n *   if the original value was a `ref`, a `Rect | null`. The value can be\n *   `null` because a `ref` can potentially contain no value and hence we can't\n *   find a `Rect` for it.\n * - The second argument is a `Rect` representing the viewport of the `window`.\n * - The third argument is a `refresh` method you can call to force a\n *   refresh. The refresh is throttled in sync with the ot\n */\nexport function useAbsoluteReposition<\n  T extends Record<string, HTMLElement | RefObject<HTMLElement>>,\n  NV\n>(\n  elementLikeRecord: T,\n  fn: (\n    elementRecord: MapHTMLElementLikeRecordToRectRecord<T>,\n    viewport: Rect,\n    refresh: () => void\n  ) => NV\n) {\n  const refresh = useReposition()\n  const rectRecord = mapHTMLElementLikeRecordToRectRecord(\n    elementLikeRecord,\n    (element) => getAbsoluteRect(element)\n  )\n  return fn(rectRecord, getAbsoluteViewport(), refresh)\n}\n","import { Rect } from \"../types\"\n\n/**\n * Takes a source Rect of the Element you are trying to position and makes\n * sure it is inside the container Rect.\n *\n * The source Rect can be `null` (e.g. when the `ref` hasn't been set yet) and\n * while it is, the item is positioned far off to the left of the screen.\n *\n * Can specify an optional `margin` as well.\n */\nexport function positionInside(\n  src: Rect | null,\n  container: Rect,\n  pos: { left: number; top: number },\n  { margin = 0 }: { margin?: number } = {}\n) {\n  if (src == null) return { ...pos, left: -1024 }\n  const right = pos.left + src.width\n  if (right <= container.right - margin) return pos\n  return { ...pos, left: container.right - src.width - margin }\n}\n","import styled from \"@emotion/styled\"\n\nimport { SinkReset } from \"~/src/sink/editable\"\n\n/**\n * $Panel is a nice box that goes around a Drop Down menu or a Dialog Box.\n *\n * We don't use $Panel directly and instead we extend it.\n *\n * The $Panel itself extends the `SinkReset` and we do this because the\n * Component appears at the root. So any styling, for example like from\n * Bootstrap or Material UI will affect what's in the Panel.\n */\nexport const $Panel = styled(SinkReset)`\n  position: absolute;\n  z-index: 1000;\n  border: 1px solid var(--table-border-color);\n  border-radius: 0.5em;\n  overflow: clip;\n  filter: drop-shadow(0 4px 3px rgb(0 0 0 / 0.07))\n    drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));\n  background: white;\n  /**\n   * If you are tempted to add the transitions back in, here's why we left\n   * them off:\n   *\n   * - When we initially unhide the panel (by setting a negative 'left' pos)\n   *   the panel slides in very quickly. So we'd need to fix this first which\n   *   adds complexity.\n   *\n   * - Even if we fixed it, the browser window updates the scrolls and resizes\n   *   in a stepped manner (i.e. like frames in an animation). Keeping the\n   *   smooth animations makes the panel step in sync with the page refreshes\n   *   and so actually looks better.\n   *\n   * In other words, there's a technical issue we'd still need to solve but\n   * even if we did, it looks better this way.\n   */\n  /* transition: left 100ms, top 100ms; */\n`\n","import styled from \"@emotion/styled\"\n\nimport { $Panel } from \"../../shared-overlays/styles/$Panel\"\n\nexport const $AnchorDialog = styled($Panel)`\n  padding: 1em;\n  width: 24em;\n`\nexport const $AnchorDialogInputLine = styled(\"div\")`\n  display: flex;\n  gap: 0.5em;\n`\n\nexport const $AnchorDialogInput = styled(\"input\")`\n  flex: 1 1 auto;\n  padding: 0.5em 0.75em;\n  border-radius: 0.25em;\n  color: var(--shade-700);\n  border: 1px solid var(--shade-300);\n  font-size: 0.9375em;\n  &:focus {\n    outline: 2px solid var(--blue-200);\n  }\n`\n","import styled from \"@emotion/styled\"\n\nimport { SinkReset } from \"../sink/editable\"\n\n/**\n * NOTE:\n *\n * This $Container should be extended and the following should be\n * added to it:\n *\n * - padding: We add this separately because if there is a toolbar, there\n *   should be no padding on the container but there should be\n *   padding on the actual editable. If it is the basic layout, we can add\n *   the padding on the $Container but also use the $Container styling\n *   directly on the Editable Component.\n */\nexport const $Container = styled(SinkReset)`\n  border: 1px solid var(--shade-300); /* shade-300 */\n  border-radius: 0.5em;\n  color: rgb(39 39 42); /* shade-800 */\n  line-height: 1.5;\n  /**\n   * !important is required because of role=\"textbox\" I think\n   */\n  outline: 2px solid transparent !important;\n  transition: all 250ms;\n  &.--focused {\n    /**\n     * !important is required because of role=\"textbox\" I think\n     */\n    outline: 2px solid var(--select-editor-color) !important;\n  }\n`\n","import styled from \"@emotion/styled\"\n\nimport { $Container } from \"../../shared-layout\"\n\nexport const $Editable = styled(\"div\")`\n  padding: 2em;\n`\n\nexport const $OuterContainer = styled($Container)`\n  /**\n   * We use this to make sure the top of the container is rounded even though\n   * the toolbar inside is square. We keep the toolbar square so that as the\n   * toolbar hits the top when scrolling, it can become sticky. We can try to\n   * round the toolbar, but it causes an issue where the part under the\n   * rounded part is still visible (i.e. the edge of the container). We can\n   * then try to put an absolutely positioned background on it with an opaque\n   * color, but that doesn't work unless we know the color of the background\n   * so... ultimately, it's not a good solution.\n   *\n   * NOTE:\n   *\n   * Using \"overflow: hidden;\" will break the \"position: sticky;\" and it will\n   * not work. \"overflow: clip;\" does work though.\n   *\n   * https://stackoverflow.com/a/73051006\n   */\n  overflow-y: clip;\n  display: flex;\n  flex-direction: column;\n`\n","import styled from \"@emotion/styled\"\n\nimport { $Panel } from \"../../shared-overlays/styles/$Panel\"\n\n/**\n * Drop Down Menu\n */\nexport const $Menu = styled($Panel)`\n  position: absolute;\n  padding-top: 0.5em;\n  padding-bottom: 0.5em;\n  transition: all 200ms;\n  /**\n   * Prevent clicks from stealing focus from the editor\n   */\n  user-select: none;\n`\n\n/**\n * Individual items in Drop Down Menu\n */\nexport const $MenuItem = styled(\"div\")`\n  display: flex;\n  z-index: 10;\n  padding: 0 1em 0 1.5em;\n  height: 2em;\n  align-items: center;\n  /**\n   * Normally we don't do it this way but since each part of the MenuItem\n   * is tightly related to the display: flex, this seemed the easiest way\n   * to set this up.\n   */\n  .--icon {\n    flex: 0 0;\n    display: block;\n    font-size: 1.25em;\n    height: 1em;\n    padding-right: 0.75em;\n    color: var(--shade-400);\n    svg {\n      position: relative;\n      stroke-width: 1.5px;\n    }\n  }\n  .--title {\n    flex: 1 0;\n    font-size: 0.875em;\n    color: var(--shade-800);\n  }\n  .--hotkey {\n    flex: 0 0;\n    font-size: 0.75em;\n    padding-left: 1.5em;\n    color: var(--shade-500);\n  }\n  background: white;\n  cursor: pointer;\n  &:hover {\n    background: var(--blue-50);\n  }\n`\n\nexport const $MenuDivider = styled(\"div\")`\n  height: 1px;\n  background: var(--shade-200);\n  margin-top: 0.25em;\n  margin-bottom: 0.25em;\n`\n","import styled from \"@emotion/styled\"\n\nexport const $ToolbarContainer = styled(\"div\")`\n  /**\n   * This flex rule applies to the \"display: flex;\" of the parent container.\n   * Ensures the toolbar does not shrink or grow vertically.\n   */\n  flex: 0 0 auto;\n  /**\n   * If \"position: sticky;\" is not working, check the ancestor for \"overflow:\n   * hidden;\" of any kind. This will stop sticky from working. A good workaround\n   * is to use \"overflow: clip;\" instead.\n   *\n   * https://stackoverflow.com/a/73051006\n   */\n  position: sticky;\n  top: 0;\n  z-index: 2;\n  background: var(--shade-50);\n  /* font-size: 0.875em; */\n  font-size: 0.9375em;\n  padding: 0 0.5em;\n  border-bottom: 1px solid var(--shade-300);\n  /**\n   * Prevent clicks from stealing focus from the editor\n   */\n  user-select: none;\n  /**\n   * Extreme attention to detail. When the sticky is ending and the toolbar\n   * is stuck to the bottom of the editor, setting margin-bottom to -1px will\n   * fix the 2px bottom border and make it the proper 1px.\n   */\n  margin-bottom: -1px;\n\n  /**\n   * NOTE: The space in the equation is significant\n   */\n  height: calc(\n    3em + 1px\n  ); // $ToolbarDivider height + border-bottom of 1px above\n  overflow: hidden;\n`\n\nexport const $Toolbar = styled(\"div\")`\n  display: inline-block;\n  height: calc(\n    3em + 1px\n  ); // $ToolbarDivider height + border-bottom of 1px above\n`\n\nexport const $ToolbarDividerContainer = styled(\"div\")`\n  display: inline-block;\n  height: 3em;\n  padding: 0 0.375em;\n`\n\nexport const $ToolbarDivider = styled(\"div\")`\n  display: inline-block;\n  background: var(--shade-300);\n  opacity: 50%;\n  width: 1px;\n  height: 3em;\n`\n\nexport const $ToolbarButton = styled(\"div\")`\n  box-sizing: border-box;\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  font-size: 1.25em;\n  margin-top: 0.25em;\n  height: 2em;\n  padding: 0.375em 0.375em;\n  border-radius: 0.25em;\n  text-align: center;\n  color: var(--shade-500);\n  transition: all 100ms;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0);\n  &.--disabled {\n    opacity: 0.3;\n    cursor: default;\n    pointer-events: none;\n  }\n  &.--active {\n    color: var(--shade-700);\n    background: rgba(0, 0, 0, 0.05);\n    svg {\n      /* stroke-width: 2px; */\n    }\n  }\n  svg {\n    stroke-width: 1.5px;\n  }\n  @media (hover: hover) {\n    &:not(.--disabled):hover {\n      color: var(--shade-700);\n      background: var(--blue-100);\n      svg {\n        /* stroke-width: 2px; */\n      }\n    }\n  }\n\n  &.--more {\n    padding: 0.375em 0.5em;\n  }\n  .--more-icon {\n    position: absolute;\n    bottom: -0.2em;\n    left: 50%;\n    margin-left: -0.25em;\n    opacity: 0.375;\n  }\n`\n","import { useCallback } from \"react\"\nimport { Editor } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { $MenuItem } from \"../../../toolbar-plugin/styles\"\nimport { useLayer } from \"../../../use-layer\"\nimport { MenuItemData } from \"../../types\"\nimport { formatHotkey } from \"./formatHotkey\"\n\nexport function MenuItem({\n  editor,\n  item,\n  close,\n  dest,\n}: {\n  editor: Editor\n  item: Exclude<MenuItemData, \"divider\">\n  close: () => void\n  dest: HTMLElement\n}) {\n  const menuLayer = useLayer(\"menu\")\n\n  const onClick = useCallback(() => {\n    if (item.Component) {\n      const Component = item.Component\n      menuLayer.open(() => <Component dest={dest} close={menuLayer.close} />)\n    } else if (item.action) {\n      item.action(editor)\n      ReactEditor.focus(editor)\n      close()\n    }\n  }, [editor, item])\n  return (\n    <>\n      <$MenuItem onClick={onClick}>\n        <div className=\"--icon\">\n          <item.icon />\n        </div>\n        <div className=\"--title\">{item.title}</div>\n        <div className=\"--hotkey\">\n          {item.hotkey ? formatHotkey(item.hotkey) : undefined}\n        </div>\n      </$MenuItem>\n    </>\n  )\n}\n","import { MouseEvent, useCallback } from \"react\"\n\nimport { useLayer } from \"~/src/use-layer\"\n\nimport { Tooltip } from \"./tooltip\"\nimport { Triangle } from \"./triangle\"\n\n/**\n * Takes a title and a hotkey and renders it as a tooltip.\n *\n * You'll notice that hotkey can be a function and the reason is very specific\n * to our needs which is that we don't know what the hotkey should look like\n * until we are in the browser (i.e. not the server) because it checks the user\n * agent to see if we are on a Mac or on Windows.\n *\n * We can defer this request until the tooltip is displayed.\n *\n * The editor currently has no need to display this hotkey shortcuts except in\n * things like tooltips so this isn't a problem for us. Potentially, we may need\n * to figure out a way to render this on the server or figure out a way to\n * render on the server without the hotkey and then fill it in when we are in\n * the browser.\n *\n * If we ever fix this requirement that hotkeys can only be shown in the browser\n * (i.e. we get server side rendering of hotkeys working) then `useTooltip` can\n * be simplified to not take a function.\n */\nexport function useTooltip(\n  {\n    title,\n    hotkey,\n  }: {\n    title: string\n    hotkey?: string | (() => string | undefined)\n  },\n  deps: React.DependencyList = []\n) {\n  const label = useLayer(\"tooltip-label\")\n  const triangle = useLayer(\"tooltip-triangle\")\n\n  /**\n   * On hover over\n   */\n  const onMouseEnter = useCallback((e: MouseEvent<HTMLElement>) => {\n    const dest = e.currentTarget\n    /**\n     * Open tooltip\n     */\n    if (title !== undefined) {\n      label.open(() => (\n        <Tooltip\n          title={title}\n          hotkey={typeof hotkey === \"function\" ? hotkey() : hotkey}\n          dest={dest}\n        />\n      ))\n      triangle.open(() => <Triangle dest={dest} />)\n    }\n  }, deps)\n\n  /**\n   * On hover out\n   */\n  const onMouseLeave = useCallback(() => {\n    label.close()\n    triangle.close()\n  }, deps)\n  return { onMouseEnter, onMouseLeave }\n}\n","import styled from \"@emotion/styled\"\n\nexport function useRect(dest: HTMLElement): DOMRect {\n  return dest.getBoundingClientRect()\n}\n\nconst $Tooltip = styled(\"div\")`\n  position: fixed;\n  z-index: 10;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-size: 16px;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n    Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n  color: white;\n  font-size: 0.875em;\n  line-height: 1.5em;\n  padding: 0 0.5em;\n  color: var(--shade-300);\n  background: var(--shade-700);\n  border-radius: 0.25em;\n  white-space: nowrap;\n`\n\nconst $Hotkey = styled(\"span\")`\n  margin-left: 0.75em;\n  font-size: 0.875em;\n  font-weight: 500;\n  color: var(--shade-400);\n`\n\nexport function Tooltip({\n  title,\n  hotkey,\n  dest,\n}: {\n  title: string\n  hotkey?: string\n  dest: HTMLElement\n}) {\n  const rect = useRect(dest)\n  return (\n    <$Tooltip\n      style={{\n        left: rect.left,\n        top: `calc(${rect.top}px - 2em)`,\n      }}\n    >\n      {title}\n\n      {hotkey ? <$Hotkey>{hotkey}</$Hotkey> : null}\n    </$Tooltip>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nimport { useRect } from \"./tooltip\"\n\nconst $Triangle = styled(\"span\")`\n  position: fixed;\n  z-index: 10;\n  width: 0;\n  height: 0;\n  border-left: 0.375em solid transparent;\n  border-right: 0.375em solid transparent;\n  border-top: 0.375em solid var(--shade-700);\n`\n\nexport function Triangle({ dest }: { dest: HTMLElement }) {\n  const rect = useRect(dest)\n  return (\n    <$Triangle\n      style={{\n        left: `calc(${rect.left + rect.width / 2}px - 0.375em)`,\n        top: `calc(${rect.top}px - 0.5em)`,\n      }}\n    />\n  )\n}\n","import styled from \"@emotion/styled\"\nimport { useCallback, useRef, useState } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { $Panel } from \"../../shared-overlays\"\nimport { t } from \"../../utils/translations\"\nimport {\n  $CancelButton,\n  $FormCaption,\n  $FormGroup,\n  $FormHint,\n  $Input,\n  $PrimaryButton,\n  $Textarea,\n} from \"../../shared-styles\"\nimport { useLayer } from \"../../use-layer\"\nimport { useAbsoluteReposition } from \"../../use-reposition\"\nimport { AnchorElement } from \"../index\"\nimport { AnchorDialog } from \"./AnchorDialog\"\n\nconst $AnchorEditDialog = styled($Panel)`\n  position: absolute;\n  width: 20em;\n  padding: 1em;\n`\n\nexport function AnchorEditDialog({\n  destAnchor,\n  destStartEdge,\n  element,\n}: {\n  destAnchor: HTMLAnchorElement\n  destStartEdge: HTMLSpanElement\n  element: AnchorElement\n}) {\n  const dialog = useLayer(\"dialog\")\n  const style = useAbsoluteReposition(\n    { destAnchor, destStartEdge },\n    ({ destAnchor, destStartEdge }) => {\n      return {\n        left: destStartEdge.left,\n        top: destAnchor.top + destAnchor.height,\n      }\n    }\n  )\n\n  const editor = useSlateStatic()\n\n  const [href, setHref] = useState<string>(element.href)\n  const [title, setTitle] = useState<string>(element.title || \"\")\n\n  const formRef = useRef({ href, title })\n  formRef.current = { href, title }\n\n  const handleHrefChange = useCallback<\n    React.ChangeEventHandler<HTMLInputElement>\n  >((e) => {\n    setHref(e.target.value)\n  }, [])\n\n  const handleTitleChange = useCallback<\n    React.ChangeEventHandler<HTMLInputElement>\n  >((e) => {\n    setTitle(e.target.value)\n  }, [])\n\n  const openAnchorDialog = useCallback(() => {\n    dialog.open(() => (\n      <AnchorDialog\n        destAnchor={destAnchor}\n        destStartEdge={destStartEdge}\n        element={element}\n      />\n    ))\n  }, [destAnchor, destStartEdge, element])\n\n  const handleSubmit = useCallback(() => {\n    const { href, title } = formRef.current\n    editor.anchor.editLink({ href, title }, { at: element })\n    openAnchorDialog()\n  }, [openAnchorDialog])\n\n  return (\n    <$AnchorEditDialog contentEditable={false} style={style}>\n      <$FormGroup>\n        <$FormCaption>{t(\"linkUrl\")}</$FormCaption>\n        <$Textarea as=\"textarea\" value={href} onChange={handleHrefChange} />\n      </$FormGroup>\n      <$FormGroup>\n        <$FormCaption>{t(\"tooltipText\")}</$FormCaption>\n        <$Input type=\"text\" value={title} onChange={handleTitleChange} />\n        <$FormHint>{t(\"tooltipHint\")}</$FormHint>\n      </$FormGroup>\n      <$FormGroup>\n        <$PrimaryButton onClick={handleSubmit}>{t(\"apply\")}</$PrimaryButton>\n      </$FormGroup>\n      <$FormGroup>\n        <$CancelButton onClick={openAnchorDialog}>{t(\"cancel\")}</$CancelButton>\n      </$FormGroup>\n    </$AnchorEditDialog>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nexport const $FormGroup = styled(\"div\")`\n  margin: 0.5em 0;\n  &:first-of-type {\n    margin-top: 0;\n  }\n  &:last-of-type {\n    margin-bottom: 0;\n  }\n`\n\nexport const $FormCaption = styled(\"div\")`\n  font-size: 0.9375em;\n  margin-bottom: 0.25em;\n  color: var(--shade-700);\n`\n\nexport const $FormHint = styled(\"div\")`\n  font-size: 0.875em;\n  margin-top: 0.25em;\n  color: var(--shade-500);\n`\n\nexport const $Textarea = styled(\"input\")`\n  box-sizing: border-box;\n  width: 100%;\n  height: 6em;\n  padding: 0.5em 0.75em;\n  border-radius: 0.25em;\n  color: var(--shade-700);\n  font-family: inherit;\n  border: 1px solid var(--shade-300);\n  font-size: 0.9375em;\n  &:focus {\n    outline: 2px solid var(--blue-200);\n  }\n`\n\nexport const $Input = styled(\"input\")`\n  box-sizing: border-box;\n  width: 100%;\n  padding: 0.5em 0.75em;\n  border-radius: 0.25em;\n  color: var(--shade-700);\n  border: 1px solid var(--shade-300);\n  font-size: 0.9375em;\n  &:focus {\n    outline: 2px solid var(--blue-200);\n  }\n`\n\nexport const $BaseButton = styled(\"div\")`\n  /* Center vertically and horizontally */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  padding: 0.25em 0.75em;\n  text-align: center;\n  transition: all 100ms;\n  border-radius: 0.25em;\n  svg {\n    font-size: 1.25em;\n    stroke-width: 2px;\n  }\n`\n\nexport const $PrimaryButton = styled($BaseButton)`\n  color: var(--blue-50);\n  background: var(--blue-500);\n  outline: 0px solid white;\n  &:hover {\n    color: white;\n    background: var(--blue-600);\n    outline: 2px solid var(--blue-200);\n  }\n  svg {\n    color: var(--blue-200);\n  }\n`\n\nexport const $CancelButton = styled($BaseButton)`\n  color: var(--shade-500);\n  background: var(--shade-200);\n  outline: 0px solid white;\n  &:hover {\n    color: var(--shade-600);\n    background: var(--shade-300);\n    outline: 2px solid var(--shade-200);\n  }\n  svg {\n    color: var(--shade-400);\n  }\n`\n","import { SVGProps } from \"react\"\n\nimport { TablerIcon } from \"~/src/sink\"\n\nexport const ExternalLinkIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <path d=\"M12 6H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6M11 13l9-9M15 4h5v5\" />\n  </TablerIcon>\n)\n\nexport const LinkOffIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <path d=\"m9 15 3-3m2-2 1-1M11 6l.463-.536a5 5 0 0 1 7.071 7.072L18 13M3 3l18 18M13 18l-.397.534a5.068 5.068 0 0 1-7.127 0 4.972 4.972 0 0 1 0-7.071L6 11\" />\n  </TablerIcon>\n)\n\nexport const PencilIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <path d=\"M4 20h4L18.5 9.5a1.5 1.5 0 0 0-4-4L4 16v4M13.5 6.5l4 4\" />\n  </TablerIcon>\n)\n","import { Descendant } from \"slate\"\n\nimport { createPlugin, curryOne } from \"~/src/sink\"\n\nimport { TypedPlugin } from \"../sink/types/plugin/plugin\"\nimport { onPaste } from \"./editable/on-paste\"\nimport { createAnchorMethods } from \"./methods\"\nimport { normalizeNode } from \"./normalize-node\"\nimport { Anchor } from \"./render-element/anchor\"\n\ntype AnchorMethods = ReturnType<typeof createAnchorMethods>\n\nexport type AnchorEditor = {\n  anchor: AnchorMethods\n}\n\nexport type AnchorElement = {\n  type: \"anchor\"\n  href: string\n  target?: string\n  title?: string\n  children: Descendant[]\n}\n\nexport type AnchorPluginCustomTypes = {\n  Name: \"anchor\"\n  Editor: AnchorEditor\n  Element: AnchorElement\n}\n\nexport const AnchorPlugin = createPlugin<AnchorPluginCustomTypes>(\n  (editor, _options, { createPolicy }) => {\n    editor.anchor = createAnchorMethods(editor)\n    return createPolicy({\n      name: \"anchor\",\n      editor: {\n        isInline(element) {\n          if (element.type === \"anchor\") return true\n        },\n        normalizeNode: curryOne(normalizeNode, editor),\n      },\n      editableProps: {\n        onPaste: curryOne(onPaste, editor),\n        renderElement: ({ element, attributes, children }) => {\n          if (element.type === \"anchor\") {\n            return (\n              <Anchor element={element} attributes={attributes}>\n                {children}\n              </Anchor>\n            )\n          }\n        },\n      },\n    })\n  }\n) as TypedPlugin<AnchorPluginCustomTypes>\n","import { Editor, Element, NodeEntry, Path } from \"slate\"\n\nimport { findElementUp } from \"~/src/sink\"\n\nexport function isSafeDelete(\n  editor: Editor,\n  a: NodeEntry | undefined,\n  b: NodeEntry | undefined\n) {\n  if (!a || !b) return true\n  /**\n   * If the current Node and the next Node are the same, short circuit\n   * and leave early. Good for performance.\n   */\n  if (Path.equals(a[1], b[1])) return true\n  const masterEntryA = findElementUp(\n    editor,\n    (el) => Element.isElement(el) && editor.isMaster(el),\n    { at: a[1] }\n  )\n  const masterEntryB = findElementUp(\n    editor,\n    (el) => {\n      return Element.isElement(el) && editor.isMaster(el)\n    },\n    { at: b[1] }\n  )\n  /**\n   * If neither have a master, then don't worry about it.\n   */\n  if (!masterEntryA && !masterEntryB) return true\n  /**\n   * If they both have a master but it's the same master, then don't\n   * worry about it.\n   */\n  if (\n    masterEntryA &&\n    masterEntryB &&\n    Path.equals(masterEntryA[1], masterEntryB[1])\n  )\n    return true\n  return false\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { createPlugin, TypedPlugin } from \"~/src/sink\"\n\nimport { isSafeDelete } from \"./is-safe-delete\"\n\ntype AtomicDeleteEditor = {\n  atomicDelete: true\n}\n\nexport type AtomicDeletePluginCustomTypes = {\n  Name: \"atomic-delete\"\n  Editor: AtomicDeleteEditor\n}\n\n/**\n * The Atomic Delete plugin protects master/slave related elements from being\n * put into a bad state after a delete.\n *\n * This can happen because Slate's default delete behavior does not take into\n * account the relationship between master/slave elements.\n *\n * Specifically, atomic delete protects against the following situations:\n *\n * - User forward deletes from just before a table. The first cell in the\n *   table is deleted leaving a first row with one less cell than the rest\n *   of the table.\n *\n * - User forward deletes at the end of a code block. Text from outside the\n *   code block is pulled into the code block.\n *\n * - User backward deletes from just after a code block. Text from outside the\n *   code block is pulled into the code block.\n *\n * - User backward deletes at the start of a code block. Text from inside the\n *   code block is pulled outside the code block.\n */\nexport const AtomicDeletePlugin = createPlugin<AtomicDeletePluginCustomTypes>(\n  (editor) => {\n    editor.atomicDelete = true\n    return {\n      name: \"atomic-delete\",\n      editor: {\n        deleteBackward() {\n          if (editor.selection == null) return false\n          const entry = Editor.node(editor, editor.selection)\n          const prevEntry = Editor.previous(editor, { mode: \"lowest\" })\n          if (isSafeDelete(editor, entry, prevEntry)) return false\n          Transforms.move(editor, { unit: \"character\", reverse: true })\n          return true\n        },\n        deleteForward() {\n          if (editor.selection == null) return false\n          const entry = Editor.node(editor, editor.selection)\n          const nextEntry = Editor.next(editor, { mode: \"lowest\" })\n          if (isSafeDelete(editor, entry, nextEntry)) return false\n          Transforms.move(editor, { unit: \"character\" })\n          return true\n        },\n      },\n    }\n  }\n) as TypedPlugin<AtomicDeletePluginCustomTypes>\n","import { Editor, Transforms } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { curryOne } from \"~/src/sink\"\nimport { ImageBlockElement} from \"../types\"\n\nfunction noop(editor: Editor) {\n  editor\n}\n\nfunction insertImageFromUrl(\n  editor: Editor,\n  url: string,\n  alt?: string,\n  title?: string,\n) {\n  const { selection } = editor\n  \n  Transforms.insertNodes(editor, {\n    type: \"image-block\",\n    url,\n    alt: alt || \"\",\n    title: title || \"\",\n    width: 320,\n    height: 240,\n    children: [{ text: \"\" }],\n  } as ImageBlockElement)\n\n  /**\n   * If there is no selection the element is inserted at the bottom of the\n   * editor. When this happens, the insertion point may not be visible and\n   * so this code scrolls to the bottom of the editor. We don't do this if\n   * there is a selection because if the user made a selection, it is\n   * likely already in view.\n   */\n  if (!selection) {\n    const lastPos = Editor.end(editor, [])\n    Transforms.select(editor, lastPos)\n    ReactEditor.focus(editor)\n  }\n}\n\nexport function createImageMethods(editor: Editor) {\n  return {\n    noop: curryOne(noop, editor),\n    insertImageFromUrl: curryOne(insertImageFromUrl, editor),\n  }\n}\n","import { Editor, Node, NodeEntry } from \"slate\"\n\nexport function normalizeNode(editor: Editor, entry: NodeEntry<Node>): boolean {\n  editor\n  entry\n  return false\n}\n","import styled from \"@emotion/styled\"\n\nexport const $ImageBlock = styled(\"div\")`\n  display: block;\n  margin: 1em 0;\n`\n","import { clsx } from \"clsx\"\nimport React, { useState } from \"react\"\nimport { useSelected } from \"slate-react\"\n\nimport {\n  $Image,\n  $ImageContainer,\n} from \"../../styles/image-with-controls-styles/image-with-controls-styles\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImageSizePreset,\n} from \"../../types\"\nimport { ImageResizeControl } from \"./image-resize-controls/image-resize-control\"\nimport { ImageSizeStatus } from \"./image-size-status/image-size-status\"\nimport { ImageToolbar } from \"./image-toolbar/image-toolbar\"\n\n/**\n * The `Image` Component is responsible for:\n *\n * - rendering the image\n * - displaying the UI for the image including\n *   - resize controls\n *   - current width/height\n *   - image preset size controls\n *\n * It's outer $ImageContainer is represented as an `inline-block` and is\n * placed inside a `block` element for the `image-block` and a `span` element\n * for `image-inline`.\n */\nexport function ImageWithControls({\n  element,\n  presets,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n  presets: ImageSizePreset[]\n}) {\n  const url = element.url\n  const selected = useSelected()\n  const [isDragging, setIsDragging] = useState(false)\n  const [size, setSize] = useState(\n    element.srcWidth && element.srcHeight && element.width && element.height\n      ? { width: element.width, height: element.height }\n      : null\n  )\n\n  /**\n   * Creates a `srcSize` object if there is both a srcWidth and a srcHeight.\n   * This also acts as an indicator that the image can be resized. If there is\n   * a `srcSize` present we know that the image can be resized.\n   */\n  const srcSize =\n    element.srcWidth && element.srcHeight\n      ? { width: element.srcWidth, height: element.srcHeight }\n      : null\n\n  /**\n   * Show resize controls if the element is selected, it has a `size` and\n   * it has a `srcSize`\n   */\n  const showControls = selected && size && srcSize\n\n  /**\n   * Add classes for different states.\n   */\n  const className = clsx({\n    \"--selected\": selected,\n    \"--dragging\": isDragging,\n    \"--small\": size && (size.width <= 64 || size.height <= 64),\n  })\n\n  /**\n   * The purpose of the surrounding $ImageContainer is simply to surround the\n   * image tightly so that we can place the other control elements relative\n   * to the image.\n   *\n   * In order to do this, the $ImageContainer must be an `inline-block` or else\n   * space gets added on the inside of the container.\n   *\n   * NOTE:\n   *\n   * Everything inside the $ImageContainer must be safe to insert into a\n   * `<p>` tag which means `<div>` tags are not allowed. Use `<span>` tags\n   * instead, even if they are blocks. This is because we get some invalid\n   * nested warning otherwise as `<div>` tags are not supposed to be children\n   * of `<p>` tags.\n   */\n  return (\n    <$ImageContainer className={className}>\n      <$Image src={url} width={size?.width} height={size?.height} />\n      {showControls ? (\n        <ImageToolbar\n          element={element}\n          size={size}\n          setSize={setSize}\n          srcSize={srcSize}\n          presets={presets}\n        />\n      ) : null}\n      {/**\n       * Show the size status bar only when the user is dragging to resize the\n       * image.\n       */}\n      {isDragging && size ? <ImageSizeStatus size={size} /> : null}\n      {showControls ? (\n        <ImageResizeControl\n          element={element}\n          srcSize={srcSize}\n          isDragging={isDragging}\n          setIsDragging={setIsDragging}\n          size={size}\n          setSize={setSize}\n        />\n      ) : null}\n    </$ImageContainer>\n  )\n}\n","import styled from \"@emotion/styled\"\n\n/**\n * Wrap the image with a container so we can accurately place UI elements\n * around it.\n */\nexport const $ImageContainer = styled(\"span\")`\n  /**\n   * In order for this container to wrap tightly (without space), it needs to be\n   * an \"inline-block\". If it's just an \"inline\" we end up with spacing\n   * artificats related to how spacing is placed around text.\n   */\n  display: inline-block;\n  /**\n   * This wrapper's primary purpose (why we don't use the image by itself) is\n   * so that we can place UI controls for the image in and around the image.\n   */\n  position: relative;\n`\n\nexport const $Image = styled(\"img\")`\n  /**\n   * TODO:\n   *\n   * This is a bit of a hack but is a better experience than not anything.\n   *\n   * Constrains the maximum resize width of an image to 100% of the space\n   * available. This prevents the image from stepping outside its boundaries.\n   *\n   * Problem:\n   *\n   * - The \"height\" is set to \"auto\" which likely conflicts with the height\n   *   provided as an image attribute of \"height\" set by the application.\n   *   Effectively, this means that the \"height\" is ignored which is fine\n   *   except when the image hasn't been loaded yet, I think it's possible\n   *   and perhaps likely that there may be a reflow that happens before/after\n   *   the image is loaded.\n   */\n  max-width: 100%;\n  height: auto;\n\n  /**\n   * Rounded borders are pretty and also help the selection outline look\n   * pretty.\n   */\n  transition: border-radius 250ms;\n  border-radius: 0.5em;\n  .--small > & {\n    border-radius: 1px;\n  }\n  display: block;\n\n  /**\n   * Selection border. We leave a space between the outline and the image so\n   * that an image that is the same color as the selection border will still\n   * look selected.\n   */\n  .--selected > & {\n    outline: 2px solid var(--select-color);\n    outline-offset: 1px;\n  }\n  /**\n   * If the image isn't loaded yet, we want to have some color filling the space\n   * that the image will eventually load into. This helps indicates to the user\n   * the space that the image will fill into.\n   *\n   * Once the image is finished loading, we want to respect transparency so at\n   * that point we hide the background shading.\n   */\n  .--loading > & {\n    background: var(--shade-100);\n  }\n\n  /**\n   * When we change the image via a preset, we want to animate the change;\n   * however, when we are dragging to resize, a transition adds a janky delay\n   * to the resize so we remove the transition during drag resizing.\n   */\n  transition: width 100ms, height 100ms;\n  .--dragging > & {\n    transition: border-radius 250ms;\n  }\n`\n","import { clsx } from \"clsx\"\nimport { Dispatch, SetStateAction, useCallback } from \"react\"\nimport { Editor, Transforms } from \"slate\"\nimport { ReactEditor, useSlateStatic } from \"slate-react\"\n\nimport { stopEvent } from \"~/src/sink\"\nimport { useResizeBrowser } from \"~/src/use-reposition/hooks\"\n\nimport {\n  $ImageResizeHandle,\n  $ImageResizeInvisibleHandle,\n} from \"../../../styles/image-with-controls-styles/image-resize-handle-styles\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImageSize,\n} from \"../../../types\"\nimport { getEditorWidth, minMax, resizeToWidth } from \"../../../utils\"\n\n/**\n * Helper function finds the `img` inside the current Slate `Element`.\n *\n * The `Element` in the DOM points to the surrounding container, so we search\n * inside of it for the `img` tag which know there is only one of.\n *\n * We then get the client rect from it.\n */\nfunction getImageBoundsFromSlateElement(\n  editor: Editor,\n  element: ImageBlockElement | ImageInlineElement\n): DOMRect {\n  const imageContainerDOMNode = ReactEditor.toDOMNode(editor, element)\n  const imgDOMNode = imageContainerDOMNode.querySelector(\"img\")\n  if (!imgDOMNode)\n    throw new Error(`Image Element could not be found but should exist`)\n  return imgDOMNode.getBoundingClientRect()\n}\n\nexport function ImageResizeControl({\n  element,\n  srcSize,\n  size,\n  setSize,\n  isDragging,\n  setIsDragging,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n  srcSize: ImageSize\n  size: ImageSize\n  setSize: Dispatch<SetStateAction<ImageSize | null>>\n  isDragging: boolean\n  setIsDragging: Dispatch<SetStateAction<boolean>>\n}) {\n  const editor = useSlateStatic()\n\n  /**\n   * Refreshes the rendering of the resize handle if the browser width is\n   * changed. This is useful, for example, if the browser is resized, making\n   * the editable area smaller, which in some cases shoudl cause the resize\n   * handle to indicate that the image can only be resized smaller.\n   */\n  useResizeBrowser()\n\n  /**\n   * Retrieve the inner (usable) width of the editor.\n   */\n  const editorWidth = getEditorWidth(editor)\n\n  /**\n   * Create some convenience constants that we use a lot below\n   */\n  const width = size.width\n  const maxWidth = Math.min(srcSize.width, editorWidth)\n  const minWidth = Math.min(12, srcSize.width)\n\n  /**\n   * Start dragging\n   */\n  const onMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      stopEvent(e)\n      setIsDragging(true)\n\n      /**\n       * Position of mouse pointer when mouse down is pressed\n       */\n      const startX = e.clientX\n\n      /**\n       * The initial image size for the visual image (i.e. the image we are\n       * seeing on the screen) can vary from the image width as stored in the\n       * Document value.\n       *\n       * This is because if the document image width value is larger than the\n       * screen width, we have constrained the image so that it fits.\n       *\n       * When we start a resize, we want the resize to start at the visual\n       * image width though or the drag may appear broken. For example, if you\n       * start resizing smaller, if the image is larger than the width of the\n       * screen, the resize will take no effect.\n       *\n       * For this reason, we start with the visual screen width.\n       */\n      const bounds = getImageBoundsFromSlateElement(editor, element)\n      const startWidth = bounds.width\n\n      let nextSize = { ...size }\n\n      /**\n       * Watch mouse movement during dragging\n       */\n      const onDocumentMouseMove = (e: MouseEvent) => {\n        const nextWidth = minMax({\n          value: startWidth + e.clientX - startX,\n          min: minWidth,\n          max: maxWidth,\n        })\n        nextSize = resizeToWidth(nextWidth, srcSize)\n\n        setSize(nextSize)\n      }\n\n      /**\n       * Remove dragging event listeners when releasing mouse button\n       */\n      const onDocumentMouseUp = () => {\n        document.removeEventListener(\"mousemove\", onDocumentMouseMove)\n        document.removeEventListener(\"mouseup\", onDocumentMouseUp)\n        const path = ReactEditor.findPath(editor, element)\n        /**\n         * When we save the image to the document, at the moment, we have\n         * decided to save the image at the actual resize width, as stored\n         * in the resize state. This is different than using the visual\n         * image width which is constrained to the width of the screen.\n         *\n         * Not sure if this is the right approach, but it does allow for a\n         * manual workaround if desired where the content is being edited in\n         * a smaller screen than the output window and the user wants to have\n         * the image display at a larger size.\n         *\n         * Note that this is already possible (to save at a larger size than\n         * the screen width) when using presets so it's not entirely out of\n         * character for our editor either.\n         */\n        const size = {\n          width: nextSize.width,\n          height: nextSize.height,\n        }\n        /**\n         * It's not, at the moment, strictly necessary to set the size because\n         * the size is set during mouse move; however, I'm keeping this here\n         * as (a) a sanity check to ensure this is always correct and (b) if\n         * we ever decide to modify the size before saving (see the comment\n         * above when setting size) then we don't end up in a bad state. This\n         * is something that already occurred once during experimenting.\n         */\n        setSize(size)\n        Transforms.setNodes(editor, size, { at: path })\n        setIsDragging(false)\n      }\n\n      /**\n       * Attach event listeners directly to document\n       */\n      document.addEventListener(\"mousemove\", onDocumentMouseMove)\n      document.addEventListener(\"mouseup\", onDocumentMouseUp)\n    },\n    [srcSize.width, srcSize.height, size.width, element]\n  )\n\n  /**\n   * FIXME:\n   *\n   * This can be refactored so that it shares more code with `onMouseDown`\n   * above. They are nearly identical except:\n   *\n   * - the event listeners that are added/removed\n   * - the way way in which clientX is retrieved\n   */\n  const onTouchStart = useCallback(\n    (e: React.TouchEvent) => {\n      stopEvent(e)\n      setIsDragging(true)\n      const startX = e.changedTouches[0].clientX\n      const startWidth = size.width\n\n      let nextSize = { ...size }\n\n      const onDocumentTouchMove = (te: TouchEvent) => {\n        // stopEvent(te)\n        const e = te.changedTouches[0]\n\n        const nextWidth = minMax({\n          value: startWidth + e.clientX - startX,\n          min: minWidth,\n          max: maxWidth,\n        })\n        nextSize = resizeToWidth(nextWidth, srcSize)\n\n        setSize(nextSize)\n      }\n      const onDocumentTouchEnd = () => {\n        document.removeEventListener(\"touchmove\", onDocumentTouchMove)\n        document.removeEventListener(\"touchend\", onDocumentTouchEnd)\n        const path = ReactEditor.findPath(editor, element)\n        Transforms.setNodes(\n          editor,\n          { width: nextSize.width, height: nextSize.height },\n          { at: path }\n        )\n        setIsDragging(false)\n      }\n\n      document.addEventListener(\"touchmove\", onDocumentTouchMove)\n      document.addEventListener(\"touchend\", onDocumentTouchEnd)\n    },\n    [srcSize.width, srcSize.height, size.width, element]\n  )\n\n  /**\n   * Add special classNames to modify appearance of resize controls\n   */\n  const className = clsx({\n    \"--center\": width < maxWidth && width > minWidth,\n    \"--left\": width >= maxWidth && width > minWidth,\n    \"--right\": width <= minWidth && width < maxWidth,\n    \"--dragging\": isDragging,\n    \"--small\": width <= 64 || size.height <= 64,\n  })\n\n  return (\n    <>\n      {/**\n       * The invisible handle is not visible but gives a larger drag handle\n       * target for the mouse and touch events\n       */}\n      <$ImageResizeInvisibleHandle\n        className={className}\n        onMouseDown={onMouseDown}\n        onTouchStart={onTouchStart}\n      >\n        <$ImageResizeHandle>\n          <span className=\"--bar --bar-left\" />\n          <span className=\"--bar --bar-center\" />\n          <span className=\"--bar --bar-right\" />\n        </$ImageResizeHandle>\n      </$ImageResizeInvisibleHandle>\n    </>\n  )\n}\n","import { useEffect } from \"react\"\n\nimport { useThrottledRefresh } from \"./use-throttled-refresh\"\n\n/**\n * Refreshes the Component whenever the page is resized or the window is\n * scrolled. This is because these are usually the only two events that cause\n * the elements on a page to be repositioned.\n *\n * If there are yet other events that can cause the elements to be repositioned\n * or resized, you can also call the returned `refresh` method. This will\n * update the components while still respected the fact that the updates will\n * be throttled so as not to overload the browser.\n */\nexport function useResizeBrowser() {\n  /**\n   * Create a throttled `refresh` method.\n   */\n  const refresh = useThrottledRefresh()\n\n  /**\n   * refresh on page resize or scroll (throttled)\n   */\n  useEffect(() => {\n    refresh()\n    window.addEventListener(\"resize\", refresh)\n    return () => {\n      window.removeEventListener(\"resize\", refresh)\n    }\n  }, [])\n\n  return refresh\n}\n","import styled from \"@emotion/styled\"\n\nexport const $ImageResizeInvisibleHandle = styled(\"span\")`\n  position: absolute;\n  display: block;\n  /**\n   * Prevent touch dragging from exhibiting a kind of scroll bounce behavior\n   * when we just want the image to resize.\n   */\n  touch-action: none;\n  background: rgba(127, 127, 127, 0.001);\n  top: 0;\n  right: calc(-1em - 2px);\n  width: 2em;\n  bottom: 0;\n  &.--left {\n    cursor: w-resize;\n  }\n  &.--center {\n    cursor: ew-resize;\n  }\n  &.--right {\n    cursor: e-resize;\n  }\n  &.--small {\n    right: calc(-1.25em);\n    /* background: green; */\n    width: 1.25em;\n  }\n`\nexport const $ImageResizeHandle = styled(\"span\")`\n  position: absolute;\n  display: block;\n  background: var(--select-color);\n  top: 50%;\n  margin-top: -1em;\n  width: 1em;\n  height: 2em;\n  outline: 1px solid white;\n  transition: all 250ms;\n  /**\n   * The handle is 3 visible states depending on whether the image is at\n   * maximum size or minimum size.\n   *\n   * There are three indicators that let the user know which directions are\n   * available (left, right or both) that the user can drag:\n   *\n   * - rounded corners on the side that are available to drag towards\n   * - on larger size image, the handle is on the inside, middle or outside\n   *   of the outline\n   * - the cursor pointer indicates the direction available for resizing.\n   */\n  .--center > & {\n    left: 0.5em;\n    border-radius: 0.375em;\n  }\n  .--left > & {\n    border-radius: 0.5em 0 0 0.5em;\n    left: 1px;\n  }\n  .--right > & {\n    border-radius: 0 0.5em 0.5em 0;\n    left: calc(50% - 1px);\n  }\n  .--bar {\n    position: absolute;\n    background: var(--blue-200);\n    width: 1px;\n    top: 0.5em;\n    bottom: 0.5em;\n  }\n  /**\n   * Each of 3 bars is 1px wide and 3px apart\n   */\n  .--bar-left {\n    left: calc(50% - 3.5px);\n  }\n  .--bar-center {\n    left: calc(50% - 0.5px);\n  }\n  .--bar-right {\n    left: calc(50% + 2.5px);\n  }\n  /**\n   * When the image is small, we reduce the size of the handler and place it\n   * outside the image. The reasons we do this:\n   * \n   * - If the handle is not outside the image at small sizes, the handle\n   *   obscures the image too much. At larger sizes, it works okay and the\n   *   inside handle placement makes the available direction of the drags more\n   *   intuitive.\n   *\n   * - Also, at small sizes, a large handle can overwhelm the image. That is,\n   *   the handle can be twice as tall as the image itself which looks poor.\n   *   It's still possible for the handle to be larger than the image at small\n   *   sizes, but this is okay in that we don't want the handle to become so\n   *   small that it is hard to see and hard to click.\n   */\n  .--small > & {\n    /**\n     * We opt to mainly adjust the size of the handle at smaller sizes by\n     * adjusting the font-size. This is more efficient than changing all the\n     * border-sizes because changing the font-size automatically changes the\n     * size of the border, but we don't have to redo the different combinations\n     * border-size and the corner that they need to display on.\n     */\n    font-size: 0.5em;\n    width: 1.5em;\n    left: 0.5em;\n    margin-top: -1em;\n  }\n  /**\n   * Each of 2 bars is 1px wide and 3px apart\n   */\n  .--small > & > .--bar-left {\n    left: calc(50% - 2px);\n  }\n  .--small > & > .--bar-center {\n    display: none;\n  }\n  .--small > & > .--bar-right {\n    left: calc(50% + 1px);\n  }\n`\n","/**\n * A more intuitive of ensuring a value is within a min/max range.\n */\n\nexport function minMax({\n  value,\n  min,\n  max,\n}: {\n  value: number\n  min: number\n  max: number\n}): number {\n  if (!(max >= min)) throw new Error(`Expected max >= min but is not`)\n  return Math.max(min, Math.min(max, value))\n}\n","import { Editor } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { ImageSize, ImageSizePreset } from \"../types\"\n\n/**\n * Takes a src image and resizes it to the exact width while preserving the\n * aspect ratio.\n *\n * NOTE: This is resizing to exact width, and not to inside width.\n */\nexport function resizeToWidth(width: number, srcSize: ImageSize): ImageSize {\n  width = Math.round(width)\n  const aspect = srcSize.width / srcSize.height\n  return { width, height: Math.round(width / aspect) }\n}\n\n/**\n * Takes a src image and resizes it to the exact height while preserving the\n * aspect ratio.\n *\n * NOTE: This is resizing to exact height, and not to inside height.\n */\nexport function resizeToHeight(height: number, srcSize: ImageSize): ImageSize {\n  height = Math.round(height)\n  const aspect = srcSize.width / srcSize.height\n  return { width: Math.round(height * aspect), height }\n}\n\n/**\n * Intuitive way of taking a size and a bounds and shrinking the size within\n * the given bounds if necessary.\n */\nexport function resizeInBounds(size: ImageSize, bounds: ImageSize): ImageSize {\n  const aspect = size.width / size.height\n  const boundsAspect = bounds.width / bounds.height\n  if (aspect >= boundsAspect) {\n    if (size.width > bounds.width) {\n      return resizeToWidth(bounds.width, size)\n    }\n  } else {\n    if (size.height > bounds.width) {\n      return resizeToHeight(bounds.height, size)\n    }\n  }\n  return size\n}\n\n/**\n * Takes an image size and an image resize preset and calculates the size of\n * the image when the preset is applied.\n *\n * Notably, there are two `preset` algorithms.\n *\n * - `bounds` which sets a maximum width/height and we find the maximum image\n *   size that fits within those bounds.\n *\n * - `scale` which multiples the width/height by a given scale. Note that by\n *   convention that scale should be 1 or less.\n */\nexport function resizeInPreset(\n  size: ImageSize,\n  srcSize: ImageSize,\n  preset: ImageSizePreset\n): ImageSize {\n  switch (preset.type) {\n    case \"bounds\":\n      return resizeInBounds(srcSize, preset)\n    case \"scale\":\n      return {\n        width: Math.round(srcSize.width * preset.scale),\n        height: Math.round(srcSize.height * preset.scale),\n      }\n  }\n}\n\n/**\n * Takes an editor object and returns the maximum width that elements inside of\n * the editor can be rendered at without overflowing.\n *\n * We get the `clientWidth` which is the \"box\" without the border but including\n * the padding. We then subtract the padding to get the value we want.\n */\nexport function getEditorWidth(editor: Editor) {\n  const element = ReactEditor.toDOMNode(editor, editor)\n  const computed = getComputedStyle(element)\n  const padding =\n    parseInt(computed.paddingLeft) + parseInt(computed.paddingRight)\n  return element.clientWidth - padding\n}\n","import styled from \"@emotion/styled\"\n\nexport const $ImageSizeStatus = styled(\"span\")`\n  position: absolute;\n  /**\n   * The status appears with a 1px gap from the outline.\n   *\n   * - 1px for gap from image to outline\n   * - 2px for outline width\n   * - 1px more for the space to the status\n   */\n  bottom: calc(-2em - 4px);\n  left: 0;\n  font-size: 0.625em; /* 10px tiny */\n  line-height: 2em;\n  padding: 0 0.5em;\n  color: var(--shade-100);\n  background: var(--shade-600);\n  outline: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 0.5em;\n  white-space: nowrap;\n\n  /* force numbers to be monospaced for better alignment */\n  font-variant-numeric: tabular-nums;\n`\n","import { $ImageSizeStatus } from \"../../../styles/image-with-controls-styles/image-size-status-styles\"\nimport { ImageSize } from \"../../../types\"\n\nexport function ImageSizeStatus({ size }: { size: ImageSize }) {\n  return (\n    <$ImageSizeStatus>\n      {size.width} &times; {size.height}\n    </$ImageSizeStatus>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nexport const $ImageToolbar = styled(\"span\")`\n  position: absolute;\n  /**\n   * On top of the image +1 for space inside outline, +2 for outline,\n   * +2 for space outside outline.\n   *\n   * DO NOT MOVE TO BOTTOM:\n   *\n   * This is a reminder not to move the preset to the bottom. Visually, it is\n   * less obtrusive at the bottom; however, an issue is that when switching\n   * between different presets, the preset UI moves up/down making it difficult\n   * to switch between different presets. When kept at the top, the preset\n   * UI doesn't move.\n   */\n  top: calc(-1.5em - 5px);\n  /**\n   * Align left to the outline: +1 for space inside outline, +2 for outline\n   * width\n   */\n  left: -3px;\n  /**\n   * When we're resizing, the controls aren't usable and just add to visual\n   * clutter so we hide it. The transition lets us do it smoothly and less\n   * obtrusively.\n   */\n  transition: opacity 200ms;\n  .--dragging & {\n    opacity: 0;\n  }\n  display: flex;\n  gap: 0.25em;\n`\n","import styled from \"@emotion/styled\"\n\n/**\n * Styling for a collection of buttons in the $ImageButtonsContainer at the top\n * of the image.\n */\nexport const $ImageButtonGroup = styled(\"span\")`\n  /* font-size: 0.75em; */\n  border-radius: 0.5em;\n  display: flex;\n  /**\n   * So that inner Preset design shows within the rounded corners.\n   */\n  overflow: clip;\n  /**\n   * Let's the menu pop a little over other content. Without it, may be able to\n   * see the border of the buttons.\n   */\n  outline: 1px solid white;\n`\n\nexport const $ImageButton = styled(\"span\")`\n  font-size: 0.75em;\n  line-height: 2em;\n  padding: 0 0.625em;\n  &:last-child {\n    border-right: none;\n  }\n  cursor: pointer;\n\n  /**\n   * We don't want it to wrap\n   */\n  white-space: nowrap;\n\n  /**\n   * Preset default colors\n   */\n  color: var(--shade-600);\n  background: var(--shade-200);\n  border-right: 1px solid var(--shade-100);\n  /**\n   * When preset is disabled, it is lighter in color and with elss contrast.\n   */\n  &.--disabled {\n    cursor: default;\n    color: var(--shade-300);\n    background: var(--shade-100);\n    &:hover {\n      color: var(--shade-300);\n      background: var(--shade-100);\n    }\n  }\n  &.--selected {\n    cursor: default;\n    color: var(--blue-700);\n    background: var(--blue-200);\n    &:hover {\n      color: var(--blue-700);\n      background: var(--blue-200);\n    }\n  }\n  /**\n   * On hover, it is dark, and with higher contrast.\n   */\n  &:hover {\n    color: var(--shade-700);\n    background: var(--shade-300);\n  }\n  svg {\n    position: relative;\n    top: 0.25em;\n    font-size: 1.33em;\n    line-height: 1em;\n  }\n`\n","import { clsx } from \"clsx\"\nimport { Dispatch, SetStateAction, useCallback } from \"react\"\nimport { Transforms } from \"slate\"\nimport { ReactEditor, useSlateStatic } from \"slate-react\"\n\nimport { useTooltip } from \"~/src/use-tooltip\"\n\nimport { $ImageButton } from \"../../../../styles/image-with-controls-styles/image-buttons-styles\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImageSize,\n  ImageSizePreset,\n} from \"../../../../types\"\nimport { resizeInPreset } from \"../../../../utils\"\n\n/**\n * Shows a single preset image sizes as defined by the `Preset` type.\n *\n * If the srcSize is smaller than the preset, clicking the preset would do\n * nothing except show the image at its full size. For this reason, the\n * preset is disabled if the srcSize is smaller than the preset.\n */\nexport function ImagePresetButton({\n  element,\n  preset,\n  size,\n  setSize,\n  srcSize,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n  preset: ImageSizePreset\n  size: ImageSize\n  setSize: Dispatch<SetStateAction<ImageSize | null>>\n  srcSize: ImageSize\n}) {\n  const editor = useSlateStatic()\n  const presetSize = resizeInPreset(size, srcSize, preset)\n  const tooltip = useTooltip({\n    title: preset.title,\n    hotkey: `${presetSize.width}x${presetSize.height}`,\n  })\n\n  const onClick = useCallback(() => {\n    const path = ReactEditor.findPath(editor, element)\n    const nextSize = resizeInPreset(size, srcSize, preset)\n    setSize(nextSize)\n    Transforms.setNodes(editor, nextSize, { at: path })\n  }, [element, preset, size, srcSize])\n\n  const isEnabled =\n    preset.type === \"scale\"\n      ? true\n      : preset.width <= srcSize.width || preset.height <= srcSize.height\n\n  const isDisabled = !isEnabled\n\n  const isSelected =\n    size.width === presetSize.width && size.height === presetSize.height\n\n  const className = clsx({\n    \"--disabled\": isDisabled,\n    \"--selected\": !isDisabled && isSelected,\n  })\n\n  return (\n    <$ImageButton\n      className={className}\n      onClick={isDisabled ? undefined : onClick}\n      onMouseEnter={tooltip.onMouseEnter}\n      onMouseLeave={tooltip.onMouseLeave}\n    >\n      {preset.name}\n    </$ImageButton>\n  )\n}\n","import { Dispatch, SetStateAction } from \"react\"\n\nimport { $ImageButtonGroup } from \"../../../../styles/image-with-controls-styles/image-buttons-styles\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImageSize,\n  ImageSizePreset,\n} from \"../../../../types\"\nimport { ImagePresetButton } from \"./image-preset-button\"\n\nexport function ImagePresetButtonGroup({\n  element,\n  size,\n  setSize,\n  srcSize,\n  presets,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n  size: ImageSize\n  setSize: Dispatch<SetStateAction<ImageSize | null>>\n\n  srcSize: ImageSize\n  presets: ImageSizePreset[]\n}) {\n  return (\n    <$ImageButtonGroup>\n      {presets.map((preset, i) => {\n        return (\n          <ImagePresetButton\n            element={element}\n            key={i}\n            preset={preset}\n            size={size}\n            setSize={setSize}\n            srcSize={srcSize}\n          />\n        )\n      })}\n    </$ImageButtonGroup>\n  )\n}\n","import { useCallback } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { useTooltip } from \"~/src/use-tooltip\"\n\nimport { $ImageButton } from \"../../../../styles/image-with-controls-styles/image-buttons-styles\"\nimport { ImageBlockElement, ImageInlineElement } from \"../../../../types\"\nimport { InlineIcon } from \"../../../icons\"\nimport { convertToInlineImage } from \"./convert-to-inline-image\"\n\nexport function BlockImageTypeButton({\n  element,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n}) {\n  const editor = useSlateStatic()\n  const tooltip = useTooltip({\n    title: \"Inline Image\",\n    hotkey: \"In a line with text\",\n  })\n\n  const onClickInline = useCallback(() => {\n    if (element.type !== \"image-block\") return\n    convertToInlineImage(editor, element)\n  }, [editor, element])\n  return (\n    <$ImageButton\n      className={element.type === \"image-inline\" ? \"--selected\" : \"\"}\n      onClick={element.type === \"image-inline\" ? undefined : onClickInline}\n      onMouseEnter={tooltip.onMouseEnter}\n      onMouseLeave={tooltip.onMouseLeave}\n    >\n      <InlineIcon />\n    </$ImageButton>\n  )\n}\n","import { SVGProps } from \"react\"\n\nimport { TablerIcon } from \"~/src/sink\"\n\nexport const ResizeIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <path d=\"m7 8-4 4 4 4M17 8l4 4-4 4M3 12h18\" />\n  </TablerIcon>\n)\n\nexport const BlockIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <rect width={6} height={6} x={4} y={5} rx={1} />\n    <path d=\"M4 15h16M4 19h16\" />\n  </TablerIcon>\n)\n\nexport const InlineIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <rect width={6} height={6} x={9} y={5} rx={1} />\n    <path d=\"M4 7h1M4 11h1M19 7h1M19 11h1M4 15h16M4 19h16\" />\n  </TablerIcon>\n)\n","import { Editor, Transforms } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { ImageBlockElement } from \"../../../../types\"\nimport { resizeInPreset } from \"../../../../utils\"\n\nexport function convertToInlineImage(\n  editor: Editor,\n  element: ImageBlockElement\n) {\n  /**\n   * TODO:\n   *\n   * This should be handled or thought about better. Like maybe if these\n   * values don't exist, we still change the type.\n   */\n  if (\n    !element.width ||\n    !element.height ||\n    !element.srcWidth ||\n    !element.srcHeight\n  )\n    return\n  const size = { width: element.width, height: element.height }\n  const srcSize = { width: element.srcWidth, height: element.srcHeight }\n  const path = ReactEditor.findPath(editor, element)\n  Editor.withoutNormalizing(editor, () => {\n    /**\n     * TODO:\n     *\n     * `resizeInPreset` should probably be renamed to something like\n     * `resizeIn` which can be used more generically. Perhaps it takes the\n     * `type`, `width` and `height` as an Interface making it compatible with\n     * a Preset which would extend it.\n     */\n    const nextSize = resizeInPreset(size, srcSize, {\n      name: \"initial-inline-image\",\n      title: \"\",\n      type: \"bounds\",\n      width: 24,\n      height: 24,\n    })\n    Transforms.setNodes(\n      editor,\n      { type: \"image-inline\", ...nextSize },\n      { at: path }\n    )\n    Transforms.wrapNodes(\n      editor,\n      { type: \"paragraph\", children: [] },\n      { at: path }\n    )\n  })\n}\n","import { useCallback } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { useTooltip } from \"~/src/use-tooltip\"\n\nimport { $ImageButton } from \"../../../../styles/image-with-controls-styles/image-buttons-styles\"\nimport { ImageBlockElement, ImageInlineElement } from \"../../../../types\"\nimport { BlockIcon } from \"../../../icons\"\nimport { convertToBlockImage } from \"./convert-to-block-image\"\n\nexport function InlineImageTypeButton({\n  element,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n}) {\n  const editor = useSlateStatic()\n  const tooltip = useTooltip({\n    title: \"Block Image\",\n    hotkey: \"On a line by itself\",\n  })\n\n  const onClickBlock = useCallback(() => {\n    if (element.type !== \"image-inline\") return\n    convertToBlockImage(editor, element)\n  }, [editor, element])\n\n  return (\n    <$ImageButton\n      className={element.type === \"image-block\" ? \"--selected\" : \"\"}\n      onClick={element.type === \"image-block\" ? undefined : onClickBlock}\n      onMouseEnter={tooltip.onMouseEnter}\n      onMouseLeave={tooltip.onMouseLeave}\n    >\n      <BlockIcon />\n    </$ImageButton>\n  )\n}\n","import { Editor, Text, Transforms } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { findElementUp } from \"../../../../../sink\"\nimport { ImageInlineElement } from \"../../../../types\"\nimport { resizeInPreset } from \"../../../../utils\"\n\nexport function convertToBlockImage(\n  editor: Editor,\n  element: ImageInlineElement\n) {\n  /**\n   * TODO:\n   *\n   * This should be handled or thought about better. Like maybe if these\n   * values don't exist, we still change the type.\n   */\n  if (\n    !element.width ||\n    !element.height ||\n    !element.srcWidth ||\n    !element.srcHeight\n  )\n    return\n  const size = { width: element.width, height: element.height }\n  const srcSize = { width: element.srcWidth, height: element.srcHeight }\n  const path = ReactEditor.findPath(editor, element)\n\n  Editor.withoutNormalizing(editor, () => {\n    /**\n     * TODO:\n     *\n     * `resizeInPreset` should probably be renamed to something like\n     * `resizeIn` which can be used more generically. Perhaps it takes the\n     * `type`, `width` and `height` as an Interface making it compatible with\n     * a Preset which would extend it.\n     */\n    const nextSize = resizeInPreset(size, srcSize, {\n      name: \"initial-block-image\",\n      title: \"\",\n      type: \"bounds\",\n      width: 320,\n      height: 320,\n    })\n    /**\n     * Convert the inline image to a block image.\n     *\n     * When we make this change, it causes the normalization rules to change\n     * from the rules of an inline to the rules of a block. Inlines can only\n     * co-exist with Text and other Inline elments. They must also always be\n     * followed by and preceded by a Text nod.\n     *\n     * Some of the code below help to fix the inconsistencies caused by this\n     * change.\n     */\n    Transforms.setNodes(\n      editor,\n      { type: \"image-block\", ...nextSize },\n      { at: path }\n    )\n    /**\n     * Here we find the enclosing parent block for the inline.\n     *\n     * Note that there should always be a parent block for an inline. If there\n     * isn't, something isn't working properly because the Slate normalization\n     * rules require a block parent to an inline.\n     */\n    const parentEntry = findElementUp(\n      editor,\n      (node) => Editor.isBlock(editor, node) && node.type !== \"image-block\"\n    )\n    if (!parentEntry) throw new Error(\"This shouldn't happen\")\n    const [parentElement, parentPath] = parentEntry\n    const siblings = parentElement.children\n    const siblingCount = parentElement.children.length\n    const index = path.slice(-1)[0]\n\n    /**\n     * Before we lift the inline node, we want to remove **empty** Text blocks\n     * at the beginning of the block when the inline node is the second item\n     * and at the end of the block when the inline is the second to last item.\n     *\n     * We do this because Slate adds empty text nodes always at the beginning\n     * and end of a line if the node next to it is an inline. This behavior\n     * works fine in most cases, but when we want to lift the inline element\n     * up, Slate sees that there is content next to it and when the element is\n     * lifted up, the block is split into 3 pieces, including a piece with an\n     * empty Text node.\n     *\n     * From a user expectation point of view though, we don't want these extra\n     * blocks inserted. If the inline image is at the end of the line, we want\n     * it converted to a block image with a block of stuff before it. There is\n     * no use for the extra block at the end with no content in it.\n     */\n    /**\n     * Remove the last sibling if it's empty and next to the inline image\n     */\n    const lastSibling = siblings[siblingCount - 1]\n    if (\n      index === siblingCount - 2 &&\n      Text.isText(lastSibling) &&\n      lastSibling.text === \"\"\n    ) {\n      Transforms.removeNodes(editor, {\n        at: [...parentPath, siblingCount - 1],\n      })\n    }\n    /**\n     * Remove the first sibling if it's empty and next to the inline image\n     */\n    const firstSibling = siblings[0]\n    const removeFirstSibling =\n      index === 1 && Text.isText(firstSibling) && firstSibling.text === \"\"\n    if (removeFirstSibling) {\n      Transforms.removeNodes(editor, { at: [...parentPath, 0] })\n    }\n    /**\n     * Now lift the node, but if the first sibling was removed, we need to account fo rthe fact that the index of the image changed.\n     */\n    Transforms.liftNodes(editor, {\n      at: [...parentPath, removeFirstSibling ? index - 1 : index],\n    })\n  })\n}\n","import { $ImageButtonGroup } from \"../../../../styles/image-with-controls-styles/image-buttons-styles\"\nimport { ImageBlockElement, ImageInlineElement } from \"../../../../types\"\nimport { BlockImageTypeButton } from \"./block-image-type-button\"\nimport { InlineImageTypeButton } from \"./inline-image-type-button\"\n\nexport function ImageTypeButtonGroup({\n  element,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n}) {\n  return (\n    <$ImageButtonGroup>\n      <InlineImageTypeButton element={element} />\n      <BlockImageTypeButton element={element} />\n    </$ImageButtonGroup>\n  )\n}\n","import React, { Dispatch, SetStateAction } from \"react\"\n\nimport { $ImageToolbar } from \"../../../styles/image-with-controls-styles/image-toolbar-styles\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImageSize,\n  ImageSizePreset,\n} from \"../../../types\"\nimport { ImagePresetButtonGroup } from \"./image-preset-buttons/image-preset-button-group\"\nimport { ImageTypeButtonGroup } from \"./image-type-buttons/image-type-button-group\"\n\n/**\n * The ImageToolbar appears above an image when the image is selected.\n *\n * It includes:\n *\n * - A set of image resize presets when clicked resizes the image to the preset\n * - Buttons to toggle between a block image and an inline image\n */\nexport function ImageToolbar({\n  element,\n  size,\n  setSize,\n  srcSize,\n  presets,\n}: {\n  element: ImageBlockElement | ImageInlineElement\n  size: ImageSize\n  setSize: Dispatch<SetStateAction<ImageSize | null>>\n  srcSize: ImageSize\n  presets: ImageSizePreset[]\n}) {\n  return (\n    <$ImageToolbar>\n      <ImageTypeButtonGroup element={element} />\n      <ImagePresetButtonGroup\n        element={element}\n        size={size}\n        setSize={setSize}\n        srcSize={srcSize}\n        presets={presets}\n      />\n    </$ImageToolbar>\n  )\n}\n","import { useSlateStatic } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { $ImageBlock } from \"../styles/image-block-styles\"\nimport { ImageBlockElement } from \"../types\"\nimport { ImageWithControls } from \"./image-with-controls\"\n\nexport function ImageBlock({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<ImageBlockElement>) {\n  const editor = useSlateStatic()\n  return (\n    <div {...attributes}>\n      <$ImageBlock contentEditable={false}>\n        <ImageWithControls\n          element={element}\n          presets={editor.image.imageBlockPresets}\n        />\n      </$ImageBlock>\n      {children}\n    </div>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nexport const $ImageInline = styled(\"span\")`\n  display: inline;\n`\n","import { useSlateStatic } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { $ImageInline } from \"../styles/image-inline-styles\"\nimport { ImageInlineElement } from \"../types\"\nimport { ImageWithControls } from \"./image-with-controls\"\n\nexport function ImageInline({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<ImageInlineElement>) {\n  const editor = useSlateStatic()\n  return (\n    <span {...attributes} style={{ display: \"inline-block\" }}>\n      <$ImageInline contentEditable={false}>\n        <ImageWithControls\n          element={element}\n          presets={editor.image.imageInlinePresets}\n        />\n      </$ImageInline>\n      {children}\n    </span>\n  )\n}\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { ImageBlockElement, ImageInlineElement } from \"../types\"\nimport { ImageBlock } from \"./image-block\"\nimport { ImageInline } from \"./image-inline\"\n\nexport function renderElement({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<ImageBlockElement | ImageInlineElement>) {\n  switch (element.type) {\n    case \"image-block\":\n      return (\n        <ImageBlock element={element} attributes={attributes}>\n          {children}\n        </ImageBlock>\n      )\n    case \"image-inline\":\n      return (\n        <ImageInline element={element} attributes={attributes}>\n          {children}\n        </ImageInline>\n      )\n  }\n}\n","import { Editor, Transforms } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\nimport { createPlugin, curryOne, TypedPlugin } from \"~/src/sink\"\n\nimport { createImageMethods } from \"./methods\"\nimport { normalizeNode } from \"./normalize-node\"\nimport { renderElement } from \"./render-element\"\nimport {\n  ImageBlockElement,\n  ImageInlineElement,\n  ImagePluginConfig,\n  ImagePluginCustomTypes,\n} from \"./types\"\nimport { resizeInBounds } from \"./utils\"\n\nconst DEFAULT_OPTIONS: ImagePluginConfig = {\n  maxInitialInlineImageSize: { width: 64, height: 64 },\n  maxInitialImageSize: { width: 320, height: 320 },\n  maxImageSize: { width: 1024, height: 1024 },\n  imageBlockPresets: [\n    /**\n     * Pixel Presets\n     */\n    { name: \"S\", title: \"Small\", type: \"bounds\", width: 160, height: 160 },\n    { name: \"M\", title: \"Medium\", type: \"bounds\", width: 320, height: 320 },\n    { name: \"L\", title: \"Large\", type: \"bounds\", width: 640, height: 640 },\n    /**\n     * Scale Presets\n     */\n    { name: \"\", title: \"1/3 scale\", type: \"scale\", scale: 1 / 3 },\n    { name: \"\", title: \"1/2 scale\", type: \"scale\", scale: 0.5 },\n    { name: \"Full\", title: \"Full size\", type: \"scale\", scale: 1 },\n  ],\n  imageInlinePresets: [\n    /**\n     * Pixel Presets\n     */\n    {\n      name: \"16\",\n      title: \"16 pixels\",\n      type: \"bounds\",\n      width: 16,\n      height: 16,\n    },\n    {\n      name: \"24\",\n      title: \"24 pixels\",\n      type: \"bounds\",\n      width: 24,\n      height: 24,\n    },\n    {\n      name: \"32\",\n      title: \"32 pixels\",\n      type: \"bounds\",\n      width: 32,\n      height: 32,\n    },\n    /**\n     * Scale Presets\n     */\n    { name: \"\", title: \"1/3 scale\", type: \"scale\", scale: 1 / 3 },\n    { name: \"\", title: \"1/2 scale\", type: \"scale\", scale: 0.5 },\n    { name: \"Full\", title: \"Full size\", type: \"scale\", scale: 1 },\n  ],\n}\n\nexport const ImagePlugin = //({\n  createPlugin<ImagePluginCustomTypes>(\n    (editor, sinkOptions, { createPolicy }) => {\n      const options: ImagePluginConfig = {\n        ...DEFAULT_OPTIONS,\n        ...sinkOptions.image,\n      }\n      editor.image = {\n        ...createImageMethods(editor),\n        maxInitialInlineImageSize: options.maxInitialInlineImageSize,\n        maxInitialImageSize: options.maxInitialImageSize,\n        maxImageSize: options.maxImageSize,\n        imageBlockPresets: options.imageBlockPresets,\n        imageInlinePresets: options.imageInlinePresets,\n      }\n\n      return createPolicy({\n        name: \"image\",\n        editor: {\n          isVoid: (element) => {\n            if ([\"image-block\", \"image-inline\"].includes(element.type)) {\n              return true\n            }\n          },\n          isInline: (element) => {\n            if (element.type === \"image-inline\") return true\n          },\n          normalizeNode: curryOne(normalizeNode, editor),\n        },\n        editableProps: {\n          renderElement,\n        },\n      })\n    }\n  ) as TypedPlugin<ImagePluginCustomTypes>\n","import styled from \"@emotion/styled\"\n\nexport const $BlockQuote = styled(\"blockquote\")`\n  position: relative;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  border-left: 0.25em solid rgba(0, 0, 0, 0.075);\n  padding-left: 1.5em;\n`\n","import { Descendant, Editor, Element, Node, Transforms } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createPlugin,\n  normalizeSiblings,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { $BlockQuote } from \"./styles\"\n\nexport type BlockQuoteEditor = {\n  supportsBlockQuote: true\n  blockQuotePlugin: {\n    indent: () => void\n    outdent: () => void\n    isActive: () => boolean\n    increaseDepth: () => void\n    decreaseDepth: () => void\n    canIncreaseDepth: () => boolean\n    canDecreaseDepth: () => boolean\n  }\n}\n\nexport type BlockQuoteElement = {\n  type: \"block-quote\"\n  children: Descendant[]\n}\n\nexport type BlockQuotePluginCustomTypes = {\n  Name: \"block-quote\"\n  Editor: BlockQuoteEditor\n  Element: BlockQuoteElement\n}\n\nfunction matchBlockQuoteSafe(node: Node) {\n  return (\n    Element.isElement(node) &&\n    /**\n     * TODO:\n     *\n     * This is probably:\n     * Element.isElement(node) && !Element.isInline(node) &&\n     * !Element.isDependant(node)\n     */\n    (node.type === \"paragraph\" ||\n      node.type === \"code-block\" ||\n      node.type === \"table\" ||\n      node.type === \"horizontal-rule\" ||\n      node.type === \"task-list-item\" ||\n      node.type === \"unordered-list-item\" ||\n      node.type === \"ordered-list-item\" ||\n      node.type === \"heading\")\n  )\n}\n\nconst MAX_DEPTH = 2\n\nexport const BlockQuotePlugin = createPlugin<BlockQuotePluginCustomTypes>(\n  (editor) => {\n    editor.supportsBlockQuote = true\n    editor.blockQuotePlugin = {\n      indent: () => {\n        Transforms.wrapNodes(\n          editor,\n          { type: \"block-quote\", children: [] },\n          { match: matchBlockQuoteSafe }\n        )\n      },\n      outdent: () => {\n        Transforms.liftNodes(editor, {\n          match: (node, path) => matchBlockQuoteSafe(node) && path.length > 1,\n        })\n      },\n      isActive: () => {\n        const [match] = Editor.nodes(editor, {\n          match: (n: Node) => Element.isElement(n) && n.type === \"block-quote\",\n        })\n        return !!match\n      },\n      increaseDepth: () => {\n        // Find the current block-quote\n        const [match] = Editor.nodes(editor, {\n          match: (n: Node) => Element.isElement(n) && n.type === \"block-quote\",\n        })\n\n        if (!match) return\n\n        // Check if we're already at max depth\n        if (!editor.blockQuotePlugin.canIncreaseDepth()) return\n\n        const [, path] = match\n\n        // Select all content inside the block-quote\n        Transforms.select(editor, path)\n\n        // Create a new block-quote wrapping the selected content\n        Transforms.wrapNodes(\n          editor,\n          { type: \"block-quote\", children: [] },\n          { at: path, split: false }\n        )\n      },\n      decreaseDepth: () => {\n        // Find the current block-quote\n        const [match] = Editor.nodes(editor, {\n          match: (n: Node) => Element.isElement(n) && n.type === \"block-quote\",\n        })\n\n        if (!match) return\n\n        // Check if we can decrease depth\n        if (!editor.blockQuotePlugin.canDecreaseDepth()) return\n\n        const [node, path] = match\n\n        // Get the children of the block-quote\n        const children = (node as Element).children\n\n        // Check if the first child is a block-quote\n        if (\n          children.length === 1 &&\n          Element.isElement(children[0]) &&\n          (children[0] as Element).type === \"block-quote\"\n        ) {\n          // Unwrap the nested block-quote\n          Transforms.unwrapNodes(editor, {\n            at: [...path, 0], // Path to the nested block-quote\n            match: (n) => Element.isElement(n) && n.type === \"block-quote\",\n          })\n        }\n      },\n      canIncreaseDepth: () => {\n        // Find the current block-quote\n        const [match] = Editor.nodes(editor, {\n          match: (n: Node) => Element.isElement(n) && n.type === \"block-quote\",\n        })\n\n        if (!match) return false\n\n        const [node] = match\n\n        // Calculate the current depth\n        let depth = 0\n        let current = node\n\n        while (\n          (current as Element).children.length === 1 &&\n          Element.isElement((current as Element).children[0]) &&\n          (current as Element).children[0] &&\n          (current as Element).children[0] &&\n          ((current as Element).children[0] as Element).type === \"block-quote\"\n        ) {\n          depth++\n          current = (current as Element).children[0]\n        }\n\n        return depth < MAX_DEPTH\n      },\n      canDecreaseDepth: () => {\n        // Find the current block-quote\n        const [match] = Editor.nodes(editor, {\n          match: (n: Node) => Element.isElement(n) && n.type === \"block-quote\",\n        })\n\n        if (!match) return false\n\n        const [node] = match\n\n        // Check if the first child is a block-quote\n        return (\n          (node as Element).children.length === 1 &&\n          Element.isElement((node as Element).children[0]) &&\n          (node as Element).children[0] &&\n          ((node as Element).children[0] as Element).type === \"block-quote\"\n        )\n      },\n    }\n    return {\n      name: \"block-quote\",\n      editor: {\n        normalizeNode(entry) {\n          const [node, path] = entry\n          if (!Element.isElement(node)) return false\n          if (node.type !== \"block-quote\") return false\n          return normalizeSiblings<Element>(editor, [node, path], (a, b) => {\n            if (\n              Element.isElement(a[0]) &&\n              Element.isElement(b[0]) &&\n              a[0].type === \"block-quote\" &&\n              b[0].type === \"block-quote\"\n            ) {\n              Transforms.mergeNodes(editor, { at: b[1] })\n            }\n            return true\n          })\n        },\n      },\n      editableProps: {\n        renderElement: ({ element, attributes, children }) => {\n          if (element.type === \"block-quote\") {\n            return <$BlockQuote {...attributes}>{children}</$BlockQuote>\n          }\n        },\n        onKeyDown: createHotkeyHandler({\n          \"super+.\": editor.blockQuotePlugin.indent,\n          \"super+,\": editor.blockQuotePlugin.outdent,\n        }),\n      },\n    }\n  }\n) as TypedPlugin<BlockQuotePluginCustomTypes>\n","import Prism from \"prismjs\"\nconst { languages, tokenize } = Prism\nimport { Element, Node, Path, Range } from \"slate\"\n\nimport { CodeBlockElement, CodeBlockLineElement } from \"./types\"\n\n/**\n * Decorate Overview:\n *\n * We decorate the entire `code-block` at once because if we do it by line,\n * code that continues through multiple lines is not higlighted correctly.\n *\n * In order to higlight the entire `code-block` at once, we need to add a\n * newline to the end of each `code-line`. We cannot use `Node.string` on the\n * entire `code-block`.\n *\n * Once we receive the Prism tokens back, we need to create the ranges.\n *\n * The important part is that we track the offsets from the start. With the\n * offsets, we need to map those back to a `path` and `offset` of each\n * `code-line`. We also need to take into consideration that we have added\n * newlines to the end of each line so the algorithm needs to account for that.\n */\n\n/**\n * Takes an array of text lines and returns an array with the offset\n * in characters of the start of each line.\n */\n\nfunction getLineOffsets(lines: string[]) {\n  let offset = 0\n  const lineOffsets: number[] = []\n  for (const line of lines) {\n    lineOffsets.push(offset)\n    offset = offset + line.length\n  }\n  return lineOffsets\n}\n\n/**\n * `decorate` method passed to `Editable`\n */\n\nexport function decorate(\n  nodeEntry: [CodeBlockElement | CodeBlockLineElement, Path]\n): Range[] {\n  const [node, path] = nodeEntry\n\n  if (!Element.isElement(node)) return []\n  if (node.type !== \"code-block\") return []\n\n  const lang: Prism.Grammar | undefined = languages[node.language]\n\n  if (lang === undefined) return []\n\n  /**\n   * To decorate a code-block, we need to look at all the code in a code-block.\n   *\n   * We can't `Node.string` the entire block because it will join lines\n   * together without newlines.\n   *\n   * For this reason, we create an array of `textLines` which is the text of\n   * each codeLine plus a newline on the end of it.\n   *\n   * Then we join all of those together to get the text that was pass into\n   * Prism.\n   *\n   * We need to keep `textLines` around so that we can extract the\n   * `linePositions`\n   */\n\n  const codeLineElements = node.children\n\n  const textLines = codeLineElements.map((node) => `${Node.string(node)}\\n`)\n\n  const text = textLines.join(\"\")\n\n  const lineOffsets: number[] = getLineOffsets(textLines)\n\n  /**\n   * Takes a character offset from the beginning of the `code-block` and\n   * returns the `path` to the `code-line` and the `offset` within the\n   * `code-line` which Slate needs to make the decoration.\n   */\n\n  function getPointFromOffset(offset: number) {\n    for (let i = lineOffsets.length; i >= 0; i--) {\n      const lineOffset = lineOffsets[i]\n      if (lineOffset <= offset) {\n        return {\n          path: [...path, i],\n          offset: offset - lineOffset,\n        }\n      }\n    }\n    throw new Error(\"This shouldn't happen and indicates a bug in the logic\")\n  }\n\n  const ranges: (Range & { prismToken: string })[] = []\n\n  const tokens = tokenize(text, lang)\n\n  /**\n   * Track current character offset from beginning of `textLines` joined\n   * together.\n   */\n\n  let offset = 0\n\n  /**\n   * Tokens are either:\n   *\n   * - string: which means it is not syntax highlighted\n   * - { type: string, content: string, length: number }: the highlight and content\n   */\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      offset += token.length\n    } else {\n      const anchor = getPointFromOffset(offset)\n      const focus = getPointFromOffset(offset + token.length)\n      ranges.push({\n        anchor,\n        focus,\n        prismToken: token.type,\n      })\n      offset += token.length\n    }\n  }\n\n  return ranges\n}\n","import { Editor } from \"slate\"\n\nimport { insertRootElement } from \"~/src/sink\"\n\nimport { BuiltInLanguage } from \"../types\"\n\nexport function createCodeBlock(\n  editor: Editor,\n  { language }: { language: BuiltInLanguage }\n) {\n  insertRootElement(editor, {\n    type: \"code-block\",\n    language,\n    children: [{ type: \"code-block-line\", children: [{ text: \"\" }] }],\n  })\n}\n","import { Editor, Element, Transforms } from \"slate\"\n\nimport { BetterAt, findElementUp } from \"~/src/sink\"\n\nimport { BuiltInLanguage } from \"../types\"\n\n/**\n * Set the current CodeBlock's language if the selection is currently in a\n * CodeBlock. Returns true if the language was set, false otherwise.\n */\nexport function setCodeBlockLanguage(\n  editor: Editor,\n  language: BuiltInLanguage,\n  options: { at?: BetterAt } = {}\n): boolean {\n  const entry = findElementUp(\n    editor,\n    (el) => Element.isElement(el) && el.type === \"code-block\",\n    { at: options.at }\n  )\n  if (!entry) return false\n  Transforms.setNodes(editor, { language }, { at: entry[1] })\n  return true\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { createCodeBlock } from \"./createCodeBlock\"\nimport { setCodeBlockLanguage } from \"./setCodeBlockLanguage\"\n\nexport function createCodeBlockMethods(editor: Editor) {\n  return {\n    createCodeBlock: curryOne(createCodeBlock, editor),\n    setCodeBlockLanguage: curryOne(setCodeBlockLanguage, editor),\n  }\n}\n","/**\n * Styles from\n * https://github.com/PrismJS/prism-themes/blob/master/themes/prism-ghcolors.css\n */\n\nimport { CSSProperties } from \"react\"\n\nconst commentStyle = { color: \"#999988\", fontStyle: \"italic\" }\nconst dimStyle = { opacity: \"0.7\" }\nconst stringStyle = { color: \"#e3116c\" }\nconst operatorStyle = { color: \"#393a34\" }\nconst valueStyle = { color: \"#36acaa\" }\nconst keywordStyle = { color: \"#00a4db\" }\nconst functionStyle = { color: \"#9a050f\" }\nconst tagStyle = { color: \"#00009f\" }\nconst boldStyle = { fontWeight: \"bold\" }\nconst italicStyle = { fontStyle: \"italic\" }\n\ntype TokenStyles = Record<string, CSSProperties>\n\nexport const tokenStyles: TokenStyles = {\n  comment: commentStyle,\n  prolog: commentStyle,\n  doctype: commentStyle,\n  cdata: commentStyle,\n  namespace: dimStyle,\n  string: stringStyle,\n  \"attr-value\": stringStyle,\n  puncutation: operatorStyle,\n  operator: operatorStyle,\n  entity: valueStyle,\n  url: valueStyle,\n  symbol: valueStyle,\n  number: valueStyle,\n  boolean: valueStyle,\n  variable: valueStyle,\n  constant: valueStyle,\n  property: valueStyle,\n  regex: valueStyle,\n  insert: valueStyle,\n  atrule: keywordStyle,\n  keyword: keywordStyle,\n  \"attr-name\": keywordStyle,\n  function: { ...functionStyle, ...boldStyle },\n  delete: functionStyle,\n  tag: tagStyle,\n  selector: tagStyle,\n  important: boldStyle,\n  bold: boldStyle,\n  italic: italicStyle,\n}\n","import { Text } from \"slate\"\n\nimport { createCodeBlockMethods } from \"./methods\"\n\ntype CodeBlockMethods = ReturnType<typeof createCodeBlockMethods>\n\nexport type BuiltInLanguage =\n  | \"text\"\n  | \"html\"\n  | \"svg\"\n  | \"markup\"\n  | \"css\"\n  | \"javascript\"\n  | \"js\"\n  | \"java\"\n  | \"c\"\n  | \"clike\"\n\n/**\n * Maps a number of supported or semi-supported syntax highlighting languages\n * to the built-in Prism languages.\n */\nexport const LanguageMap: Record<string, BuiltInLanguage> = {\n  plain: \"text\",\n  plaintext: \"text\",\n  text: \"text\",\n  txt: \"text\",\n  html: \"markup\",\n  mathml: \"markup\",\n  svg: \"markup\",\n  xml: \"markup\",\n  ssml: \"markup\",\n  atom: \"markup\",\n  rss: \"markup\",\n  css: \"css\",\n  c: \"clike\",\n  clike: \"clike\",\n  \"c#\": \"clike\",\n  \"c++\": \"clike\",\n  java: \"clike\",\n  javascript: \"javascript\",\n  js: \"javascript\",\n}\n\nexport const LanguageCaptionMap: Record<string, string> = {\n  javascript: \"Javascript\",\n  js: \"Javascript\",\n}\n\nexport const LanguageList: BuiltInLanguage[] = [\n  \"text\",\n  \"html\",\n  \"css\",\n  \"svg\",\n  \"javascript\",\n  \"java\",\n  \"c\",\n]\n\nexport type CodeBlockEditor = {\n  codeBlock: CodeBlockMethods\n}\n\n/**\n * The code block element is the root element of a code block.\n */\nexport type CodeBlockElement = {\n  type: \"code-block\"\n  /**\n   * The language of the code block. Can accept any string because Markdown can\n   * accept any string; however, the built-in Prism languages are defined in:\n   * `BuiltInLanguage`\n   */\n  language: string\n  children: CodeBlockLineElement[]\n}\n\nexport type CodeBlockLineElement = {\n  type: \"code-block-line\"\n  children: Text[]\n}\n\nexport type CodeBlockPluginCustomTypes = {\n  Name: \"code-block\"\n  Editor: CodeBlockEditor\n  Element: CodeBlockElement | CodeBlockLineElement\n  Text: { text: string; prismToken?: string }\n}\n","import { Editor, Element, Node, NodeEntry, Transforms } from \"slate\"\n\nexport function normalizeNode(editor: Editor, entry: NodeEntry<Node>): boolean {\n  if (!Element.isElement(entry[0])) return false\n  /**\n   * Code lines should only contain plain text.\n   *\n   * - If they contain void elements like images, remove them\n   * - If they contain non-void elements, unwrap them\n   *\n   * TODO:\n   *\n   * Convert pasted in elements to Markdown code\n   */\n  if (entry[0].type === \"code-block-line\") {\n    for (const [child, path] of Node.children(editor, entry[1])) {\n      if (!Element.isElement(child)) continue\n      if (editor.isVoid(child)) {\n        Transforms.removeNodes(editor, { at: path })\n        return true\n      } else {\n        Transforms.unwrapNodes(editor, { at: path })\n        return true\n      }\n    }\n  }\n  /**\n   * Code blocks should only contain code lines.\n   *\n   * - If they contain void blocks like images, remove them\n   * - If they contain non-void blocks, then convert them to code lines\n   *\n   * TODO:\n   *\n   * Convert pasted in elements to Markdown code\n   */\n  if (entry[0].type === \"code-block\") {\n    for (const [child, path] of Node.children(editor, entry[1])) {\n      if (!Element.isElement(child)) continue\n      if (child.type === \"code-block-line\") continue\n      if (child.type === \"code-block\") {\n        /**\n         * When pasting two or more lines of `code-block-line`, Slate will paste\n         * it as a `code-block` which will create a `code-block` in a\n         * `code-block`. The following code removes the lower `code-block`.\n         */\n        Transforms.unwrapNodes(editor, { at: path })\n        return true\n      } else if (editor.isVoid(child)) {\n        Transforms.removeNodes(editor, { at: path })\n        return true\n      } else {\n        Transforms.removeNodes(editor, { at: path })\n        Transforms.insertNodes(editor, {\n          type: \"code-block-line\",\n          children: [{ text: Node.string(child) }],\n        })\n        return true\n      }\n    }\n  }\n  return false\n}\n","import { useCallback, useRef } from \"react\"\nimport { useSelected } from \"slate-react\"\n\nimport { Menu, MenuItemData } from \"../../shared-overlays\"\nimport { ConstrainedRenderElementProps } from \"../../sink\"\nimport { useLayer } from \"../../use-layer\"\nimport { ChevronDownIcon } from \"../icons/ChevronDownIcon\"\nimport { $CodeBlock, $CodeBlockLanguage, $CodeBlockScroller } from \"../styles\"\nimport { CodeBlockElement, LanguageList } from \"../types\"\n\nexport function CodeBlock({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<CodeBlockElement>) {\n  const ref = useRef<HTMLDivElement>(null)\n  const selected = useSelected()\n  const dropdown = useLayer(\"code-block-dropdown\")\n  const onClick = useCallback(() => {\n    if (dropdown.layer) dropdown.close()\n    const dest = ref.current\n    if (dest === null) return\n    const items: MenuItemData[] = LanguageList.map((language) => {\n      return {\n        icon: () => <span />,\n        title: language,\n        action: (editor) => {\n          editor.codeBlock.setCodeBlockLanguage(language, { at: element })\n        },\n      }\n    })\n    // Menu\n    dropdown.open(() => (\n      <Menu dest={dest} items={items} close={dropdown.close} />\n    ))\n  }, [element])\n\n  return (\n    <$CodeBlock className={selected ? \"--selected\" : \"\"} {...attributes}>\n      <$CodeBlockLanguage contentEditable={false} onClick={onClick} ref={ref}>\n        <span>{element.language}</span>\n        <ChevronDownIcon />\n      </$CodeBlockLanguage>\n      <$CodeBlockScroller>{children}</$CodeBlockScroller>\n    </$CodeBlock>\n  )\n}\n","import { SVGProps } from \"react\"\n\nimport { TablerIcon } from \"~/src/sink\"\n\nexport const ChevronDownIcon = (props: SVGProps<SVGSVGElement>) => (\n  <TablerIcon {...props}>\n    <path d=\"m6 9 6 6 6-6\" />\n  </TablerIcon>\n)\n","import styled from \"@emotion/styled\"\n\nexport const $CodeBlock = styled(\"div\")`\n  position: relative;\n  background: var(--code-block-bgcolor);\n  margin: 1em 0;\n  border-radius: 0.5em;\n  border: 1px solid var(--code-block-border-color);\n  /**\n   * DO NOT REMOVE: Code for adding line numbering if enabled. See $CodeBlockLine\n  * for more details.\n   * counter-reset: line;\n   */\n  &.--selected {\n    outline: 2px solid var(--select-color);\n  }\n  /**\n   * NOTE: Required to make the border radius work on the first and last lines.\n   * Otherwise they will be square.\n   */\n  overflow-x: hidden;\n`\n\nexport const $CodeBlockScroller = styled(\"div\")`\n  padding: 2.25em 1em 1.5em 1em;\n  border-radius: 0.5em;\n  overflow-x: auto;\n`\n\nexport const $CodeBlockLanguage = styled(\"span\")`\n  cursor: pointer;\n  position: absolute;\n  top: 0.25em;\n  right: 0.25em;\n  width: 8em;\n  display: flex;\n  font-size: 0.75em;\n  color: var(--shade-700);\n  background: var(--shade-200);\n  padding: 0.25em 0.5em;\n  border-radius: 0.5em;\n  align-items: center;\n  gap: 0.25em;\n  span {\n    text-align: right;\n    flex: 1 1 auto;\n  }\n  svg {\n    flex: 0 0 auto;\n    position: relative;\n  }\n  &:hover {\n    color: var(--shade-800);\n    background: var(--shade-300);\n  }\n`\n\nexport const $CodeBlockLine = styled(\"div\")`\n  white-space: pre;\n  line-height: 1.5em;\n  counter-increment: line;\n  font-family: \"andale mono\", AndaleMono, monospace;\n  font-size: 0.875em;\n  &.--selected {\n    background-color: var(--shade-100);\n  }\n  /*\n    DO NOT REMOVE: Code for adding line numbering.\n    TODO: Make optional in future.\n    */\n  /* &:before {\n    content: counter(line);\n    color: rgba(0, 0, 0, 0.25);\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n    margin-right: 1em;\n    padding: 0em 1em 0 0;\n    text-align: right;\n    display: inline-block;\n    width: 2em;\n  } */\n`\n","import { useSelected } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"../../sink\"\nimport { $CodeBlockLine } from \"../styles\"\nimport { CodeBlockLineElement } from \"../types\"\n\nexport function CodeBlockLine({\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<CodeBlockLineElement>) {\n  const selected = useSelected()\n  return (\n    <$CodeBlockLine\n      className={selected ? \"--selected\" : \"\"}\n      {...attributes}\n      spellCheck=\"false\"\n    >\n      {children}\n    </$CodeBlockLine>\n  )\n}\n","import { ConstrainedRenderElementProps } from \"../../sink\"\nimport { CodeBlockElement, CodeBlockLineElement } from \"../types\"\nimport { CodeBlock } from \"./CodeBlock\"\nimport { CodeBlockLine } from \"./CodeBlockLine\"\n\nexport function renderElement({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<CodeBlockElement | CodeBlockLineElement>) {\n  if (element.type === \"code-block\") {\n    return (\n      <CodeBlock element={element} attributes={attributes}>\n        {children}\n      </CodeBlock>\n    )\n  } else if (element.type === \"code-block-line\") {\n    return (\n      <CodeBlockLine element={element} attributes={attributes}>\n        {children}\n      </CodeBlockLine>\n    )\n  }\n}\n","import { Editor, Element, Transforms } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createPlugin,\n  curryOne,\n  findElementUp,\n  isCollapsed,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { decorate } from \"./decorate\"\nimport { createCodeBlockMethods } from \"./methods\"\nimport { tokenStyles } from \"./prism-theme\"\nimport { CodeBlockPluginCustomTypes } from \"./types\"\nexport * from \"./decorate\"\nexport * from \"./types\"\n\nimport { normalizeNode } from \"./normalizeNode\"\nimport { renderElement } from \"./render-element\"\n\nexport const CodeBlockPlugin = createPlugin<CodeBlockPluginCustomTypes>(\n  (editor, _options, { createPolicy }) => {\n    editor.codeBlock = createCodeBlockMethods(editor)\n\n    function onDelete(): boolean {\n      const { selection } = editor\n      if (!isCollapsed(selection)) return false\n      const codeBlockEntry = findElementUp(editor, \"code-block\")\n      if (codeBlockEntry == null) return false\n      const codeBlockText = Editor.string(editor, codeBlockEntry[1])\n      if (codeBlockText === \"\") {\n        Transforms.removeNodes(editor, { at: codeBlockEntry[1] })\n        return true\n      }\n      return false\n    }\n\n    return createPolicy({\n      name: \"code-block\",\n      editor: {\n        deleteBackward: onDelete,\n        deleteForward: onDelete,\n        isInline(element) {\n          if (\n            element.type === \"code-block\" ||\n            element.type === \"code-block-line\"\n          )\n            return false\n        },\n        isVoid(element) {\n          if (\n            element.type === \"code-block\" ||\n            element.type == \"code-block-line\"\n          )\n            return false\n        },\n        isMaster(element) {\n          if (element.type === \"code-block\") return true\n        },\n        normalizeNode: curryOne(normalizeNode, editor),\n      },\n      editableProps: {\n        decorate,\n        onKeyDown: createHotkeyHandler({\n          \"super+`\": () =>\n            editor.codeBlock.createCodeBlock({ language: \"text\" }),\n          \"mod+a\": () => {\n            /**\n             * When selection is in code-block and the user pressed mod+a,\n             * select the code-block instead of the full document.\n             */\n            const entry = findElementUp(\n              editor,\n              (el) => Element.isElement(el) && el.type === \"code-block\"\n            )\n            if (!entry) return false\n            Transforms.select(editor, entry[1])\n            return true\n          },\n        }),\n        renderElement,\n        renderLeaf: ({ leaf, children }) => {\n          const style = leaf.prismToken\n            ? tokenStyles[leaf.prismToken] || null\n            : null\n          if (style === null) {\n            return children\n          } else {\n            return <span style={style}>{children}</span>\n          }\n        },\n      },\n    })\n  }\n) as TypedPlugin<CodeBlockPluginCustomTypes>\n","import { Editor, Element, NodeEntry, Transforms } from \"slate\"\n\nimport { normalizeSiblings } from \"~/src/sink\"\n\nimport { ParagraphElement } from \"..\"\n\nfunction isParagraph(node: Element): node is ParagraphElement {\n  return Element.isElement(node) && node.type === \"paragraph\"\n}\n/**\n * If there are two sibling paragraphs next to each other and they are both\n * marked as `__collapsible`, this indicates to us that some kind of wall\n * Element was removed.\n *\n * These two collapsible paragraphs should then be merged into one.\n */\nexport function normalizeSiblingParagraphs(\n  editor: Editor,\n  entry: NodeEntry<Element>\n): boolean {\n  return normalizeSiblings(editor, entry, (a, b) => {\n    if (!isParagraph(a[0]) || !isParagraph(b[0])) return false\n    if (a[0].__collapsible && b[0].__collapsible) {\n      Transforms.removeNodes(editor, { at: a[1] })\n      return true\n    }\n    return false\n  })\n}\n","import { Editor, Element, Node, NodeEntry, Transforms } from \"slate\"\n\nimport { normalizeSiblings } from \"~/src/sink\"\n\nfunction isWall(editor: Editor, node: Node) {\n  if (!Element.isElement(node)) return false\n  return editor.isVoid(node) || editor.isMaster(node)\n}\n/**\n * We want to create collapsible paragraphs in places where we can't easily\n * create them. For example, between two images.\n *\n * Currently, we look for elements that are\n *\n * - `isVoid` like images or\n * - `isMaster` like `table` and `code-block`.\n *\n * If there is nothing between them, we insert a collapsible paragraph.\n */\n\nexport function normalizeSiblingWalls(\n  editor: Editor,\n  entry: NodeEntry<Element>\n): boolean {\n  if (!isWall(editor, entry[0])) return false\n  return normalizeSiblings(editor, entry, (a, b) => {\n    if (!isWall(editor, a[0]) || !isWall(editor, b[0])) return false\n    Transforms.insertNodes(\n      editor,\n      {\n        type: \"paragraph\",\n        __collapsible: true,\n        children: [{ text: \"\" }],\n      },\n      { at: b[1] }\n    )\n    return true\n  })\n}\n","import { Editor, Element, Node, NodeEntry } from \"slate\"\n\nimport { normalizeSiblingParagraphs } from \"./normalize-sibling-paragraphs\"\nimport { normalizeSiblingWalls } from \"./normalize-sibling-walls\"\n\nexport function normalizeNode(editor: Editor, entry: NodeEntry<Node>): boolean {\n  const [node, path] = entry\n  if (!Element.isElement(node)) return false\n  if (normalizeSiblingWalls(editor, [node, path])) return true\n  if (normalizeSiblingParagraphs(editor, [node, path])) return true\n  return false\n}\n","import styled from \"@emotion/styled\"\n\nexport const $Paragraph = styled(\"p\")`\n  padding: 0;\n  margin: 1em 0;\n  &:first-child {\n    margin-top: 0;\n  }\n\n  transition: background-color 200ms, margin-top 200ms, padding-top 200ms,\n    margin-bottom 200ms, padding-bottom 200ms, font-size 200ms;\n\n  &.--collapsible&.--empty {\n    font-size: 0.25em; /* font-size is collapsed to 1/4 of regular em */\n    margin: -4em 0; /* margin grows to 3/4 of regular em leaving space */\n    padding: 1em 0; /* this is kind of eye-balling it */\n    border-radius: 1em;\n    &:hover {\n      background: rgba(0, 127, 255, 0.1);\n      cursor: pointer;\n    }\n  }\n  &.--collapsible&.--empty&.--selected {\n    font-size: 1em;\n    padding: 0;\n    margin: 1em 0;\n    &:hover {\n      background: none;\n      cursor: default;\n    }\n    border-radius: 8px;\n  }\n`\n","import { Element, Node } from \"slate\"\n\n/**\n * We check for empty by checking for one node that contains a text that is\n * empty. If there is an inline element, this will introduce at a minimum\n * 3 nodes based on the way Slate normalizes to always have text nodes at\n * the end which is why this check works.\n */\nexport function getIsEmpty(element: Element) {\n  return (\n    element.children.length === 1 &&\n    Node.string(element.children[0]).length === 0\n  )\n}\n","import { clsx } from \"clsx\"\nimport { useSelected } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { ParagraphElement } from \"..\"\nimport { $Paragraph } from \"./styles\"\nimport { getIsEmpty } from \"./utils\"\n\nexport function Paragraph({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<ParagraphElement>) {\n  const selected = useSelected()\n  const isEmpty = getIsEmpty(element)\n  return (\n    <$Paragraph\n      {...attributes}\n      className={clsx({\n        \"--selected\": selected,\n        \"--empty\": isEmpty,\n        \"--collapsible\": !!element.__collapsible,\n      })}\n    >\n      {children}\n    </$Paragraph>\n  )\n}\n","import { Descendant, Editor } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createPlugin,\n  curryOne,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { normalizeNode } from \"./normalize-node\"\nimport { Paragraph } from \"./render-element/paragraph\"\n\nexport type CollapsibleParagraphEditor = {\n  collapsibleParagraph: {\n    convertParagraph: () => void\n  }\n}\n\nexport type ParagraphElement = {\n  type: \"paragraph\"\n  __collapsible?: true\n  children: Descendant[]\n}\n\nexport type CollapsibleParagraphPluginCustomTypes = {\n  Name: \"collapsible-paragraph\"\n  Editor: CollapsibleParagraphEditor\n  Element: ParagraphElement\n}\n\nexport const CollapsibleParagraphPlugin =\n  createPlugin<CollapsibleParagraphPluginCustomTypes>((editor) => {\n    const { insertBreak } = editor\n    editor.insertBreak = () => {\n      const { selection } = editor\n      if (selection && selection.anchor.path[0] === selection.focus.path[0]) {\n        // Get the current node's text\n        const text = Editor.string(editor, [selection.anchor.path[0]])\n\n        // Check if we're creating an empty line\n        if (text.match(/\\n$/) || text.match(/\\n\\n/)) {\n          // Create a new paragraph\n          insertBreak()\n        } else {\n          // Insert a single line break\n          editor.insertText('\\n')\n        }\n      } else {\n        // Otherwise fall back to default behavior\n        insertBreak()\n      }\n    }\n\n    editor.convertElement.addConvertElementType(\"paragraph\")\n    editor.collapsibleParagraph = {\n      convertParagraph: () => {\n        editor.convertElement.convertElements<ParagraphElement>(\n          () => false,\n          {\n            type: \"paragraph\",\n          },\n          false\n        )\n      },\n    }\n    if (!editor.normalizeAfterDelete) {\n      throw new Error(\n        `The collapsible-paragraph-plugin has a dependency on the normalize-after-delete plugin. Please add that plugin before this one.`\n      )\n    }\n\n    return {\n      name: \"collapsible-paragraph\",\n      editor: {\n        normalizeNode: curryOne(normalizeNode, editor),\n      },\n      editableProps: {\n        renderElement: ({ element, attributes, children }) => {\n          switch (element.type) {\n            case \"paragraph\": {\n              return (\n                <Paragraph element={element} attributes={attributes}>\n                  {children}\n                </Paragraph>\n              )\n            }\n          }\n        },\n        onKeyDown: createHotkeyHandler({\n          \"super+0\": editor.collapsibleParagraph.convertParagraph,\n        }),\n      },\n    }\n  }) as TypedPlugin<CollapsibleParagraphPluginCustomTypes>\n","import { Editor, Element } from \"slate\"\n\n/**\n * This method lets other plugins register specific elements by their `type`\n * being able to be toggled with a paragraph.\n *\n * In order for an Element to be toggle compatible, generally it should be a\n * non-void block Element whose direct descendants are `Text` or inline elements\n * like:\n *\n * - headings\n * - list items\n */\nexport function addConvertElementType(\n  editor: Editor,\n  type: Element[\"type\"] | Array<Element[\"type\"]>\n): void {\n  if (Array.isArray(type)) {\n    editor.convertElement.convertElementTypes.push(...type)\n  } else {\n    editor.convertElement.convertElementTypes.push(type)\n  }\n}\n","import { Editor, Element } from \"slate\"\n\nimport { rewrapElement, TargetElement } from \"~/src/sink\"\n\n/**\n * A type with generic for `convertElements` (below) to be used with the curry\n * method. TypeScript, unfortunately, cannot automatically curry generics for\n * us so we have to do it manually.\n */\nexport type CurriedConvertElements = <T extends Element = Element>(\n  matchForToggle: (element: Element) => boolean,\n  targetElement: TargetElement<T>,\n  allowToggle: boolean\n) => void\n\n/**\n * The `convertElements` takes a Block Element that has been identified as being\n * convertible and converts it into another type of Element.\n *\n * For example:\n *\n * - headings\n * - list items\n *\n * It also allows for toggling. In this scenario, if all the convertible\n * elements are already in the target state (e.g. we are converting to a heading\n * 2 and all the convertible elemtns are already a heading 2) then the elements\n * will convert back to a `paragraph` element.\n *\n * NOTE:\n *\n * Why is there an unusual signature?\n *\n * This method has a somewhat unusual and not-DRY signature which is in the form\n * of having a `matchForToggle` (which allows us to specify when an Element is\n * already matching the `targetElement`) and also an `allowToggle`; however, we\n * could make `matchForToggle` optional and only `allowToggle` if it is\n * specified.\n *\n * That being said, the signature is set up this way to reduce friction when\n * creating a specific convert function like `convertHeading`. In this scenario,\n * we can have the created `convertHeading` pass through the argument to\n * `allowToggle` and pass it through to this `convertElements` function making\n * that code easier to understand.\n */\nexport function convertElements<T extends Element = Element>(\n  editor: Editor,\n  matchForToggle: (element: Element) => boolean,\n  targetElement: TargetElement<T>,\n  allowToggle: boolean\n): boolean {\n  /**\n   * Find convertible elements\n   */\n  const entries = Array.from(\n    Editor.nodes<Element>(editor, {\n      match: (node) =>\n        Element.isElement(node) &&\n        editor.convertElement.isConvertibleElement(node),\n    })\n  )\n  /**\n   * If there aren't any convertible elements, there's nothing to do\n   */\n  if (entries.length === 0) return false\n\n  /**\n   * If `allowToggle` is `true` and all of the convertible elements match the\n   * `matchForToggle` (for example, if converting to a heading level 2, if all\n   * the matching convertible elements are heading level 2) then we want to\n   * toggle back to a paragraph.\n   */\n  const shouldToggle =\n    allowToggle && entries.every((entry) => matchForToggle(entry[0]))\n\n  if (shouldToggle) {\n    /**\n     * If all of the entries are already the target type, then revert them to\n     * a paragraph\n     */\n    Editor.withoutNormalizing(editor, () => {\n      for (const entry of entries) {\n        rewrapElement(editor, { type: \"paragraph\" }, entry[1])\n      }\n    })\n  } else {\n    /**\n     * If any of the entries aren't the target type, then convert them to the\n     * target type.\n     */\n    Editor.withoutNormalizing(editor, () => {\n      for (const entry of entries) {\n        rewrapElement(editor, targetElement, entry[1])\n      }\n    })\n  }\n  return true\n}\n","import { Editor, Element } from \"slate\"\n\n/**\n * Returns true if the passed in `element` object is an element type that has\n * previously been registered as a convertible element using the\n * `editor.convertElement.addConvertElementType` method.\n */\nexport function isConvertElement(editor: Editor, element: Element): boolean {\n  return editor.convertElement.convertElementTypes.includes(element.type)\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { addConvertElementType } from \"./add-convert-element-type\"\nimport { convertElements, CurriedConvertElements } from \"./convert-elements\"\nimport { isConvertElement } from \"./is-convert-element\"\n\nexport function createConvertElementMethods(editor: Editor) {\n  return {\n    convertElementTypes: [] as string[],\n    addConvertElementType: curryOne(addConvertElementType, editor),\n    isConvertibleElement: curryOne(isConvertElement, editor),\n    convertElements: curryOne(\n      convertElements,\n      editor\n    ) as CurriedConvertElements,\n  }\n}\n","import { createPlugin, TypedPlugin } from \"~/src/sink\"\n\nimport { createConvertElementMethods } from \"./methods\"\n\nexport type ConvertElementEditor = {\n  convertElement: ReturnType<typeof createConvertElementMethods>\n}\n\nexport type ConvertElementPluginCustomTypes = {\n  Name: \"convert-element\"\n  Editor: ConvertElementEditor\n}\n\nexport const ConvertElementPlugin =\n  createPlugin<ConvertElementPluginCustomTypes>((editor) => {\n    editor.convertElement = createConvertElementMethods(editor)\n    return {\n      name: \"convert-element\",\n    }\n  }) as TypedPlugin<ConvertElementPluginCustomTypes>\n","import { Editor, Path, Range, Transforms } from \"slate\"\n\nimport { findElementUp } from \"../sink\"\nimport { HeadingElement } from \"./types\"\n\nexport function insertBreak(editor: Editor) {\n  const entry = findElementUp<HeadingElement>(editor, \"heading\")\n  if (!entry) return false\n  if (!editor.selection) return false\n  if (Range.isExpanded(editor.selection)) return false\n  if (!Editor.isEnd(editor, editor.selection.anchor, entry[1])) return false\n  const nextPath = Path.next(entry[1])\n  Transforms.insertNodes(\n    editor,\n    { type: \"paragraph\", children: [{ text: \"\" }] },\n    { at: nextPath }\n  )\n  Transforms.select(editor, {\n    anchor: Editor.start(editor, nextPath),\n    focus: Editor.start(editor, nextPath),\n  })\n  return true\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { HeadingElement } from \"../types\"\n\nfunction convertHeading(\n  editor: Editor,\n  level: 1 | 2 | 3 | 4 | 5 | 6,\n  allowToggle: boolean\n) {\n  editor.convertElement.convertElements<HeadingElement>(\n    (element) => element.type === \"heading\" && element.level == level,\n    { type: \"heading\", level },\n    allowToggle\n  )\n}\n\nfunction isHeadingActive(editor: Editor, level: 1 | 2 | 3 | 4 | 5 | 6) {\n  const [match] = Editor.nodes(editor, {\n    match: n => {\n      return (\n        'type' in n &&\n        'level' in n &&\n        n.type === 'heading' &&\n        n.level === level\n      )\n    },\n  })\n  return !!match\n}\n\nexport function createHeadingMethods(editor: Editor) {\n  return {\n    convertHeading: curryOne(convertHeading, editor),\n    isHeadingActive: curryOne(isHeadingActive, editor),\n  }\n}\n","import { css } from \"@emotion/react\"\nimport styled from \"@emotion/styled\"\n\nconst headingStyles = css`\n  margin-top: 1em;\n  &:first-child {\n    margin-top: 0;\n  }\n  font-weight: bold;\n`\n\nexport const $H1 = styled(\"h1\")`\n  ${headingStyles}\n  font-size: 2.25em;\n  letter-spacing: -0.01em;\n`\n\nexport const $H2 = styled(\"h2\")`\n  ${headingStyles}\n  font-size: 1.5em;\n`\n\nexport const $H3 = styled(\"h3\")`\n  ${headingStyles}\n  font-size: 1.25em;\n`\n\nexport const $H4 = styled(\"h4\")`\n  ${headingStyles}\n  font-size: 1em;\n`\n\nexport const $H5 = styled(\"h5\")`\n  ${headingStyles}\n  font-size: 1em;\n`\n\nexport const $H6 = styled(\"h6\")`\n  ${headingStyles}\n  font-size: 1em;\n`\n","export * from \"./types\"\n\nimport {\n  createAutocompleteSpaceHandler,\n  createHotkeyHandler,\n  createPlugin,\n  curryOne,\n  curryTwo,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { insertBreak } from \"./insert-break\"\nimport { createHeadingMethods } from \"./methods\"\nimport { $H1, $H2, $H3, $H4, $H5, $H6 } from \"./styles\"\nimport { HeadingPluginCustomTypes } from \"./types\"\n\nexport const HeadingPlugin = createPlugin<HeadingPluginCustomTypes>(\n  (editor) => {\n    editor.convertElement.addConvertElementType(\"heading\")\n    editor.heading = createHeadingMethods(editor)\n    const hotkeyHandler = createHotkeyHandler({\n      \"super+1\": curryTwo(editor.heading.convertHeading, 1, true),\n      \"super+2\": curryTwo(editor.heading.convertHeading, 2, true),\n      \"super+3\": curryTwo(editor.heading.convertHeading, 3, true),\n      \"super+4\": curryTwo(editor.heading.convertHeading, 4, true),\n      \"super+5\": curryTwo(editor.heading.convertHeading, 5, true),\n      \"super+6\": curryTwo(editor.heading.convertHeading, 6, true),\n    })\n    const autocompleteHandler = createAutocompleteSpaceHandler(editor, {\n      \"#\": curryTwo(editor.heading.convertHeading, 1, false),\n      \"##\": curryTwo(editor.heading.convertHeading, 2, false),\n      \"###\": curryTwo(editor.heading.convertHeading, 3, false),\n      \"####\": curryTwo(editor.heading.convertHeading, 4, false),\n      \"#####\": curryTwo(editor.heading.convertHeading, 5, false),\n      \"######\": curryTwo(editor.heading.convertHeading, 6, false),\n    })\n    return {\n      name: \"heading\",\n      editor: {\n        insertBreak: curryOne(insertBreak, editor),\n      },\n      editableProps: {\n        renderElement: ({ element, attributes, children }) => {\n          if (element.type === \"heading\") {\n            switch (element.level) {\n              case 1:\n                return <$H1 {...attributes}>{children}</$H1>\n              case 2:\n                return <$H2 {...attributes}>{children}</$H2>\n              case 3:\n                return <$H3 {...attributes}>{children}</$H3>\n              case 4:\n                return <$H4 {...attributes}>{children}</$H4>\n              case 5:\n                return <$H5 {...attributes}>{children}</$H5>\n              case 6:\n                return <$H6 {...attributes}>{children}</$H6>\n              default:\n                throw new Error(\n                  `Expected element.level to be 1-6 but got ${element.level}`\n                )\n            }\n          }\n        },\n        onKeyDown: (e) => {\n          if (hotkeyHandler(e)) return true\n          if (autocompleteHandler(e)) return true\n          return false\n        },\n      },\n    }\n  }\n) as TypedPlugin<HeadingPluginCustomTypes>\n","import styled from \"@emotion/styled\"\n\nexport const $HorizontalRule = styled(\"hr\")`\n  position: relative;\n  height: 1em;\n  /* background-color: var(--hr-color); */\n  margin: 1em 0;\n  &::before {\n    position: absolute;\n    content: \"\";\n    left: 0.125em;\n    right: 0.125em;\n    top: 50%;\n    height: 1px;\n    background-color: var(--hr-color);\n    border-radius: 1px;\n  }\n  border-radius: 0.25em;\n  cursor: pointer;\n  border: none;\n  &:hover {\n    background-color: rgba(0, 127, 255, 0.1);\n    /* &::before {\n      outline: 2px solid var(--hover-color);\n    } */\n  }\n  &.--selected {\n    background: none;\n    &::before {\n      outline: 2px solid var(--select-color, blue);\n    }\n  }\n`\n","import { useSelected } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { HorizontalRuleElement } from \".\"\nimport { $HorizontalRule } from \"./styles\"\n\nexport function HorizontalRule({\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<HorizontalRuleElement>) {\n  const selected = useSelected()\n  return (\n    <div {...attributes} draggable>\n      {children}\n      <div contentEditable={false}>\n        <$HorizontalRule className={selected ? \"--selected\" : \"\"} />\n      </div>\n    </div>\n  )\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne, insertRootElement } from \"~/src/sink\"\n\nfunction insertHorizontalRule(editor: Editor) {\n  return insertRootElement(editor, {\n    type: \"horizontal-rule\",\n    children: [{ text: \"\" }],\n  })\n}\n\nexport function createHorizontalRuleMethods(editor: Editor) {\n  return {\n    insertHorizontalRule: curryOne(insertHorizontalRule, editor),\n  }\n}\n","import { createHotkeyHandler, createPlugin, TypedPlugin } from \"~/src/sink\"\n\nimport { HorizontalRule } from \"./horizontal-rule\"\nimport { createHorizontalRuleMethods } from \"./methods\"\nimport { HorizontalRulePluginCustomTypes } from \"./types\"\nexport * from \"./types\"\n\nexport const HorizontalRulePlugin =\n  createPlugin<HorizontalRulePluginCustomTypes>(\n    (editor, _options, { createPolicy }) => {\n      editor.horizontalRule = createHorizontalRuleMethods(editor)\n      return createPolicy({\n        name: \"horizontal-rule\",\n        editor: {\n          isVoid(element) {\n            if (element.type === \"horizontal-rule\") return true\n          },\n        },\n        editableProps: {\n          renderElement: (props) => {\n            if (props.element.type === \"horizontal-rule\") {\n              return <HorizontalRule {...props} />\n            }\n          },\n          onKeyDown: createHotkeyHandler({\n            \"super+-\": editor.horizontalRule.insertHorizontalRule,\n          }),\n        },\n      })\n    }\n  ) as TypedPlugin<HorizontalRulePluginCustomTypes>\n","import { Editor } from \"slate\"\n\nimport {\n  OrderedListItemElement,\n  TaskListItemElement,\n  UnorderedListItemElement,\n} from \"..\"\n\nexport function convertOrderedList(editor: Editor, allowToggle: boolean) {\n  return editor.convertElement.convertElements<OrderedListItemElement>(\n    (element) => element.type === \"ordered-list-item\",\n    (element) => {\n      return {\n        type: \"ordered-list-item\",\n        depth: \"depth\" in element ? element.depth : 0,\n      }\n    },\n    allowToggle\n  )\n}\n\nexport function convertTaskList(editor: Editor, allowToggle: boolean) {\n  return editor.convertElement.convertElements<TaskListItemElement>(\n    (element) => element.type === \"task-list-item\",\n    (element) => {\n      return {\n        type: \"task-list-item\",\n        checked: \"checked\" in element ? element.checked : false,\n        depth: \"depth\" in element ? element.depth : 0,\n      }\n    },\n    allowToggle\n  )\n}\n\nexport function convertUnorderedList(editor: Editor, allowToggle: boolean) {\n  return editor.convertElement.convertElements<UnorderedListItemElement>(\n    (element) => element.type === \"unordered-list-item\",\n    (element) => {\n      return {\n        type: \"unordered-list-item\",\n        depth: \"depth\" in element ? element.depth : 0,\n      }\n    },\n    allowToggle\n  )\n}\n","import { Editor, Element } from \"slate\"\nimport { findElementUp, isStartOfElement } from \"~/src/sink\"\nimport { isListItem } from \"..\"\nimport { ListItemElement } from \"../types\"\n\nconst MAX_DEPTH = 2\n\nexport function getListDepth(editor: Editor): number {\n  const listItem = findElementUp<ListItemElement>(editor, isListItem)\n  if (!listItem) return 0\n  return listItem[0].depth\n}\n\nexport function canIncreaseDepth(editor: Editor): boolean {\n  if (!isStartOfElement(editor, isListItem)) return false\n  const depth = getListDepth(editor)\n  return depth < MAX_DEPTH\n}\n\nexport function canDecreaseDepth(editor: Editor): boolean {\n  if (!isStartOfElement(editor, isListItem)) return false\n  const depth = getListDepth(editor)\n  return depth > 0\n}\n\nexport function increaseDepth(editor: Editor): void {\n  if (!canIncreaseDepth(editor)) return\n  editor.list.indent()\n}\n\nexport function decreaseDepth(editor: Editor): void {\n  if (!canDecreaseDepth(editor)) return\n  editor.list.outdent()\n}\n","import { Editor } from \"slate\"\n\nimport { setNodesDynamic } from \"~/src/sink\"\n\nimport { isListItem, ListItemElement } from \"..\"\n\nexport function indent(editor: Editor) {\n  return setNodesDynamic<ListItemElement>(\n    editor,\n    (node) => ({ depth: node.depth + 1 }),\n    {\n      match: isListItem,\n    }\n  )\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { findElementUp, rewrapElement } from \"~/src/sink\"\n\nimport { isListItem } from \"..\"\nimport { ListItemElement } from \"../types\"\n\nexport function insertBreak(editor: Editor): boolean {\n  const entry = findElementUp<ListItemElement>(editor, isListItem)\n  if (!entry) return false\n  const [element, path] = entry\n\n  /**\n   * If we're in an empty list\n   */\n  if (Editor.isEmpty(editor, element)) {\n    if (element.depth > 0) {\n      /**\n       * If it's indented, then unindent it\n       */\n      Transforms.setNodes(editor, { depth: element.depth - 1 }, { at: path })\n      return true\n    } else {\n      /**\n       * If it's fully unindented, turn it into a paragraph\n       */\n      rewrapElement(editor, { type: \"paragraph\" }, path)\n      return true\n    }\n  }\n  /**\n   * Otherwise perform default insertBreak transform\n   */\n  Transforms.splitNodes(editor, { always: true })\n  /**\n   * Then find the list item we are now in\n   */\n  const nextEntry = findElementUp<ListItemElement>(editor, isListItem)\n  if (!nextEntry) return true\n  /**\n   * And if it's a checked task list that is checked, we want to uncheck it.\n   * New list items are by default always unchecked.\n   */\n  if (nextEntry[0].type === \"task-list-item\" && nextEntry[0].checked === true) {\n    Transforms.setNodes(editor, { checked: false }, { at: nextEntry[1] })\n  }\n  return true\n}\n","import { Editor } from \"slate\"\n\nimport { setNodesDynamic } from \"~/src/sink\"\n\nimport { isListItem, ListItemElement } from \"..\"\n\nexport function outdent(editor: Editor): boolean {\n  const entries = Array.from(\n    Editor.nodes<ListItemElement>(editor, {\n      match: isListItem,\n    })\n  )\n  /**\n   * Don't allow `shift+tab` if any of the list items are already at a\n   * depth of `0`\n   */\n  for (const entry of entries) {\n    if (entry[0].depth === 0) return true\n  }\n  return setNodesDynamic<ListItemElement>(\n    editor,\n    (node) => ({ depth: Math.max(0, node.depth - 1) }),\n    {\n      match: isListItem,\n    }\n  )\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt, findElementUp } from \"~/src/sink\"\n\nimport { TaskListItemElement } from \"../types\"\n\nexport function toggleTaskListItem(\n  editor: Editor,\n  { at = editor.selection }: { at?: BetterAt } = {}\n) {\n  const taskListItem = findElementUp<TaskListItemElement>(\n    editor,\n    \"task-list-item\",\n    { at }\n  )\n  if (!taskListItem) return false\n  const nextChecked = !taskListItem[0].checked\n  Transforms.setNodes<TaskListItemElement>(\n    editor,\n    { checked: nextChecked },\n    { at: taskListItem[1] }\n  )\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport {\n  convertOrderedList,\n  convertTaskList,\n  convertUnorderedList,\n} from \"./convert-list-item\"\nimport {\n  getListDepth,\n  canIncreaseDepth,\n  canDecreaseDepth,\n  increaseDepth,\n  decreaseDepth,\n} from \"./depth\"\nimport { indent } from \"./indent\"\nimport { insertBreak } from \"./insert-break\"\nimport { outdent } from \"./outdent\"\nimport { toggleTaskListItem } from \"./toggleTaskListItem\"\n\nexport function createListMethods(editor: Editor) {\n  return {\n    indent: curryOne(indent, editor),\n    outdent: curryOne(outdent, editor),\n    convertUnorderedList: curryOne(convertUnorderedList, editor),\n    convertOrderedList: curryOne(convertOrderedList, editor),\n    convertTaskList: curryOne(convertTaskList, editor),\n    insertBreak: curryOne(insertBreak, editor),\n    toggleTaskListItem: curryOne(toggleTaskListItem, editor),\n    getListDepth: curryOne(getListDepth, editor),\n    canIncreaseDepth: curryOne(canIncreaseDepth, editor),\n    canDecreaseDepth: curryOne(canDecreaseDepth, editor),\n    increaseDepth: curryOne(increaseDepth, editor),\n    decreaseDepth: curryOne(decreaseDepth, editor),\n  }\n}\n","import { Editor, Element, Node, NodeEntry, Transforms } from \"slate\"\n\nimport { createIsElementType, normalizeSiblings } from \"~/src/sink\"\n\nimport { isListItem, OrderedListItemElement } from \"..\"\n\nconst isOrderedListItem = createIsElementType<OrderedListItemElement>([\n  \"ordered-list-item\",\n])\n\n/**\n * Makes sure that when a list item is deeper than a preceding one, that we\n * reset the counter.\n *\n * How it works:\n *\n * If we have any two list item siblings where the second sibling is an\n * `ordered-list-item`, then the second sibling should have the property\n * `_firstOfType` be `true` if the depth of the second sibling is higher or\n * the previous sibling is not an ordered list item (e.g. a paragraph or a\n * bullet)\n *\n * Why we need it:\n *\n * We need to do this manually because our implementation of lists does not\n * actually nest lists within lists. We took the approach because the cost\n * of actually nesting lists is very high in terms of added complexity. It is\n * much easier to manually reset the counters than it is to implement\n * everything to W3C specifications, especially given that from a UI\n * perspective, users expect lists to behave similar to paragraphs and\n * headings.\n */\n\nexport function normalizeOrderedFirstAtDepth(\n  editor: Editor,\n  entry: NodeEntry<Node>\n): boolean {\n  const [node, path] = entry\n  if (!Element.isElement(node)) return false\n  return normalizeSiblings<Element>(editor, [node, path], (a, b) => {\n    /**\n     * If the second item (the item we are actually looking at) is not an\n     * ordered list item, then we aren't interested.\n     */\n    if (!isOrderedListItem(b[0])) return false\n    /**\n     * The second item is an ordered-list-item. If the item before it is not\n     * or the second item is deeper than the first, then we want to set\n     * `__firstAtDepth` to `true`.\n     */\n    // For non-list items, treat them as depth 0\n    const __firstAtDepth = isOrderedListItem(a[0]) ? b[0].depth > a[0].depth : isListItem(a[0]) ? b[0].depth > a[0].depth : true\n    /**\n     * Check if the setting is already correct.\n     */\n    if (b[0].__firstAtDepth !== __firstAtDepth) {\n      Transforms.setNodes(editor, { __firstAtDepth }, { at: b[1] })\n      return true\n    }\n    return false\n  })\n}\n","import { Editor, Node, NodeEntry } from \"slate\"\n\nimport { isListItem } from \"..\"\nimport { normalizeOrderedFirstAtDepth } from \"./normalize-ordered-first-at-depth\"\nexport * from \"./normalize-ordered-first-at-depth\"\n\nexport function normalizeNode(editor: Editor, entry: NodeEntry<Node>): boolean {\n  const [node] = entry\n  /**\n   * Short circuit return if current entry isn't any type of list item element.\n   */\n  if (!isListItem(node)) return false\n  return normalizeOrderedFirstAtDepth(editor, entry)\n}\n","import { clsx } from \"clsx\"\nimport { useEffect } from \"react\"\nimport { ReactEditor, useSlateStatic } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { normalizeOrderedFirstAtDepth } from \"../normalize-node\"\nimport { OrderedListItemElement as OrderedListItemElement } from \"../types\"\nimport { $OrderedListItem } from \"./styles\"\n\nexport function OrderedListItem({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<OrderedListItemElement>) {\n  const editor = useSlateStatic()\n  useEffect(() => {\n    const path = ReactEditor.findPath(editor, element)\n    normalizeOrderedFirstAtDepth(editor, [element, path])\n  }, [])\n  const style = {\n    \"--list-item-depth\": element.depth,\n    \"--list-item-var\": `list-item-depth-${element.depth}`,\n  } as React.CSSProperties\n  const className = clsx({ \"--first-at-depth\": element.__firstAtDepth })\n  return (\n    <$OrderedListItem {...attributes} className={className} style={style}>\n      {children}\n    </$OrderedListItem>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nimport { isDebug } from \"~/src/sink\"\n\nconst $ListItem = styled(\"li\")`\n  margin-top: 0.5em;\n  margin-bottom: 0.5em;\n  list-style-position: outside;\n  margin-left: calc(2em + var(--list-item-depth) * 2em);\n`\n\nexport const $UnorderedListItem = styled($ListItem)`\n  position: relative;\n  list-style-type: none;\n  .--list-item-icon {\n    position: absolute;\n    top: 0.25em;\n    left: -1.375em;\n    line-height: 1.5em;\n    color: var(--shade-600);\n  }\n`\n\nexport const $OrderedListItem = styled($ListItem)`\n  position: relative;\n  list-style-type: none;\n  counter-increment: var(--list-item-var);\n\n  &.--first-at-depth {\n    counter-reset: var(--list-item-var);\n    /**\n     * if isDebug is true, then show a highlight on list items that are marked\n     * as the first at a given depth.\n     */\n    background: ${isDebug ? \"rgba(0, 255, 0, 0.2)\" : \"inherit\"};\n  }\n\n  &:before {\n    position: absolute;\n    content: counter(var(--list-item-var)) \".\";\n    top: 0;\n    left: -2em;\n    width: 1.5em;\n    text-align: right;\n    color: var(--shade-500);\n    /* force numbers to be monospaced for better alignment */\n    font-variant-numeric: tabular-nums;\n  }\n`\n\nexport const $TaskListItem = styled($ListItem)`\n  position: relative;\n  list-style-type: none;\n  .--list-item-icon {\n    position: absolute;\n    top: 0.25em;\n    left: -1.5em;\n    line-height: 1.5em;\n    color: var(--shade-300);\n    .--checkmark {\n      color: green;\n      stroke-width: 3px;\n    }\n  }\n`\n","import { useCallback } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { TaskListItemElement } from \"../types\"\nimport { CheckedIcon, UncheckedIcon } from \"./list-icons\"\nimport { $TaskListItem } from \"./styles\"\n\nexport function TaskListItem({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<TaskListItemElement>) {\n  const editor = useSlateStatic()\n  const toggle = useCallback(() => {\n    editor.list.toggleTaskListItem({ at: element })\n  }, [editor, element])\n\n  const style = { \"--list-item-depth\": element.depth } as React.CSSProperties\n  return (\n    <$TaskListItem {...attributes} style={style}>\n      <div className=\"--list-item-icon\" contentEditable={false}>\n        {element.checked ? (\n          <CheckedIcon onClick={toggle} style={{ cursor: \"pointer\" }} />\n        ) : (\n          <UncheckedIcon onClick={toggle} style={{ cursor: \"pointer\" }} />\n        )}\n      </div>\n      {children}\n    </$TaskListItem>\n  )\n}\n","import * as React from \"react\"\nimport { SVGProps } from \"react\"\n\n/**\n * https://tabler-icons.io/\n */\nexport const UncheckedIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"1em\"\n    height=\"1em\"\n    strokeWidth={2}\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  >\n    <path d=\"M0 0h24v24H0z\" stroke=\"none\" />\n    <rect x={4} y={4} width={16} height={16} rx={2} />\n  </svg>\n)\n\n/**\n * https://tabler-icons.io/\n */\nexport const CheckedIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"icon icon-tabler icon-tabler-checkbox\"\n    width=\"1em\"\n    height=\"1em\"\n    strokeWidth={2}\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    viewBox=\"0 0 24 24\"\n    {...props}\n  >\n    <path d=\"M0 0h24v24H0z\" stroke=\"none\" />\n    <path d=\"m9 11 3 3 8-8\" className=\"--checkmark\" />\n    <path d=\"M20 12v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h9\" />\n  </svg>\n)\n\n/**\n * Modified viewfinder-circle from https://heroicons.com/\n */\nexport const BulletIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    width=\"1em\"\n    height=\"1em\"\n    {...props}\n  >\n    <path d=\"M12 8.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5z\" />\n  </svg>\n)\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { UnorderedListItemElement } from \"../types\"\nimport { BulletIcon } from \"./list-icons\"\nimport { $UnorderedListItem } from \"./styles\"\n\nexport function UnorderedListItem({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<UnorderedListItemElement>) {\n  const style = { \"--list-item-depth\": element.depth } as React.CSSProperties\n  return (\n    <$UnorderedListItem {...attributes} style={style}>\n      <div className=\"--list-item-icon\" contentEditable={false}>\n        <BulletIcon />\n      </div>\n      {children}\n    </$UnorderedListItem>\n  )\n}\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { ListItemElement } from \"../types\"\nimport { OrderedListItem } from \"./ordered-list-item\"\nimport { TaskListItem } from \"./task-list-item\"\nimport { UnorderedListItem } from \"./unordered-list-item\"\n\nexport function renderElement({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<ListItemElement>) {\n  switch (element.type) {\n    case \"ordered-list-item\":\n      return (\n        <OrderedListItem element={element} attributes={attributes}>\n          {children}\n        </OrderedListItem>\n      )\n    case \"unordered-list-item\":\n      return (\n        <UnorderedListItem element={element} attributes={attributes}>\n          {children}\n        </UnorderedListItem>\n      )\n    case \"task-list-item\":\n      return (\n        <TaskListItem element={element} attributes={attributes}>\n          {children}\n        </TaskListItem>\n      )\n  }\n}\n","import { Editor, Path } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createIsElementType,\n  createPlugin,\n  curryOne,\n  findElementUp,\n  isStartOfElement,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { createListMethods } from \"./methods\"\nimport { normalizeNode } from \"./normalize-node\"\nimport { renderElement } from \"./render-element\"\nimport { ListItemElement, ListPluginCustomTypes } from \"./types\"\n\nexport * from \"./types\"\n\nexport const LIST_ITEM_TYPES: ListItemElement[\"type\"][] = [\n  \"unordered-list-item\",\n  \"ordered-list-item\",\n  \"task-list-item\",\n]\n\nexport const isListItem = createIsElementType<ListItemElement>(LIST_ITEM_TYPES)\n\nexport const ListPlugin = createPlugin<ListPluginCustomTypes>(\n  (editor, _options, { createPolicy }) => {\n    editor.convertElement.addConvertElementType(LIST_ITEM_TYPES)\n    const list = (editor.list = createListMethods(editor))\n    const hotkeyHandler = createHotkeyHandler({\n      tab: list.indent,\n      \"shift+tab\": list.outdent,\n      \"super+7\": curryOne(list.convertOrderedList, true),\n      \"super+8\": curryOne(list.convertUnorderedList, true),\n      \"super+9\": curryOne(list.convertTaskList, true),\n    })\n\n    return createPolicy({\n      name: \"list\",\n      editor: {\n        normalizeNode: (entry) => normalizeNode(editor, entry),\n        insertBreak: list.insertBreak,\n        deleteBackward: (unit) => {\n          /**\n           * This handles the logic where if the cursor is at the start of a\n           * list item, and the user presses backspace, then the list item\n           * should be converted to a paragraph if there are no list items\n           * before it. If there is a list item before it, then the normal\n           * delete behavior which would merge the list items together will\n           * occur.\n           */\n          if (unit !== \"character\") return false\n          if (!isStartOfElement(editor, isListItem)) return false\n          const listItem = findElementUp<ListItemElement>(editor, isListItem)\n          if (!listItem) return false\n          const listItemPath = listItem[1]\n          /**\n           * If the current list item is the first element in the document,\n           * convert it to a paragraph.\n           */\n          if (!Path.hasPrevious(listItemPath)) {\n            editor.collapsibleParagraph.convertParagraph()\n            return true\n          }\n          const prevElementPath = Path.previous(listItemPath)\n          const prevElementEntry = Editor.node(editor, prevElementPath)\n          if (isListItem(prevElementEntry[0])) return false\n          /**\n           * If the previous element is not a list item, then convert the\n           * current list item to a paragraph.\n           */\n          editor.collapsibleParagraph.convertParagraph()\n          return true\n        },\n      },\n      editableProps: {\n        renderElement,\n        onKeyDown(e) {\n          if (!Editor.nodes(editor, { match: isListItem })) return false\n          return hotkeyHandler(e)\n        },\n      },\n    })\n  }\n) as TypedPlugin<ListPluginCustomTypes>\n","import { Editor, Location, Text, Transforms } from \"slate\"\n\n/**\n * Toggles a mark.\n *\n * Certain marks may not be able to co-exist with another mark. For example,\n * superscript and subscript cannot be applied at the same time. In these\n * cases, you can provide a final argument of `unsetKey` that when the mark\n * is toggled on, the `unsetKey` mark is toggled off automatically. When the\n * mark is toggled off, it will ignore the `unsetKey`\n */\n\nexport function removeMarks(\n  editor: Editor,\n  { at = editor.selection }: { at?: Location | null } = {}\n) {\n  if (at == null) return\n  const nodeEntries = [\n    ...Editor.nodes(editor, {\n      match: (n) => Text.isText(n),\n      at,\n    }),\n  ]\n  const setter: Record<string, null> = {}\n  for (const [node] of nodeEntries) {\n    for (const key of Object.keys(node)) {\n      if (key === \"text\") continue\n      setter[key] = null\n    }\n  }\n  Transforms.setNodes(editor, setter, {\n    match: (n) => Text.isText(n),\n    split: true,\n    at,\n  })\n}\n","import { Editor, Location, Point, Range, Text, Transforms } from \"slate\"\n\n/**\n * Toggles a mark.\n *\n * Certain marks may not be able to co-exist with another mark. For example,\n * superscript and subscript cannot be applied at the same time. In these\n * cases, you can provide a final argument of `unsetKey` that when the mark\n * is toggled on, the `unsetKey` mark is toggled off automatically. When the\n * mark is toggled off, it will ignore the `unsetKey`\n */\n\nexport function toggleMark(\n  editor: Editor,\n  markKey: keyof Text,\n  unsetKey?: keyof Text,\n  { at = editor.selection }: { at?: Location | null } = {}\n) {\n  if (at == null) return\n\n  // Check if selection is at end of line\n  const point = Range.isRange(at as any) ? (at as Range).focus : at\n  const isAtLineEnd = Point.isPoint(point) && (\n    Editor.after(editor, point) === null || \n    Editor.isEnd(editor, point, Editor.end(editor, []))\n  )\n\n  const validMarkKey = markKey as 'bold' | 'italic' | 'underline' | 'strike'\n  const marks = Editor.marks(editor) || {}\n  const isActive = marks[validMarkKey] === true\n\n  // Store mark state for next insert if at line end\n  if (isAtLineEnd) {\n    if (!isActive) {\n      // Turning mark on\n      editor.activeMarks = {\n        ...editor.activeMarks,\n        [validMarkKey]: true\n      }\n    } else {\n      // Turning mark off\n      const { [validMarkKey]: _, ...remainingMarks } = editor.activeMarks || {}\n      editor.activeMarks = remainingMarks\n    }\n  }\n\n  // Toggle mark in current selection\n  if (isActive) {\n    Editor.removeMark(editor, validMarkKey)\n  } else {\n    Editor.addMark(editor, validMarkKey, true)\n  }\n\n  // Handle unset key if provided\n  if (typeof unsetKey === \"string\") {\n    Editor.removeMark(editor, unsetKey)\n  }\n}\n","import { Editor } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { removeMarks } from \"./removeMarks\"\nimport { toggleMark } from \"./toggle-mark\"\n\nexport function createMarksMethods(editor: Editor) {\n  return {\n    removeMarks: curryOne(removeMarks, editor),\n    toggleMark: curryOne(toggleMark, editor),\n    toggleBold: () => toggleMark(editor, \"bold\"),\n    toggleItalic: () => toggleMark(editor, \"italic\"),\n    toggleUnderline: () => toggleMark(editor, \"underline\"),\n    toggleStrike: () => toggleMark(editor, \"strike\"),\n  }\n}\n","import styled from \"@emotion/styled\"\n\nexport const $MarksSpan = styled(\"span\")`\n  &.--bold {\n    font-weight: bold;\n  }\n  &.--italic {\n    font-style: italic;\n  }\n  &.--underline {\n    text-decoration: underline;\n  }\n  &.--strike {\n    text-decoration: line-through;\n  }\n  /**\n   * Text decorations don't merge automatically so we make a special one\n   * when there is both an underline and a strike through.\n   */\n  &.--underline.--strike {\n    text-decoration: underline line-through;\n  }\n`\n","import { clsx } from \"clsx\"\nimport { Editor, Point, Range } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createPlugin,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { createMarksMethods } from \"./methods\"\nimport { $MarksSpan } from \"./styles\"\n\nexport type MarksEditor = {\n  /**\n   * IMPORTANT:\n   *\n   * This cannot be named `marks` because it conflicts with the `editor.marks`\n   * built into the BaseEditor.j\n   */\n  marksPlugin: ReturnType<typeof createMarksMethods>\n  activeMarks?: {\n    bold?: boolean\n    italic?: boolean\n    underline?: boolean\n    strike?: boolean\n  }\n}\n\nexport type MarksText = {\n  text: string\n  bold?: true\n  italic?: true\n  underline?: true\n  strike?: true\n}\n\nexport type MarksPluginCustomTypes = {\n  Name: \"marks\"\n  Editor: MarksEditor\n  Text: MarksText\n}\n\nexport const MarksPlugin = createPlugin<MarksPluginCustomTypes>((editor) => {\n  editor.marksPlugin = createMarksMethods(editor)\n  editor.activeMarks = {}\n  const hotkeyHandler = createHotkeyHandler({\n    \"mod+b\": editor.marksPlugin.toggleBold,\n    \"mod+i\": editor.marksPlugin.toggleItalic,\n    \"mod+u\": editor.marksPlugin.toggleUnderline,\n    \"super+0\": editor.marksPlugin.removeMarks,\n    \"super+k\": editor.marksPlugin.toggleStrike,\n  })\n  // Override insertText to apply active marks\n  const { insertText: defaultInsertText } = editor\n  editor.insertText = (text) => {\n    if (editor.activeMarks && Object.keys(editor.activeMarks).length > 0) {\n      const { activeMarks } = editor\n      // Apply marks before inserting text\n      Object.entries(activeMarks).forEach(([mark, isActive]) => {\n        if (isActive) {\n          editor.addMark(mark, true)\n        }\n      })\n    }\n    defaultInsertText(text)\n  }\n\n  // Override removeMarks to clear activeMarks at line end\n  const { removeMarks } = editor.marksPlugin\n  editor.marksPlugin.removeMarks = () => {\n    removeMarks()\n    if (editor.selection) {\n      const point = Range.isRange(editor.selection as any) ? (editor.selection as Range).focus : editor.selection\n      if (Point.isPoint(point)) {\n        const isAtLineEnd = Editor.after(editor, point) === null ||\n          Editor.isEnd(editor, point, Editor.end(editor, []))\n        if (isAtLineEnd) {\n          editor.activeMarks = {}\n        }\n      }\n    }\n  }\n\n  return {\n    name: \"marks\",\n    editableProps: {\n      renderLeaf: ({ leaf, children }) => {\n        return (\n          <$MarksSpan\n            className={clsx({\n              \"--bold\": leaf.bold,\n              \"--italic\": leaf.italic,\n              \"--underline\": leaf.underline,\n              \"--strike\": leaf.strike,\n            })}\n          >\n            {children}\n          </$MarksSpan>\n        )\n      },\n      onKeyDown: (e) => {\n        if (hotkeyHandler(e)) return true\n        // if (\n        //   autocompleteMarker(editor, e, {\n        //     triggerMarker: \"`\",\n        //     regexp: /([`])(\\S.*?)([`])$/,\n        //     mark: \"code\",\n        //   })\n        // ) {\n        //   return true\n        // }\n        // if (\n        //   autocompleteMarker(editor, e, {\n        //     triggerMarker: \"*\",\n        //     regexp: /([*])(.+?)([*])$/,\n        //     mark: \"italic\",\n        //   })\n        // ) {\n        //   return true\n        // }\n        return false\n      },\n    },\n  }\n}) as TypedPlugin<MarksPluginCustomTypes>\n\n// function autocompleteMarker(\n//   editor: Editor,\n//   e: React.KeyboardEvent<HTMLDivElement>,\n//   {\n//     triggerMarker,\n//     regexp,\n//     mark,\n//   }: { triggerMarker: string; regexp: RegExp; mark: keyof Text }\n// ): boolean {\n//   /**\n//    * Make sure theere is a selection and it's collapsed\n//    */\n//   console.log(\n//     { triggerMarker, mark },\n//     e.key,\n//     e.which,\n//     toKeyCode(\"*\"),\n//     toKeyName(\"*\"),\n//     isHotkey(\"*\", { byKey: true })(e.nativeEvent)\n//   )\n//   if (editor.selection === null) return false\n//   if (Range.isExpanded(editor.selection)) return false\n//   /**\n//    * WHAT I'M WORKING ON:\n//    *\n//    * So, basically, `is-hotkey` doesn't work with an asterisk. We need to find\n//    * an alternate way of testing but it's a little tricky and there are a few\n//    * approaches we can take:\n//    *\n//    * - The first approach is to write our own key checker, but be careful\n//    *   because we want to make sure we aren't interception hotkeys with modifier\n//    *   keys for example. Like CMD+OPTION+8 should not trigger the `*` trigger.\n//    *\n//    * - NOTE: tested and paste does not trigger insertText. The second approach\n//    *   is to tie into `insertText` instead. This may be a more reliable method\n//    *   but we also need to at least think about whether insertText gets\n//    *   triggered during a paste event, for example, and if it does, that would\n//    *   be weird to have that suddenly bold some text.\n//    *\n//    */\n//   // if (isHotkey(triggerMarker, e.nativeEvent)) {\n//   if (isHotkey(triggerMarker, e.nativeEvent)) {\n//     console.log(\"triggered\")\n//     stopEvent(e)\n//     const markerText = triggerMarker\n//     Transforms.insertText(editor, markerText)\n//     const { selection } = editor\n\n//     /**\n//      * Make sure we are in a block that is not void.\n//      */\n//     const blockEntry = findElementUp(\n//       editor,\n//       (node) =>\n//         Element.isElement(node) &&\n//         !Editor.isVoid(editor, node) &&\n//         Editor.isBlock(editor, node)\n//     )\n//     if (blockEntry == null) return true\n\n//     /**\n//      * Grab all the text from the beginning of the block until now\n//      */\n//     const range = {\n//       anchor: Editor.start(editor, blockEntry[1]),\n//       focus: selection.focus,\n//     }\n//     const text = Editor.string(editor, range)\n\n//     /**\n//      * See if the text matches our pattern\n//      */\n//     const match = text.match(regexp)\n//     if (match == null) return true\n//     if (match.length !== 4)\n//       throw new Error(\n//         `Expected the RegExp to have 3 grouped subexpressions but returned ${\n//           match.length - 1\n//         }`\n//       )\n\n//     /**\n//      * Delete the closing markers\n//      */\n//     const closingMarkersRange = getRangeBackwards(\n//       editor,\n//       editor.selection.focus,\n//       match[3].length\n//     )\n//     Transforms.delete(editor, { at: closingMarkersRange })\n\n//     /**\n//      * Delete the opening markers\n//      */\n//     const openingMarkersRange = getRangeBackwards(\n//       editor,\n//       editor.selection.focus,\n//       match[2].length + match[3].length,\n//       match[2].length\n//     )\n//     Transforms.delete(editor, { at: openingMarkersRange })\n\n//     /**\n//      * Create a range that represents the selected text\n//      */\n//     const matchRange = getRangeBackwards(\n//       editor,\n//       editor.selection.focus,\n//       match[2].length\n//     )\n\n//     /**\n//      * Feels like `withoutMerging` should work but if we undo twice after this,\n//      * causes a crash.\n//      *\n//      * This looks like a good solution that isn't in main\n//      * https://github.com/ianstormtaylor/slate/issues/3874\n//      *\n//      * NOTE:\n//      *\n//      * Manually calling `editor.onChange()` won't work\n//      *\n//      * An appropriate starting point for searching more in issues\n//      * https://github.com/ianstormtaylor/slate/issues?q=is%3Aissue+withoutMerging+is%3Aclosed\n//      */\n//     editor.marksPlugin.toggleMark(mark, undefined, { at: matchRange })\n\n//     return true\n//   }\n//   return false\n// }\n\n// function getRangeBackwards(\n//   editor: Editor,\n//   point: Point,\n//   startDistance: number,\n//   endDistance?: number\n// ) {\n//   const startPoint = Editor.before(editor, point, {\n//     unit: \"character\",\n//     distance: startDistance,\n//   })\n//   const endPoint =\n//     endDistance === undefined\n//       ? point\n//       : Editor.before(editor, point, {\n//           unit: \"character\",\n//           distance: endDistance,\n//         })\n//   if (!startPoint)\n//     throw new Error(\n//       `startPoint not found. The distance backward from the point may be invalid.`\n//     )\n//   if (!endPoint)\n//     throw new Error(\n//       `endPoint not found. The distance backward from the point may be invalid.`\n//     )\n//   return {\n//     anchor: startPoint,\n//     focus: endPoint,\n//   }\n// }\n","import { Editor, Point } from \"slate\"\n\nimport { createPlugin, forceNormalizePath, TypedPlugin } from \"~/src/sink\"\n\nexport type NormalizeAfterDeleteEditor = {\n  normalizeAfterDelete: true\n}\n\nexport type NormalizeAfterDeletePluginCustomTypes = {\n  Name: \"normalize-after-delete\"\n  Editor: NormalizeAfterDeleteEditor\n}\n\nfunction forceNormalizeNearestElement(editor: Editor) {\n  if (!editor.selection) return\n  const entry = Editor.parent(editor, editor.selection)\n  forceNormalizePath(editor, entry[1])\n}\n\n/**\n * The purpose of this plugin is to have the Slate normalizer execute when an\n * Element is deleted. When text is deleted, the normalizer executes properly\n * but if an entire element is deleted, Slate behaves as if no normalization\n * is required.\n *\n * This fails us in a few normalization scenarios:\n *\n * - The normalizer needs to run when a sibling (previous or next) changes.\n * - The normalizer needs to run when a child is removed\n *\n * The plugin takes a few steps to make things more efficient. Namely, it only\n * executes a normalization if we are deleting backwards and we are at the\n * start of an element, or deleting forwards and we are at the end of an\n * Element. If neither of these are true, the delete will cause a normalzation\n * on its own because the text will have changed.\n */\nexport const NormalizeAfterDeletePlugin =\n  createPlugin<NormalizeAfterDeletePluginCustomTypes>((editor) => {\n    editor.normalizeAfterDelete = true\n    return {\n      name: \"normalize-after-delete\",\n      editor: {\n        deleteBackward() {\n          if (!editor.selection) return false\n          const entry = Editor.parent(editor, editor.selection)\n          const isStart = Point.equals(\n            Editor.start(editor, entry[1]),\n            editor.selection.anchor\n          )\n          if (!isStart) return false\n          return function () {\n            forceNormalizeNearestElement(editor)\n          }\n        },\n        deleteForward() {\n          if (!editor.selection) return false\n          const entry = Editor.parent(editor, editor.selection)\n          const isEnd = Point.equals(\n            Editor.end(editor, entry[1]),\n            editor.selection.anchor\n          )\n          if (!isEnd) return false\n          return function () {\n            forceNormalizeNearestElement(editor)\n          }\n        },\n      },\n      editableProps: {},\n    }\n  }) as TypedPlugin<NormalizeAfterDeletePluginCustomTypes>\n","import { BasePoint, Editor, Path, Range } from \"slate\"\n\nimport { findElementUpPath } from \"~/src/sink\"\n\nexport function getReversedDeleteSafeRanges(\n  editor: Editor,\n  deleteRange: Range,\n  protectedTypes: string[]\n): Range[] {\n  /**\n   * Editor.positions returns a bunch of positions which essentially represent\n   * the start and end of Nodes with the exception of the start of the passed\n   * in Range and the end of the passed in Range.\n   */\n  const positions = [...Editor.positions(editor, { at: deleteRange })]\n\n  /**\n   * We create our own set of deleteSafeRanges here\n   */\n  const deleteSafeRanges: Range[] = []\n\n  let startPos: BasePoint, prevPos: BasePoint, startTdPath: Path | undefined\n  startPos = prevPos = positions[0]\n  startTdPath = findElementUpPath(editor, protectedTypes, {\n    at: startPos,\n  })\n\n  for (const pos of positions) {\n    const tdPath = findElementUpPath(editor, protectedTypes, {\n      at: pos,\n    })\n    /**\n     * What we're looking for is that if we search for a protectedType from\n     * this point, and the protectedType is the same as the prvious point we\n     * looked at, then keep going.\n     *\n     * We keep track of the `prevPos` though because when we are in a different\n     * protectedType (or switch to not being in one) then we need the `prevPos`\n     */\n    if (\n      (startTdPath && tdPath && Path.equals(startTdPath, tdPath)) ||\n      (startTdPath == undefined && tdPath == undefined)\n    ) {\n      prevPos = pos\n    } else {\n      /**\n       * Once we see a difference (i.e. a new protectedType or we switch to\n       * being or not being in a protectedType) then we create a Range and\n       * add it to `deleteSafeRanges`.\n       *\n       * We also reset some of our variables that we are tracking.\n       */\n      const range = { anchor: startPos, focus: prevPos }\n      deleteSafeRanges.push(range)\n      startPos = prevPos = pos\n      startTdPath = tdPath\n    }\n  }\n  const range = { anchor: startPos, focus: prevPos }\n  deleteSafeRanges.push(range)\n  deleteSafeRanges.reverse()\n  return deleteSafeRanges\n}\n","import { Editor, Path, Transforms } from \"slate\"\n\nimport { findElementUpPath } from \"~/src/sink\"\n\nimport { getReversedDeleteSafeRanges } from \"./get-reversed-delete-safe-ranges\"\n\n/**\n * This is a special version of deleteFragment that respects elements of the\n * given `protectedTypes` so that they aren't deleted whole and only their\n * children are deleted.\n *\n * This is used in cases like a `table-cell` where we want to protect the\n * shape of the `table`.\n *\n * If the start or end of the deletion range isn't in a protectedType, we don't\n * need to anything special so we let the default delete handle it.\n *\n * If the start or end of the deletion range is in a protectedType but it is\n * the same Element, then the default handler works fine too.\n *\n * In other cases, we break down the full deletion range into multiple ranges.\n * Each range won't go across a protectedType. In effect, this means that we\n * only delete the content of protectedTypes and we do the regular deletes\n * across everything else.\n */\nexport function deleteFragmentWithProtectedTypes(\n  editor: Editor,\n  protectedTypes: string[]\n) {\n  if (editor.selection == null) return false\n  const [start, end] = Editor.edges(editor, editor.selection)\n  const startProtectedPath = findElementUpPath(editor, protectedTypes, {\n    at: start,\n  })\n  const endProtectedPath = findElementUpPath(editor, protectedTypes, {\n    at: end,\n  })\n  /**\n   * If the start or the end of the selection isn't in a protectedType element\n   * then just do a normal delete so we return `false`.\n   */\n  if (!startProtectedPath && !endProtectedPath) {\n    return false\n  }\n\n  /**\n   * If the start and end are in the same protectedType element, then the\n   * default handler works fine so return `false`\n   */\n  if (\n    startProtectedPath &&\n    endProtectedPath &&\n    Path.equals(startProtectedPath, endProtectedPath)\n  ) {\n    return false\n  }\n\n  /**\n   * Breaks the range to delete into chunks of ranges that are safe to delete.\n   * We do this by not allowing a deletion across one of the `protectedTypes`\n   */\n  const reversedRanges = getReversedDeleteSafeRanges(\n    editor,\n    editor.selection,\n    protectedTypes\n  )\n\n  /**\n   * We iterate through the ranges backwards deleting each delete safe range.\n   * At the end, we collapse the originally selected deletion range to the\n   * front.\n   *\n   * NOTE:\n   *\n   * Ideally, we'd actually collapse this to the start or end depending on the\n   * direction of the delete; however, that information is not presently\n   * provided to us. Might be a small improvement in the future that requires\n   * us to update Slate.\n   */\n  Editor.withoutNormalizing(editor, () => {\n    for (const range of reversedRanges) {\n      Transforms.delete(editor, { at: range })\n    }\n    Transforms.collapse(editor, { edge: \"start\" })\n  })\n\n  return true\n}\n","import { Editor, Element, Location, Path } from \"slate\"\n\nimport { findElementUp } from \"~/src/sink\"\n\nimport {\n  TableCellElement,\n  TableColumn,\n  TableElement,\n  TableRowElement,\n} from \"../types\"\n\n/**\n * The TableInfo object that includes quick access information starting from a\n * cell in a table including information about the row and the table.\n *\n * NOTE:\n *\n * This is flat and not nested because it makes destructuring easier, for\n * example, in the table methods.\n */\nexport type TableInfo = {\n  tableElement: TableElement\n  tablePath: Path\n  tableColumns: TableColumn[]\n  rowElement: TableRowElement\n  rowPath: Path\n  rowIndex: number\n  rowCount: number\n  cellElement: TableCellElement\n  cellPath: Path\n  cellIndex: number\n  cellCount: number\n}\n\n/**\n * get table info\n */\n\nexport function getTableInfo(\n  editor: Editor,\n  { at = editor.selection }: { at?: Location | Element | null } = {}\n): TableInfo | undefined {\n  if (at == null) return undefined\n  const cellMatch = findElementUp<TableCellElement>(editor, \"table-cell\", {\n    at,\n  })\n  if (!cellMatch) return undefined\n  const rowMatch = findElementUp<TableRowElement>(editor, \"table-row\", {\n    at,\n  })\n  if (!rowMatch) return undefined\n  const tableMatch = findElementUp<TableElement>(editor, \"table\", { at })\n  if (!tableMatch) return undefined\n  const [tableElement, tablePath] = tableMatch\n  const [rowElement, rowPath] = rowMatch\n  const [cellElement, cellPath] = cellMatch\n  return {\n    tableElement,\n    tablePath,\n    tableColumns: tableElement.columns,\n    rowElement,\n    rowPath,\n    rowIndex: rowPath.slice(-1)[0],\n    rowCount: tableElement.children.length,\n    cellElement,\n    cellPath,\n    cellIndex: cellPath.slice(-1)[0],\n    cellCount: rowElement.children.length,\n  }\n}\n","import { TableCellElement, TableContentElement } from \"../types\"\n\nexport function createCell(\n  index: number,\n  children: TableContentElement[] = [\n    {\n      type: \"table-content\",\n      children: [{ text: \"\" }],\n    },\n  ]\n): TableCellElement {\n  return {\n    type: \"table-cell\",\n    children,\n  }\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt } from \"~/src/sink\"\n\nimport { getTableInfo } from \"./get-table-info\"\nimport { createCell } from \"./utils\"\n\nexport function insertColumn(\n  editor: Editor,\n  { offset = 0, at = editor.selection }: { offset?: 0 | 1; at?: BetterAt } = {}\n): boolean {\n  const t = getTableInfo(editor, { at })\n  if (t === undefined) return false\n  const { tableElement, tablePath, cellIndex } = t\n  const nextCellIndex = cellIndex + offset\n  Editor.withoutNormalizing(editor, () => {\n    const { columns } = tableElement\n    const nextColumns = [...columns]\n    /**\n     * Insert a Column into `TableElement.columns` which is the same as the\n     * value of the current column. This is the `alignment` of the column.\n     */\n    nextColumns.splice(nextCellIndex, 0, columns[nextCellIndex])\n    Transforms.setNodes(editor, { columns: nextColumns }, { at: tablePath })\n\n    /**\n     * Insert a `TableCell` at the correct spot.\n     */\n    tableElement.children.forEach((rowElement, i) => {\n      Transforms.insertNodes(editor, createCell(nextCellIndex), {\n        at: [...tablePath, i, nextCellIndex],\n      })\n    })\n  })\n  return true\n}\n\n// export function insertColumnLeft(\n//   editor: Editor,\n//   { at }: { at?: MatchAt } = {}\n// ) {\n//   return insertColumn(editor, { at })\n// }\n\n// export function insertColumnRight(\n//   editor: Editor,\n//   { at }: { at?: MatchAt } = {}\n// ) {\n//   return insertColumn(editor, { at, offset: 1 })\n// }\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt } from \"~/src/sink\"\n\nimport { TableRowElement } from \"../types\"\nimport { getTableInfo } from \"./get-table-info\"\nimport { createCell } from \"./utils\"\n\nfunction createRow(columnCount: number): TableRowElement {\n  return {\n    type: \"table-row\",\n    children: [...Array(columnCount).keys()].map((index) => createCell(index)),\n  }\n}\n\n/**\n * Used internally for `insertRowAbove` and `insertRowBelow` to do an insert\n * with an offset to improve code reused.\n */\nexport function insertRow(\n  editor: Editor,\n  { at = editor.selection, offset = 0 }: { at?: BetterAt; offset?: 0 | 1 } = {}\n): boolean {\n  const t = getTableInfo(editor, { at })\n  if (!t) return false\n  const nextRowElement = createRow(t.tableElement.columns.length)\n  Transforms.insertNodes(editor, nextRowElement, {\n    at: [...t.tablePath, t.rowIndex + offset],\n  })\n  return true\n}\n\n/**\n * Insert row above current selection\n */\nexport function insertRowAbove(\n  editor: Editor,\n  { at }: { at?: BetterAt } = {}\n): boolean {\n  return insertRow(editor, { at })\n}\n\n/**\n * Insert row below current selection\n */\nexport function insertRowBelow(\n  editor: Editor,\n  { at }: { at?: BetterAt } = {}\n): boolean {\n  return insertRow(editor, { at, offset: 1 })\n}\n","import { Editor, Element, Location, Path, Transforms } from \"slate\"\n\nimport { findElementUp } from \"~/src/sink\"\n\nimport { TableColumn, TableElement, TableRowElement } from \"../types\"\nimport { createCell } from \"./utils\"\n\nfunction createRange(size: number): number[] {\n  return [...Array(size).keys()]\n}\n\nfunction createColumns(columnCount: number): TableColumn[] {\n  return createRange(columnCount).map(() => ({ align: \"left\" }))\n}\n\nfunction createTable(columnCount: number, rowCount: number): TableElement {\n  return {\n    type: \"table\",\n    columns: createColumns(columnCount),\n    children: createRange(rowCount).map(() => createRow(columnCount)),\n  }\n}\n\nfunction createRow(columnCount: number): TableRowElement {\n  return {\n    type: \"table-row\",\n    children: [...Array(columnCount).keys()].map((index) => createCell(index)),\n  }\n}\n\n/**\n * Used internally for `insertRowAbove` and `insertRowBelow` to do an insert\n * with an offset to improve code reused.\n */\nexport function insertTable(\n  editor: Editor,\n  columnCount: number,\n  rowCount: number,\n  { at = editor.selection }: { at?: Location | null } = {}\n): boolean {\n  const table = createTable(columnCount, rowCount)\n  return insertRootElement(editor, table, { at })\n}\n\nexport function insertRootElement(\n  editor: Editor,\n  element: Element,\n  { at = editor.selection }: { at?: Location | null } = {}\n) {\n  if (at == null) return false\n  const entry = findElementUp(\n    editor,\n    (node) => Element.isElement(node) && editor.isMaster(node)\n  )\n  if (entry == null) {\n    const selection = editor.selection\n    Editor.withoutNormalizing(editor, () => {\n      Transforms.insertNodes(editor, element, { at })\n      if (selection) {\n        Transforms.select(editor, selection)\n        Transforms.move(editor)\n      }\n    })\n  } else {\n    const nextPath = Path.next(entry[1])\n    Editor.withoutNormalizing(editor, () => {\n      Transforms.insertNodes(editor, element, { at: nextPath })\n      Transforms.select(editor, Editor.start(editor, nextPath))\n    })\n  }\n  return true\n}\n","import { Editor, Path } from \"slate\"\n\nimport { selectEndOfElement, selectStartOfElement } from \"~/src/sink\"\n\nimport { TableInfo } from \"../get-table-info\"\n\nexport function selectElementBelow(editor: Editor, t: TableInfo) {\n  const { cellIndex, rowIndex, rowCount, tablePath } = t\n  /**\n   * if we aren't in the last row of a table, move down a row\n   */\n  if (rowIndex < rowCount - 1) {\n    selectStartOfElement(editor, [...tablePath, rowIndex + 1, cellIndex])\n    return true\n  }\n  /**\n   * If we are in the last row of a table, move to the start of the Element\n   * after the table\n   */\n  try {\n    selectStartOfElement(editor, Path.next(tablePath))\n    return true\n  } catch (e) {\n    return false\n  }\n}\n\nexport function selectElementAbove(editor: Editor, t: TableInfo) {\n  const { cellIndex, rowIndex, tablePath } = t\n  /**\n   * if we aren't in the first row of a table, move up a row\n   */\n  if (rowIndex > 0) {\n    selectStartOfElement(editor, [...tablePath, rowIndex - 1, cellIndex])\n    return true\n  }\n  /**\n   * If we are in the first row of a table, move to the end of the Element\n   * before the table\n   */\n  try {\n    selectEndOfElement(editor, Path.previous(tablePath))\n    return true\n  } catch (e) {\n    return false\n  }\n}\n","import { Descendant, Editor, Element } from \"slate\"\nimport { ReactEditor } from \"slate-react\"\n\n/**\n * This is named with `...Unreliable...` because at the beginning of a line\n * (e.g. the second line of a paragraph) the DOMRect returned will be for a\n * position at the end of the previous line.\n *\n * So why have an unreliable version? Because, there actually is no reliable\n * version and the unreliable one works in most cases. It's better than not\n * having an unreliable selection rect.\n *\n * So it's useful, but we need to handle the case where it's on the end of the\n * previous line instead of the beginning of the line.\n *\n * NOTE:\n *\n * Inserting a `span` and removing it does not work. We can kind of getting it\n * to work by inserting a span with some with (like has the letter \"A\") inside.\n * It will then sometimes switch the problem so that the DOMRect return is on\n * the next line instead of the previous; however, makes the cursor move into\n * the wrong position when cursoring down the right side and this is worse than\n * the problem is solves.\n */\nexport function getUnreliableSelectionRect(): DOMRect | null {\n  const s = window.getSelection()\n  if (!s) return null\n  const range = s.getRangeAt(0)\n  return range.getBoundingClientRect()\n}\n\n/**\n * Takes a Slate Element and returns a DOMRect representing the Element as\n * it is in the DOM.\n */\nfunction getElementRect(editor: Editor, element: Descendant) {\n  return ReactEditor.toDOMNode(editor, element).getBoundingClientRect()\n}\n\nexport function checkIsInElement(editor: Editor, element: Element): boolean {\n  /**\n   * Get the unreliable selection rect. If there is no selection, we consider\n   * that the selection is not in the last line which will usually indicates\n   * default behavior.\n   */\n  const selectionRect = getUnreliableSelectionRect()\n  if (!selectionRect) return false\n  const elementRect = getElementRect(editor, element)\n  return (\n    selectionRect.right < elementRect.right &&\n    selectionRect.left > elementRect.left &&\n    selectionRect.bottom < elementRect.bottom &&\n    selectionRect.top > elementRect.top\n  )\n}\n","import { Editor } from \"slate\"\n\nimport { getTableInfo } from \"../get-table-info\"\nimport { selectElementAbove, selectElementBelow } from \"./select-element\"\nimport { checkIsInElement } from \"./utils\"\n\n/**\n * arrow down\n */\nexport function down(editor: Editor): boolean {\n  const t = getTableInfo(editor)\n  /**\n   * don't handle if we're not in a table\n   */\n  if (!t) return false\n  setTimeout(() => {\n    if (!checkIsInElement(editor, t.cellElement)) {\n      selectElementBelow(editor, t)\n    }\n  })\n  return false\n}\n\n/**\n * arrow up\n */\nexport function up(editor: Editor): boolean {\n  const t = getTableInfo(editor)\n  /**\n   * don't handle if we're not in a table\n   */\n  if (!t) return false\n  setTimeout(() => {\n    if (!checkIsInElement(editor, t.cellElement)) {\n      selectElementAbove(editor, t)\n    }\n  })\n  return false\n}\n","import { Editor, Transforms } from \"slate\"\n\nexport function removeTable(editor: Editor): boolean {\n  const t = editor.tablePlugin.getTableInfo()\n  if (t === undefined) return false\n  Transforms.removeNodes(editor, { at: t.tablePath })\n  return true\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt } from \"~/src/sink\"\n\nimport { getTableInfo } from \"./get-table-info\"\nimport { removeTable } from \"./remove-table\"\n\nexport function removeColumn(\n  editor: Editor,\n  { at = editor.selection }: { at?: BetterAt } = {}\n) {\n  const t = getTableInfo(editor, { at })\n  if (!t) return false\n\n  const { tableElement, tablePath, rowIndex, cellIndex, cellCount } = t\n  if (cellCount === 1) {\n    return removeTable(editor)\n  }\n  Editor.withoutNormalizing(editor, () => {\n    // Set the new `align` value based on the current `td` column (not the position\n    // to insert at)\n    const columns = [...tableElement.columns]\n    columns.splice(cellIndex, 1)\n    Transforms.setNodes(editor, { columns }, { at: tablePath })\n    tableElement.children.forEach((rowElement, rowIndex) => {\n      Transforms.removeNodes(editor, {\n        at: [...tablePath, rowIndex, cellIndex],\n      })\n    })\n    const selection = Editor.start(editor, [\n      ...tablePath,\n      rowIndex,\n      Math.min(cellIndex, cellCount - 2),\n    ])\n    Transforms.select(editor, selection)\n  })\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt } from \"~/src/sink\"\n\nimport { getTableInfo } from \"./get-table-info\"\nimport { removeTable } from \"./remove-table\"\n\nexport function removeRow(\n  editor: Editor,\n  { at = editor.selection }: { at?: BetterAt } = {}\n) {\n  const t = getTableInfo(editor, { at })\n  if (t === undefined) return false\n  if (t.rowCount === 1) {\n    removeTable(editor)\n    return true\n  }\n  Editor.withoutNormalizing(editor, () => {\n    Transforms.removeNodes(editor, { at: t.rowPath })\n    Transforms.select(\n      editor,\n      Editor.start(editor, [\n        ...t.tablePath,\n        Math.min(t.rowIndex, t.rowCount - 2),\n        t.cellIndex,\n      ])\n    )\n  })\n  return true\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { getTableInfo } from \"./get-table-info\"\n\nexport function setTableColumnAlign(\n  editor: Editor,\n  options: { align: \"left\" | \"center\" | \"right\" }\n) {\n  const t = getTableInfo(editor)\n  if (t === undefined) return false\n  const { tableElement, tablePath, cellIndex } = t\n  const nextColumns = tableElement.columns.slice()\n  nextColumns.splice(cellIndex, 1, { align: options.align })\n  Transforms.setNodes(editor, { columns: nextColumns }, { at: tablePath })\n  return true\n}\n","import { Editor } from \"slate\"\n\nimport { selectStartOfElement } from \"~/src/sink\"\n\nimport { getTableInfo } from \"./get-table-info\"\nimport { insertRowBelow } from \"./insert-row\"\nexport function tabForward(editor: Editor) {\n  const t = getTableInfo(editor)\n  if (!t) return false\n\n  const { cellIndex, cellCount, rowIndex, rowCount, tablePath } = t\n\n  /**\n   * If we aren't in the last cell of the row, then select the next cell\n   */\n  if (cellIndex < cellCount - 1) {\n    selectStartOfElement(editor, [...tablePath, rowIndex, cellIndex + 1])\n    return true\n  }\n\n  /**\n   * If we are in the last cell of the row but we aren't in the last row of\n   * the table, then select the first cell in the next row.\n   */\n  if (rowIndex < rowCount - 1) {\n    selectStartOfElement(editor, [...tablePath, rowIndex + 1, 0])\n    return true\n  }\n\n  /**\n   * If we are in the last cell of the table, insert a new row and then\n   * select the first cell in the new row.\n   */\n  insertRowBelow(editor)\n  selectStartOfElement(editor, [...tablePath, rowIndex + 1, 0])\n\n  return true\n}\n\nexport function tabBackward(editor: Editor) {\n  const t = getTableInfo(editor)\n  if (!t) return false\n\n  const { cellIndex, cellCount, rowIndex, tablePath } = t\n\n  if (cellIndex > 0) {\n    selectStartOfElement(editor, [...tablePath, rowIndex, cellIndex - 1])\n    return true\n  }\n\n  if (rowIndex > 0) {\n    selectStartOfElement(editor, [...tablePath, rowIndex - 1, cellCount - 1])\n    return true\n  }\n}\n","import { Editor, Transforms } from \"slate\"\n\nimport { BetterAt, curryOne } from \"~/src/sink\"\n\nimport { getTableInfo } from \"./get-table-info\"\nimport { insertColumn } from \"./insert-column\"\nimport { insertRow } from \"./insert-row\"\nimport { insertTable } from \"./insert-table\"\nimport { down, up } from \"./navigation\"\nimport { removeColumn } from \"./remove-column\"\nimport { removeRow } from \"./remove-row\"\nimport { removeTable } from \"./remove-table\"\nimport { setTableColumnAlign } from \"./setTableColumnAlign\"\nimport { tabBackward, tabForward } from \"./tab\"\n\nexport function createTableMethods(editor: Editor) {\n  return {\n    getTableInfo: curryOne(getTableInfo, editor),\n    insertTable: curryOne(insertTable, editor),\n    insertColumn: curryOne(insertColumn, editor),\n    insertRow: curryOne(insertRow, editor),\n    removeTable: curryOne(removeTable, editor),\n    removeColumn: curryOne(removeColumn, editor),\n    removeRow: curryOne(removeRow, editor),\n    tabForward: curryOne(tabForward, editor),\n    tabBackward: curryOne(tabBackward, editor),\n    selectCell: curryOne(selectCell, editor),\n    down: curryOne(down, editor),\n    up: curryOne(up, editor),\n    setTableColumnAlign: curryOne(setTableColumnAlign, editor),\n  }\n}\n\nfunction selectCell(\n  editor: Editor,\n  { at = editor.selection }: { at?: BetterAt } = {}\n) {\n  const t = getTableInfo(editor, { at })\n  if (t === undefined) return false\n  const { cellPath } = t\n  Transforms.select(editor, cellPath)\n  return true\n}\n","import { Editor, NodeEntry, Transforms } from \"slate\"\n\nimport { TableElement } from \"../types\"\n\nexport function normalizeTableIndexes(\n  editor: Editor,\n  entry: NodeEntry<TableElement>\n): boolean {\n  let isTransformed = false\n  const rowElements = entry[0].children\n  rowElements.forEach((rowElement, y) => {\n    const cellElements = rowElement.children\n    cellElements.forEach((cellElement, x) => {\n      if (cellElement.x !== x || cellElement.y !== y) {\n        Transforms.setNodes(editor, { x, y }, { at: [...entry[1], y, x] })\n        isTransformed = true\n      }\n    })\n  })\n  return isTransformed\n}\n","import { Editor, NodeEntry, Transforms } from \"slate\"\n\nimport { TableCellElement } from \"../types\"\n\nexport function normalizeTableCell(\n  editor: Editor,\n  entry: NodeEntry<TableCellElement>\n): boolean {\n  const [node, path] = entry\n  if (node.children.length === 1 && node.children[0].type === \"table-content\") {\n    return false\n  }\n  Editor.withoutNormalizing(editor, () => {\n    /**\n     * This ensures that the first child node of a `table-cell`\n     * is a `table-content` node. It won't be if a user pastes\n     * in the start of a `table-cell`.\n     *\n     * We want this because our algorithm will merge all following\n     * nodes into this node. If we don't do this, we are merging\n     * into a potentially non `table-content` cell and might end up\n     * with some other `Element` like a `code-block`.\n     *\n     * NOTE:\n     *\n     * In order to make sure this doesn't turn into a noop, we add\n     * some text here. It is arbitrarily an `X`.\n     */\n    Transforms.insertNodes(\n      editor,\n      {\n        type: \"table-content\",\n        children: [{ text: \"X\" }],\n      },\n      { at: [...entry[1], 0] }\n    )\n    /**\n     * We then iterate from the back of the children to the front\n     * and merging left. Because we inserted an extra node, the\n     * for loop looks a little unusual in that `i` starts at\n     * `node.children.length` instead of `node.children.length - 1`.\n     */\n    for (let i = node.children.length; i >= 0; i--) {\n      Transforms.mergeNodes(editor, { at: [...path, i] })\n    }\n    /**\n     * When we're done, we remove the `X`.\n     *\n     * There might be a cleaner way to do this whout adding and\n     * removing the `X` and when we find it, we can improve this\n     * code.\n     *\n     * IMPORTANT:\n     *\n     * Whatever a replacement is, remember that we need to execute\n     * the commands such that it preserves the cursor position.\n     */\n    Transforms.delete(editor, {\n      at: { path: [...path, 0, 0], offset: 0 },\n      unit: \"character\",\n    })\n  })\n  return true\n}\n","import { useEffect } from \"react\"\nimport { ReactEditor, useSelected, useSlateStatic } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { normalizeTableIndexes } from \"../normalize/normalize-table\"\nimport { TableElement } from \"../types\"\nimport { $Table } from \"./styles\"\nimport { TableContext } from \"./table-context\"\n\nexport function Table({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<TableElement>) {\n  const editor = useSlateStatic()\n  const isSelected = useSelected()\n  /**\n   * The first time we render a table, we make sure it is normalized.\n   * When it comes out of an `initialValue` it's not guaranteed to include\n   * `x` and `y` properties as they are optional.\n   *\n   * This mainly helps us not have to manually add these values when the\n   * `x` and `y` are purely an internal requirement for rendering.\n   */\n  useEffect(() => {\n    const path = ReactEditor.findPath(editor, element)\n    normalizeTableIndexes(editor, [element, path])\n  }, [])\n  return (\n    <TableContext.Provider value={{ isSelected }}>\n      <$Table {...attributes} columns={element.columns}>\n        <tbody>{children}</tbody>\n      </$Table>\n    </TableContext.Provider>\n  )\n}\n","import styled from \"@emotion/styled\"\n\n/**\n * Table Menu\n */\n\nconst $BaseMenu = styled(\"div\")`\n  position: absolute;\n  /**\n   * very slightly shaded\n   */\n  background: rgba(0, 0, 0, 0.001);\n\n  /**\n   * hover \n   */\n  &:hover {\n    /**\n     * needs to pop up so that it doesn't jump back and forth with neighbor\n     * below\n     */\n    z-index: 1000;\n    /**\n     * Makes the visible tile get darker on hover over any part of the\n     * menu including the invisible part\n     */\n    .--tile {\n      background: rgba(0, 0, 0, 0.15);\n    }\n  }\n`\n\nexport const $ColumnMenu = styled($BaseMenu)`\n  cursor: pointer;\n  /**\n   * hangs out on top\n   */\n  left: -1px;\n  right: -1px;\n  right: 0;\n  height: 3em;\n  top: -3em;\n`\n\nexport const $RowMenu = styled($BaseMenu)`\n  /**\n   * hangs out on left\n   */\n  top: -1px;\n  bottom: -1px;\n  width: 3em;\n  left: -3em;\n`\n\n/**\n * Menu Tile\n */\n\nconst $MenuTile = styled(\"div\")`\n  position: absolute;\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  transition: all 200ms;\n  /**\n   * NOTE: One of these should be overridden\n   */\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`\n\n/**\n * The `$RowMenuTile` is the visible part of the `$RowMenu` and is the right\n * half of the `$RowMenu`.\n */\nexport const $ColumnMenuTile = styled($MenuTile)`\n  top: 50%;\n  border-bottom: none;\n  border-right: none;\n  bottom: 1px;\n  td:first-of-type & {\n    border-top-left-radius: 0.5em;\n  }\n  td:last-of-type & {\n    border-top-right-radius: 0.5em;\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n    right: -1px;\n  }\n  svg {\n    position: absolute;\n    top: 0.1875em;\n    left: 50%;\n    margin-left: -0.5em;\n    color: rgba(0, 0, 0, 0.2);\n  }\n  &:hover svg {\n    color: rgba(0, 0, 0, 0.5);\n  }\n\n  /* border-top-left-radius: 0.5em;\n  border-top-right-radius: 0.5em; */\n`\n\n/**\n * The `$RowMenuTile` is the visible part of the `$RowMenu` and is the right\n * half of the `$RowMenu`.\n */\nexport const $RowMenuTile = styled($MenuTile)`\n  left: 50%;\n  border-right: none;\n  border-bottom: none;\n  right: 1px;\n  tr:first-of-type & {\n    border-top-left-radius: 0.5em;\n  }\n  tr:last-of-type & {\n    border-bottom-left-radius: 0.5em;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n    bottom: 0;\n  }\n  svg {\n    position: absolute;\n    left: 0.25em;\n    top: 50%;\n    margin-top: -0.5em;\n    color: rgba(0, 0, 0, 0.2);\n  }\n  &:hover svg {\n    color: rgba(0, 0, 0, 0.5);\n  }\n\n  /* border-top-left-radius: 0.5em;\n  border-bottom-left-radius: 0.5em; */\n`\n\n/**\n * Menu Button\n */\n\nconst $MenuButton = styled(\"div\")`\n  position: absolute;\n  font-size: 1.5em;\n  background: white;\n  border-radius: 50%;\n  cursor: pointer;\n  svg {\n    display: block;\n  }\n`\n\nexport const $AddMenuButton = styled($MenuButton)`\n  color: #c0c0c0;\n  &:hover {\n    color: royalblue;\n  }\n`\n\nexport const $RemoveMenuButton = styled($MenuButton)`\n  color: #c0c0c0;\n  &:hover {\n    color: firebrick;\n  }\n`\n","import styled from \"@emotion/styled\"\n\nimport { TableColumn } from \"../../types\"\nexport * from \"./table-menu-styles\"\n\n/**\n * Table\n */\nexport const $Table = styled(\"table\")<{ columns: TableColumn[] }>`\n  border-collapse: collapse;\n  margin: 1em 0;\n  ${({ columns }) =>\n    columns\n      .map(\n        (column, index) =>\n          `td:nth-of-type(${index + 1}) { text-align: ${column.align}; }`\n      )\n      .join(\"\\n\")}\n`\n\n/**\n * Table Row\n */\nexport const $TableRow = styled(\"tr\")`\n  position: relative;\n  &:first-of-type {\n    background: var(--table-head-bgcolor);\n  }\n`\n\n/**\n * Table Cell\n *\n * - `--selected` indicates selected cell\n */\nexport const $TableCell = styled(\"td\")`\n  position: relative;\n  border-width: 1px;\n  border-style: solid;\n  border-color: rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.05);\n  border-color: var(--table-row-border-color) var(--table-column-border-color);\n  padding: 0.75em 1em;\n  min-width: 2em;\n  &.--selected {\n    outline: 2px solid var(--select-color, blue);\n  }\n  /**\n   * Stronger borders on the left and right edge\n   */\n  &:first-of-type {\n    border-left-color: var(--table-border-color);\n  }\n  &:last-of-type {\n    border-right-color: var(--table-border-color);\n  }\n`\n\n/**\n * Table Content (inside Table Cell)\n */\nexport const $TableContent = styled(\"div\")`\n  /**\n   * Smaller font inside a table than outside of it\n   */\n  font-size: 0.9375em; /* 15px */\n  /**\n   * Even smaller font and dimmer for the heading row\n   */\n  tr:first-of-type & {\n    color: rgba(0, 0, 0, 0.6);\n    font-size: 0.875em; /* 14px */\n  }\n`\n","import { createContext } from \"react\"\n\nexport const TableContext = createContext<{ isSelected: boolean }>({\n  isSelected: false,\n})\n","import { useContext } from \"react\"\nimport { useSelected } from \"slate-react\"\n\nimport { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { TableCellElement } from \"../../types\"\nimport { $TableCell } from \"../styles\"\nimport { TableContext } from \"../table-context\"\nimport { ColumnMenu } from \"./column-menu\"\nimport { RowMenu } from \"./row-menu\"\nimport { TableMenu } from \"./table-menu\"\n\nexport function TableCell({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<TableCellElement>) {\n  const tableContext = useContext(TableContext)\n  const selected = useSelected()\n  /**\n   * table has slection and we are in the top left cell\n   */\n  const showTableMenu =\n    tableContext.isSelected && element.x === 0 && element.y === 0\n  /**\n   * table has selection and we are in the left columns\n   */\n  const showRowMenu = tableContext.isSelected && element.x === 0\n  /**\n   * table has selection and we are in the top row\n   */\n  const showColumnMenu = tableContext.isSelected && element.y === 0\n  return (\n    <$TableCell\n      className={selected ? \"--selected\" : \"\"}\n      {...attributes}\n      data-x={element.x}\n      data-y={element.y}\n    >\n      {children}\n      {showTableMenu ? <TableMenu /> : null}\n      {showRowMenu ? <RowMenu cellElement={element} /> : null}\n      {showColumnMenu ? <ColumnMenu cellElement={element} /> : null}\n    </$TableCell>\n  )\n}\n","import React, { useCallback, useRef, useState } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { Menu, MenuItemData } from \"~/src/shared-overlays\"\nimport { useLayer } from \"~/src/use-layer\"\n\nimport {\n  AlignCenter,\n  AlignLeft,\n  AlignRight,\n  BarsIcon,\n  MinusIcon,\n  PlusIcon,\n} from \"../../../icons\"\nimport { TableCellElement } from \"../../../types\"\nimport {\n  $AddMenuButton,\n  $ColumnMenu,\n  $ColumnMenuTile,\n  $RemoveMenuButton,\n} from \"../../styles\"\n\nexport function ColumnMenu({ cellElement }: { cellElement: TableCellElement }) {\n  const editor = useSlateStatic()\n  const menu = useLayer(\"column-menu\")\n  const buttonRef = useRef<HTMLDivElement>(null)\n  const [hover, setHover] = useState(false)\n\n  const onMouseEnter = useCallback(() => {\n    setHover(true)\n  }, [])\n\n  const onMouseLeave = useCallback(() => {\n    setHover(false)\n  }, [])\n\n  const onClick = useCallback(() => {\n    if (menu.layer) menu.close()\n    const dest = buttonRef.current\n    if (dest === null) return\n    const items: MenuItemData[] = [\n      {\n        icon: AlignLeft,\n        title: \"\",\n        action: () => {\n          editor.tablePlugin.setTableColumnAlign({ align: \"left\" })\n        },\n      },\n      {\n        icon: AlignCenter,\n        title: \"\",\n        action: () => {\n          editor.tablePlugin.setTableColumnAlign({ align: \"center\" })\n        },\n      },\n      {\n        icon: AlignRight,\n        title: \"\",\n        action: () => {\n          editor.tablePlugin.setTableColumnAlign({ align: \"right\" })\n        },\n      },\n    ]\n    // Menu\n    menu.open(() => <Menu dest={dest} items={items} close={menu.close} />)\n  }, [])\n\n  return (\n    <$ColumnMenu\n      ref={buttonRef}\n      contentEditable={false}\n      onClick={onClick}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <$ColumnMenuTile className=\"--tile\">\n        <BarsIcon />\n      </$ColumnMenuTile>\n      {hover ? (\n        <>\n          <$RemoveMenuButton\n            style={{\n              top: 0,\n              left: \"50%\",\n              marginLeft: \"-0.5em\",\n            }}\n            onMouseDown={() =>\n              editor.tablePlugin.removeColumn({ at: cellElement })\n            }\n          >\n            <MinusIcon />\n          </$RemoveMenuButton>\n\n          <$AddMenuButton\n            style={{ left: \"-0.5em\", top: 0 }}\n            onMouseDown={() =>\n              editor.tablePlugin.insertColumn({ at: cellElement })\n            }\n          >\n            <PlusIcon />\n          </$AddMenuButton>\n          <$AddMenuButton\n            style={{ right: \"-0.5em\", top: 0 }}\n            onMouseDown={() =>\n              editor.tablePlugin.insertColumn({ at: cellElement, offset: 1 })\n            }\n          >\n            <PlusIcon />\n          </$AddMenuButton>\n        </>\n      ) : null}\n    </$ColumnMenu>\n  )\n}\n","import { SVGProps } from \"react\"\n\nimport { TablerIcon } from \"../sink\"\n\nexport const PlusIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    width=\"1em\"\n    height=\"1em\"\n    {...props}\n  >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm.75-11.25a.75.75 0 0 0-1.5 0v2.5h-2.5a.75.75 0 0 0 0 1.5h2.5v2.5a.75.75 0 0 0 1.5 0v-2.5h2.5a.75.75 0 0 0 0-1.5h-2.5v-2.5z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n)\n\nexport const MinusIcon = (props: SVGProps<SVGSVGElement>) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\"\n    fill=\"currentColor\"\n    width=\"1em\"\n    height=\"1em\"\n    {...props}\n  >\n    <path\n      fillRule=\"evenodd\"\n      d=\"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM6.75 9.25a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5z\"\n      clipRule=\"evenodd\"\n    />\n  </svg>\n)\n\nexport const BarsIcon = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M4 12h16M4 18h16\" />\n  </TablerIcon>\n)\n\nexport const AlignLeft = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M4 12h10M4 18h14\" />\n  </TablerIcon>\n)\n\nexport const AlignCenter = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M8 12h8M6 18h12\" />\n  </TablerIcon>\n)\n\nexport const AlignRight = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M10 12h10M6 18h14\" />\n  </TablerIcon>\n)\n","import React, { useState } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { BarsIcon, MinusIcon, PlusIcon } from \"../../../icons\"\nimport { TableCellElement } from \"../../../types\"\nimport {\n  $AddMenuButton,\n  $RemoveMenuButton,\n  $RowMenu,\n  $RowMenuTile,\n} from \"../../styles\"\n\nexport function RowMenu({ cellElement }: { cellElement: TableCellElement }) {\n  const editor = useSlateStatic()\n  const [hover, setHover] = useState(false)\n\n  return (\n    <$RowMenu\n      contentEditable={false}\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n    >\n      <$RowMenuTile className=\"--tile\">\n        <BarsIcon />\n      </$RowMenuTile>\n      {hover ? (\n        <>\n          <$RemoveMenuButton\n            style={{\n              top: \"50%\",\n              left: \"0.5em\",\n              marginTop: \"-0.5em\",\n            }}\n            onMouseDown={() =>\n              editor.tablePlugin.removeRow({ at: cellElement })\n            }\n          >\n            <MinusIcon />\n          </$RemoveMenuButton>\n          <$AddMenuButton\n            style={{ top: \"-0.5em\", left: \"0.5em\" }}\n            onMouseDown={() =>\n              editor.tablePlugin.insertRow({ at: cellElement })\n            }\n          >\n            <PlusIcon />\n          </$AddMenuButton>\n          <$AddMenuButton\n            style={{ bottom: \"-0.5em\", left: \"0.5em\" }}\n            onMouseDown={() =>\n              editor.tablePlugin.insertRow({ at: cellElement, offset: 1 })\n            }\n          >\n            <PlusIcon />\n          </$AddMenuButton>\n        </>\n      ) : null}\n    </$RowMenu>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nexport const $TableMenu = styled(\"div\")`\n  position: absolute;\n  /**\n   * very slightly shaded\n   */\n  background: rgba(0, 0, 0, 0.001);\n\n  /**\n   * hangs out on left\n   */\n  top: -1.5em;\n  left: -4em;\n  height: 2.5em;\n  width: 2.5em;\n\n  /**\n   * hover \n   */\n  &:hover {\n    /**\n     * needs to pop up so that it doesn't jump back and forth with neighbor\n     * below\n     */\n    z-index: 1000;\n    /**\n     * Makes the visible tile get darker on hover over any part of the\n     * menu including the invisible part\n     */\n    .--row-menu-tile {\n      background: rgba(0, 0, 0, 0.15);\n    }\n  }\n`\n\n/**\n * The `$RowMenuTile` is the visible part of the `$RowMenu` and is the right\n * half of the `$RowMenu`.\n */\nexport const $TableMenuTile = styled(\"div\")`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 1.5em;\n  height: 1.5em;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 50%;\n`\n","import { $TableMenu, $TableMenuTile } from \"./$table-menu\"\n\nexport function TableMenu() {\n  return (\n    <$TableMenu contentEditable={false}>\n      <$TableMenuTile className=\"--table-menu-tile\" />\n    </$TableMenu>\n  )\n}\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { TableContentElement } from \"../types\"\nimport { $TableContent } from \"./styles\"\n\nexport function TableContent({\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<TableContentElement>) {\n  return <$TableContent {...attributes}>{children}</$TableContent>\n}\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport { TableRowElement } from \"../types\"\nimport { $TableRow } from \"./styles\"\n\nexport function TableRow({\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<TableRowElement>) {\n  return <$TableRow {...attributes}>{children}</$TableRow>\n}\n","import { ConstrainedRenderElementProps } from \"~/src/sink\"\n\nimport {\n  TableCellElement,\n  TableContentElement,\n  TableElement,\n  TableRowElement,\n} from \"../types\"\nimport { Table } from \"./table\"\nimport { TableCell } from \"./table-cell\"\nimport { TableContent } from \"./table-content\"\nimport { TableRow } from \"./table-row\"\n\nexport function renderElement({\n  element,\n  attributes,\n  children,\n}: ConstrainedRenderElementProps<\n  TableElement | TableRowElement | TableCellElement | TableContentElement\n>) {\n  switch (element.type) {\n    case \"table\":\n      return (\n        <Table element={element} attributes={attributes}>\n          {children}\n        </Table>\n      )\n    case \"table-row\":\n      return (\n        <TableRow element={element} attributes={attributes}>\n          {children}\n        </TableRow>\n      )\n    case \"table-cell\":\n      return (\n        <TableCell element={element} attributes={attributes}>\n          {children}\n        </TableCell>\n      )\n    case \"table-content\":\n      return (\n        <TableContent element={element} attributes={attributes}>\n          {children}\n        </TableContent>\n      )\n  }\n}\n","import { Element, NodeEntry } from \"slate\"\n\nimport {\n  createHotkeyHandler,\n  createPlugin,\n  findElementUp,\n  isEndOfElement,\n  isStartOfElement,\n  TypedPlugin,\n} from \"~/src/sink\"\n\nimport { deleteFragmentWithProtectedTypes } from \"./delete-fragment\"\nimport { createTableMethods } from \"./methods\"\nimport { normalizeTableIndexes } from \"./normalize/normalize-table\"\nimport { normalizeTableCell } from \"./normalize/normalize-table-cell\"\nimport { renderElement } from \"./render-element\"\nimport {\n  TableCellElement,\n  TableContentElement,\n  TableElement,\n  TableRowElement,\n} from \"./types\"\n\nexport * from \"./types\"\n\nexport type TableEditor = {\n  supportsTable: true\n  tablePlugin: ReturnType<typeof createTableMethods>\n}\n\nexport type TablePluginCustomTypes = {\n  Name: \"table\"\n  Editor: TableEditor\n  Element:\n  | TableElement\n  | TableRowElement\n  | TableCellElement\n  | TableContentElement\n}\n\nexport const TablePlugin = createPlugin<TablePluginCustomTypes>(\n  (editor, _options, { createPolicy }) => {\n    editor.supportsTable = true\n    editor.tablePlugin = createTableMethods(editor)\n    return createPolicy({\n      name: \"table\",\n      editor: {\n        deleteBackward: () => {\n          /**\n           * If we're at start of a cell, disable delete backward because we\n           * don't want the cell to be deleted.\n           */\n          return isStartOfElement(editor, \"table-cell\")\n        },\n        deleteForward: () => {\n          /**\n           * If we're at end of a cell, disable delete forward because we don't\n           * want the cell to be deleted.\n           */\n          return isEndOfElement(editor, \"table-cell\")\n        },\n        deleteFragment: () =>\n          deleteFragmentWithProtectedTypes(editor, [\"table-cell\"]),\n        insertBreak: () => {\n          /**\n           * IF we're anywhere in a table cell, disable insertBreak\n           */\n          const entry = findElementUp(editor, \"table-cell\")\n          return !!entry\n        },\n        isMaster(element) {\n          if (element.type === \"table\") return true\n        },\n        normalizeNode: (entry): boolean => {\n          const [node] = entry\n          if (!Element.isElement(node)) return false\n          switch (node.type) {\n            case \"table\":\n              return normalizeTableIndexes(\n                editor,\n                entry as NodeEntry<TableElement>\n              )\n            case \"table-cell\": {\n              return normalizeTableCell(\n                editor,\n                entry as NodeEntry<TableCellElement>\n              )\n            }\n          }\n          return false\n        },\n      },\n      editableProps: {\n        renderElement,\n        onKeyDown: createHotkeyHandler({\n          /**\n           * navigation\n           */\n          tab: editor.tablePlugin.tabForward,\n          \"shift+tab\": editor.tablePlugin.tabBackward,\n          down: editor.tablePlugin.down,\n          up: editor.tablePlugin.up,\n          /**\n           * selection\n           */\n          \"mod+a\": editor.tablePlugin.selectCell,\n          /**\n           * insert\n           */\n          \"super+t\": () => editor.tablePlugin.insertTable(3, 2),\n          \"mod+shift+enter\": () => editor.tablePlugin.insertRow({ offset: 0 }),\n          \"mod+enter\": () => editor.tablePlugin.insertRow({ offset: 1 }),\n          \"super+[\": () => editor.tablePlugin.insertColumn({ offset: 0 }),\n          \"super+]\": () => editor.tablePlugin.insertColumn({ offset: 1 }),\n          /**\n           * remove\n           */\n          \"super+backspace\": editor.tablePlugin.removeTable,\n          \"mod+backspace\": editor.tablePlugin.removeRow,\n          \"mod+shift+backspace\": editor.tablePlugin.removeColumn,\n        }),\n      },\n    })\n  }\n) as TypedPlugin<TablePluginCustomTypes>\n","import { css } from \"@emotion/react\"\n\nconst blue = `\n--blue-50: rgb(239 246 255);\n--blue-100: rgb(219 234 254);\n--blue-200: rgb(191 219 254);\n--blue-300: rgb(147 197 253);\n--blue-400: rgb(96 165 250);\n--blue-500: rgb(59 130 246);\n--blue-600: rgb(37 99 235);\n--blue-700: rgb(29 78 216);\n--blue-800: rgb(30 64 175);\n--blue-900: rgb(30 58 138);\n`\n\n// ignore because right now we're manually swapping them in/out\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst slateShades = `\n--shade-50: rgb(248 250 252);\n--shade-100: rgb(241 245 249);\n--shade-200: rgb(226 232 240);\n--shade-300: rgb(203 213 225);\n--shade-400: rgb(148 163 184);\n--shade-500: rgb(100 116 139);\n--shade-600: rgb(71 85 105);\n--shade-700: rgb(51 65 85);\n--shade-800: rgb(30 41 59);\n--shade-900: rgb(15 23 42);\n`\n\n// ignore because right now we're manually swapping them in/out\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst grayShades = `\n--shade-50: rgb(249 250 251);\n--shade-100: rgb(243 244 246);\n--shade-200: rgb(229 231 235);\n--shade-300: rgb(209 213 219);\n--shade-400: rgb(156 163 175);\n--shade-500: rgb(107 114 128);\n--shade-600: rgb(75 85 99);\n--shade-700: rgb(55 65 81);\n--shade-800: rgb(31 41 55);\n--shade-900: rgb(17 24 39);\n`\n\n// ignore because right now we're manually swapping them in/out\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst zincShades = `\n--shade-50: rgb(250 250 250);\n--shade-100: rgb(244 244 245);\n--shade-200: rgb(228 228 231);\n--shade-300: rgb(212 212 216);\n--shade-400: rgb(161 161 170);\n--shade-500: rgb(113 113 122);\n--shade-600: rgb(82 82 91);\n--shade-700: rgb(63 63 70);\n--shade-800: rgb(39 39 42);\n--shade-900: rgb(24 24 27);\n`\n\nexport const globalStyles = css`\n  :root {\n    /* Tailwind Colors */\n    ${blue}\n    ${zincShades}\n    /* Select Colors */\n    --select-color: var(--blue-400);\n    --select-editor-color: var(--blue-200);\n    --hover-color: var(--blue-200);\n    /* Link Colors */\n    --link-color: var(--blue-600);\n    --link-hover-color: var(--blue-700);\n    /* Code Block Colors */\n    /* Inline Code Colors */\n    --inline-code-bgcolor: var(--shade-100);\n    --inline-code-border-color: var(--shade-200);\n    /* Table Colors */\n    --table-border-color: var(--shade-300);\n    --table-row-border-color: var(--shade-300);\n    --table-column-border-color: var(--shade-100);\n    --table-head-bgcolor: var(--shade-50);\n    --table-menu-bgcolor: var(--shade-100);\n    --table-menu-hover-bgcolor: var(--shade-200);\n    /* Horizontal Rule Colors */\n    --hr-color: var(--shade-300);\n  }\n`\n","import { Global } from \"@emotion/react\"\n\nimport { createPlugin, TypedPlugin } from \"~/src/sink\"\n\nimport { globalStyles } from \"./global-styles\"\n\nexport type ThemeEditor = {\n  theme: true\n}\n\nexport type ThemePluginCustomTypes = {\n  Name: \"theme\"\n  Editor: ThemeEditor\n}\n\nexport const ThemePlugin = createPlugin<ThemePluginCustomTypes>((editor) => {\n  editor.theme = true\n  return {\n    name: \"theme\",\n    editor: {},\n    renderEditable: ({ attributes, Editable }) => {\n      return (\n        <>\n          <Global styles={globalStyles} />\n          <Editable {...attributes} />\n        </>\n      )\n    },\n    editableProps: {},\n  }\n}) as TypedPlugin<ThemePluginCustomTypes>\n","import { clsx } from \"clsx\"\nimport { useCallback, useRef } from \"react\"\nimport { Editor, Transforms } from \"slate\"\nimport { ReactEditor, useFocused, useSlateStatic } from \"slate-react\"\n\nimport { RenderEditableProps } from \"~/src/sink\"\nimport { Layers } from \"~/src/use-layer\"\n\nimport { Toolbar } from \"../components\"\nimport { $Editable, $OuterContainer } from \"../styles\"\n\nexport function renderEditable({ attributes, Editable }: RenderEditableProps) {\n  const outerContainerRef = useRef<HTMLDivElement>(null)\n\n  const editor = useSlateStatic()\n  const focused = useFocused()\n\n  /**\n   * When the user clicks inside the outer container but outside of the content\n   * or the toolbar, we want the user to see the cursor inside the editable\n   * region.\n   */\n  const onClickOuterContainer = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      /**\n       * If the user clicked on the toolbar, we don't want to do anything.\n       *\n       * If the user clicked on the content, we don't want to do anything\n       * because focus and selection will be handled by Slate.\n       */\n      if (e.target !== e.currentTarget) return\n      /**\n       * Select the last position in the editor\n       */\n      Transforms.select(editor, Editor.end(editor, []))\n      ReactEditor.focus(editor)\n    },\n    [editor]\n  )\n  /**\n   * The Toolbar works by rendering an $OuterContainer which is the border\n   * around the entire editor.\n   *\n   * Inside the $OuterContainer, we have our actual Toolbar and the\n   * actual Editable.\n   *\n   * TODO:\n   *\n   * We currently add `Layers` around everything in the Toolbar plugin but\n   * we should consider adding this somewhere else because the layers inside\n   * the Editor (like in the image toolbar) won't work unless we are using the\n   * toolbar plugin.\n   *\n   * Conceivably, we could have a version of the editor without the Toolbar.\n   *\n   * We could consider adding a Layers plugin and make it a dependency of some\n   * other thing or we could just add it outside of everything as part of\n   * Sink itself since probably every version of the editor will require at\n   * least one layer somewhere.\n   */\n  return (\n    <Layers>\n      <$OuterContainer\n        ref={outerContainerRef}\n        className={clsx({ \"--focused\": focused })}\n        style={{\n          height: editor.toolbar.height,\n          minHeight: editor.toolbar.minHeight,\n          maxHeight: editor.toolbar.maxHeight,\n        }}\n        onClick={onClickOuterContainer}\n      >\n        <Toolbar />\n        <Editable\n          as={$Editable}\n          {...attributes}\n          style={{ overflowY: \"auto\" }}\n        />\n      </$OuterContainer>\n    </Layers>\n  )\n}\n","import { clsx } from \"clsx\"\nimport { useCallback, useRef, useState } from \"react\"\nimport { ReactEditor, useSlateStatic } from \"slate-react\"\n\nimport { CloseMask } from \"~/src/shared-overlays\"\nimport { useAbsoluteReposition } from \"~/src/use-reposition\"\n\nimport {\n  $TableDialog,\n  $TableDialogGrid,\n  $TableDialogGridCell,\n} from \"../../styles/table-styles\"\n\nfunction createRange(size: number): number[] {\n  return [...Array(size).keys()]\n}\n\nexport function TableDialog({\n  dest,\n  close,\n}: {\n  dest: HTMLElement\n  close: () => void\n}) {\n  const [hover, setHover] = useState({ x: 0, y: 0 })\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLDivElement>(null)\n  const style = useAbsoluteReposition({ src: ref, dest }, ({ dest }) => {\n    return { left: dest.left - 8, top: dest.top + dest.height }\n  })\n  const rows = createRange(5).map((i) => i + 1)\n  const cols = createRange(5).map((i) => i + 1)\n\n  const hoverCell = useCallback(\n    (x: number, y: number) => {\n      setHover({ x, y })\n    },\n    [setHover]\n  )\n\n  const createTable = useCallback(\n    (x: number, y: number) => {\n      editor.tablePlugin.insertTable(x, y)\n      ReactEditor.focus(editor)\n      close()\n    },\n    [editor]\n  )\n\n  return (\n    <>\n      <CloseMask close={close} />\n      <$TableDialog ref={ref} style={style}>\n        <$TableDialogGrid onMouseLeave={() => hoverCell(0, 0)}>\n          {rows.map((y) => {\n            return cols.map((x) => {\n              const selected = x <= hover.x && y <= hover.y\n              return (\n                <$TableDialogGridCell\n                  className={clsx({ \"--selected\": selected })}\n                  key={`${x},${y}`}\n                  onMouseEnter={() => hoverCell(x, y)}\n                  onClick={() => createTable(x, y)}\n                />\n              )\n            })\n          })}\n        </$TableDialogGrid>\n      </$TableDialog>\n    </>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nimport { $Panel } from \"../../shared-overlays\"\n\nexport const $TableDialog = styled($Panel)`\n  padding: 0.5em;\n`\nexport const $TableDialogGrid = styled(\"div\")`\n  display: grid;\n  grid-template-columns: repeat(5, 1.75em);\n  grid-template-rows: 1.5em;\n  /* grid-gap: 1px; */\n`\nexport const $TableDialogGridCell = styled(\"div\")`\n  background: var(--shade-100);\n  height: 1.5em;\n  border-radius: 0.125em;\n  border-right: 1px solid white;\n  border-top: 1px solid white;\n  cursor: pointer;\n  &.--selected {\n    background: var(--blue-100);\n  }\n`\n","import throttle from \"lodash.throttle\"\nimport { useEffect, useRef, useState } from \"react\"\nimport { useSlateStatic } from \"slate-react\"\n\nimport { MenuItemData } from \"../../../shared-overlays/types\"\nimport { initialItems, itemSets } from \"../../items\"\nimport {\n  $Toolbar,\n  $ToolbarContainer,\n  $ToolbarDivider,\n  $ToolbarDividerContainer,\n} from \"../../styles\"\nimport { ToolbarButton } from \"./toolbar-button\"\n\n/**\n * Render a toolbar item which is either a button or a divider.\n */\nfunction ToolbarItem({ item }: { item: MenuItemData }) {\n  const editor = useSlateStatic()\n  if (item === \"divider\") {\n    return (\n      <$ToolbarDividerContainer data-item-type=\"divider\">\n        <$ToolbarDivider />\n      </$ToolbarDividerContainer>\n    )\n  }\n  const show = item.show === undefined ? true : item.show(editor)\n  if (!show) return null\n  return <ToolbarButton item={item} />\n}\n\n/**\n * Returns the width of the toolbar, the width of a button, and the width of a\n * divider.\n */\nfunction getWidths(toolbar: HTMLDivElement) {\n  const button = toolbar.querySelector<HTMLDivElement>(\n    \"[data-item-type=button]\"\n  )\n  const divider = toolbar.querySelector<HTMLDivElement>(\n    \"[data-item-type=divider]\"\n  )\n  if (!button || !divider) throw new Error(\"Button or divider not found\")\n  return {\n    toolbar: toolbar.offsetWidth,\n    button: button.offsetWidth,\n    divider: divider.offsetWidth,\n  }\n}\n\n/**\n * Takes an array of items representing a set of toolbar buttons and items and\n * returns the width of the set in pixels\n */\nfunction measureItemSetWidth(\n  items: MenuItemData[],\n  buttonWidth: number,\n  dividerWidth: number\n): number {\n  let width = 0\n  for (const item of items) {\n    width += item === \"divider\" ? dividerWidth : buttonWidth\n  }\n  return width\n}\n\nexport function Toolbar() {\n  const ref = useRef<HTMLDivElement>(null)\n  const [items, setItems] = useState<MenuItemData[]>(initialItems)\n  useEffect(() => {\n    const refresh = throttle(\n      () => {\n        const toolbar = ref.current\n        if (!toolbar) throw new Error(\"Toolbar not found\")\n        const widths = getWidths(toolbar)\n        /**\n         * Iterate through the item sets and find the first one that fits within\n         * the toolbar width. If none fit, use the last item set.\n         */\n        for (let i = 0; i < itemSets.length - 1; i++) {\n          const itemSetWidth = measureItemSetWidth(\n            itemSets[i],\n            widths.button,\n            widths.divider\n          )\n          if (itemSetWidth < widths.toolbar) {\n            setItems(itemSets[i])\n            return\n          }\n        }\n        setItems(itemSets[itemSets.length - 1])\n      },\n      100,\n      { trailing: true }\n    )\n    refresh()\n    window.addEventListener(\"resize\", refresh)\n    return () => {\n      window.removeEventListener(\"resize\", refresh)\n    }\n  }, [])\n  return (\n    <$ToolbarContainer ref={ref}>\n      <$Toolbar>\n        {items.map((item, index) => (\n          <ToolbarItem\n            key={typeof item === \"string\" ? index : item.title}\n            item={item}\n          />\n        ))}\n      </$Toolbar>\n    </$ToolbarContainer>\n  )\n}\n","import { TablerIcon } from \"../sink\"\n\nexport const H = () => (\n  <TablerIcon>\n    <path d=\"M7 12h10M7 5v14M17 5v14M15 19h4M15 5h4M5 19h4M5 5h4\" />\n  </TablerIcon>\n)\n\nexport const More = () => (\n  <TablerIcon className=\"--more-icon\" width=\"0.5em\" viewBox=\"0 0 12 24\">\n    <path d=\"m2 12 4 4 4-4\" />\n  </TablerIcon>\n)\n\nexport const LinkPlus = () => (\n  <TablerIcon width=\"0.5em\" viewBox=\"6 0 12 24\">\n    <path d=\"M9 12h6M12 9v6\" />\n  </TablerIcon>\n)\n\nexport const H1 = () => (\n  <TablerIcon>\n    <path d=\"M19 18v-8l-2 2M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const H2 = () => (\n  <TablerIcon>\n    <path d=\"M17 12a2 2 0 1 1 4 0c0 .591-.417 1.318-.816 1.858L17 18.001h4M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const H3 = () => (\n  <TablerIcon>\n    <path d=\"M19 14a2 2 0 1 0-2-2M17 16a2 2 0 1 0 2-2M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const H4 = () => (\n  <TablerIcon>\n    <path d=\"M20 18v-8l-4 6h5M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const H5 = () => (\n  <TablerIcon>\n    <path d=\"M17 18h2a2 2 0 1 0 0-4h-2v-4h4M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const H6 = () => (\n  <TablerIcon>\n    <path d=\"M19 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\" />\n    <path d=\"M21 12a2 2 0 1 0-4 0v4M4 6v12M12 6v12M11 18h2M3 18h2M4 12h8M3 6h2M11 6h2\" />\n  </TablerIcon>\n)\n\nexport const Normal = () => (\n  <TablerIcon>\n    <path d=\"M8 18V6h2l6 9V6h2v12h-2l-6-9v9H8z\" />\n  </TablerIcon>\n)\n\nexport const Bold = () => (\n  <TablerIcon>\n    {/* <path d=\"M0 0h24v24H0z\" stroke=\"none\" /> */}\n    <path d=\"M7 5h6a3.5 3.5 0 0 1 0 7H7zM13 12h1a3.5 3.5 0 0 1 0 7H7v-7\" />\n  </TablerIcon>\n)\n\nexport const Italic = () => (\n  <TablerIcon>\n    <path d=\"M11 5h6M7 19h6M14 5l-4 14\" />\n  </TablerIcon>\n)\n\nexport const Style = () => (\n  <TablerIcon>\n    <path d=\"M4 20h3M14 20h7M6.9 15h6.9M10.2 6.3 16 20M5 20l6-16h2l7 16\" />\n  </TablerIcon>\n)\n\nexport const Link = () => (\n  <TablerIcon>\n    <path d=\"M10 14a3.5 3.5 0 0 0 5 0l4-4a3.5 3.5 0 0 0-5-5l-.5.5\" />\n    <path d=\"M14 10a3.5 3.5 0 0 0-5 0l-4 4a3.5 3.5 0 0 0 5 5l.5-.5\" />\n  </TablerIcon>\n)\n\n/**\n * Block Quote\n */\n\nexport const Blockquote = () => (\n  <TablerIcon>\n    <path d=\"M6 15h15M21 19H6M15 11h6M21 7h-6M9 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2M3 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2\" />\n  </TablerIcon>\n)\n\nexport const Quote = () => (\n  <TablerIcon>\n    <path d=\"M10 11H6a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v6c0 2.667-1.333 4.333-4 5M19 11h-4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v6c0 2.667-1.333 4.333-4 5\" />\n  </TablerIcon>\n)\n\nexport const DoubleQuote = () => (\n  <TablerIcon>\n    <path d=\"M10 9l4 3-4 3\" />\n    <path d=\"M16 9l4 3-4 3\" />\n  </TablerIcon>\n)\n\nexport const QuoteOff = () => (\n  <TablerIcon>\n    <path d=\"M10 11H6a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1m4 4v3c0 2.667-1.333 4.333-4 5M19 11h-4m-1-1V7a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v6c0 .66-.082 1.26-.245 1.798m-1.653 2.29c-.571.4-1.272.704-2.102.912M3 3l18 18\" />\n  </TablerIcon>\n)\n\n/**\n * List\n */\n\nexport const BulletList = () => (\n  <TablerIcon>\n    <path d=\"M9 6h11M9 12h11M9 18h11M5 6v.01M5 12v.01M5 18v.01\" />\n  </TablerIcon>\n)\n\n/**\n * Table\n */\n\nexport const Table = () => (\n  <TablerIcon>\n    <rect x={4} y={4} width={16} height={16} rx={2} />\n    <path d=\"M4 10h16M10 4v16\" />\n  </TablerIcon>\n)\n\n/**\n * Code\n */\n\nexport const Code = () => (\n  <TablerIcon>\n    <path d=\"m7 8-4 4 4 4M17 8l4 4-4 4M14 4l-4 16\" />\n  </TablerIcon>\n)\n\nexport const CodeBlock = () => (\n  <TablerIcon>\n    <path d=\"M9 8L5 12L9 16M15 8L19 12L15 16\" />\n  </TablerIcon>\n)\n\n/**\n * Media and Files\n */\n\nexport const Image = () => (\n  <TablerIcon>\n    <path d=\"M15 8h.01\" />\n    <rect x={4} y={4} width={16} height={16} rx={3} />\n    <path d=\"m4 15 4-4a3 5 0 0 1 3 0l5 5\" />\n    <path d=\"m14 14 1-1a3 5 0 0 1 3 0l2 2\" />\n  </TablerIcon>\n)\n\nexport const Attachment = () => (\n  <TablerIcon>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n    <path d=\"M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2zM12 11v6M9 14h6\" />\n  </TablerIcon>\n)\n\nexport const FileUpload = () => (\n  <TablerIcon>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M14 3v4a1 1 0 0 0 1 1h4\" />\n    <path d=\"M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2zM12 11v6\" />\n    <path d=\"M9.5 13.5 12 11l2.5 2.5\" />\n  </TablerIcon>\n)\n\nexport const PhotoUp = () => (\n  <TablerIcon>\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M15 8h.01M12.5 21H6a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v6.5\" />\n    <path d=\"m3 16 5-5c.928-.893 2.072-.893 3 0l3.5 3.5\" />\n    <path d=\"m14 14 1-1c.679-.653 1.473-.829 2.214-.526M19 22v-6M22 19l-3-3-3 3\" />\n  </TablerIcon>\n)\n\n/**\n * Text Styles\n */\n\nexport const Plus = () => (\n  <TablerIcon>\n    <path d=\"M12 5v14M5 12h14\" />\n  </TablerIcon>\n)\n\nexport const Strikethrough = () => (\n  <TablerIcon>\n    <path d=\"M5 12h14M16 6.5A4 2 0 0 0 12 5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1-4-1.5\" />\n  </TablerIcon>\n)\n\nexport const Underline = () => (\n  <TablerIcon>\n    <path d=\"M7 5v5a5 5 0 0 0 10 0V5M5 19h14\" />\n  </TablerIcon>\n)\n\nexport const RemoveStyles = () => (\n  <TablerIcon>\n    <path d=\"m14 6 7 7-2 2M10 10l-4.172 4.172a2.828 2.828 0 1 0 4 4L14 14\" />\n    <path d=\"m16 12 4.414-4.414a2 2 0 0 0 0-2.829l-1.171-1.171a2 2 0 0 0-2.829 0L12 8M4 20l1.768-1.768M3 3l18 18\" />\n  </TablerIcon>\n)\n\nexport const ListCheck = () => (\n  <TablerIcon>\n    <path d=\"m9 11 3 3 8-8\" />\n    <path d=\"M20 12v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h9\" />\n  </TablerIcon>\n)\n\nexport const ListNumbers = () => (\n  <TablerIcon>\n    <path d=\"M11 6h9M11 12h9M12 18h8M4 16a2 2 0 1 1 4 0c0 .591-.5 1-1 1.5L4 20h4M6 10V4L4 6\" />\n  </TablerIcon>\n)\n\nexport const IncreaseDepth = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M8 12h12M12 18h8M7 12l-3-3M7 12l-3 3\" />\n  </TablerIcon>\n)\n\nexport const DecreaseDepth = () => (\n  <TablerIcon>\n    <path d=\"M4 6h16M8 12h12M12 18h8M4 12l3-3M4 12l3 3\" />\n  </TablerIcon>\n)\n\n/**\n * Markdown\n */\nexport const Markdown = () => (\n  <TablerIcon>\n    <path d=\"M5 5h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z\" />\n    <path d=\"M7 15V9l2 2 2-2v6M14 9v6h4M14 13h2\" />\n  </TablerIcon>\n)\n\n/**\n * Visual Editor\n */\nexport const VisualEditor = () => (\n  <TablerIcon>\n    <path d=\"M5 5h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z\" />\n    <path d=\"M8 8h8M8 12h8M8 16h5\" />\n    <path d=\"M16 16h1\" />\n  </TablerIcon>\n)\n","import { MenuItemData } from \"~/src/shared-overlays/types\"\n\nimport * as Icon from \"../icons\"\nimport { t } from \"~/src/utils/translations\"\n\nconst listDepthItems: MenuItemData[] = [\n  {\n    icon: Icon.IncreaseDepth,\n    title: t(\"increaseDepth\"),\n    hotkey: \"tab\",\n    action: (editor) => editor.list.increaseDepth(),\n    active: (editor) => editor.list.canIncreaseDepth(),\n  },\n  {\n    icon: Icon.DecreaseDepth,\n    title: t(\"decreaseDepth\"),\n    hotkey: \"shift+tab\",\n    action: (editor) => editor.list.decreaseDepth(),\n    active: (editor) => editor.list.canDecreaseDepth(),\n  },\n]\n\nconst blockItems: MenuItemData[] = [\n  {\n    icon: Icon.Normal,\n    title: t(\"normal\"),\n    hotkey: \"super+0\",\n    action: (editor) => {\n      editor.collapsibleParagraph.convertParagraph()\n    },\n  },\n  {\n    icon: Icon.H1,\n    title: t(\"heading1\"),\n    hotkey: \"super+1\",\n    action: (editor) => editor.heading.convertHeading(1, true),\n    active: (editor) => editor.heading.isHeadingActive(1),\n  },\n  {\n    icon: Icon.H2,\n    title: t(\"heading2\"),\n    hotkey: \"super+2\",\n    action: (editor) => editor.heading.convertHeading(2, true),\n    active: (editor) => editor.heading.isHeadingActive(2),\n  },\n  {\n    icon: Icon.H3,\n    title: t(\"heading3\"),\n    hotkey: \"super+3\",\n    action: (editor) => editor.heading.convertHeading(3, true),\n    active: (editor) => editor.heading.isHeadingActive(3),\n  },\n]\n\nexport const expandedBlockItems: MenuItemData[] = [...blockItems]\n\nexport const compactBlockItems: MenuItemData[] = [\n  {\n    icon: Icon.H,\n    title: t(\"paragraphStyle\"),\n    more: true,\n    children: blockItems,\n  }\n]\n\n// Export listDepthItems so they can be used in list-items.tsx\nexport { listDepthItems }\n","import { isHotkey } from \"is-hotkey\"\nimport {\n  ChangeEvent,\n  KeyboardEvent,\n  useCallback,\n  useRef,\n  useState,\n} from \"react\"\nimport { ReactEditor, useSlateStatic } from \"slate-react\"\n\nimport { positionInside, useAbsoluteReposition } from \"~/src/use-reposition\"\n\nimport { CloseMask } from \"../../../shared-overlays/components/CloseMask\"\nimport * as Icon from \"../../icons\"\nimport {\n  $AnchorDialog,\n  $AnchorDialogInput,\n  $AnchorDialogInputLine,\n} from \"../../styles\"\nimport { $DialogButton, $DialogHint } from \"../../styles/dialog-shared-styles\"\n\nconst isEnter = isHotkey(\"enter\")\n\nexport function AnchorDialog({\n  dest,\n  close,\n}: {\n  dest: HTMLElement\n  close: () => void\n}) {\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLDivElement>(null)\n  const style = useAbsoluteReposition(\n    { src: ref, dest },\n    ({ src, dest }, viewport) => {\n      return positionInside(\n        src,\n        viewport,\n        {\n          left: dest.left - 12,\n          top: dest.top + dest.height,\n        },\n        { margin: 16 }\n      )\n    }\n  )\n\n  const [url, setUrl] = useState(\"\")\n\n  const insertLink = () => {\n    editor.anchor.insertLink(url, url, { select: true })\n    ReactEditor.focus(editor)\n    close()\n  }\n\n  const onChangeInput = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setUrl(e.currentTarget.value)\n    },\n    [setUrl]\n  )\n\n  const onKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\n    if (!isEnter(e)) return\n    e.preventDefault()\n    e.stopPropagation()\n    insertLink()\n  }\n\n  return (\n    <>\n      <CloseMask close={close} />\n      <$AnchorDialog ref={ref} style={style}>\n        <$AnchorDialogInputLine>\n          <$AnchorDialogInput\n            type=\"text\"\n            value={url}\n            autoFocus\n            onChange={onChangeInput}\n            onKeyDown={onKeyDown}\n          />\n          <$DialogButton onClick={insertLink}>\n            <Icon.Link />\n            <Icon.LinkPlus />\n          </$DialogButton>\n        </$AnchorDialogInputLine>\n        <$DialogHint>Enter URL of link</$DialogHint>\n      </$AnchorDialog>\n    </>\n  )\n}\n","import styled from \"@emotion/styled\"\n\nexport const $DialogButton = styled(\"div\")`\n  /* Center vertically and horizontally */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  /* font-size: 1.25em; */\n  padding: 0.25em 0.75em;\n  text-align: center;\n  color: var(--blue-100);\n  color: white;\n  background: var(--blue-500);\n  transition: all 100ms;\n  &:hover {\n    color: var(--blue-50);\n    background: var(--blue-600);\n    outline: 2px solid var(--blue-200);\n  }\n  border-radius: 0.25em;\n  svg {\n    color: var(--blue-200);\n    font-size: 1.25em;\n    stroke-width: 2px;\n  }\n`\n\nexport const $DialogHint = styled(\"div\")`\n  font-size: 0.875em;\n  margin-top: 0.5em;\n  color: var(--shade-500);\n  line-height: 1.375;\n`\n","import { MenuItemData } from \"~/src/shared-overlays\";\n\nimport { TableDialog } from \"../components\";\nimport { AnchorDialog } from \"../components/dialog/anchor-dialog\";\nimport * as Icon from \"../icons\";\nimport { t } from \"~/src/utils/translations\";\n\nexport const dialogItems: MenuItemData[] = [\n  {\n    icon: Icon.Link,\n    title: t(\"insertLink\"),\n    more: true,\n    hotkey: \"mod+k\",\n    Component: AnchorDialog,\n  },\n  {\n    icon: Icon.Table,\n    title: t(\"insertTable\"),\n    more: true,\n    Component: TableDialog,\n  },\n];\n\nexport const expandedDialogItems: MenuItemData[] = dialogItems;\n\nexport const compactDialogItems: MenuItemData[] = [\n  {\n    icon: Icon.Plus,\n    title: t(\"insert\"),\n    more: true,\n    children: dialogItems,\n  },\n];\n","import { Editor } from \"slate\";\nimport { MenuItemData } from \"~/src/shared-overlays\";\n\nimport * as Icon from \"../icons\";\nimport { t } from \"~/src/utils/translations\";\n\nfunction getMarks(editor: Editor) {\n  const marks = Editor.marks(editor);\n  return {\n    bold: marks?.bold || false,\n    italic: marks?.italic || false,\n    strike: marks?.strike || false,\n    underline: marks?.underline || false,\n  };\n}\n\nconst primaryMarkItems: MenuItemData[] = [\n  {\n    icon: Icon.Bold,\n    title: t(\"bold\"),\n    hotkey: \"mod+b\",\n    action: (editor) => editor.marksPlugin.toggleBold(),\n    active: (editor) => getMarks(editor).bold,\n  },\n  {\n    icon: Icon.Italic,\n    title: t(\"italic\"),\n    hotkey: \"mod+i\",\n    action: (editor) => editor.marksPlugin.toggleItalic(),\n    active: (editor) => getMarks(editor).italic,\n  },\n  {\n    icon: Icon.Strikethrough,\n    title: t(\"strike\"),\n    hotkey: \"super+k\",\n    action: (editor) => editor.marksPlugin.toggleStrike(),\n    active: (editor) => getMarks(editor).strike,\n  },\n  {\n    icon: Icon.Underline,\n    title: t(\"underline\"),\n    hotkey: \"mod+u\",\n    action: (editor) => editor.marksPlugin.toggleUnderline(),\n    active: (editor) => getMarks(editor).underline,\n  },\n];\n\nexport const expandedMarkItems: MenuItemData[] = primaryMarkItems;\nexport const compactMarkItems: MenuItemData[] = [\n  {\n    icon: Icon.Bold,\n    title: t(\"format\"),\n    more: true,\n    children: primaryMarkItems,\n  },\n];\n","import { MenuItemData } from \"~/src/shared-overlays\"\n\nimport * as Icon from \"../icons\"\nimport { t } from \"~/src/utils/translations\"\nimport { listDepthItems } from \"./block-items\"\n\nexport const listItems: MenuItemData[] = [\n  {\n    icon: Icon.BulletList,\n    title: t(\"bulletList\"),\n    hotkey: \"super+8\",\n    action: (editor) => editor.list.convertUnorderedList(true),\n  },\n  {\n    icon: Icon.ListNumbers,\n    title: t(\"numberedList\"),\n    hotkey: \"super+7\",\n    action: (editor) => editor.list.convertOrderedList(true),\n  },\n  {\n    icon: Icon.ListCheck,\n    title: t(\"checkList\"),\n    hotkey: \"super+9\",\n    action: (editor) => editor.list.convertTaskList(true),\n  },\n]\n\nexport const expandedListItems: MenuItemData[] = [...listItems, \"divider\", ...listDepthItems]\n\nexport const compactListItems: MenuItemData[] = [\n  {\n    icon: Icon.ListNumbers,\n    title: t(\"list\"),\n    more: true,\n    children: [...listItems, \"divider\", ...listDepthItems],\n  },\n]\n","import { MenuItemData } from \"~/src/shared-overlays\";\nimport { Editor, Transforms } from \"slate\";\nimport { findElementUp } from \"~/src/sink\";\nimport * as Icon from \"../icons\";\nimport { t } from \"~/src/utils/translations\";\n\nconst quoteItemsList: MenuItemData[] = [\n  {\n    icon: Icon.Quote,\n    title: t(\"quote\"),\n    hotkey: \"super+.\",\n    action: (editor) => {\n      if (editor.blockQuotePlugin.isActive()) {\n        editor.blockQuotePlugin.outdent();\n      } else {\n        editor.blockQuotePlugin.indent();\n      }\n    },\n    active: (editor) => editor.blockQuotePlugin.isActive(),\n  },\n  {\n    icon: Icon.DoubleQuote,\n    title: t(\"increaseQuoteDepth\"),\n    action: (editor) => editor.blockQuotePlugin.increaseDepth(),\n    active: (editor) => editor.blockQuotePlugin.canIncreaseDepth(),\n  },\n];\n\nexport const expandedQuoteItems: MenuItemData[] = quoteItemsList;\n\nexport const compactQuoteItems: MenuItemData[] = [\n  {\n    icon: Icon.Quote,\n    title: t(\"quote\"),\n    more: true,\n    children: quoteItemsList,\n  },\n];\n\n// For backward compatibility\nexport const quoteItems = expandedQuoteItems;\n","import { MenuItemData } from \"~/src/shared-overlays\"\n\nimport * as Icon from \"../icons\"\nimport { t } from \"~/src/utils/translations\"\n\nexport const rawModeItem: MenuItemData = {\n    icon: Icon.Markdown,\n    title: t(\"switchToRawMarkdown\"),\n    action: (editor) => {\n        // Call the toggleRawMode function if it exists on the editor\n        if (editor.wysimark && typeof editor.wysimark.toggleRawMode === 'function') {\n            editor.wysimark.toggleRawMode();\n        }\n    },\n    // Only show in the toolbar when not in Raw mode\n    show: (editor) => {\n        return editor.wysimark && !editor.wysimark.isRawMode;\n    },\n    active: () => false, // Never show as active in the toolbar\n}\n\nexport const visualModeItem: MenuItemData = {\n    icon: Icon.VisualEditor,\n    title: t(\"switchToVisualEditor\"),\n    action: (editor) => {\n        // Call the toggleRawMode function if it exists on the editor\n        if (editor.wysimark && typeof editor.wysimark.toggleRawMode === 'function') {\n            editor.wysimark.toggleRawMode();\n        }\n    },\n    // Only show in the toolbar when in Raw mode\n    show: (editor) => {\n        return !!(editor.wysimark && editor.wysimark.isRawMode);\n    },\n    active: () => false, // Never show as active in the toolbar\n}\n","import { MenuItemData } from \"~/src/shared-overlays\"\n\nimport { expandedBlockItems, compactBlockItems } from \"./block-items\"\nimport { compactDialogItems, expandedDialogItems } from \"./dialogItems\"\nimport { compactMarkItems, expandedMarkItems } from \"./mark-items\"\nimport { expandedListItems, compactListItems } from \"./list-items\"\nimport { expandedQuoteItems, compactQuoteItems } from \"./quote-items\"\nimport { rawModeItem, visualModeItem } from \"./raw-mode-item\"\n\n/**\n * A collection of `Item` objects that describe either\n *\n * - A Button in the toolbar\n * - A Menu Item in a drop down of the toolbar\n *\n * An `Item` is described in the same way whether it is a button or a menu\n * item making them interchangeable.\n */\n\nexport const largeItems: MenuItemData[] = [\n  ...expandedBlockItems,\n  \"divider\",\n  ...expandedListItems,\n  \"divider\",\n  ...expandedMarkItems,\n  \"divider\",\n  ...expandedQuoteItems,\n  \"divider\",\n  ...expandedDialogItems,\n  \"divider\",\n  rawModeItem,\n  visualModeItem,\n]\n\nexport const mediumItems: MenuItemData[] = [\n  ...compactBlockItems,\n  \"divider\",\n  ...expandedListItems,\n  \"divider\",\n  ...expandedMarkItems,\n  \"divider\",\n  ...expandedQuoteItems,\n  \"divider\",\n  ...compactDialogItems,\n  \"divider\",\n  rawModeItem,\n  visualModeItem,\n]\n\nexport const smallItems: MenuItemData[] = [\n  ...compactBlockItems,\n  \"divider\",\n  ...compactListItems,\n  \"divider\",\n  ...compactMarkItems,\n  \"divider\",\n  ...compactQuoteItems,\n  \"divider\",\n  ...compactDialogItems,\n  \"divider\",\n  rawModeItem,\n  visualModeItem,\n]\n\nexport const initialItems: MenuItemData[] = [...expandedBlockItems, \"divider\"]\n\nexport const items = mediumItems\n\nexport const itemSets: MenuItemData[][] = [largeItems, mediumItems, smallItems]\n","import { clsx } from \"clsx\"\nimport { MouseEvent, useCallback, useRef } from \"react\"\nimport { ReactEditor, useSlate, useSlateStatic } from \"slate-react\"\n\nimport { formatHotkey, Menu, MenuItemData } from \"~/src/shared-overlays\"\nimport { useLayer } from \"~/src/use-layer\"\nimport { useTooltip } from \"~/src/use-tooltip\"\nimport { r } from \"~/src/utils/translations\"\n\nimport * as Icon from \"../../icons\"\nimport { $ToolbarButton } from \"../../styles\"\n\nexport function ToolbarButton({\n  item,\n}: {\n  item: Exclude<MenuItemData, \"divider\">\n}) {\n  const staticEditor = useSlateStatic()\n  const editor = useSlate()  // \n  const isActive = item.active ? item.active(editor) : false\n  const ref = useRef<HTMLDivElement>(null)\n  const tooltip = useTooltip({\n    title: item.title,\n    hotkey: () => (item.hotkey ? formatHotkey(item.hotkey) : undefined),\n  })\n  const menuLayer = useLayer(\"menu\")\n\n  const openMenu = useCallback(() => {\n    const dest = ref.current\n    const items = item.children\n    const Component = item.Component\n    if (!dest) return\n    if (items) {\n      menuLayer.open(() => (\n        <Menu dest={dest} items={items} close={menuLayer.close} />\n      ))\n    } else if (Component) {\n      menuLayer.open(() => <Component dest={dest} close={menuLayer.close} />)\n    }\n  }, [item])\n\n  const onClick = useCallback(() => {\n    if (item.action) {\n      item.action(staticEditor)\n      ReactEditor.focus(staticEditor)\n      return\n    }\n    if (menuLayer.layer) {\n      menuLayer.close()\n    } else {\n      openMenu()\n    }\n  }, [menuLayer.layer, item])\n\n  /**\n   * On hover\n   */\n  const onMouseEnter = useCallback(\n    (e: MouseEvent<HTMLElement>) => {\n      tooltip.onMouseEnter(e)\n      /**\n       * If any `menu` is already open, then we open up the currently hovered\n       * `menu` automatically. This replicates behavior in menus in windowing\n       * systems.\n       */\n      if (menuLayer.layer) openMenu()\n    },\n    [menuLayer.layer]\n  )\n\n  return (\n    <$ToolbarButton\n      data-item-type=\"button\"\n      ref={ref}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={tooltip.onMouseLeave}\n      onClick={onClick}\n      className={clsx({\n        \"--active\": isActive && !r(item?.title)?.includes('Depth'),\n        \"--more\": item.more,\n        \"--disabled\": !isActive && r(item?.title)?.includes('Depth')\n      })}\n    >\n      <item.icon />\n      {item.more ? <Icon.More /> : null}\n    </$ToolbarButton>\n  )\n}\n","import { createPlugin, TypedPlugin } from \"~/src/sink\"\n\nimport { renderEditable } from \"./render-editable\"\n\nexport type ToolbarEditor = {\n  toolbar: {\n    height?: string | number\n    minHeight?: string | number\n    maxHeight?: string | number\n    showUploadButtons?: boolean\n  }\n}\n\nexport type ToolbarOptions = {\n  toolbar: {\n    height?: string | number\n    minHeight?: string | number\n    maxHeight?: string | number\n    showUploadButtons?: boolean\n  }\n}\n\nexport type ToolbarPluginCustomTypes = {\n  Name: \"toolbar\"\n  Editor: ToolbarEditor\n  Options: ToolbarOptions\n}\n\nexport const ToolbarPlugin = createPlugin<ToolbarPluginCustomTypes>(\n  (editor, options) => {\n    editor.toolbar = {\n      height: options.toolbar?.height,\n      minHeight: options.toolbar?.minHeight,\n      maxHeight: options.toolbar?.maxHeight,\n      showUploadButtons: options.toolbar?.showUploadButtons ?? true,\n    }\n    return {\n      name: \"toolbar\",\n      editor: {},\n      renderEditable,\n      editableProps: {},\n    }\n  }\n) as TypedPlugin<ToolbarPluginCustomTypes>\n","import { Editor, Element, Node, Path, Transforms } from \"slate\"\n\nimport { createPlugin, TypedPlugin } from \"~/src/sink\"\n\ntype TrailingBlockPluginCustomType = {\n  Name: \"trailing-block\"\n  Editor: { allowTrailingBlock: true }\n}\n\nexport const TrailingBlockPlugin = createPlugin<TrailingBlockPluginCustomType>(\n  (editor) => {\n    editor.allowTrailingBlock = true\n    return {\n      name: \"trailing-block\",\n      editor: {\n        normalizeNode: (entry) => {\n          if (!Editor.isEditor(entry[0])) return false\n          const lastPath = [editor.children.length - 1]\n          /**\n           * We expect the last node of the Editor to be an `Element` because\n           * the children of an `Editor` are `Element` objects.\n           */\n          const lastElement = Node.child(\n            editor,\n            editor.children.length - 1\n          ) as Element\n          /**\n           * We need to add a trailing block when it is not easy for us to\n           * start typing at the end of the document. This happens in these\n           * conditions:\n           *\n           * - The last Element is a `void` block that we can't type into\n           * - The last Element is an Element that contains child elements\n           *   like a `table` or a nested `list`.\n           */\n          if (\n            Editor.hasBlocks(editor, lastElement) ||\n            Editor.isVoid(editor, lastElement)\n          ) {\n            Transforms.insertNodes(\n              editor,\n              { type: \"paragraph\", children: [{ text: \"\" }] },\n              {\n                at: Path.next(lastPath),\n              }\n            )\n          }\n          return true\n        },\n      },\n    }\n  }\n) as TypedPlugin<TrailingBlockPluginCustomType>\n","import { Editor, Transforms } from \"slate\"\n\nimport { curryOne } from \"~/src/sink\"\n\nimport { parse, escapeUrlSlashes } from \"../../convert\"\n\nfunction pasteMarkdown(editor: Editor, markdown: string) {\n  // Escape forward slashes in URLs before parsing\n  const escapedMarkdown = escapeUrlSlashes(markdown);\n  const fragment = parse(escapedMarkdown)\n  Transforms.insertNodes(editor, fragment)\n}\n\nexport function createPasteMarkdownMethods(editor: Editor) {\n  return {\n    pasteMarkdown: curryOne(pasteMarkdown, editor),\n  }\n}\n","import { createPlugin, stopEvent, TypedPlugin } from \"~/src/sink\"\n\nimport { createPasteMarkdownMethods } from \"./methods\"\n\ntype PasteMarkdownMethods = ReturnType<typeof createPasteMarkdownMethods>\n\nexport type PasteMarkdownEditor = {\n  pasteMarkdown: PasteMarkdownMethods\n}\n\nexport type PasteMarkdownPluginCustomTypes = {\n  Name: \"paste-markdown\"\n  Editor: PasteMarkdownEditor\n}\n\nexport const PasteMarkdownPlugin = createPlugin<PasteMarkdownPluginCustomTypes>(\n  (editor) => {\n    editor.pasteMarkdown = createPasteMarkdownMethods(editor)\n    return {\n      name: \"paste-markdown\",\n      editor: {},\n      editableProps: {\n        onPaste(e) {\n          const { types } = e.clipboardData\n          if (types.length !== 1 || types[0] !== \"text/plain\") {\n            return false\n          }\n          const markdown = e.clipboardData.getData(\"text/plain\")\n          editor.pasteMarkdown.pasteMarkdown(markdown)\n          stopEvent(e)\n          return true\n        },\n      },\n    }\n  }\n) as TypedPlugin<PasteMarkdownPluginCustomTypes>\n","import { RenderPlaceholderProps } from \"slate-react\"\n\nimport { createPlugin, TypedPlugin } from \"~/src/sink\"\n\nexport type PlaceholderEditor = {\n  placeholder: {}\n}\n\nexport type PlaceholderPluginCustomTypes = {\n  Name: \"placeholder\"\n  Editor: PlaceholderEditor\n}\n\n/**\n * To have the placeholder work properly, it cannot have `width: 100%` and\n * `max-width: 100%` set or it creates horizontal scrollbars.\n *\n * The default `renderPlaceholder` adds these styles so we override them.\n */\nfunction renderPlaceholder(props: RenderPlaceholderProps) {\n  const nextAttributes: RenderPlaceholderProps[\"attributes\"] = {\n    ...props.attributes,\n    style: {\n      ...props.attributes.style,\n      width: undefined,\n      maxWidth: undefined,\n    },\n  }\n  return <span {...nextAttributes}>{props.children}</span>\n}\n\nexport const PlaceholderPlugin = createPlugin<PlaceholderPluginCustomTypes>(\n  (editor, _options, { createPolicy }) => {\n    editor.placeholder = {}\n    return createPolicy({\n      name: \"placeholder\",\n      editableProps: {\n        renderPlaceholder,\n      },\n    })\n  }\n) as TypedPlugin<PlaceholderPluginCustomTypes>\n","import { BaseEditor, BaseText } from \"slate\";\nimport { HistoryEditor } from \"slate-history\";\nimport { ReactEditor } from \"slate-react\";\n\nimport { AnchorPlugin } from \"~/src/anchor-plugin\";\nimport { AtomicDeletePlugin } from \"~/src/atomic-delete-plugin\";\nimport { ImagePlugin } from \"~/src/image-plugin\";\nimport { BlockQuotePlugin } from \"~/src/block-quote-plugin\";\nimport { CodeBlockPlugin } from \"~/src/code-block-plugin\";\nimport { CollapsibleParagraphPlugin } from \"~/src/collapsible-paragraph-plugin\";\nimport { ConvertElementPlugin } from \"~/src/convert-element-plugin\";\nimport { HeadingPlugin } from \"~/src/heading-plugin\";\nimport { HorizontalRulePlugin } from \"~/src/horizontal-rule-plugin\";\nimport { ListPlugin } from \"~/src/list-plugin\";\nimport { MarksPlugin } from \"~/src/marks-plugin\";\nimport { NormalizeAfterDeletePlugin } from \"~/src/normalize-after-delete-plugin\";\nimport { ExtractCustomTypes } from \"~/src/sink\";\nimport { TablePlugin } from \"~/src/table-plugin\";\nimport { ThemePlugin } from \"~/src/theme-plugin\";\nimport { ToolbarPlugin } from \"~/src/toolbar-plugin\";\nimport { TrailingBlockPlugin } from \"~/src/trailing-block-plugin\";\nimport { PasteMarkdownPlugin } from \"../paste-markdown-plugin\";\nimport { PlaceholderPlugin } from \"../placeholder-plugin\";\nimport { WysimarkEditor } from \"./types\";\n\nexport const plugins = [\n  PasteMarkdownPlugin,\n  ConvertElementPlugin,\n  AnchorPlugin,\n  HeadingPlugin,\n  MarksPlugin,\n  BlockQuotePlugin,\n  CodeBlockPlugin,\n  TablePlugin,\n  HorizontalRulePlugin,\n  TrailingBlockPlugin,\n  ListPlugin,\n  AtomicDeletePlugin,\n  NormalizeAfterDeletePlugin,\n  CollapsibleParagraphPlugin,\n  ThemePlugin,\n  ToolbarPlugin,\n  ImagePlugin,\n  PlaceholderPlugin,\n];\n\nexport type PluginTypes = ExtractCustomTypes<typeof plugins>;\n\ntype CustomEditor = PluginTypes[\"Editor\"];\ntype CustomElement = PluginTypes[\"Element\"];\ntype CustomText = PluginTypes[\"Text\"];\n\nexport type OptionsType = PluginTypes[\"Options\"];\nexport type Element = CustomElement;\nexport type Text = CustomText;\n\ndeclare module \"slate\" {\n  interface CustomTypes {\n    Editor: BaseEditor &\n      ReactEditor &\n      HistoryEditor &\n      CustomEditor &\n      WysimarkEditor;\n    Element: CustomElement;\n    Text: BaseText & CustomText;\n  }\n}\n","import { createSink } from \"~/src/sink\"\n\nimport { plugins, PluginTypes } from \"./plugins\"\n\nconst Sink = createSink<PluginTypes>(plugins)\n\nconst { withSink, SinkEditable } = Sink\nexport { SinkEditable, withSink }\n","import { useState } from \"react\"\nimport { createEditor, Editor, Transforms } from \"slate\"\nimport { withHistory } from \"slate-history\"\nimport { ReactEditor, withReact } from \"slate-react\"\n\nimport { parse, serialize, escapeUrlSlashes } from \"../convert\"\nimport { Element } from \"./plugins\"\nimport { withSink } from \"./SinkEditable\"\nimport { WysimarkEditor } from \"./types\"\n\nexport function useEditor({\n  authToken,\n  height,\n  minHeight,\n  maxHeight,\n}: {\n  authToken?: string\n  height?: string | number\n  minHeight?: string | number\n  maxHeight?: string | number\n}): Editor & ReactEditor & WysimarkEditor {\n  const [editor] = useState(() => {\n    const editor = createEditor()\n    const nextEditor = withSink(withReact(withHistory(editor)), {\n      toolbar: {\n        height,\n        minHeight,\n        maxHeight,\n        /**\n         * If `authToken` is provided then show upload buttons.\n         */\n        showUploadButtons: !!authToken,\n      },\n      image: {}\n    })\n    nextEditor.convertElement.addConvertElementType(\"paragraph\")\n    editor.wysimark = {\n      //   initialMarkdown,\n      //   initialValue: parse(initialMarkdown),\n    }\n    editor.getMarkdown = () => {\n      return serialize(editor.children as Element[])\n    }\n    editor.setMarkdown = (markdown: string) => {\n      // Escape forward slashes in URLs before parsing\n      const escapedMarkdown = escapeUrlSlashes(markdown);\n      const documentValue = parse(escapedMarkdown)\n      editor.children = documentValue\n      editor.selection = null\n      Transforms.select(editor, Editor.start(editor, [0]))\n    }\n    return nextEditor\n  })\n\n  return editor\n}\n","import { isPlainObject } from 'is-plain-object'\nimport { Operation, Range } from 'slate'\n\ninterface Batch {\n  operations: Operation[]\n  selectionBefore: Range | null\n}\n\n/**\n * `History` objects hold all of the operations that are applied to a value, so\n * they can be undone or redone as necessary.\n */\n\nexport interface History {\n  redos: Batch[]\n  undos: Batch[]\n}\n\n// eslint-disable-next-line no-redeclare\nexport const History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n\n  isHistory(value: any): value is History {\n    return (\n      isPlainObject(value) &&\n      Array.isArray(value.redos) &&\n      Array.isArray(value.undos) &&\n      (value.redos.length === 0 || Operation.isOperationList(value.redos[0])) &&\n      (value.undos.length === 0 || Operation.isOperationList(value.undos[0]))\n    )\n  },\n}\n","import { BaseEditor, Editor } from 'slate'\nimport { History } from './history'\n\n/**\n * Weakmaps for attaching state to the editor.\n */\n\nexport const HISTORY = new WeakMap<Editor, History>()\nexport const SAVING = new WeakMap<Editor, boolean | undefined>()\nexport const MERGING = new WeakMap<Editor, boolean | undefined>()\n\n/**\n * `HistoryEditor` contains helpers for history-enabled editors.\n */\n\nexport interface HistoryEditor extends BaseEditor {\n  history: History\n  undo: () => void\n  redo: () => void\n}\n\n// eslint-disable-next-line no-redeclare\nexport const HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n\n  isHistoryEditor(value: any): value is HistoryEditor {\n    return History.isHistory(value.history) && Editor.isEditor(value)\n  },\n\n  /**\n   * Get the merge flag's current value.\n   */\n\n  isMerging(editor: HistoryEditor): boolean | undefined {\n    return MERGING.get(editor)\n  },\n\n  /**\n   * Get the saving flag's current value.\n   */\n\n  isSaving(editor: HistoryEditor): boolean | undefined {\n    return SAVING.get(editor)\n  },\n\n  /**\n   * Redo to the previous saved state.\n   */\n\n  redo(editor: HistoryEditor): void {\n    editor.redo()\n  },\n\n  /**\n   * Undo to the previous saved state.\n   */\n\n  undo(editor: HistoryEditor): void {\n    editor.undo()\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n\n  withoutMerging(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isMerging(editor)\n    MERGING.set(editor, false)\n    fn()\n    MERGING.set(editor, prev)\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n\n  withoutSaving(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isSaving(editor)\n    SAVING.set(editor, false)\n    fn()\n    SAVING.set(editor, prev)\n  },\n}\n","import { Editor, Operation, Path, Range, Transforms } from 'slate'\n\nimport { HistoryEditor } from './history-editor'\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withHistory = <T extends Editor>(editor: T) => {\n  const e = editor as T & HistoryEditor\n  const { apply } = e\n  e.history = { undos: [], redos: [] }\n\n  e.redo = () => {\n    const { history } = e\n    const { redos } = history\n\n    if (redos.length > 0) {\n      const batch = redos[redos.length - 1]\n\n      if (batch.selectionBefore) {\n        Transforms.setSelection(e, batch.selectionBefore)\n      }\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (const op of batch.operations) {\n            e.apply(op)\n          }\n        })\n      })\n\n      history.redos.pop()\n      history.undos.push(batch)\n    }\n  }\n\n  e.undo = () => {\n    const { history } = e\n    const { undos } = history\n\n    if (undos.length > 0) {\n      const batch = undos[undos.length - 1]\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          const inverseOps = batch.operations.map(Operation.inverse).reverse()\n\n          for (const op of inverseOps) {\n            e.apply(op)\n          }\n          if (batch.selectionBefore) {\n            Transforms.setSelection(e, batch.selectionBefore)\n          }\n        })\n      })\n\n      history.redos.push(batch)\n      history.undos.pop()\n    }\n  }\n\n  e.apply = (op: Operation) => {\n    const { operations, history } = e\n    const { undos } = history\n    const lastBatch = undos[undos.length - 1]\n    const lastOp =\n      lastBatch && lastBatch.operations[lastBatch.operations.length - 1]\n    let save = HistoryEditor.isSaving(e)\n    let merge = HistoryEditor.isMerging(e)\n\n    if (save == null) {\n      save = shouldSave(op, lastOp)\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false\n        } else if (operations.length !== 0) {\n          merge = true\n        } else {\n          merge = shouldMerge(op, lastOp)\n        }\n      }\n\n      if (lastBatch && merge) {\n        lastBatch.operations.push(op)\n      } else {\n        const batch = {\n          operations: [op],\n          selectionBefore: e.selection,\n        }\n        undos.push(batch)\n      }\n\n      while (undos.length > 100) {\n        undos.shift()\n      }\n\n      history.redos = []\n    }\n\n    apply(op)\n  }\n\n  return e\n}\n\n/**\n * Check whether to merge an operation into the previous operation.\n */\n\nconst shouldMerge = (op: Operation, prev: Operation | undefined): boolean => {\n  if (\n    prev &&\n    op.type === 'insert_text' &&\n    prev.type === 'insert_text' &&\n    op.offset === prev.offset + prev.text.length &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'remove_text' &&\n    prev.type === 'remove_text' &&\n    op.offset + op.text.length === prev.offset &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation needs to be saved to the history.\n */\n\nconst shouldSave = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection') {\n    return false\n  }\n\n  return true\n}\n"],"mappings":"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ACL,IAAK,OACKrP,GAAR,MACe,OAAOA,GAAtB,YACa,OAAOA,GAApB,UACA,CAAC,MAAMA,CAAK,GACZ,GAAKA,EACDw2B,EAAW,aAAannB,EAAKrP,CAAK,EAClCw2B,EAAW,gBAAgBnnB,CAAG,EAClC,MACF,IAAK,UACL,IAAK,QACKrP,GAAR,MACe,OAAOA,GAAtB,YACa,OAAOA,GAApB,UACA,MAAMA,CAAK,EACPw2B,EAAW,gBAAgBnnB,CAAG,EAC9BmnB,EAAW,aAAannB,EAAKrP,CAAK,EACtC,MACF,IAAK,UACHsY,GAA0B,eAAgBke,CAAU,EACpDle,GAA0B,SAAUke,CAAU,EAC9C7uB,GAAqB6uB,EAAY,UAAWx2B,CAAK,EACjD,MACF,IAAK,eACH8H,GACE0uB,EACA,+BACA,gBACAx2B,CACF,EACA,MACF,IAAK,eACH8H,GACE0uB,EACA,+BACA,gBACAx2B,CACF,EACA,MACF,IAAK,YACH8H,GACE0uB,EACA,+BACA,aACAx2B,CACF,EACA,MACF,IAAK,YACH8H,GACE0uB,EACA,+BACA,aACAx2B,CACF,EACA,MACF,IAAK,aACH8H,GACE0uB,EACA,+BACA,cACAx2B,CACF,EACA,MACF,IAAK,YACH8H,GACE0uB,EACA,+BACA,aACAx2B,CACF,EACA,MACF,IAAK,UACH8H,GACE0uB,EACA,uCACA,WACAx2B,CACF,EACA,MACF,IAAK,UACH8H,GACE0uB,EACA,uCACA,WACAx2B,CACF,EACA,MACF,IAAK,WACH8H,GACE0uB,EACA,uCACA,YACAx2B,CACF,EACA,MACF,IAAK,KACH2H,GAAqB6uB,EAAY,KAAMx2B,CAAK,EAC5C,MACF,IAAK,YACL,IAAK,cACH,MACF,SAEI,EAAE,EAAIqP,EAAI,SACDA,EAAI,CAAC,IAAb,KAA0BA,EAAI,CAAC,IAAb,KACVA,EAAI,CAAC,IAAb,KAA0BA,EAAI,CAAC,IAAb,OAElBA,EAAMrE,GAAQ,IAAIqE,CAAG,GAAKA,EACzB1H,GAAqB6uB,EAAYnnB,EAAKrP,CAAK,EACnD,CACF,CACA,SAASyqC,GAAuBjU,EAAYn3B,E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","names":["require_react_production","__commonJSMin","exports","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","MAYBE_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","ReactNoopUpdateQueue","assign","emptyObject","Component","props","context","updater","partialState","callback","ComponentDummy","PureComponent","pureComponentPrototype","isArrayImpl","ReactSharedInternals","hasOwnProperty","ReactElement","type","key","self","source","owner","cloneAndReplaceKey","oldElement","newKey","isValidElement","object","escape","escaperLookup","match","userProvidedKeyEscapeRegex","getElementKey","element","index","noop$1","resolveThenable","thenable","fulfilledValue","error","mapIntoArray","children","array","escapedPrefix","nameSoFar","invokeCallback","c","nextNamePrefix","i","mapChildren","func","result","count","child","lazyInitializer","payload","ctor","moduleObject","reportGlobalError","event","noop","forEachFunc","forEachContext","n","fn","config","propName","childArray","defaultValue","childrenLength","render","compare","scope","prevTransition","currentTransition","returnValue","onStartTransitionFinish","usable","action","initialState","permalink","deps","Context","value","initialValue","create","ref","passthrough","reducer","initialArg","init","subscribe","getSnapshot","getServerSnapshot","require_react","__commonJSMin","exports","module","require_scheduler_production","__commonJSMin","exports","push","heap","node","index","a","parentIndex","parent","compare","peek","pop","first","last","length","halfLength","leftIndex","left","rightIndex","right","b","diff","localPerformance","localDate","initialTime","taskQueue","timerQueue","taskIdCounter","currentTask","currentPriorityLevel","isPerformingWork","isHostCallbackScheduled","isHostTimeoutScheduled","localSetTimeout","localClearTimeout","localSetImmediate","advanceTimers","currentTime","timer","handleTimeout","requestHostCallback","firstTimer","requestHostTimeout","isMessageLoopRunning","taskTimeoutID","frameInterval","startTime","shouldYieldToHost","performWorkUntilDeadline","hasMoreWork","previousPriorityLevel","callback","continuationCallback","schedulePerformWorkUntilDeadline","channel","port","ms","task","fps","eventHandler","priorityLevel","options","timeout","parentPriorityLevel","require_scheduler","__commonJSMin","exports","module","require_react_dom_production","__commonJSMin","exports","React","formatProdErrorMessage","code","url","i","noop","Internals","REACT_PORTAL_TYPE","createPortal$1","children","containerInfo","implementation","key","ReactSharedInternals","getCrossOriginStringAs","as","input","container","fn","previousTransition","previousUpdatePriority","href","options","crossOrigin","integrity","fetchPriority","form","a","action","initialState","permalink","require_react_dom","__commonJSMin","exports","module","checkDCE","err","require_react_dom_client_production","__commonJSMin","exports","Scheduler","React","ReactDOM","formatProdErrorMessage","code","url","i","isValidContainer","node","REACT_LEGACY_ELEMENT_TYPE","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_OFFSCREEN_TYPE","REACT_MEMO_CACHE_SENTINEL","MAYBE_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","REACT_CLIENT_REFERENCE","getComponentNameFromType","type","innerType","ReactSharedInternals","assign","prefix","suffix","describeBuiltInComponentFrame","name","x","match","reentry","describeNativeComponentFrame","fn","construct","previousPrepareStackTrace","RunInRootFrame","Fake","control","x$0","x$1","sample","namePropDescriptor","_RunInRootFrame$Deter","sampleStack","controlStack","sampleLines","controlLines","frame","describeFiber","fiber","getStackByFiberInDevAndProd","workInProgress","info","getNearestMountedFiber","nearestMounted","getSuspenseInstanceFromFiber","suspenseState","assertIsMounted","findCurrentFiberUsingSlowPath","alternate","a","b","parentA","parentB","didFindChild","child$2","findCurrentHostFiberImpl","tag","isArrayImpl","ReactDOMSharedInternals","sharedNotPendingObject","valueStack","index","createCursor","defaultValue","pop","cursor","push","value","contextStackCursor","contextFiberStackCursor","rootInstanceStackCursor","hostTransitionProviderCursor","pushHostContainer","nextRootInstance","getOwnHostContext","getChildHostContextProd","popHostContainer","pushHostContext","context","JSCompiler_inline_result","popHostContext","HostTransitionContext","hasOwnProperty","scheduleCallback$3","cancelCallback$1","shouldYield","requestPaint","now","getCurrentPriorityLevel","ImmediatePriority","UserBlockingPriority","NormalPriority$1","LowPriority","IdlePriority","log$1","unstable_setDisableYieldValue","rendererID","injectedHook","onCommitRoot","root","setIsStrictModeForDevtools","newIsStrictMode","clz32","clz32Fallback","log","LN2","nextTransitionLane","nextRetryLane","getHighestPriorityLanes","lanes","pendingSyncLanes","getNextLanes","wipLanes","pendingLanes","nextLanes","suspendedLanes","pingedLanes","warmLanes","nonIdlePendingLanes","checkIfRootIsPrerendering","renderLanes","computeExpirationTime","lane","currentTime","claimNextTransitionLane","claimNextRetryLane","createLaneMap","initial","laneMap","markRootUpdated$1","updateLane","markRootFinished","finishedLanes","remainingLanes","spawnedLane","updatedLanes","suspendedRetryLanes","previouslyPendingLanes","entanglements","expirationTimes","hiddenUpdates","index$7","hiddenUpdatesForLane","update","markSpawnedDeferredLane","entangledLanes","spawnedLaneIndex","markRootEntangled","rootEntangledLanes","index$8","lanesToEventPriority","resolveUpdatePriority","updatePriority","getEventPriority","runWithPriority","priority","previousPriority","randomKey","internalInstanceKey","internalPropsKey","internalContainerInstanceKey","internalEventHandlersKey","internalEventHandlerListenersKey","internalEventHandlesSetKey","internalRootNodeResourcesKey","internalHoistableMarker","detachDeletedInstance","getClosestInstanceFromNode","targetNode","targetInst","parentNode","getParentSuspenseInstance","getInstanceFromNode","getNodeFromInstance","inst","getResourcesFromRoot","resources","markNodeAsHoistable","allNativeEvents","registrationNameDependencies","registerTwoPhaseEvent","registrationName","dependencies","registerDirectEvent","canUseDOM","VALID_ATTRIBUTE_NAME_REGEX","illegalAttributeNameCache","validatedAttributeNameCache","isAttributeNameSafe","attributeName","setValueForAttribute","prefix$10","setValueForKnownAttribute","setValueForNamespacedAttribute","namespace","getToStringValue","isCheckable","elem","trackValueOnNode","valueField","descriptor","currentValue","get","set","track","updateValueIfChanged","tracker","lastValue","getActiveElement","doc","escapeSelectorAttributeValueInsideDoubleQuotesRegex","escapeSelectorAttributeValueInsideDoubleQuotes","ch","updateInput","element","lastDefaultValue","checked","defaultChecked","setDefaultValue","initInput","isHydrating","updateOptions","multiple","propValue","setDefaultSelected","updateTextarea","initTextarea","children","setTextContent","text","firstChild","unitlessNumbers","setValueForStyle","style","styleName","isCustomProperty","setValueForStyles","styles","prevStyles","styleName$16","styleName$17","isCustomElement","tagName","aliases","isJavaScriptProtocol","sanitizeURL","currentReplayingEvent","getEventTarget","nativeEvent","restoreTarget","restoreQueue","restoreStateOfTarget","target","internalInstance","props","otherNode","otherProps","isInsideEventHandler","batchedUpdates$1","flushSyncWork$1","getListener","stateNode","passiveBrowserEventsSupported","options","startText","fallbackText","getData","start","startValue","startLength","end","endValue","endLength","minEnd","getEventCharCode","keyCode","functionThatReturnsTrue","functionThatReturnsFalse","createSyntheticEvent","Interface","SyntheticBaseEvent","reactName","reactEventType","nativeEventTarget","propName","event","EventInterface","SyntheticEvent","UIEventInterface","SyntheticUIEvent","lastMovementX","lastMovementY","lastMouseEvent","MouseEventInterface","getEventModifierState","SyntheticMouseEvent","DragEventInterface","SyntheticDragEvent","FocusEventInterface","SyntheticFocusEvent","AnimationEventInterface","SyntheticAnimationEvent","ClipboardEventInterface","SyntheticClipboardEvent","CompositionEventInterface","SyntheticCompositionEvent","normalizeKey","translateToKey","modifierKeyToProp","modifierStateGetter","keyArg","KeyboardEventInterface","key","SyntheticKeyboardEvent","PointerEventInterface","SyntheticPointerEvent","TouchEventInterface","SyntheticTouchEvent","TransitionEventInterface","SyntheticTransitionEvent","WheelEventInterface","SyntheticWheelEvent","ToggleEventInterface","SyntheticToggleEvent","END_KEYCODES","canUseCompositionEvent","documentMode","canUseTextInputEvent","useFallbackCompositionData","SPACEBAR_CHAR","hasSpaceKeypress","isFallbackCompositionEnd","domEventName","getDataFromCustomEvent","isComposing","getNativeBeforeInputChars","getFallbackBeforeInputChars","supportedInputTypes","isTextInputElement","nodeName","createAndAccumulateChangeEvent","dispatchQueue","accumulateTwoPhaseListeners","activeElement$1","activeElementInst$1","runEventInBatch","processDispatchQueue","getInstIfValueChanged","getTargetInstForChangeEvent","isInputEventSupported","isSupported$jscomp$inline_418","element$jscomp$inline_419","JSCompiler_inline_result$jscomp$283","stopWatchingForValueChange","handlePropertyChange","handleEventsForInputEventPolyfill","getTargetInstForInputEventPolyfill","getTargetInstForClickEvent","getTargetInstForInputOrChangeEvent","is","y","objectIs","shallowEqual","objA","objB","keysA","keysB","currentKey","getLeafNode","getNodeForCharacterOffset","offset","nodeEnd","containsNode","outerNode","innerNode","getActiveElementDeep","containerInfo","hasSelectionCapabilities","restoreSelection","priorSelectionInformation","curFocusedElem","priorSelectionRange","length","endMarker","skipSelectionChangeEvent","activeElement","activeElementInst","lastSelection","mouseDown","constructSelectEvent","makePrefixMap","styleProp","eventName","prefixes","vendorPrefixes","prefixedEventNames","getVendorPrefixedEventName","prefixMap","ANIMATION_END","ANIMATION_ITERATION","ANIMATION_START","TRANSITION_RUN","TRANSITION_START","TRANSITION_CANCEL","TRANSITION_END","topLevelEventsToReactNames","simpleEventPluginEvents","registerSimpleEvent","concurrentQueues","concurrentQueuesIndex","concurrentlyUpdatedLanes","finishQueueingConcurrentUpdates","endIndex","queue","pending","markUpdateLaneFromFiberToRoot","enqueueUpdate$1","enqueueConcurrentHookUpdate","getRootForUpdatedFiber","enqueueConcurrentRenderForLane","sourceFiber","isHidden","parent","nestedUpdateCount","rootWithNestedUpdates","emptyContextObject","CapturedStacks","createCapturedValueAtFiber","source","existing","forkStack","forkStackIndex","treeForkProvider","treeForkCount","idStack","idStackIndex","treeContextProvider","treeContextId","treeContextOverflow","pushTreeFork","totalChildren","pushTreeId","baseIdWithLeadingBit","baseLength","numberOfOverflowBits","pushMaterializedTreeId","popTreeContext","hydrationParentFiber","nextHydratableInstance","hydrationErrors","rootOrSingletonContext","HydrationMismatchException","throwOnHydrationMismatch","error","queueHydrationError","prepareToHydrateHostInstance","instance","listenToNonDelegatedEvent","mediaEventTypes","checkForUnmatchedText","noop$1","popToNextHostParent","popHydrationState","shouldClear","JSCompiler_temp","shouldSetTextContent","getNextHydratable","resetHydrationState","SuspenseException","SuspenseyCommitException","noopSuspenseyCommitThenable","isThenableResolved","thenable","noop$3","trackUsedThenable","thenableState","workInProgressRoot","fulfilledValue","fulfilledThenable","rejectedThenable","suspendedThenable","getSuspendedThenable","thenableState$1","thenableIndexCounter$1","unwrapThenable","coerceRef","throwOnInvalidObjectType","returnFiber","newChild","resolveLazy","lazyType","init","createChildReconciler","shouldTrackSideEffects","deleteChild","childToDelete","deletions","deleteRemainingChildren","currentFirstChild","mapRemainingChildren","existingChildren","useFiber","pendingProps","createWorkInProgress","placeChild","newFiber","lastPlacedIndex","newIndex","placeSingleChild","updateTextNode","current","textContent","createFiberFromText","updateElement","elementType","updateFragment","createFiberFromTypeAndProps","updatePortal","portal","createFiberFromPortal","fragment","createFiberFromFragment","createChild","readContextDuringReconciliation","updateSlot","oldFiber","updateFromMap","newIdx","reconcileChildrenArray","newChildren","resultingFirstChild","previousNewFiber","nextOldFiber","child","reconcileChildrenIterator","step","reconcileChildFibersImpl","firstChildFiber","createFiberImplClass","reconcileChildFibers","mountChildFibers","currentTreeHiddenStackCursor","prevEntangledRenderLanesCursor","pushHiddenContext","entangledRenderLanes","reuseHiddenContextOnStack","popHiddenContext","suspenseHandlerStackCursor","shellBoundary","pushPrimaryTreeSuspenseHandler","handler","suspenseStackCursor","pushOffscreenSuspenseHandler","reuseSuspenseHandlerOnStack","popSuspenseHandler","findFirstSuspended","row","state","AbortControllerLocal","listeners","signal","listener","scheduleCallback$2","NormalPriority","CacheContext","createCache","releaseCache","cache","currentEntangledListeners","currentEntangledPendingCount","currentEntangledLane","currentEntangledActionThenable","entangleAsyncAction","transition","entangledListeners","requestTransitionLane","resolve","pingEngtangledActionScope","chainThenableValue","result","thenableWithOverride","prevOnStartTransitionFinish","returnValue","resumedCache","peekCacheFromPool","cacheResumedFromPreviousRender","pushTransition","offscreenWorkInProgress","prevCachePool","getSuspendedCache","cacheFromPool","currentlyRenderingFiber$1","currentHook","workInProgressHook","didScheduleRenderPhaseUpdate","didScheduleRenderPhaseUpdateDuringThisPass","shouldDoubleInvokeUserFnsInHooksDEV","localIdCounter","thenableIndexCounter","globalClientIdCounter","throwInvalidHookError","areHookInputsEqual","nextDeps","prevDeps","renderWithHooks","Component","secondArg","nextRenderLanes","HooksDispatcherOnMount","HooksDispatcherOnUpdate","renderWithHooksAgain","finishRenderingHooks","ContextOnlyDispatcher","didRenderTooFewHooks","didReceiveUpdate","checkIfContextChanged","numberOfReRenders","HooksDispatcherOnRerender","TransitionAwareHostComponent","dispatcher","maybeThenable","useThenable","checkDidRenderIdHook","didRenderIdHook","bailoutHooks","resetHooksOnUnwind","mountWorkInProgressHook","hook","updateWorkInProgressHook","nextCurrentHook","nextWorkInProgressHook","createFunctionComponentUpdateQueue","use","usable","readContext","useMemoCache","size","memoCache","updateQueue","array","basicStateReducer","action","updateReducer","reducer","updateReducerImpl","baseQueue","pendingQueue","baseFirst","newBaseQueueFirst","newBaseQueueLast","didReadFromEntangledAsyncAction$54","workInProgressRootRenderLanes","revertLane","workInProgressRootSkippedLanes","rerenderReducer","dispatch","lastRenderPhaseUpdate","newState","updateSyncExternalStore","subscribe","getSnapshot","getServerSnapshot","isHydrating$jscomp$0","snapshotChanged","updateEffect","subscribeToStore","pushEffect","updateStoreInstance","pushStoreConsistencyCheck","renderedSnapshot","nextSnapshot","checkIfSnapshotChanged","forceStoreRerender","latestGetSnapshot","nextValue","scheduleUpdateOnFiber","mountStateImpl","initialState","initialStateInitializer","updateOptimisticImpl","passthrough","dispatchActionState","actionQueue","setPendingState","setState","payload","isRenderPhaseUpdate","actionNode","runActionStateAction","prevState","prevTransition","currentTransition","onStartTransitionFinish","handleActionReturnValue","onActionError","error$60","nextState","onActionSuccess","notifyActionListeners","last","actionStateReducer","oldState","mountActionState","initialStateProp","ssrFormState","JSCompiler_inline_result$jscomp$0","inRootOrSingleton","dispatchSetState","dispatchOptimisticSetState","updateActionState","stateHook","updateActionStateImpl","currentStateHook","actionQueueHook","actionStateActionEffect","rerenderActionState","create","deps","updateRef","mountEffectImpl","fiberFlags","hookFlags","updateEffectImpl","mountEffect","updateInsertionEffect","updateLayoutEffect","imperativeHandleEffect","ref","refCleanup","updateImperativeHandle","mountDebugValue","updateCallback","callback","updateMemo","nextCreate","mountDeferredValueImpl","initialValue","requestDeferredLane","updateDeferredValueImpl","prevValue","startTransition","pendingState","finishedState","thenableForFinishedState","dispatchSetStateInternal","requestUpdateLane","noop$2","startHostTransition","formFiber","formData","ensureFormComponentIsStateful","requestFormReset$1","existingStateHook","initialResetState","resetStateQueue","useHostTransitionStatus","updateId","updateRefresh","refreshCache","provider","createUpdate","root$63","enqueueUpdate","entangleTransitions","dispatchReducerAction","enqueueRenderPhaseUpdate","entangleTransitionUpdate","currentState","eagerState","throwIfDuringRender","queueLanes","initialArg","identifierPrefix","idWithLeadingBit","booleanOrThenable","applyDerivedStateFromProps","ctor","getDerivedStateFromProps","nextProps","classComponentUpdater","component","checkShouldComponentUpdate","oldProps","newProps","nextContext","callComponentWillReceiveProps","resolveClassComponentProps","baseProps","propName$67","reportGlobalError","defaultOnUncaughtError","defaultOnCaughtError","defaultOnRecoverableError","logUncaughtError","errorInfo","onUncaughtError","e$68","logCaughtError","boundary","onCaughtError","e$69","createRootErrorUpdate","createClassErrorUpdate","initializeClassErrorUpdate","getDerivedStateFromError","legacyErrorBoundariesThatAlreadyFailed","stack","throwException","rootRenderLanes","propagateParentContextChanges","renderDidSuspendDelayIfPossible","workInProgressRootExitStatus","attachPingListener","enqueueCapturedUpdate","wrapperError","workInProgressRootConcurrentErrors","SelectiveHydrationException","reconcileChildren","nextChildren","updateForwardRef","propsWithoutRef","prepareToReadContext","bailoutOnAlreadyFinishedWork","updateMemoComponent","shouldConstruct","updateSimpleMemoComponent","checkScheduledUpdateOrContext","prevProps","updateFunctionComponent","updateOffscreenComponent","nextIsDetached","markRef","deferHiddenOffscreenComponent","nextBaseLanes","replayFunctionComponent","updateClassComponent","contextType","initializeUpdateQueue","processUpdateQueue","suspendIfUpdateReadFromEntangledAsyncAction","unresolvedOldProps","oldContext","contextType$jscomp$0","hasForceUpdate","cloneUpdateQueue","mountHostRootWithoutHydrating","SUSPENDED_MARKER","mountSuspenseOffscreenState","getRemainingWorkInPrimaryTree","primaryTreeDidDefer","workInProgressDeferredLane","updateSuspenseComponent","showFallback","didSuspend","nextInstance","JSCompiler_temp$jscomp$0","c","mountWorkInProgressOffscreenFiber","mountSuspensePrimaryChildren","retrySuspenseComponentWithoutHydrating","digest","retryDehydratedSuspenseBoundary","primaryChildren","offscreenProps","mode","createFiberFromOffscreen","scheduleSuspenseWorkOnFiber","propagationRoot","scheduleContextWorkOnParentPath","initSuspenseListRenderState","isBackwards","tail","lastContentRow","tailMode","renderState","updateSuspenseListComponent","revealOrder","attemptEarlyBailoutIfNoScheduledUpdate","pushProvider","didSuspendBefore","beginWork","lazyComponent","propagateContextChanges","getResource","getOwnerDocumentFromRootContainer","setInitialProperties","resolveSingletonInstance","canHydrateInstance","canHydrateTextInstance","valueCursor","currentlyRenderingFiber","lastContextDependency","providerFiber","popProvider","contexts","forcePropagateEntireTree","list","nextFiber","dependency","isInsidePropagationBailout","currentParent","currentDependencies","readContextForConsumer","consumer","executionContext","capturedUpdate","newFirst","newLast","clone","didReadFromEntangledAsyncAction","entangledActionThenable","workInProgress$jscomp$0","instance$jscomp$0","firstBaseUpdate","lastBaseUpdate","lastPendingUpdate","firstPendingUpdate","isHiddenUpdate","callCallback","commitCallbacks","callbacks","commitHookEffectListMount","flags","finishedWork","lastEffect","firstEffect","captureCommitPhaseError","commitHookEffectListUnmount","nearestMountedAncestor$jscomp$0","destroy","nearestMountedAncestor","commitClassCallbacks","safelyCallComponentWillUnmount","safelyAttachRef","instanceToUse","safelyDetachRef","error$112","commitHostMount","commitHostUpdate","domElement","updateProperties","isHostParent","getHostSibling","insertOrAppendPlacementNodeIntoContainer","before","insertOrAppendPlacementNode","offscreenSubtreeIsHidden","offscreenSubtreeWasHidden","needsFormReset","PossiblyWeakSet","nextEffect","shouldFireAfterActiveInstanceBlur","commitBeforeMutationEffects","eventsEnabled","_enabled","selection","anchorOffset","focusNode","indexWithinAnchor","indexWithinFocus","next","selectionInformation","resolvedPrevProps","clearContainerSparingly","commitLayoutEffectOnFiber","finishedRoot","recursivelyTraverseLayoutEffects","error$111","commitSuspenseHydrationCallbacks","prevOffscreenSubtreeIsHidden","prevOffscreenSubtreeWasHidden","recursivelyTraverseReappearLayoutEffects","detachFiberAfterEffects","hostParent","hostParentIsContainer","recursivelyTraverseDeletionEffects","commitDeletionEffectsOnFiber","deletedFiber","prevHostParent","prevHostParentIsContainer","prevHostParentIsContainer$119","clearSuspenseBoundary","retryIfBlockedOn","getRetryCache","retryCache","attachSuspenseRetryListeners","wakeables","wakeable","retry","resolveRetryWakeable","recursivelyTraverseMutationEffects","root$jscomp$0","parentFiber","commitMutationEffectsOnFiber","currentHoistableRoot","commitReconciliationEffects","hoistableRoot","currentResource","maybeNodes","getHydratableHoistableCache","mountHoistable","acquireResource","nextNode","attributes","tagCaches","getHoistableRoot","recursivelyResetForms","globalMostRecentFallbackTime","recursivelyTraverseDisappearLayoutEffects","display","parent$jscomp$0","parent$113","before$114","parent$115","before$116","finishedRoot$jscomp$0","includeWorkInProgressEffects","hiddenCallbacks","commitOffscreenPassiveMountEffects","previousCache","commitCachePassiveMountEffect","recursivelyTraversePassiveMountEffects","committedLanes","committedTransitions","commitPassiveMountOnFiber","_finishedWork$memoize2","id","onPostCommit","recursivelyTraverseAtomicPassiveEffects","recursivelyTraverseReconnectPassiveEffects","committedLanes$jscomp$0","committedTransitions$jscomp$0","suspenseyCommitFlag","recursivelyAccumulateSuspenseyCommit","accumulateSuspenseyCommitOnFiber","suspendResource","previousHoistableRoot","detachAlternateSiblings","previousFiber","recursivelyTraversePassiveUnmountEffects","commitPassiveUnmountEffectsInsideOfDeletedTree_begin","commitPassiveUnmountOnFiber","recursivelyTraverseDisconnectPassiveEffects","deletedSubtreeRoot","sibling","FiberNode","resetWorkInProgress","owner","fiberTag","isHostHoistableType","elements","primaryChildInstance","content","markUpdate","preloadResourceAndSuspendIfNeeded","resource","preloadResource","scheduleRetryEffect","retryQueue","workInProgressSuspendedRetryLanes","cutOffTailIfNeeded","hasRenderedATailFallback","lastTailNode","lastTailNode$131","bubbleProperties","completedWork","didBailout","newChildLanes","subtreeFlags","child$132","completeWork","queueRecoverableErrors","cache$144","listenToAllSupportedEvents","workInProgressRootRenderTargetTime","unwindWork","unwindInterruptedWork","interruptedWork","DefaultAsyncDispatcher","resourceType","cacheForType","PossiblyWeakMap","workInProgressSuspendedReason","workInProgressThrownValue","workInProgressRootDidSkipSuspendedSiblings","workInProgressRootIsPrerendering","workInProgressRootDidAttachPingListener","workInProgressRootInterleavedUpdatedLanes","workInProgressRootPingedLanes","workInProgressRootRecoverableErrors","workInProgressRootDidIncludeRecursiveRenderUpdate","workInProgressTransitions","rootDoesHavePassiveEffects","rootWithPendingPassiveEffects","pendingPassiveEffectsLanes","pendingPassiveEffectsRemainingLanes","pendingPassiveTransitions","actionScopeLane","suspenseHandler","prepareFreshStack","markRootSuspended","ensureRootIsScheduled","performWorkOnRoot","forceSync","shouldTimeSlice","exitStatus","renderRootConcurrent","renderRootSync","renderWasConcurrent","isRenderConsistentWithExternalStores","wasRootDehydrated","scheduleTimeout","commitRootWhenReady","errors","recoverableErrors","transitions","didIncludeRenderPhaseUpdate","didSkipSuspendedSiblings","suspendedCommitReason","completedRenderStartTime","completedRenderEndTime","suspendedState","noop","waitForCommitToBeReady","commitRoot","check","didAttemptEntireTree","index$6","flushSyncWorkAcrossRoots_impl","resetWorkInProgressStack","timeoutHandle","cancelTimeout","allEntangledLanes","index$4","handleThrow","thrownValue","pushDispatcher","prevDispatcher","pushAsyncDispatcher","prevAsyncDispatcher","shouldYieldForPrerendering","prevExecutionContext","unitOfWork","reason","throwAndUnwindWorkLoop","workLoopSync","thrownValue$164","performUnitOfWork","replaySuspendedUnitOfWork","hostFiber","completeUnitOfWork","workLoopConcurrent","thrownValue$166","suspendedReason","unwindUnitOfWork","skipSiblings","previousUpdateLanePriority","commitRootImpl","renderPriorityLevel","flushPassiveEffects","scheduleCallback$1","releaseRootPooledCache","root$170","renderPriority","captureCommitPhaseErrorOnRoot","rootFiber","pingCache","threadIDs","pingSuspendedRoot","retryTimedOutBoundary","boundaryFiber","retryLane","priorityLevel","firstScheduledRoot","lastScheduledRoot","didScheduleMicrotask","mightHavePendingSyncWork","isFlushingWork","currentEventTransitionLane","scheduleImmediateTask","processRootScheduleInMicrotask","syncTransitionLanes","onlyLegacy","didPerformSomeWork","root$172","performSyncWorkOnRoot","shouldAttemptEagerTransition","prev","scheduleTaskForRootDuringMicrotask","index$5","expirationTime","performWorkOnRootViaSchedulerTask","didTimeout","originalCallbackNode","workInProgressRootRenderLanes$jscomp$0","cb","scheduleMicrotask","coerceFormActionProp","actionProp","createFormDataWithSubmitter","form","submitter","temp","extractEvents$1","maybeTargetInst","i$jscomp$inline_1439","eventName$jscomp$inline_1440","domEventName$jscomp$inline_1441","capitalizedEvent$jscomp$inline_1442","nonDelegatedEvents","eventSystemFlags","_dispatchQueue$i","previousInstance","i$jscomp$0","_dispatchListeners$i","currentTarget","targetElement","listenerSetKey","addTrappedEventListener","listenToNativeEvent","isCapturePhaseListener","listeningMarker","rootContainerElement","ownerDocument","targetContainer","listenerWrapper","dispatchDiscreteEvent","dispatchContinuousEvent","dispatchEvent","dispatchEventForPluginEventSystem","targetInst$jscomp$0","ancestorInst","nodeTag","container","grandTag","SyntheticEventCtor","inCapturePhase","accumulateTargetOnly","reactEventName","lastHostComponent","_instance","createDispatchListener","getParent","accumulateEnterLeaveListenersForEvent","getTargetInstFunc","handleEventFunc","fallbackData","eventType","targetFiber","captureName","_instance2","common","_instance3","NORMALIZE_NEWLINES_REGEX","NORMALIZE_NULL_AND_REPLACEMENT_REGEX","normalizeMarkupForTextOrAttribute","markup","serverText","clientText","setProp","setPropOnCustomElement","hasSrc","hasSrcSet","propKey","propValue$186","lastProps","lastProp","propKey$203","propKey$219","propKey$224","propKey$229","propKey$234","namespaceURI","parentNamespace","currentPopstateTransitionEvent","localPromise","handleErrorInNextTick","parentInstance","suspenseInstance","depth","anyProps","nodeType","targetInstance","data","rootContainerInstance","preloadPropsMap","preconnectsSet","previousDispatcher","flushSyncWork","requestFormReset","prefetchDNS","preconnect","preload","preloadModule","preinitScript","preinitStyle","preinitModuleScript","previousWasRendering","wasRendering","formInst","globalDocument","preconnectAs","rel","href","crossOrigin","limitedEscapedHref","as","preloadSelector","getStyleKey","getScriptKey","getStylesheetSelectorFromKey","getScriptSelectorFromKey","precedence","adoptPreloadPropsForStylesheet","link","reject","insertStylesheet","src","scripts","adoptPreloadPropsForScript","currentProps","styles$242","resource$243","preloadStylesheet","stylesheetPropsFromRawProps","rawProps","preloadProps","styleProps","instance$248","linkInstance","nodes","prior","stylesheetProps","scriptProps","keyAttribute","caches","nodeKey","hostContext","onUnsuspend","insertSuspendedStylesheets","commit","stylesheetTimer","unsuspend","precedencesByRoot","insertStylesheetIntoRoot","precedences","FiberRootNode","hydrate","onRecoverableError","formState","createFiberRoot","initialChildren","hydrationCallbacks","isStrictMode","transitionCallbacks","getContextForSubtree","parentComponent","updateContainerImpl","markRetryLaneImpl","markRetryLaneIfNotHydrated","attemptContinuousHydration","blockedOn","findInstanceBlockingEvent","return_targetInst","clearIfContinuousEvent","queueIfContinuousEvent","discreteReplayableEvents","findInstanceBlockingTarget","hasScheduledReplayAttempt","queuedFocus","queuedDrag","queuedMouse","queuedPointers","queuedPointerCaptures","queuedExplicitHydrationTargets","accumulateOrCreateContinuousQueuedReplayableEvent","existingQueuedEvent","pointerId","attemptExplicitHydrationTarget","queuedTarget","attemptReplayContinuousQueuedEvent","queuedEvent","targetContainers","nextBlockedOn","nativeEventClone","attemptReplayContinuousQueuedEventInMap","map","replayUnblockedEvents","scheduleCallbackIfUnblocked","unblocked","lastScheduledReplayQueue","scheduleReplayQueueIfNeeded","formReplayingQueue","submitterOrAction","unblock","formProps","ReactDOMRoot","internalRoot","ReactDOMHydrationRoot","isomorphicReactPackageVersion$jscomp$inline_1686","componentOrElement","internals$jscomp$inline_2165","hook$jscomp$inline_2166","require_client","__commonJSMin","exports","module","checkDCE","err","require_lodash","__commonJSMin","exports","module","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","freeSelf","root","objectProto","objectToString","nativeMax","nativeMin","now","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","toNumber","isObject","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","throttle","value","type","isObjectLike","isSymbol","other","isBinary","require_direction","__commonJSMin","exports","module","direction","RTL","LTR","rtl","ltr","value","require_isObject","__commonJSMin","exports","module","isObject","value","type","require_freeGlobal","__commonJSMin","exports","module","freeGlobal","require_root","__commonJSMin","exports","module","freeGlobal","freeSelf","root","require_now","__commonJSMin","exports","module","root","now","require_trimmedEndIndex","__commonJSMin","exports","module","reWhitespace","trimmedEndIndex","string","index","require_baseTrim","__commonJSMin","exports","module","trimmedEndIndex","reTrimStart","baseTrim","string","require_Symbol","__commonJSMin","exports","module","root","Symbol","require_getRawTag","__commonJSMin","exports","module","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","value","isOwn","tag","unmasked","result","require_objectToString","__commonJSMin","exports","module","objectProto","nativeObjectToString","objectToString","value","require_baseGetTag","__commonJSMin","exports","module","Symbol","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","baseGetTag","value","require_isObjectLike","__commonJSMin","exports","module","isObjectLike","value","require_isSymbol","__commonJSMin","exports","module","baseGetTag","isObjectLike","symbolTag","isSymbol","value","require_toNumber","__commonJSMin","exports","module","baseTrim","isObject","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","value","other","isBinary","require_debounce","__commonJSMin","exports","module","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","require_throttle","__commonJSMin","exports","module","debounce","isObject","FUNC_ERROR_TEXT","throttle","func","wait","options","leading","trailing","require_lib","__commonJSMin","exports","IS_MAC","MODIFIERS","ALIASES","CODES","f","isHotkey","hotkey","options","event","array","string","parseHotkey","check","e","object","compareHotkey","ret","isCodeHotkey","isKeyHotkey","byKey","values","length","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","value","optional","name","toKeyName","modifier","toKeyCode","err","key","expected","actual","code","require_extend","__commonJSMin","exports","module","hasOwn","toStr","defineProperty","gOPD","isArray","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","key","setProperty","target","options","getProperty","name","extend","src","copy","copyIsArray","clone","i","length","deep","require_react_jsx_runtime_production","__commonJSMin","exports","REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","key","propName","require_jsx_runtime","__commonJSMin","exports","module","require_react_is_production_min","__commonJSMin","exports","b","c","d","e","f","g","h","k","l","m","n","p","q","r","t","v","w","x","y","z","a","u","A","require_react_is","__commonJSMin","exports","module","require_hoist_non_react_statics_cjs","__commonJSMin","exports","module","reactIs","REACT_STATICS","KNOWN_STATICS","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","component","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","keys","targetStatics","sourceStatics","i","key","descriptor","require_lib","__commonJSMin","exports","IS_MAC","MODIFIERS","ALIASES","CODES","f","isHotkey","hotkey","options","event","array","string","parseHotkey","check","e","object","compareHotkey","ret","isCodeHotkey","isKeyHotkey","byKey","values","length","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","value","optional","name","toKeyName","modifier","toKeyCode","err","key","expected","actual","code","require_prism","__commonJSMin","exports","module","_self","Prism","lang","uniqueId","plainTextGrammar","_","encode","tokens","Token","o","obj","deepClone","visited","clone","id","key","v","i","element","m","language","err","src","scripts","className","defaultActivation","no","classList","redef","inside","before","insert","root","grammar","ret","token","newToken","old","value","DFS","callback","type","objId","property","propertyType","async","container","env","parent","code","insertHighlightedCode","highlightedCode","worker","evt","text","rest","tokenList","LinkedList","addAfter","matchGrammar","toArray","name","hooks","callbacks","content","alias","matchedStr","stringify","s","e","aliases","attributes","matchPattern","pattern","pos","lookbehind","match","lookbehindLength","startNode","startPos","rematch","patterns","j","patternObj","greedy","flags","currentNode","str","removeCount","from","to","p","k","matchStr","after","reach","removeFrom","removeRange","wrapped","nestedRematch","head","tail","list","node","next","newNode","count","array","message","immediateClose","script","highlightAutomaticallyCallback","readyState","tagName","includedCdataInside","def","attrName","string","markup","LOADING_MESSAGE","FAILURE_MESSAGE","status","FAILURE_EMPTY_MESSAGE","EXTENSIONS","STATUS_ATTR","STATUS_LOADING","STATUS_LOADED","STATUS_FAILED","SELECTOR","loadFile","success","error","xhr","parseRange","range","start","comma","end","pre","extension","autoloader","lines","elements","logged","import_react","import_client","import_lodash","import_react","isObject","o","isPlainObject","ctor","prot","die","error","args","e","msg","Error","length","map","s","join","isDraft","value","DRAFT_STATE","isDraftable","proto","Object","getPrototypeOf","Ctor","hasOwnProperty","call","constructor","Function","toString","objectCtorString","Array","isArray","DRAFTABLE","_value$constructor","isMap","isSet","each","obj","iter","enumerableOnly","getArchtype","Object","keys","ownKeys","forEach","key","entry","index","thing","state","DRAFT_STATE","type_","Array","isArray","isMap","isSet","has","prop","prototype","hasOwnProperty","call","get","set","propOrOldValue","value","t","add","is","x","y","target","hasMap","Map","hasSet","Set","latest","copy_","base_","shallowCopy","base","slice","descriptors","getOwnPropertyDescriptors","i","length","desc","writable","configurable","enumerable","create","getPrototypeOf","freeze","deep","isFrozen","isDraft","isDraftable","clear","delete","dontMutateFrozenCollections","die","getPlugin","pluginKey","plugin","plugins","getCurrentScope","currentScope","usePatchesInScope","scope","patchListener","getPlugin","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","forEach","revokeDraft","parent_","enterScope","immer","immer_","canAutoFreeze_","unfinalizedDrafts_","draft","state","DRAFT_STATE","type_","revoke_","revoked_","processResult","result","length","baseDraft","isReplaced","useProxies_","willFinalizeES5_","modified_","die","isDraftable","finalize","maybeFreeze","generateReplacementPatches_","base_","NOTHING","undefined","rootScope","value","path","isFrozen","each","key","childValue","finalizeProperty","scope_","finalized_","copy_","shallowCopy","draft_","resultEach","isSet","Set","clear","generatePatches_","parentState","targetObject","prop","rootPath","targetIsSet","isDraft","res","has","assigned_","concat","set","add","autoFreeze_","deep","freeze","peek","latest","getDescriptorFromProto","source","proto","Object","getPrototypeOf","desc","getOwnPropertyDescriptor","markChanged","prepareCopy","createProxy","parent","isMap","proxyMap_","proxySet_","base","isArray","Array","isManual_","target","traps","objectTraps","arrayTraps","Proxy","revocable","revoke","proxy","createES5Proxy_","push","current","currentImpl","copy","archType","getArchtype","hasChanges_","copyHelper","get","Map","from","value","currentScope","hasSymbol","Symbol","hasMap","Map","hasSet","Set","hasProxies","Proxy","revocable","Reflect","NOTHING","for","G","DRAFTABLE","DRAFT_STATE","value","objectCtorString","Object","prototype","constructor","ownKeys","Reflect","getOwnPropertySymbols","obj","getOwnPropertyNames","concat","getOwnPropertyDescriptors","target","res","forEach","key","getOwnPropertyDescriptor","plugins","objectTraps","get","state","prop","DRAFT_STATE","source","latest","has","desc","getDescriptorFromProto","_desc$get","call","draft_","undefined","finalized_","isDraftable","peek","base_","prepareCopy","copy_","createProxy","scope_","immer_","set","modified_","current","currentState","assigned_","is","markChanged","Number","isNaN","deleteProperty","owner","writable","configurable","type_","enumerable","defineProperty","die","getPrototypeOf","setPrototypeOf","arrayTraps","each","fn","arguments","apply","this","Immer","config","hasProxies","base","recipe","patchListener","defaultBase","self","_this","args","produce","draft","_this2","result","scope","enterScope","proxy","hasError","revokeScope","leaveScope","Promise","then","usePatchesInScope","processResult","error","NOTHING","autoFreeze_","freeze","p","ip","getPlugin","generateReplacementPatches_","produceWithPatches","patches","inversePatches","nextState","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","isDraft","isManual_","finishDraft","useProxies_","applyPatches","i","length","patch","path","op","slice","applyPatchesImpl","applyPatches_","immer","bind","_defineProperty","obj","key","value","DIRTY_PATHS","WeakMap","DIRTY_PATH_KEYS","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","createEditor","editor","children","operations","selection","marks","isInline","isVoid","markableVoid","onChange","apply","op","ref","Editor","pathRefs","PathRef","transform","pointRefs","PointRef","rangeRefs","RangeRef","oldDirtyPaths","get","oldDirtyPathKeys","Set","dirtyPaths","dirtyPathKeys","add","path","join","has","push","Path","operationCanTransformPath","newPath","newDirtyPaths","getDirtyPaths","set","Transforms","normalize","type","Promise","resolve","then","addMark","match","node","Text","isText","parentNode","parentPath","parent","expandedSelection","Range","isExpanded","markAcceptingVoidSelected","selectedNode","selectedPath","setNodes","split","voids","_objectSpread$9","deleteBackward","unit","isCollapsed","delete","reverse","deleteForward","deleteFragment","direction","getFragment","Node","fragment","insertBreak","splitNodes","always","insertSoftBreak","insertFragment","insertNode","insertNodes","insertText","text","normalizeNode","entry","Element","isElement","length","child","at","concat","shouldHaveInlines","isEditor","n","i","currentNode","prev","isLast","isInlineOrText","removeNodes","newChild","equals","loose","mergeNodes","removeMark","unsetNodes","levels","descendants","Array","from","nodes","_ref3","p","ancestors","previousPath","previous","oldAncestors","newAncestors","ancestor","newParent","newIndex","resultPath","nextPath","next","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","_objectWithoutProperties","objectWithoutPropertiesLoose","sourceSymbolKeys","getCharacterDistance","str","isRTL","isLTR","codepoints","codepointsIteratorRTL","left","CodepointType","None","right","distance","gb11","gb12Or13","char","code","codePointAt","getCodepointType","intersects","ZWJ","ExtPict","endsWithEmojiZWJ","substring","RI","endsWithOddNumberOfRIs","isBoundaryPair","SPACE","PUNCTUATION","CHAMELEON","getWordDistance","dist","started","charDist","remaining","splitByCharacterDistance","isWordCharacter","slice","test","nextChar","nextRemaining","end","char1","charAt","isLowSurrogate","charCodeAt","char2","isHighSurrogate","charCode","reExtend","rePrepend","reSpacingMark","reL","reV","reT","reLV","reLVT","reExtPict","Any","search","Extend","Prepend","SpacingMark","L","V","T","LV","LVT","x","y","NonBoundaryPairs","findIndex","r","endingEmojiZWJ","endingRIs","numRIs","isPlainObject","isNodeList","isAncestor","isElementList","isArray","every","val","isElementProps","props","undefined","isElementType","elementVal","elementKey","matches","element","IS_EDITOR_CACHE","above","options","mode","isRange","anchor","focus","after","point","edge","range","d","positions","_objectSpread$8","before","start","edges","first","hasBlocks","some","isBlock","hasInlines","hasTexts","cachedIsEditor","Operation","isOperationList","isEnd","Point","isEdge","isStart","isEmpty","isNormalizing","offset","last","leaf","rest","_excluded$4","block","prevNode","prevPath","blockPath","_excluded2$3","pointAfterLocation","to","span","isPath","Error","includes","universal","Span","isSpan","nodeEntries","pass","_ref","hit","isLower","compare","emit","force","getDirtyPathKeys","popDirtyPath","pop","allPaths","_ref2","allPathKeys","map","withoutNormalizing","dirtyPath","_","max","m","depth","firstPath","lastPath","common","isPoint","hasPath","pathRef","affinity","current","unref","refs","pointRef","isNewBlock","blockText","leafTextRemaining","leafTextOffset","e","s","string","isFirst","calcDistance","pointBeforeLocation","rangeRef","setNormalizing","t","unhangRange","endBlock","skip","isBefore","void","fn","Span","isSpan","value","Array","isArray","length","every","Path","isPath","IS_NODE_LIST_CACHE","WeakMap","Node","ancestor","root","path","node","get","Text","isText","Error","Scrubber","stringify","ancestors","options","p","n","entry","child","index","c","children","reverse","childPath","concat","common","another","descendant","Editor","isEditor","descendants","nodes","elements","Element","isElement","extractProps","isAncestor","properties","_objectWithoutProperties","_excluded$3","_excluded2$2","first","slice","push","fragment","range","newRoot","produce","r","start","end","Range","edges","nodeEntries","pass","_ref","includes","parent","splice","equals","leaf","text","offset","selection","i","has","isNode","isNodeList","cachedResult","undefined","val","set","last","levels","matches","props","isElementProps","isTextProps","from","to","visited","Set","isBefore","isAfter","add","nextIndex","newPath","next","previous","parentPath","string","map","join","texts","Operation","isNodeOperation","isOperation","type","endsWith","isPlainObject","position","newProperties","isRange","isOperationList","isSelectionOperation","isTextOperation","inverse","op","_objectSpread$7","isSibling","inversePath","transform","inverseNewPath","paths","av","bv","compare","min","Math","endsAfter","as","bs","endsAt","endsBefore","hasPrevious","isChild","isCommon","isDescendant","isParent","al","bl","list","operationCanTransformPath","operation","relative","affinity","onp","copy","PathRef","ref","current","unref","Point","point","result","isPoint","_objectSpread$6","PointRef","anchor","focus","isBackward","target","rs","re","ts","te","isAfterStart","isBeforeEnd","intersection","rest","_excluded$2","s1","e1","s2","e2","_objectSpread$5","isCollapsed","isExpanded","isForward","points","affinityAnchor","affinityFocus","RangeRef","_scrubber","setScrubber","scrubber","JSON","isDeepEqual","key","a","b","loose","omitText","obj","_excluded$1","isTextList","hasOwnProperty","decorations","leaves","_objectSpread$4","dec","_excluded2$1","leafEnd","decorationStart","decorationEnd","leafStart","Object","assign","middle","before","after","off","applyToDraft","editor","prevPath","prev","truePath","newParent","newIndex","preferNext","_objectSpread$3","newNode","GeneralTransforms","createDraft","finishDraft","isDraft","NodeTransforms","insertNodes","withoutNormalizing","hanging","voids","mode","at","match","select","unhangRange","pointRef","Transforms","delete","isInline","isBlock","matchPath","pathRef","isAtEnd","isEnd","splitNodes","void","apply","liftNodes","pathRefs","parentNodeEntry","toPath","moveNodes","removeNodes","splitPath","mergeNodes","prevNode","commonPath","isPreviousSibling","_ref2","emptyAncestor","above","hasSingleChildNest","emptyRef","_excluded","_excluded2","isEmpty","toRef","targets","_ref3","depths","_ref4","setNodes","merge","split","rangeRef","splitMode","endAtEndOfNode","always","startAtStartOfNode","isStart","prop","nodeProp","hasChanges","k","height","deleteRange","beforeRef","afterRef","highest","voidMatch","nudge","voidNode","voidPath","afterPath","siblingHeight","depth","highestPath","lowestPath","isVoid","isEdge","_afterRef","unsetNodes","unwrapNodes","_ref5","_loop","wrapNodes","element","roots","rootPath","_ret","firstPath","lastPath","commonNodeEntry","commonNode","wrapperPath","wrapper","_objectSpread$2","SelectionTransforms","collapse","edge","deselect","move","distance","unit","opts","setSelection","setPoint","_objectSpread$1","oldProps","newProps","keys","TextTransforms","furthestVoid","endOfDoc","startBlock","endBlock","isAcrossBlocks","isSingleText","startVoid","endVoid","startRef","endRef","removedText","filter","forEach","insertText","startUnref","endUnref","insertFragment","inlineElementMatch","inlinePath","blockMatch","blockPath","isBlockStart","isBlockEnd","isBlockEmpty","mergeStart","mergeEnd","matcher","isRoot","starts","middles","ends","starting","hasBlocks","inlineMatch","isInlineStart","isInlineEnd","middleRef","startPoint","endPoint","_objectSpread","t","el","nodeType","canOverflow","overflow","skipOverflowHiddenElements","isScrollable","clientHeight","scrollHeight","clientWidth","scrollWidth","style","getComputedStyle","overflowY","overflowX","frame","ownerDocument","defaultView","frameElement","r","scrollingEdgeStart","scrollingEdgeEnd","scrollingSize","scrollingBorderStart","scrollingBorderEnd","elementEdgeStart","elementEdgeEnd","elementSize","i","target","options","windowWithViewport","window","scrollMode","block","inline","boundary","checkBoundary","node","isElement","element","parent","scrollingElement","document","documentElement","frames","cursor","parentElement","getRootNode","host","c","push","body","viewportWidth","visualViewport","width","innerWidth","viewportHeight","height","innerHeight","scrollX","pageXOffset","viewportY","scrollY","pageYOffset","_target$getBoundingCl","getBoundingClientRect","targetHeight","targetWidth","targetTop","top","targetRight","right","targetBottom","bottom","targetLeft","left","targetBlock","targetInline","computations","k","index","length","_frame$getBoundingCli","frameStyle","borderLeft","parseInt","borderLeftWidth","borderTop","borderTopWidth","A","borderRightWidth","borderBottom","borderBottomWidth","blockScroll","inlineScroll","scrollbarWidth","offsetWidth","borderRight","scrollbarHeight","B","offsetHeight","scaleX","scaleY","alignNearest","viewportX","Math","max","scrollLeft","scrollTop","min","T","isOptionsObject","options","defaultBehavior","actions","behavior","canSmoothScroll","_ref","el","top","left","getOptions","scrollIntoView","target","isTargetAttached","i","computeOptions","es_default","_defineProperty","obj","key","value","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","i","_objectWithoutProperties","objectWithoutPropertiesLoose","sourceSymbolKeys","n","Key","constructor","id","NODE_TO_INDEX","WeakMap","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","EDITOR_TO_PLACEHOLDER_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","IS_COMPOSING","EDITOR_TO_USER_SELECTION","EDITOR_TO_ON_CHANGE","EDITOR_TO_SCHEDULE_FLUSH","EDITOR_TO_PENDING_INSERTION_MARKS","EDITOR_TO_USER_MARKS","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_PENDING_ACTION","EDITOR_TO_PENDING_SELECTION","EDITOR_TO_FORCE_RENDER","PLACEHOLDER_SYMBOL","Symbol","MARK_PLACEHOLDER_SYMBOL","DOMText","globalThis","Text","getDefaultView","ownerDocument","defaultView","isDOMComment","isDOMNode","nodeType","isDOMElement","window","Node","isDOMSelection","anchorNode","Selection","isDOMText","isPlainTextOnlyPaste","event","clipboardData","getData","types","length","normalizeDOMPoint","domPoint","node","offset","childNodes","isLast","index","getEditableChildAndIndex","getEditableChild","textContent","hasShadowRoot","document","activeElement","shadowRoot","parent","direction","child","triedForward","triedBackward","getAttribute","getPlainText","domNode","text","nodeValue","childNode","Array","from","display","getComputedStyle","getPropertyValue","tagName","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","htmlData","fragment","match","isTrackedMutation","editor","mutation","batch","matches","ReactEditor","getWindow","contains","hasDOMNode","editable","parentMutation","find","_ref","addedNodes","removedNodes","IS_REACT_VERSION_17_OR_ABOVE","parseInt","React","version","split","IS_IOS","navigator","test","userAgent","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_QQBROWSER","IS_UC_MOBILE","IS_WECHATBROWSER","CAN_USE_DOM","createElement","HAS_BEFORE_INPUT_SUPPORT","InputEvent","prototype","getTargetRanges","isComposing","get","Error","findKey","set","findPath","path","Editor","isEditor","unshift","Scrubber","stringify","findDocumentOrShadowRoot","el","toDOMNode","root","getRootNode","Document","ShadowRoot","getSelection","isFocused","isReadOnly","blur","focus","preventScroll","deselect","selection","domSelection","rangeCount","removeAllRanges","Transforms","options","editorEl","targetEl","parentElement","err","message","includes","closest","isContentEditable","insertData","data","insertFragmentData","insertTextData","setFragmentData","originEvent","KEY_TO_ELEMENT","toDOMPoint","point","void","at","selector","texts","querySelectorAll","start","attr","trueLength","end","nextText","hasAttribute","_nextText$textContent","domText","startsWith","Math","min","max","toDOMRange","range","anchor","isBackward","Range","domAnchor","domFocus","isCollapsed","domRange","createRange","startNode","startOffset","endNode","endOffset","startEl","isStartAtZeroWidth","endEl","isEndAtZeroWidth","setStart","setEnd","toSlateNode","domEl","findEventRange","nativeEvent","clientX","x","clientY","y","isVoid","rect","getBoundingClientRect","isPrev","isInline","left","width","top","height","edge","before","after","caretRangeFromPoint","position","caretPositionFromPoint","offsetNode","toSlateRange","exactMatch","suppressThrow","toSlatePoint","nearestNode","nearestOffset","parentNode","textNode","_domNode$textContent","_domNode$textContent2","potentialVoidNode","voidNode","leafNode","contents","cloneContents","removals","slice","call","forEach","textContext","removeChild","leafNodes","current","endsWith","slateNode","querySelector","startContainer","anchorOffset","focusNode","focusOffset","endContainer","collapsed","isExpanded","isForward","mode","unhangRange","voids","hasRange","hasPath","androidScheduleFlush","_EDITOR_TO_SCHEDULE_F","androidPendingDiffs","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","shallowCompare","obj1","obj2","Object","keys","every","hasOwnProperty","isDecoratorRangeListEqual","list","another","other","rangeOwnProps","_excluded$3","otherOwnProps","_excluded2$1","equals","String","props","leaf","useSlateStatic","parentPath","Path","isMarkPlaceholder","ZeroWidthString","string","children","isLineBreak","TextString","isTrailing","ref","useRef","getTextContent","textWithTrailing","attributes","EditorContext","createContext","useContext","Leaf","renderPlaceholder","renderLeaf","DefaultLeaf","placeholderRef","placeholderEl","style","minHeight","clientHeight","delete","placeholderProps","placeholder","pointerEvents","maxWidth","opacity","userSelect","textDecoration","contentEditable","Fragment","MemoizedLeaf","memo","prev","next","decorations","leaves","SlateText","push","MemoizedText","Element","element","renderElement","p","DefaultElement","readOnly","useReadOnly","useCallback","useChildren","hasInlines","dir","getDirection","Tag","color","outline","MemoizedElement","DecorateContext","useDecorate","SelectedContext","useSelected","decorate","isLeafBlock","isElement","concat","sel","intersection","ds","dec","d","Provider","ElementComponent","TextComponent","ReadOnlyContext","SlateContext","useSlate","context","TRIPLE_CLICK","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","deleteBackward","deleteForward","extendBackward","extendForward","italic","insertSoftBreak","splitBlock","undo","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","redo","transposeCharacter","WINDOWS_HOTKEYS","create","key","generic","apple","windows","isGeneric","isKeyHotkey","isApple","isWindows","event","IS_APPLE","Hotkeys","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSoftBreak","isSplitBlock","isTransposeCharacter","isUndo","createRestoreDomManager","editor","receivedUserInput","bufferedMutations","clear","registerMutations","mutations","current","trackedMutations","filter","mutation","isTrackedMutation","push","restoreDOM","reverse","forEach","type","target","textContent","oldValue","removedNodes","node","insertBefore","nextSibling","addedNodes","removeChild","MUTATION_OBSERVER_CONFIG","subtree","childList","characterData","characterDataOldValue","RestoreDOMComponent","Component","constructor","observe","props","Error","_this$mutationObserve","mutationObserver","componentDidMount","context","manager","MutationObserver","getSnapshotBeforeUpdate","pendingMutations","_this$mutationObserve2","takeRecords","length","_this$manager","_this$mutationObserve3","disconnect","_this$manager2","componentDidUpdate","_this$manager3","componentWillUnmount","_this$mutationObserve4","render","children","EditorContext","RestoreDOM","IS_ANDROID","_ref","React","verifyDiffState","textDiff","path","diff","Editor","hasPath","Node","get","Text","isText","start","text","slice","nextPath","Path","next","nextNode","startsWith","applyStringDiff","diffs","reduce","end","longestCommonPrefixLength","str","another","Math","min","i","charAt","longestCommonSuffixLength","max","normalizeStringDiff","targetText","removedText","prefixLength","suffixLength","normalized","mergeStringDiffs","a","b","overlap","applied","sliceEnd","targetRange","anchor","offset","focus","normalizePoint","point","leaf","parentBlock","above","match","n","isBlock","at","entry","isDescendant","normalizeRange","range","Range","isCollapsed","transformPendingPoint","op","pendingDiffs","EDITOR_TO_PENDING_DIFFS","find","equals","Point","transform","affinity","transformed","position","transformPendingRange","transformTextDiff","id","newPath","RESOLVE_DELAY","FLUSH_DELAY","debug","createAndroidInputManager","scheduleOnDOMSelectionChange","onDOMSelectionChange","flushing","compositionEndTimeoutId","flushTimeoutId","actionTimeoutId","idCounter","insertPositionHint","applyPendingSelection","pendingSelection","EDITOR_TO_PENDING_SELECTION","delete","selection","Transforms","select","performAction","action","EDITOR_TO_PENDING_ACTION","isPoint","run","flush","clearTimeout","hasPendingDiffs","hasPendingAction","setTimeout","selectionRef","rangeRef","EDITOR_TO_USER_MARKS","set","marks","scheduleSelectionChange","_EDITOR_TO_PENDING_DI","_EDITOR_TO_PENDING_DI2","_EDITOR_TO_PENDING_DI3","pendingMarks","EDITOR_TO_PENDING_INSERTION_MARKS","undefined","insertText","deleteFragment","_ref2","cancel","unref","userMarks","onChange","handleCompositionEnd","_event","IS_COMPOSING","handleCompositionStart","updatePlaceholderVisibility","forceHide","placeholderElement","EDITOR_TO_PLACEHOLDER_ELEMENT","style","display","removeProperty","storeDiff","_EDITOR_TO_PENDING_DI4","idx","findIndex","change","merged","splice","_objectSpread$3","scheduleAction","handleDOMBeforeInput","inputType","data","dataTransfer","nativeTargetRange","getTargetRanges","ReactEditor","toSlateRange","exactMatch","suppressThrow","window","getWindow","domSelection","getSelection","_targetRange2","isExpanded","edges","direction","endsWith","targetNode","_nativeTargetRange","nativeCollapsed","isDOMSelection","collapsed","unit","insertBreak","name","insertData","includes","replace","hintPosition","search","diffPosition","scheduleFlush","_EDITOR_TO_PENDING_DI5","hasPendingChanges","isFlushing","handleUserSelect","pathChanged","parentPathChanged","handleInput","handleKeyDown","_","handleDomMutations","some","_EDITOR_TO_FORCE_REND","EDITOR_TO_FORCE_RENDER","useIsMounted","isMountedRef","useRef","useEffect","useMutationObserver","callback","options","useState","useIsomorphicLayoutEffect","useAndroidInputManager","useSlateStatic","isMounted","inputManager","_objectSpread$2","EDITOR_TO_SCHEDULE_FLUSH","useTrackUserInput","animationFrameIdRef","onUserInput","useCallback","cancelAnimationFrame","requestAnimationFrame","Children","Fragment","useChildren","Editable","autoFocus","decorate","defaultDecorate","onDOMBeforeInput","propsOnDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","DefaultPlaceholder","scrollSelectionIntoView","defaultScrollSelectionIntoView","as","attributes","_objectWithoutProperties","_excluded$1","useSlate","isComposing","setIsComposing","ref","deferredOperations","forceRender","useReducer","s","IS_READ_ONLY","state","useMemo","isDraggingInternally","isUpdatingSelection","latestElement","hasMarkPlaceholder","throttle","androidInputManager","root","findDocumentOrShadowRoot","activeElement","el","toDOMNode","IS_FOCUSED","deselect","anchorNode","focusNode","anchorNodeSelectable","hasEditableTarget","isTargetInsideNonReadonlyVoid","focusNodeSelectable","debounce","getDefaultView","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","NODE_TO_ELEMENT","ELEMENT_TO_NODE","isFocused","setDomSelection","forceChange","hasDomSelection","editorElement","hasDomSelectionInEditor","contains","slateRange","_anchorNode$parentEle","parentElement","hasAttribute","hasRange","newDomRange","toDOMRange","isBackward","setBaseAndExtent","endContainer","endOffset","startContainer","startOffset","removeAllRanges","ensureSelection","IS_FIREFOX","timeoutId","animationFrameId","ensureDomSelection","isDOMEventHandled","_EDITOR_TO_USER_SELEC","isCompositionChange","native","test","_node$parentElement","_window$getComputedSt","toDOMPoint","closest","hasDOMNode","_lastText$textContent","lastText","document","createTreeWalker","NodeFilter","SHOW_TEXT","lastChild","getComputedStyle","whiteSpace","block","string","EDITOR_TO_USER_SELECTION","preventDefault","toRestore","HAS_BEFORE_INPUT_SUPPORT","addEventListener","removeEventListener","decorations","Array","from","texts","PLACEHOLDER_SYMBOL","rest","_excluded2","loose","unset","Object","fromEntries","keys","map","mark","_objectSpread$1","MARK_PLACEHOLDER_SYMBOL","ReadOnlyContext","Provider","value","DecorateContext","role","spellCheck","CAN_USE_DOM","autoCorrect","autoCapitalize","contentEditable","zindex","suppressContentEditableWarning","outline","wordWrap","onBeforeInput","isEventHandled","onInput","onBlur","relatedTarget","isDOMElement","isDOMNode","toSlateNode","Element","isElement","isVoid","IS_SAFARI","onClick","hasTarget","findPath","detail","blockPath","_block$","startVoid","void","endVoid","onCompositionEnd","IS_FIREFOX_LEGACY","IS_IOS","IS_QQBROWSER","IS_WECHATBROWSER","IS_UC_MOBILE","placeholderMarks","onCompositionUpdate","onCompositionStart","inline","isInline","mode","inlinePath","isEnd","after","setSelection","onCopy","setFragmentData","clipboardData","onCut","parent","onDragOver","onDragStart","voidMatch","voids","onDrop","draggedRange","findEventRange","onDragEnd","onFocus","onKeyDown","nativeEvent","element","isRTL","getDirection","maybeHistoryEditor","move","edge","collapse","IS_CHROME","currentNode","onPaste","isPlainTextOnlyPaste","domRange","leafEl","getBoundingClientRect","bind","scrollIntoView","scrollMode","editable","slateNode","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","defaultPrevented","FocusedContext","createContext","useFocused","useContext","SlateSelectorContext","createContext","getSelectorContext","editor","eventListeners","useRef","current","slateRef","onChange","useCallback","forEach","listener","selectorContext","useMemo","getSlate","addEventListener","callback","push","splice","indexOf","Slate","props","children","value","rest","_objectWithoutProperties","_excluded","unmountRef","context","setContext","React","useState","Node","isNodeList","Error","Scrubber","stringify","Editor","isEditor","Object","assign","v","handleSelectorChange","onContextChange","prevContext","EDITOR_TO_ON_CHANGE","set","useEffect","isFocused","setIsFocused","ReactEditor","useIsomorphicLayoutEffect","fn","IS_REACT_VERSION_17_OR_ABOVE","document","removeEventListener","SlateSelectorContext","Provider","SlateContext","EditorContext","FocusedContext","doRectsIntersect","rect","compareRect","middle","top","bottom","areRangesSameLine","editor","range1","range2","rect1","ReactEditor","toDOMRange","getBoundingClientRect","rect2","findCurrentLineRange","parentRange","parentRangeBoundary","Editor","range","Range","end","positions","Array","from","at","left","right","length","Math","floor","withReact","e","apply","onChange","deleteBackward","addMark","removeMark","EDITOR_TO_KEY_TO_ELEMENT","set","WeakMap","key","value","_EDITOR_TO_SCHEDULE_F","EDITOR_TO_SCHEDULE_FLUSH","get","EDITOR_TO_PENDING_INSERTION_MARKS","_EDITOR_TO_PENDING_DI","EDITOR_TO_PENDING_DIFFS","EDITOR_TO_USER_MARKS","delete","_EDITOR_TO_PENDING_DI2","unit","selection","isCollapsed","parentBlockEntry","above","match","n","isBlock","parentBlockPath","parentElementRange","anchor","currentLineRange","Transforms","op","matches","pendingDiffs","transformed","map","textDiff","transformTextDiff","filter","Boolean","pendingSelection","EDITOR_TO_PENDING_SELECTION","transformPendingRange","pendingAction","EDITOR_TO_PENDING_ACTION","Point","isPoint","transformPendingPoint","_objectSpread","type","push","getMatches","path","_EDITOR_TO_USER_SELEC","EDITOR_TO_USER_SELECTION","unref","Path","parent","prevPath","previous","commonPath","common","newPath","node","NODE_TO_KEY","setFragmentData","data","start","edges","startVoid","void","endVoid","domRange","contents","cloneContents","attach","childNodes","forEach","textContent","trim","voidNode","r","cloneRange","domNode","toDOMNode","setEndAfter","querySelector","querySelectorAll","zw","isNewline","getAttribute","isDOMText","span","ownerDocument","createElement","style","whiteSpace","appendChild","fragment","getFragment","string","JSON","stringify","encoded","window","btoa","encodeURIComponent","setAttribute","setData","div","body","innerHTML","getPlainText","removeChild","insertData","insertFragmentData","insertTextData","getData","getSlateFragmentAttribute","decoded","decodeURIComponent","atob","parsed","parse","insertFragment","text","lines","split","line","splitNodes","always","insertText","ReactDOM","unstable_batchedUpdates","onContextChange","EDITOR_TO_ON_CHANGE","p","levels","findKey","emptyOptions","toString","value","options","settings","includeImageAlt","includeHtml","one","node","all","values","result","index","splice","list","start","remove","items","end","chunkStart","parameters","push","hasOwnProperty","combineExtensions","extensions","all","index","syntaxExtension","extension","hook","left","right","code","value","constructs","existing","list","before","splice","unicodePunctuationRegex","asciiAlpha","regexCheck","asciiAlphanumeric","asciiAtext","asciiControl","code","asciiDigit","asciiHexDigit","asciiPunctuation","markdownLineEnding","markdownLineEndingOrSpace","markdownSpace","unicodePunctuation","unicodePunctuationRegex","unicodeWhitespace","regex","check","factorySpace","effects","ok","type","max","limit","size","start","code","markdownSpace","prefix","content","initializeContent","effects","contentStart","afterContentStartConstruct","paragraphInitial","previous","code","factorySpace","lineStart","token","data","markdownLineEnding","document","initializeDocument","containerConstruct","tokenizeContainer","effects","self","stack","continued","childFlow","childToken","lineStartOffset","start","code","item","documentContinue","checkNewContainers","closeFlow","indexBeforeExits","indexBeforeFlow","point","exitContainers","index","splice","documentContinued","flowStart","thereIsANewContainer","thereIsNoNewContainer","containerContinue","flowContinue","writeToChild","markdownLineEnding","token","eof","stream","seen","size","entry","ok","nok","factorySpace","classifyCharacter","code","markdownLineEndingOrSpace","unicodeWhitespace","unicodePunctuation","resolveAll","constructs","events","context","called","index","resolve","attention","tokenizeAttention","resolveAllAttention","events","context","index","open","group","text","openingSequence","closingSequence","use","nextEvents","offset","start","end","movePoint","push","resolveAll","splice","effects","ok","attentionMarkers","previous","before","classifyCharacter","marker","code","inside","token","after","close","point","autolink","tokenizeAutolink","effects","ok","nok","size","start","code","open","asciiAlpha","schemeOrEmailAtext","emailAtext","asciiAlphanumeric","schemeInsideOrEmailAtext","urlInside","asciiControl","emailAtSignOrDot","asciiAtext","emailLabel","emailValue","next","blankLine","tokenizeBlankLine","effects","ok","nok","start","code","markdownSpace","factorySpace","after","markdownLineEnding","blockQuote","tokenizeBlockQuoteStart","tokenizeBlockQuoteContinuation","exit","effects","ok","nok","self","start","code","state","after","markdownSpace","contStart","factorySpace","contBefore","characterEscape","tokenizeCharacterEscape","effects","ok","nok","start","code","inside","asciiPunctuation","element","decodeNamedCharacterReference","value","characterReference","char","characterReference","tokenizeCharacterReference","effects","ok","nok","self","size","max","test","start","code","open","numeric","asciiAlphanumeric","value","asciiHexDigit","asciiDigit","token","decodeNamedCharacterReference","nonLazyContinuation","tokenizeNonLazyContinuation","codeFenced","tokenizeCodeFenced","effects","ok","nok","self","closeStart","tokenizeCloseStart","initialPrefix","sizeOpen","marker","start","code","beforeSequenceOpen","tail","sequenceOpen","markdownSpace","factorySpace","infoBefore","markdownLineEnding","atNonLazyBreak","after","info","metaBefore","meta","contentBefore","contentStart","beforeContentChunk","contentChunk","size","startBefore","beforeSequenceClose","sequenceClose","sequenceCloseAfter","lineStart","codeIndented","tokenizeCodeIndented","furtherStart","tokenizeFurtherStart","effects","ok","nok","self","start","code","factorySpace","afterPrefix","tail","atBreak","after","markdownLineEnding","inside","codeText","tokenizeCodeText","resolveCodeText","previous","events","tailExitIndex","headEnterIndex","index","enter","code","effects","ok","nok","self","sizeOpen","size","token","start","sequenceOpen","between","sequenceClose","markdownLineEnding","data","subtokenize","events","jumps","index","event","lineIndex","otherIndex","otherEvent","parameters","subevents","more","subcontent","splice","eventIndex","token","context","startPosition","startPositions","tokenizer","childEvents","gaps","stream","previous","current","adjust","start","breaks","slice","content","tokenizeContent","resolveContent","continuationConstruct","tokenizeContinuation","events","subtokenize","effects","ok","previous","chunkStart","code","chunkInside","contentEnd","markdownLineEnding","contentContinue","nok","self","startLookahead","factorySpace","prefixed","tail","factoryDestination","effects","ok","nok","type","literalType","literalMarkerType","rawType","stringType","max","limit","balance","start","code","enclosedBefore","asciiControl","raw","enclosed","markdownLineEnding","enclosedEscape","markdownLineEndingOrSpace","rawEscape","factoryLabel","effects","ok","nok","type","markerType","stringType","self","size","seen","start","code","atBreak","markdownLineEnding","labelInside","markdownSpace","labelEscape","factoryTitle","effects","ok","nok","type","markerType","stringType","marker","start","code","begin","atBreak","markdownLineEnding","factorySpace","inside","escape","factoryWhitespace","effects","ok","seen","start","code","markdownLineEnding","markdownSpace","factorySpace","normalizeIdentifier","value","definition","tokenizeDefinition","titleBefore","tokenizeTitleBefore","effects","ok","nok","self","identifier","start","code","before","factoryLabel","labelAfter","normalizeIdentifier","markerAfter","markdownLineEndingOrSpace","factoryWhitespace","destinationBefore","factoryDestination","destinationAfter","after","markdownSpace","factorySpace","afterWhitespace","markdownLineEnding","beforeMarker","factoryTitle","titleAfter","titleAfterOptionalWhitespace","hardBreakEscape","tokenizeHardBreakEscape","effects","ok","nok","start","code","after","markdownLineEnding","headingAtx","tokenizeHeadingAtx","resolveHeadingAtx","events","context","contentEnd","contentStart","content","text","splice","effects","ok","nok","size","start","code","before","sequenceOpen","markdownLineEndingOrSpace","atBreak","sequenceFurther","markdownLineEnding","markdownSpace","factorySpace","data","htmlBlockNames","htmlRawNames","htmlFlow","tokenizeHtmlFlow","resolveToHtmlFlow","blankLineBefore","tokenizeBlankLineBefore","nonLazyContinuationStart","tokenizeNonLazyContinuationStart","events","index","effects","ok","nok","self","marker","closingTag","buffer","markerB","start","code","before","open","declarationOpen","tagCloseStart","continuationDeclarationInside","asciiAlpha","tagName","commentOpenInside","cdataOpenInside","value","continuation","markdownLineEndingOrSpace","slash","name","htmlRawNames","htmlBlockNames","basicSelfClosing","completeClosingTagAfter","completeAttributeNameBefore","asciiAlphanumeric","markdownSpace","completeEnd","completeAttributeName","completeAttributeNameAfter","completeAttributeValueBefore","completeAttributeValueQuoted","completeAttributeValueUnquoted","completeAttributeValueQuotedAfter","markdownLineEnding","completeAfter","continuationCommentInside","continuationRawTagOpen","continuationClose","continuationCdataInside","continuationAfter","continuationStart","continuationStartNonLazy","continuationBefore","continuationRawEndTag","after","blankLine","htmlText","tokenizeHtmlText","effects","ok","nok","self","marker","index","returnState","start","code","open","declarationOpen","tagCloseStart","instruction","asciiAlpha","tagOpen","commentOpenInside","cdataOpenInside","declaration","commentEnd","comment","commentClose","markdownLineEnding","lineEndingBefore","end","value","cdata","cdataClose","cdataEnd","instructionClose","tagClose","asciiAlphanumeric","tagCloseBetween","markdownSpace","markdownLineEndingOrSpace","tagOpenBetween","tagOpenAttributeName","tagOpenAttributeNameAfter","tagOpenAttributeValueBefore","tagOpenAttributeValueQuoted","tagOpenAttributeValueUnquoted","tagOpenAttributeValueQuotedAfter","lineEndingAfter","factorySpace","lineEndingAfterPrefix","labelEnd","tokenizeLabelEnd","resolveToLabelEnd","resolveAllLabelEnd","resourceConstruct","tokenizeResource","referenceFullConstruct","tokenizeReferenceFull","referenceCollapsedConstruct","tokenizeReferenceCollapsed","events","index","token","context","offset","open","close","media","group","label","text","push","resolveAll","splice","effects","ok","nok","self","labelStart","defined","start","code","labelEndNok","normalizeIdentifier","after","labelEndOk","referenceNotFull","resourceStart","resourceBefore","markdownLineEndingOrSpace","factoryWhitespace","resourceOpen","resourceEnd","factoryDestination","resourceDestinationAfter","resourceDestinationMissing","resourceBetween","factoryTitle","resourceTitleAfter","referenceFull","factoryLabel","referenceFullAfter","referenceFullMissing","referenceCollapsedStart","referenceCollapsedOpen","labelStartImage","tokenizeLabelStartImage","labelEnd","effects","ok","nok","self","start","code","open","after","labelStartLink","tokenizeLabelStartLink","labelEnd","effects","ok","nok","self","start","code","after","lineEnding","tokenizeLineEnding","effects","ok","start","code","factorySpace","thematicBreak","tokenizeThematicBreak","effects","ok","nok","size","marker","start","code","before","atBreak","sequence","markdownLineEnding","markdownSpace","factorySpace","list","tokenizeListStart","tokenizeListContinuation","tokenizeListEnd","listItemPrefixWhitespaceConstruct","tokenizeListItemPrefixWhitespace","indentConstruct","tokenizeIndent","effects","ok","nok","self","tail","initialSize","size","start","code","kind","asciiDigit","thematicBreak","atMarker","inside","blankLine","onBlank","endOfPrefix","otherPrefix","markdownSpace","notBlank","factorySpace","notInCurrentItem","afterPrefix","setextUnderline","tokenizeSetextUnderline","resolveToSetextUnderline","events","context","index","content","text","definition","heading","effects","ok","nok","self","marker","start","code","paragraph","before","inside","markdownSpace","factorySpace","after","markdownLineEnding","flow","initializeFlow","effects","self","initial","blankLine","atBlankEnding","afterConstruct","factorySpace","content","code","resolver","createResolver","string","initializeFactory","text","field","initializeText","resolveAllLineSuffixes","effects","self","constructs","start","notText","code","atBreak","data","list","index","item","extraResolver","resolveAllText","events","context","enter","eventIndex","chunks","bufferIndex","size","tabs","chunk","token","createTokenizer","parser","initialize","from","point","columnStart","resolveAllConstructs","chunks","stack","consumed","effects","consume","enter","exit","constructFactory","onsuccessfulconstruct","onsuccessfulcheck","context","sliceStream","sliceSerialize","now","defineSkip","write","state","expectedCode","slice","push","main","addResult","resolveAll","token","expandTabs","serializeChunks","sliceChunks","line","column","offset","_index","_bufferIndex","value","accountForPotentialSkip","chunkIndex","chunk","go","code","markdownLineEnding","type","fields","construct","info","_","onreturn","hook","constructs","returnState","bogusState","listOfConstructs","constructIndex","currentConstruct","handleListOfConstructs","handleMapOfConstructs","map","start","def","all","list","handleConstruct","store","nok","ok","splice","startPoint","startPrevious","startCurrentConstruct","startEventsIndex","startStack","restore","startIndex","startBufferIndex","endIndex","endBufferIndex","view","head","index","result","atTab","constructs_exports","__export","attentionMarkers","contentInitial","disable","document","flow","flowInitial","insideSpan","string","text","document","list","blockQuote","contentInitial","definition","flowInitial","codeIndented","flow","headingAtx","thematicBreak","setextUnderline","htmlFlow","codeFenced","string","characterReference","characterEscape","text","lineEnding","labelStartImage","attention","autolink","htmlText","labelStartLink","hardBreakEscape","labelEnd","codeText","insideSpan","resolver","attentionMarkers","disable","parse","options","constructs","combineExtensions","constructs_exports","parser","create","content","document","flow","string","text","initial","creator","from","createTokenizer","search","preprocess","column","buffer","start","atCarriageReturn","preprocessor","value","encoding","end","chunks","match","next","startPosition","endPosition","code","postprocess","events","subtokenize","decodeNumericCharacterReference","value","base","code","characterEscapeOrReference","decodeString","value","decode","$0","$1","$2","head","hex","decodeNumericCharacterReference","decodeNamedCharacterReference","stringifyPosition","value","position","point","index","pos","own","fromMarkdown","value","encoding","options","compiler","postprocess","parse","preprocess","config","opener","link","onenterdata","heading","blockQuote","codeFlow","buffer","codeText","definition","emphasis","hardBreak","html","image","listItem","onenterlistitemvalue","list","onenterlistordered","paragraph","onenterreference","strong","thematicBreak","closer","onexitatxheadingsequence","onexitautolinkemail","onexitautolinkprotocol","onexitdata","onexitcharacterreferencemarker","onexitcharacterreferencevalue","onexitcodefenced","onexitcodefencedfence","onexitcodefencedfenceinfo","onexitcodefencedfencemeta","onexitcodeindented","onexitcodetext","onexitdefinitiondestinationstring","onexitdefinitionlabelstring","onexitdefinitiontitlestring","onexithardbreak","onexithtmlflow","onexithtmltext","onexitimage","onexitlabel","onexitlabeltext","onexitlineending","onexitlink","onexitreferencestring","onexitresourcedestinationstring","onexitresourcetitlestring","onexitresource","onexitsetextheading","onexitsetextheadinglinesequence","onexitsetextheadingtext","configure","data","compile","events","tree","context","enter","exit","resume","setData","getData","listStack","index","tail","prepareList","handler","defaultOnError","point","start","length","containerBalance","listSpread","lineIndex","firstBlankLineIndex","atMarker","event","tailIndex","tailEvent","key","create","and","open","token","node","errorHandler","close","onExitError","stringifyPosition","toString","ancestor","label","normalizeIdentifier","depth","text","referenceType","string","decodeString","fragment","children","type","decodeNumericCharacterReference","decodeNamedCharacterReference","d","combined","extensions","extension","right","left","remarkParse","options","doc","settings","fromMarkdown","bail","error","import_extend","isPlainObject","value","prototype","trough","fns","pipeline","run","use","values","middlewareIndex","callback","next","error","output","fn","index","wrap","middelware","middleware","called","wrapped","parameters","fnExpectsCallback","result","done","exception","then","value","stringifyPosition","value","position","point","index","pos","VFileMessage","causeOrReason","optionsOrParentOrPlace","origin","reason","options","legacyCause","index","parent","start","stringifyPosition","minpath","basename","dirname","extname","join","path","assertPath","start","end","index","seenNonSlash","firstNonSlashEnd","extnameIndex","unmatchedSlash","startPart","startDot","preDotState","code","segments","joined","normalize","absolute","value","normalizeString","allowAboveRoot","result","lastSegmentLength","lastSlash","dots","lastSlashIndex","minproc","cwd","isUrl","fileUrlOrPath","urlToPath","path","isUrl","error","getPathFromURLPosix","url","pathname","index","third","order","VFile","value","options","isUrl","isUint8Array","minproc","index","field","minpath","basename","assertNonEmpty","assertPart","dirname","assertPath","extname","path","urlToPath","stem","causeOrReason","optionsOrParentOrPlace","origin","message","VFileMessage","encoding","part","name","CallableInstance","property","proto","value","apply","own","Processor","CallableInstance","trough","destination","index","attacher","extend","key","value","assertUnfrozen","self","options","transformer","file","realFile","vfile","parser","assertParser","done","assertCompiler","executor","resolve","reject","parseTree","error","tree","realDone","compileTree","compileResult","looksLikeAValue","complete","result","assertDone","bail","assertNode","transformers","outputTree","resultingTree","compiler","parameters","attachers","namespace","addPlugin","addList","addPreset","add","plugin","plugins","thing","entryIndex","primary","rest","currentPrimary","isPlainObject","unified","name","frozen","node","asyncName","looksLikeAVFile","VFile","isUint8Array","defaultStringLength","value","markdownTable","table","options","settings","align","stringLength","alignments","cellMatrix","sizeMatrix","longestCellByColumn","mostCellsPerRow","rowIndex","row","sizes","columnIndex","cell","serialize","size","toAlignment","code","before","after","lines","line","blockquote","node","_","state","info","exit","tracker","value","map","line","blank","patternInScope","stack","pattern","listInScope","list","none","index","hardBreak","_","_1","state","info","index","patternInScope","longestStreak","value","substring","source","index","expected","count","max","formatCodeAsIndented","node","state","checkFence","state","marker","code","node","_","state","info","marker","checkFence","raw","suffix","formatCodeAsIndented","exit","value","map","tracker","sequence","longestStreak","subexit","line","blank","checkQuote","state","marker","definition","node","_","state","info","quote","checkQuote","suffix","exit","subexit","tracker","value","checkEmphasis","state","marker","encodeCharacterReference","code","asciiAlpha","regexCheck","asciiAlphanumeric","asciiAtext","asciiControl","code","asciiDigit","asciiHexDigit","asciiPunctuation","markdownLineEnding","markdownLineEndingOrSpace","markdownSpace","unicodePunctuation","unicodeWhitespace","regex","check","classifyCharacter","code","markdownLineEndingOrSpace","unicodeWhitespace","unicodePunctuation","encodeInfo","outside","inside","marker","outsideKind","classifyCharacter","insideKind","emphasis","emphasisPeek","node","_","state","info","marker","checkEmphasis","exit","tracker","before","between","betweenHead","open","encodeInfo","encodeCharacterReference","betweenTail","close","after","_1","convert","test","ok","castFactory","anyFactory","propsFactory","typeFactory","tests","checks","index","any","parameters","check","checkAsRecord","all","node","nodeAsRecord","key","type","testFunction","value","parent","looksLikeANode","empty","CONTINUE","EXIT","SKIP","visitParents","tree","test","visitor","reverse","check","is","convert","step","factory","node","index","parents","value","name","visit","result","subresult","offset","grandparents","toResult","nodeAsParent","child","visit","tree","testOrVisitor","visitorOrReverse","maybeReverse","reverse","test","visitor","visitParents","overload","node","parents","parent","index","emptyOptions","toString","value","options","settings","includeImageAlt","includeHtml","one","node","all","values","result","index","formatHeadingAsSetext","node","state","literalWithBreak","visit","EXIT","toString","heading","node","_","state","info","rank","tracker","formatHeadingAsSetext","exit","subexit","value","sequence","encodeCharacterReference","html","htmlPeek","node","image","imagePeek","node","_","state","info","quote","checkQuote","suffix","exit","subexit","tracker","value","imageReference","imageReferencePeek","node","_","state","info","type","exit","subexit","tracker","value","alt","stack","reference","inlineCode","inlineCodePeek","node","_","state","value","sequence","index","pattern","expression","match","position","formatLinkAsAutolink","node","state","raw","toString","link","linkPeek","node","_","state","info","quote","checkQuote","suffix","tracker","exit","subexit","formatLinkAsAutolink","stack","value","linkReference","linkReferencePeek","node","_","state","info","type","exit","subexit","tracker","value","text","stack","reference","checkBullet","state","marker","checkBulletOther","state","bullet","checkBullet","bulletOther","checkBulletOrdered","state","marker","checkRule","state","marker","list","node","parent","state","info","exit","bulletCurrent","bullet","checkBulletOrdered","checkBullet","bulletOther","checkBulletOther","useDifferentMarker","firstListItem","checkRule","index","item","value","checkListItemIndent","state","style","listItem","node","parent","state","info","listItemIndent","checkListItemIndent","bullet","checkBullet","size","tracker","exit","value","map","line","index","blank","paragraph","node","_","state","info","exit","subexit","value","phrasing","convert","root","node","_","state","info","d","phrasing","checkStrong","state","marker","strong","strongPeek","node","_","state","info","marker","checkStrong","exit","tracker","before","between","betweenHead","open","encodeInfo","encodeCharacterReference","betweenTail","close","after","_1","text","node","_","state","info","checkRuleRepetition","state","repetition","thematicBreak","_","_1","state","value","checkRule","checkRuleRepetition","handle","blockquote","hardBreak","code","definition","emphasis","heading","html","image","imageReference","inlineCode","link","linkReference","list","listItem","paragraph","root","strong","text","thematicBreak","gfmTableFromMarkdown","enterTable","enterCell","enterRow","exitCodeText","exitTable","exit","token","align","d","value","replace","node","$0","$1","gfmTableToMarkdown","options","settings","padding","alignDelimiters","stringLength","around","inlineCodeWithTable","handleTable","handleTableCell","handleTableRow","_","state","info","serializeData","handleTableAsData","row","handleTableRowAsData","subexit","matrix","markdownTable","children","index","result","parent","handle","splice","list","start","remove","items","end","chunkStart","parameters","hasOwnProperty","combineExtensions","extensions","all","index","syntaxExtension","extension","hook","left","right","code","value","constructs","existing","list","before","splice","wwwPrefix","tokenizeWwwPrefix","domain","tokenizeDomain","path","tokenizePath","trail","tokenizeTrail","emailDomainDotTrail","tokenizeEmailDomainDotTrail","wwwAutolink","tokenizeWwwAutolink","previousWww","protocolAutolink","tokenizeProtocolAutolink","previousProtocol","emailAutolink","tokenizeEmailAutolink","previousEmail","text","gfmAutolinkLiteral","code","effects","ok","nok","self","dot","data","start","gfmAtext","previousUnbalanced","atext","emailDomain","emailDomainAfter","emailDomainDot","asciiAlphanumeric","asciiAlpha","wwwStart","wwwAfter","buffer","seen","protocolStart","protocolPrefixInside","protocol","protocolSlashesInside","afterProtocol","asciiControl","markdownLineEndingOrSpace","unicodeWhitespace","unicodePunctuation","protocolAfter","size","wwwPrefixInside","wwwPrefixAfter","underscoreInLastSegment","underscoreInLastLastSegment","domainInside","domainAfter","domainAtPunctuation","sizeOpen","sizeClose","pathInside","pathAtPunctuation","trailCharacterReferenceStart","trailBracketAfter","trailCharacterReferenceInside","after","events","index","result","token","resolveAll","constructs","events","context","called","index","resolve","factorySpace","effects","ok","type","max","limit","size","start","code","markdownSpace","prefix","blankLine","tokenizeBlankLine","effects","ok","nok","start","code","markdownSpace","factorySpace","after","markdownLineEnding","normalizeIdentifier","value","indent","tokenizeIndent","gfmFootnote","tokenizeDefinitionStart","tokenizeDefinitionContinuation","gfmFootnoteDefinitionEnd","tokenizeGfmFootnoteCall","tokenizePotentialGfmFootnoteCall","resolveToPotentialGfmFootnoteCall","effects","ok","nok","self","index","defined","labelStart","token","start","code","id","normalizeIdentifier","events","context","call","marker","string","chunk","replacement","size","data","callStart","callData","markdownLineEndingOrSpace","callEscape","identifier","labelAtMarker","labelInside","labelAfter","labelEscape","factorySpace","whitespaceAfter","blankLine","afterPrefix","tail","gfmStrikethrough","options","single","tokenizer","tokenizeStrikethrough","resolveAllStrikethrough","events","context","index","open","strikethrough","text","nextEvents","insideSpan","splice","resolveAll","effects","ok","nok","previous","size","start","code","more","before","classifyCharacter","token","after","EditMap","index","remove","add","addImplementation","events","b","vecs","slice","element","editMap","at","gfmTableAlign","events","index","inDelimiterRow","align","event","alignIndex","gfmTable","tokenizeTable","resolveTable","effects","ok","nok","self","size","sizeB","seen","start","code","index","type","tail","next","bodyRowStart","headRowBefore","headRowStart","headRowBreak","markdownLineEnding","headDelimiterStart","markdownSpace","factorySpace","headRowData","markdownLineEndingOrSpace","headRowEscape","headDelimiterBefore","headDelimiterValueBefore","headDelimiterCellBefore","headDelimiterNok","headDelimiterLeftAlignmentAfter","headDelimiterCellAfter","headDelimiterFiller","headDelimiterRightAlignmentAfter","bodyRowBreak","bodyRowData","bodyRowEscape","events","context","inFirstCellAwaitingPipe","rowKind","lastCell","cell","afterHeadAwaitingFirstBodyRow","lastTableEnd","currentTable","currentBody","currentCell","map","EditMap","event","token","flushTableEnd","flushCell","gfmTableAlign","range","rowEnd","previousCell","groupName","valueName","getPoint","now","relatedStart","relatedEnd","valueToken","end","a","b","table","tableBody","exits","related","side","tasklistCheck","tokenizeTasklistCheck","gfmTaskListItem","effects","ok","nok","self","open","code","inside","markdownLineEndingOrSpace","close","after","markdownLineEnding","markdownSpace","spaceThenNonSpace","factorySpace","gfm","options","combineExtensions","gfmAutolinkLiteral","gfmFootnote","gfmStrikethrough","gfmTable","gfmTaskListItem","inConstruct","notInConstruct","gfmAutolinkLiteralToMarkdown","inConstruct","notInConstruct","footnoteReference","footnoteReferencePeek","footnoteReferencePeek","footnoteReference","node","_","state","info","tracker","value","exit","subexit","gfmFootnoteToMarkdown","options","firstLineBlank","footnoteDefinition","footnoteReference","node","_","state","info","tracker","value","exit","subexit","mapAll","mapExceptFirst","line","index","blank","constructsWithoutStrikethrough","handleDelete","peekDelete","gfmStrikethroughToMarkdown","constructsWithoutStrikethrough","handleDelete","handleDelete","node","_","state","info","tracker","exit","value","peekDelete","gfmTaskListItemToMarkdown","listItemWithTaskListItem","listItemWithTaskListItem","node","parent","state","info","head","checkable","checkbox","tracker","value","handle","check","$0","gfmToMarkdown","options","gfmAutolinkLiteralToMarkdown","gfmFootnoteToMarkdown","gfmStrikethroughToMarkdown","gfmTableToMarkdown","gfmTaskListItemToMarkdown","customRemarkGfm","data","micromarkExtensions","fromMarkdownExtensions","toMarkdownExtensions","gfm","patchedFromMarkdown","extension","gfmTableFromMarkdown","originalEnterTable","token","originalExitTable","gfmToMarkdown","escapeUrlSlashes","text","markdownLinkPattern","links","linkIndex","textWithoutLinks","match","urlPattern","result","url","i","unescapeUrlSlashes","char","assert","pass","message","assertElementType","element","type","assertUnreachable","x","parseBlockquote","content","parseContents","parseCodeBlock","content","codeLines","codeLine","parseFootnoteDefinition","footnote","parseContents","isText","segment","Text","isElement","Element","isPlainSpace","MARK_KEY_TO_TOKEN","convertMarkToSymbol","mark","convertMarksToSymbolsExceptCode","marks","getMarksFromText","text","_","marks","getMarksFromSegment","segment","Text","isPlainSpace","getCommonAnchorMarks","segments","commonMarks","isText","currentMarks","commonMark","ORDERED_MARK_KEYS","sortMarks","marks","a","b","ESCAPES","ESCAPES_REGEXP","symbol","escapeText","s","areMarksEqual","a","b","marksA","getMarksFromText","marksB","v","normalizeSegment","segment","mutablePrevSegment","segmentIsText","Text","prevSegmentIsText","normalizeSegments","segments","nextSegments","i","mutablePrevSegment","normalizeSegment","Text","parseGenericImage","image","URL_REGEX","parseUrl","url","urlData","matchdata","_","pathname","searchParams","hash","parseSize","s","sizeMatch","parsePortiveImage","image","url","parseUrl","sizeParam","size","parseSize","srcSizeMatch","parseUncommonMarkImage","image","url","parseUrl","params","size","parseSize","srcSize","imageParsers","parsePortiveImage","parseUncommonMarkImage","parseGenericImage","parseInlineImage","image","imageParser","imageParsers","imageData","parsePhrasingContents","phrasingContents","marks","segments","phrasingContent","parsePhrasingContent","normalizeSegments","parseInlineImage","assertUnreachable","parseHeading","content","parsePhrasingContents","parseHTML","content","line","parseListItemChild","child","depth","ordered","checked","parsePhrasingContents","parseList","parseContent","parseListItem","listItem","options","elements","child","parseListItemChild","parseList","list","depth","elements","listItem","parseListItem","isImageBlock","segments","NBSP","isSingleNBSP","parseParagraph","content","parsePhrasingContents","parseTable","table","align","parseTableRow","row","parseTableCell","cell","parsePhrasingContents","parseThematicBreak","parseContents","contents","elements","content","parseContent","parseBlockquote","parseCodeBlock","parseFootnoteDefinition","parseHeading","parseHTML","parseList","parseParagraph","parseTable","parseThematicBreak","assertUnreachable","convert","test","ok","typeFactory","anyFactory","propsFactory","castFactory","tests","checks","index","any","parameters","check","all","node","key","type","assertion","CONTINUE","EXIT","SKIP","visitParents","tree","test","visitor","reverse","is","convert","step","factory","node","index","parents","value","name","visit","result","subresult","offset","grandparents","toResult","visit","tree","test","visitor","reverse","visitParents","overload","node","parents","parent","own","definitions","tree","cache","visit","definition","id","clean","identifier","value","transformInlineLinks","tree","definition","definitions","visit","index","p","node","parent","SKIP","identifier","def","replacement","parser","unified","remarkParse","customRemarkGfm","parseToAst","markdown","ast","transformInlineLinks","parse","parseContents","isListItemElement","element","normalizeElementListDepths","elements","normalizedElements","previousDepth","nextDepth","serializeCodeLine","codeLine","segment","serializeCodeBlock","codeBlock","lines","backticks","codeLine","lineOfCode","serializeCodeLine","match","serializeGenericImageUrl","image","serializePortiveImageUrl","image","hostname","parseUrl","serializeUncommonmarkImageUrl","image","urlSerializers","serializePortiveImageUrl","serializeUncommonmarkImageUrl","serializeGenericImageUrl","serializeImageShared","image","urlSerializer","url","serializeImageBlock","element","serializeImageShared","findMarksToAdd","orderedMarks","targetMarks","marksWeNeedToAdd","mark","sortMarks","findMarksToRemove","orderedMarks","targetMarks","nextOrderedMarks","marksWeNeedToRemove","mark","orderedMarksToRemove","i","markToRemove","index","diffMarks","orderedMarks","targetMarks","orderedMarksToRemove","nextOrderedMarks","findMarksToRemove","orderedMarksToAdd","findMarksToAdd","mergeAdjacentSpaces","node","nextNode","nodes","index","isText","isPlainSpace","moveSpacesAtStartOfAnchor","node","nodes","prevNode","index","isElement","firstChild","isText","isPlainSpace","moveSpacesAtEndOfAnchor","nextNode","lastChild","mustHaveOneTextChild","node","isElement","sliceSpacesAtNodeBoundaries","node","nodes","index","isText","isPlainSpace","match","nextSegments","text","trimSpaceAtEndOfLine","index","nodes","node","parent","isText","isPlainSpace","isElement","trimSpaceAtStartOfLine","index","nodes","node","parent","isText","isPlainSpace","isElement","normalizers","sliceSpacesAtNodeBoundaries","moveSpacesAtStartOfAnchor","moveSpacesAtEndOfAnchor","mergeAdjacentSpaces","trimSpaceAtStartOfLine","trimSpaceAtEndOfLine","mustHaveOneTextChild","runNormalizersOnNode","normalizeOptions","normalizer","normalizers","MAX_RERUNS","normalizeNodes","nodes","parent","isAnyUpdated","isUpdated","runs","maxReruns","segmentLoop","i","node","isElement","prevNode","nextNode","runNormalizersOnNode","duplicateSegments","segments","segment","Element","normalizeLine","line","normalizeNodes","serializeCodeText","text","max","match","escapeTitle","title","serializeAnchor","anchor","commonAnchorMarks","getCommonAnchorMarks","serializeLine","serializeNonCodeText","text","escapeText","serializeSegment","segment","Text","serializeCodeText","serializeNonCodeText","serializeAnchor","serializeImageShared","assertUnreachable","serializeLine","inputSegments","leadingMarks","trailingMarks","segments","normalizeLine","substrings","leadingDiff","diffMarks","getMarksFromSegment","i","segment","Text","isPlainSpace","convertMarksToSymbolsExceptCode","serializeSegment","nextMarks","getNextMarks","trailingDiff","index","Element","serializeTable","element","lines","serializeTableRow","serializeColumns","row","columns","column","serializeAlign","align","assertElementType","serializeTableCell","assert","serializeTableContent","serializeLine","LIST_INDENT_SIZE","serializeElement","element","orders","serializeLine","serializeElements","line","serializeTable","indent","serializeImageBlock","serializeCodeBlock","assertUnreachable","serializeElements","elements","segments","orders","element","nextElement","serialized","serializeElement","joined","replaceConsecutiveNewlines","replaceLeadingNewlines","input","match","newlineCount","count","serialize","elements","normalizedElements","normalizeElementListDepths","serializeElements","translations","getLanguage","t","key","lang","r","value","k","createPlugin","fn","import_react","defined","value","createDecorate","originalFn","plugins","fns","plugin","defined","entry","ranges","fn","resultRanges","import_jsx_runtime","createEditable","plugins","fns","plugin","defined","CurrentRenderEditable","props","Editable","fn","PrevRenderEditable","extractEditableFns","plugins","key","fns","plugin","maybeFn","createHandlerFn","originalFn","event","fn","createOnKeyDown","createOnKeyUp","createOnPaste","createOnDrop","createRenderElement","originalFn","plugins","fns","plugin","defined","renderElementProps","fn","result","import_react","createRenderLeaf","originalFn","plugins","fns","plugin","defined","renderLeafProps","value","fn","possibleValue","createRenderPlaceholder","originalFn","plugins","fns","plugin","defined","renderPlaceholderProps","fn","_extends","n","e","t","React","import_react","isDevelopment","sheetForTag","tag","i","createStyleElement","options","StyleSheet","_this","before","_proto","nodes","rule","sheet","_tag$parentNode","MS","MOZ","WEBKIT","COMMENT","RULESET","DECLARATION","IMPORT","KEYFRAMES","LAYER","abs","from","assign","hash","value","length","charat","trim","match","pattern","replace","replacement","indexof","search","index","substr","begin","end","strlen","sizeof","append","array","combine","callback","line","column","length","position","character","characters","node","value","root","parent","type","props","children","copy","assign","char","prev","charat","next","peek","caret","slice","begin","end","substr","token","alloc","strlen","dealloc","delimit","trim","delimiter","whitespace","type","character","peek","next","token","escaping","index","count","next","character","slice","caret","peek","delimiter","type","position","commenter","from","identifier","token","compile","value","dealloc","parse","alloc","root","parent","rule","rules","rulesets","pseudo","points","declarations","index","offset","length","atrule","property","previous","variable","scanning","ampersand","character","type","props","children","reference","characters","next","charat","indexof","replace","delimit","whitespace","escaping","caret","peek","append","comment","commenter","strlen","declaration","ruleset","prev","from","identifier","post","size","sizeof","i","j","k","x","y","substr","abs","z","trim","node","RULESET","COMMENT","char","DECLARATION","serialize","children","callback","output","length","sizeof","stringify","element","index","LAYER","IMPORT","DECLARATION","COMMENT","KEYFRAMES","RULESET","strlen","middleware","collection","length","sizeof","element","index","children","callback","output","i","rulesheet","memoize","fn","cache","arg","identifierWithPointTracking","begin","points","index","previous","character","peek","token","next","slice","position","toRules","parsed","delimit","from","getRules","value","dealloc","alloc","fixedElements","compat","element","parent","isImplicitRule","rules","parentRules","i","k","j","removeLabel","prefix","length","hash","WEBKIT","MOZ","MS","replace","strlen","charat","indexof","prefixer","children","callback","DECLARATION","KEYFRAMES","serialize","copy","RULESET","combine","match","defaultStylisPlugins","createCache","options","key","ssrStyles","node","dataEmotionAttribute","stylisPlugins","inserted","container","nodesToHydrate","attrib","_insert","omnipresentPlugins","currentSheet","finalizingPlugins","stringify","rulesheet","rule","serializer","middleware","stylis","styles","compile","selector","serialized","sheet","shouldCache","cache","StyleSheet","isBrowser","getRegisteredStyles","registered","registeredStyles","classNames","rawClassName","className","registerStyles","cache","serialized","isStringTag","insertStyles","current","murmur2","str","h","k","i","len","unitlessKeys","isDevelopment","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","value","processStyleName","memoize","styleName","processStyleValue","key","match","p1","p2","cursor","unitlessKeys","noComponentSelectorMessage","handleInterpolation","mergedProps","registered","interpolation","componentSelector","keyframes","serializedStyles","next","styles","createStringFromObject","previousCursor","result","asString","cached","obj","string","_i","interpolated","labelPattern","serializeStyles","args","stringMode","strings","asTemplateStringsArr","i","templateStringsArr","identifierName","name","murmur2","React","syncFallback","create","useInsertionEffect","useInsertionEffectAlwaysWithSyncFallback","useInsertionEffectWithLayoutFallback","isDevelopment","EmotionCacheContext","createCache","CacheProvider","withEmotionCache","func","props","ref","cache","EmotionCacheContext","ThemeContext","hasOwn","typePropName","createEmotionProps","type","props","newProps","_key","Insertion","_ref","cache","serialized","isStringTag","registerStyles","useInsertionEffectAlwaysWithSyncFallback","insertStyles","Emotion","withEmotionCache","ref","cssProp","WrappedComponent","registeredStyles","className","getRegisteredStyles","serializeStyles","ThemeContext","_key2","isDevelopment","Emotion$1","React","import_hoist_non_react_statics","jsx","type","props","args","hasOwn","argsLength","createElementArgArray","Emotion$1","createEmotionProps","i","_jsx","JSX","_JSX","Global","withEmotionCache","cache","styles","serialized","serializeStyles","ThemeContext","sheetRef","useInsertionEffectWithLayoutFallback","key","sheet","rehydrating","node","sheetRefCurrent","insertStyles","element","css","_len","_key","React","reactPropsRegex","isPropValid","memoize","prop","isDevelopment","testOmitPropsOnStringTag","isPropValid","testOmitPropsOnComponent","key","getDefaultShouldForwardProp","tag","composeShouldForwardProps","options","isReal","shouldForwardProp","optionsShouldForwardProp","propName","Insertion","_ref","cache","serialized","isStringTag","registerStyles","useInsertionEffectAlwaysWithSyncFallback","insertStyles","createStyled","baseTag","identifierName","targetClassName","defaultShouldForwardProp","shouldUseAs","args","styles","templateStringsArr","len","i","Styled","withEmotionCache","props","ref","FinalTag","className","classInterpolations","mergedProps","ThemeContext","getRegisteredStyles","serializeStyles","finalShouldForwardProp","newProps","_key","nextTag","nextOptions","newStyled","_extends","import_react","tags","newStyled","createStyled","tagName","SinkReset","newStyled","import_jsx_runtime","SinkEditable","originalProps","editor","useSlateStatic","Editor","plugins","nextProps","createDecorate","createRenderElement","createRenderLeaf","createRenderPlaceholder","createOnKeyDown","createOnKeyUp","createOnPaste","createOnDrop","NextEditable","createEditable","createBooleanAction","editor","actionKey","plugins","originalAction","actionPlugins","plugin","node","result","createVoidAction","editor","actionKey","plugins","originalAction","actionPlugins","plugin","args","isHandled","afterHandledCallbacks","response","callback","createWithSink","pluginFns","originalEditor","options","editor","plugins","plugin","x","createVoidAction","createBooleanAction","createSink","pluginFunctions","fns","plugin","createWithSink","SinkEditable","betterAt","editor","at","Element","ReactEditor","curryOne","fn","curriedArg","curryTwo","arg1","arg2","IS_MAC_REGEX","isMacValue","isMac","userAgent","stopEvent","standardizeNodeMatcher","matchNode","node","Element","findElementUp","editor","matchNode","at","nextAt","betterAt","match","standardizeNodeMatcher","Path","nodeEntryExactlyAt","Editor","findElementUpPath","args","import_jsx_runtime","TablerIcon","strokeWidth","props","isCollapsed","selection","Range","createIsElementType","type","node","Element","isEndOfElement","editor","matchNode","selection","isCollapsed","entry","findElementUp","Editor","isStartOfElement","editor","matchNode","selection","isCollapsed","entry","findElementUp","Editor","import_is_hotkey","isSpace","isShiftSpace","createAutocompleteSpaceHandler","editor","methods","e","selection","Range","convertibleBlockEntry","findElementUp","node","Element","range","Editor","text","method","stopEvent","deleteRange","Transforms","import_is_hotkey","isBetterHotkey","hotkey","modifiedHotkey","isMac","createHotkeyHandler","shortcutsObject","shortcuts","event","shortcut","fn","isBetterHotkey","isShortcut","action","response","forceNormalizePath","editor","path","Editor","Transforms","normalizeSiblings","editor","entry","transform","path","prevEntry","Editor","nextEntry","selectStartOfElement","editor","path","Transforms","Editor","selectEndOfElement","createTargetElement","srcElement","targetElement","insertRootElement","editor","element","at","entry","findElementUp","node","Element","selection","Editor","Transforms","nextPath","Path","rewrapElement","editor","targetElement","at","Editor","originalEntry","nextElement","createTargetElement","Transforms","setNodesDynamic","editor","convert","options","entries","Editor","entry","node","Transforms","onPaste","editor","e","clipboardData","types","text","isUrl","s","url","editLink","editor","href","title","at","link","findElementUp","Transforms","insertLink","editor","href","text","select","selection","Editor","Range","Transforms","entry","node","Text","removeLink","editor","at","link","findElementUp","Transforms","createAnchorMethods","editor","curryOne","insertLink","removeLink","editLink","normalizeNode","editor","entry","Element","children","i","child","Transforms","r","f","n","clsx","import_react","import_react","import_react_dom","Portal","children","import_jsx_runtime","LayersContext","LayerContext","Layers","children","layers","setLayers","openLayer","layer","closeLayer","layerType","nextLayers","Portal","import_react","useLayer","type","openLayer","closeLayer","layers","LayersContext","open","Component","close","$Anchor","newStyled","$Edge","$ProgressBar","$ProgressBarFill","import_react","import_react","$CloseMask","newStyled","import_jsx_runtime","CloseMask","close","ref","$CloseMask","key","MAC_KEYS","PC_KEYS","pull","arr","value","index","el","formatMac","segments","result","symbol","s","formatPC","formatHotkey","shortcut","isMac","import_react","getFixedRect","domElement","bounds","getAbsoluteRect","domElement","rect","getFixedRect","scrollY","getFixedViewport","width","getAbsoluteViewport","rect","getFixedViewport","objectMapValues","map","obj","predicate","result","keys","len","i","key","mapHTMLElementLikeRecordToRectRecord","elementLikeRecord","converElementToRect","objectMapValues","value","maybeHTMLElement","import_react","import_lodash","import_react","useThrottledRefresh","intervalInMs","counter","setState","refresh","throttle","useReposition","refresh","useThrottledRefresh","useAbsoluteReposition","elementLikeRecord","fn","refresh","useReposition","rectRecord","mapHTMLElementLikeRecordToRectRecord","element","getAbsoluteRect","getAbsoluteViewport","positionInside","src","container","pos","margin","$Panel","newStyled","SinkReset","$AnchorDialog","newStyled","$Panel","$AnchorDialogInputLine","$AnchorDialogInput","$Container","newStyled","SinkReset","$Editable","newStyled","$OuterContainer","$Container","$Menu","newStyled","$Panel","$MenuItem","$MenuDivider","$ToolbarContainer","newStyled","$Toolbar","$ToolbarDividerContainer","$ToolbarDivider","$ToolbarButton","import_react","import_jsx_runtime","MenuItem","editor","item","close","dest","menuLayer","useLayer","onClick","Component","ReactEditor","$MenuItem","formatHotkey","import_jsx_runtime","Menu","dest","items","close","editor","useSlateStatic","ref","style","useAbsoluteReposition","CloseMask","$Menu","item","index","$MenuDivider","MenuItem","import_react","import_jsx_runtime","useRect","dest","$Tooltip","newStyled","$Hotkey","Tooltip","title","hotkey","rect","import_jsx_runtime","$Triangle","newStyled","Triangle","dest","rect","useRect","import_jsx_runtime","useTooltip","title","hotkey","deps","label","useLayer","triangle","onMouseEnter","e","dest","Tooltip","Triangle","onMouseLeave","import_react","$FormGroup","newStyled","$FormCaption","$FormHint","$Textarea","$Input","$BaseButton","$PrimaryButton","$CancelButton","import_jsx_runtime","$AnchorEditDialog","newStyled","$Panel","AnchorEditDialog","destAnchor","destStartEdge","element","dialog","useLayer","style","useAbsoluteReposition","editor","useSlateStatic","href","setHref","title","setTitle","formRef","handleHrefChange","e","handleTitleChange","openAnchorDialog","AnchorDialog","handleSubmit","$FormGroup","$FormCaption","t","$Textarea","$Input","$FormHint","$PrimaryButton","$CancelButton","import_jsx_runtime","ExternalLinkIcon","props","TablerIcon","LinkOffIcon","PencilIcon","import_jsx_runtime","$AnchorDialog","newStyled","$Panel","parseUrl","s","url","AnchorDialog","destAnchor","destStartEdge","element","dialog","useLayer","editor","useSlateStatic","style","useAbsoluteReposition","removeTooltip","useTooltip","editTooltip","removeLink","openEditDialog","AnchorEditDialog","ExternalLinkIcon","LinkOffIcon","PencilIcon","import_jsx_runtime","Anchor","element","attributes","children","startEdgeRef","anchorRef","selected","useSelected","editor","useSlate","dialog","useLayer","anchor","startEdge","hasSelection","AnchorDialog","$Anchor","clsx","$Edge","import_jsx_runtime","AnchorPlugin","createPlugin","editor","_options","createPolicy","createAnchorMethods","element","curryOne","normalizeNode","onPaste","attributes","children","Anchor","isSafeDelete","editor","a","b","Path","masterEntryA","findElementUp","el","Element","masterEntryB","AtomicDeletePlugin","createPlugin","editor","entry","Editor","prevEntry","isSafeDelete","Transforms","nextEntry","noop","editor","insertImageFromUrl","url","alt","title","selection","Transforms","lastPos","Editor","ReactEditor","createImageMethods","curryOne","normalizeNode","editor","entry","$ImageBlock","newStyled","import_react","$ImageContainer","newStyled","$Image","import_react","import_react","useResizeBrowser","refresh","useThrottledRefresh","$ImageResizeInvisibleHandle","newStyled","$ImageResizeHandle","minMax","value","min","max","resizeToWidth","width","srcSize","aspect","resizeToHeight","height","resizeInBounds","size","bounds","boundsAspect","resizeInPreset","preset","getEditorWidth","editor","element","ReactEditor","computed","padding","import_jsx_runtime","getImageBoundsFromSlateElement","editor","element","imgDOMNode","ReactEditor","ImageResizeControl","srcSize","size","setSize","isDragging","setIsDragging","useSlateStatic","useResizeBrowser","editorWidth","getEditorWidth","width","maxWidth","minWidth","onMouseDown","e","stopEvent","startX","startWidth","nextSize","onDocumentMouseMove","nextWidth","minMax","resizeToWidth","onDocumentMouseUp","path","Transforms","onTouchStart","onDocumentTouchMove","te","onDocumentTouchEnd","className","clsx","$ImageResizeInvisibleHandle","$ImageResizeHandle","$ImageSizeStatus","newStyled","import_jsx_runtime","ImageSizeStatus","size","$ImageSizeStatus","$ImageToolbar","newStyled","$ImageButtonGroup","newStyled","$ImageButton","import_react","import_jsx_runtime","ImagePresetButton","element","preset","size","setSize","srcSize","editor","useSlateStatic","presetSize","resizeInPreset","tooltip","useTooltip","onClick","path","ReactEditor","nextSize","Transforms","isDisabled","isSelected","className","clsx","$ImageButton","import_jsx_runtime","ImagePresetButtonGroup","element","size","setSize","srcSize","presets","$ImageButtonGroup","preset","i","ImagePresetButton","import_react","import_jsx_runtime","BlockIcon","props","TablerIcon","InlineIcon","convertToInlineImage","editor","element","size","srcSize","path","ReactEditor","Editor","nextSize","resizeInPreset","Transforms","import_jsx_runtime","BlockImageTypeButton","element","editor","useSlateStatic","tooltip","useTooltip","onClickInline","convertToInlineImage","$ImageButton","InlineIcon","import_react","convertToBlockImage","editor","element","size","srcSize","path","ReactEditor","Editor","nextSize","resizeInPreset","Transforms","parentEntry","findElementUp","node","parentElement","parentPath","siblings","siblingCount","index","lastSibling","Text","firstSibling","removeFirstSibling","import_jsx_runtime","InlineImageTypeButton","element","editor","useSlateStatic","tooltip","useTooltip","onClickBlock","convertToBlockImage","$ImageButton","BlockIcon","import_jsx_runtime","ImageTypeButtonGroup","element","$ImageButtonGroup","InlineImageTypeButton","BlockImageTypeButton","import_jsx_runtime","ImageToolbar","element","size","setSize","srcSize","presets","$ImageToolbar","ImageTypeButtonGroup","ImagePresetButtonGroup","import_jsx_runtime","ImageWithControls","element","presets","url","selected","useSelected","isDragging","setIsDragging","size","setSize","srcSize","showControls","className","clsx","$ImageContainer","$Image","ImageToolbar","ImageSizeStatus","ImageResizeControl","import_jsx_runtime","ImageBlock","element","attributes","children","editor","useSlateStatic","$ImageBlock","ImageWithControls","$ImageInline","newStyled","import_jsx_runtime","ImageInline","element","attributes","children","editor","useSlateStatic","$ImageInline","ImageWithControls","import_jsx_runtime","renderElement","element","attributes","children","ImageBlock","ImageInline","DEFAULT_OPTIONS","ImagePlugin","createPlugin","editor","sinkOptions","createPolicy","options","createImageMethods","element","curryOne","normalizeNode","renderElement","$BlockQuote","newStyled","import_jsx_runtime","matchBlockQuoteSafe","node","Element","MAX_DEPTH","BlockQuotePlugin","createPlugin","editor","Transforms","path","match","Editor","n","children","depth","current","entry","normalizeSiblings","a","b","element","attributes","$BlockQuote","createHotkeyHandler","import_prismjs","languages","tokenize","Prism","getLineOffsets","lines","offset","lineOffsets","line","decorate","nodeEntry","node","path","Element","lang","textLines","Node","text","getPointFromOffset","i","lineOffset","ranges","tokens","token","anchor","focus","createCodeBlock","editor","language","insertRootElement","setCodeBlockLanguage","editor","language","options","entry","findElementUp","el","Element","Transforms","createCodeBlockMethods","editor","curryOne","createCodeBlock","setCodeBlockLanguage","commentStyle","dimStyle","stringStyle","operatorStyle","valueStyle","keywordStyle","functionStyle","tagStyle","boldStyle","italicStyle","tokenStyles","LanguageList","normalizeNode","editor","entry","Element","child","path","Node","Transforms","import_react","import_jsx_runtime","ChevronDownIcon","props","TablerIcon","$CodeBlock","newStyled","$CodeBlockScroller","$CodeBlockLanguage","$CodeBlockLine","import_jsx_runtime","CodeBlock","element","attributes","children","ref","selected","useSelected","dropdown","useLayer","onClick","dest","items","LanguageList","language","editor","Menu","$CodeBlock","$CodeBlockLanguage","ChevronDownIcon","$CodeBlockScroller","import_jsx_runtime","CodeBlockLine","attributes","children","selected","useSelected","$CodeBlockLine","import_jsx_runtime","renderElement","element","attributes","children","CodeBlock","CodeBlockLine","import_jsx_runtime","CodeBlockPlugin","createPlugin","editor","_options","createPolicy","createCodeBlockMethods","onDelete","selection","isCollapsed","codeBlockEntry","findElementUp","Editor","Transforms","element","curryOne","normalizeNode","decorate","createHotkeyHandler","entry","el","Element","renderElement","leaf","children","style","tokenStyles","isParagraph","node","Element","normalizeSiblingParagraphs","editor","entry","normalizeSiblings","a","b","Transforms","isWall","editor","node","Element","normalizeSiblingWalls","entry","normalizeSiblings","a","b","Transforms","normalizeNode","editor","entry","node","path","Element","normalizeSiblingWalls","normalizeSiblingParagraphs","$Paragraph","newStyled","getIsEmpty","element","Node","import_jsx_runtime","Paragraph","element","attributes","children","selected","useSelected","isEmpty","getIsEmpty","$Paragraph","clsx","import_jsx_runtime","CollapsibleParagraphPlugin","createPlugin","editor","insertBreak","selection","text","Editor","curryOne","normalizeNode","element","attributes","children","Paragraph","createHotkeyHandler","addConvertElementType","editor","type","convertElements","editor","matchForToggle","targetElement","allowToggle","entries","Editor","node","Element","entry","rewrapElement","isConvertElement","editor","element","createConvertElementMethods","editor","curryOne","addConvertElementType","isConvertElement","convertElements","ConvertElementPlugin","createPlugin","editor","createConvertElementMethods","insertBreak","editor","entry","findElementUp","Range","Editor","nextPath","Path","Transforms","convertHeading","editor","level","allowToggle","element","isHeadingActive","match","Editor","n","createHeadingMethods","curryOne","headingStyles","css","$H1","newStyled","$H2","$H3","$H4","$H5","$H6","import_jsx_runtime","HeadingPlugin","createPlugin","editor","createHeadingMethods","hotkeyHandler","createHotkeyHandler","curryTwo","autocompleteHandler","createAutocompleteSpaceHandler","curryOne","insertBreak","element","attributes","children","$H1","$H2","$H3","$H4","$H5","$H6","e","$HorizontalRule","newStyled","import_jsx_runtime","HorizontalRule","attributes","children","selected","useSelected","$HorizontalRule","insertHorizontalRule","editor","insertRootElement","createHorizontalRuleMethods","curryOne","import_jsx_runtime","HorizontalRulePlugin","createPlugin","editor","_options","createPolicy","createHorizontalRuleMethods","element","props","HorizontalRule","createHotkeyHandler","convertOrderedList","editor","allowToggle","element","convertTaskList","convertUnorderedList","MAX_DEPTH","getListDepth","editor","listItem","findElementUp","isListItem","canIncreaseDepth","isStartOfElement","canDecreaseDepth","increaseDepth","decreaseDepth","indent","editor","setNodesDynamic","node","isListItem","insertBreak","editor","entry","findElementUp","isListItem","element","path","Editor","Transforms","rewrapElement","nextEntry","outdent","editor","entries","Editor","isListItem","entry","setNodesDynamic","node","toggleTaskListItem","editor","at","taskListItem","findElementUp","nextChecked","Transforms","createListMethods","editor","curryOne","indent","outdent","convertUnorderedList","convertOrderedList","convertTaskList","insertBreak","toggleTaskListItem","getListDepth","canIncreaseDepth","canDecreaseDepth","increaseDepth","decreaseDepth","isOrderedListItem","createIsElementType","normalizeOrderedFirstAtDepth","editor","entry","node","path","Element","normalizeSiblings","a","b","__firstAtDepth","isListItem","Transforms","normalizeNode","editor","entry","node","isListItem","normalizeOrderedFirstAtDepth","import_react","$ListItem","newStyled","$UnorderedListItem","$OrderedListItem","$TaskListItem","import_jsx_runtime","OrderedListItem","element","attributes","children","editor","useSlateStatic","path","ReactEditor","normalizeOrderedFirstAtDepth","style","className","clsx","$OrderedListItem","import_react","import_jsx_runtime","UncheckedIcon","props","CheckedIcon","BulletIcon","import_jsx_runtime","TaskListItem","element","attributes","children","editor","useSlateStatic","toggle","style","$TaskListItem","CheckedIcon","UncheckedIcon","import_jsx_runtime","UnorderedListItem","element","attributes","children","style","$UnorderedListItem","BulletIcon","import_jsx_runtime","renderElement","element","attributes","children","OrderedListItem","UnorderedListItem","TaskListItem","LIST_ITEM_TYPES","isListItem","createIsElementType","ListPlugin","createPlugin","editor","_options","createPolicy","list","createListMethods","hotkeyHandler","createHotkeyHandler","curryOne","entry","normalizeNode","unit","isStartOfElement","listItem","findElementUp","listItemPath","Path","prevElementPath","prevElementEntry","Editor","renderElement","e","removeMarks","editor","at","nodeEntries","Editor","n","Text","setter","node","key","Transforms","toggleMark","editor","markKey","unsetKey","at","point","Range","isAtLineEnd","Point","Editor","validMarkKey","isActive","_","remainingMarks","createMarksMethods","editor","curryOne","removeMarks","toggleMark","$MarksSpan","newStyled","import_jsx_runtime","MarksPlugin","createPlugin","editor","createMarksMethods","hotkeyHandler","createHotkeyHandler","defaultInsertText","text","activeMarks","mark","isActive","removeMarks","point","Range","Point","Editor","leaf","children","$MarksSpan","clsx","e","forceNormalizeNearestElement","editor","entry","Editor","forceNormalizePath","NormalizeAfterDeletePlugin","createPlugin","Point","getReversedDeleteSafeRanges","editor","deleteRange","protectedTypes","positions","Editor","deleteSafeRanges","startPos","prevPos","startTdPath","findElementUpPath","pos","tdPath","Path","range","deleteFragmentWithProtectedTypes","editor","protectedTypes","start","end","Editor","startProtectedPath","findElementUpPath","endProtectedPath","Path","reversedRanges","getReversedDeleteSafeRanges","range","Transforms","getTableInfo","editor","at","cellMatch","findElementUp","rowMatch","tableMatch","tableElement","tablePath","rowElement","rowPath","cellElement","cellPath","createCell","index","children","insertColumn","editor","offset","at","t","getTableInfo","tableElement","tablePath","cellIndex","nextCellIndex","Editor","columns","nextColumns","Transforms","rowElement","i","createCell","createRow","columnCount","index","createCell","insertRow","editor","at","offset","t","getTableInfo","nextRowElement","Transforms","insertRowBelow","editor","at","insertRow","createRange","size","createColumns","columnCount","createTable","rowCount","createRow","index","createCell","insertTable","editor","at","table","insertRootElement","element","entry","findElementUp","node","Element","selection","Editor","Transforms","nextPath","Path","selectElementBelow","editor","cellIndex","rowIndex","rowCount","tablePath","selectStartOfElement","Path","selectElementAbove","selectEndOfElement","getUnreliableSelectionRect","s","getElementRect","editor","element","ReactEditor","checkIsInElement","selectionRect","elementRect","down","editor","getTableInfo","checkIsInElement","selectElementBelow","up","selectElementAbove","removeTable","editor","Transforms","removeColumn","editor","at","t","getTableInfo","tableElement","tablePath","rowIndex","cellIndex","cellCount","removeTable","Editor","columns","Transforms","rowElement","selection","removeRow","editor","at","t","getTableInfo","removeTable","Editor","Transforms","setTableColumnAlign","editor","options","t","getTableInfo","tableElement","tablePath","cellIndex","nextColumns","Transforms","tabForward","editor","getTableInfo","cellIndex","cellCount","rowIndex","rowCount","tablePath","selectStartOfElement","insertRowBelow","tabBackward","createTableMethods","editor","curryOne","getTableInfo","insertTable","insertColumn","insertRow","removeTable","removeColumn","removeRow","tabForward","tabBackward","selectCell","down","up","setTableColumnAlign","at","t","cellPath","Transforms","normalizeTableIndexes","editor","entry","isTransformed","rowElement","y","cellElement","x","Transforms","normalizeTableCell","editor","entry","node","path","Editor","Transforms","import_react","$BaseMenu","newStyled","$ColumnMenu","$RowMenu","$MenuTile","$ColumnMenuTile","$RowMenuTile","$MenuButton","$AddMenuButton","$RemoveMenuButton","$Table","newStyled","columns","column","index","$TableRow","$TableCell","$TableContent","import_react","TableContext","import_jsx_runtime","Table","element","attributes","children","editor","useSlateStatic","isSelected","useSelected","path","ReactEditor","normalizeTableIndexes","TableContext","$Table","import_react","import_react","import_jsx_runtime","PlusIcon","props","MinusIcon","BarsIcon","TablerIcon","AlignLeft","AlignCenter","AlignRight","import_jsx_runtime","ColumnMenu","cellElement","editor","useSlateStatic","menu","useLayer","buttonRef","hover","setHover","onMouseEnter","onMouseLeave","onClick","dest","items","AlignLeft","AlignCenter","AlignRight","Menu","$ColumnMenu","$ColumnMenuTile","BarsIcon","$RemoveMenuButton","MinusIcon","$AddMenuButton","PlusIcon","import_react","import_jsx_runtime","RowMenu","cellElement","editor","useSlateStatic","hover","setHover","$RowMenu","$RowMenuTile","BarsIcon","$RemoveMenuButton","MinusIcon","$AddMenuButton","PlusIcon","$TableMenu","newStyled","$TableMenuTile","import_jsx_runtime","TableMenu","$TableMenu","$TableMenuTile","import_jsx_runtime","TableCell","element","attributes","children","tableContext","TableContext","selected","useSelected","showTableMenu","showRowMenu","showColumnMenu","$TableCell","TableMenu","RowMenu","ColumnMenu","import_jsx_runtime","TableContent","attributes","children","$TableContent","import_jsx_runtime","TableRow","attributes","children","$TableRow","import_jsx_runtime","renderElement","element","attributes","children","Table","TableRow","TableCell","TableContent","TablePlugin","createPlugin","editor","_options","createPolicy","createTableMethods","isStartOfElement","isEndOfElement","deleteFragmentWithProtectedTypes","findElementUp","element","entry","node","Element","normalizeTableIndexes","normalizeTableCell","renderElement","createHotkeyHandler","blue","zincShades","globalStyles","css","blue","import_jsx_runtime","ThemePlugin","createPlugin","editor","attributes","Editable","Global","globalStyles","import_react","import_react","$TableDialog","newStyled","$Panel","$TableDialogGrid","$TableDialogGridCell","import_jsx_runtime","createRange","size","TableDialog","dest","close","hover","setHover","editor","useSlateStatic","ref","style","useAbsoluteReposition","rows","i","cols","hoverCell","x","y","createTable","ReactEditor","CloseMask","$TableDialog","$TableDialogGrid","selected","$TableDialogGridCell","clsx","import_lodash","import_react","import_jsx_runtime","H","TablerIcon","More","LinkPlus","H1","H2","H3","Normal","TablerIcon","Bold","Italic","Link","TablerIcon","Quote","TablerIcon","DoubleQuote","BulletList","TablerIcon","Table","Plus","TablerIcon","Strikethrough","Underline","ListCheck","TablerIcon","ListNumbers","IncreaseDepth","DecreaseDepth","Markdown","VisualEditor","listDepthItems","IncreaseDepth","t","editor","DecreaseDepth","blockItems","Normal","H1","H2","H3","expandedBlockItems","compactBlockItems","H","import_is_hotkey","import_react","$DialogButton","newStyled","$DialogHint","import_jsx_runtime","isEnter","AnchorDialog","dest","close","editor","useSlateStatic","ref","style","useAbsoluteReposition","src","viewport","positionInside","url","setUrl","insertLink","ReactEditor","onChangeInput","e","CloseMask","$AnchorDialog","$AnchorDialogInputLine","$AnchorDialogInput","$DialogButton","Link","LinkPlus","$DialogHint","dialogItems","Link","t","AnchorDialog","Table","TableDialog","expandedDialogItems","compactDialogItems","Plus","getMarks","editor","marks","Editor","primaryMarkItems","Bold","t","Italic","Strikethrough","Underline","expandedMarkItems","compactMarkItems","listItems","BulletList","t","editor","ListNumbers","ListCheck","expandedListItems","listDepthItems","compactListItems","quoteItemsList","Quote","t","editor","DoubleQuote","expandedQuoteItems","compactQuoteItems","rawModeItem","Markdown","t","editor","visualModeItem","VisualEditor","largeItems","expandedBlockItems","expandedListItems","expandedMarkItems","expandedQuoteItems","expandedDialogItems","rawModeItem","visualModeItem","mediumItems","compactBlockItems","compactDialogItems","smallItems","compactListItems","compactMarkItems","compactQuoteItems","initialItems","itemSets","largeItems","mediumItems","smallItems","import_react","import_jsx_runtime","ToolbarButton","item","staticEditor","useSlateStatic","editor","useSlate","isActive","ref","tooltip","useTooltip","formatHotkey","menuLayer","useLayer","openMenu","dest","items","Component","Menu","onClick","ReactEditor","onMouseEnter","e","$ToolbarButton","clsx","r","More","import_jsx_runtime","ToolbarItem","item","editor","useSlateStatic","$ToolbarDividerContainer","$ToolbarDivider","ToolbarButton","getWidths","toolbar","button","divider","measureItemSetWidth","items","buttonWidth","dividerWidth","width","Toolbar","ref","setItems","initialItems","refresh","throttle","widths","i","itemSets","$ToolbarContainer","$Toolbar","index","import_jsx_runtime","renderEditable","attributes","Editable","outerContainerRef","editor","useSlateStatic","focused","useFocused","onClickOuterContainer","e","Transforms","Editor","ReactEditor","Layers","$OuterContainer","clsx","Toolbar","$Editable","ToolbarPlugin","createPlugin","editor","options","renderEditable","TrailingBlockPlugin","createPlugin","editor","entry","Editor","lastPath","lastElement","Node","Transforms","Path","pasteMarkdown","editor","markdown","escapedMarkdown","escapeUrlSlashes","fragment","parse","Transforms","createPasteMarkdownMethods","curryOne","PasteMarkdownPlugin","createPlugin","editor","createPasteMarkdownMethods","e","types","markdown","stopEvent","import_jsx_runtime","renderPlaceholder","props","nextAttributes","PlaceholderPlugin","createPlugin","editor","_options","createPolicy","plugins","PasteMarkdownPlugin","ConvertElementPlugin","AnchorPlugin","HeadingPlugin","MarksPlugin","BlockQuotePlugin","CodeBlockPlugin","TablePlugin","HorizontalRulePlugin","TrailingBlockPlugin","ListPlugin","AtomicDeletePlugin","NormalizeAfterDeletePlugin","CollapsibleParagraphPlugin","ThemePlugin","ToolbarPlugin","ImagePlugin","PlaceholderPlugin","Sink","createSink","plugins","withSink","SinkEditable","import_react","History","isHistory","value","isPlainObject","Array","isArray","redos","undos","length","Operation","isOperationList","SAVING","WeakMap","MERGING","HistoryEditor","isHistoryEditor","value","History","isHistory","history","Editor","isEditor","isMerging","editor","get","isSaving","redo","undo","withoutMerging","fn","prev","set","withoutSaving","withHistory","e","apply","undos","redos","length","batch","selectionBefore","Transforms","setSelection","withoutNormalizing","op","operations","pop","push","inverseOps","map","Operation","inverse","reverse","lastBatch","lastOp","save","merge","shouldSave","shouldMerge","selection","shift","type","offset","text","Path","equals","path","useEditor","authToken","height","minHeight","maxHeight","editor","createEditor","nextEditor","withSink","withReact","withHistory","serialize","markdown","escapedMarkdown","escapeUrlSlashes","documentValue","parse","Transforms","Editor","import_jsx_runtime","renderLeaf","children","attributes","Editable","editor","value","onChange","throttleInMs","placeholder","className","style","isRawMode","setIsRawMode","rawText","setRawText","ignoreNextChangeRef","initialValueRef","prevValueRef","onThrottledSlateChange","throttle","markdown","serialize","onSlateChange","valueToProcess","escapeUrlSlashes","parse","documentValue","Transforms","Editor","onSinkeEditableMouseDown","ReactEditor","onBlur","handleRawTextChange","e","newText","applyRawTextToEditor","updateRawTextFromEditor","currentMarkdown","handleRawModeToggle","t","VisualEditor","unescapeUrlSlashes","Slate","SinkEditable","import_jsx_runtime","StandaloneEditor","onChange","placeholder","className","options","standaloneMethodsRef","markdown","setMarkdown","markdownRef","editor","useEditor","onChangeEditable","Editable","createWysimark","containerElement","root"]}